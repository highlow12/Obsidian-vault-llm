"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/better-sqlite3/lib/util.js
var require_util = __commonJS({
  "node_modules/better-sqlite3/lib/util.js"(exports2) {
    "use strict";
    exports2.getBooleanOption = (options2, key) => {
      let value = false;
      if (key in options2 && typeof (value = options2[key]) !== "boolean") {
        throw new TypeError(`Expected the "${key}" option to be a boolean`);
      }
      return value;
    };
    exports2.cppdb = Symbol();
    exports2.inspect = Symbol.for("nodejs.util.inspect.custom");
  }
});

// node_modules/better-sqlite3/lib/sqlite-error.js
var require_sqlite_error = __commonJS({
  "node_modules/better-sqlite3/lib/sqlite-error.js"(exports2, module2) {
    "use strict";
    var descriptor = { value: "SqliteError", writable: true, enumerable: false, configurable: true };
    function SqliteError(message, code) {
      if (new.target !== SqliteError) {
        return new SqliteError(message, code);
      }
      if (typeof code !== "string") {
        throw new TypeError("Expected second argument to be a string");
      }
      Error.call(this, message);
      descriptor.value = "" + message;
      Object.defineProperty(this, "message", descriptor);
      Error.captureStackTrace(this, SqliteError);
      this.code = code;
    }
    Object.setPrototypeOf(SqliteError, Error);
    Object.setPrototypeOf(SqliteError.prototype, Error.prototype);
    Object.defineProperty(SqliteError.prototype, "name", descriptor);
    module2.exports = SqliteError;
  }
});

// node_modules/file-uri-to-path/index.js
var require_file_uri_to_path = __commonJS({
  "node_modules/file-uri-to-path/index.js"(exports2, module2) {
    var sep = require("path").sep || "/";
    module2.exports = fileUriToPath;
    function fileUriToPath(uri) {
      if ("string" != typeof uri || uri.length <= 7 || "file://" != uri.substring(0, 7)) {
        throw new TypeError("must pass in a file:// URI to convert to a file path");
      }
      var rest = decodeURI(uri.substring(7));
      var firstSlash = rest.indexOf("/");
      var host = rest.substring(0, firstSlash);
      var path = rest.substring(firstSlash + 1);
      if ("localhost" == host) host = "";
      if (host) {
        host = sep + sep + host;
      }
      path = path.replace(/^(.+)\|/, "$1:");
      if (sep == "\\") {
        path = path.replace(/\//g, "\\");
      }
      if (/^.+\:/.test(path)) {
      } else {
        path = sep + path;
      }
      return host + path;
    }
  }
});

// node_modules/bindings/bindings.js
var require_bindings = __commonJS({
  "node_modules/bindings/bindings.js"(exports2, module2) {
    var fs = require("fs");
    var path = require("path");
    var fileURLToPath = require_file_uri_to_path();
    var join2 = path.join;
    var dirname = path.dirname;
    var exists = fs.accessSync && function(path2) {
      try {
        fs.accessSync(path2);
      } catch (e) {
        return false;
      }
      return true;
    } || fs.existsSync || path.existsSync;
    var defaults = {
      arrow: process.env.NODE_BINDINGS_ARROW || " \u2192 ",
      compiled: process.env.NODE_BINDINGS_COMPILED_DIR || "compiled",
      platform: process.platform,
      arch: process.arch,
      nodePreGyp: "node-v" + process.versions.modules + "-" + process.platform + "-" + process.arch,
      version: process.versions.node,
      bindings: "bindings.node",
      try: [
        // node-gyp's linked version in the "build" dir
        ["module_root", "build", "bindings"],
        // node-waf and gyp_addon (a.k.a node-gyp)
        ["module_root", "build", "Debug", "bindings"],
        ["module_root", "build", "Release", "bindings"],
        // Debug files, for development (legacy behavior, remove for node v0.9)
        ["module_root", "out", "Debug", "bindings"],
        ["module_root", "Debug", "bindings"],
        // Release files, but manually compiled (legacy behavior, remove for node v0.9)
        ["module_root", "out", "Release", "bindings"],
        ["module_root", "Release", "bindings"],
        // Legacy from node-waf, node <= 0.4.x
        ["module_root", "build", "default", "bindings"],
        // Production "Release" buildtype binary (meh...)
        ["module_root", "compiled", "version", "platform", "arch", "bindings"],
        // node-qbs builds
        ["module_root", "addon-build", "release", "install-root", "bindings"],
        ["module_root", "addon-build", "debug", "install-root", "bindings"],
        ["module_root", "addon-build", "default", "install-root", "bindings"],
        // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}
        ["module_root", "lib", "binding", "nodePreGyp", "bindings"]
      ]
    };
    function bindings(opts) {
      if (typeof opts == "string") {
        opts = { bindings: opts };
      } else if (!opts) {
        opts = {};
      }
      Object.keys(defaults).map(function(i2) {
        if (!(i2 in opts)) opts[i2] = defaults[i2];
      });
      if (!opts.module_root) {
        opts.module_root = exports2.getRoot(exports2.getFileName());
      }
      if (path.extname(opts.bindings) != ".node") {
        opts.bindings += ".node";
      }
      var requireFunc = typeof __webpack_require__ === "function" ? __non_webpack_require__ : require;
      var tries = [], i = 0, l = opts.try.length, n, b, err;
      for (; i < l; i++) {
        n = join2.apply(
          null,
          opts.try[i].map(function(p) {
            return opts[p] || p;
          })
        );
        tries.push(n);
        try {
          b = opts.path ? requireFunc.resolve(n) : requireFunc(n);
          if (!opts.path) {
            b.path = n;
          }
          return b;
        } catch (e) {
          if (e.code !== "MODULE_NOT_FOUND" && e.code !== "QUALIFIED_PATH_RESOLUTION_FAILED" && !/not find/i.test(e.message)) {
            throw e;
          }
        }
      }
      err = new Error(
        "Could not locate the bindings file. Tried:\n" + tries.map(function(a) {
          return opts.arrow + a;
        }).join("\n")
      );
      err.tries = tries;
      throw err;
    }
    module2.exports = exports2 = bindings;
    exports2.getFileName = function getFileName(calling_file) {
      var origPST = Error.prepareStackTrace, origSTL = Error.stackTraceLimit, dummy = {}, fileName;
      Error.stackTraceLimit = 10;
      Error.prepareStackTrace = function(e, st) {
        for (var i = 0, l = st.length; i < l; i++) {
          fileName = st[i].getFileName();
          if (fileName !== __filename) {
            if (calling_file) {
              if (fileName !== calling_file) {
                return;
              }
            } else {
              return;
            }
          }
        }
      };
      Error.captureStackTrace(dummy);
      dummy.stack;
      Error.prepareStackTrace = origPST;
      Error.stackTraceLimit = origSTL;
      var fileSchema = "file://";
      if (fileName.indexOf(fileSchema) === 0) {
        fileName = fileURLToPath(fileName);
      }
      return fileName;
    };
    exports2.getRoot = function getRoot(file) {
      var dir = dirname(file), prev;
      while (true) {
        if (dir === ".") {
          dir = process.cwd();
        }
        if (exists(join2(dir, "package.json")) || exists(join2(dir, "node_modules"))) {
          return dir;
        }
        if (prev === dir) {
          throw new Error(
            'Could not find module root given file: "' + file + '". Do you have a `package.json` file? '
          );
        }
        prev = dir;
        dir = join2(dir, "..");
      }
    };
  }
});

// node_modules/better-sqlite3/lib/methods/wrappers.js
var require_wrappers = __commonJS({
  "node_modules/better-sqlite3/lib/methods/wrappers.js"(exports2) {
    "use strict";
    var { cppdb } = require_util();
    exports2.prepare = function prepare(sql) {
      return this[cppdb].prepare(sql, this, false);
    };
    exports2.exec = function exec(sql) {
      this[cppdb].exec(sql);
      return this;
    };
    exports2.close = function close() {
      this[cppdb].close();
      return this;
    };
    exports2.loadExtension = function loadExtension(...args) {
      this[cppdb].loadExtension(...args);
      return this;
    };
    exports2.defaultSafeIntegers = function defaultSafeIntegers(...args) {
      this[cppdb].defaultSafeIntegers(...args);
      return this;
    };
    exports2.unsafeMode = function unsafeMode(...args) {
      this[cppdb].unsafeMode(...args);
      return this;
    };
    exports2.getters = {
      name: {
        get: function name() {
          return this[cppdb].name;
        },
        enumerable: true
      },
      open: {
        get: function open() {
          return this[cppdb].open;
        },
        enumerable: true
      },
      inTransaction: {
        get: function inTransaction() {
          return this[cppdb].inTransaction;
        },
        enumerable: true
      },
      readonly: {
        get: function readonly() {
          return this[cppdb].readonly;
        },
        enumerable: true
      },
      memory: {
        get: function memory() {
          return this[cppdb].memory;
        },
        enumerable: true
      }
    };
  }
});

// node_modules/better-sqlite3/lib/methods/transaction.js
var require_transaction = __commonJS({
  "node_modules/better-sqlite3/lib/methods/transaction.js"(exports2, module2) {
    "use strict";
    var { cppdb } = require_util();
    var controllers = /* @__PURE__ */ new WeakMap();
    module2.exports = function transaction(fn) {
      if (typeof fn !== "function") throw new TypeError("Expected first argument to be a function");
      const db = this[cppdb];
      const controller = getController(db, this);
      const { apply } = Function.prototype;
      const properties = {
        default: { value: wrapTransaction(apply, fn, db, controller.default) },
        deferred: { value: wrapTransaction(apply, fn, db, controller.deferred) },
        immediate: { value: wrapTransaction(apply, fn, db, controller.immediate) },
        exclusive: { value: wrapTransaction(apply, fn, db, controller.exclusive) },
        database: { value: this, enumerable: true }
      };
      Object.defineProperties(properties.default.value, properties);
      Object.defineProperties(properties.deferred.value, properties);
      Object.defineProperties(properties.immediate.value, properties);
      Object.defineProperties(properties.exclusive.value, properties);
      return properties.default.value;
    };
    var getController = (db, self) => {
      let controller = controllers.get(db);
      if (!controller) {
        const shared = {
          commit: db.prepare("COMMIT", self, false),
          rollback: db.prepare("ROLLBACK", self, false),
          savepoint: db.prepare("SAVEPOINT `	_bs3.	`", self, false),
          release: db.prepare("RELEASE `	_bs3.	`", self, false),
          rollbackTo: db.prepare("ROLLBACK TO `	_bs3.	`", self, false)
        };
        controllers.set(db, controller = {
          default: Object.assign({ begin: db.prepare("BEGIN", self, false) }, shared),
          deferred: Object.assign({ begin: db.prepare("BEGIN DEFERRED", self, false) }, shared),
          immediate: Object.assign({ begin: db.prepare("BEGIN IMMEDIATE", self, false) }, shared),
          exclusive: Object.assign({ begin: db.prepare("BEGIN EXCLUSIVE", self, false) }, shared)
        });
      }
      return controller;
    };
    var wrapTransaction = (apply, fn, db, { begin, commit, rollback, savepoint, release, rollbackTo }) => function sqliteTransaction() {
      let before, after, undo;
      if (db.inTransaction) {
        before = savepoint;
        after = release;
        undo = rollbackTo;
      } else {
        before = begin;
        after = commit;
        undo = rollback;
      }
      before.run();
      try {
        const result = apply.call(fn, this, arguments);
        if (result && typeof result.then === "function") {
          throw new TypeError("Transaction function cannot return a promise");
        }
        after.run();
        return result;
      } catch (ex) {
        if (db.inTransaction) {
          undo.run();
          if (undo !== rollback) after.run();
        }
        throw ex;
      }
    };
  }
});

// node_modules/better-sqlite3/lib/methods/pragma.js
var require_pragma = __commonJS({
  "node_modules/better-sqlite3/lib/methods/pragma.js"(exports2, module2) {
    "use strict";
    var { getBooleanOption, cppdb } = require_util();
    module2.exports = function pragma(source, options2) {
      if (options2 == null) options2 = {};
      if (typeof source !== "string") throw new TypeError("Expected first argument to be a string");
      if (typeof options2 !== "object") throw new TypeError("Expected second argument to be an options object");
      const simple = getBooleanOption(options2, "simple");
      const stmt = this[cppdb].prepare(`PRAGMA ${source}`, this, true);
      return simple ? stmt.pluck().get() : stmt.all();
    };
  }
});

// node_modules/better-sqlite3/lib/methods/backup.js
var require_backup = __commonJS({
  "node_modules/better-sqlite3/lib/methods/backup.js"(exports2, module2) {
    "use strict";
    var fs = require("fs");
    var path = require("path");
    var { promisify } = require("util");
    var { cppdb } = require_util();
    var fsAccess = promisify(fs.access);
    module2.exports = async function backup(filename, options2) {
      if (options2 == null) options2 = {};
      if (typeof filename !== "string") throw new TypeError("Expected first argument to be a string");
      if (typeof options2 !== "object") throw new TypeError("Expected second argument to be an options object");
      filename = filename.trim();
      const attachedName = "attached" in options2 ? options2.attached : "main";
      const handler = "progress" in options2 ? options2.progress : null;
      if (!filename) throw new TypeError("Backup filename cannot be an empty string");
      if (filename === ":memory:") throw new TypeError('Invalid backup filename ":memory:"');
      if (typeof attachedName !== "string") throw new TypeError('Expected the "attached" option to be a string');
      if (!attachedName) throw new TypeError('The "attached" option cannot be an empty string');
      if (handler != null && typeof handler !== "function") throw new TypeError('Expected the "progress" option to be a function');
      await fsAccess(path.dirname(filename)).catch(() => {
        throw new TypeError("Cannot save backup because the directory does not exist");
      });
      const isNewFile = await fsAccess(filename).then(() => false, () => true);
      return runBackup(this[cppdb].backup(this, attachedName, filename, isNewFile), handler || null);
    };
    var runBackup = (backup, handler) => {
      let rate = 0;
      let useDefault = true;
      return new Promise((resolve, reject) => {
        setImmediate(function step() {
          try {
            const progress = backup.transfer(rate);
            if (!progress.remainingPages) {
              backup.close();
              resolve(progress);
              return;
            }
            if (useDefault) {
              useDefault = false;
              rate = 100;
            }
            if (handler) {
              const ret = handler(progress);
              if (ret !== void 0) {
                if (typeof ret === "number" && ret === ret) rate = Math.max(0, Math.min(2147483647, Math.round(ret)));
                else throw new TypeError("Expected progress callback to return a number or undefined");
              }
            }
            setImmediate(step);
          } catch (err) {
            backup.close();
            reject(err);
          }
        });
      });
    };
  }
});

// node_modules/better-sqlite3/lib/methods/serialize.js
var require_serialize = __commonJS({
  "node_modules/better-sqlite3/lib/methods/serialize.js"(exports2, module2) {
    "use strict";
    var { cppdb } = require_util();
    module2.exports = function serialize(options2) {
      if (options2 == null) options2 = {};
      if (typeof options2 !== "object") throw new TypeError("Expected first argument to be an options object");
      const attachedName = "attached" in options2 ? options2.attached : "main";
      if (typeof attachedName !== "string") throw new TypeError('Expected the "attached" option to be a string');
      if (!attachedName) throw new TypeError('The "attached" option cannot be an empty string');
      return this[cppdb].serialize(attachedName);
    };
  }
});

// node_modules/better-sqlite3/lib/methods/function.js
var require_function = __commonJS({
  "node_modules/better-sqlite3/lib/methods/function.js"(exports2, module2) {
    "use strict";
    var { getBooleanOption, cppdb } = require_util();
    module2.exports = function defineFunction(name, options2, fn) {
      if (options2 == null) options2 = {};
      if (typeof options2 === "function") {
        fn = options2;
        options2 = {};
      }
      if (typeof name !== "string") throw new TypeError("Expected first argument to be a string");
      if (typeof fn !== "function") throw new TypeError("Expected last argument to be a function");
      if (typeof options2 !== "object") throw new TypeError("Expected second argument to be an options object");
      if (!name) throw new TypeError("User-defined function name cannot be an empty string");
      const safeIntegers = "safeIntegers" in options2 ? +getBooleanOption(options2, "safeIntegers") : 2;
      const deterministic = getBooleanOption(options2, "deterministic");
      const directOnly = getBooleanOption(options2, "directOnly");
      const varargs = getBooleanOption(options2, "varargs");
      let argCount = -1;
      if (!varargs) {
        argCount = fn.length;
        if (!Number.isInteger(argCount) || argCount < 0) throw new TypeError("Expected function.length to be a positive integer");
        if (argCount > 100) throw new RangeError("User-defined functions cannot have more than 100 arguments");
      }
      this[cppdb].function(fn, name, argCount, safeIntegers, deterministic, directOnly);
      return this;
    };
  }
});

// node_modules/better-sqlite3/lib/methods/aggregate.js
var require_aggregate = __commonJS({
  "node_modules/better-sqlite3/lib/methods/aggregate.js"(exports2, module2) {
    "use strict";
    var { getBooleanOption, cppdb } = require_util();
    module2.exports = function defineAggregate(name, options2) {
      if (typeof name !== "string") throw new TypeError("Expected first argument to be a string");
      if (typeof options2 !== "object" || options2 === null) throw new TypeError("Expected second argument to be an options object");
      if (!name) throw new TypeError("User-defined function name cannot be an empty string");
      const start = "start" in options2 ? options2.start : null;
      const step = getFunctionOption(options2, "step", true);
      const inverse = getFunctionOption(options2, "inverse", false);
      const result = getFunctionOption(options2, "result", false);
      const safeIntegers = "safeIntegers" in options2 ? +getBooleanOption(options2, "safeIntegers") : 2;
      const deterministic = getBooleanOption(options2, "deterministic");
      const directOnly = getBooleanOption(options2, "directOnly");
      const varargs = getBooleanOption(options2, "varargs");
      let argCount = -1;
      if (!varargs) {
        argCount = Math.max(getLength(step), inverse ? getLength(inverse) : 0);
        if (argCount > 0) argCount -= 1;
        if (argCount > 100) throw new RangeError("User-defined functions cannot have more than 100 arguments");
      }
      this[cppdb].aggregate(start, step, inverse, result, name, argCount, safeIntegers, deterministic, directOnly);
      return this;
    };
    var getFunctionOption = (options2, key, required) => {
      const value = key in options2 ? options2[key] : null;
      if (typeof value === "function") return value;
      if (value != null) throw new TypeError(`Expected the "${key}" option to be a function`);
      if (required) throw new TypeError(`Missing required option "${key}"`);
      return null;
    };
    var getLength = ({ length }) => {
      if (Number.isInteger(length) && length >= 0) return length;
      throw new TypeError("Expected function.length to be a positive integer");
    };
  }
});

// node_modules/better-sqlite3/lib/methods/table.js
var require_table = __commonJS({
  "node_modules/better-sqlite3/lib/methods/table.js"(exports2, module2) {
    "use strict";
    var { cppdb } = require_util();
    module2.exports = function defineTable(name, factory) {
      if (typeof name !== "string") throw new TypeError("Expected first argument to be a string");
      if (!name) throw new TypeError("Virtual table module name cannot be an empty string");
      let eponymous = false;
      if (typeof factory === "object" && factory !== null) {
        eponymous = true;
        factory = defer(parseTableDefinition(factory, "used", name));
      } else {
        if (typeof factory !== "function") throw new TypeError("Expected second argument to be a function or a table definition object");
        factory = wrapFactory(factory);
      }
      this[cppdb].table(factory, name, eponymous);
      return this;
    };
    function wrapFactory(factory) {
      return function virtualTableFactory(moduleName, databaseName, tableName, ...args) {
        const thisObject = {
          module: moduleName,
          database: databaseName,
          table: tableName
        };
        const def = apply.call(factory, thisObject, args);
        if (typeof def !== "object" || def === null) {
          throw new TypeError(`Virtual table module "${moduleName}" did not return a table definition object`);
        }
        return parseTableDefinition(def, "returned", moduleName);
      };
    }
    function parseTableDefinition(def, verb, moduleName) {
      if (!hasOwnProperty.call(def, "rows")) {
        throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition without a "rows" property`);
      }
      if (!hasOwnProperty.call(def, "columns")) {
        throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition without a "columns" property`);
      }
      const rows = def.rows;
      if (typeof rows !== "function" || Object.getPrototypeOf(rows) !== GeneratorFunctionPrototype) {
        throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with an invalid "rows" property (should be a generator function)`);
      }
      let columns = def.columns;
      if (!Array.isArray(columns) || !(columns = [...columns]).every((x) => typeof x === "string")) {
        throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with an invalid "columns" property (should be an array of strings)`);
      }
      if (columns.length !== new Set(columns).size) {
        throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with duplicate column names`);
      }
      if (!columns.length) {
        throw new RangeError(`Virtual table module "${moduleName}" ${verb} a table definition with zero columns`);
      }
      let parameters;
      if (hasOwnProperty.call(def, "parameters")) {
        parameters = def.parameters;
        if (!Array.isArray(parameters) || !(parameters = [...parameters]).every((x) => typeof x === "string")) {
          throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with an invalid "parameters" property (should be an array of strings)`);
        }
      } else {
        parameters = inferParameters(rows);
      }
      if (parameters.length !== new Set(parameters).size) {
        throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with duplicate parameter names`);
      }
      if (parameters.length > 32) {
        throw new RangeError(`Virtual table module "${moduleName}" ${verb} a table definition with more than the maximum number of 32 parameters`);
      }
      for (const parameter of parameters) {
        if (columns.includes(parameter)) {
          throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with column "${parameter}" which was ambiguously defined as both a column and parameter`);
        }
      }
      let safeIntegers = 2;
      if (hasOwnProperty.call(def, "safeIntegers")) {
        const bool = def.safeIntegers;
        if (typeof bool !== "boolean") {
          throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with an invalid "safeIntegers" property (should be a boolean)`);
        }
        safeIntegers = +bool;
      }
      let directOnly = false;
      if (hasOwnProperty.call(def, "directOnly")) {
        directOnly = def.directOnly;
        if (typeof directOnly !== "boolean") {
          throw new TypeError(`Virtual table module "${moduleName}" ${verb} a table definition with an invalid "directOnly" property (should be a boolean)`);
        }
      }
      const columnDefinitions = [
        ...parameters.map(identifier).map((str2) => `${str2} HIDDEN`),
        ...columns.map(identifier)
      ];
      return [
        `CREATE TABLE x(${columnDefinitions.join(", ")});`,
        wrapGenerator(rows, new Map(columns.map((x, i) => [x, parameters.length + i])), moduleName),
        parameters,
        safeIntegers,
        directOnly
      ];
    }
    function wrapGenerator(generator, columnMap, moduleName) {
      return function* virtualTable(...args) {
        const output = args.map((x) => Buffer.isBuffer(x) ? Buffer.from(x) : x);
        for (let i = 0; i < columnMap.size; ++i) {
          output.push(null);
        }
        for (const row of generator(...args)) {
          if (Array.isArray(row)) {
            extractRowArray(row, output, columnMap.size, moduleName);
            yield output;
          } else if (typeof row === "object" && row !== null) {
            extractRowObject(row, output, columnMap, moduleName);
            yield output;
          } else {
            throw new TypeError(`Virtual table module "${moduleName}" yielded something that isn't a valid row object`);
          }
        }
      };
    }
    function extractRowArray(row, output, columnCount, moduleName) {
      if (row.length !== columnCount) {
        throw new TypeError(`Virtual table module "${moduleName}" yielded a row with an incorrect number of columns`);
      }
      const offset = output.length - columnCount;
      for (let i = 0; i < columnCount; ++i) {
        output[i + offset] = row[i];
      }
    }
    function extractRowObject(row, output, columnMap, moduleName) {
      let count = 0;
      for (const key of Object.keys(row)) {
        const index = columnMap.get(key);
        if (index === void 0) {
          throw new TypeError(`Virtual table module "${moduleName}" yielded a row with an undeclared column "${key}"`);
        }
        output[index] = row[key];
        count += 1;
      }
      if (count !== columnMap.size) {
        throw new TypeError(`Virtual table module "${moduleName}" yielded a row with missing columns`);
      }
    }
    function inferParameters({ length }) {
      if (!Number.isInteger(length) || length < 0) {
        throw new TypeError("Expected function.length to be a positive integer");
      }
      const params = [];
      for (let i = 0; i < length; ++i) {
        params.push(`$${i + 1}`);
      }
      return params;
    }
    var { hasOwnProperty } = Object.prototype;
    var { apply } = Function.prototype;
    var GeneratorFunctionPrototype = Object.getPrototypeOf(function* () {
    });
    var identifier = (str2) => `"${str2.replace(/"/g, '""')}"`;
    var defer = (x) => () => x;
  }
});

// node_modules/better-sqlite3/lib/methods/inspect.js
var require_inspect = __commonJS({
  "node_modules/better-sqlite3/lib/methods/inspect.js"(exports2, module2) {
    "use strict";
    var DatabaseInspection = function Database3() {
    };
    module2.exports = function inspect(depth, opts) {
      return Object.assign(new DatabaseInspection(), this);
    };
  }
});

// node_modules/better-sqlite3/lib/database.js
var require_database = __commonJS({
  "node_modules/better-sqlite3/lib/database.js"(exports2, module2) {
    "use strict";
    var fs = require("fs");
    var path = require("path");
    var util = require_util();
    var SqliteError = require_sqlite_error();
    var DEFAULT_ADDON;
    function Database3(filenameGiven, options2) {
      if (new.target == null) {
        return new Database3(filenameGiven, options2);
      }
      let buffer;
      if (Buffer.isBuffer(filenameGiven)) {
        buffer = filenameGiven;
        filenameGiven = ":memory:";
      }
      if (filenameGiven == null) filenameGiven = "";
      if (options2 == null) options2 = {};
      if (typeof filenameGiven !== "string") throw new TypeError("Expected first argument to be a string");
      if (typeof options2 !== "object") throw new TypeError("Expected second argument to be an options object");
      if ("readOnly" in options2) throw new TypeError('Misspelled option "readOnly" should be "readonly"');
      if ("memory" in options2) throw new TypeError('Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)');
      const filename = filenameGiven.trim();
      const anonymous = filename === "" || filename === ":memory:";
      const readonly = util.getBooleanOption(options2, "readonly");
      const fileMustExist = util.getBooleanOption(options2, "fileMustExist");
      const timeout = "timeout" in options2 ? options2.timeout : 5e3;
      const verbose = "verbose" in options2 ? options2.verbose : null;
      const nativeBinding = "nativeBinding" in options2 ? options2.nativeBinding : null;
      if (readonly && anonymous && !buffer) throw new TypeError("In-memory/temporary databases cannot be readonly");
      if (!Number.isInteger(timeout) || timeout < 0) throw new TypeError('Expected the "timeout" option to be a positive integer');
      if (timeout > 2147483647) throw new RangeError('Option "timeout" cannot be greater than 2147483647');
      if (verbose != null && typeof verbose !== "function") throw new TypeError('Expected the "verbose" option to be a function');
      if (nativeBinding != null && typeof nativeBinding !== "string" && typeof nativeBinding !== "object") throw new TypeError('Expected the "nativeBinding" option to be a string or addon object');
      let addon;
      if (nativeBinding == null) {
        addon = DEFAULT_ADDON || (DEFAULT_ADDON = require_bindings()("better_sqlite3.node"));
      } else if (typeof nativeBinding === "string") {
        const requireFunc = typeof __non_webpack_require__ === "function" ? __non_webpack_require__ : require;
        addon = requireFunc(path.resolve(nativeBinding).replace(/(\.node)?$/, ".node"));
      } else {
        addon = nativeBinding;
      }
      if (!addon.isInitialized) {
        addon.setErrorConstructor(SqliteError);
        addon.isInitialized = true;
      }
      if (!anonymous && !filename.startsWith("file:") && !fs.existsSync(path.dirname(filename))) {
        throw new TypeError("Cannot open database because the directory does not exist");
      }
      Object.defineProperties(this, {
        [util.cppdb]: { value: new addon.Database(filename, filenameGiven, anonymous, readonly, fileMustExist, timeout, verbose || null, buffer || null) },
        ...wrappers.getters
      });
    }
    var wrappers = require_wrappers();
    Database3.prototype.prepare = wrappers.prepare;
    Database3.prototype.transaction = require_transaction();
    Database3.prototype.pragma = require_pragma();
    Database3.prototype.backup = require_backup();
    Database3.prototype.serialize = require_serialize();
    Database3.prototype.function = require_function();
    Database3.prototype.aggregate = require_aggregate();
    Database3.prototype.table = require_table();
    Database3.prototype.loadExtension = wrappers.loadExtension;
    Database3.prototype.exec = wrappers.exec;
    Database3.prototype.close = wrappers.close;
    Database3.prototype.defaultSafeIntegers = wrappers.defaultSafeIntegers;
    Database3.prototype.unsafeMode = wrappers.unsafeMode;
    Database3.prototype[util.inspect] = require_inspect();
    module2.exports = Database3;
  }
});

// node_modules/better-sqlite3/lib/index.js
var require_lib = __commonJS({
  "node_modules/better-sqlite3/lib/index.js"(exports2, module2) {
    "use strict";
    module2.exports = require_database();
    module2.exports.SqliteError = require_sqlite_error();
  }
});

// node_modules/kind-of/index.js
var require_kind_of = __commonJS({
  "node_modules/kind-of/index.js"(exports2, module2) {
    var toString = Object.prototype.toString;
    module2.exports = function kindOf(val) {
      if (val === void 0) return "undefined";
      if (val === null) return "null";
      var type = typeof val;
      if (type === "boolean") return "boolean";
      if (type === "string") return "string";
      if (type === "number") return "number";
      if (type === "symbol") return "symbol";
      if (type === "function") {
        return isGeneratorFn(val) ? "generatorfunction" : "function";
      }
      if (isArray(val)) return "array";
      if (isBuffer(val)) return "buffer";
      if (isArguments(val)) return "arguments";
      if (isDate(val)) return "date";
      if (isError(val)) return "error";
      if (isRegexp(val)) return "regexp";
      switch (ctorName(val)) {
        case "Symbol":
          return "symbol";
        case "Promise":
          return "promise";
        // Set, Map, WeakSet, WeakMap
        case "WeakMap":
          return "weakmap";
        case "WeakSet":
          return "weakset";
        case "Map":
          return "map";
        case "Set":
          return "set";
        // 8-bit typed arrays
        case "Int8Array":
          return "int8array";
        case "Uint8Array":
          return "uint8array";
        case "Uint8ClampedArray":
          return "uint8clampedarray";
        // 16-bit typed arrays
        case "Int16Array":
          return "int16array";
        case "Uint16Array":
          return "uint16array";
        // 32-bit typed arrays
        case "Int32Array":
          return "int32array";
        case "Uint32Array":
          return "uint32array";
        case "Float32Array":
          return "float32array";
        case "Float64Array":
          return "float64array";
      }
      if (isGeneratorObj(val)) {
        return "generator";
      }
      type = toString.call(val);
      switch (type) {
        case "[object Object]":
          return "object";
        // iterators
        case "[object Map Iterator]":
          return "mapiterator";
        case "[object Set Iterator]":
          return "setiterator";
        case "[object String Iterator]":
          return "stringiterator";
        case "[object Array Iterator]":
          return "arrayiterator";
      }
      return type.slice(8, -1).toLowerCase().replace(/\s/g, "");
    };
    function ctorName(val) {
      return typeof val.constructor === "function" ? val.constructor.name : null;
    }
    function isArray(val) {
      if (Array.isArray) return Array.isArray(val);
      return val instanceof Array;
    }
    function isError(val) {
      return val instanceof Error || typeof val.message === "string" && val.constructor && typeof val.constructor.stackTraceLimit === "number";
    }
    function isDate(val) {
      if (val instanceof Date) return true;
      return typeof val.toDateString === "function" && typeof val.getDate === "function" && typeof val.setDate === "function";
    }
    function isRegexp(val) {
      if (val instanceof RegExp) return true;
      return typeof val.flags === "string" && typeof val.ignoreCase === "boolean" && typeof val.multiline === "boolean" && typeof val.global === "boolean";
    }
    function isGeneratorFn(name, val) {
      return ctorName(name) === "GeneratorFunction";
    }
    function isGeneratorObj(val) {
      return typeof val.throw === "function" && typeof val.return === "function" && typeof val.next === "function";
    }
    function isArguments(val) {
      try {
        if (typeof val.length === "number" && typeof val.callee === "function") {
          return true;
        }
      } catch (err) {
        if (err.message.indexOf("callee") !== -1) {
          return true;
        }
      }
      return false;
    }
    function isBuffer(val) {
      if (val.constructor && typeof val.constructor.isBuffer === "function") {
        return val.constructor.isBuffer(val);
      }
      return false;
    }
  }
});

// node_modules/is-extendable/index.js
var require_is_extendable = __commonJS({
  "node_modules/is-extendable/index.js"(exports2, module2) {
    "use strict";
    module2.exports = function isExtendable(val) {
      return typeof val !== "undefined" && val !== null && (typeof val === "object" || typeof val === "function");
    };
  }
});

// node_modules/extend-shallow/index.js
var require_extend_shallow = __commonJS({
  "node_modules/extend-shallow/index.js"(exports2, module2) {
    "use strict";
    var isObject = require_is_extendable();
    module2.exports = function extend(o) {
      if (!isObject(o)) {
        o = {};
      }
      var len = arguments.length;
      for (var i = 1; i < len; i++) {
        var obj = arguments[i];
        if (isObject(obj)) {
          assign(o, obj);
        }
      }
      return o;
    };
    function assign(a, b) {
      for (var key in b) {
        if (hasOwn(b, key)) {
          a[key] = b[key];
        }
      }
    }
    function hasOwn(obj, key) {
      return Object.prototype.hasOwnProperty.call(obj, key);
    }
  }
});

// node_modules/section-matter/index.js
var require_section_matter = __commonJS({
  "node_modules/section-matter/index.js"(exports2, module2) {
    "use strict";
    var typeOf = require_kind_of();
    var extend = require_extend_shallow();
    module2.exports = function(input, options2) {
      if (typeof options2 === "function") {
        options2 = { parse: options2 };
      }
      var file = toObject(input);
      var defaults = { section_delimiter: "---", parse: identity };
      var opts = extend({}, defaults, options2);
      var delim = opts.section_delimiter;
      var lines = file.content.split(/\r?\n/);
      var sections = null;
      var section = createSection();
      var content = [];
      var stack = [];
      function initSections(val) {
        file.content = val;
        sections = [];
        content = [];
      }
      function closeSection(val) {
        if (stack.length) {
          section.key = getKey(stack[0], delim);
          section.content = val;
          opts.parse(section, sections);
          sections.push(section);
          section = createSection();
          content = [];
          stack = [];
        }
      }
      for (var i = 0; i < lines.length; i++) {
        var line = lines[i];
        var len = stack.length;
        var ln = line.trim();
        if (isDelimiter(ln, delim)) {
          if (ln.length === 3 && i !== 0) {
            if (len === 0 || len === 2) {
              content.push(line);
              continue;
            }
            stack.push(ln);
            section.data = content.join("\n");
            content = [];
            continue;
          }
          if (sections === null) {
            initSections(content.join("\n"));
          }
          if (len === 2) {
            closeSection(content.join("\n"));
          }
          stack.push(ln);
          continue;
        }
        content.push(line);
      }
      if (sections === null) {
        initSections(content.join("\n"));
      } else {
        closeSection(content.join("\n"));
      }
      file.sections = sections;
      return file;
    };
    function isDelimiter(line, delim) {
      if (line.slice(0, delim.length) !== delim) {
        return false;
      }
      if (line.charAt(delim.length + 1) === delim.slice(-1)) {
        return false;
      }
      return true;
    }
    function toObject(input) {
      if (typeOf(input) !== "object") {
        input = { content: input };
      }
      if (typeof input.content !== "string" && !isBuffer(input.content)) {
        throw new TypeError("expected a buffer or string");
      }
      input.content = input.content.toString();
      input.sections = [];
      return input;
    }
    function getKey(val, delim) {
      return val ? val.slice(delim.length).trim() : "";
    }
    function createSection() {
      return { key: "", data: "", content: "" };
    }
    function identity(val) {
      return val;
    }
    function isBuffer(val) {
      if (val && val.constructor && typeof val.constructor.isBuffer === "function") {
        return val.constructor.isBuffer(val);
      }
      return false;
    }
  }
});

// node_modules/js-yaml/lib/js-yaml/common.js
var require_common = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/common.js"(exports2, module2) {
    "use strict";
    function isNothing(subject) {
      return typeof subject === "undefined" || subject === null;
    }
    function isObject(subject) {
      return typeof subject === "object" && subject !== null;
    }
    function toArray(sequence) {
      if (Array.isArray(sequence)) return sequence;
      else if (isNothing(sequence)) return [];
      return [sequence];
    }
    function extend(target, source) {
      var index, length, key, sourceKeys;
      if (source) {
        sourceKeys = Object.keys(source);
        for (index = 0, length = sourceKeys.length; index < length; index += 1) {
          key = sourceKeys[index];
          target[key] = source[key];
        }
      }
      return target;
    }
    function repeat(string, count) {
      var result = "", cycle;
      for (cycle = 0; cycle < count; cycle += 1) {
        result += string;
      }
      return result;
    }
    function isNegativeZero(number) {
      return number === 0 && Number.NEGATIVE_INFINITY === 1 / number;
    }
    module2.exports.isNothing = isNothing;
    module2.exports.isObject = isObject;
    module2.exports.toArray = toArray;
    module2.exports.repeat = repeat;
    module2.exports.isNegativeZero = isNegativeZero;
    module2.exports.extend = extend;
  }
});

// node_modules/js-yaml/lib/js-yaml/exception.js
var require_exception = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/exception.js"(exports2, module2) {
    "use strict";
    function YAMLException(reason, mark) {
      Error.call(this);
      this.name = "YAMLException";
      this.reason = reason;
      this.mark = mark;
      this.message = (this.reason || "(unknown reason)") + (this.mark ? " " + this.mark.toString() : "");
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, this.constructor);
      } else {
        this.stack = new Error().stack || "";
      }
    }
    YAMLException.prototype = Object.create(Error.prototype);
    YAMLException.prototype.constructor = YAMLException;
    YAMLException.prototype.toString = function toString(compact) {
      var result = this.name + ": ";
      result += this.reason || "(unknown reason)";
      if (!compact && this.mark) {
        result += " " + this.mark.toString();
      }
      return result;
    };
    module2.exports = YAMLException;
  }
});

// node_modules/js-yaml/lib/js-yaml/mark.js
var require_mark = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/mark.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    function Mark(name, buffer, position, line, column) {
      this.name = name;
      this.buffer = buffer;
      this.position = position;
      this.line = line;
      this.column = column;
    }
    Mark.prototype.getSnippet = function getSnippet(indent, maxLength) {
      var head, start, tail, end, snippet;
      if (!this.buffer) return null;
      indent = indent || 4;
      maxLength = maxLength || 75;
      head = "";
      start = this.position;
      while (start > 0 && "\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(start - 1)) === -1) {
        start -= 1;
        if (this.position - start > maxLength / 2 - 1) {
          head = " ... ";
          start += 5;
          break;
        }
      }
      tail = "";
      end = this.position;
      while (end < this.buffer.length && "\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(end)) === -1) {
        end += 1;
        if (end - this.position > maxLength / 2 - 1) {
          tail = " ... ";
          end -= 5;
          break;
        }
      }
      snippet = this.buffer.slice(start, end);
      return common.repeat(" ", indent) + head + snippet + tail + "\n" + common.repeat(" ", indent + this.position - start + head.length) + "^";
    };
    Mark.prototype.toString = function toString(compact) {
      var snippet, where = "";
      if (this.name) {
        where += 'in "' + this.name + '" ';
      }
      where += "at line " + (this.line + 1) + ", column " + (this.column + 1);
      if (!compact) {
        snippet = this.getSnippet();
        if (snippet) {
          where += ":\n" + snippet;
        }
      }
      return where;
    };
    module2.exports = Mark;
  }
});

// node_modules/js-yaml/lib/js-yaml/type.js
var require_type = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type.js"(exports2, module2) {
    "use strict";
    var YAMLException = require_exception();
    var TYPE_CONSTRUCTOR_OPTIONS = [
      "kind",
      "resolve",
      "construct",
      "instanceOf",
      "predicate",
      "represent",
      "defaultStyle",
      "styleAliases"
    ];
    var YAML_NODE_KINDS = [
      "scalar",
      "sequence",
      "mapping"
    ];
    function compileStyleAliases(map) {
      var result = {};
      if (map !== null) {
        Object.keys(map).forEach(function(style) {
          map[style].forEach(function(alias) {
            result[String(alias)] = style;
          });
        });
      }
      return result;
    }
    function Type(tag, options2) {
      options2 = options2 || {};
      Object.keys(options2).forEach(function(name) {
        if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {
          throw new YAMLException('Unknown option "' + name + '" is met in definition of "' + tag + '" YAML type.');
        }
      });
      this.tag = tag;
      this.kind = options2["kind"] || null;
      this.resolve = options2["resolve"] || function() {
        return true;
      };
      this.construct = options2["construct"] || function(data) {
        return data;
      };
      this.instanceOf = options2["instanceOf"] || null;
      this.predicate = options2["predicate"] || null;
      this.represent = options2["represent"] || null;
      this.defaultStyle = options2["defaultStyle"] || null;
      this.styleAliases = compileStyleAliases(options2["styleAliases"] || null);
      if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {
        throw new YAMLException('Unknown kind "' + this.kind + '" is specified for "' + tag + '" YAML type.');
      }
    }
    module2.exports = Type;
  }
});

// node_modules/js-yaml/lib/js-yaml/schema.js
var require_schema = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var YAMLException = require_exception();
    var Type = require_type();
    function compileList(schema, name, result) {
      var exclude = [];
      schema.include.forEach(function(includedSchema) {
        result = compileList(includedSchema, name, result);
      });
      schema[name].forEach(function(currentType) {
        result.forEach(function(previousType, previousIndex) {
          if (previousType.tag === currentType.tag && previousType.kind === currentType.kind) {
            exclude.push(previousIndex);
          }
        });
        result.push(currentType);
      });
      return result.filter(function(type, index) {
        return exclude.indexOf(index) === -1;
      });
    }
    function compileMap() {
      var result = {
        scalar: {},
        sequence: {},
        mapping: {},
        fallback: {}
      }, index, length;
      function collectType(type) {
        result[type.kind][type.tag] = result["fallback"][type.tag] = type;
      }
      for (index = 0, length = arguments.length; index < length; index += 1) {
        arguments[index].forEach(collectType);
      }
      return result;
    }
    function Schema(definition) {
      this.include = definition.include || [];
      this.implicit = definition.implicit || [];
      this.explicit = definition.explicit || [];
      this.implicit.forEach(function(type) {
        if (type.loadKind && type.loadKind !== "scalar") {
          throw new YAMLException("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");
        }
      });
      this.compiledImplicit = compileList(this, "implicit", []);
      this.compiledExplicit = compileList(this, "explicit", []);
      this.compiledTypeMap = compileMap(this.compiledImplicit, this.compiledExplicit);
    }
    Schema.DEFAULT = null;
    Schema.create = function createSchema() {
      var schemas, types;
      switch (arguments.length) {
        case 1:
          schemas = Schema.DEFAULT;
          types = arguments[0];
          break;
        case 2:
          schemas = arguments[0];
          types = arguments[1];
          break;
        default:
          throw new YAMLException("Wrong number of arguments for Schema.create function");
      }
      schemas = common.toArray(schemas);
      types = common.toArray(types);
      if (!schemas.every(function(schema) {
        return schema instanceof Schema;
      })) {
        throw new YAMLException("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");
      }
      if (!types.every(function(type) {
        return type instanceof Type;
      })) {
        throw new YAMLException("Specified list of YAML types (or a single Type object) contains a non-Type object.");
      }
      return new Schema({
        include: schemas,
        explicit: types
      });
    };
    module2.exports = Schema;
  }
});

// node_modules/js-yaml/lib/js-yaml/type/str.js
var require_str = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/str.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    module2.exports = new Type("tag:yaml.org,2002:str", {
      kind: "scalar",
      construct: function(data) {
        return data !== null ? data : "";
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/seq.js
var require_seq = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/seq.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    module2.exports = new Type("tag:yaml.org,2002:seq", {
      kind: "sequence",
      construct: function(data) {
        return data !== null ? data : [];
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/map.js
var require_map = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/map.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    module2.exports = new Type("tag:yaml.org,2002:map", {
      kind: "mapping",
      construct: function(data) {
        return data !== null ? data : {};
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/failsafe.js
var require_failsafe = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/failsafe.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      explicit: [
        require_str(),
        require_seq(),
        require_map()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/null.js
var require_null = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/null.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveYamlNull(data) {
      if (data === null) return true;
      var max = data.length;
      return max === 1 && data === "~" || max === 4 && (data === "null" || data === "Null" || data === "NULL");
    }
    function constructYamlNull() {
      return null;
    }
    function isNull(object) {
      return object === null;
    }
    module2.exports = new Type("tag:yaml.org,2002:null", {
      kind: "scalar",
      resolve: resolveYamlNull,
      construct: constructYamlNull,
      predicate: isNull,
      represent: {
        canonical: function() {
          return "~";
        },
        lowercase: function() {
          return "null";
        },
        uppercase: function() {
          return "NULL";
        },
        camelcase: function() {
          return "Null";
        }
      },
      defaultStyle: "lowercase"
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/bool.js
var require_bool = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/bool.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveYamlBoolean(data) {
      if (data === null) return false;
      var max = data.length;
      return max === 4 && (data === "true" || data === "True" || data === "TRUE") || max === 5 && (data === "false" || data === "False" || data === "FALSE");
    }
    function constructYamlBoolean(data) {
      return data === "true" || data === "True" || data === "TRUE";
    }
    function isBoolean(object) {
      return Object.prototype.toString.call(object) === "[object Boolean]";
    }
    module2.exports = new Type("tag:yaml.org,2002:bool", {
      kind: "scalar",
      resolve: resolveYamlBoolean,
      construct: constructYamlBoolean,
      predicate: isBoolean,
      represent: {
        lowercase: function(object) {
          return object ? "true" : "false";
        },
        uppercase: function(object) {
          return object ? "TRUE" : "FALSE";
        },
        camelcase: function(object) {
          return object ? "True" : "False";
        }
      },
      defaultStyle: "lowercase"
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/int.js
var require_int = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/int.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var Type = require_type();
    function isHexCode(c) {
      return 48 <= c && c <= 57 || 65 <= c && c <= 70 || 97 <= c && c <= 102;
    }
    function isOctCode(c) {
      return 48 <= c && c <= 55;
    }
    function isDecCode(c) {
      return 48 <= c && c <= 57;
    }
    function resolveYamlInteger(data) {
      if (data === null) return false;
      var max = data.length, index = 0, hasDigits = false, ch;
      if (!max) return false;
      ch = data[index];
      if (ch === "-" || ch === "+") {
        ch = data[++index];
      }
      if (ch === "0") {
        if (index + 1 === max) return true;
        ch = data[++index];
        if (ch === "b") {
          index++;
          for (; index < max; index++) {
            ch = data[index];
            if (ch === "_") continue;
            if (ch !== "0" && ch !== "1") return false;
            hasDigits = true;
          }
          return hasDigits && ch !== "_";
        }
        if (ch === "x") {
          index++;
          for (; index < max; index++) {
            ch = data[index];
            if (ch === "_") continue;
            if (!isHexCode(data.charCodeAt(index))) return false;
            hasDigits = true;
          }
          return hasDigits && ch !== "_";
        }
        for (; index < max; index++) {
          ch = data[index];
          if (ch === "_") continue;
          if (!isOctCode(data.charCodeAt(index))) return false;
          hasDigits = true;
        }
        return hasDigits && ch !== "_";
      }
      if (ch === "_") return false;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (ch === ":") break;
        if (!isDecCode(data.charCodeAt(index))) {
          return false;
        }
        hasDigits = true;
      }
      if (!hasDigits || ch === "_") return false;
      if (ch !== ":") return true;
      return /^(:[0-5]?[0-9])+$/.test(data.slice(index));
    }
    function constructYamlInteger(data) {
      var value = data, sign = 1, ch, base, digits = [];
      if (value.indexOf("_") !== -1) {
        value = value.replace(/_/g, "");
      }
      ch = value[0];
      if (ch === "-" || ch === "+") {
        if (ch === "-") sign = -1;
        value = value.slice(1);
        ch = value[0];
      }
      if (value === "0") return 0;
      if (ch === "0") {
        if (value[1] === "b") return sign * parseInt(value.slice(2), 2);
        if (value[1] === "x") return sign * parseInt(value, 16);
        return sign * parseInt(value, 8);
      }
      if (value.indexOf(":") !== -1) {
        value.split(":").forEach(function(v) {
          digits.unshift(parseInt(v, 10));
        });
        value = 0;
        base = 1;
        digits.forEach(function(d) {
          value += d * base;
          base *= 60;
        });
        return sign * value;
      }
      return sign * parseInt(value, 10);
    }
    function isInteger(object) {
      return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 === 0 && !common.isNegativeZero(object));
    }
    module2.exports = new Type("tag:yaml.org,2002:int", {
      kind: "scalar",
      resolve: resolveYamlInteger,
      construct: constructYamlInteger,
      predicate: isInteger,
      represent: {
        binary: function(obj) {
          return obj >= 0 ? "0b" + obj.toString(2) : "-0b" + obj.toString(2).slice(1);
        },
        octal: function(obj) {
          return obj >= 0 ? "0" + obj.toString(8) : "-0" + obj.toString(8).slice(1);
        },
        decimal: function(obj) {
          return obj.toString(10);
        },
        /* eslint-disable max-len */
        hexadecimal: function(obj) {
          return obj >= 0 ? "0x" + obj.toString(16).toUpperCase() : "-0x" + obj.toString(16).toUpperCase().slice(1);
        }
      },
      defaultStyle: "decimal",
      styleAliases: {
        binary: [2, "bin"],
        octal: [8, "oct"],
        decimal: [10, "dec"],
        hexadecimal: [16, "hex"]
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/float.js
var require_float = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/float.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var Type = require_type();
    var YAML_FLOAT_PATTERN = new RegExp(
      // 2.5e4, 2.5 and integers
      "^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"
    );
    function resolveYamlFloat(data) {
      if (data === null) return false;
      if (!YAML_FLOAT_PATTERN.test(data) || // Quick hack to not allow integers end with `_`
      // Probably should update regexp & check speed
      data[data.length - 1] === "_") {
        return false;
      }
      return true;
    }
    function constructYamlFloat(data) {
      var value, sign, base, digits;
      value = data.replace(/_/g, "").toLowerCase();
      sign = value[0] === "-" ? -1 : 1;
      digits = [];
      if ("+-".indexOf(value[0]) >= 0) {
        value = value.slice(1);
      }
      if (value === ".inf") {
        return sign === 1 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;
      } else if (value === ".nan") {
        return NaN;
      } else if (value.indexOf(":") >= 0) {
        value.split(":").forEach(function(v) {
          digits.unshift(parseFloat(v, 10));
        });
        value = 0;
        base = 1;
        digits.forEach(function(d) {
          value += d * base;
          base *= 60;
        });
        return sign * value;
      }
      return sign * parseFloat(value, 10);
    }
    var SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;
    function representYamlFloat(object, style) {
      var res;
      if (isNaN(object)) {
        switch (style) {
          case "lowercase":
            return ".nan";
          case "uppercase":
            return ".NAN";
          case "camelcase":
            return ".NaN";
        }
      } else if (Number.POSITIVE_INFINITY === object) {
        switch (style) {
          case "lowercase":
            return ".inf";
          case "uppercase":
            return ".INF";
          case "camelcase":
            return ".Inf";
        }
      } else if (Number.NEGATIVE_INFINITY === object) {
        switch (style) {
          case "lowercase":
            return "-.inf";
          case "uppercase":
            return "-.INF";
          case "camelcase":
            return "-.Inf";
        }
      } else if (common.isNegativeZero(object)) {
        return "-0.0";
      }
      res = object.toString(10);
      return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace("e", ".e") : res;
    }
    function isFloat(object) {
      return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 !== 0 || common.isNegativeZero(object));
    }
    module2.exports = new Type("tag:yaml.org,2002:float", {
      kind: "scalar",
      resolve: resolveYamlFloat,
      construct: constructYamlFloat,
      predicate: isFloat,
      represent: representYamlFloat,
      defaultStyle: "lowercase"
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/json.js
var require_json = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/json.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      include: [
        require_failsafe()
      ],
      implicit: [
        require_null(),
        require_bool(),
        require_int(),
        require_float()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/core.js
var require_core = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/core.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      include: [
        require_json()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/timestamp.js
var require_timestamp = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/timestamp.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var YAML_DATE_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"
    );
    var YAML_TIMESTAMP_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"
    );
    function resolveYamlTimestamp(data) {
      if (data === null) return false;
      if (YAML_DATE_REGEXP.exec(data) !== null) return true;
      if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;
      return false;
    }
    function constructYamlTimestamp(data) {
      var match, year, month, day, hour, minute, second, fraction = 0, delta = null, tz_hour, tz_minute, date;
      match = YAML_DATE_REGEXP.exec(data);
      if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);
      if (match === null) throw new Error("Date resolve error");
      year = +match[1];
      month = +match[2] - 1;
      day = +match[3];
      if (!match[4]) {
        return new Date(Date.UTC(year, month, day));
      }
      hour = +match[4];
      minute = +match[5];
      second = +match[6];
      if (match[7]) {
        fraction = match[7].slice(0, 3);
        while (fraction.length < 3) {
          fraction += "0";
        }
        fraction = +fraction;
      }
      if (match[9]) {
        tz_hour = +match[10];
        tz_minute = +(match[11] || 0);
        delta = (tz_hour * 60 + tz_minute) * 6e4;
        if (match[9] === "-") delta = -delta;
      }
      date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));
      if (delta) date.setTime(date.getTime() - delta);
      return date;
    }
    function representYamlTimestamp(object) {
      return object.toISOString();
    }
    module2.exports = new Type("tag:yaml.org,2002:timestamp", {
      kind: "scalar",
      resolve: resolveYamlTimestamp,
      construct: constructYamlTimestamp,
      instanceOf: Date,
      represent: representYamlTimestamp
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/merge.js
var require_merge = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/merge.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveYamlMerge(data) {
      return data === "<<" || data === null;
    }
    module2.exports = new Type("tag:yaml.org,2002:merge", {
      kind: "scalar",
      resolve: resolveYamlMerge
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/binary.js
var require_binary = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/binary.js"(exports2, module2) {
    "use strict";
    var NodeBuffer;
    try {
      _require = require;
      NodeBuffer = _require("buffer").Buffer;
    } catch (__) {
    }
    var _require;
    var Type = require_type();
    var BASE64_MAP = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";
    function resolveYamlBinary(data) {
      if (data === null) return false;
      var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;
      for (idx = 0; idx < max; idx++) {
        code = map.indexOf(data.charAt(idx));
        if (code > 64) continue;
        if (code < 0) return false;
        bitlen += 6;
      }
      return bitlen % 8 === 0;
    }
    function constructYamlBinary(data) {
      var idx, tailbits, input = data.replace(/[\r\n=]/g, ""), max = input.length, map = BASE64_MAP, bits = 0, result = [];
      for (idx = 0; idx < max; idx++) {
        if (idx % 4 === 0 && idx) {
          result.push(bits >> 16 & 255);
          result.push(bits >> 8 & 255);
          result.push(bits & 255);
        }
        bits = bits << 6 | map.indexOf(input.charAt(idx));
      }
      tailbits = max % 4 * 6;
      if (tailbits === 0) {
        result.push(bits >> 16 & 255);
        result.push(bits >> 8 & 255);
        result.push(bits & 255);
      } else if (tailbits === 18) {
        result.push(bits >> 10 & 255);
        result.push(bits >> 2 & 255);
      } else if (tailbits === 12) {
        result.push(bits >> 4 & 255);
      }
      if (NodeBuffer) {
        return NodeBuffer.from ? NodeBuffer.from(result) : new NodeBuffer(result);
      }
      return result;
    }
    function representYamlBinary(object) {
      var result = "", bits = 0, idx, tail, max = object.length, map = BASE64_MAP;
      for (idx = 0; idx < max; idx++) {
        if (idx % 3 === 0 && idx) {
          result += map[bits >> 18 & 63];
          result += map[bits >> 12 & 63];
          result += map[bits >> 6 & 63];
          result += map[bits & 63];
        }
        bits = (bits << 8) + object[idx];
      }
      tail = max % 3;
      if (tail === 0) {
        result += map[bits >> 18 & 63];
        result += map[bits >> 12 & 63];
        result += map[bits >> 6 & 63];
        result += map[bits & 63];
      } else if (tail === 2) {
        result += map[bits >> 10 & 63];
        result += map[bits >> 4 & 63];
        result += map[bits << 2 & 63];
        result += map[64];
      } else if (tail === 1) {
        result += map[bits >> 2 & 63];
        result += map[bits << 4 & 63];
        result += map[64];
        result += map[64];
      }
      return result;
    }
    function isBinary(object) {
      return NodeBuffer && NodeBuffer.isBuffer(object);
    }
    module2.exports = new Type("tag:yaml.org,2002:binary", {
      kind: "scalar",
      resolve: resolveYamlBinary,
      construct: constructYamlBinary,
      predicate: isBinary,
      represent: representYamlBinary
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/omap.js
var require_omap = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/omap.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    var _toString = Object.prototype.toString;
    function resolveYamlOmap(data) {
      if (data === null) return true;
      var objectKeys = [], index, length, pair, pairKey, pairHasKey, object = data;
      for (index = 0, length = object.length; index < length; index += 1) {
        pair = object[index];
        pairHasKey = false;
        if (_toString.call(pair) !== "[object Object]") return false;
        for (pairKey in pair) {
          if (_hasOwnProperty.call(pair, pairKey)) {
            if (!pairHasKey) pairHasKey = true;
            else return false;
          }
        }
        if (!pairHasKey) return false;
        if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);
        else return false;
      }
      return true;
    }
    function constructYamlOmap(data) {
      return data !== null ? data : [];
    }
    module2.exports = new Type("tag:yaml.org,2002:omap", {
      kind: "sequence",
      resolve: resolveYamlOmap,
      construct: constructYamlOmap
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/pairs.js
var require_pairs = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/pairs.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var _toString = Object.prototype.toString;
    function resolveYamlPairs(data) {
      if (data === null) return true;
      var index, length, pair, keys, result, object = data;
      result = new Array(object.length);
      for (index = 0, length = object.length; index < length; index += 1) {
        pair = object[index];
        if (_toString.call(pair) !== "[object Object]") return false;
        keys = Object.keys(pair);
        if (keys.length !== 1) return false;
        result[index] = [keys[0], pair[keys[0]]];
      }
      return true;
    }
    function constructYamlPairs(data) {
      if (data === null) return [];
      var index, length, pair, keys, result, object = data;
      result = new Array(object.length);
      for (index = 0, length = object.length; index < length; index += 1) {
        pair = object[index];
        keys = Object.keys(pair);
        result[index] = [keys[0], pair[keys[0]]];
      }
      return result;
    }
    module2.exports = new Type("tag:yaml.org,2002:pairs", {
      kind: "sequence",
      resolve: resolveYamlPairs,
      construct: constructYamlPairs
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/set.js
var require_set = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/set.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    function resolveYamlSet(data) {
      if (data === null) return true;
      var key, object = data;
      for (key in object) {
        if (_hasOwnProperty.call(object, key)) {
          if (object[key] !== null) return false;
        }
      }
      return true;
    }
    function constructYamlSet(data) {
      return data !== null ? data : {};
    }
    module2.exports = new Type("tag:yaml.org,2002:set", {
      kind: "mapping",
      resolve: resolveYamlSet,
      construct: constructYamlSet
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/default_safe.js
var require_default_safe = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/default_safe.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      include: [
        require_core()
      ],
      implicit: [
        require_timestamp(),
        require_merge()
      ],
      explicit: [
        require_binary(),
        require_omap(),
        require_pairs(),
        require_set()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/js/undefined.js
var require_undefined = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/js/undefined.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveJavascriptUndefined() {
      return true;
    }
    function constructJavascriptUndefined() {
      return void 0;
    }
    function representJavascriptUndefined() {
      return "";
    }
    function isUndefined(object) {
      return typeof object === "undefined";
    }
    module2.exports = new Type("tag:yaml.org,2002:js/undefined", {
      kind: "scalar",
      resolve: resolveJavascriptUndefined,
      construct: constructJavascriptUndefined,
      predicate: isUndefined,
      represent: representJavascriptUndefined
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/js/regexp.js
var require_regexp = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/js/regexp.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveJavascriptRegExp(data) {
      if (data === null) return false;
      if (data.length === 0) return false;
      var regexp = data, tail = /\/([gim]*)$/.exec(data), modifiers = "";
      if (regexp[0] === "/") {
        if (tail) modifiers = tail[1];
        if (modifiers.length > 3) return false;
        if (regexp[regexp.length - modifiers.length - 1] !== "/") return false;
      }
      return true;
    }
    function constructJavascriptRegExp(data) {
      var regexp = data, tail = /\/([gim]*)$/.exec(data), modifiers = "";
      if (regexp[0] === "/") {
        if (tail) modifiers = tail[1];
        regexp = regexp.slice(1, regexp.length - modifiers.length - 1);
      }
      return new RegExp(regexp, modifiers);
    }
    function representJavascriptRegExp(object) {
      var result = "/" + object.source + "/";
      if (object.global) result += "g";
      if (object.multiline) result += "m";
      if (object.ignoreCase) result += "i";
      return result;
    }
    function isRegExp(object) {
      return Object.prototype.toString.call(object) === "[object RegExp]";
    }
    module2.exports = new Type("tag:yaml.org,2002:js/regexp", {
      kind: "scalar",
      resolve: resolveJavascriptRegExp,
      construct: constructJavascriptRegExp,
      predicate: isRegExp,
      represent: representJavascriptRegExp
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/js/function.js
var require_function2 = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/js/function.js"(exports2, module2) {
    "use strict";
    var esprima;
    try {
      _require = require;
      esprima = _require("esprima");
    } catch (_) {
      if (typeof window !== "undefined") esprima = window.esprima;
    }
    var _require;
    var Type = require_type();
    function resolveJavascriptFunction(data) {
      if (data === null) return false;
      try {
        var source = "(" + data + ")", ast = esprima.parse(source, { range: true });
        if (ast.type !== "Program" || ast.body.length !== 1 || ast.body[0].type !== "ExpressionStatement" || ast.body[0].expression.type !== "ArrowFunctionExpression" && ast.body[0].expression.type !== "FunctionExpression") {
          return false;
        }
        return true;
      } catch (err) {
        return false;
      }
    }
    function constructJavascriptFunction(data) {
      var source = "(" + data + ")", ast = esprima.parse(source, { range: true }), params = [], body;
      if (ast.type !== "Program" || ast.body.length !== 1 || ast.body[0].type !== "ExpressionStatement" || ast.body[0].expression.type !== "ArrowFunctionExpression" && ast.body[0].expression.type !== "FunctionExpression") {
        throw new Error("Failed to resolve function");
      }
      ast.body[0].expression.params.forEach(function(param) {
        params.push(param.name);
      });
      body = ast.body[0].expression.body.range;
      if (ast.body[0].expression.body.type === "BlockStatement") {
        return new Function(params, source.slice(body[0] + 1, body[1] - 1));
      }
      return new Function(params, "return " + source.slice(body[0], body[1]));
    }
    function representJavascriptFunction(object) {
      return object.toString();
    }
    function isFunction(object) {
      return Object.prototype.toString.call(object) === "[object Function]";
    }
    module2.exports = new Type("tag:yaml.org,2002:js/function", {
      kind: "scalar",
      resolve: resolveJavascriptFunction,
      construct: constructJavascriptFunction,
      predicate: isFunction,
      represent: representJavascriptFunction
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/default_full.js
var require_default_full = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/default_full.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = Schema.DEFAULT = new Schema({
      include: [
        require_default_safe()
      ],
      explicit: [
        require_undefined(),
        require_regexp(),
        require_function2()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/loader.js
var require_loader = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/loader.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var YAMLException = require_exception();
    var Mark = require_mark();
    var DEFAULT_SAFE_SCHEMA = require_default_safe();
    var DEFAULT_FULL_SCHEMA = require_default_full();
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    var CONTEXT_FLOW_IN = 1;
    var CONTEXT_FLOW_OUT = 2;
    var CONTEXT_BLOCK_IN = 3;
    var CONTEXT_BLOCK_OUT = 4;
    var CHOMPING_CLIP = 1;
    var CHOMPING_STRIP = 2;
    var CHOMPING_KEEP = 3;
    var PATTERN_NON_PRINTABLE = /[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
    var PATTERN_NON_ASCII_LINE_BREAKS = /[\x85\u2028\u2029]/;
    var PATTERN_FLOW_INDICATORS = /[,\[\]\{\}]/;
    var PATTERN_TAG_HANDLE = /^(?:!|!!|![a-z\-]+!)$/i;
    var PATTERN_TAG_URI = /^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;
    function _class(obj) {
      return Object.prototype.toString.call(obj);
    }
    function is_EOL(c) {
      return c === 10 || c === 13;
    }
    function is_WHITE_SPACE(c) {
      return c === 9 || c === 32;
    }
    function is_WS_OR_EOL(c) {
      return c === 9 || c === 32 || c === 10 || c === 13;
    }
    function is_FLOW_INDICATOR(c) {
      return c === 44 || c === 91 || c === 93 || c === 123 || c === 125;
    }
    function fromHexCode(c) {
      var lc;
      if (48 <= c && c <= 57) {
        return c - 48;
      }
      lc = c | 32;
      if (97 <= lc && lc <= 102) {
        return lc - 97 + 10;
      }
      return -1;
    }
    function escapedHexLen(c) {
      if (c === 120) {
        return 2;
      }
      if (c === 117) {
        return 4;
      }
      if (c === 85) {
        return 8;
      }
      return 0;
    }
    function fromDecimalCode(c) {
      if (48 <= c && c <= 57) {
        return c - 48;
      }
      return -1;
    }
    function simpleEscapeSequence(c) {
      return c === 48 ? "\0" : c === 97 ? "\x07" : c === 98 ? "\b" : c === 116 ? "	" : c === 9 ? "	" : c === 110 ? "\n" : c === 118 ? "\v" : c === 102 ? "\f" : c === 114 ? "\r" : c === 101 ? "\x1B" : c === 32 ? " " : c === 34 ? '"' : c === 47 ? "/" : c === 92 ? "\\" : c === 78 ? "\x85" : c === 95 ? "\xA0" : c === 76 ? "\u2028" : c === 80 ? "\u2029" : "";
    }
    function charFromCodepoint(c) {
      if (c <= 65535) {
        return String.fromCharCode(c);
      }
      return String.fromCharCode(
        (c - 65536 >> 10) + 55296,
        (c - 65536 & 1023) + 56320
      );
    }
    function setProperty(object, key, value) {
      if (key === "__proto__") {
        Object.defineProperty(object, key, {
          configurable: true,
          enumerable: true,
          writable: true,
          value
        });
      } else {
        object[key] = value;
      }
    }
    var simpleEscapeCheck = new Array(256);
    var simpleEscapeMap = new Array(256);
    for (i = 0; i < 256; i++) {
      simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;
      simpleEscapeMap[i] = simpleEscapeSequence(i);
    }
    var i;
    function State(input, options2) {
      this.input = input;
      this.filename = options2["filename"] || null;
      this.schema = options2["schema"] || DEFAULT_FULL_SCHEMA;
      this.onWarning = options2["onWarning"] || null;
      this.legacy = options2["legacy"] || false;
      this.json = options2["json"] || false;
      this.listener = options2["listener"] || null;
      this.implicitTypes = this.schema.compiledImplicit;
      this.typeMap = this.schema.compiledTypeMap;
      this.length = input.length;
      this.position = 0;
      this.line = 0;
      this.lineStart = 0;
      this.lineIndent = 0;
      this.documents = [];
    }
    function generateError(state, message) {
      return new YAMLException(
        message,
        new Mark(state.filename, state.input, state.position, state.line, state.position - state.lineStart)
      );
    }
    function throwError(state, message) {
      throw generateError(state, message);
    }
    function throwWarning(state, message) {
      if (state.onWarning) {
        state.onWarning.call(null, generateError(state, message));
      }
    }
    var directiveHandlers = {
      YAML: function handleYamlDirective(state, name, args) {
        var match, major, minor;
        if (state.version !== null) {
          throwError(state, "duplication of %YAML directive");
        }
        if (args.length !== 1) {
          throwError(state, "YAML directive accepts exactly one argument");
        }
        match = /^([0-9]+)\.([0-9]+)$/.exec(args[0]);
        if (match === null) {
          throwError(state, "ill-formed argument of the YAML directive");
        }
        major = parseInt(match[1], 10);
        minor = parseInt(match[2], 10);
        if (major !== 1) {
          throwError(state, "unacceptable YAML version of the document");
        }
        state.version = args[0];
        state.checkLineBreaks = minor < 2;
        if (minor !== 1 && minor !== 2) {
          throwWarning(state, "unsupported YAML version of the document");
        }
      },
      TAG: function handleTagDirective(state, name, args) {
        var handle, prefix;
        if (args.length !== 2) {
          throwError(state, "TAG directive accepts exactly two arguments");
        }
        handle = args[0];
        prefix = args[1];
        if (!PATTERN_TAG_HANDLE.test(handle)) {
          throwError(state, "ill-formed tag handle (first argument) of the TAG directive");
        }
        if (_hasOwnProperty.call(state.tagMap, handle)) {
          throwError(state, 'there is a previously declared suffix for "' + handle + '" tag handle');
        }
        if (!PATTERN_TAG_URI.test(prefix)) {
          throwError(state, "ill-formed tag prefix (second argument) of the TAG directive");
        }
        state.tagMap[handle] = prefix;
      }
    };
    function captureSegment(state, start, end, checkJson) {
      var _position, _length, _character, _result;
      if (start < end) {
        _result = state.input.slice(start, end);
        if (checkJson) {
          for (_position = 0, _length = _result.length; _position < _length; _position += 1) {
            _character = _result.charCodeAt(_position);
            if (!(_character === 9 || 32 <= _character && _character <= 1114111)) {
              throwError(state, "expected valid JSON character");
            }
          }
        } else if (PATTERN_NON_PRINTABLE.test(_result)) {
          throwError(state, "the stream contains non-printable characters");
        }
        state.result += _result;
      }
    }
    function mergeMappings(state, destination, source, overridableKeys) {
      var sourceKeys, key, index, quantity;
      if (!common.isObject(source)) {
        throwError(state, "cannot merge mappings; the provided source object is unacceptable");
      }
      sourceKeys = Object.keys(source);
      for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {
        key = sourceKeys[index];
        if (!_hasOwnProperty.call(destination, key)) {
          setProperty(destination, key, source[key]);
          overridableKeys[key] = true;
        }
      }
    }
    function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startPos) {
      var index, quantity;
      if (Array.isArray(keyNode)) {
        keyNode = Array.prototype.slice.call(keyNode);
        for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {
          if (Array.isArray(keyNode[index])) {
            throwError(state, "nested arrays are not supported inside keys");
          }
          if (typeof keyNode === "object" && _class(keyNode[index]) === "[object Object]") {
            keyNode[index] = "[object Object]";
          }
        }
      }
      if (typeof keyNode === "object" && _class(keyNode) === "[object Object]") {
        keyNode = "[object Object]";
      }
      keyNode = String(keyNode);
      if (_result === null) {
        _result = {};
      }
      if (keyTag === "tag:yaml.org,2002:merge") {
        if (Array.isArray(valueNode)) {
          for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {
            mergeMappings(state, _result, valueNode[index], overridableKeys);
          }
        } else {
          mergeMappings(state, _result, valueNode, overridableKeys);
        }
      } else {
        if (!state.json && !_hasOwnProperty.call(overridableKeys, keyNode) && _hasOwnProperty.call(_result, keyNode)) {
          state.line = startLine || state.line;
          state.position = startPos || state.position;
          throwError(state, "duplicated mapping key");
        }
        setProperty(_result, keyNode, valueNode);
        delete overridableKeys[keyNode];
      }
      return _result;
    }
    function readLineBreak(state) {
      var ch;
      ch = state.input.charCodeAt(state.position);
      if (ch === 10) {
        state.position++;
      } else if (ch === 13) {
        state.position++;
        if (state.input.charCodeAt(state.position) === 10) {
          state.position++;
        }
      } else {
        throwError(state, "a line break is expected");
      }
      state.line += 1;
      state.lineStart = state.position;
    }
    function skipSeparationSpace(state, allowComments, checkIndent) {
      var lineBreaks = 0, ch = state.input.charCodeAt(state.position);
      while (ch !== 0) {
        while (is_WHITE_SPACE(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        if (allowComments && ch === 35) {
          do {
            ch = state.input.charCodeAt(++state.position);
          } while (ch !== 10 && ch !== 13 && ch !== 0);
        }
        if (is_EOL(ch)) {
          readLineBreak(state);
          ch = state.input.charCodeAt(state.position);
          lineBreaks++;
          state.lineIndent = 0;
          while (ch === 32) {
            state.lineIndent++;
            ch = state.input.charCodeAt(++state.position);
          }
        } else {
          break;
        }
      }
      if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {
        throwWarning(state, "deficient indentation");
      }
      return lineBreaks;
    }
    function testDocumentSeparator(state) {
      var _position = state.position, ch;
      ch = state.input.charCodeAt(_position);
      if ((ch === 45 || ch === 46) && ch === state.input.charCodeAt(_position + 1) && ch === state.input.charCodeAt(_position + 2)) {
        _position += 3;
        ch = state.input.charCodeAt(_position);
        if (ch === 0 || is_WS_OR_EOL(ch)) {
          return true;
        }
      }
      return false;
    }
    function writeFoldedLines(state, count) {
      if (count === 1) {
        state.result += " ";
      } else if (count > 1) {
        state.result += common.repeat("\n", count - 1);
      }
    }
    function readPlainScalar(state, nodeIndent, withinFlowCollection) {
      var preceding, following, captureStart, captureEnd, hasPendingContent, _line, _lineStart, _lineIndent, _kind = state.kind, _result = state.result, ch;
      ch = state.input.charCodeAt(state.position);
      if (is_WS_OR_EOL(ch) || is_FLOW_INDICATOR(ch) || ch === 35 || ch === 38 || ch === 42 || ch === 33 || ch === 124 || ch === 62 || ch === 39 || ch === 34 || ch === 37 || ch === 64 || ch === 96) {
        return false;
      }
      if (ch === 63 || ch === 45) {
        following = state.input.charCodeAt(state.position + 1);
        if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
          return false;
        }
      }
      state.kind = "scalar";
      state.result = "";
      captureStart = captureEnd = state.position;
      hasPendingContent = false;
      while (ch !== 0) {
        if (ch === 58) {
          following = state.input.charCodeAt(state.position + 1);
          if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
            break;
          }
        } else if (ch === 35) {
          preceding = state.input.charCodeAt(state.position - 1);
          if (is_WS_OR_EOL(preceding)) {
            break;
          }
        } else if (state.position === state.lineStart && testDocumentSeparator(state) || withinFlowCollection && is_FLOW_INDICATOR(ch)) {
          break;
        } else if (is_EOL(ch)) {
          _line = state.line;
          _lineStart = state.lineStart;
          _lineIndent = state.lineIndent;
          skipSeparationSpace(state, false, -1);
          if (state.lineIndent >= nodeIndent) {
            hasPendingContent = true;
            ch = state.input.charCodeAt(state.position);
            continue;
          } else {
            state.position = captureEnd;
            state.line = _line;
            state.lineStart = _lineStart;
            state.lineIndent = _lineIndent;
            break;
          }
        }
        if (hasPendingContent) {
          captureSegment(state, captureStart, captureEnd, false);
          writeFoldedLines(state, state.line - _line);
          captureStart = captureEnd = state.position;
          hasPendingContent = false;
        }
        if (!is_WHITE_SPACE(ch)) {
          captureEnd = state.position + 1;
        }
        ch = state.input.charCodeAt(++state.position);
      }
      captureSegment(state, captureStart, captureEnd, false);
      if (state.result) {
        return true;
      }
      state.kind = _kind;
      state.result = _result;
      return false;
    }
    function readSingleQuotedScalar(state, nodeIndent) {
      var ch, captureStart, captureEnd;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 39) {
        return false;
      }
      state.kind = "scalar";
      state.result = "";
      state.position++;
      captureStart = captureEnd = state.position;
      while ((ch = state.input.charCodeAt(state.position)) !== 0) {
        if (ch === 39) {
          captureSegment(state, captureStart, state.position, true);
          ch = state.input.charCodeAt(++state.position);
          if (ch === 39) {
            captureStart = state.position;
            state.position++;
            captureEnd = state.position;
          } else {
            return true;
          }
        } else if (is_EOL(ch)) {
          captureSegment(state, captureStart, captureEnd, true);
          writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
          captureStart = captureEnd = state.position;
        } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
          throwError(state, "unexpected end of the document within a single quoted scalar");
        } else {
          state.position++;
          captureEnd = state.position;
        }
      }
      throwError(state, "unexpected end of the stream within a single quoted scalar");
    }
    function readDoubleQuotedScalar(state, nodeIndent) {
      var captureStart, captureEnd, hexLength, hexResult, tmp, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 34) {
        return false;
      }
      state.kind = "scalar";
      state.result = "";
      state.position++;
      captureStart = captureEnd = state.position;
      while ((ch = state.input.charCodeAt(state.position)) !== 0) {
        if (ch === 34) {
          captureSegment(state, captureStart, state.position, true);
          state.position++;
          return true;
        } else if (ch === 92) {
          captureSegment(state, captureStart, state.position, true);
          ch = state.input.charCodeAt(++state.position);
          if (is_EOL(ch)) {
            skipSeparationSpace(state, false, nodeIndent);
          } else if (ch < 256 && simpleEscapeCheck[ch]) {
            state.result += simpleEscapeMap[ch];
            state.position++;
          } else if ((tmp = escapedHexLen(ch)) > 0) {
            hexLength = tmp;
            hexResult = 0;
            for (; hexLength > 0; hexLength--) {
              ch = state.input.charCodeAt(++state.position);
              if ((tmp = fromHexCode(ch)) >= 0) {
                hexResult = (hexResult << 4) + tmp;
              } else {
                throwError(state, "expected hexadecimal character");
              }
            }
            state.result += charFromCodepoint(hexResult);
            state.position++;
          } else {
            throwError(state, "unknown escape sequence");
          }
          captureStart = captureEnd = state.position;
        } else if (is_EOL(ch)) {
          captureSegment(state, captureStart, captureEnd, true);
          writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
          captureStart = captureEnd = state.position;
        } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
          throwError(state, "unexpected end of the document within a double quoted scalar");
        } else {
          state.position++;
          captureEnd = state.position;
        }
      }
      throwError(state, "unexpected end of the stream within a double quoted scalar");
    }
    function readFlowCollection(state, nodeIndent) {
      var readNext = true, _line, _tag = state.tag, _result, _anchor = state.anchor, following, terminator, isPair, isExplicitPair, isMapping, overridableKeys = {}, keyNode, keyTag, valueNode, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch === 91) {
        terminator = 93;
        isMapping = false;
        _result = [];
      } else if (ch === 123) {
        terminator = 125;
        isMapping = true;
        _result = {};
      } else {
        return false;
      }
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = _result;
      }
      ch = state.input.charCodeAt(++state.position);
      while (ch !== 0) {
        skipSeparationSpace(state, true, nodeIndent);
        ch = state.input.charCodeAt(state.position);
        if (ch === terminator) {
          state.position++;
          state.tag = _tag;
          state.anchor = _anchor;
          state.kind = isMapping ? "mapping" : "sequence";
          state.result = _result;
          return true;
        } else if (!readNext) {
          throwError(state, "missed comma between flow collection entries");
        }
        keyTag = keyNode = valueNode = null;
        isPair = isExplicitPair = false;
        if (ch === 63) {
          following = state.input.charCodeAt(state.position + 1);
          if (is_WS_OR_EOL(following)) {
            isPair = isExplicitPair = true;
            state.position++;
            skipSeparationSpace(state, true, nodeIndent);
          }
        }
        _line = state.line;
        composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
        keyTag = state.tag;
        keyNode = state.result;
        skipSeparationSpace(state, true, nodeIndent);
        ch = state.input.charCodeAt(state.position);
        if ((isExplicitPair || state.line === _line) && ch === 58) {
          isPair = true;
          ch = state.input.charCodeAt(++state.position);
          skipSeparationSpace(state, true, nodeIndent);
          composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
          valueNode = state.result;
        }
        if (isMapping) {
          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode);
        } else if (isPair) {
          _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode));
        } else {
          _result.push(keyNode);
        }
        skipSeparationSpace(state, true, nodeIndent);
        ch = state.input.charCodeAt(state.position);
        if (ch === 44) {
          readNext = true;
          ch = state.input.charCodeAt(++state.position);
        } else {
          readNext = false;
        }
      }
      throwError(state, "unexpected end of the stream within a flow collection");
    }
    function readBlockScalar(state, nodeIndent) {
      var captureStart, folding, chomping = CHOMPING_CLIP, didReadContent = false, detectedIndent = false, textIndent = nodeIndent, emptyLines = 0, atMoreIndented = false, tmp, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch === 124) {
        folding = false;
      } else if (ch === 62) {
        folding = true;
      } else {
        return false;
      }
      state.kind = "scalar";
      state.result = "";
      while (ch !== 0) {
        ch = state.input.charCodeAt(++state.position);
        if (ch === 43 || ch === 45) {
          if (CHOMPING_CLIP === chomping) {
            chomping = ch === 43 ? CHOMPING_KEEP : CHOMPING_STRIP;
          } else {
            throwError(state, "repeat of a chomping mode identifier");
          }
        } else if ((tmp = fromDecimalCode(ch)) >= 0) {
          if (tmp === 0) {
            throwError(state, "bad explicit indentation width of a block scalar; it cannot be less than one");
          } else if (!detectedIndent) {
            textIndent = nodeIndent + tmp - 1;
            detectedIndent = true;
          } else {
            throwError(state, "repeat of an indentation width identifier");
          }
        } else {
          break;
        }
      }
      if (is_WHITE_SPACE(ch)) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (is_WHITE_SPACE(ch));
        if (ch === 35) {
          do {
            ch = state.input.charCodeAt(++state.position);
          } while (!is_EOL(ch) && ch !== 0);
        }
      }
      while (ch !== 0) {
        readLineBreak(state);
        state.lineIndent = 0;
        ch = state.input.charCodeAt(state.position);
        while ((!detectedIndent || state.lineIndent < textIndent) && ch === 32) {
          state.lineIndent++;
          ch = state.input.charCodeAt(++state.position);
        }
        if (!detectedIndent && state.lineIndent > textIndent) {
          textIndent = state.lineIndent;
        }
        if (is_EOL(ch)) {
          emptyLines++;
          continue;
        }
        if (state.lineIndent < textIndent) {
          if (chomping === CHOMPING_KEEP) {
            state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
          } else if (chomping === CHOMPING_CLIP) {
            if (didReadContent) {
              state.result += "\n";
            }
          }
          break;
        }
        if (folding) {
          if (is_WHITE_SPACE(ch)) {
            atMoreIndented = true;
            state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
          } else if (atMoreIndented) {
            atMoreIndented = false;
            state.result += common.repeat("\n", emptyLines + 1);
          } else if (emptyLines === 0) {
            if (didReadContent) {
              state.result += " ";
            }
          } else {
            state.result += common.repeat("\n", emptyLines);
          }
        } else {
          state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
        }
        didReadContent = true;
        detectedIndent = true;
        emptyLines = 0;
        captureStart = state.position;
        while (!is_EOL(ch) && ch !== 0) {
          ch = state.input.charCodeAt(++state.position);
        }
        captureSegment(state, captureStart, state.position, false);
      }
      return true;
    }
    function readBlockSequence(state, nodeIndent) {
      var _line, _tag = state.tag, _anchor = state.anchor, _result = [], following, detected = false, ch;
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = _result;
      }
      ch = state.input.charCodeAt(state.position);
      while (ch !== 0) {
        if (ch !== 45) {
          break;
        }
        following = state.input.charCodeAt(state.position + 1);
        if (!is_WS_OR_EOL(following)) {
          break;
        }
        detected = true;
        state.position++;
        if (skipSeparationSpace(state, true, -1)) {
          if (state.lineIndent <= nodeIndent) {
            _result.push(null);
            ch = state.input.charCodeAt(state.position);
            continue;
          }
        }
        _line = state.line;
        composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);
        _result.push(state.result);
        skipSeparationSpace(state, true, -1);
        ch = state.input.charCodeAt(state.position);
        if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
          throwError(state, "bad indentation of a sequence entry");
        } else if (state.lineIndent < nodeIndent) {
          break;
        }
      }
      if (detected) {
        state.tag = _tag;
        state.anchor = _anchor;
        state.kind = "sequence";
        state.result = _result;
        return true;
      }
      return false;
    }
    function readBlockMapping(state, nodeIndent, flowIndent) {
      var following, allowCompact, _line, _pos, _tag = state.tag, _anchor = state.anchor, _result = {}, overridableKeys = {}, keyTag = null, keyNode = null, valueNode = null, atExplicitKey = false, detected = false, ch;
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = _result;
      }
      ch = state.input.charCodeAt(state.position);
      while (ch !== 0) {
        following = state.input.charCodeAt(state.position + 1);
        _line = state.line;
        _pos = state.position;
        if ((ch === 63 || ch === 58) && is_WS_OR_EOL(following)) {
          if (ch === 63) {
            if (atExplicitKey) {
              storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);
              keyTag = keyNode = valueNode = null;
            }
            detected = true;
            atExplicitKey = true;
            allowCompact = true;
          } else if (atExplicitKey) {
            atExplicitKey = false;
            allowCompact = true;
          } else {
            throwError(state, "incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");
          }
          state.position += 1;
          ch = following;
        } else if (composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {
          if (state.line === _line) {
            ch = state.input.charCodeAt(state.position);
            while (is_WHITE_SPACE(ch)) {
              ch = state.input.charCodeAt(++state.position);
            }
            if (ch === 58) {
              ch = state.input.charCodeAt(++state.position);
              if (!is_WS_OR_EOL(ch)) {
                throwError(state, "a whitespace character is expected after the key-value separator within a block mapping");
              }
              if (atExplicitKey) {
                storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);
                keyTag = keyNode = valueNode = null;
              }
              detected = true;
              atExplicitKey = false;
              allowCompact = false;
              keyTag = state.tag;
              keyNode = state.result;
            } else if (detected) {
              throwError(state, "can not read an implicit mapping pair; a colon is missed");
            } else {
              state.tag = _tag;
              state.anchor = _anchor;
              return true;
            }
          } else if (detected) {
            throwError(state, "can not read a block mapping entry; a multiline key may not be an implicit key");
          } else {
            state.tag = _tag;
            state.anchor = _anchor;
            return true;
          }
        } else {
          break;
        }
        if (state.line === _line || state.lineIndent > nodeIndent) {
          if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {
            if (atExplicitKey) {
              keyNode = state.result;
            } else {
              valueNode = state.result;
            }
          }
          if (!atExplicitKey) {
            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _pos);
            keyTag = keyNode = valueNode = null;
          }
          skipSeparationSpace(state, true, -1);
          ch = state.input.charCodeAt(state.position);
        }
        if (state.lineIndent > nodeIndent && ch !== 0) {
          throwError(state, "bad indentation of a mapping entry");
        } else if (state.lineIndent < nodeIndent) {
          break;
        }
      }
      if (atExplicitKey) {
        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);
      }
      if (detected) {
        state.tag = _tag;
        state.anchor = _anchor;
        state.kind = "mapping";
        state.result = _result;
      }
      return detected;
    }
    function readTagProperty(state) {
      var _position, isVerbatim = false, isNamed = false, tagHandle, tagName, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 33) return false;
      if (state.tag !== null) {
        throwError(state, "duplication of a tag property");
      }
      ch = state.input.charCodeAt(++state.position);
      if (ch === 60) {
        isVerbatim = true;
        ch = state.input.charCodeAt(++state.position);
      } else if (ch === 33) {
        isNamed = true;
        tagHandle = "!!";
        ch = state.input.charCodeAt(++state.position);
      } else {
        tagHandle = "!";
      }
      _position = state.position;
      if (isVerbatim) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (ch !== 0 && ch !== 62);
        if (state.position < state.length) {
          tagName = state.input.slice(_position, state.position);
          ch = state.input.charCodeAt(++state.position);
        } else {
          throwError(state, "unexpected end of the stream within a verbatim tag");
        }
      } else {
        while (ch !== 0 && !is_WS_OR_EOL(ch)) {
          if (ch === 33) {
            if (!isNamed) {
              tagHandle = state.input.slice(_position - 1, state.position + 1);
              if (!PATTERN_TAG_HANDLE.test(tagHandle)) {
                throwError(state, "named tag handle cannot contain such characters");
              }
              isNamed = true;
              _position = state.position + 1;
            } else {
              throwError(state, "tag suffix cannot contain exclamation marks");
            }
          }
          ch = state.input.charCodeAt(++state.position);
        }
        tagName = state.input.slice(_position, state.position);
        if (PATTERN_FLOW_INDICATORS.test(tagName)) {
          throwError(state, "tag suffix cannot contain flow indicator characters");
        }
      }
      if (tagName && !PATTERN_TAG_URI.test(tagName)) {
        throwError(state, "tag name cannot contain such characters: " + tagName);
      }
      if (isVerbatim) {
        state.tag = tagName;
      } else if (_hasOwnProperty.call(state.tagMap, tagHandle)) {
        state.tag = state.tagMap[tagHandle] + tagName;
      } else if (tagHandle === "!") {
        state.tag = "!" + tagName;
      } else if (tagHandle === "!!") {
        state.tag = "tag:yaml.org,2002:" + tagName;
      } else {
        throwError(state, 'undeclared tag handle "' + tagHandle + '"');
      }
      return true;
    }
    function readAnchorProperty(state) {
      var _position, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 38) return false;
      if (state.anchor !== null) {
        throwError(state, "duplication of an anchor property");
      }
      ch = state.input.charCodeAt(++state.position);
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (state.position === _position) {
        throwError(state, "name of an anchor node must contain at least one character");
      }
      state.anchor = state.input.slice(_position, state.position);
      return true;
    }
    function readAlias(state) {
      var _position, alias, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 42) return false;
      ch = state.input.charCodeAt(++state.position);
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (state.position === _position) {
        throwError(state, "name of an alias node must contain at least one character");
      }
      alias = state.input.slice(_position, state.position);
      if (!_hasOwnProperty.call(state.anchorMap, alias)) {
        throwError(state, 'unidentified alias "' + alias + '"');
      }
      state.result = state.anchorMap[alias];
      skipSeparationSpace(state, true, -1);
      return true;
    }
    function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {
      var allowBlockStyles, allowBlockScalars, allowBlockCollections, indentStatus = 1, atNewLine = false, hasContent = false, typeIndex, typeQuantity, type, flowIndent, blockIndent;
      if (state.listener !== null) {
        state.listener("open", state);
      }
      state.tag = null;
      state.anchor = null;
      state.kind = null;
      state.result = null;
      allowBlockStyles = allowBlockScalars = allowBlockCollections = CONTEXT_BLOCK_OUT === nodeContext || CONTEXT_BLOCK_IN === nodeContext;
      if (allowToSeek) {
        if (skipSeparationSpace(state, true, -1)) {
          atNewLine = true;
          if (state.lineIndent > parentIndent) {
            indentStatus = 1;
          } else if (state.lineIndent === parentIndent) {
            indentStatus = 0;
          } else if (state.lineIndent < parentIndent) {
            indentStatus = -1;
          }
        }
      }
      if (indentStatus === 1) {
        while (readTagProperty(state) || readAnchorProperty(state)) {
          if (skipSeparationSpace(state, true, -1)) {
            atNewLine = true;
            allowBlockCollections = allowBlockStyles;
            if (state.lineIndent > parentIndent) {
              indentStatus = 1;
            } else if (state.lineIndent === parentIndent) {
              indentStatus = 0;
            } else if (state.lineIndent < parentIndent) {
              indentStatus = -1;
            }
          } else {
            allowBlockCollections = false;
          }
        }
      }
      if (allowBlockCollections) {
        allowBlockCollections = atNewLine || allowCompact;
      }
      if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {
        if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {
          flowIndent = parentIndent;
        } else {
          flowIndent = parentIndent + 1;
        }
        blockIndent = state.position - state.lineStart;
        if (indentStatus === 1) {
          if (allowBlockCollections && (readBlockSequence(state, blockIndent) || readBlockMapping(state, blockIndent, flowIndent)) || readFlowCollection(state, flowIndent)) {
            hasContent = true;
          } else {
            if (allowBlockScalars && readBlockScalar(state, flowIndent) || readSingleQuotedScalar(state, flowIndent) || readDoubleQuotedScalar(state, flowIndent)) {
              hasContent = true;
            } else if (readAlias(state)) {
              hasContent = true;
              if (state.tag !== null || state.anchor !== null) {
                throwError(state, "alias node should not have any properties");
              }
            } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {
              hasContent = true;
              if (state.tag === null) {
                state.tag = "?";
              }
            }
            if (state.anchor !== null) {
              state.anchorMap[state.anchor] = state.result;
            }
          }
        } else if (indentStatus === 0) {
          hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);
        }
      }
      if (state.tag !== null && state.tag !== "!") {
        if (state.tag === "?") {
          if (state.result !== null && state.kind !== "scalar") {
            throwError(state, 'unacceptable node kind for !<?> tag; it should be "scalar", not "' + state.kind + '"');
          }
          for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {
            type = state.implicitTypes[typeIndex];
            if (type.resolve(state.result)) {
              state.result = type.construct(state.result);
              state.tag = type.tag;
              if (state.anchor !== null) {
                state.anchorMap[state.anchor] = state.result;
              }
              break;
            }
          }
        } else if (_hasOwnProperty.call(state.typeMap[state.kind || "fallback"], state.tag)) {
          type = state.typeMap[state.kind || "fallback"][state.tag];
          if (state.result !== null && type.kind !== state.kind) {
            throwError(state, "unacceptable node kind for !<" + state.tag + '> tag; it should be "' + type.kind + '", not "' + state.kind + '"');
          }
          if (!type.resolve(state.result)) {
            throwError(state, "cannot resolve a node with !<" + state.tag + "> explicit tag");
          } else {
            state.result = type.construct(state.result);
            if (state.anchor !== null) {
              state.anchorMap[state.anchor] = state.result;
            }
          }
        } else {
          throwError(state, "unknown tag !<" + state.tag + ">");
        }
      }
      if (state.listener !== null) {
        state.listener("close", state);
      }
      return state.tag !== null || state.anchor !== null || hasContent;
    }
    function readDocument(state) {
      var documentStart = state.position, _position, directiveName, directiveArgs, hasDirectives = false, ch;
      state.version = null;
      state.checkLineBreaks = state.legacy;
      state.tagMap = {};
      state.anchorMap = {};
      while ((ch = state.input.charCodeAt(state.position)) !== 0) {
        skipSeparationSpace(state, true, -1);
        ch = state.input.charCodeAt(state.position);
        if (state.lineIndent > 0 || ch !== 37) {
          break;
        }
        hasDirectives = true;
        ch = state.input.charCodeAt(++state.position);
        _position = state.position;
        while (ch !== 0 && !is_WS_OR_EOL(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        directiveName = state.input.slice(_position, state.position);
        directiveArgs = [];
        if (directiveName.length < 1) {
          throwError(state, "directive name must not be less than one character in length");
        }
        while (ch !== 0) {
          while (is_WHITE_SPACE(ch)) {
            ch = state.input.charCodeAt(++state.position);
          }
          if (ch === 35) {
            do {
              ch = state.input.charCodeAt(++state.position);
            } while (ch !== 0 && !is_EOL(ch));
            break;
          }
          if (is_EOL(ch)) break;
          _position = state.position;
          while (ch !== 0 && !is_WS_OR_EOL(ch)) {
            ch = state.input.charCodeAt(++state.position);
          }
          directiveArgs.push(state.input.slice(_position, state.position));
        }
        if (ch !== 0) readLineBreak(state);
        if (_hasOwnProperty.call(directiveHandlers, directiveName)) {
          directiveHandlers[directiveName](state, directiveName, directiveArgs);
        } else {
          throwWarning(state, 'unknown document directive "' + directiveName + '"');
        }
      }
      skipSeparationSpace(state, true, -1);
      if (state.lineIndent === 0 && state.input.charCodeAt(state.position) === 45 && state.input.charCodeAt(state.position + 1) === 45 && state.input.charCodeAt(state.position + 2) === 45) {
        state.position += 3;
        skipSeparationSpace(state, true, -1);
      } else if (hasDirectives) {
        throwError(state, "directives end mark is expected");
      }
      composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);
      skipSeparationSpace(state, true, -1);
      if (state.checkLineBreaks && PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {
        throwWarning(state, "non-ASCII line breaks are interpreted as content");
      }
      state.documents.push(state.result);
      if (state.position === state.lineStart && testDocumentSeparator(state)) {
        if (state.input.charCodeAt(state.position) === 46) {
          state.position += 3;
          skipSeparationSpace(state, true, -1);
        }
        return;
      }
      if (state.position < state.length - 1) {
        throwError(state, "end of the stream or a document separator is expected");
      } else {
        return;
      }
    }
    function loadDocuments(input, options2) {
      input = String(input);
      options2 = options2 || {};
      if (input.length !== 0) {
        if (input.charCodeAt(input.length - 1) !== 10 && input.charCodeAt(input.length - 1) !== 13) {
          input += "\n";
        }
        if (input.charCodeAt(0) === 65279) {
          input = input.slice(1);
        }
      }
      var state = new State(input, options2);
      var nullpos = input.indexOf("\0");
      if (nullpos !== -1) {
        state.position = nullpos;
        throwError(state, "null byte is not allowed in input");
      }
      state.input += "\0";
      while (state.input.charCodeAt(state.position) === 32) {
        state.lineIndent += 1;
        state.position += 1;
      }
      while (state.position < state.length - 1) {
        readDocument(state);
      }
      return state.documents;
    }
    function loadAll(input, iterator, options2) {
      if (iterator !== null && typeof iterator === "object" && typeof options2 === "undefined") {
        options2 = iterator;
        iterator = null;
      }
      var documents = loadDocuments(input, options2);
      if (typeof iterator !== "function") {
        return documents;
      }
      for (var index = 0, length = documents.length; index < length; index += 1) {
        iterator(documents[index]);
      }
    }
    function load(input, options2) {
      var documents = loadDocuments(input, options2);
      if (documents.length === 0) {
        return void 0;
      } else if (documents.length === 1) {
        return documents[0];
      }
      throw new YAMLException("expected a single document in the stream, but found more");
    }
    function safeLoadAll(input, iterator, options2) {
      if (typeof iterator === "object" && iterator !== null && typeof options2 === "undefined") {
        options2 = iterator;
        iterator = null;
      }
      return loadAll(input, iterator, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options2));
    }
    function safeLoad(input, options2) {
      return load(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options2));
    }
    module2.exports.loadAll = loadAll;
    module2.exports.load = load;
    module2.exports.safeLoadAll = safeLoadAll;
    module2.exports.safeLoad = safeLoad;
  }
});

// node_modules/js-yaml/lib/js-yaml/dumper.js
var require_dumper = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/dumper.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var YAMLException = require_exception();
    var DEFAULT_FULL_SCHEMA = require_default_full();
    var DEFAULT_SAFE_SCHEMA = require_default_safe();
    var _toString = Object.prototype.toString;
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    var CHAR_TAB = 9;
    var CHAR_LINE_FEED = 10;
    var CHAR_CARRIAGE_RETURN = 13;
    var CHAR_SPACE = 32;
    var CHAR_EXCLAMATION = 33;
    var CHAR_DOUBLE_QUOTE = 34;
    var CHAR_SHARP = 35;
    var CHAR_PERCENT = 37;
    var CHAR_AMPERSAND = 38;
    var CHAR_SINGLE_QUOTE = 39;
    var CHAR_ASTERISK = 42;
    var CHAR_COMMA = 44;
    var CHAR_MINUS = 45;
    var CHAR_COLON = 58;
    var CHAR_EQUALS = 61;
    var CHAR_GREATER_THAN = 62;
    var CHAR_QUESTION = 63;
    var CHAR_COMMERCIAL_AT = 64;
    var CHAR_LEFT_SQUARE_BRACKET = 91;
    var CHAR_RIGHT_SQUARE_BRACKET = 93;
    var CHAR_GRAVE_ACCENT = 96;
    var CHAR_LEFT_CURLY_BRACKET = 123;
    var CHAR_VERTICAL_LINE = 124;
    var CHAR_RIGHT_CURLY_BRACKET = 125;
    var ESCAPE_SEQUENCES = {};
    ESCAPE_SEQUENCES[0] = "\\0";
    ESCAPE_SEQUENCES[7] = "\\a";
    ESCAPE_SEQUENCES[8] = "\\b";
    ESCAPE_SEQUENCES[9] = "\\t";
    ESCAPE_SEQUENCES[10] = "\\n";
    ESCAPE_SEQUENCES[11] = "\\v";
    ESCAPE_SEQUENCES[12] = "\\f";
    ESCAPE_SEQUENCES[13] = "\\r";
    ESCAPE_SEQUENCES[27] = "\\e";
    ESCAPE_SEQUENCES[34] = '\\"';
    ESCAPE_SEQUENCES[92] = "\\\\";
    ESCAPE_SEQUENCES[133] = "\\N";
    ESCAPE_SEQUENCES[160] = "\\_";
    ESCAPE_SEQUENCES[8232] = "\\L";
    ESCAPE_SEQUENCES[8233] = "\\P";
    var DEPRECATED_BOOLEANS_SYNTAX = [
      "y",
      "Y",
      "yes",
      "Yes",
      "YES",
      "on",
      "On",
      "ON",
      "n",
      "N",
      "no",
      "No",
      "NO",
      "off",
      "Off",
      "OFF"
    ];
    function compileStyleMap(schema, map) {
      var result, keys, index, length, tag, style, type;
      if (map === null) return {};
      result = {};
      keys = Object.keys(map);
      for (index = 0, length = keys.length; index < length; index += 1) {
        tag = keys[index];
        style = String(map[tag]);
        if (tag.slice(0, 2) === "!!") {
          tag = "tag:yaml.org,2002:" + tag.slice(2);
        }
        type = schema.compiledTypeMap["fallback"][tag];
        if (type && _hasOwnProperty.call(type.styleAliases, style)) {
          style = type.styleAliases[style];
        }
        result[tag] = style;
      }
      return result;
    }
    function encodeHex(character) {
      var string, handle, length;
      string = character.toString(16).toUpperCase();
      if (character <= 255) {
        handle = "x";
        length = 2;
      } else if (character <= 65535) {
        handle = "u";
        length = 4;
      } else if (character <= 4294967295) {
        handle = "U";
        length = 8;
      } else {
        throw new YAMLException("code point within a string may not be greater than 0xFFFFFFFF");
      }
      return "\\" + handle + common.repeat("0", length - string.length) + string;
    }
    function State(options2) {
      this.schema = options2["schema"] || DEFAULT_FULL_SCHEMA;
      this.indent = Math.max(1, options2["indent"] || 2);
      this.noArrayIndent = options2["noArrayIndent"] || false;
      this.skipInvalid = options2["skipInvalid"] || false;
      this.flowLevel = common.isNothing(options2["flowLevel"]) ? -1 : options2["flowLevel"];
      this.styleMap = compileStyleMap(this.schema, options2["styles"] || null);
      this.sortKeys = options2["sortKeys"] || false;
      this.lineWidth = options2["lineWidth"] || 80;
      this.noRefs = options2["noRefs"] || false;
      this.noCompatMode = options2["noCompatMode"] || false;
      this.condenseFlow = options2["condenseFlow"] || false;
      this.implicitTypes = this.schema.compiledImplicit;
      this.explicitTypes = this.schema.compiledExplicit;
      this.tag = null;
      this.result = "";
      this.duplicates = [];
      this.usedDuplicates = null;
    }
    function indentString(string, spaces) {
      var ind = common.repeat(" ", spaces), position = 0, next = -1, result = "", line, length = string.length;
      while (position < length) {
        next = string.indexOf("\n", position);
        if (next === -1) {
          line = string.slice(position);
          position = length;
        } else {
          line = string.slice(position, next + 1);
          position = next + 1;
        }
        if (line.length && line !== "\n") result += ind;
        result += line;
      }
      return result;
    }
    function generateNextLine(state, level) {
      return "\n" + common.repeat(" ", state.indent * level);
    }
    function testImplicitResolving(state, str2) {
      var index, length, type;
      for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {
        type = state.implicitTypes[index];
        if (type.resolve(str2)) {
          return true;
        }
      }
      return false;
    }
    function isWhitespace(c) {
      return c === CHAR_SPACE || c === CHAR_TAB;
    }
    function isPrintable(c) {
      return 32 <= c && c <= 126 || 161 <= c && c <= 55295 && c !== 8232 && c !== 8233 || 57344 <= c && c <= 65533 && c !== 65279 || 65536 <= c && c <= 1114111;
    }
    function isNsChar(c) {
      return isPrintable(c) && !isWhitespace(c) && c !== 65279 && c !== CHAR_CARRIAGE_RETURN && c !== CHAR_LINE_FEED;
    }
    function isPlainSafe(c, prev) {
      return isPrintable(c) && c !== 65279 && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_COLON && (c !== CHAR_SHARP || prev && isNsChar(prev));
    }
    function isPlainSafeFirst(c) {
      return isPrintable(c) && c !== 65279 && !isWhitespace(c) && c !== CHAR_MINUS && c !== CHAR_QUESTION && c !== CHAR_COLON && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_SHARP && c !== CHAR_AMPERSAND && c !== CHAR_ASTERISK && c !== CHAR_EXCLAMATION && c !== CHAR_VERTICAL_LINE && c !== CHAR_EQUALS && c !== CHAR_GREATER_THAN && c !== CHAR_SINGLE_QUOTE && c !== CHAR_DOUBLE_QUOTE && c !== CHAR_PERCENT && c !== CHAR_COMMERCIAL_AT && c !== CHAR_GRAVE_ACCENT;
    }
    function needIndentIndicator(string) {
      var leadingSpaceRe = /^\n* /;
      return leadingSpaceRe.test(string);
    }
    var STYLE_PLAIN = 1;
    var STYLE_SINGLE = 2;
    var STYLE_LITERAL = 3;
    var STYLE_FOLDED = 4;
    var STYLE_DOUBLE = 5;
    function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType) {
      var i;
      var char, prev_char;
      var hasLineBreak = false;
      var hasFoldableLine = false;
      var shouldTrackWidth = lineWidth !== -1;
      var previousLineBreak = -1;
      var plain = isPlainSafeFirst(string.charCodeAt(0)) && !isWhitespace(string.charCodeAt(string.length - 1));
      if (singleLineOnly) {
        for (i = 0; i < string.length; i++) {
          char = string.charCodeAt(i);
          if (!isPrintable(char)) {
            return STYLE_DOUBLE;
          }
          prev_char = i > 0 ? string.charCodeAt(i - 1) : null;
          plain = plain && isPlainSafe(char, prev_char);
        }
      } else {
        for (i = 0; i < string.length; i++) {
          char = string.charCodeAt(i);
          if (char === CHAR_LINE_FEED) {
            hasLineBreak = true;
            if (shouldTrackWidth) {
              hasFoldableLine = hasFoldableLine || // Foldable line = too long, and not more-indented.
              i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ";
              previousLineBreak = i;
            }
          } else if (!isPrintable(char)) {
            return STYLE_DOUBLE;
          }
          prev_char = i > 0 ? string.charCodeAt(i - 1) : null;
          plain = plain && isPlainSafe(char, prev_char);
        }
        hasFoldableLine = hasFoldableLine || shouldTrackWidth && (i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ");
      }
      if (!hasLineBreak && !hasFoldableLine) {
        return plain && !testAmbiguousType(string) ? STYLE_PLAIN : STYLE_SINGLE;
      }
      if (indentPerLevel > 9 && needIndentIndicator(string)) {
        return STYLE_DOUBLE;
      }
      return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;
    }
    function writeScalar(state, string, level, iskey) {
      state.dump = (function() {
        if (string.length === 0) {
          return "''";
        }
        if (!state.noCompatMode && DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1) {
          return "'" + string + "'";
        }
        var indent = state.indent * Math.max(1, level);
        var lineWidth = state.lineWidth === -1 ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);
        var singleLineOnly = iskey || state.flowLevel > -1 && level >= state.flowLevel;
        function testAmbiguity(string2) {
          return testImplicitResolving(state, string2);
        }
        switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth, testAmbiguity)) {
          case STYLE_PLAIN:
            return string;
          case STYLE_SINGLE:
            return "'" + string.replace(/'/g, "''") + "'";
          case STYLE_LITERAL:
            return "|" + blockHeader(string, state.indent) + dropEndingNewline(indentString(string, indent));
          case STYLE_FOLDED:
            return ">" + blockHeader(string, state.indent) + dropEndingNewline(indentString(foldString(string, lineWidth), indent));
          case STYLE_DOUBLE:
            return '"' + escapeString(string, lineWidth) + '"';
          default:
            throw new YAMLException("impossible error: invalid scalar style");
        }
      })();
    }
    function blockHeader(string, indentPerLevel) {
      var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : "";
      var clip = string[string.length - 1] === "\n";
      var keep = clip && (string[string.length - 2] === "\n" || string === "\n");
      var chomp = keep ? "+" : clip ? "" : "-";
      return indentIndicator + chomp + "\n";
    }
    function dropEndingNewline(string) {
      return string[string.length - 1] === "\n" ? string.slice(0, -1) : string;
    }
    function foldString(string, width) {
      var lineRe = /(\n+)([^\n]*)/g;
      var result = (function() {
        var nextLF = string.indexOf("\n");
        nextLF = nextLF !== -1 ? nextLF : string.length;
        lineRe.lastIndex = nextLF;
        return foldLine(string.slice(0, nextLF), width);
      })();
      var prevMoreIndented = string[0] === "\n" || string[0] === " ";
      var moreIndented;
      var match;
      while (match = lineRe.exec(string)) {
        var prefix = match[1], line = match[2];
        moreIndented = line[0] === " ";
        result += prefix + (!prevMoreIndented && !moreIndented && line !== "" ? "\n" : "") + foldLine(line, width);
        prevMoreIndented = moreIndented;
      }
      return result;
    }
    function foldLine(line, width) {
      if (line === "" || line[0] === " ") return line;
      var breakRe = / [^ ]/g;
      var match;
      var start = 0, end, curr = 0, next = 0;
      var result = "";
      while (match = breakRe.exec(line)) {
        next = match.index;
        if (next - start > width) {
          end = curr > start ? curr : next;
          result += "\n" + line.slice(start, end);
          start = end + 1;
        }
        curr = next;
      }
      result += "\n";
      if (line.length - start > width && curr > start) {
        result += line.slice(start, curr) + "\n" + line.slice(curr + 1);
      } else {
        result += line.slice(start);
      }
      return result.slice(1);
    }
    function escapeString(string) {
      var result = "";
      var char, nextChar;
      var escapeSeq;
      for (var i = 0; i < string.length; i++) {
        char = string.charCodeAt(i);
        if (char >= 55296 && char <= 56319) {
          nextChar = string.charCodeAt(i + 1);
          if (nextChar >= 56320 && nextChar <= 57343) {
            result += encodeHex((char - 55296) * 1024 + nextChar - 56320 + 65536);
            i++;
            continue;
          }
        }
        escapeSeq = ESCAPE_SEQUENCES[char];
        result += !escapeSeq && isPrintable(char) ? string[i] : escapeSeq || encodeHex(char);
      }
      return result;
    }
    function writeFlowSequence(state, level, object) {
      var _result = "", _tag = state.tag, index, length;
      for (index = 0, length = object.length; index < length; index += 1) {
        if (writeNode(state, level, object[index], false, false)) {
          if (index !== 0) _result += "," + (!state.condenseFlow ? " " : "");
          _result += state.dump;
        }
      }
      state.tag = _tag;
      state.dump = "[" + _result + "]";
    }
    function writeBlockSequence(state, level, object, compact) {
      var _result = "", _tag = state.tag, index, length;
      for (index = 0, length = object.length; index < length; index += 1) {
        if (writeNode(state, level + 1, object[index], true, true)) {
          if (!compact || index !== 0) {
            _result += generateNextLine(state, level);
          }
          if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
            _result += "-";
          } else {
            _result += "- ";
          }
          _result += state.dump;
        }
      }
      state.tag = _tag;
      state.dump = _result || "[]";
    }
    function writeFlowMapping(state, level, object) {
      var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, pairBuffer;
      for (index = 0, length = objectKeyList.length; index < length; index += 1) {
        pairBuffer = "";
        if (index !== 0) pairBuffer += ", ";
        if (state.condenseFlow) pairBuffer += '"';
        objectKey = objectKeyList[index];
        objectValue = object[objectKey];
        if (!writeNode(state, level, objectKey, false, false)) {
          continue;
        }
        if (state.dump.length > 1024) pairBuffer += "? ";
        pairBuffer += state.dump + (state.condenseFlow ? '"' : "") + ":" + (state.condenseFlow ? "" : " ");
        if (!writeNode(state, level, objectValue, false, false)) {
          continue;
        }
        pairBuffer += state.dump;
        _result += pairBuffer;
      }
      state.tag = _tag;
      state.dump = "{" + _result + "}";
    }
    function writeBlockMapping(state, level, object, compact) {
      var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, explicitPair, pairBuffer;
      if (state.sortKeys === true) {
        objectKeyList.sort();
      } else if (typeof state.sortKeys === "function") {
        objectKeyList.sort(state.sortKeys);
      } else if (state.sortKeys) {
        throw new YAMLException("sortKeys must be a boolean or a function");
      }
      for (index = 0, length = objectKeyList.length; index < length; index += 1) {
        pairBuffer = "";
        if (!compact || index !== 0) {
          pairBuffer += generateNextLine(state, level);
        }
        objectKey = objectKeyList[index];
        objectValue = object[objectKey];
        if (!writeNode(state, level + 1, objectKey, true, true, true)) {
          continue;
        }
        explicitPair = state.tag !== null && state.tag !== "?" || state.dump && state.dump.length > 1024;
        if (explicitPair) {
          if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
            pairBuffer += "?";
          } else {
            pairBuffer += "? ";
          }
        }
        pairBuffer += state.dump;
        if (explicitPair) {
          pairBuffer += generateNextLine(state, level);
        }
        if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {
          continue;
        }
        if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
          pairBuffer += ":";
        } else {
          pairBuffer += ": ";
        }
        pairBuffer += state.dump;
        _result += pairBuffer;
      }
      state.tag = _tag;
      state.dump = _result || "{}";
    }
    function detectType(state, object, explicit) {
      var _result, typeList, index, length, type, style;
      typeList = explicit ? state.explicitTypes : state.implicitTypes;
      for (index = 0, length = typeList.length; index < length; index += 1) {
        type = typeList[index];
        if ((type.instanceOf || type.predicate) && (!type.instanceOf || typeof object === "object" && object instanceof type.instanceOf) && (!type.predicate || type.predicate(object))) {
          state.tag = explicit ? type.tag : "?";
          if (type.represent) {
            style = state.styleMap[type.tag] || type.defaultStyle;
            if (_toString.call(type.represent) === "[object Function]") {
              _result = type.represent(object, style);
            } else if (_hasOwnProperty.call(type.represent, style)) {
              _result = type.represent[style](object, style);
            } else {
              throw new YAMLException("!<" + type.tag + '> tag resolver accepts not "' + style + '" style');
            }
            state.dump = _result;
          }
          return true;
        }
      }
      return false;
    }
    function writeNode(state, level, object, block, compact, iskey) {
      state.tag = null;
      state.dump = object;
      if (!detectType(state, object, false)) {
        detectType(state, object, true);
      }
      var type = _toString.call(state.dump);
      if (block) {
        block = state.flowLevel < 0 || state.flowLevel > level;
      }
      var objectOrArray = type === "[object Object]" || type === "[object Array]", duplicateIndex, duplicate;
      if (objectOrArray) {
        duplicateIndex = state.duplicates.indexOf(object);
        duplicate = duplicateIndex !== -1;
      }
      if (state.tag !== null && state.tag !== "?" || duplicate || state.indent !== 2 && level > 0) {
        compact = false;
      }
      if (duplicate && state.usedDuplicates[duplicateIndex]) {
        state.dump = "*ref_" + duplicateIndex;
      } else {
        if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {
          state.usedDuplicates[duplicateIndex] = true;
        }
        if (type === "[object Object]") {
          if (block && Object.keys(state.dump).length !== 0) {
            writeBlockMapping(state, level, state.dump, compact);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + state.dump;
            }
          } else {
            writeFlowMapping(state, level, state.dump);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + " " + state.dump;
            }
          }
        } else if (type === "[object Array]") {
          var arrayLevel = state.noArrayIndent && level > 0 ? level - 1 : level;
          if (block && state.dump.length !== 0) {
            writeBlockSequence(state, arrayLevel, state.dump, compact);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + state.dump;
            }
          } else {
            writeFlowSequence(state, arrayLevel, state.dump);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + " " + state.dump;
            }
          }
        } else if (type === "[object String]") {
          if (state.tag !== "?") {
            writeScalar(state, state.dump, level, iskey);
          }
        } else {
          if (state.skipInvalid) return false;
          throw new YAMLException("unacceptable kind of an object to dump " + type);
        }
        if (state.tag !== null && state.tag !== "?") {
          state.dump = "!<" + state.tag + "> " + state.dump;
        }
      }
      return true;
    }
    function getDuplicateReferences(object, state) {
      var objects = [], duplicatesIndexes = [], index, length;
      inspectNode(object, objects, duplicatesIndexes);
      for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {
        state.duplicates.push(objects[duplicatesIndexes[index]]);
      }
      state.usedDuplicates = new Array(length);
    }
    function inspectNode(object, objects, duplicatesIndexes) {
      var objectKeyList, index, length;
      if (object !== null && typeof object === "object") {
        index = objects.indexOf(object);
        if (index !== -1) {
          if (duplicatesIndexes.indexOf(index) === -1) {
            duplicatesIndexes.push(index);
          }
        } else {
          objects.push(object);
          if (Array.isArray(object)) {
            for (index = 0, length = object.length; index < length; index += 1) {
              inspectNode(object[index], objects, duplicatesIndexes);
            }
          } else {
            objectKeyList = Object.keys(object);
            for (index = 0, length = objectKeyList.length; index < length; index += 1) {
              inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);
            }
          }
        }
      }
    }
    function dump(input, options2) {
      options2 = options2 || {};
      var state = new State(options2);
      if (!state.noRefs) getDuplicateReferences(input, state);
      if (writeNode(state, 0, input, true, true)) return state.dump + "\n";
      return "";
    }
    function safeDump(input, options2) {
      return dump(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options2));
    }
    module2.exports.dump = dump;
    module2.exports.safeDump = safeDump;
  }
});

// node_modules/js-yaml/lib/js-yaml.js
var require_js_yaml = __commonJS({
  "node_modules/js-yaml/lib/js-yaml.js"(exports2, module2) {
    "use strict";
    var loader = require_loader();
    var dumper = require_dumper();
    function deprecated(name) {
      return function() {
        throw new Error("Function " + name + " is deprecated and cannot be used.");
      };
    }
    module2.exports.Type = require_type();
    module2.exports.Schema = require_schema();
    module2.exports.FAILSAFE_SCHEMA = require_failsafe();
    module2.exports.JSON_SCHEMA = require_json();
    module2.exports.CORE_SCHEMA = require_core();
    module2.exports.DEFAULT_SAFE_SCHEMA = require_default_safe();
    module2.exports.DEFAULT_FULL_SCHEMA = require_default_full();
    module2.exports.load = loader.load;
    module2.exports.loadAll = loader.loadAll;
    module2.exports.safeLoad = loader.safeLoad;
    module2.exports.safeLoadAll = loader.safeLoadAll;
    module2.exports.dump = dumper.dump;
    module2.exports.safeDump = dumper.safeDump;
    module2.exports.YAMLException = require_exception();
    module2.exports.MINIMAL_SCHEMA = require_failsafe();
    module2.exports.SAFE_SCHEMA = require_default_safe();
    module2.exports.DEFAULT_SCHEMA = require_default_full();
    module2.exports.scan = deprecated("scan");
    module2.exports.parse = deprecated("parse");
    module2.exports.compose = deprecated("compose");
    module2.exports.addConstructor = deprecated("addConstructor");
  }
});

// node_modules/js-yaml/index.js
var require_js_yaml2 = __commonJS({
  "node_modules/js-yaml/index.js"(exports2, module2) {
    "use strict";
    var yaml2 = require_js_yaml();
    module2.exports = yaml2;
  }
});

// node_modules/gray-matter/lib/engines.js
var require_engines = __commonJS({
  "node_modules/gray-matter/lib/engines.js"(exports, module) {
    "use strict";
    var yaml = require_js_yaml2();
    var engines = exports = module.exports;
    engines.yaml = {
      parse: yaml.safeLoad.bind(yaml),
      stringify: yaml.safeDump.bind(yaml)
    };
    engines.json = {
      parse: JSON.parse.bind(JSON),
      stringify: function(obj, options2) {
        const opts = Object.assign({ replacer: null, space: 2 }, options2);
        return JSON.stringify(obj, opts.replacer, opts.space);
      }
    };
    engines.javascript = {
      parse: function parse(str, options, wrap) {
        try {
          if (wrap !== false) {
            str = "(function() {\nreturn " + str.trim() + ";\n}());";
          }
          return eval(str) || {};
        } catch (err) {
          if (wrap !== false && /(unexpected|identifier)/i.test(err.message)) {
            return parse(str, options, false);
          }
          throw new SyntaxError(err);
        }
      },
      stringify: function() {
        throw new Error("stringifying JavaScript is not supported");
      }
    };
  }
});

// node_modules/strip-bom-string/index.js
var require_strip_bom_string = __commonJS({
  "node_modules/strip-bom-string/index.js"(exports2, module2) {
    "use strict";
    module2.exports = function(str2) {
      if (typeof str2 === "string" && str2.charAt(0) === "\uFEFF") {
        return str2.slice(1);
      }
      return str2;
    };
  }
});

// node_modules/gray-matter/lib/utils.js
var require_utils = __commonJS({
  "node_modules/gray-matter/lib/utils.js"(exports2) {
    "use strict";
    var stripBom = require_strip_bom_string();
    var typeOf = require_kind_of();
    exports2.define = function(obj, key, val) {
      Reflect.defineProperty(obj, key, {
        enumerable: false,
        configurable: true,
        writable: true,
        value: val
      });
    };
    exports2.isBuffer = function(val) {
      return typeOf(val) === "buffer";
    };
    exports2.isObject = function(val) {
      return typeOf(val) === "object";
    };
    exports2.toBuffer = function(input) {
      return typeof input === "string" ? Buffer.from(input) : input;
    };
    exports2.toString = function(input) {
      if (exports2.isBuffer(input)) return stripBom(String(input));
      if (typeof input !== "string") {
        throw new TypeError("expected input to be a string or buffer");
      }
      return stripBom(input);
    };
    exports2.arrayify = function(val) {
      return val ? Array.isArray(val) ? val : [val] : [];
    };
    exports2.startsWith = function(str2, substr, len) {
      if (typeof len !== "number") len = substr.length;
      return str2.slice(0, len) === substr;
    };
  }
});

// node_modules/gray-matter/lib/defaults.js
var require_defaults = __commonJS({
  "node_modules/gray-matter/lib/defaults.js"(exports2, module2) {
    "use strict";
    var engines2 = require_engines();
    var utils = require_utils();
    module2.exports = function(options2) {
      const opts = Object.assign({}, options2);
      opts.delimiters = utils.arrayify(opts.delims || opts.delimiters || "---");
      if (opts.delimiters.length === 1) {
        opts.delimiters.push(opts.delimiters[0]);
      }
      opts.language = (opts.language || opts.lang || "yaml").toLowerCase();
      opts.engines = Object.assign({}, engines2, opts.parsers, opts.engines);
      return opts;
    };
  }
});

// node_modules/gray-matter/lib/engine.js
var require_engine = __commonJS({
  "node_modules/gray-matter/lib/engine.js"(exports2, module2) {
    "use strict";
    module2.exports = function(name, options2) {
      let engine = options2.engines[name] || options2.engines[aliase(name)];
      if (typeof engine === "undefined") {
        throw new Error('gray-matter engine "' + name + '" is not registered');
      }
      if (typeof engine === "function") {
        engine = { parse: engine };
      }
      return engine;
    };
    function aliase(name) {
      switch (name.toLowerCase()) {
        case "js":
        case "javascript":
          return "javascript";
        case "coffee":
        case "coffeescript":
        case "cson":
          return "coffee";
        case "yaml":
        case "yml":
          return "yaml";
        default: {
          return name;
        }
      }
    }
  }
});

// node_modules/gray-matter/lib/stringify.js
var require_stringify = __commonJS({
  "node_modules/gray-matter/lib/stringify.js"(exports2, module2) {
    "use strict";
    var typeOf = require_kind_of();
    var getEngine = require_engine();
    var defaults = require_defaults();
    module2.exports = function(file, data, options2) {
      if (data == null && options2 == null) {
        switch (typeOf(file)) {
          case "object":
            data = file.data;
            options2 = {};
            break;
          case "string":
            return file;
          default: {
            throw new TypeError("expected file to be a string or object");
          }
        }
      }
      const str2 = file.content;
      const opts = defaults(options2);
      if (data == null) {
        if (!opts.data) return file;
        data = opts.data;
      }
      const language = file.language || opts.language;
      const engine = getEngine(language, opts);
      if (typeof engine.stringify !== "function") {
        throw new TypeError('expected "' + language + '.stringify" to be a function');
      }
      data = Object.assign({}, file.data, data);
      const open = opts.delimiters[0];
      const close = opts.delimiters[1];
      const matter2 = engine.stringify(data, options2).trim();
      let buf = "";
      if (matter2 !== "{}") {
        buf = newline(open) + newline(matter2) + newline(close);
      }
      if (typeof file.excerpt === "string" && file.excerpt !== "") {
        if (str2.indexOf(file.excerpt.trim()) === -1) {
          buf += newline(file.excerpt) + newline(close);
        }
      }
      return buf + newline(str2);
    };
    function newline(str2) {
      return str2.slice(-1) !== "\n" ? str2 + "\n" : str2;
    }
  }
});

// node_modules/gray-matter/lib/excerpt.js
var require_excerpt = __commonJS({
  "node_modules/gray-matter/lib/excerpt.js"(exports2, module2) {
    "use strict";
    var defaults = require_defaults();
    module2.exports = function(file, options2) {
      const opts = defaults(options2);
      if (file.data == null) {
        file.data = {};
      }
      if (typeof opts.excerpt === "function") {
        return opts.excerpt(file, opts);
      }
      const sep = file.data.excerpt_separator || opts.excerpt_separator;
      if (sep == null && (opts.excerpt === false || opts.excerpt == null)) {
        return file;
      }
      const delimiter = typeof opts.excerpt === "string" ? opts.excerpt : sep || opts.delimiters[0];
      const idx = file.content.indexOf(delimiter);
      if (idx !== -1) {
        file.excerpt = file.content.slice(0, idx);
      }
      return file;
    };
  }
});

// node_modules/gray-matter/lib/to-file.js
var require_to_file = __commonJS({
  "node_modules/gray-matter/lib/to-file.js"(exports2, module2) {
    "use strict";
    var typeOf = require_kind_of();
    var stringify = require_stringify();
    var utils = require_utils();
    module2.exports = function(file) {
      if (typeOf(file) !== "object") {
        file = { content: file };
      }
      if (typeOf(file.data) !== "object") {
        file.data = {};
      }
      if (file.contents && file.content == null) {
        file.content = file.contents;
      }
      utils.define(file, "orig", utils.toBuffer(file.content));
      utils.define(file, "language", file.language || "");
      utils.define(file, "matter", file.matter || "");
      utils.define(file, "stringify", function(data, options2) {
        if (options2 && options2.language) {
          file.language = options2.language;
        }
        return stringify(file, data, options2);
      });
      file.content = utils.toString(file.content);
      file.isEmpty = false;
      file.excerpt = "";
      return file;
    };
  }
});

// node_modules/gray-matter/lib/parse.js
var require_parse = __commonJS({
  "node_modules/gray-matter/lib/parse.js"(exports2, module2) {
    "use strict";
    var getEngine = require_engine();
    var defaults = require_defaults();
    module2.exports = function(language, str2, options2) {
      const opts = defaults(options2);
      const engine = getEngine(language, opts);
      if (typeof engine.parse !== "function") {
        throw new TypeError('expected "' + language + '.parse" to be a function');
      }
      return engine.parse(str2, opts);
    };
  }
});

// node_modules/gray-matter/index.js
var require_gray_matter = __commonJS({
  "node_modules/gray-matter/index.js"(exports2, module2) {
    "use strict";
    var fs = require("fs");
    var sections = require_section_matter();
    var defaults = require_defaults();
    var stringify = require_stringify();
    var excerpt = require_excerpt();
    var engines2 = require_engines();
    var toFile = require_to_file();
    var parse2 = require_parse();
    var utils = require_utils();
    function matter2(input, options2) {
      if (input === "") {
        return { data: {}, content: input, excerpt: "", orig: input };
      }
      let file = toFile(input);
      const cached = matter2.cache[file.content];
      if (!options2) {
        if (cached) {
          file = Object.assign({}, cached);
          file.orig = cached.orig;
          return file;
        }
        matter2.cache[file.content] = file;
      }
      return parseMatter(file, options2);
    }
    function parseMatter(file, options2) {
      const opts = defaults(options2);
      const open = opts.delimiters[0];
      const close = "\n" + opts.delimiters[1];
      let str2 = file.content;
      if (opts.language) {
        file.language = opts.language;
      }
      const openLen = open.length;
      if (!utils.startsWith(str2, open, openLen)) {
        excerpt(file, opts);
        return file;
      }
      if (str2.charAt(openLen) === open.slice(-1)) {
        return file;
      }
      str2 = str2.slice(openLen);
      const len = str2.length;
      const language = matter2.language(str2, opts);
      if (language.name) {
        file.language = language.name;
        str2 = str2.slice(language.raw.length);
      }
      let closeIndex = str2.indexOf(close);
      if (closeIndex === -1) {
        closeIndex = len;
      }
      file.matter = str2.slice(0, closeIndex);
      const block = file.matter.replace(/^\s*#[^\n]+/gm, "").trim();
      if (block === "") {
        file.isEmpty = true;
        file.empty = file.content;
        file.data = {};
      } else {
        file.data = parse2(file.language, file.matter, opts);
      }
      if (closeIndex === len) {
        file.content = "";
      } else {
        file.content = str2.slice(closeIndex + close.length);
        if (file.content[0] === "\r") {
          file.content = file.content.slice(1);
        }
        if (file.content[0] === "\n") {
          file.content = file.content.slice(1);
        }
      }
      excerpt(file, opts);
      if (opts.sections === true || typeof opts.section === "function") {
        sections(file, opts.section);
      }
      return file;
    }
    matter2.engines = engines2;
    matter2.stringify = function(file, data, options2) {
      if (typeof file === "string") file = matter2(file, options2);
      return stringify(file, data, options2);
    };
    matter2.read = function(filepath, options2) {
      const str2 = fs.readFileSync(filepath, "utf8");
      const file = matter2(str2, options2);
      file.path = filepath;
      return file;
    };
    matter2.test = function(str2, options2) {
      return utils.startsWith(str2, defaults(options2).delimiters[0]);
    };
    matter2.language = function(str2, options2) {
      const opts = defaults(options2);
      const open = opts.delimiters[0];
      if (matter2.test(str2)) {
        str2 = str2.slice(open.length);
      }
      const language = str2.slice(0, str2.search(/\r?\n/));
      return {
        raw: language,
        name: language ? language.trim() : ""
      };
    };
    matter2.cache = {};
    matter2.clearCache = function() {
      matter2.cache = {};
    };
    module2.exports = matter2;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => OvlPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian11 = require("obsidian");

// src/conversationStore.ts
var import_obsidian = require("obsidian");

// src/conversation.ts
function convertToMarkdown(conversation) {
  const lines = [];
  lines.push(`# \uB300\uD654 \uAE30\uB85D - ${conversation.sessionId}`);
  lines.push("");
  lines.push(`\uC0DD\uC131\uC77C: ${conversation.createdAt.toISOString()}`);
  lines.push("");
  lines.push("---");
  lines.push("");
  for (const turn of conversation.turns) {
    const roleLabel = turn.role === "user" ? "\u{1F464} \uC0AC\uC6A9\uC790" : turn.role === "assistant" ? "\u{1F916} \uC5B4\uC2DC\uC2A4\uD134\uD2B8" : "\u2699\uFE0F \uC2DC\uC2A4\uD15C";
    lines.push(`## ${roleLabel}`);
    if (turn.timestamp) {
      const timestamp = typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString();
      lines.push(`*${timestamp}*`);
      lines.push("");
    }
    lines.push(turn.content);
    lines.push("");
  }
  return lines.join("\n");
}

// src/conversationStore.ts
async function saveConversationFromTurns(vault, sessionId, turns, outputFolder) {
  const conversation = {
    sessionId,
    turns,
    createdAt: /* @__PURE__ */ new Date()
  };
  const markdown = convertToMarkdown(conversation);
  const filename = buildFileName(conversation);
  const cleanedFolder = outputFolder ? (0, import_obsidian.normalizePath)(outputFolder).replace(/^\/+/, "") : "";
  const targetPath = await ensureUniquePath(
    vault,
    (0, import_obsidian.normalizePath)(cleanedFolder ? `${cleanedFolder}/${filename}` : filename)
  );
  if (cleanedFolder) {
    await ensureFolderExists(vault, cleanedFolder);
  }
  await vault.create(targetPath, markdown);
  return targetPath;
}
function buildFileName(conversation) {
  const safeTitle = sanitizeFileSegment(conversation.sessionId);
  return `${safeTitle}.md`;
}
function sanitizeFileSegment(value) {
  const trimmed = value.trim();
  if (!trimmed) {
    return "untitled";
  }
  const cleaned = trimmed.replace(/[\\/:*?"<>|]/g, " ").replace(/\s+/g, " ").trim();
  return cleaned || "untitled";
}
async function ensureFolderExists(vault, folder) {
  const exists = await vault.adapter.exists(folder);
  if (!exists) {
    await vault.createFolder(folder);
  }
}
async function ensureUniquePath(vault, path) {
  const normalized = (0, import_obsidian.normalizePath)(path);
  const extensionIndex = normalized.lastIndexOf(".md");
  const base = extensionIndex === -1 ? normalized : normalized.slice(0, extensionIndex);
  const extension = extensionIndex === -1 ? "" : ".md";
  let candidate = normalized;
  let count = 1;
  while (await vault.adapter.exists(candidate)) {
    candidate = `${base}-${count}${extension}`;
    count += 1;
  }
  return candidate;
}

// src/api.ts
var import_obsidian2 = require("obsidian");

// src/types.ts
var PROVIDER_PRESETS = {
  gemini: {
    apiUrl: "https://generativelanguage.googleapis.com/v1beta/models/gemini-3.0-preview:generateContent",
    model: "gemini-3.0-preview"
  },
  openai: {
    apiUrl: "https://api.openai.com/v1/chat/completions",
    model: "gpt-4o-mini"
  },
  ollama: {
    apiUrl: "http://localhost:11434/v1/chat/completions",
    model: "llama3.1"
  },
  custom: {
    apiUrl: "",
    model: ""
  }
};
var EMBEDDING_PRESETS = {
  gemini: {
    model: "text-embedding-004",
    apiUrl: "https://generativelanguage.googleapis.com/v1beta/models"
  },
  openai: {
    model: "text-embedding-3-small",
    apiUrl: "https://api.openai.com/v1/embeddings"
  },
  local: {
    model: "Xenova/all-MiniLM-L6-v2"
  },
  custom: {
    model: ""
  }
};
var DEFAULT_SETTINGS = {
  provider: "gemini",
  apiUrl: PROVIDER_PRESETS.gemini.apiUrl,
  apiKey: "",
  model: PROVIDER_PRESETS.gemini.model,
  titleModel: "",
  systemPrompt: "",
  defaultOutputFolder: "",
  //   
  indexingEnabled: false,
  chunkSize: 400,
  chunkOverlap: 50,
  topK: 8,
  //    (Gemini)
  embeddingProvider: "gemini",
  embeddingApiKey: "",
  embeddingModel: EMBEDDING_PRESETS.gemini.model
};

// src/api.ts
var OvlApiClient = class {
  constructor(getSettings, logWriter) {
    this.getSettings = getSettings;
    this.logWriter = logWriter != null ? logWriter : (async () => {
    });
  }
  async requestAssistantReply(turns) {
    const settings = this.getSettings();
    if (settings.provider === "gemini") {
      return this.requestGeminiReply(settings, turns);
    }
    return this.requestOpenAiCompatibleReply(settings, turns);
  }
  async requestTitleReply(prompt) {
    const settings = this.getSettings();
    const titleModel = settings.titleModel.trim();
    const modelName = titleModel || settings.model.trim();
    const turns = [
      {
        role: "user",
        content: prompt,
        timestamp: (/* @__PURE__ */ new Date()).toISOString()
      }
    ];
    if (settings.provider === "gemini") {
      return this.requestGeminiReply(settings, turns, {
        modelName,
        systemPrompt: ""
      });
    }
    return this.requestOpenAiCompatibleReply(settings, turns, {
      modelName,
      systemPrompt: ""
    });
  }
  async requestOpenAiCompatibleReply(settings, turns, options2) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const apiUrl = settings.apiUrl.trim();
    if (!apiUrl) {
      throw new Error("API URL\uC744 \uC124\uC815\uD574 \uC8FC\uC138\uC694.");
    }
    const modelName = ((_a = options2 == null ? void 0 : options2.modelName) == null ? void 0 : _a.trim()) || settings.model.trim() || PROVIDER_PRESETS.openai.model;
    if (!modelName) {
      throw new Error("\uBAA8\uB378 \uC774\uB984\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const messages = this.buildOpenAiMessages(settings, turns, (_b = options2 == null ? void 0 : options2.systemPrompt) != null ? _b : null);
    const payload = {
      model: modelName,
      messages
    };
    const body = JSON.stringify(payload);
    const headers = {
      "Content-Type": "application/json"
    };
    if (settings.apiKey.trim()) {
      headers.Authorization = `Bearer ${settings.apiKey.trim()}`;
    }
    let response;
    try {
      response = await (0, import_obsidian2.requestUrl)({
        url: apiUrl,
        method: "POST",
        headers,
        body
      });
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      await this.log("openai-compatible request failed", {
        url: apiUrl,
        body: payload,
        error: message
      });
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${message}`);
    }
    const status = response.status;
    if (status && status >= 400) {
      await this.log("openai-compatible response error", {
        url: apiUrl,
        body: payload,
        status,
        response: response.text
      });
      throw new Error(`API \uC624\uB958: ${status}`);
    }
    const data = this.parseJsonResponse(response.text, response.json);
    const content = (_h = (_g = (_f = (_e = (_d = (_c = data == null ? void 0 : data.choices) == null ? void 0 : _c[0]) == null ? void 0 : _d.message) == null ? void 0 : _e.content) != null ? _f : data == null ? void 0 : data.reply) != null ? _g : data == null ? void 0 : data.content) != null ? _h : data == null ? void 0 : data.message;
    if (!content || typeof content !== "string") {
      await this.log("openai-compatible response invalid", { url: apiUrl, response: data });
      throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
    }
    return content.trim();
  }
  async requestGeminiReply(settings, turns, options2) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const apiKey = settings.apiKey.trim();
    if (!apiKey) {
      throw new Error("Gemini API \uD0A4\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const modelName = ((_a = options2 == null ? void 0 : options2.modelName) == null ? void 0 : _a.trim()) || settings.model.trim() || PROVIDER_PRESETS.gemini.model;
    if (!modelName) {
      throw new Error("Gemini \uBAA8\uB378 \uC774\uB984\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const systemPrompt = ((_b = options2 == null ? void 0 : options2.systemPrompt) != null ? _b : settings.systemPrompt).trim();
    const contents = turns.map((turn) => {
      const role = turn.role === "assistant" ? "model" : "user";
      const text2 = turn.role === "system" ? `[\uC2DC\uC2A4\uD15C] ${turn.content}` : turn.content;
      return {
        role,
        parts: [{ text: text2 }]
      };
    });
    const payload = {
      contents,
      generationConfig: {
        responseMimeType: "text/plain"
      }
    };
    if (systemPrompt) {
      payload.systemInstruction = { parts: [{ text: systemPrompt }] };
    }
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
    const headers = {
      "Content-Type": "application/json"
    };
    let response;
    try {
      response = await (0, import_obsidian2.requestUrl)({
        url: apiUrl,
        method: "POST",
        headers,
        body: JSON.stringify(payload)
      });
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      await this.log("gemini request failed", {
        model: modelName,
        body: payload,
        error: message
      });
      throw new Error(`Gemini \uC694\uCCAD \uC2E4\uD328: ${message}`);
    }
    const status = response.status;
    if (status && status >= 400) {
      await this.log("gemini response error", {
        model: modelName,
        body: payload,
        status,
        response: response.text
      });
      throw new Error(`Gemini API \uC624\uB958: ${status}`);
    }
    const data = this.parseJsonResponse(response.text, response.json);
    const text = (_h = (_g = data == null ? void 0 : data.text) != null ? _g : (_f = (_e = (_d = (_c = data == null ? void 0 : data.candidates) == null ? void 0 : _c[0]) == null ? void 0 : _d.content) == null ? void 0 : _e.parts) == null ? void 0 : _f.map((part) => {
      var _a2;
      return (_a2 = part.text) != null ? _a2 : "";
    }).join("").trim()) != null ? _h : "";
    if (!text) {
      await this.log("gemini response invalid", { model: modelName, response: data });
      throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
    }
    return text;
  }
  buildOpenAiMessages(settings, turns, systemPromptOverride) {
    const messages = [];
    const systemPrompt = systemPromptOverride !== null ? systemPromptOverride.trim() : settings.systemPrompt.trim();
    if (systemPrompt) {
      messages.push({ role: "system", content: systemPrompt });
    }
    for (const turn of turns) {
      messages.push({ role: turn.role, content: turn.content });
    }
    return messages;
  }
  parseJsonResponse(text, json) {
    if (json) {
      return json;
    }
    try {
      return JSON.parse(text);
    } catch (e) {
      throw new Error("API \uC751\uB2F5\uC744 \uD574\uC11D\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  async log(context, detail) {
    await this.logWriter(context, detail);
  }
};

// src/logging.ts
var import_obsidian3 = require("obsidian");
function getPluginLogPath(app, manifest) {
  var _a;
  const pluginId = (_a = manifest == null ? void 0 : manifest.id) != null ? _a : "obsidian-vault-llm";
  return (0, import_obsidian3.normalizePath)(`${app.vault.configDir}/plugins/${pluginId}/log.txt`);
}
async function appendErrorLog(app, manifest, context, detail) {
  const logPath = getPluginLogPath(app, manifest);
  const timestamp = (/* @__PURE__ */ new Date()).toISOString();
  const detailText = toSafeString(detail);
  const entry = `
[${timestamp}] ${context}
${detailText}
`;
  try {
    const exists = await app.vault.adapter.exists(logPath);
    if (exists) {
      const current = await app.vault.adapter.read(logPath);
      await app.vault.adapter.write(logPath, `${entry}${current}`);
    } else {
      await app.vault.adapter.write(logPath, entry.trimStart());
    }
  } catch (error) {
    console.error("Failed to write plugin log", error);
  }
}
async function appendEmbeddingLog(app, manifest, data) {
  const logPath = getPluginLogPath(app, manifest);
  const timestamp = (/* @__PURE__ */ new Date()).toISOString();
  const inputText = data.inputText.replace(/\n/g, " ");
  const embeddingInfo = `[\uBCA1\uD130 \uCC28\uC6D0: ${data.embedding.length}]`;
  let similarityInfo = "";
  if (data.similarity !== void 0) {
    similarityInfo = ` | \uC774\uC804 \uC784\uBCA0\uB529\uACFC\uC758 \uC720\uC0AC\uB3C4: ${(data.similarity * 100).toFixed(2)}%`;
  }
  let entry = `
[${timestamp}] [\uC784\uBCA0\uB529] \uC785\uB825: "${inputText}" ${embeddingInfo}${similarityInfo}
`;
  try {
    const exists = await app.vault.adapter.exists(logPath);
    if (exists) {
      const current = await app.vault.adapter.read(logPath);
      await app.vault.adapter.write(logPath, `${entry}${current}`);
    } else {
      await app.vault.adapter.write(logPath, entry.trimStart());
    }
  } catch (error) {
    console.error("[\uC784\uBCA0\uB529 \uB85C\uADF8] \uD30C\uC77C \uC4F0\uAE30 \uC2E4\uD328:", error);
  }
}
async function appendTopicSeparationFailureLog(app, manifest, reason, details) {
  const logPath = getPluginLogPath(app, manifest);
  const timestamp = (/* @__PURE__ */ new Date()).toISOString();
  let entry = `
[${timestamp}] [\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328] \uC774\uC720: ${reason}
`;
  if (details) {
    entry += `\uC0C1\uC138: ${toSafeString(details)}
`;
  }
  entry += "---\n";
  try {
    const exists = await app.vault.adapter.exists(logPath);
    if (exists) {
      const current = await app.vault.adapter.read(logPath);
      await app.vault.adapter.write(logPath, `${entry}${current}`);
    } else {
      await app.vault.adapter.write(logPath, entry.trimStart());
    }
  } catch (error) {
    console.error("[\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328 \uB85C\uADF8] \uD30C\uC77C \uC4F0\uAE30 \uC2E4\uD328:", error);
  }
}
function toSafeString(detail) {
  var _a;
  if (detail === null || detail === void 0) {
    return String(detail);
  }
  if (typeof detail === "string") {
    return detail;
  }
  if (detail instanceof Error) {
    return (_a = detail.stack) != null ? _a : detail.message;
  }
  try {
    const seen = /* @__PURE__ */ new WeakSet();
    return JSON.stringify(
      detail,
      (key, value) => {
        if (typeof value === "object" && value !== null) {
          if (seen.has(value)) {
            return "[\uC21C\uD658 \uCC38\uC870]";
          }
          seen.add(value);
        }
        return value;
      },
      2
    );
  } catch (error) {
    const message = error instanceof Error ? error.message : String(error);
    return `\uC9C1\uB82C\uD654 \uC2E4\uD328: ${message}`;
  }
}

// src/modals/saveConversationModal.ts
var import_obsidian4 = require("obsidian");
var SaveConversationModal = class extends import_obsidian4.Modal {
  constructor(plugin, onSubmit) {
    super(plugin.app);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\uB300\uD654 JSON \uC800\uC7A5" });
    const inputPathEl = contentEl.createEl("input", { type: "text" });
    inputPathEl.placeholder = "JSON \uD30C\uC77C \uACBD\uB85C (\uBCFC\uD2B8 \uAE30\uC900)";
    const sessionIdEl = contentEl.createEl("input", { type: "text" });
    sessionIdEl.placeholder = "\uC138\uC158 ID";
    const outputFolderEl = contentEl.createEl("input", { type: "text" });
    outputFolderEl.placeholder = "\uC800\uC7A5 \uD3F4\uB354 (\uC120\uD0DD, \uBCFC\uD2B8 \uAE30\uC900)";
    const submitButton = contentEl.createEl("button", { text: "\uC800\uC7A5" });
    submitButton.addEventListener("click", () => {
      this.onSubmit({
        inputPath: inputPathEl.value.trim(),
        sessionId: sessionIdEl.value.trim(),
        outputFolder: outputFolderEl.value.trim()
      });
      this.close();
    });
  }
};

// src/modals/indexingProgressModal.ts
var import_obsidian5 = require("obsidian");
var IndexingProgressModal = class extends import_obsidian5.Modal {
  constructor(app, onCancel) {
    super(app);
    this.progressBarEl = null;
    this.statusEl = null;
    this.detailsEl = null;
    this.cancelButton = null;
    this.onCancel = null;
    this.progress = {
      totalFiles: 0,
      processedFiles: 0,
      status: "initializing"
    };
    this.onCancel = onCancel || null;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("indexing-progress-modal");
    contentEl.createEl("h2", { text: "\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC9C4\uD589 \uC911" });
    this.statusEl = contentEl.createDiv({ cls: "indexing-status" });
    this.updateStatusText();
    const progressContainer = contentEl.createDiv({ cls: "indexing-progress-container" });
    const progressBarBg = progressContainer.createDiv({ cls: "indexing-progress-bg" });
    this.progressBarEl = progressBarBg.createDiv({ cls: "indexing-progress-bar" });
    const progressText = contentEl.createDiv({ cls: "indexing-progress-text" });
    progressText.textContent = "0%";
    this.progressBarEl.dataset.textEl = progressText.id = "progress-text";
    this.detailsEl = contentEl.createDiv({ cls: "indexing-details" });
    this.updateDetails();
    if (this.onCancel) {
      const buttonContainer = contentEl.createDiv({ cls: "indexing-button-container" });
      this.cancelButton = buttonContainer.createEl("button", { text: "\uCDE8\uC18C" });
      this.cancelButton.addEventListener("click", () => {
        if (this.onCancel) {
          this.onCancel();
          this.close();
        }
      });
    }
  }
  /**
   *  
   */
  updateProgress(progress) {
    this.progress = progress;
    this.updateStatusText();
    this.updateProgressBar();
    this.updateDetails();
    if (progress.status === "completed") {
      setTimeout(() => this.close(), 1500);
    }
  }
  /**
   *   
   */
  updateStatusText() {
    if (!this.statusEl) return;
    let statusText = "";
    switch (this.progress.status) {
      case "initializing":
        statusText = "\uCD08\uAE30\uD654 \uC911...";
        break;
      case "indexing":
        statusText = `\uC778\uB371\uC2F1 \uC911... (${this.progress.processedFiles}/${this.progress.totalFiles})`;
        break;
      case "completed":
        statusText = "\uC778\uB371\uC2F1 \uC644\uB8CC!";
        break;
      case "error":
        statusText = `\uC5D0\uB7EC \uBC1C\uC0DD: ${this.progress.error || "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`;
        break;
      case "cancelled":
        statusText = "\uC778\uB371\uC2F1\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4";
        break;
    }
    this.statusEl.textContent = statusText;
  }
  /**
   *   
   */
  updateProgressBar() {
    if (!this.progressBarEl) return;
    const percentage = this.progress.totalFiles > 0 ? Math.round(this.progress.processedFiles / this.progress.totalFiles * 100) : 0;
    this.progressBarEl.style.width = `${percentage}%`;
    const progressText = document.getElementById("progress-text");
    if (progressText) {
      progressText.textContent = `${percentage}%`;
    }
  }
  /**
   *   
   */
  updateDetails() {
    if (!this.detailsEl) return;
    let details = "";
    if (this.progress.currentFile) {
      const fileName = this.progress.currentFile.split("/").pop() || this.progress.currentFile;
      details = `\uD604\uC7AC \uD30C\uC77C: ${fileName}`;
    } else if (this.progress.status === "initializing") {
      details = "\uD30C\uC77C \uBAA9\uB85D\uC744 \uC2A4\uCE94\uD558\uB294 \uC911...";
    } else if (this.progress.status === "completed") {
      details = `\uCD1D ${this.progress.totalFiles}\uAC1C\uC758 \uD30C\uC77C\uC744 \uCC98\uB9AC\uD588\uC2B5\uB2C8\uB2E4`;
    }
    this.detailsEl.textContent = details;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/parseTurns.ts
function parseTurns(content) {
  let data;
  try {
    data = JSON.parse(content);
  } catch (e) {
    throw new Error("JSON \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
  }
  if (!Array.isArray(data)) {
    throw new Error("JSON\uC740 \uBC30\uC5F4\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
  }
  return data.map((item, index) => {
    if (!item || typeof item !== "object") {
      throw new Error(`\uC798\uBABB\uB41C \uD56D\uBAA9: ${index + 1}\uBC88\uC9F8`);
    }
    const role = item.role;
    const contentValue = item.content;
    const timestampValue = item.timestamp;
    if (role !== "user" && role !== "assistant" && role !== "system") {
      throw new Error(`role\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4: ${index + 1}\uBC88\uC9F8`);
    }
    if (typeof contentValue !== "string" || !contentValue.trim()) {
      throw new Error(`content\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4: ${index + 1}\uBC88\uC9F8`);
    }
    return {
      role,
      content: contentValue,
      timestamp: timestampValue
    };
  });
}

// src/settings.ts
var import_obsidian6 = require("obsidian");
var OvlSettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.geminiModels = [];
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "OVL \uC124\uC815" });
    let apiUrlInput = null;
    let modelInput = null;
    new import_obsidian6.Setting(containerEl).setName("API \uC81C\uACF5\uC0AC").setDesc("\uC0AC\uC6A9\uD560 API \uC81C\uACF5\uC0AC\uB97C \uC120\uD0DD\uD558\uC138\uC694. (Ollama \uD3EC\uD568)").addDropdown((dropdown) => {
      dropdown.addOptions({
        gemini: "Google Gemini",
        openai: "OpenAI \uD638\uD658",
        ollama: "Ollama (\uB85C\uCEEC)",
        custom: "\uC0AC\uC6A9\uC790 \uC9C0\uC815"
      }).setValue(this.plugin.settings.provider).onChange(async (value) => {
        const provider = value;
        this.plugin.settings.provider = provider;
        const preset = PROVIDER_PRESETS[provider];
        this.plugin.settings.apiUrl = preset.apiUrl;
        this.plugin.settings.model = preset.model;
        apiUrlInput == null ? void 0 : apiUrlInput.setValue(preset.apiUrl);
        modelInput == null ? void 0 : modelInput.setValue(preset.model);
        await this.plugin.saveSettings();
        this.display();
      });
    });
    new import_obsidian6.Setting(containerEl).setName("API URL").setDesc("\uC81C\uACF5\uC0AC\uBCC4 \uCC44\uD305 \uC5D4\uB4DC\uD3EC\uC778\uD2B8 URL").addText((text) => {
      apiUrlInput = text;
      text.setPlaceholder("http://localhost:11434/v1/chat/completions").setValue(this.plugin.settings.apiUrl).onChange(async (value) => {
        this.plugin.settings.apiUrl = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian6.Setting(containerEl).setName("API \uD0A4").setDesc("\uD544\uC694\uD55C \uACBD\uC6B0 Bearer \uD1A0\uD070 \uB610\uB294 \uC81C\uACF5\uC0AC \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText(
      (text) => text.setPlaceholder("\uC120\uD0DD").setValue(this.plugin.settings.apiKey).onChange(async (value) => {
        this.plugin.settings.apiKey = value;
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.provider === "gemini") {
      new import_obsidian6.Setting(containerEl).setName("Gemini \uBAA8\uB378 \uBAA9\uB85D").setDesc("Google\uC5D0\uC11C \uC81C\uACF5\uD558\uB294 \uBAA8\uB378\uC744 \uBD88\uB7EC\uC640 \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.").addButton((button) => {
        button.setButtonText("\uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30").onClick(async () => {
          await this.loadGeminiModels();
          this.display();
        });
      });
      if (this.geminiModels.length > 0) {
        new import_obsidian6.Setting(containerEl).setName("Gemini \uBAA8\uB378 \uC120\uD0DD").setDesc("\uBAA9\uB85D\uC5D0 \uC5C6\uB294 \uBAA8\uB378\uC740 \uC544\uB798\uC5D0\uC11C \uC9C1\uC811 \uC785\uB825\uD558\uC138\uC694.").addDropdown((dropdown) => {
          const options2 = this.geminiModels.reduce(
            (acc, name) => {
              acc[name] = name;
              return acc;
            },
            {}
          );
          dropdown.addOptions(options2).setValue(this.plugin.settings.model).onChange(async (value) => {
            this.plugin.settings.model = value;
            modelInput == null ? void 0 : modelInput.setValue(value);
            await this.plugin.saveSettings();
          });
        });
      }
    }
    new import_obsidian6.Setting(containerEl).setName("\uBAA8\uB378").setDesc("\uC81C\uACF5\uC0AC\uBCC4 \uBAA8\uB378 \uC774\uB984 (\uC9C1\uC811 \uC785\uB825 \uAC00\uB2A5)").addText((text) => {
      modelInput = text;
      text.setPlaceholder("gpt-4o-mini").setValue(this.plugin.settings.model).onChange(async (value) => {
        this.plugin.settings.model = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian6.Setting(containerEl).setName("\uC81C\uBAA9 \uC0DD\uC131 \uBAA8\uB378").setDesc("\uC138\uC158/\uC800\uC7A5 \uC81C\uBAA9 \uC0DD\uC131\uC5D0 \uC0AC\uC6A9\uD560 \uBAA8\uB378 (\uBE44\uC5B4\uC788\uC73C\uBA74 \uAE30\uBCF8 \uBAA8\uB378 \uC0AC\uC6A9)").addText(
      (text) => text.setPlaceholder("gpt-4o-mini").setValue(this.plugin.settings.titleModel).onChange(async (value) => {
        this.plugin.settings.titleModel = value.trim();
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian6.Setting(containerEl).setName("\uC2DC\uC2A4\uD15C \uD504\uB86C\uD504\uD2B8").setDesc("\uBAA8\uB4E0 \uC694\uCCAD\uC5D0 \uD3EC\uD568\uB420 \uC2DC\uC2A4\uD15C \uBA54\uC2DC\uC9C0").addTextArea(
      (text) => text.setPlaceholder("\uC608: \uB108\uB294 Obsidian \uB9AC\uC11C\uCE58 \uC5B4\uC2DC\uC2A4\uD134\uD2B8\uB2E4.").setValue(this.plugin.settings.systemPrompt).onChange(async (value) => {
        this.plugin.settings.systemPrompt = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian6.Setting(containerEl).setName("\uAE30\uBCF8 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB300\uD654\uB97C \uC800\uC7A5\uD560 \uAE30\uBCF8 \uD3F4\uB354 (\uBCFC\uD2B8 \uAE30\uC900)").addText(
      (text) => text.setPlaceholder("\uC608: Conversations").setValue(this.plugin.settings.defaultOutputFolder).onChange(async (value) => {
        this.plugin.settings.defaultOutputFolder = value.trim();
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "\uC778\uB371\uC2F1 \uBC0F \uAC80\uC0C9 \uC124\uC815" });
    new import_obsidian6.Setting(containerEl).setName("\uC778\uB371\uC2F1 \uD65C\uC131\uD654").setDesc("\uBCFC\uD2B8 \uD30C\uC77C\uC744 \uC778\uB371\uC2F1\uD558\uC5EC \uBCA1\uD130 \uAC80\uC0C9\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.indexingEnabled).onChange(async (value) => {
        this.plugin.settings.indexingEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian6.Setting(containerEl).setName("\uC804\uCCB4 \uBCFC\uD2B8 \uC784\uBCA0\uB529").setDesc("\uBCFC\uD2B8\uC758 \uBAA8\uB4E0 \uB178\uD2B8\uB97C \uC784\uBCA0\uB529 \uBC0F \uC778\uB371\uC2F1\uD569\uB2C8\uB2E4. (\uC2DC\uAC04\uC774 \uAC78\uB9B4 \uC218 \uC788\uC74C)").addButton((button) => {
      button.setButtonText("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC2DC\uC791").setCta().onClick(async () => {
        button.setDisabled(true);
        button.setButtonText("\uC9C4\uD589 \uC911...");
        try {
          await this.plugin.indexVaultAll();
          new import_obsidian6.Notice("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC644\uB8CC!");
        } catch (error) {
          const message = error instanceof Error ? error.message : String(error);
          new import_obsidian6.Notice(`\uC784\uBCA0\uB529 \uC2E4\uD328: ${message}`);
        } finally {
          button.setDisabled(false);
          button.setButtonText("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC2DC\uC791");
        }
      });
    });
    new import_obsidian6.Setting(containerEl).setName("\uC2E0\uADDC \uB178\uD2B8\uB9CC \uC784\uBCA0\uB529").setDesc("\uB9C8\uC9C0\uB9C9 \uC778\uB371\uC2F1 \uC774\uD6C4 \uC0DD\uC131\uB418\uAC70\uB098 \uC218\uC815\uB41C \uB178\uD2B8\uB9CC \uC784\uBCA0\uB529\uD569\uB2C8\uB2E4.").addButton((button) => {
      button.setButtonText("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC2DC\uC791").onClick(async () => {
        button.setDisabled(true);
        button.setButtonText("\uC9C4\uD589 \uC911...");
        try {
          await this.plugin.indexNewFilesOnly();
          new import_obsidian6.Notice("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC644\uB8CC!");
        } catch (error) {
          const message = error instanceof Error ? error.message : String(error);
          new import_obsidian6.Notice(`\uC784\uBCA0\uB529 \uC2E4\uD328: ${message}`);
        } finally {
          button.setDisabled(false);
          button.setButtonText("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC2DC\uC791");
        }
      });
    });
    new import_obsidian6.Setting(containerEl).setName("\uCCAD\uD06C \uD06C\uAE30").setDesc("\uD14D\uC2A4\uD2B8\uB97C \uBD84\uD560\uD560 \uB54C \uAC01 \uCCAD\uD06C\uC758 \uCD5C\uB300 \uD1A0\uD070 \uC218 (\uAE30\uBCF8: 400)").addText(
      (text) => text.setPlaceholder("400").setValue(String(this.plugin.settings.chunkSize)).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num > 0) {
          this.plugin.settings.chunkSize = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian6.Setting(containerEl).setName("\uCCAD\uD06C \uC624\uBC84\uB7A9").setDesc("\uC778\uC811\uD55C \uCCAD\uD06C \uAC04 \uC911\uBCF5\uB418\uB294 \uD1A0\uD070 \uC218 (\uAE30\uBCF8: 50)").addText(
      (text) => text.setPlaceholder("50").setValue(String(this.plugin.settings.chunkOverlap)).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num >= 0) {
          this.plugin.settings.chunkOverlap = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian6.Setting(containerEl).setName("\uAC80\uC0C9 \uACB0\uACFC \uC218 (Top-K)").setDesc("\uAC80\uC0C9 \uC2DC \uBC18\uD658\uD560 \uCD5C\uB300 \uACB0\uACFC \uC218 (\uAE30\uBCF8: 8)").addText(
      (text) => text.setPlaceholder("8").setValue(String(this.plugin.settings.topK)).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num > 0) {
          this.plugin.settings.topK = num;
          await this.plugin.saveSettings();
        }
      })
    );
    containerEl.createEl("h3", { text: "\uC784\uBCA0\uB529 \uC124\uC815" });
    let embeddingModelInput = null;
    new import_obsidian6.Setting(containerEl).setName("\uC784\uBCA0\uB529 \uC81C\uACF5\uC790").setDesc("\uC784\uBCA0\uB529 \uC0DD\uC131\uC5D0 \uC0AC\uC6A9\uD560 \uC81C\uACF5\uC790\uB97C \uC120\uD0DD\uD558\uC138\uC694").addDropdown((dropdown) => {
      dropdown.addOptions({
        gemini: "Google Gemini (API)",
        openai: "OpenAI (API)",
        local: "\uB85C\uCEEC \uBAA8\uB378 (HuggingFace)",
        custom: "\uCEE4\uC2A4\uD140 API"
      }).setValue(this.plugin.settings.embeddingProvider).onChange(async (value) => {
        const provider = value;
        this.plugin.settings.embeddingProvider = provider;
        const preset = EMBEDDING_PRESETS[provider];
        this.plugin.settings.embeddingModel = preset.model;
        embeddingModelInput == null ? void 0 : embeddingModelInput.setValue(preset.model);
        await this.plugin.saveSettings();
        this.display();
      });
    });
    if (this.plugin.settings.embeddingProvider !== "local") {
      new import_obsidian6.Setting(containerEl).setName("\uC784\uBCA0\uB529 API \uD0A4").setDesc("\uC784\uBCA0\uB529 API \uD0A4 (\uBE44\uC5B4\uC788\uC73C\uBA74 LLM API \uD0A4 \uC0AC\uC6A9)").addText(
        (text) => text.setPlaceholder("\uC120\uD0DD").setValue(this.plugin.settings.embeddingApiKey).onChange(async (value) => {
          this.plugin.settings.embeddingApiKey = value;
          await this.plugin.saveSettings();
        })
      );
    }
    new import_obsidian6.Setting(containerEl).setName("\uC784\uBCA0\uB529 \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 \uC784\uBCA0\uB529 \uBAA8\uB378").addText((text) => {
      embeddingModelInput = text;
      text.setPlaceholder("\uBAA8\uB378\uBA85").setValue(this.plugin.settings.embeddingModel).onChange(async (value) => {
        this.plugin.settings.embeddingModel = value.trim();
        await this.plugin.saveSettings();
      });
    });
  }
  async loadGeminiModels() {
    var _a;
    const apiKey = this.plugin.settings.apiKey.trim();
    if (!apiKey) {
      new import_obsidian6.Notice("Gemini API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
      return;
    }
    try {
      const response = await (0, import_obsidian6.requestUrl)({
        url: `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`
      });
      const data = response.json;
      const models = (_a = data == null ? void 0 : data.models) != null ? _a : [];
      this.geminiModels = models.filter((model) => {
        var _a2;
        return (_a2 = model.supportedGenerationMethods) == null ? void 0 : _a2.includes("generateContent");
      }).map((model) => model.name).filter((name) => Boolean(name));
      if (this.geminiModels.length === 0) {
        new import_obsidian6.Notice("\uC0AC\uC6A9 \uAC00\uB2A5\uD55C Gemini \uBAA8\uB378\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");
      } else {
        new import_obsidian6.Notice("Gemini \uBAA8\uB378 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4.");
      }
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian6.Notice(`Gemini \uBAA8\uB378 \uBAA9\uB85D \uC2E4\uD328: ${message}`);
    }
  }
};

// src/views/chatView.ts
var import_obsidian8 = require("obsidian");

// src/topicSeparation/keywordExtractor.ts
function extractKeywords(text) {
  if (!text || text.trim().length === 0) {
    return [];
  }
  const cleaned = text.replace(/[^\w\s---]/g, " ").toLowerCase().trim();
  const words = cleaned.split(/\s+/).filter((word) => word.length > 1);
  const stopWords = /* @__PURE__ */ new Set([
    "\uC774",
    "\uADF8",
    "\uC800",
    "\uAC83",
    "\uC218",
    "\uB4F1",
    "\uB4E4",
    "\uBC0F",
    "\uC744",
    "\uB97C",
    "\uC774\uB97C",
    "\uADF8\uB97C",
    "\uC800\uB97C",
    "\uC740",
    "\uB294",
    "\uC774\uB294",
    "\uADF8\uB294",
    "\uC800\uB294",
    "\uAC00",
    "\uC5D0",
    "\uC758",
    "\uB85C",
    "\uC73C\uB85C",
    "\uC5D0\uC11C",
    "\uC640",
    "\uACFC",
    "\uD558\uB2E4",
    "\uC788\uB2E4",
    "\uB418\uB2E4",
    "\uC54A\uB2E4",
    "\uC5C6\uB2E4",
    "\uAC19\uB2E4",
    "\uC774\uB2E4",
    "\uC544\uB2C8\uB2E4",
    "\uD558\uB294",
    "\uC788\uB294",
    "\uB418\uB294",
    "\uD558\uACE0",
    "\uC788\uACE0",
    "\uB418\uACE0",
    "\uD55C",
    "\uD558\uBA70",
    "\uC788\uC73C\uBA70",
    "\uD560",
    "\uC788\uC744",
    "\uB420",
    "\uD569\uB2C8\uB2E4",
    "\uC785\uB2C8\uB2E4",
    "\uC2B5\uB2C8\uB2E4",
    "\uADF8\uB9AC\uACE0",
    "\uADF8\uB7EC\uB098",
    "\uD558\uC9C0\uB9CC",
    "\uB610\uD55C",
    "\uB610",
    "\uBC0F",
    "\uB4F1",
    "\uB54C\uBB38",
    "\uACBD\uC6B0",
    "\uD1B5\uD574",
    "\uB300\uD55C",
    "\uC704\uD55C",
    "\uAD00\uD55C",
    "\uB530\uB978",
    "\uAC83",
    "\uC810",
    "\uB54C",
    "\uC911",
    "\uB0B4",
    "\uC678"
  ]);
  const filtered = words.filter((word) => !stopWords.has(word) && word.length >= 2);
  const frequency = /* @__PURE__ */ new Map();
  for (const word of filtered) {
    frequency.set(word, (frequency.get(word) || 0) + 1);
  }
  const sorted = Array.from(frequency.entries()).sort((a, b) => b[1] - a[1]).map(([word]) => word);
  return sorted.slice(0, 10);
}

// node_modules/@google/generative-ai/dist/index.mjs
var SchemaType;
(function(SchemaType2) {
  SchemaType2["STRING"] = "string";
  SchemaType2["NUMBER"] = "number";
  SchemaType2["INTEGER"] = "integer";
  SchemaType2["BOOLEAN"] = "boolean";
  SchemaType2["ARRAY"] = "array";
  SchemaType2["OBJECT"] = "object";
})(SchemaType || (SchemaType = {}));
var ExecutableCodeLanguage;
(function(ExecutableCodeLanguage2) {
  ExecutableCodeLanguage2["LANGUAGE_UNSPECIFIED"] = "language_unspecified";
  ExecutableCodeLanguage2["PYTHON"] = "python";
})(ExecutableCodeLanguage || (ExecutableCodeLanguage = {}));
var Outcome;
(function(Outcome2) {
  Outcome2["OUTCOME_UNSPECIFIED"] = "outcome_unspecified";
  Outcome2["OUTCOME_OK"] = "outcome_ok";
  Outcome2["OUTCOME_FAILED"] = "outcome_failed";
  Outcome2["OUTCOME_DEADLINE_EXCEEDED"] = "outcome_deadline_exceeded";
})(Outcome || (Outcome = {}));
var POSSIBLE_ROLES = ["user", "model", "function", "system"];
var HarmCategory;
(function(HarmCategory2) {
  HarmCategory2["HARM_CATEGORY_UNSPECIFIED"] = "HARM_CATEGORY_UNSPECIFIED";
  HarmCategory2["HARM_CATEGORY_HATE_SPEECH"] = "HARM_CATEGORY_HATE_SPEECH";
  HarmCategory2["HARM_CATEGORY_SEXUALLY_EXPLICIT"] = "HARM_CATEGORY_SEXUALLY_EXPLICIT";
  HarmCategory2["HARM_CATEGORY_HARASSMENT"] = "HARM_CATEGORY_HARASSMENT";
  HarmCategory2["HARM_CATEGORY_DANGEROUS_CONTENT"] = "HARM_CATEGORY_DANGEROUS_CONTENT";
  HarmCategory2["HARM_CATEGORY_CIVIC_INTEGRITY"] = "HARM_CATEGORY_CIVIC_INTEGRITY";
})(HarmCategory || (HarmCategory = {}));
var HarmBlockThreshold;
(function(HarmBlockThreshold2) {
  HarmBlockThreshold2["HARM_BLOCK_THRESHOLD_UNSPECIFIED"] = "HARM_BLOCK_THRESHOLD_UNSPECIFIED";
  HarmBlockThreshold2["BLOCK_LOW_AND_ABOVE"] = "BLOCK_LOW_AND_ABOVE";
  HarmBlockThreshold2["BLOCK_MEDIUM_AND_ABOVE"] = "BLOCK_MEDIUM_AND_ABOVE";
  HarmBlockThreshold2["BLOCK_ONLY_HIGH"] = "BLOCK_ONLY_HIGH";
  HarmBlockThreshold2["BLOCK_NONE"] = "BLOCK_NONE";
})(HarmBlockThreshold || (HarmBlockThreshold = {}));
var HarmProbability;
(function(HarmProbability2) {
  HarmProbability2["HARM_PROBABILITY_UNSPECIFIED"] = "HARM_PROBABILITY_UNSPECIFIED";
  HarmProbability2["NEGLIGIBLE"] = "NEGLIGIBLE";
  HarmProbability2["LOW"] = "LOW";
  HarmProbability2["MEDIUM"] = "MEDIUM";
  HarmProbability2["HIGH"] = "HIGH";
})(HarmProbability || (HarmProbability = {}));
var BlockReason;
(function(BlockReason2) {
  BlockReason2["BLOCKED_REASON_UNSPECIFIED"] = "BLOCKED_REASON_UNSPECIFIED";
  BlockReason2["SAFETY"] = "SAFETY";
  BlockReason2["OTHER"] = "OTHER";
})(BlockReason || (BlockReason = {}));
var FinishReason;
(function(FinishReason2) {
  FinishReason2["FINISH_REASON_UNSPECIFIED"] = "FINISH_REASON_UNSPECIFIED";
  FinishReason2["STOP"] = "STOP";
  FinishReason2["MAX_TOKENS"] = "MAX_TOKENS";
  FinishReason2["SAFETY"] = "SAFETY";
  FinishReason2["RECITATION"] = "RECITATION";
  FinishReason2["LANGUAGE"] = "LANGUAGE";
  FinishReason2["BLOCKLIST"] = "BLOCKLIST";
  FinishReason2["PROHIBITED_CONTENT"] = "PROHIBITED_CONTENT";
  FinishReason2["SPII"] = "SPII";
  FinishReason2["MALFORMED_FUNCTION_CALL"] = "MALFORMED_FUNCTION_CALL";
  FinishReason2["OTHER"] = "OTHER";
})(FinishReason || (FinishReason = {}));
var TaskType;
(function(TaskType2) {
  TaskType2["TASK_TYPE_UNSPECIFIED"] = "TASK_TYPE_UNSPECIFIED";
  TaskType2["RETRIEVAL_QUERY"] = "RETRIEVAL_QUERY";
  TaskType2["RETRIEVAL_DOCUMENT"] = "RETRIEVAL_DOCUMENT";
  TaskType2["SEMANTIC_SIMILARITY"] = "SEMANTIC_SIMILARITY";
  TaskType2["CLASSIFICATION"] = "CLASSIFICATION";
  TaskType2["CLUSTERING"] = "CLUSTERING";
})(TaskType || (TaskType = {}));
var FunctionCallingMode;
(function(FunctionCallingMode2) {
  FunctionCallingMode2["MODE_UNSPECIFIED"] = "MODE_UNSPECIFIED";
  FunctionCallingMode2["AUTO"] = "AUTO";
  FunctionCallingMode2["ANY"] = "ANY";
  FunctionCallingMode2["NONE"] = "NONE";
})(FunctionCallingMode || (FunctionCallingMode = {}));
var DynamicRetrievalMode;
(function(DynamicRetrievalMode2) {
  DynamicRetrievalMode2["MODE_UNSPECIFIED"] = "MODE_UNSPECIFIED";
  DynamicRetrievalMode2["MODE_DYNAMIC"] = "MODE_DYNAMIC";
})(DynamicRetrievalMode || (DynamicRetrievalMode = {}));
var GoogleGenerativeAIError = class extends Error {
  constructor(message) {
    super(`[GoogleGenerativeAI Error]: ${message}`);
  }
};
var GoogleGenerativeAIResponseError = class extends GoogleGenerativeAIError {
  constructor(message, response) {
    super(message);
    this.response = response;
  }
};
var GoogleGenerativeAIFetchError = class extends GoogleGenerativeAIError {
  constructor(message, status, statusText, errorDetails) {
    super(message);
    this.status = status;
    this.statusText = statusText;
    this.errorDetails = errorDetails;
  }
};
var GoogleGenerativeAIRequestInputError = class extends GoogleGenerativeAIError {
};
var GoogleGenerativeAIAbortError = class extends GoogleGenerativeAIError {
};
var DEFAULT_BASE_URL = "https://generativelanguage.googleapis.com";
var DEFAULT_API_VERSION = "v1beta";
var PACKAGE_VERSION = "0.24.1";
var PACKAGE_LOG_HEADER = "genai-js";
var Task;
(function(Task2) {
  Task2["GENERATE_CONTENT"] = "generateContent";
  Task2["STREAM_GENERATE_CONTENT"] = "streamGenerateContent";
  Task2["COUNT_TOKENS"] = "countTokens";
  Task2["EMBED_CONTENT"] = "embedContent";
  Task2["BATCH_EMBED_CONTENTS"] = "batchEmbedContents";
})(Task || (Task = {}));
var RequestUrl = class {
  constructor(model, task, apiKey, stream, requestOptions) {
    this.model = model;
    this.task = task;
    this.apiKey = apiKey;
    this.stream = stream;
    this.requestOptions = requestOptions;
  }
  toString() {
    var _a, _b;
    const apiVersion = ((_a = this.requestOptions) === null || _a === void 0 ? void 0 : _a.apiVersion) || DEFAULT_API_VERSION;
    const baseUrl = ((_b = this.requestOptions) === null || _b === void 0 ? void 0 : _b.baseUrl) || DEFAULT_BASE_URL;
    let url = `${baseUrl}/${apiVersion}/${this.model}:${this.task}`;
    if (this.stream) {
      url += "?alt=sse";
    }
    return url;
  }
};
function getClientHeaders(requestOptions) {
  const clientHeaders = [];
  if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.apiClient) {
    clientHeaders.push(requestOptions.apiClient);
  }
  clientHeaders.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`);
  return clientHeaders.join(" ");
}
async function getHeaders(url) {
  var _a;
  const headers = new Headers();
  headers.append("Content-Type", "application/json");
  headers.append("x-goog-api-client", getClientHeaders(url.requestOptions));
  headers.append("x-goog-api-key", url.apiKey);
  let customHeaders = (_a = url.requestOptions) === null || _a === void 0 ? void 0 : _a.customHeaders;
  if (customHeaders) {
    if (!(customHeaders instanceof Headers)) {
      try {
        customHeaders = new Headers(customHeaders);
      } catch (e) {
        throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(customHeaders)} to Headers: ${e.message}`);
      }
    }
    for (const [headerName, headerValue] of customHeaders.entries()) {
      if (headerName === "x-goog-api-key") {
        throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${headerName}`);
      } else if (headerName === "x-goog-api-client") {
        throw new GoogleGenerativeAIRequestInputError(`Header name ${headerName} can only be set using the apiClient field`);
      }
      headers.append(headerName, headerValue);
    }
  }
  return headers;
}
async function constructModelRequest(model, task, apiKey, stream, body, requestOptions) {
  const url = new RequestUrl(model, task, apiKey, stream, requestOptions);
  return {
    url: url.toString(),
    fetchOptions: Object.assign(Object.assign({}, buildFetchOptions(requestOptions)), { method: "POST", headers: await getHeaders(url), body })
  };
}
async function makeModelRequest(model, task, apiKey, stream, body, requestOptions = {}, fetchFn = fetch) {
  const { url, fetchOptions } = await constructModelRequest(model, task, apiKey, stream, body, requestOptions);
  return makeRequest(url, fetchOptions, fetchFn);
}
async function makeRequest(url, fetchOptions, fetchFn = fetch) {
  let response;
  try {
    response = await fetchFn(url, fetchOptions);
  } catch (e) {
    handleResponseError(e, url);
  }
  if (!response.ok) {
    await handleResponseNotOk(response, url);
  }
  return response;
}
function handleResponseError(e, url) {
  let err = e;
  if (err.name === "AbortError") {
    err = new GoogleGenerativeAIAbortError(`Request aborted when fetching ${url.toString()}: ${e.message}`);
    err.stack = e.stack;
  } else if (!(e instanceof GoogleGenerativeAIFetchError || e instanceof GoogleGenerativeAIRequestInputError)) {
    err = new GoogleGenerativeAIError(`Error fetching from ${url.toString()}: ${e.message}`);
    err.stack = e.stack;
  }
  throw err;
}
async function handleResponseNotOk(response, url) {
  let message = "";
  let errorDetails;
  try {
    const json = await response.json();
    message = json.error.message;
    if (json.error.details) {
      message += ` ${JSON.stringify(json.error.details)}`;
      errorDetails = json.error.details;
    }
  } catch (e) {
  }
  throw new GoogleGenerativeAIFetchError(`Error fetching from ${url.toString()}: [${response.status} ${response.statusText}] ${message}`, response.status, response.statusText, errorDetails);
}
function buildFetchOptions(requestOptions) {
  const fetchOptions = {};
  if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) !== void 0 || (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {
    const controller = new AbortController();
    if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {
      setTimeout(() => controller.abort(), requestOptions.timeout);
    }
    if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) {
      requestOptions.signal.addEventListener("abort", () => {
        controller.abort();
      });
    }
    fetchOptions.signal = controller.signal;
  }
  return fetchOptions;
}
function addHelpers(response) {
  response.text = () => {
    if (response.candidates && response.candidates.length > 0) {
      if (response.candidates.length > 1) {
        console.warn(`This response had ${response.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`);
      }
      if (hadBadFinishReason(response.candidates[0])) {
        throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);
      }
      return getText(response);
    } else if (response.promptFeedback) {
      throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(response)}`, response);
    }
    return "";
  };
  response.functionCall = () => {
    if (response.candidates && response.candidates.length > 0) {
      if (response.candidates.length > 1) {
        console.warn(`This response had ${response.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`);
      }
      if (hadBadFinishReason(response.candidates[0])) {
        throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);
      }
      console.warn(`response.functionCall() is deprecated. Use response.functionCalls() instead.`);
      return getFunctionCalls(response)[0];
    } else if (response.promptFeedback) {
      throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);
    }
    return void 0;
  };
  response.functionCalls = () => {
    if (response.candidates && response.candidates.length > 0) {
      if (response.candidates.length > 1) {
        console.warn(`This response had ${response.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`);
      }
      if (hadBadFinishReason(response.candidates[0])) {
        throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);
      }
      return getFunctionCalls(response);
    } else if (response.promptFeedback) {
      throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);
    }
    return void 0;
  };
  return response;
}
function getText(response) {
  var _a, _b, _c, _d;
  const textStrings = [];
  if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {
    for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {
      if (part.text) {
        textStrings.push(part.text);
      }
      if (part.executableCode) {
        textStrings.push("\n```" + part.executableCode.language + "\n" + part.executableCode.code + "\n```\n");
      }
      if (part.codeExecutionResult) {
        textStrings.push("\n```\n" + part.codeExecutionResult.output + "\n```\n");
      }
    }
  }
  if (textStrings.length > 0) {
    return textStrings.join("");
  } else {
    return "";
  }
}
function getFunctionCalls(response) {
  var _a, _b, _c, _d;
  const functionCalls = [];
  if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {
    for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {
      if (part.functionCall) {
        functionCalls.push(part.functionCall);
      }
    }
  }
  if (functionCalls.length > 0) {
    return functionCalls;
  } else {
    return void 0;
  }
}
var badFinishReasons = [
  FinishReason.RECITATION,
  FinishReason.SAFETY,
  FinishReason.LANGUAGE
];
function hadBadFinishReason(candidate) {
  return !!candidate.finishReason && badFinishReasons.includes(candidate.finishReason);
}
function formatBlockErrorMessage(response) {
  var _a, _b, _c;
  let message = "";
  if ((!response.candidates || response.candidates.length === 0) && response.promptFeedback) {
    message += "Response was blocked";
    if ((_a = response.promptFeedback) === null || _a === void 0 ? void 0 : _a.blockReason) {
      message += ` due to ${response.promptFeedback.blockReason}`;
    }
    if ((_b = response.promptFeedback) === null || _b === void 0 ? void 0 : _b.blockReasonMessage) {
      message += `: ${response.promptFeedback.blockReasonMessage}`;
    }
  } else if ((_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0]) {
    const firstCandidate = response.candidates[0];
    if (hadBadFinishReason(firstCandidate)) {
      message += `Candidate was blocked due to ${firstCandidate.finishReason}`;
      if (firstCandidate.finishMessage) {
        message += `: ${firstCandidate.finishMessage}`;
      }
    }
  }
  return message;
}
function __await(v) {
  return this instanceof __await ? (this.v = v, this) : new __await(v);
}
function __asyncGenerator(thisArg, _arguments, generator) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var g = generator.apply(thisArg, _arguments || []), i, q = [];
  return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function() {
    return this;
  }, i;
  function verb(n) {
    if (g[n]) i[n] = function(v) {
      return new Promise(function(a, b) {
        q.push([n, v, a, b]) > 1 || resume(n, v);
      });
    };
  }
  function resume(n, v) {
    try {
      step(g[n](v));
    } catch (e) {
      settle(q[0][3], e);
    }
  }
  function step(r) {
    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
  }
  function fulfill(value) {
    resume("next", value);
  }
  function reject(value) {
    resume("throw", value);
  }
  function settle(f, v) {
    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);
  }
}
var responseLineRE = /^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;
function processStream(response) {
  const inputStream = response.body.pipeThrough(new TextDecoderStream("utf8", { fatal: true }));
  const responseStream = getResponseStream(inputStream);
  const [stream1, stream2] = responseStream.tee();
  return {
    stream: generateResponseSequence(stream1),
    response: getResponsePromise(stream2)
  };
}
async function getResponsePromise(stream) {
  const allResponses = [];
  const reader = stream.getReader();
  while (true) {
    const { done, value } = await reader.read();
    if (done) {
      return addHelpers(aggregateResponses(allResponses));
    }
    allResponses.push(value);
  }
}
function generateResponseSequence(stream) {
  return __asyncGenerator(this, arguments, function* generateResponseSequence_1() {
    const reader = stream.getReader();
    while (true) {
      const { value, done } = yield __await(reader.read());
      if (done) {
        break;
      }
      yield yield __await(addHelpers(value));
    }
  });
}
function getResponseStream(inputStream) {
  const reader = inputStream.getReader();
  const stream = new ReadableStream({
    start(controller) {
      let currentText = "";
      return pump();
      function pump() {
        return reader.read().then(({ value, done }) => {
          if (done) {
            if (currentText.trim()) {
              controller.error(new GoogleGenerativeAIError("Failed to parse stream"));
              return;
            }
            controller.close();
            return;
          }
          currentText += value;
          let match = currentText.match(responseLineRE);
          let parsedResponse;
          while (match) {
            try {
              parsedResponse = JSON.parse(match[1]);
            } catch (e) {
              controller.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${match[1]}"`));
              return;
            }
            controller.enqueue(parsedResponse);
            currentText = currentText.substring(match[0].length);
            match = currentText.match(responseLineRE);
          }
          return pump();
        }).catch((e) => {
          let err = e;
          err.stack = e.stack;
          if (err.name === "AbortError") {
            err = new GoogleGenerativeAIAbortError("Request aborted when reading from the stream");
          } else {
            err = new GoogleGenerativeAIError("Error reading from the stream");
          }
          throw err;
        });
      }
    }
  });
  return stream;
}
function aggregateResponses(responses) {
  const lastResponse = responses[responses.length - 1];
  const aggregatedResponse = {
    promptFeedback: lastResponse === null || lastResponse === void 0 ? void 0 : lastResponse.promptFeedback
  };
  for (const response of responses) {
    if (response.candidates) {
      let candidateIndex = 0;
      for (const candidate of response.candidates) {
        if (!aggregatedResponse.candidates) {
          aggregatedResponse.candidates = [];
        }
        if (!aggregatedResponse.candidates[candidateIndex]) {
          aggregatedResponse.candidates[candidateIndex] = {
            index: candidateIndex
          };
        }
        aggregatedResponse.candidates[candidateIndex].citationMetadata = candidate.citationMetadata;
        aggregatedResponse.candidates[candidateIndex].groundingMetadata = candidate.groundingMetadata;
        aggregatedResponse.candidates[candidateIndex].finishReason = candidate.finishReason;
        aggregatedResponse.candidates[candidateIndex].finishMessage = candidate.finishMessage;
        aggregatedResponse.candidates[candidateIndex].safetyRatings = candidate.safetyRatings;
        if (candidate.content && candidate.content.parts) {
          if (!aggregatedResponse.candidates[candidateIndex].content) {
            aggregatedResponse.candidates[candidateIndex].content = {
              role: candidate.content.role || "user",
              parts: []
            };
          }
          const newPart = {};
          for (const part of candidate.content.parts) {
            if (part.text) {
              newPart.text = part.text;
            }
            if (part.functionCall) {
              newPart.functionCall = part.functionCall;
            }
            if (part.executableCode) {
              newPart.executableCode = part.executableCode;
            }
            if (part.codeExecutionResult) {
              newPart.codeExecutionResult = part.codeExecutionResult;
            }
            if (Object.keys(newPart).length === 0) {
              newPart.text = "";
            }
            aggregatedResponse.candidates[candidateIndex].content.parts.push(newPart);
          }
        }
      }
      candidateIndex++;
    }
    if (response.usageMetadata) {
      aggregatedResponse.usageMetadata = response.usageMetadata;
    }
  }
  return aggregatedResponse;
}
async function generateContentStream(apiKey, model, params, requestOptions) {
  const response = await makeModelRequest(
    model,
    Task.STREAM_GENERATE_CONTENT,
    apiKey,
    /* stream */
    true,
    JSON.stringify(params),
    requestOptions
  );
  return processStream(response);
}
async function generateContent(apiKey, model, params, requestOptions) {
  const response = await makeModelRequest(
    model,
    Task.GENERATE_CONTENT,
    apiKey,
    /* stream */
    false,
    JSON.stringify(params),
    requestOptions
  );
  const responseJson = await response.json();
  const enhancedResponse = addHelpers(responseJson);
  return {
    response: enhancedResponse
  };
}
function formatSystemInstruction(input) {
  if (input == null) {
    return void 0;
  } else if (typeof input === "string") {
    return { role: "system", parts: [{ text: input }] };
  } else if (input.text) {
    return { role: "system", parts: [input] };
  } else if (input.parts) {
    if (!input.role) {
      return { role: "system", parts: input.parts };
    } else {
      return input;
    }
  }
}
function formatNewContent(request) {
  let newParts = [];
  if (typeof request === "string") {
    newParts = [{ text: request }];
  } else {
    for (const partOrString of request) {
      if (typeof partOrString === "string") {
        newParts.push({ text: partOrString });
      } else {
        newParts.push(partOrString);
      }
    }
  }
  return assignRoleToPartsAndValidateSendMessageRequest(newParts);
}
function assignRoleToPartsAndValidateSendMessageRequest(parts) {
  const userContent = { role: "user", parts: [] };
  const functionContent = { role: "function", parts: [] };
  let hasUserContent = false;
  let hasFunctionContent = false;
  for (const part of parts) {
    if ("functionResponse" in part) {
      functionContent.parts.push(part);
      hasFunctionContent = true;
    } else {
      userContent.parts.push(part);
      hasUserContent = true;
    }
  }
  if (hasUserContent && hasFunctionContent) {
    throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");
  }
  if (!hasUserContent && !hasFunctionContent) {
    throw new GoogleGenerativeAIError("No content is provided for sending chat message.");
  }
  if (hasUserContent) {
    return userContent;
  }
  return functionContent;
}
function formatCountTokensInput(params, modelParams) {
  var _a;
  let formattedGenerateContentRequest = {
    model: modelParams === null || modelParams === void 0 ? void 0 : modelParams.model,
    generationConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.generationConfig,
    safetySettings: modelParams === null || modelParams === void 0 ? void 0 : modelParams.safetySettings,
    tools: modelParams === null || modelParams === void 0 ? void 0 : modelParams.tools,
    toolConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.toolConfig,
    systemInstruction: modelParams === null || modelParams === void 0 ? void 0 : modelParams.systemInstruction,
    cachedContent: (_a = modelParams === null || modelParams === void 0 ? void 0 : modelParams.cachedContent) === null || _a === void 0 ? void 0 : _a.name,
    contents: []
  };
  const containsGenerateContentRequest = params.generateContentRequest != null;
  if (params.contents) {
    if (containsGenerateContentRequest) {
      throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");
    }
    formattedGenerateContentRequest.contents = params.contents;
  } else if (containsGenerateContentRequest) {
    formattedGenerateContentRequest = Object.assign(Object.assign({}, formattedGenerateContentRequest), params.generateContentRequest);
  } else {
    const content = formatNewContent(params);
    formattedGenerateContentRequest.contents = [content];
  }
  return { generateContentRequest: formattedGenerateContentRequest };
}
function formatGenerateContentInput(params) {
  let formattedRequest;
  if (params.contents) {
    formattedRequest = params;
  } else {
    const content = formatNewContent(params);
    formattedRequest = { contents: [content] };
  }
  if (params.systemInstruction) {
    formattedRequest.systemInstruction = formatSystemInstruction(params.systemInstruction);
  }
  return formattedRequest;
}
function formatEmbedContentInput(params) {
  if (typeof params === "string" || Array.isArray(params)) {
    const content = formatNewContent(params);
    return { content };
  }
  return params;
}
var VALID_PART_FIELDS = [
  "text",
  "inlineData",
  "functionCall",
  "functionResponse",
  "executableCode",
  "codeExecutionResult"
];
var VALID_PARTS_PER_ROLE = {
  user: ["text", "inlineData"],
  function: ["functionResponse"],
  model: ["text", "functionCall", "executableCode", "codeExecutionResult"],
  // System instructions shouldn't be in history anyway.
  system: ["text"]
};
function validateChatHistory(history) {
  let prevContent = false;
  for (const currContent of history) {
    const { role, parts } = currContent;
    if (!prevContent && role !== "user") {
      throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${role}`);
    }
    if (!POSSIBLE_ROLES.includes(role)) {
      throw new GoogleGenerativeAIError(`Each item should include role field. Got ${role} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);
    }
    if (!Array.isArray(parts)) {
      throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");
    }
    if (parts.length === 0) {
      throw new GoogleGenerativeAIError("Each Content should have at least one part");
    }
    const countFields = {
      text: 0,
      inlineData: 0,
      functionCall: 0,
      functionResponse: 0,
      fileData: 0,
      executableCode: 0,
      codeExecutionResult: 0
    };
    for (const part of parts) {
      for (const key of VALID_PART_FIELDS) {
        if (key in part) {
          countFields[key] += 1;
        }
      }
    }
    const validParts = VALID_PARTS_PER_ROLE[role];
    for (const key of VALID_PART_FIELDS) {
      if (!validParts.includes(key) && countFields[key] > 0) {
        throw new GoogleGenerativeAIError(`Content with role '${role}' can't contain '${key}' part`);
      }
    }
    prevContent = true;
  }
}
function isValidResponse(response) {
  var _a;
  if (response.candidates === void 0 || response.candidates.length === 0) {
    return false;
  }
  const content = (_a = response.candidates[0]) === null || _a === void 0 ? void 0 : _a.content;
  if (content === void 0) {
    return false;
  }
  if (content.parts === void 0 || content.parts.length === 0) {
    return false;
  }
  for (const part of content.parts) {
    if (part === void 0 || Object.keys(part).length === 0) {
      return false;
    }
    if (part.text !== void 0 && part.text === "") {
      return false;
    }
  }
  return true;
}
var SILENT_ERROR = "SILENT_ERROR";
var ChatSession = class {
  constructor(apiKey, model, params, _requestOptions = {}) {
    this.model = model;
    this.params = params;
    this._requestOptions = _requestOptions;
    this._history = [];
    this._sendPromise = Promise.resolve();
    this._apiKey = apiKey;
    if (params === null || params === void 0 ? void 0 : params.history) {
      validateChatHistory(params.history);
      this._history = params.history;
    }
  }
  /**
   * Gets the chat history so far. Blocked prompts are not added to history.
   * Blocked candidates are not added to history, nor are the prompts that
   * generated them.
   */
  async getHistory() {
    await this._sendPromise;
    return this._history;
  }
  /**
   * Sends a chat message and receives a non-streaming
   * {@link GenerateContentResult}.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async sendMessage(request, requestOptions = {}) {
    var _a, _b, _c, _d, _e, _f;
    await this._sendPromise;
    const newContent = formatNewContent(request);
    const generateContentRequest = {
      safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,
      generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,
      tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,
      toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,
      systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,
      cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,
      contents: [...this._history, newContent]
    };
    const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    let finalResult;
    this._sendPromise = this._sendPromise.then(() => generateContent(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions)).then((result) => {
      var _a2;
      if (isValidResponse(result.response)) {
        this._history.push(newContent);
        const responseContent = Object.assign({
          parts: [],
          // Response seems to come back without a role set.
          role: "model"
        }, (_a2 = result.response.candidates) === null || _a2 === void 0 ? void 0 : _a2[0].content);
        this._history.push(responseContent);
      } else {
        const blockErrorMessage = formatBlockErrorMessage(result.response);
        if (blockErrorMessage) {
          console.warn(`sendMessage() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);
        }
      }
      finalResult = result;
    }).catch((e) => {
      this._sendPromise = Promise.resolve();
      throw e;
    });
    await this._sendPromise;
    return finalResult;
  }
  /**
   * Sends a chat message and receives the response as a
   * {@link GenerateContentStreamResult} containing an iterable stream
   * and a response promise.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async sendMessageStream(request, requestOptions = {}) {
    var _a, _b, _c, _d, _e, _f;
    await this._sendPromise;
    const newContent = formatNewContent(request);
    const generateContentRequest = {
      safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,
      generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,
      tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,
      toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,
      systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,
      cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,
      contents: [...this._history, newContent]
    };
    const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    const streamPromise = generateContentStream(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions);
    this._sendPromise = this._sendPromise.then(() => streamPromise).catch((_ignored) => {
      throw new Error(SILENT_ERROR);
    }).then((streamResult) => streamResult.response).then((response) => {
      if (isValidResponse(response)) {
        this._history.push(newContent);
        const responseContent = Object.assign({}, response.candidates[0].content);
        if (!responseContent.role) {
          responseContent.role = "model";
        }
        this._history.push(responseContent);
      } else {
        const blockErrorMessage = formatBlockErrorMessage(response);
        if (blockErrorMessage) {
          console.warn(`sendMessageStream() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);
        }
      }
    }).catch((e) => {
      if (e.message !== SILENT_ERROR) {
        console.error(e);
      }
    });
    return streamPromise;
  }
};
async function countTokens(apiKey, model, params, singleRequestOptions) {
  const response = await makeModelRequest(model, Task.COUNT_TOKENS, apiKey, false, JSON.stringify(params), singleRequestOptions);
  return response.json();
}
async function embedContent(apiKey, model, params, requestOptions) {
  const response = await makeModelRequest(model, Task.EMBED_CONTENT, apiKey, false, JSON.stringify(params), requestOptions);
  return response.json();
}
async function batchEmbedContents(apiKey, model, params, requestOptions) {
  const requestsWithModel = params.requests.map((request) => {
    return Object.assign(Object.assign({}, request), { model });
  });
  const response = await makeModelRequest(model, Task.BATCH_EMBED_CONTENTS, apiKey, false, JSON.stringify({ requests: requestsWithModel }), requestOptions);
  return response.json();
}
var GenerativeModel = class {
  constructor(apiKey, modelParams, _requestOptions = {}) {
    this.apiKey = apiKey;
    this._requestOptions = _requestOptions;
    if (modelParams.model.includes("/")) {
      this.model = modelParams.model;
    } else {
      this.model = `models/${modelParams.model}`;
    }
    this.generationConfig = modelParams.generationConfig || {};
    this.safetySettings = modelParams.safetySettings || [];
    this.tools = modelParams.tools;
    this.toolConfig = modelParams.toolConfig;
    this.systemInstruction = formatSystemInstruction(modelParams.systemInstruction);
    this.cachedContent = modelParams.cachedContent;
  }
  /**
   * Makes a single non-streaming call to the model
   * and returns an object containing a single {@link GenerateContentResponse}.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async generateContent(request, requestOptions = {}) {
    var _a;
    const formattedParams = formatGenerateContentInput(request);
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return generateContent(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);
  }
  /**
   * Makes a single streaming call to the model and returns an object
   * containing an iterable stream that iterates over all chunks in the
   * streaming response as well as a promise that returns the final
   * aggregated response.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async generateContentStream(request, requestOptions = {}) {
    var _a;
    const formattedParams = formatGenerateContentInput(request);
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return generateContentStream(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);
  }
  /**
   * Gets a new {@link ChatSession} instance which can be used for
   * multi-turn chats.
   */
  startChat(startChatParams) {
    var _a;
    return new ChatSession(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, startChatParams), this._requestOptions);
  }
  /**
   * Counts the tokens in the provided request.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async countTokens(request, requestOptions = {}) {
    const formattedParams = formatCountTokensInput(request, {
      model: this.model,
      generationConfig: this.generationConfig,
      safetySettings: this.safetySettings,
      tools: this.tools,
      toolConfig: this.toolConfig,
      systemInstruction: this.systemInstruction,
      cachedContent: this.cachedContent
    });
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return countTokens(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);
  }
  /**
   * Embeds the provided content.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async embedContent(request, requestOptions = {}) {
    const formattedParams = formatEmbedContentInput(request);
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return embedContent(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);
  }
  /**
   * Embeds an array of {@link EmbedContentRequest}s.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async batchEmbedContents(batchEmbedContentRequest, requestOptions = {}) {
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return batchEmbedContents(this.apiKey, this.model, batchEmbedContentRequest, generativeModelRequestOptions);
  }
};
var GoogleGenerativeAI = class {
  constructor(apiKey) {
    this.apiKey = apiKey;
  }
  /**
   * Gets a {@link GenerativeModel} instance for the provided model name.
   */
  getGenerativeModel(modelParams, requestOptions) {
    if (!modelParams.model) {
      throw new GoogleGenerativeAIError(`Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })`);
    }
    return new GenerativeModel(this.apiKey, modelParams, requestOptions);
  }
  /**
   * Creates a {@link GenerativeModel} instance from provided content cache.
   */
  getGenerativeModelFromCachedContent(cachedContent, modelParams, requestOptions) {
    if (!cachedContent.name) {
      throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");
    }
    if (!cachedContent.model) {
      throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");
    }
    const disallowedDuplicates = ["model", "systemInstruction"];
    for (const key of disallowedDuplicates) {
      if ((modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) && cachedContent[key] && (modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) !== cachedContent[key]) {
        if (key === "model") {
          const modelParamsComp = modelParams.model.startsWith("models/") ? modelParams.model.replace("models/", "") : modelParams.model;
          const cachedContentComp = cachedContent.model.startsWith("models/") ? cachedContent.model.replace("models/", "") : cachedContent.model;
          if (modelParamsComp === cachedContentComp) {
            continue;
          }
        }
        throw new GoogleGenerativeAIRequestInputError(`Different value for "${key}" specified in modelParams (${modelParams[key]}) and cachedContent (${cachedContent[key]})`);
      }
    }
    const modelParamsFromCache = Object.assign(Object.assign({}, modelParams), { model: cachedContent.model, tools: cachedContent.tools, toolConfig: cachedContent.toolConfig, systemInstruction: cachedContent.systemInstruction, cachedContent });
    return new GenerativeModel(this.apiKey, modelParamsFromCache, requestOptions);
  }
};

// src/topicSeparation/embeddingService.ts
function cosineSimilarity(vecA, vecB) {
  if (vecA.length !== vecB.length) {
    throw new Error("\uBCA1\uD130\uC758 \uCC28\uC6D0\uC774 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
  }
  let dotProduct = 0;
  let normA = 0;
  let normB = 0;
  for (let i = 0; i < vecA.length; i++) {
    dotProduct += vecA[i] * vecB[i];
    normA += vecA[i] * vecA[i];
    normB += vecB[i] * vecB[i];
  }
  const denominator = Math.sqrt(normA) * Math.sqrt(normB);
  if (denominator === 0) {
    return 0;
  }
  return dotProduct / denominator;
}
var EmbeddingGenerator = class {
  constructor(apiKey, modelName = "embedding-001", app, manifest, enableLogging = false) {
    this.apiKey = apiKey;
    this.modelName = modelName;
    this.app = app;
    this.manifest = manifest;
    this.enableLogging = enableLogging;
    this.genAI = null;
    this.model = null;
    this.cache = /* @__PURE__ */ new Map();
    this.lastEmbedding = null;
    this.lastText = "";
    if (apiKey) {
      this.genAI = new GoogleGenerativeAI(apiKey);
      const cleanModelName = this.modelName.replace(/^models\//, "");
      this.model = this.genAI.getGenerativeModel({ model: cleanModelName });
    }
  }
  /**
   *   
   * @param text  
   * @returns  
   */
  async embed(text) {
    if (!this.model) {
      throw new Error("Gemini API\uAC00 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    let embedding;
    if (this.cache.has(text)) {
      embedding = this.cache.get(text);
    } else {
      try {
        const result = await this.model.embedContent(text);
        embedding = result.embedding.values;
        this.cache.set(text, embedding);
      } catch (error) {
        console.error("\uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
        throw new Error(`\uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`);
      }
    }
    if (this.enableLogging && this.app) {
      try {
        let similarity;
        let previousText;
        if (this.lastEmbedding) {
          similarity = cosineSimilarity(this.lastEmbedding, embedding);
          previousText = this.lastText;
        }
        await appendEmbeddingLog(this.app, this.manifest, {
          inputText: text,
          embedding,
          similarity,
          previousInputText: previousText
        });
      } catch (logError) {
        console.error("\uC784\uBCA0\uB529 \uB85C\uADF8 \uC791\uC131 \uC2E4\uD328:", logError);
      }
    }
    this.lastEmbedding = embedding;
    this.lastText = text;
    return embedding;
  }
  /**
   *      
   * @param texts   
   * @returns   
   */
  async embedBatch(texts) {
    const embeddings = [];
    for (const text of texts) {
      const embedding = await this.embed(text);
      embeddings.push(embedding);
    }
    return embeddings;
  }
  /**
   *  
   */
  clearCache() {
    this.cache.clear();
  }
};

// src/topicSeparation/topicSeparationEngine.ts
var TopicSeparationEngine = class {
  constructor(config) {
    var _a, _b, _c, _d, _e, _f, _g;
    this.config = {
      ...config,
      similarityThreshold: (_a = config.similarityThreshold) != null ? _a : 0.75,
      minSegmentLength: (_b = config.minSegmentLength) != null ? _b : 2,
      windowSize: (_c = config.windowSize) != null ? _c : 2,
      enableKeywordMetadata: (_d = config.enableKeywordMetadata) != null ? _d : true,
      enableEmbeddingLogging: (_e = config.enableEmbeddingLogging) != null ? _e : false
    };
    this.embeddingGenerator = new EmbeddingGenerator(
      config.apiKey,
      (_f = config.embeddingModel) != null ? _f : "embedding-001",
      config.app,
      config.manifest,
      (_g = config.enableEmbeddingLogging) != null ? _g : false
    );
  }
  /**
   *   
   * @param turns   
   * @returns   
   */
  async separateTopics(turns) {
    try {
      if (turns.length === 0) {
        return {
          segments: [],
          boundaries: [],
          links: []
        };
      }
      const turnTexts = this.prepareTurnTexts(turns);
      console.log("\uC784\uBCA0\uB529 \uC0DD\uC131 \uC911...");
      let embeddings;
      try {
        embeddings = await this.embeddingGenerator.embedBatch(turnTexts);
      } catch (error) {
        const msg = `\uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC720\uC0AC\uB3C4 \uACC4\uC0B0 \uC911...");
      let similarities;
      try {
        similarities = this.calculateWindowSimilarities(embeddings);
      } catch (error) {
        const msg = `\uC720\uC0AC\uB3C4 \uACC4\uC0B0 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC8FC\uC81C \uACBD\uACC4 \uD0D0\uC9C0 \uC911...");
      let boundaries;
      try {
        boundaries = this.detectTopicBoundaries(similarities);
      } catch (error) {
        const msg = `\uC8FC\uC81C \uACBD\uACC4 \uD0D0\uC9C0 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC138\uADF8\uBA3C\uD2B8 \uC0DD\uC131 \uC911...");
      let segments;
      try {
        segments = this.createSegments(turns, boundaries, similarities);
      } catch (error) {
        const msg = `\uC138\uADF8\uBA3C\uD2B8 \uC0DD\uC131 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC138\uADF8\uBA3C\uD2B8 \uB9C1\uD06C \uBD84\uC11D \uC911...");
      let links;
      try {
        links = this.analyzeSegmentLinks(segments);
      } catch (error) {
        const msg = `\uC138\uADF8\uBA3C\uD2B8 \uB9C1\uD06C \uBD84\uC11D \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      return {
        segments,
        boundaries,
        links
      };
    } catch (error) {
      if (error instanceof Error && error.message.includes("\uC2E4\uD328:")) {
        throw error;
      }
      const msg = `\uC8FC\uC81C \uBD84\uB9AC \uC911 \uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958: ${error instanceof Error ? error.message : String(error)}`;
      if (this.config.app) {
        await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
      }
      throw new Error(msg);
    }
  }
  /**
   *   N  
   */
  getLastNSentences(text, n = 3) {
    const sentences = text.split(/([.!?]+)/).filter((s) => s.trim().length > 0);
    const sentenceList = [];
    for (let i = 0; i < sentences.length; i += 2) {
      if (i + 1 < sentences.length) {
        sentenceList.push(sentences[i] + sentences[i + 1]);
      } else if (i < sentences.length) {
        sentenceList.push(sentences[i]);
      }
    }
    const lastSentences = sentenceList.slice(-n);
    return lastSentences.join(" ").trim();
  }
  /**
   *    (  )
   *   = [    ] +  assistant  2~3 +   +  assistant  2~3
   */
  prepareTurnTexts(turns) {
    const result = [];
    for (let i = 0; i < turns.length; i++) {
      const turn = turns[i];
      let embeddingInput = "";
      if (turn.role === "user") {
        let combinedText = turn.content;
        let keywords = [];
        if (i + 1 < turns.length && turns[i + 1].role === "assistant") {
          const nextTurn = turns[i + 1];
          combinedText += " " + nextTurn.content;
          keywords = extractKeywords(combinedText);
        } else {
          keywords = extractKeywords(turn.content);
        }
        let previousAssistantOverlap = "";
        for (let j = i - 1; j >= 0; j--) {
          if (turns[j].role === "assistant") {
            previousAssistantOverlap = this.getLastNSentences(turns[j].content, 3);
            break;
          }
        }
        const currentQuestion = turn.content;
        let currentAssistantOverlap = "";
        if (i + 1 < turns.length && turns[i + 1].role === "assistant") {
          currentAssistantOverlap = this.getLastNSentences(turns[i + 1].content, 3);
        }
        const keywordStr = keywords.length > 0 ? `[\uD0A4\uC6CC\uB4DC: ${keywords.join(", ")}]` : "";
        embeddingInput = [
          keywordStr,
          previousAssistantOverlap,
          currentQuestion,
          currentAssistantOverlap
        ].filter((s) => s.length > 0).join(" ");
        result.push(embeddingInput);
        if (i + 1 < turns.length && turns[i + 1].role === "assistant") {
          i++;
        }
      } else if (turn.role === "assistant" && (i === 0 || turns[i - 1].role !== "user")) {
        const keywords = extractKeywords(turn.content);
        const lastSentences = this.getLastNSentences(turn.content, 3);
        const keywordStr = keywords.length > 0 ? `[\uD0A4\uC6CC\uB4DC: ${keywords.join(", ")}]` : "";
        embeddingInput = [keywordStr, lastSentences].filter((s) => s.length > 0).join(" ");
        result.push(embeddingInput);
      }
    }
    return result.length > 0 ? result : turns.map((t) => t.content);
  }
  /**
   *     
   */
  calculateWindowSimilarities(embeddings) {
    const similarities = [];
    const windowSize = this.config.windowSize;
    for (let i = 0; i < embeddings.length - 1; i++) {
      const currentWindow = this.combineEmbeddings(
        embeddings.slice(Math.max(0, i - windowSize + 1), i + 1)
      );
      const nextWindow = embeddings[i + 1];
      const similarity = cosineSimilarity(currentWindow, nextWindow);
      similarities.push(similarity);
    }
    return similarities;
  }
  /**
   *     
   */
  combineEmbeddings(embeddings) {
    if (embeddings.length === 0) {
      throw new Error("\uC784\uBCA0\uB529 \uBC30\uC5F4\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4");
    }
    if (embeddings.length === 1) {
      return embeddings[0];
    }
    const dim = embeddings[0].length;
    const combined = new Array(dim).fill(0);
    for (const embedding of embeddings) {
      for (let i = 0; i < dim; i++) {
        combined[i] += embedding[i];
      }
    }
    for (let i = 0; i < dim; i++) {
      combined[i] /= embeddings.length;
    }
    return combined;
  }
  /**
   *   
   */
  detectTopicBoundaries(similarities) {
    const boundaries = [];
    const threshold = this.config.similarityThreshold;
    for (let i = 0; i < similarities.length; i++) {
      const similarity = similarities[i];
      const isPrimaryBoundary = similarity < threshold;
      if (i > 0) {
        const prevSimilarity = similarities[i - 1];
        const drop = prevSimilarity - similarity;
        if (drop > 0.15) {
          boundaries.push({
            index: i + 1,
            //    
            similarity,
            isPrimaryBoundary: true
          });
          continue;
        }
      }
      if (isPrimaryBoundary) {
        boundaries.push({
          index: i + 1,
          similarity,
          isPrimaryBoundary: true
        });
      }
    }
    return boundaries;
  }
  /**
   *  
   */
  createSegments(turns, boundaries, similarities) {
    const segments = [];
    const boundaryIndices = boundaries.map((b) => b.index).sort((a, b) => a - b);
    const minSegmentLength = this.config.minSegmentLength;
    let startIndex = 0;
    for (const endIndex of boundaryIndices) {
      if (endIndex - startIndex >= minSegmentLength) {
        const segmentTurns = turns.slice(startIndex, endIndex);
        const keywords = this.extractSegmentKeywords(segmentTurns);
        const avgSimilarity = this.calculateAverageSimilarity(similarities, startIndex, endIndex);
        segments.push({
          startIndex,
          endIndex,
          turns: segmentTurns,
          keywords,
          avgSimilarity
        });
      }
      startIndex = endIndex;
    }
    if (startIndex < turns.length) {
      const segmentTurns = turns.slice(startIndex);
      const keywords = this.extractSegmentKeywords(segmentTurns);
      const avgSimilarity = this.calculateAverageSimilarity(similarities, startIndex, turns.length);
      segments.push({
        startIndex,
        endIndex: turns.length,
        turns: segmentTurns,
        keywords,
        avgSimilarity
      });
    }
    return segments;
  }
  /**
   *   
   */
  extractSegmentKeywords(turns) {
    const allText = turns.map((t) => t.content).join(" ");
    return extractKeywords(allText);
  }
  /**
   *    
   */
  calculateAverageSimilarity(similarities, start, end) {
    if (start >= end - 1) {
      return 1;
    }
    const relevantSimilarities = similarities.slice(start, Math.min(end - 1, similarities.length));
    if (relevantSimilarities.length === 0) {
      return 1;
    }
    const sum = relevantSimilarities.reduce((acc, val) => acc + val, 0);
    return sum / relevantSimilarities.length;
  }
  /**
   *    
   */
  analyzeSegmentLinks(segments) {
    const links = [];
    for (let i = 0; i < segments.length; i++) {
      for (let j = i + 1; j < segments.length; j++) {
        const segmentA = segments[i];
        const segmentB = segments[j];
        const commonKeywords = segmentA.keywords.filter((k) => segmentB.keywords.includes(k));
        if (commonKeywords.length > 0) {
          const unionSize = (/* @__PURE__ */ new Set([...segmentA.keywords, ...segmentB.keywords])).size;
          const relevanceScore = commonKeywords.length / unionSize;
          if (relevanceScore > 0.1) {
            links.push({
              fromSegment: i,
              toSegment: j,
              commonKeywords,
              relevanceScore
            });
          }
        }
      }
    }
    return links;
  }
  /**
   *  
   */
  clearCache() {
    this.embeddingGenerator.clearCache();
  }
};

// src/topicSeparation/multiNoteSaver.ts
var import_obsidian7 = require("obsidian");
async function saveSegmentsAsNotes(vault, segments, links, baseTitle, outputFolder, app, manifest) {
  const notePaths = [];
  const cleanedFolder = outputFolder ? (0, import_obsidian7.normalizePath)(outputFolder).replace(/^\/+/, "") : "";
  if (cleanedFolder) {
    await ensureFolderExists2(vault, cleanedFolder);
  }
  for (let i = 0; i < segments.length; i++) {
    const segment = segments[i];
    const segmentTitle = await generateSegmentTitle(segment, baseTitle, i + 1);
    const markdown = generateSegmentMarkdown(segment, i, segments.length, links, notePaths);
    const filename = sanitizeFilename(segmentTitle) + ".md";
    const targetPath = await ensureUniquePath2(
      vault,
      (0, import_obsidian7.normalizePath)(cleanedFolder ? `${cleanedFolder}/${filename}` : filename)
    );
    await vault.create(targetPath, markdown);
    notePaths.push(targetPath);
  }
  const mainNotePath = await createMainIndexNote(vault, segments, notePaths, baseTitle, cleanedFolder);
  return {
    notePaths,
    mainNotePath
  };
}
async function generateSegmentTitle(segment, baseTitle, segmentNumber) {
  const topKeywords = segment.keywords.slice(0, 3).join(", ");
  if (topKeywords) {
    return `${baseTitle} - ${segmentNumber}. ${topKeywords}`;
  } else {
    return `${baseTitle} - \uC8FC\uC81C ${segmentNumber}`;
  }
}
function generateSegmentMarkdown(segment, segmentIndex, totalSegments, links, notePaths) {
  var _a;
  const lines = [];
  lines.push("---");
  lines.push(`segment: ${segmentIndex + 1}/${totalSegments}`);
  lines.push(`keywords: [${segment.keywords.join(", ")}]`);
  lines.push(`avgSimilarity: ${segment.avgSimilarity.toFixed(3)}`);
  lines.push("---");
  lines.push("");
  lines.push(`# \uC8FC\uC81C ${segmentIndex + 1}`);
  lines.push("");
  if (segment.keywords.length > 0) {
    lines.push("## \uC8FC\uC694 \uD0A4\uC6CC\uB4DC");
    lines.push("");
    lines.push(segment.keywords.map((k) => `- ${k}`).join("\n"));
    lines.push("");
  }
  const relatedLinks = links.filter(
    (link) => link.fromSegment === segmentIndex || link.toSegment === segmentIndex
  );
  if (relatedLinks.length > 0) {
    lines.push("## \uC5F0\uAD00 \uC8FC\uC81C");
    lines.push("");
    for (const link of relatedLinks) {
      const targetIndex = link.fromSegment === segmentIndex ? link.toSegment : link.fromSegment;
      if (notePaths[targetIndex]) {
        const targetPath = notePaths[targetIndex];
        const targetName = ((_a = targetPath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || `\uC8FC\uC81C ${targetIndex + 1}`;
        const commonKeywordsText = link.commonKeywords.slice(0, 3).join(", ");
        lines.push(`- [[${targetPath.replace(".md", "")}|${targetName}]] (${commonKeywordsText})`);
      }
    }
    lines.push("");
  }
  lines.push("## \uB300\uD654 \uB0B4\uC6A9");
  lines.push("");
  for (const turn of segment.turns) {
    const roleEmoji = turn.role === "user" ? "\u{1F464}" : "\u{1F916}";
    const roleLabel = turn.role === "user" ? "\uC0AC\uC6A9\uC790" : "\uC5B4\uC2DC\uC2A4\uD134\uD2B8";
    lines.push(`### ${roleEmoji} ${roleLabel}`);
    if (turn.timestamp) {
      const timestamp = typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString();
      lines.push(`*${timestamp}*`);
      lines.push("");
    }
    lines.push(turn.content);
    lines.push("");
  }
  return lines.join("\n");
}
async function createMainIndexNote(vault, segments, notePaths, baseTitle, folder) {
  var _a;
  const lines = [];
  lines.push(`# ${baseTitle} - \uC804\uCCB4 \uC778\uB371\uC2A4`);
  lines.push("");
  lines.push("---");
  lines.push(`totalSegments: ${segments.length}`);
  lines.push(`createdAt: ${(/* @__PURE__ */ new Date()).toISOString()}`);
  lines.push("---");
  lines.push("");
  lines.push("## \uAC1C\uC694");
  lines.push("");
  lines.push(`\uC774 \uB300\uD654\uB294 ${segments.length}\uAC1C\uC758 \uC8FC\uC81C\uB85C \uBD84\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
  lines.push("");
  lines.push("## \uC8FC\uC81C \uBAA9\uB85D");
  lines.push("");
  for (let i = 0; i < segments.length; i++) {
    const segment = segments[i];
    const notePath = notePaths[i];
    const noteName = ((_a = notePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || `\uC8FC\uC81C ${i + 1}`;
    const keywords = segment.keywords.slice(0, 3).join(", ");
    lines.push(`### ${i + 1}. [[${notePath.replace(".md", "")}|${noteName}]]`);
    lines.push("");
    lines.push(`**\uD0A4\uC6CC\uB4DC**: ${keywords}`);
    lines.push(`**\uD134 \uC218**: ${segment.turns.length}`);
    lines.push(`**\uC720\uC0AC\uB3C4**: ${(segment.avgSimilarity * 100).toFixed(1)}%`);
    lines.push("");
  }
  const markdown = lines.join("\n");
  const filename = sanitizeFilename(baseTitle) + "-\uC778\uB371\uC2A4.md";
  const targetPath = await ensureUniquePath2(
    vault,
    (0, import_obsidian7.normalizePath)(folder ? `${folder}/${filename}` : filename)
  );
  await vault.create(targetPath, markdown);
  return targetPath;
}
function sanitizeFilename(value) {
  const trimmed = value.trim();
  if (!trimmed) {
    return "untitled";
  }
  const cleaned = trimmed.replace(/[\\/:*?"<>|]/g, " ").replace(/\s+/g, " ").trim();
  return cleaned || "untitled";
}
async function ensureFolderExists2(vault, folder) {
  const exists = await vault.adapter.exists(folder);
  if (!exists) {
    await vault.createFolder(folder);
  }
}
async function ensureUniquePath2(vault, path) {
  const normalized = (0, import_obsidian7.normalizePath)(path);
  const extensionIndex = normalized.lastIndexOf(".md");
  const base = extensionIndex === -1 ? normalized : normalized.slice(0, extensionIndex);
  const extension = extensionIndex === -1 ? "" : ".md";
  let candidate = normalized;
  let count = 1;
  while (await vault.adapter.exists(candidate)) {
    candidate = `${base}-${count}${extension}`;
    count += 1;
  }
  return candidate;
}

// src/views/chatView.ts
var VIEW_TYPE_OVL_CHAT = "ovl-chat-view";
var ChatView = class extends import_obsidian8.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.messages = [];
    this.messagesEl = null;
    this.inputEl = null;
    this.sendButtonEl = null;
    this.saveButtonEl = null;
    this.sessionIdEl = null;
    this.useRagCheckbox = null;
    this.showSourcesCheckbox = null;
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_OVL_CHAT;
  }
  getDisplayText() {
    return "OVL \uB300\uD654";
  }
  getIcon() {
    return "message-circle";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ovl-chat-view");
    const headerEl = contentEl.createEl("div", { cls: "ovl-chat-header" });
    headerEl.createEl("div", { cls: "ovl-chat-title", text: "OVL \uB300\uD654" });
    const sessionWrapEl = headerEl.createEl("div", { cls: "ovl-chat-session" });
    sessionWrapEl.createEl("span", { text: "\uC81C\uBAA9" });
    const sessionInputEl = sessionWrapEl.createEl("input", { type: "text" });
    sessionInputEl.value = this.buildSessionId();
    this.sessionIdEl = sessionInputEl;
    const controlsEl = headerEl.createEl("div", { cls: "ovl-chat-controls" });
    const ragWrapEl = controlsEl.createEl("div", { cls: "ovl-rag-options" });
    const useRagLabel = ragWrapEl.createEl("label");
    const useRagCheckbox = useRagLabel.createEl("input", { type: "checkbox" });
    useRagCheckbox.checked = true;
    useRagLabel.appendText(" RAG \uC0AC\uC6A9");
    this.useRagCheckbox = useRagCheckbox;
    const showSourcesLabel = ragWrapEl.createEl("label");
    const showSourcesCheckbox = showSourcesLabel.createEl("input", { type: "checkbox" });
    showSourcesCheckbox.checked = false;
    showSourcesLabel.appendText(" \uC18C\uC2A4\uB9CC \uBCF4\uAE30");
    this.showSourcesCheckbox = showSourcesCheckbox;
    const saveButtonEl = controlsEl.createEl("button", { text: "\uC800\uC7A5", cls: "ovl-chat-button" });
    saveButtonEl.addEventListener("click", () => {
      void this.handleSave();
    });
    this.saveButtonEl = saveButtonEl;
    const messagesEl = contentEl.createEl("div", { cls: "ovl-chat-messages" });
    this.messagesEl = messagesEl;
    const inputWrapEl = contentEl.createEl("div", { cls: "ovl-chat-input" });
    const textareaEl = inputWrapEl.createEl("textarea");
    textareaEl.placeholder = "\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694. (Ctrl+Enter \uC804\uC1A1)";
    this.inputEl = textareaEl;
    const sendButtonEl = inputWrapEl.createEl("button", { text: "\uC804\uC1A1", cls: "ovl-chat-button" });
    sendButtonEl.addEventListener("click", () => {
      void this.handleSend();
    });
    this.sendButtonEl = sendButtonEl;
    textareaEl.addEventListener("keydown", (event) => {
      if (event.key === "Enter" && (event.ctrlKey || event.metaKey)) {
        event.preventDefault();
        void this.handleSend();
      }
    });
  }
  buildSessionId() {
    const stamp = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    return `session-${stamp}`;
  }
  setBusyState(state) {
    var _a, _b;
    const sendLoading = (_a = state.sendLoading) != null ? _a : false;
    const saveLoading = (_b = state.saveLoading) != null ? _b : false;
    if (this.sendButtonEl) {
      this.sendButtonEl.disabled = state.isBusy;
      this.sendButtonEl.classList.toggle("is-loading", sendLoading);
    }
    if (this.saveButtonEl) {
      this.saveButtonEl.disabled = state.isBusy;
      this.saveButtonEl.classList.toggle("is-loading", saveLoading);
    }
    if (this.inputEl) {
      this.inputEl.disabled = state.isBusy;
    }
    if (state.isBusy) {
      this.contentEl.addClass("ovl-chat-busy");
    } else {
      this.contentEl.removeClass("ovl-chat-busy");
    }
  }
  async appendMessage(turn) {
    this.messages.push(turn);
    if (!this.messagesEl) {
      return;
    }
    const messageEl = this.messagesEl.createEl("div", {
      cls: `ovl-chat-message ovl-chat-${turn.role}`
    });
    messageEl.createEl("div", {
      cls: "ovl-chat-role",
      text: this.getRoleLabel(turn.role)
    });
    const contentEl = messageEl.createEl("div", {
      cls: "ovl-chat-content markdown-preview-view markdown-rendered"
    });
    try {
      await import_obsidian8.MarkdownRenderer.renderMarkdown(turn.content, contentEl, "", this);
    } catch (error) {
      const fallback = error instanceof Error ? error.message : String(error);
      contentEl.setText(`\uB80C\uB354\uB9C1 \uC2E4\uD328: ${fallback}`);
    }
    if (turn.timestamp) {
      const timestamp = typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString();
      messageEl.createEl("div", {
        cls: "ovl-chat-timestamp",
        text: timestamp
      });
    }
    this.messagesEl.scrollTop = this.messagesEl.scrollHeight;
  }
  getRoleLabel(role) {
    if (role === "user") {
      return "\uC0AC\uC6A9\uC790";
    }
    if (role === "assistant") {
      return "\uC5B4\uC2DC\uC2A4\uD134\uD2B8";
    }
    return "\uC2DC\uC2A4\uD15C";
  }
  async handleSend() {
    var _a, _b, _c, _d, _e, _f;
    const input = (_b = (_a = this.inputEl) == null ? void 0 : _a.value.trim()) != null ? _b : "";
    if (!input) {
      new import_obsidian8.Notice("\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
      return;
    }
    const isFirstQuestion = this.messages.length === 0;
    await this.appendMessage({
      role: "user",
      content: input,
      timestamp: (/* @__PURE__ */ new Date()).toISOString()
    });
    if (this.inputEl) {
      this.inputEl.value = "";
    }
    if (isFirstQuestion) {
      void this.generateSessionTitleFromQuestion(input);
    }
    this.setBusyState({ isBusy: true, sendLoading: true });
    try {
      const useRag = (_d = (_c = this.useRagCheckbox) == null ? void 0 : _c.checked) != null ? _d : false;
      const showSourcesOnly = (_f = (_e = this.showSourcesCheckbox) == null ? void 0 : _e.checked) != null ? _f : false;
      let reply;
      if (useRag && this.plugin.settings.indexingEnabled) {
        try {
          const searchResults = await this.plugin.search(input);
          if (showSourcesOnly) {
            reply = this.formatSearchResults(searchResults);
          } else {
            const context = this.buildContext(searchResults);
            const enhancedMessages = this.buildEnhancedMessages(input, context);
            reply = await this.plugin.requestAssistantReply(enhancedMessages);
          }
        } catch (error) {
          console.error("RAG \uAC80\uC0C9 \uC2E4\uD328:", error);
          new import_obsidian8.Notice("\uAC80\uC0C9\uC5D0 \uC2E4\uD328\uD558\uC5EC \uC77C\uBC18 \uBAA8\uB4DC\uB85C \uC804\uD658\uD569\uB2C8\uB2E4");
          reply = await this.plugin.requestAssistantReply(this.messages);
        }
      } else {
        reply = await this.plugin.requestAssistantReply(this.messages);
      }
      await this.appendMessage({
        role: "assistant",
        content: reply,
        timestamp: (/* @__PURE__ */ new Date()).toISOString()
      });
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian8.Notice(`\uB300\uD654 \uC2E4\uD328: ${message}`);
    } finally {
      this.setBusyState({ isBusy: false });
    }
  }
  buildContext(searchResults) {
    if (searchResults.length === 0) {
      return "\uAD00\uB828 \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.";
    }
    let context = "\uB2E4\uC74C\uC740 \uAC80\uC0C9\uB41C \uAD00\uB828 \uBB38\uC11C\uB4E4\uC785\uB2C8\uB2E4:\n\n";
    for (let i = 0; i < searchResults.length; i++) {
      const result = searchResults[i];
      const { chunk, note, score } = result;
      context += `## \uBB38\uC11C ${i + 1}: ${note.title}
`;
      context += `- \uD30C\uC77C: ${note.path}
`;
      context += `- \uC139\uC158: ${chunk.section || "\uBCF8\uBB38"}
`;
      context += `- \uC720\uC0AC\uB3C4: ${(score * 100).toFixed(1)}%

`;
      context += `${chunk.text}

`;
      context += "---\n\n";
    }
    return context;
  }
  formatSearchResults(searchResults) {
    if (searchResults.length === 0) {
      return "\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.";
    }
    let output = "# \uAC80\uC0C9 \uACB0\uACFC\n\n";
    for (let i = 0; i < searchResults.length; i++) {
      const result = searchResults[i];
      const { chunk, note, score } = result;
      output += `## ${i + 1}. ${note.title}

`;
      output += `**\uD30C\uC77C**: [[${note.path}]]
`;
      output += `**\uC139\uC158**: ${chunk.section || "\uBCF8\uBB38"}
`;
      output += `**\uC720\uC0AC\uB3C4**: ${(score * 100).toFixed(1)}%

`;
      output += `> ${chunk.text.substring(0, 200)}${chunk.text.length > 200 ? "..." : ""}

`;
    }
    return output;
  }
  buildEnhancedMessages(query, context) {
    const systemPrompt = `\uB108\uB294 Obsidian \uBCFC\uD2B8\uC758 \uC804\uBB38 \uB9AC\uC11C\uCE58 \uC5B4\uC2DC\uC2A4\uD134\uD2B8\uB2E4. 
\uC81C\uACF5\uB41C \uBB38\uC11C\uB4E4\uC744 \uCC38\uACE0\uD558\uC5EC \uC0AC\uC6A9\uC790\uC758 \uC9C8\uBB38\uC5D0 \uB2F5\uBCC0\uD558\uB418, \uD56D\uC0C1 \uCD9C\uCC98\uB97C \uBA85\uC2DC\uD558\uB77C.
\uBAA8\uB974\uB294 \uB0B4\uC6A9\uC740 \uCD94\uCE21\uD558\uC9C0 \uB9D0\uACE0 \uC194\uC9C1\uD558\uAC8C \uBAA8\uB978\uB2E4\uACE0 \uB2F5\uBCC0\uD558\uB77C.

${context}`;
    return [
      { role: "system", content: systemPrompt, timestamp: (/* @__PURE__ */ new Date()).toISOString() },
      ...this.messages
    ];
  }
  async handleSave() {
    var _a, _b;
    if (this.messages.length === 0) {
      new import_obsidian8.Notice("\uC800\uC7A5\uD560 \uB300\uD654\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    this.setBusyState({ isBusy: true, saveLoading: true });
    try {
      const conversationTitle = await this.generateTitleForSave();
      const sessionId = (_b = (_a = this.sessionIdEl) == null ? void 0 : _a.value.trim()) != null ? _b : "";
      const finalSessionId = conversationTitle || sessionId;
      if (!finalSessionId) {
        new import_obsidian8.Notice("\uC81C\uBAA9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
        return;
      }
      if (conversationTitle && this.sessionIdEl) {
        this.sessionIdEl.value = conversationTitle;
      }
      const enableTopicSeparation = this.messages.length >= 4 && this.plugin.settings.apiKey;
      if (enableTopicSeparation) {
        new import_obsidian8.Notice("\uB300\uD654\uB97C \uC8FC\uC81C\uBCC4\uB85C \uBD84\uC11D\uD558\uB294 \uC911...");
        try {
          const engine = new TopicSeparationEngine({
            apiKey: this.plugin.settings.embeddingApiKey || this.plugin.settings.apiKey,
            embeddingModel: this.plugin.settings.embeddingModel,
            similarityThreshold: 0.75,
            minSegmentLength: 2,
            windowSize: 2,
            enableKeywordMetadata: true,
            app: this.app,
            manifest: this.plugin.manifest,
            enableEmbeddingLogging: true
          });
          const result = await engine.separateTopics(this.messages);
          console.log(`\uC8FC\uC81C \uBD84\uB9AC \uC644\uB8CC: ${result.segments.length}\uAC1C \uC138\uADF8\uBA3C\uD2B8 \uAC10\uC9C0`);
          if (result.segments.length > 1) {
            new import_obsidian8.Notice(`${result.segments.length}\uAC1C\uC758 \uC8FC\uC81C\uB85C \uBD84\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC800\uC7A5 \uC911...`);
            const multiNoteResult = await saveSegmentsAsNotes(
              this.app.vault,
              result.segments,
              result.links,
              finalSessionId,
              this.plugin.settings.defaultOutputFolder,
              this.app,
              this.plugin.manifest
            );
            new import_obsidian8.Notice(
              `\uC8FC\uC81C\uBCC4\uB85C \uBD84\uB9AC\uD558\uC5EC \uC800\uC7A5 \uC644\uB8CC!
- \uC8FC\uC81C \uB178\uD2B8: ${multiNoteResult.notePaths.length}\uAC1C
- \uC778\uB371\uC2A4: ${multiNoteResult.mainNotePath}`
            );
            engine.clearCache();
            this.resetSession();
            return;
          } else {
            console.log("\uB2E8\uC77C \uC8FC\uC81C\uB85C \uD310\uB2E8\uB418\uC5B4 \uC77C\uBC18 \uC800\uC7A5 \uC218\uD589");
          }
          engine.clearCache();
        } catch (error) {
          console.error("\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328, \uC77C\uBC18 \uC800\uC7A5\uC73C\uB85C \uC804\uD658:", error);
          new import_obsidian8.Notice("\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328. \uC77C\uBC18 \uBC29\uC2DD\uC73C\uB85C \uC800\uC7A5\uD569\uB2C8\uB2E4.");
        }
      }
      const summaryPrompt = this.buildWikiSummaryPrompt(this.messages);
      let summary = await this.plugin.requestAssistantReply([
        {
          role: "user",
          content: summaryPrompt,
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        }
      ]);
      summary = this.cleanSummary(summary);
      const targetPath = await this.plugin.saveConversationFromTurns(
        finalSessionId,
        [
          {
            role: "assistant",
            content: summary,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          }
        ],
        this.plugin.settings.defaultOutputFolder
      );
      new import_obsidian8.Notice(`\uC704\uD0A4 \uC694\uC57D \uC800\uC7A5 \uC644\uB8CC: ${targetPath}`);
      this.resetSession();
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian8.Notice(`\uC800\uC7A5 \uC2E4\uD328: ${message}`);
    } finally {
      this.setBusyState({ isBusy: false });
    }
  }
  resetSession() {
    this.messages = [];
    if (this.messagesEl) {
      this.messagesEl.empty();
    }
    if (this.inputEl) {
      this.inputEl.value = "";
    }
    if (this.sessionIdEl) {
      this.sessionIdEl.value = this.buildSessionId();
    }
  }
  buildWikiSummaryPrompt(turns) {
    const transcript = turns.map((turn) => {
      const roleLabel = turn.role === "user" ? "\uC0AC\uC6A9\uC790" : turn.role === "assistant" ? "\uC5B4\uC2DC\uC2A4\uD134\uD2B8" : "\uC2DC\uC2A4\uD15C";
      return `[${roleLabel}] ${turn.content}`;
    }).join("\n\n");
    return `\uB2E4\uC74C \uB300\uD654\uB97C \uC704\uD0A4 \uD615\uC2DD\uC758 \uB9C8\uD06C\uB2E4\uC6B4 \uBCF8\uBB38\uC73C\uB85C \uC815\uB9AC\uD574 \uC8FC\uC138\uC694.

\uCD9C\uB825 \uD615\uC2DD(\uBCF8\uBB38\uB9CC):
# \uC81C\uBAA9
## \uC694\uC57D
## \uD575\uC2EC \uC8FC\uC81C
## \uACB0\uC815 \uC0AC\uD56D
## \uC561\uC158 \uC544\uC774\uD15C
## \uC5F4\uB9B0 \uC9C8\uBB38

\uC694\uAD6C\uC0AC\uD56D:
- \uC704 \uD615\uC2DD\uC744 \uC9C0\uCF1C\uC11C \uAD6C\uC870\uC801\uC73C\uB85C \uC791\uC131
- \uAC00\uB2A5\uD55C \uACBD\uC6B0 \uBAA9\uB85D\uACFC \uD45C \uC0AC\uC6A9
- \uD55C\uAD6D\uC5B4\uB85C \uC791\uC131
- "\uC5B4\uC2DC\uC2A4\uD134\uD2B8"/\uD0C0\uC784\uC2A4\uD0EC\uD504/\uC11C\uBB38/\uC124\uBA85/\uC0AC\uC871 \uC5C6\uC774 \uBCF8\uBB38\uB9CC \uCD9C\uB825

\uB300\uD654 \uAE30\uB85D:
${transcript}`;
  }
  cleanSummary(summary) {
    const lines = summary.split("\n");
    const cleaned = [];
    let index = 0;
    while (index < lines.length) {
      const line = lines[index].trim();
      if (line.startsWith("## \u{1F916}") || line.startsWith("## \uC5B4\uC2DC\uC2A4\uD134\uD2B8")) {
        index += 1;
        while (index < lines.length && lines[index].trim().startsWith("*")) {
          index += 1;
        }
        while (index < lines.length && lines[index].trim() === "") {
          index += 1;
        }
        continue;
      }
      if (line.startsWith("\uB2E4\uC74C\uC740 ") && line.includes("\uC694\uC57D")) {
        index += 1;
        while (index < lines.length && lines[index].trim() === "") {
          index += 1;
        }
        continue;
      }
      cleaned.push(lines[index]);
      index += 1;
    }
    return cleaned.join("\n").trim();
  }
  async generateSessionTitleFromQuestion(question) {
    if (!this.sessionIdEl) {
      return;
    }
    const prompt = `\uB2E4\uC74C \uC9C8\uBB38\uC744 \uBCF4\uACE0 \uC138\uC158 \uC81C\uBAA9\uC744 \uB9CC\uB4E4\uC5B4 \uC8FC\uC138\uC694. \uC870\uAC74: 12~20\uC790 \uB0B4\uC678\uC758 \uAC04\uACB0\uD55C \uC81C\uBAA9, \uC774\uBAA8\uC9C0/\uB530\uC634\uD45C \uAE08\uC9C0, \uC81C\uBAA9\uB9CC \uCD9C\uB825.

\uC9C8\uBB38: ${question}`;
    try {
      const title = await this.plugin.requestTitleReply(prompt);
      const cleaned = this.cleanTitle(title);
      if (cleaned) {
        this.sessionIdEl.value = cleaned;
      }
    } catch (error) {
      console.error("\uC138\uC158 \uC81C\uBAA9 \uC0DD\uC131 \uC2E4\uD328:", error);
    }
  }
  async generateTitleForSave() {
    const transcript = this.messages.map((turn) => {
      const roleLabel = turn.role === "user" ? "\uC0AC\uC6A9\uC790" : turn.role === "assistant" ? "\uC5B4\uC2DC\uC2A4\uD134\uD2B8" : "\uC2DC\uC2A4\uD15C";
      return `[${roleLabel}] ${turn.content}`;
    }).join("\n\n");
    const prompt = `\uB2E4\uC74C \uB300\uD654 \uB0B4\uC6A9\uC744 \uBCF4\uACE0 \uBB38\uC7A5\uD615 \uC81C\uBAA9\uC744 \uB9CC\uB4E4\uC5B4 \uC8FC\uC138\uC694. \uC870\uAC74: 20~40\uC790 \uB0B4\uC678, \uC774\uBAA8\uC9C0/\uB530\uC634\uD45C \uAE08\uC9C0, \uC81C\uBAA9\uB9CC \uCD9C\uB825.

\uB300\uD654:
${transcript}`;
    try {
      const title = await this.plugin.requestTitleReply(prompt);
      return this.cleanTitle(title);
    } catch (error) {
      console.error("\uC800\uC7A5\uC6A9 \uC81C\uBAA9 \uC0DD\uC131 \uC2E4\uD328:", error);
      return "";
    }
  }
  cleanTitle(title) {
    return title.replace(/["'`]/g, "").replace(/\s+/g, " ").trim();
  }
};

// src/indexing/metadataStore.ts
var import_better_sqlite3 = __toESM(require_lib());
var MetadataStore = class {
  constructor(dbPath) {
    this.db = new import_better_sqlite3.default(dbPath);
    this.initializeSchema();
  }
  /**
   *   
   */
  initializeSchema() {
    this.db.exec(`
      CREATE TABLE IF NOT EXISTS notes (
        id TEXT PRIMARY KEY,
        path TEXT UNIQUE NOT NULL,
        title TEXT NOT NULL,
        tags TEXT, -- JSON array
        links TEXT, -- JSON array
        frontmatter TEXT, -- JSON object
        updated_at INTEGER NOT NULL,
        hash TEXT NOT NULL,
        modified_at INTEGER -- \uD30C\uC77C\uC2DC\uC2A4\uD15C \uC218\uC815 \uC2DC\uAC04
      );

      CREATE TABLE IF NOT EXISTS chunks (
        id TEXT PRIMARY KEY,
        note_id TEXT NOT NULL,
        text TEXT NOT NULL,
        position INTEGER NOT NULL,
        token_count INTEGER NOT NULL,
        section TEXT,
        FOREIGN KEY (note_id) REFERENCES notes(id) ON DELETE CASCADE
      );

      CREATE INDEX IF NOT EXISTS idx_notes_path ON notes(path);
      CREATE INDEX IF NOT EXISTS idx_notes_updated_at ON notes(updated_at);
      CREATE INDEX IF NOT EXISTS idx_notes_modified_at ON notes(modified_at);
      CREATE INDEX IF NOT EXISTS idx_chunks_note_id ON chunks(note_id);
    `);
    this.migrateIfNeeded();
  }
  /**
   *    
   */
  migrateIfNeeded() {
    try {
      const columns = this.db.pragma("table_info(notes)");
      const hasModifiedAt = columns.some((col) => col.name === "modified_at");
      if (!hasModifiedAt) {
        console.log("modified_at \uCEEC\uB7FC \uCD94\uAC00 \uC911...");
        this.db.exec("ALTER TABLE notes ADD COLUMN modified_at INTEGER");
        console.log("\uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC644\uB8CC");
      }
    } catch (error) {
      console.error("\uC2A4\uD0A4\uB9C8 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uC2E4\uD328:", error);
    }
  }
  /**
   *    
   */
  upsertNote(note) {
    const stmt = this.db.prepare(`
      INSERT INTO notes (id, path, title, tags, links, frontmatter, updated_at, hash, modified_at)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
      ON CONFLICT(id) DO UPDATE SET
        path = excluded.path,
        title = excluded.title,
        tags = excluded.tags,
        links = excluded.links,
        frontmatter = excluded.frontmatter,
        updated_at = excluded.updated_at,
        hash = excluded.hash,
        modified_at = excluded.modified_at
    `);
    stmt.run(
      note.id,
      note.path,
      note.title,
      JSON.stringify(note.tags),
      JSON.stringify(note.links),
      JSON.stringify(note.frontmatter),
      note.updatedAt,
      note.hash,
      note.modifiedAt || null
    );
  }
  /**
   *   
   */
  getNoteByPath(path) {
    const stmt = this.db.prepare("SELECT * FROM notes WHERE path = ?");
    const row = stmt.get(path);
    return row ? this.rowToNote(row) : null;
  }
  /**
   * ID  
   */
  getNoteById(id) {
    const stmt = this.db.prepare("SELECT * FROM notes WHERE id = ?");
    const row = stmt.get(id);
    return row ? this.rowToNote(row) : null;
  }
  /**
   *   
   */
  getAllNotes() {
    const stmt = this.db.prepare("SELECT * FROM notes ORDER BY updated_at DESC");
    const rows = stmt.all();
    return rows.map((row) => this.rowToNote(row));
  }
  /**
   *  
   */
  deleteNote(id) {
    const stmt = this.db.prepare("DELETE FROM notes WHERE id = ?");
    stmt.run(id);
  }
  /**
   *  
   */
  insertChunks(chunks) {
    const stmt = this.db.prepare(`
      INSERT INTO chunks (id, note_id, text, position, token_count, section)
      VALUES (?, ?, ?, ?, ?, ?)
    `);
    const transaction = this.db.transaction((chunks2) => {
      for (const chunk of chunks2) {
        stmt.run(
          chunk.id,
          chunk.noteId,
          chunk.text,
          chunk.position,
          chunk.tokenCount,
          chunk.section
        );
      }
    });
    transaction(chunks);
  }
  /**
   *   
   */
  deleteChunksByNoteId(noteId) {
    const stmt = this.db.prepare("DELETE FROM chunks WHERE note_id = ?");
    stmt.run(noteId);
  }
  /**
   *   
   */
  getChunksByNoteId(noteId) {
    const stmt = this.db.prepare("SELECT * FROM chunks WHERE note_id = ? ORDER BY position");
    const rows = stmt.all(noteId);
    return rows.map((row) => this.rowToChunk(row));
  }
  /**
   * ID  
   */
  getChunkById(id) {
    const stmt = this.db.prepare("SELECT * FROM chunks WHERE id = ?");
    const row = stmt.get(id);
    return row ? this.rowToChunk(row) : null;
  }
  /**
   *   
   */
  getAllChunks() {
    const stmt = this.db.prepare("SELECT * FROM chunks");
    const rows = stmt.all();
    return rows.map((row) => this.rowToChunk(row));
  }
  /**
   *  
   */
  close() {
    this.db.close();
  }
  /**
   * DB  NoteMetadata 
   */
  rowToNote(row) {
    return {
      id: row.id,
      path: row.path,
      title: row.title,
      tags: JSON.parse(row.tags || "[]"),
      links: JSON.parse(row.links || "[]"),
      frontmatter: JSON.parse(row.frontmatter || "{}"),
      updatedAt: row.updated_at,
      hash: row.hash,
      modifiedAt: row.modified_at || void 0
    };
  }
  /**
   * DB  Chunk 
   */
  rowToChunk(row) {
    return {
      id: row.id,
      noteId: row.note_id,
      text: row.text,
      position: row.position,
      tokenCount: row.token_count,
      section: row.section
    };
  }
};

// src/indexing/vectorStore.ts
var import_better_sqlite32 = __toESM(require_lib());
var VectorStore = class {
  constructor(dbPath) {
    this.db = new import_better_sqlite32.default(dbPath);
    this.initializeSchema();
  }
  /**
   *   
   */
  initializeSchema() {
    this.db.exec(`
      CREATE TABLE IF NOT EXISTS embeddings (
        chunk_id TEXT PRIMARY KEY,
        embedding TEXT NOT NULL -- JSON array of numbers
      );

      CREATE INDEX IF NOT EXISTS idx_embeddings_chunk_id ON embeddings(chunk_id);
    `);
  }
  /**
   *  
   */
  storeEmbedding(chunkId, embedding) {
    const stmt = this.db.prepare(`
      INSERT OR REPLACE INTO embeddings (chunk_id, embedding)
      VALUES (?, ?)
    `);
    stmt.run(chunkId, JSON.stringify(embedding));
  }
  /**
   *    
   */
  storeEmbeddings(embeddings) {
    const stmt = this.db.prepare(`
      INSERT OR REPLACE INTO embeddings (chunk_id, embedding)
      VALUES (?, ?)
    `);
    const transaction = this.db.transaction((embeddings2) => {
      for (const [chunkId, embedding] of embeddings2.entries()) {
        stmt.run(chunkId, JSON.stringify(embedding));
      }
    });
    transaction(embeddings);
  }
  /**
   *  
   */
  getEmbedding(chunkId) {
    const stmt = this.db.prepare("SELECT embedding FROM embeddings WHERE chunk_id = ?");
    const row = stmt.get(chunkId);
    return row ? JSON.parse(row.embedding) : null;
  }
  /**
   *   
   */
  getAllEmbeddings() {
    const stmt = this.db.prepare("SELECT chunk_id, embedding FROM embeddings");
    const rows = stmt.all();
    const result = /* @__PURE__ */ new Map();
    for (const row of rows) {
      result.set(row.chunk_id, JSON.parse(row.embedding));
    }
    return result;
  }
  /**
   *   
   */
  deleteEmbedding(chunkId) {
    const stmt = this.db.prepare("DELETE FROM embeddings WHERE chunk_id = ?");
    stmt.run(chunkId);
  }
  /**
   *    
   */
  deleteEmbeddings(chunkIds) {
    const placeholders = chunkIds.map(() => "?").join(",");
    const stmt = this.db.prepare(`DELETE FROM embeddings WHERE chunk_id IN (${placeholders})`);
    stmt.run(...chunkIds);
  }
  /**
   *   
   */
  cosineSimilarity(a, b) {
    if (a.length !== b.length) {
      throw new Error("\uBCA1\uD130 \uAE38\uC774\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
    }
    let dotProduct = 0;
    let normA = 0;
    let normB = 0;
    for (let i = 0; i < a.length; i++) {
      dotProduct += a[i] * b[i];
      normA += a[i] * a[i];
      normB += b[i] * b[i];
    }
    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
  }
  /**
   *   - Top-K   
   * 
   * :         .
   *       ,    :
   * - ANN(Approximate Nearest Neighbor)   (FAISS, HNSW )
   * -     (Chroma, Qdrant )
   * -     
   */
  search(queryEmbedding, k = 8) {
    const allEmbeddings = this.getAllEmbeddings();
    const scores = [];
    for (const [chunkId, embedding] of allEmbeddings.entries()) {
      const score = this.cosineSimilarity(queryEmbedding, embedding);
      scores.push({ chunkId, score });
    }
    scores.sort((a, b) => b.score - a.score);
    return scores.slice(0, k);
  }
  /**
   *  
   */
  close() {
    this.db.close();
  }
};

// src/indexing/embeddings.ts
var import_obsidian9 = require("obsidian");
var EmbeddingGenerator2 = class {
  constructor(config) {
    this.pipeline = null;
    this.pipelineFactory = null;
    this.config = config;
  }
  /**
   *  
   */
  async initialize() {
    if (this.config.provider === "local") {
      if (this.pipeline) {
        return;
      }
      console.log(`\uB85C\uCEEC \uC784\uBCA0\uB529 \uBAA8\uB378 \uB85C\uB529 \uC911: ${this.config.model}`);
      console.log(`\uBAA8\uB378\uC740 HuggingFace\uC5D0\uC11C \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5B4 \uB85C\uCEEC\uC5D0 \uCE90\uC2DC\uB429\uB2C8\uB2E4.`);
      const pipelineFactory = await this.loadPipelineFactory();
      this.pipeline = await pipelineFactory("feature-extraction", this.config.model);
      console.log("\uC784\uBCA0\uB529 \uBAA8\uB378 \uB85C\uB529 \uC644\uB8CC");
    } else {
      console.log(`API \uAE30\uBC18 \uC784\uBCA0\uB529 \uC0AC\uC6A9: ${this.config.provider}`);
    }
  }
  /**
   *    
   */
  async embed(text) {
    if (this.config.provider === "local") {
      return this.embedLocal(text);
    } else if (this.config.provider === "gemini") {
      return this.embedGemini(text);
    } else if (this.config.provider === "openai") {
      return this.embedOpenAI(text);
    } else if (this.config.provider === "custom") {
      return this.embedCustom(text);
    }
    throw new Error(`\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uC784\uBCA0\uB529 \uC81C\uACF5\uC790: ${this.config.provider}`);
  }
  /**
   *    
   */
  async embedLocal(text) {
    if (!this.pipeline) {
      await this.initialize();
    }
    if (!this.pipeline) {
      throw new Error("\uC784\uBCA0\uB529 \uD30C\uC774\uD504\uB77C\uC778 \uCD08\uAE30\uD654 \uC2E4\uD328");
    }
    const output = await this.pipeline(text, {
      pooling: "mean",
      normalize: true
    });
    return Array.from(output.data);
  }
  /**
   *     (  )
   */
  async loadPipelineFactory() {
    if (this.pipelineFactory) {
      return this.pipelineFactory;
    }
    const module2 = await import("@xenova/transformers");
    this.pipelineFactory = module2.pipeline;
    return this.pipelineFactory;
  }
  /**
   * Gemini API  
   */
  async embedGemini(text) {
    var _a;
    if (!this.config.apiKey) {
      throw new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    const url = `${this.config.apiUrl}/${this.config.model}:embedContent?key=${this.config.apiKey}`;
    try {
      const response = await (0, import_obsidian9.requestUrl)({
        url,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          content: {
            parts: [{ text }]
          }
        })
      });
      const data = response.json;
      if ((_a = data.embedding) == null ? void 0 : _a.values) {
        return data.embedding.values;
      }
      throw new Error("Gemini API \uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
    } catch (error) {
      console.error("Gemini \uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   * OpenAI API  
   */
  async embedOpenAI(text) {
    var _a, _b;
    if (!this.config.apiKey) {
      throw new Error("OpenAI API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      const response = await (0, import_obsidian9.requestUrl)({
        url: this.config.apiUrl || "https://api.openai.com/v1/embeddings",
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.apiKey}`
        },
        body: JSON.stringify({
          model: this.config.model,
          input: text
        })
      });
      const data = response.json;
      if ((_b = (_a = data.data) == null ? void 0 : _a[0]) == null ? void 0 : _b.embedding) {
        return data.data[0].embedding;
      }
      throw new Error("OpenAI API \uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
    } catch (error) {
      console.error("OpenAI \uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *  API  
   */
  async embedCustom(text) {
    var _a, _b;
    if (!this.config.apiUrl) {
      throw new Error("\uCEE4\uC2A4\uD140 API URL\uC774 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      const headers = {
        "Content-Type": "application/json"
      };
      if (this.config.apiKey) {
        headers["Authorization"] = `Bearer ${this.config.apiKey}`;
      }
      const response = await (0, import_obsidian9.requestUrl)({
        url: this.config.apiUrl,
        method: "POST",
        headers,
        body: JSON.stringify({
          model: this.config.model,
          input: text
        })
      });
      const data = response.json;
      if (!Array.isArray(data) && ((_b = (_a = data.data) == null ? void 0 : _a[0]) == null ? void 0 : _b.embedding)) {
        return data.data[0].embedding;
      }
      if (Array.isArray(data)) {
        return data;
      }
      throw new Error("\uCEE4\uC2A4\uD140 API \uC751\uB2F5 \uD615\uC2DD\uC744 \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4");
    } catch (error) {
      console.error("\uCEE4\uC2A4\uD140 \uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *     
   */
  async embedBatch(texts) {
    const embeddings = [];
    for (const text of texts) {
      const embedding = await this.embed(text);
      embeddings.push(embedding);
    }
    return embeddings;
  }
};

// src/indexing/parser.ts
var import_gray_matter = __toESM(require_gray_matter());
var import_crypto = require("crypto");
function parseMarkdown(filePath, content) {
  const parsed = (0, import_gray_matter.default)(content);
  const frontmatter = parsed.data;
  const bodyContent = parsed.content;
  const title = frontmatter.title || extractTitleFromPath(filePath);
  const tags = extractTags(bodyContent, frontmatter);
  const links = extractLinks(bodyContent);
  const sections = extractSections(bodyContent);
  return {
    content: bodyContent,
    frontmatter,
    tags,
    links,
    title,
    sections
  };
}
function extractTitleFromPath(filePath) {
  const fileName = filePath.split("/").pop() || "";
  return fileName.replace(/\.md$/, "");
}
function extractTags(content, frontmatter) {
  const tags = /* @__PURE__ */ new Set();
  if (Array.isArray(frontmatter.tags)) {
    frontmatter.tags.forEach((tag) => {
      if (typeof tag === "string") {
        tags.add(tag.replace(/^#/, ""));
      }
    });
  }
  const hashtagRegex = /#([a-zA-Z0-9-_-]+)/g;
  let match;
  while ((match = hashtagRegex.exec(content)) !== null) {
    tags.add(match[1]);
  }
  return Array.from(tags);
}
function extractLinks(content) {
  const links = /* @__PURE__ */ new Set();
  const linkRegex = /\[\[([^\]]+)\]\]/g;
  let match;
  while ((match = linkRegex.exec(content)) !== null) {
    const link = match[1].split("|")[0].trim();
    links.add(link);
  }
  return Array.from(links);
}
function extractSections(content) {
  const sections = [];
  const lines = content.split("\n");
  let currentSection = null;
  let currentContent = [];
  let position = 0;
  for (const line of lines) {
    const headerMatch = line.match(/^(#{1,6})\s+(.+)$/);
    if (headerMatch) {
      if (currentSection) {
        currentSection.content = currentContent.join("\n").trim();
        sections.push(currentSection);
      }
      currentSection = {
        heading: headerMatch[2].trim(),
        content: "",
        level: headerMatch[1].length,
        position
      };
      currentContent = [];
    } else if (currentSection) {
      currentContent.push(line);
    } else {
      if (sections.length === 0) {
        currentSection = {
          heading: "",
          content: "",
          level: 0,
          position
        };
      }
      currentContent.push(line);
    }
    position += line.length + 1;
  }
  if (currentSection) {
    currentSection.content = currentContent.join("\n").trim();
    sections.push(currentSection);
  }
  return sections;
}
function computeHash(content) {
  return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
}

// src/indexing/chunker.ts
function estimateTokenCount(text) {
  const nonKoreanText = text.replace(/[-]/g, " ");
  const words = nonKoreanText.split(/\s+/).filter((w) => w.length > 0).length;
  const koreanChars = (text.match(/[-]/g) || []).length;
  return Math.ceil(words * 1.3 + koreanChars);
}
function chunkText(noteId, sections, options2 = {}) {
  const chunkSize = options2.chunkSize || 400;
  const chunkOverlap = options2.chunkOverlap || 50;
  const chunks = [];
  for (const section of sections) {
    const sectionText = section.heading ? `# ${section.heading}

${section.content}` : section.content;
    if (!sectionText.trim()) {
      continue;
    }
    const tokenCount = estimateTokenCount(sectionText);
    if (tokenCount <= chunkSize) {
      chunks.push({
        id: `${noteId}-chunk-${chunks.length}`,
        noteId,
        text: sectionText,
        position: section.position,
        tokenCount,
        section: section.heading
      });
      continue;
    }
    const sentences = splitIntoSentences(sectionText);
    let currentChunk = [];
    let currentTokens = 0;
    for (const sentence of sentences) {
      const sentenceTokens = estimateTokenCount(sentence);
      if (currentTokens + sentenceTokens <= chunkSize) {
        currentChunk.push(sentence);
        currentTokens += sentenceTokens;
      } else {
        if (currentChunk.length > 0) {
          const chunkText2 = currentChunk.join(" ");
          chunks.push({
            id: `${noteId}-chunk-${chunks.length}`,
            noteId,
            text: chunkText2,
            position: section.position,
            tokenCount: currentTokens,
            section: section.heading
          });
          const overlapSentences = getOverlapSentences(currentChunk, chunkOverlap);
          currentChunk = overlapSentences;
          currentTokens = estimateTokenCount(currentChunk.join(" "));
        }
        currentChunk.push(sentence);
        currentTokens += sentenceTokens;
      }
    }
    if (currentChunk.length > 0) {
      const chunkText2 = currentChunk.join(" ");
      chunks.push({
        id: `${noteId}-chunk-${chunks.length}`,
        noteId,
        text: chunkText2,
        position: section.position,
        tokenCount: currentTokens,
        section: section.heading
      });
    }
  }
  return chunks;
}
function splitIntoSentences(text) {
  const sentences = text.split(/([.!?]\s+)/).filter((s) => s.trim());
  const result = [];
  for (let i = 0; i < sentences.length; i += 2) {
    const sentence = sentences[i];
    const punctuation = sentences[i + 1] || "";
    result.push(sentence + punctuation);
  }
  return result.filter((s) => s.trim());
}
function getOverlapSentences(sentences, targetTokens) {
  const overlap = [];
  let tokens = 0;
  for (let i = sentences.length - 1; i >= 0; i--) {
    const sentence = sentences[i];
    const sentenceTokens = estimateTokenCount(sentence);
    if (tokens + sentenceTokens > targetTokens) {
      break;
    }
    overlap.unshift(sentence);
    tokens += sentenceTokens;
  }
  return overlap;
}

// src/indexing/indexer.ts
var import_crypto2 = require("crypto");
var Indexer = class {
  constructor(config) {
    this.cancelled = false;
    this.config = config;
    this.metadataStore = new MetadataStore(config.metaDbPath);
    this.vectorStore = new VectorStore(config.vectorDbPath);
    const embeddingConfig = {
      provider: config.embeddingProvider,
      model: config.embeddingModel,
      apiKey: config.embeddingApiKey,
      apiUrl: config.embeddingApiUrl
    };
    this.embeddingGenerator = new EmbeddingGenerator2(embeddingConfig);
  }
  /**
   *  -   
   */
  async initialize() {
    await this.embeddingGenerator.initialize();
  }
  /**
   *  
   */
  cancel() {
    this.cancelled = true;
  }
  /**
   *   
   */
  resetCancel() {
    this.cancelled = false;
  }
  /**
   *    (   )
   */
  async indexFile(filePath, content, modifiedAt) {
    try {
      if (this.cancelled) {
        throw new Error("\uC778\uB371\uC2F1\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4");
      }
      const hash = computeHash(content);
      const existingNote = this.metadataStore.getNoteByPath(filePath);
      if (existingNote) {
        if (existingNote.hash === hash) {
          console.log(`\uD30C\uC77C \uBCC0\uACBD \uC5C6\uC74C (\uD574\uC2DC), \uC2A4\uD0B5: ${filePath}`);
          return;
        }
        if (modifiedAt && existingNote.modifiedAt && existingNote.modifiedAt === modifiedAt) {
          console.log(`\uD30C\uC77C \uBCC0\uACBD \uC5C6\uC74C (\uC218\uC815 \uC2DC\uAC04), \uC2A4\uD0B5: ${filePath}`);
          return;
        }
      }
      const parsed = parseMarkdown(filePath, content);
      const noteId = this.generateNoteId(filePath);
      const noteMetadata = {
        id: noteId,
        path: filePath,
        title: parsed.title,
        tags: parsed.tags,
        links: parsed.links,
        frontmatter: parsed.frontmatter,
        updatedAt: Date.now(),
        hash,
        modifiedAt
      };
      this.metadataStore.upsertNote(noteMetadata);
      if (existingNote) {
        const oldChunks = this.metadataStore.getChunksByNoteId(noteId);
        this.vectorStore.deleteEmbeddings(oldChunks.map((c) => c.id));
        this.metadataStore.deleteChunksByNoteId(noteId);
      }
      const chunks = chunkText(noteId, parsed.sections, {
        chunkSize: this.config.chunkSize,
        chunkOverlap: this.config.chunkOverlap
      });
      if (chunks.length === 0) {
        console.log(`\uCCAD\uD06C \uC5C6\uC74C: ${filePath}`);
        return;
      }
      this.metadataStore.insertChunks(chunks);
      console.log(`\uC784\uBCA0\uB529 \uC0DD\uC131 \uC911: ${filePath} (${chunks.length}\uAC1C \uCCAD\uD06C)`);
      for (const chunk of chunks) {
        if (this.cancelled) {
          throw new Error("\uC778\uB371\uC2F1\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4");
        }
        const embedding = await this.embeddingGenerator.embed(chunk.text);
        this.vectorStore.storeEmbedding(chunk.id, embedding);
      }
      console.log(`\uC778\uB371\uC2F1 \uC644\uB8CC: ${filePath}`);
    } catch (error) {
      if (this.cancelled) {
        throw error;
      }
      console.error(`\uC778\uB371\uC2F1 \uC2E4\uD328: ${filePath}`, error);
      throw error;
    }
  }
  /**
   *   
   */
  async deleteFile(filePath) {
    const note = this.metadataStore.getNoteByPath(filePath);
    if (!note) {
      return;
    }
    const chunks = this.metadataStore.getChunksByNoteId(note.id);
    this.vectorStore.deleteEmbeddings(chunks.map((c) => c.id));
    this.metadataStore.deleteChunksByNoteId(note.id);
    this.metadataStore.deleteNote(note.id);
    console.log(`\uD30C\uC77C \uC0AD\uC81C \uC644\uB8CC: ${filePath}`);
  }
  /**
   * 
   */
  async search(query, k) {
    const topK = k || this.config.topK;
    const queryEmbedding = await this.embeddingGenerator.embed(query);
    const results = this.vectorStore.search(queryEmbedding, topK);
    const searchResults = results.map((result) => {
      const chunk = this.metadataStore.getChunkById(result.chunkId);
      if (!chunk) {
        return null;
      }
      return {
        chunk,
        score: result.score
      };
    }).filter((r) => r !== null);
    return searchResults;
  }
  /**
   *     
   */
  getSearchResultsWithMetadata(searchResults) {
    return searchResults.map((result) => {
      const note = this.metadataStore.getNoteById(result.chunk.noteId);
      if (!note) {
        return null;
      }
      return {
        chunk: result.chunk,
        note,
        score: result.score
      };
    }).filter((r) => r !== null);
  }
  /**
   *  ID 
   */
  generateNoteId(filePath) {
    return (0, import_crypto2.createHash)("sha256").update(filePath).digest("hex").substring(0, 16);
  }
  /**
   *  
   */
  close() {
    this.metadataStore.close();
    this.vectorStore.close();
  }
};

// src/vaultWatcher.ts
var import_obsidian10 = require("obsidian");
var VaultWatcher = class {
  //    
  constructor(vault) {
    this.indexer = null;
    this.isIndexing = false;
    this.indexQueue = /* @__PURE__ */ new Set();
    this.indexingInProgress = /* @__PURE__ */ new Set();
    this.vault = vault;
  }
  /**
   *  
   */
  setIndexer(indexer) {
    this.indexer = indexer;
  }
  /**
   *    (  )
   */
  async indexVault(progressCallback) {
    var _a;
    if (!this.indexer) {
      throw new Error("\uC778\uB371\uC11C\uAC00 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    if (this.isIndexing) {
      new import_obsidian10.Notice("\uC774\uBBF8 \uC778\uB371\uC2F1\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4");
      return;
    }
    this.isIndexing = true;
    this.indexer.resetCancel();
    try {
      const mdFiles = this.vault.getMarkdownFiles();
      console.log(`\uC778\uB371\uC2F1\uD560 \uD30C\uC77C \uC218: ${mdFiles.length}`);
      if (progressCallback) {
        progressCallback({
          totalFiles: mdFiles.length,
          processedFiles: 0,
          status: "indexing"
        });
      }
      let indexed = 0;
      let failed = 0;
      for (const file of mdFiles) {
        try {
          const content = await this.vault.read(file);
          const modifiedAt = ((_a = file.stat) == null ? void 0 : _a.mtime) || void 0;
          await this.indexer.indexFile(file.path, content, modifiedAt);
          indexed++;
          if (progressCallback) {
            progressCallback({
              totalFiles: mdFiles.length,
              processedFiles: indexed,
              currentFile: file.path,
              status: "indexing"
            });
          }
        } catch (error) {
          if (error.message === "\uC778\uB371\uC2F1\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4") {
            console.log("\uC778\uB371\uC2F1\uC774 \uC0AC\uC6A9\uC790\uC5D0 \uC758\uD574 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4");
            if (progressCallback) {
              progressCallback({
                totalFiles: mdFiles.length,
                processedFiles: indexed,
                status: "cancelled"
              });
            }
            return;
          }
          console.error(`\uD30C\uC77C \uC778\uB371\uC2F1 \uC2E4\uD328: ${file.path}`, error);
          failed++;
        }
      }
      if (progressCallback) {
        progressCallback({
          totalFiles: mdFiles.length,
          processedFiles: indexed,
          status: "completed"
        });
      }
      new import_obsidian10.Notice(`\uC778\uB371\uC2F1 \uC644\uB8CC: ${indexed}\uAC1C \uC131\uACF5, ${failed}\uAC1C \uC2E4\uD328`);
    } catch (error) {
      console.error("\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC911 \uC624\uB958:", error);
      if (progressCallback) {
        progressCallback({
          totalFiles: 0,
          processedFiles: 0,
          status: "error",
          error: String(error)
        });
      }
      new import_obsidian10.Notice("\uC778\uB371\uC2F1 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
    } finally {
      this.isIndexing = false;
    }
  }
  /**
   *  
   */
  cancelIndexing() {
    if (this.indexer) {
      this.indexer.cancel();
    }
  }
  /**
   *    
   */
  async onFileCreate(file) {
    var _a;
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    try {
      const content = await this.vault.read(file);
      const modifiedAt = ((_a = file.stat) == null ? void 0 : _a.mtime) || void 0;
      await this.indexer.indexFile(file.path, content, modifiedAt);
      console.log(`\uD30C\uC77C \uC0DD\uC131 \uC778\uB371\uC2F1: ${file.path}`);
    } catch (error) {
      console.error(`\uD30C\uC77C \uC0DD\uC131 \uC778\uB371\uC2F1 \uC2E4\uD328: ${file.path}`, error);
    }
  }
  /**
   *    
   */
  async onFileModify(file) {
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    this.indexQueue.add(file.path);
    setTimeout(async () => {
      var _a;
      if (this.indexQueue.has(file.path) && !this.indexingInProgress.has(file.path)) {
        this.indexQueue.delete(file.path);
        this.indexingInProgress.add(file.path);
        try {
          const content = await this.vault.read(file);
          const modifiedAt = ((_a = file.stat) == null ? void 0 : _a.mtime) || void 0;
          if (this.indexer) {
            await this.indexer.indexFile(file.path, content, modifiedAt);
          }
          console.log(`\uD30C\uC77C \uC218\uC815 \uC778\uB371\uC2F1: ${file.path}`);
        } catch (error) {
          console.error(`\uD30C\uC77C \uC218\uC815 \uC778\uB371\uC2F1 \uC2E4\uD328: ${file.path}`, error);
        } finally {
          this.indexingInProgress.delete(file.path);
        }
      }
    }, 100);
  }
  /**
   *    
   */
  async onFileDelete(file) {
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    try {
      await this.indexer.deleteFile(file.path);
      console.log(`\uD30C\uC77C \uC0AD\uC81C \uCC98\uB9AC: ${file.path}`);
    } catch (error) {
      console.error(`\uD30C\uC77C \uC0AD\uC81C \uCC98\uB9AC \uC2E4\uD328: ${file.path}`, error);
    }
  }
  /**
   *     
   */
  async onFileRename(file, oldPath) {
    var _a;
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    try {
      await this.indexer.deleteFile(oldPath);
      const content = await this.vault.read(file);
      const modifiedAt = ((_a = file.stat) == null ? void 0 : _a.mtime) || void 0;
      if (this.indexer) {
        await this.indexer.indexFile(file.path, content, modifiedAt);
      }
      console.log(`\uD30C\uC77C \uC774\uB984 \uBCC0\uACBD \uCC98\uB9AC: ${oldPath} -> ${file.path}`);
    } catch (error) {
      console.error(`\uD30C\uC77C \uC774\uB984 \uBCC0\uACBD \uCC98\uB9AC \uC2E4\uD328: ${oldPath} -> ${file.path}`, error);
    }
  }
};

// src/main.ts
var import_path = require("path");
var OvlPlugin = class extends import_obsidian11.Plugin {
  constructor() {
    super(...arguments);
    this.settings = { ...DEFAULT_SETTINGS };
    this.apiClient = null;
    this.indexer = null;
    this.vaultWatcher = null;
  }
  async onload() {
    await this.loadSettings();
    this.apiClient = new OvlApiClient(
      () => this.settings,
      (context, detail) => appendErrorLog(this.app, this.manifest, context, detail)
    );
    if (this.settings.indexingEnabled) {
      await this.initializeIndexing();
    }
    this.registerView(VIEW_TYPE_OVL_CHAT, (leaf) => new ChatView(leaf, this));
    this.addRibbonIcon("message-circle", "OVL \uB300\uD654 \uC5F4\uAE30", () => {
      void this.openChatView();
    });
    this.addCommand({
      id: "ovl-open-chat",
      name: "OVL \uB300\uD654 \uCC3D \uC5F4\uAE30",
      callback: () => {
        void this.openChatView();
      }
    });
    this.addCommand({
      id: "ovl-save-conversation",
      name: "\uB300\uD654 JSON\uC5D0\uC11C \uB9C8\uD06C\uB2E4\uC6B4 \uC800\uC7A5",
      callback: () => {
        new SaveConversationModal(this, (form) => {
          void this.handleSaveConversation(form);
        }).open();
      }
    });
    this.addCommand({
      id: "ovl-index-vault",
      name: "\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC2DC\uC791",
      callback: () => {
        void this.startIndexing();
      }
    });
    this.addSettingTab(new OvlSettingTab(this));
  }
  onunload() {
    this.app.workspace.getLeavesOfType(VIEW_TYPE_OVL_CHAT).forEach((leaf) => {
      leaf.detach();
    });
    if (this.indexer) {
      this.indexer.close();
    }
  }
  /**
   *   
   */
  async initializeIndexing() {
    try {
      const dataDir = (0, import_path.join)(
        // @ts-ignore - Obsidian API   
        this.app.vault.adapter.basePath,
        ".obsidian",
        "plugins",
        this.manifest.id
      );
      const metaDbPath = (0, import_path.join)(dataDir, "meta.db");
      const vectorDbPath = (0, import_path.join)(dataDir, "vectors.db");
      this.indexer = new Indexer({
        chunkSize: this.settings.chunkSize,
        chunkOverlap: this.settings.chunkOverlap,
        topK: this.settings.topK,
        embeddingProvider: this.settings.embeddingProvider,
        embeddingModel: this.settings.embeddingModel,
        embeddingApiKey: this.settings.embeddingApiKey || this.settings.apiKey,
        embeddingApiUrl: this.getEmbeddingApiUrl(),
        metaDbPath,
        vectorDbPath
      });
      await this.indexer.initialize();
      this.vaultWatcher = new VaultWatcher(this.app.vault);
      this.vaultWatcher.setIndexer(this.indexer);
      this.registerEvent(
        this.app.vault.on("create", (file) => {
          var _a;
          if (file instanceof import_obsidian11.TFile) {
            void ((_a = this.vaultWatcher) == null ? void 0 : _a.onFileCreate(file));
          }
        })
      );
      this.registerEvent(
        this.app.vault.on("modify", (file) => {
          var _a;
          if (file instanceof import_obsidian11.TFile) {
            void ((_a = this.vaultWatcher) == null ? void 0 : _a.onFileModify(file));
          }
        })
      );
      this.registerEvent(
        this.app.vault.on("delete", (file) => {
          var _a;
          if (file instanceof import_obsidian11.TFile) {
            (_a = this.vaultWatcher) == null ? void 0 : _a.onFileDelete(file);
          }
        })
      );
      this.registerEvent(
        this.app.vault.on("rename", (file, oldPath) => {
          var _a;
          if (file instanceof import_obsidian11.TFile) {
            void ((_a = this.vaultWatcher) == null ? void 0 : _a.onFileRename(file, oldPath));
          }
        })
      );
      console.log("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654 \uC644\uB8CC");
    } catch (error) {
      console.error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654 \uC2E4\uD328:", error);
      new import_obsidian11.Notice("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4");
    }
  }
  /**
   *   
   */
  async startIndexing() {
    if (!this.settings.indexingEnabled) {
      new import_obsidian11.Notice("\uBA3C\uC800 \uC124\uC815\uC5D0\uC11C \uC778\uB371\uC2F1\uC744 \uD65C\uC131\uD654\uD574 \uC8FC\uC138\uC694");
      return;
    }
    if (!this.indexer) {
      await this.initializeIndexing();
    }
    if (!this.vaultWatcher) {
      new import_obsidian11.Notice("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
      return;
    }
    const progressModal = new IndexingProgressModal(this.app, () => {
      var _a;
      (_a = this.vaultWatcher) == null ? void 0 : _a.cancelIndexing();
    });
    progressModal.open();
    try {
      await this.vaultWatcher.indexVault((progress) => {
        progressModal.updateProgress(progress);
      });
    } catch (error) {
      console.error("\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC2E4\uD328:", error);
      new import_obsidian11.Notice("\uBCFC\uD2B8 \uC778\uB371\uC2F1\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4");
      progressModal.close();
    }
  }
  /**
   *   
   */
  async search(query) {
    if (!this.indexer) {
      throw new Error("\uC778\uB371\uC2F1\uC774 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    const searchResults = await this.indexer.search(query);
    return this.indexer.getSearchResultsWithMetadata(searchResults);
  }
  async openChatView() {
    const existingLeaf = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVL_CHAT)[0];
    const leaf = existingLeaf != null ? existingLeaf : this.app.workspace.getRightLeaf(false);
    if (!leaf) {
      new import_obsidian11.Notice("\uB300\uD654 \uCC3D\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    await leaf.setViewState({ type: VIEW_TYPE_OVL_CHAT, active: true });
    this.app.workspace.revealLeaf(leaf);
  }
  async requestAssistantReply(turns) {
    if (!this.apiClient) {
      throw new Error("API \uD074\uB77C\uC774\uC5B8\uD2B8\uB97C \uCD08\uAE30\uD654\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    return this.apiClient.requestAssistantReply(turns);
  }
  async requestTitleReply(prompt) {
    if (!this.apiClient) {
      throw new Error("API \uD074\uB77C\uC774\uC5B8\uD2B8\uB97C \uCD08\uAE30\uD654\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    return this.apiClient.requestTitleReply(prompt);
  }
  async saveConversationFromTurns(sessionId, turns, outputFolder) {
    return saveConversationFromTurns(this.app.vault, sessionId, turns, outputFolder);
  }
  async loadSettings() {
    this.settings = { ...DEFAULT_SETTINGS, ...await this.loadData() };
    let changed = false;
    if (this.settings.embeddingProvider === "local") {
      this.settings.embeddingProvider = "gemini";
      this.settings.embeddingModel = EMBEDDING_PRESETS.gemini.model;
      changed = true;
    }
    if (changed) {
      await this.saveSettings();
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async handleSaveConversation(form) {
    try {
      if (!form.inputPath) {
        new import_obsidian11.Notice("JSON \uD30C\uC77C \uACBD\uB85C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
        return;
      }
      if (!form.sessionId) {
        new import_obsidian11.Notice("\uC138\uC158 ID\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
        return;
      }
      const jsonPath = (0, import_obsidian11.normalizePath)(form.inputPath).replace(/^\/+/, "");
      const jsonExists = await this.app.vault.adapter.exists(jsonPath);
      if (!jsonExists) {
        new import_obsidian11.Notice("JSON \uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const jsonContent = await this.app.vault.adapter.read(jsonPath);
      const turns = parseTurns(jsonContent);
      const outputFolder = form.outputFolder ? (0, import_obsidian11.normalizePath)(form.outputFolder).replace(/^\/+/, "") : "";
      const targetPath = await saveConversationFromTurns(
        this.app.vault,
        form.sessionId,
        turns,
        outputFolder
      );
      new import_obsidian11.Notice(`\uB300\uD654 \uC800\uC7A5 \uC644\uB8CC: ${targetPath}`);
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian11.Notice(`\uC800\uC7A5 \uC2E4\uD328: ${message}`);
    }
  }
  /**
   *    (  )
   */
  async indexVaultAll() {
    if (!this.settings.indexingEnabled) {
      throw new Error("\uC778\uB371\uC2F1\uC774 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    if (!this.indexer) {
      await this.initializeIndexing();
    }
    if (!this.vaultWatcher) {
      throw new Error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      console.log("\uC804\uCCB4 \uBCFC\uD2B8 \uC784\uBCA0\uB529 \uC2DC\uC791...");
      await this.vaultWatcher.indexVault();
      console.log("\uC804\uCCB4 \uBCFC\uD2B8 \uC784\uBCA0\uB529 \uC644\uB8CC");
    } catch (error) {
      console.error("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *    ( )
   */
  async indexNewFilesOnly() {
    if (!this.settings.indexingEnabled) {
      throw new Error("\uC778\uB371\uC2F1\uC774 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    if (!this.indexer) {
      await this.initializeIndexing();
    }
    if (!this.vaultWatcher) {
      throw new Error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      console.log("\uC2E0\uADDC \uD30C\uC77C \uC784\uBCA0\uB529 \uC2DC\uC791...");
      const allFiles = this.app.vault.getMarkdownFiles();
      let indexed = 0;
      for (const file of allFiles) {
        try {
          const content = await this.app.vault.cachedRead(file);
          if (this.indexer) {
            await this.indexer.indexFile(file.path, content);
          }
          indexed++;
        } catch (error) {
          console.warn(`\uD30C\uC77C \uC784\uBCA0\uB529 \uC2E4\uD328: ${file.path}`, error);
        }
      }
      console.log(`\uC2E0\uADDC \uD30C\uC77C \uC784\uBCA0\uB529 \uC644\uB8CC: ${indexed}\uAC1C \uD30C\uC77C \uCC98\uB9AC`);
    } catch (error) {
      console.error("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *  API URL 
   */
  getEmbeddingApiUrl() {
    const preset = EMBEDDING_PRESETS[this.settings.embeddingProvider];
    return preset == null ? void 0 : preset.apiUrl;
  }
};
/*! Bundled license information:

is-extendable/index.js:
  (*!
   * is-extendable <https://github.com/jonschlinkert/is-extendable>
   *
   * Copyright (c) 2015, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

strip-bom-string/index.js:
  (*!
   * strip-bom-string <https://github.com/jonschlinkert/strip-bom-string>
   *
   * Copyright (c) 2015, 2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

@google/generative-ai/dist/index.mjs:
@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2JldHRlci1zcWxpdGUzL2xpYi91dGlsLmpzIiwgIm5vZGVfbW9kdWxlcy9iZXR0ZXItc3FsaXRlMy9saWIvc3FsaXRlLWVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9maWxlLXVyaS10by1wYXRoL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9iaW5kaW5ncy9iaW5kaW5ncy5qcyIsICJub2RlX21vZHVsZXMvYmV0dGVyLXNxbGl0ZTMvbGliL21ldGhvZHMvd3JhcHBlcnMuanMiLCAibm9kZV9tb2R1bGVzL2JldHRlci1zcWxpdGUzL2xpYi9tZXRob2RzL3RyYW5zYWN0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9iZXR0ZXItc3FsaXRlMy9saWIvbWV0aG9kcy9wcmFnbWEuanMiLCAibm9kZV9tb2R1bGVzL2JldHRlci1zcWxpdGUzL2xpYi9tZXRob2RzL2JhY2t1cC5qcyIsICJub2RlX21vZHVsZXMvYmV0dGVyLXNxbGl0ZTMvbGliL21ldGhvZHMvc2VyaWFsaXplLmpzIiwgIm5vZGVfbW9kdWxlcy9iZXR0ZXItc3FsaXRlMy9saWIvbWV0aG9kcy9mdW5jdGlvbi5qcyIsICJub2RlX21vZHVsZXMvYmV0dGVyLXNxbGl0ZTMvbGliL21ldGhvZHMvYWdncmVnYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy9iZXR0ZXItc3FsaXRlMy9saWIvbWV0aG9kcy90YWJsZS5qcyIsICJub2RlX21vZHVsZXMvYmV0dGVyLXNxbGl0ZTMvbGliL21ldGhvZHMvaW5zcGVjdC5qcyIsICJub2RlX21vZHVsZXMvYmV0dGVyLXNxbGl0ZTMvbGliL2RhdGFiYXNlLmpzIiwgIm5vZGVfbW9kdWxlcy9iZXR0ZXItc3FsaXRlMy9saWIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2tpbmQtb2YvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2lzLWV4dGVuZGFibGUvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2V4dGVuZC1zaGFsbG93L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9zZWN0aW9uLW1hdHRlci9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9jb21tb24uanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvZXhjZXB0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL21hcmsuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9zdHIuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9zZXEuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9tYXAuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvc2NoZW1hL2ZhaWxzYWZlLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvbnVsbC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL2Jvb2wuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9pbnQuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9mbG9hdC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEvanNvbi5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEvY29yZS5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL3RpbWVzdGFtcC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL21lcmdlLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvYmluYXJ5LmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvb21hcC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL3BhaXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvc2V0LmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3NjaGVtYS9kZWZhdWx0X3NhZmUuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9qcy91bmRlZmluZWQuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9qcy9yZWdleHAuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9qcy9mdW5jdGlvbi5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEvZGVmYXVsdF9mdWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL2xvYWRlci5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9kdW1wZXIuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2xpYi9lbmdpbmVzLmpzIiwgIm5vZGVfbW9kdWxlcy9zdHJpcC1ib20tc3RyaW5nL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9ncmF5LW1hdHRlci9saWIvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2xpYi9kZWZhdWx0cy5qcyIsICJub2RlX21vZHVsZXMvZ3JheS1tYXR0ZXIvbGliL2VuZ2luZS5qcyIsICJub2RlX21vZHVsZXMvZ3JheS1tYXR0ZXIvbGliL3N0cmluZ2lmeS5qcyIsICJub2RlX21vZHVsZXMvZ3JheS1tYXR0ZXIvbGliL2V4Y2VycHQuanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2xpYi90by1maWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9ncmF5LW1hdHRlci9saWIvcGFyc2UuanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2luZGV4LmpzIiwgInNyYy9tYWluLnRzIiwgInNyYy9jb252ZXJzYXRpb25TdG9yZS50cyIsICJzcmMvY29udmVyc2F0aW9uLnRzIiwgInNyYy9hcGkudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9sb2dnaW5nLnRzIiwgInNyYy9tb2RhbHMvc2F2ZUNvbnZlcnNhdGlvbk1vZGFsLnRzIiwgInNyYy9tb2RhbHMvaW5kZXhpbmdQcm9ncmVzc01vZGFsLnRzIiwgInNyYy9wYXJzZVR1cm5zLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvdmlld3MvY2hhdFZpZXcudHMiLCAic3JjL3RvcGljU2VwYXJhdGlvbi9rZXl3b3JkRXh0cmFjdG9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AZ29vZ2xlL2dlbmVyYXRpdmUtYWkvZGlzdC9pbmRleC5tanMiLCAic3JjL3RvcGljU2VwYXJhdGlvbi9lbWJlZGRpbmdTZXJ2aWNlLnRzIiwgInNyYy90b3BpY1NlcGFyYXRpb24vdG9waWNTZXBhcmF0aW9uRW5naW5lLnRzIiwgInNyYy90b3BpY1NlcGFyYXRpb24vbXVsdGlOb3RlU2F2ZXIudHMiLCAic3JjL2luZGV4aW5nL21ldGFkYXRhU3RvcmUudHMiLCAic3JjL2luZGV4aW5nL3ZlY3RvclN0b3JlLnRzIiwgInNyYy9pbmRleGluZy9lbWJlZGRpbmdzLnRzIiwgInNyYy9pbmRleGluZy9wYXJzZXIudHMiLCAic3JjL2luZGV4aW5nL2NodW5rZXIudHMiLCAic3JjL2luZGV4aW5nL2luZGV4ZXIudHMiLCAic3JjL3ZhdWx0V2F0Y2hlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmdldEJvb2xlYW5PcHRpb24gPSAob3B0aW9ucywga2V5KSA9PiB7XG5cdGxldCB2YWx1ZSA9IGZhbHNlO1xuXHRpZiAoa2V5IGluIG9wdGlvbnMgJiYgdHlwZW9mICh2YWx1ZSA9IG9wdGlvbnNba2V5XSkgIT09ICdib29sZWFuJykge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIHRoZSBcIiR7a2V5fVwiIG9wdGlvbiB0byBiZSBhIGJvb2xlYW5gKTtcblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59O1xuXG5leHBvcnRzLmNwcGRiID0gU3ltYm9sKCk7XG5leHBvcnRzLmluc3BlY3QgPSBTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpO1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IGRlc2NyaXB0b3IgPSB7IHZhbHVlOiAnU3FsaXRlRXJyb3InLCB3cml0YWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9O1xuXG5mdW5jdGlvbiBTcWxpdGVFcnJvcihtZXNzYWdlLCBjb2RlKSB7XG5cdGlmIChuZXcudGFyZ2V0ICE9PSBTcWxpdGVFcnJvcikge1xuXHRcdHJldHVybiBuZXcgU3FsaXRlRXJyb3IobWVzc2FnZSwgY29kZSk7XG5cdH1cblx0aWYgKHR5cGVvZiBjb2RlICE9PSAnc3RyaW5nJykge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHNlY29uZCBhcmd1bWVudCB0byBiZSBhIHN0cmluZycpO1xuXHR9XG5cdEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cdGRlc2NyaXB0b3IudmFsdWUgPSAnJyArIG1lc3NhZ2U7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIGRlc2NyaXB0b3IpO1xuXHRFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBTcWxpdGVFcnJvcik7XG5cdHRoaXMuY29kZSA9IGNvZGU7XG59XG5PYmplY3Quc2V0UHJvdG90eXBlT2YoU3FsaXRlRXJyb3IsIEVycm9yKTtcbk9iamVjdC5zZXRQcm90b3R5cGVPZihTcWxpdGVFcnJvci5wcm90b3R5cGUsIEVycm9yLnByb3RvdHlwZSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3FsaXRlRXJyb3IucHJvdG90eXBlLCAnbmFtZScsIGRlc2NyaXB0b3IpO1xubW9kdWxlLmV4cG9ydHMgPSBTcWxpdGVFcnJvcjtcbiIsICJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgc2VwID0gcmVxdWlyZSgncGF0aCcpLnNlcCB8fCAnLyc7XG5cbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmaWxlVXJpVG9QYXRoO1xuXG4vKipcbiAqIEZpbGUgVVJJIHRvIFBhdGggZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVyaVxuICogQHJldHVybiB7U3RyaW5nfSBwYXRoXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGZpbGVVcmlUb1BhdGggKHVyaSkge1xuICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIHVyaSB8fFxuICAgICAgdXJpLmxlbmd0aCA8PSA3IHx8XG4gICAgICAnZmlsZTovLycgIT0gdXJpLnN1YnN0cmluZygwLCA3KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3QgcGFzcyBpbiBhIGZpbGU6Ly8gVVJJIHRvIGNvbnZlcnQgdG8gYSBmaWxlIHBhdGgnKTtcbiAgfVxuXG4gIHZhciByZXN0ID0gZGVjb2RlVVJJKHVyaS5zdWJzdHJpbmcoNykpO1xuICB2YXIgZmlyc3RTbGFzaCA9IHJlc3QuaW5kZXhPZignLycpO1xuICB2YXIgaG9zdCA9IHJlc3Quc3Vic3RyaW5nKDAsIGZpcnN0U2xhc2gpO1xuICB2YXIgcGF0aCA9IHJlc3Quc3Vic3RyaW5nKGZpcnN0U2xhc2ggKyAxKTtcblxuICAvLyAyLiAgU2NoZW1lIERlZmluaXRpb25cbiAgLy8gQXMgYSBzcGVjaWFsIGNhc2UsIDxob3N0PiBjYW4gYmUgdGhlIHN0cmluZyBcImxvY2FsaG9zdFwiIG9yIHRoZSBlbXB0eVxuICAvLyBzdHJpbmc7IHRoaXMgaXMgaW50ZXJwcmV0ZWQgYXMgXCJ0aGUgbWFjaGluZSBmcm9tIHdoaWNoIHRoZSBVUkwgaXNcbiAgLy8gYmVpbmcgaW50ZXJwcmV0ZWRcIi5cbiAgaWYgKCdsb2NhbGhvc3QnID09IGhvc3QpIGhvc3QgPSAnJztcblxuICBpZiAoaG9zdCkge1xuICAgIGhvc3QgPSBzZXAgKyBzZXAgKyBob3N0O1xuICB9XG5cbiAgLy8gMy4yICBEcml2ZXMsIGRyaXZlIGxldHRlcnMsIG1vdW50IHBvaW50cywgZmlsZSBzeXN0ZW0gcm9vdFxuICAvLyBEcml2ZSBsZXR0ZXJzIGFyZSBtYXBwZWQgaW50byB0aGUgdG9wIG9mIGEgZmlsZSBVUkkgaW4gdmFyaW91cyB3YXlzLFxuICAvLyBkZXBlbmRpbmcgb24gdGhlIGltcGxlbWVudGF0aW9uOyBzb21lIGFwcGxpY2F0aW9ucyBzdWJzdGl0dXRlXG4gIC8vIHZlcnRpY2FsIGJhciAoXCJ8XCIpIGZvciB0aGUgY29sb24gYWZ0ZXIgdGhlIGRyaXZlIGxldHRlciwgeWllbGRpbmdcbiAgLy8gXCJmaWxlOi8vL2N8L3RtcC90ZXN0LnR4dFwiLiAgSW4gc29tZSBjYXNlcywgdGhlIGNvbG9uIGlzIGxlZnRcbiAgLy8gdW5jaGFuZ2VkLCBhcyBpbiBcImZpbGU6Ly8vYzovdG1wL3Rlc3QudHh0XCIuICBJbiBvdGhlciBjYXNlcywgdGhlXG4gIC8vIGNvbG9uIGlzIHNpbXBseSBvbWl0dGVkLCBhcyBpbiBcImZpbGU6Ly8vYy90bXAvdGVzdC50eHRcIi5cbiAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXiguKylcXHwvLCAnJDE6Jyk7XG5cbiAgLy8gZm9yIFdpbmRvd3MsIHdlIG5lZWQgdG8gaW52ZXJ0IHRoZSBwYXRoIHNlcGFyYXRvcnMgZnJvbSB3aGF0IGEgVVJJIHVzZXNcbiAgaWYgKHNlcCA9PSAnXFxcXCcpIHtcbiAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC8vZywgJ1xcXFwnKTtcbiAgfVxuXG4gIGlmICgvXi4rXFw6Ly50ZXN0KHBhdGgpKSB7XG4gICAgLy8gaGFzIFdpbmRvd3MgZHJpdmUgYXQgYmVnaW5uaW5nIG9mIHBhdGhcbiAgfSBlbHNlIHtcbiAgICAvLyB1bml4IHBhdGhcdTIwMjZcbiAgICBwYXRoID0gc2VwICsgcGF0aDtcbiAgfVxuXG4gIHJldHVybiBob3N0ICsgcGF0aDtcbn1cbiIsICIvKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIGZzID0gcmVxdWlyZSgnZnMnKSxcbiAgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKSxcbiAgZmlsZVVSTFRvUGF0aCA9IHJlcXVpcmUoJ2ZpbGUtdXJpLXRvLXBhdGgnKSxcbiAgam9pbiA9IHBhdGguam9pbixcbiAgZGlybmFtZSA9IHBhdGguZGlybmFtZSxcbiAgZXhpc3RzID1cbiAgICAoZnMuYWNjZXNzU3luYyAmJlxuICAgICAgZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZzLmFjY2Vzc1N5bmMocGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KSB8fFxuICAgIGZzLmV4aXN0c1N5bmMgfHxcbiAgICBwYXRoLmV4aXN0c1N5bmMsXG4gIGRlZmF1bHRzID0ge1xuICAgIGFycm93OiBwcm9jZXNzLmVudi5OT0RFX0JJTkRJTkdTX0FSUk9XIHx8ICcgXHUyMTkyICcsXG4gICAgY29tcGlsZWQ6IHByb2Nlc3MuZW52Lk5PREVfQklORElOR1NfQ09NUElMRURfRElSIHx8ICdjb21waWxlZCcsXG4gICAgcGxhdGZvcm06IHByb2Nlc3MucGxhdGZvcm0sXG4gICAgYXJjaDogcHJvY2Vzcy5hcmNoLFxuICAgIG5vZGVQcmVHeXA6XG4gICAgICAnbm9kZS12JyArXG4gICAgICBwcm9jZXNzLnZlcnNpb25zLm1vZHVsZXMgK1xuICAgICAgJy0nICtcbiAgICAgIHByb2Nlc3MucGxhdGZvcm0gK1xuICAgICAgJy0nICtcbiAgICAgIHByb2Nlc3MuYXJjaCxcbiAgICB2ZXJzaW9uOiBwcm9jZXNzLnZlcnNpb25zLm5vZGUsXG4gICAgYmluZGluZ3M6ICdiaW5kaW5ncy5ub2RlJyxcbiAgICB0cnk6IFtcbiAgICAgIC8vIG5vZGUtZ3lwJ3MgbGlua2VkIHZlcnNpb24gaW4gdGhlIFwiYnVpbGRcIiBkaXJcbiAgICAgIFsnbW9kdWxlX3Jvb3QnLCAnYnVpbGQnLCAnYmluZGluZ3MnXSxcbiAgICAgIC8vIG5vZGUtd2FmIGFuZCBneXBfYWRkb24gKGEuay5hIG5vZGUtZ3lwKVxuICAgICAgWydtb2R1bGVfcm9vdCcsICdidWlsZCcsICdEZWJ1ZycsICdiaW5kaW5ncyddLFxuICAgICAgWydtb2R1bGVfcm9vdCcsICdidWlsZCcsICdSZWxlYXNlJywgJ2JpbmRpbmdzJ10sXG4gICAgICAvLyBEZWJ1ZyBmaWxlcywgZm9yIGRldmVsb3BtZW50IChsZWdhY3kgYmVoYXZpb3IsIHJlbW92ZSBmb3Igbm9kZSB2MC45KVxuICAgICAgWydtb2R1bGVfcm9vdCcsICdvdXQnLCAnRGVidWcnLCAnYmluZGluZ3MnXSxcbiAgICAgIFsnbW9kdWxlX3Jvb3QnLCAnRGVidWcnLCAnYmluZGluZ3MnXSxcbiAgICAgIC8vIFJlbGVhc2UgZmlsZXMsIGJ1dCBtYW51YWxseSBjb21waWxlZCAobGVnYWN5IGJlaGF2aW9yLCByZW1vdmUgZm9yIG5vZGUgdjAuOSlcbiAgICAgIFsnbW9kdWxlX3Jvb3QnLCAnb3V0JywgJ1JlbGVhc2UnLCAnYmluZGluZ3MnXSxcbiAgICAgIFsnbW9kdWxlX3Jvb3QnLCAnUmVsZWFzZScsICdiaW5kaW5ncyddLFxuICAgICAgLy8gTGVnYWN5IGZyb20gbm9kZS13YWYsIG5vZGUgPD0gMC40LnhcbiAgICAgIFsnbW9kdWxlX3Jvb3QnLCAnYnVpbGQnLCAnZGVmYXVsdCcsICdiaW5kaW5ncyddLFxuICAgICAgLy8gUHJvZHVjdGlvbiBcIlJlbGVhc2VcIiBidWlsZHR5cGUgYmluYXJ5IChtZWguLi4pXG4gICAgICBbJ21vZHVsZV9yb290JywgJ2NvbXBpbGVkJywgJ3ZlcnNpb24nLCAncGxhdGZvcm0nLCAnYXJjaCcsICdiaW5kaW5ncyddLFxuICAgICAgLy8gbm9kZS1xYnMgYnVpbGRzXG4gICAgICBbJ21vZHVsZV9yb290JywgJ2FkZG9uLWJ1aWxkJywgJ3JlbGVhc2UnLCAnaW5zdGFsbC1yb290JywgJ2JpbmRpbmdzJ10sXG4gICAgICBbJ21vZHVsZV9yb290JywgJ2FkZG9uLWJ1aWxkJywgJ2RlYnVnJywgJ2luc3RhbGwtcm9vdCcsICdiaW5kaW5ncyddLFxuICAgICAgWydtb2R1bGVfcm9vdCcsICdhZGRvbi1idWlsZCcsICdkZWZhdWx0JywgJ2luc3RhbGwtcm9vdCcsICdiaW5kaW5ncyddLFxuICAgICAgLy8gbm9kZS1wcmUtZ3lwIHBhdGggLi9saWIvYmluZGluZy97bm9kZV9hYml9LXtwbGF0Zm9ybX0te2FyY2h9XG4gICAgICBbJ21vZHVsZV9yb290JywgJ2xpYicsICdiaW5kaW5nJywgJ25vZGVQcmVHeXAnLCAnYmluZGluZ3MnXVxuICAgIF1cbiAgfTtcblxuLyoqXG4gKiBUaGUgbWFpbiBgYmluZGluZ3MoKWAgZnVuY3Rpb24gbG9hZHMgdGhlIGNvbXBpbGVkIGJpbmRpbmdzIGZvciBhIGdpdmVuIG1vZHVsZS5cbiAqIEl0IHVzZXMgVjgncyBFcnJvciBBUEkgdG8gZGV0ZXJtaW5lIHRoZSBwYXJlbnQgZmlsZW5hbWUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzXG4gKiBiZWluZyBpbnZva2VkIGZyb20sIHdoaWNoIGlzIHRoZW4gdXNlZCB0byBmaW5kIHRoZSByb290IGRpcmVjdG9yeS5cbiAqL1xuXG5mdW5jdGlvbiBiaW5kaW5ncyhvcHRzKSB7XG4gIC8vIEFyZ3VtZW50IHN1cmdlcnlcbiAgaWYgKHR5cGVvZiBvcHRzID09ICdzdHJpbmcnKSB7XG4gICAgb3B0cyA9IHsgYmluZGluZ3M6IG9wdHMgfTtcbiAgfSBlbHNlIGlmICghb3B0cykge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIC8vIG1hcHMgYGRlZmF1bHRzYCBvbnRvIGBvcHRzYCBvYmplY3RcbiAgT2JqZWN0LmtleXMoZGVmYXVsdHMpLm1hcChmdW5jdGlvbihpKSB7XG4gICAgaWYgKCEoaSBpbiBvcHRzKSkgb3B0c1tpXSA9IGRlZmF1bHRzW2ldO1xuICB9KTtcblxuICAvLyBHZXQgdGhlIG1vZHVsZSByb290XG4gIGlmICghb3B0cy5tb2R1bGVfcm9vdCkge1xuICAgIG9wdHMubW9kdWxlX3Jvb3QgPSBleHBvcnRzLmdldFJvb3QoZXhwb3J0cy5nZXRGaWxlTmFtZSgpKTtcbiAgfVxuXG4gIC8vIEVuc3VyZSB0aGUgZ2l2ZW4gYmluZGluZ3MgbmFtZSBlbmRzIHdpdGggLm5vZGVcbiAgaWYgKHBhdGguZXh0bmFtZShvcHRzLmJpbmRpbmdzKSAhPSAnLm5vZGUnKSB7XG4gICAgb3B0cy5iaW5kaW5ncyArPSAnLm5vZGUnO1xuICB9XG5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2svd2VicGFjay9pc3N1ZXMvNDE3NSNpc3N1ZWNvbW1lbnQtMzQyOTMxMDM1XG4gIHZhciByZXF1aXJlRnVuYyA9XG4gICAgdHlwZW9mIF9fd2VicGFja19yZXF1aXJlX18gPT09ICdmdW5jdGlvbidcbiAgICAgID8gX19ub25fd2VicGFja19yZXF1aXJlX19cbiAgICAgIDogcmVxdWlyZTtcblxuICB2YXIgdHJpZXMgPSBbXSxcbiAgICBpID0gMCxcbiAgICBsID0gb3B0cy50cnkubGVuZ3RoLFxuICAgIG4sXG4gICAgYixcbiAgICBlcnI7XG5cbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBuID0gam9pbi5hcHBseShcbiAgICAgIG51bGwsXG4gICAgICBvcHRzLnRyeVtpXS5tYXAoZnVuY3Rpb24ocCkge1xuICAgICAgICByZXR1cm4gb3B0c1twXSB8fCBwO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRyaWVzLnB1c2gobik7XG4gICAgdHJ5IHtcbiAgICAgIGIgPSBvcHRzLnBhdGggPyByZXF1aXJlRnVuYy5yZXNvbHZlKG4pIDogcmVxdWlyZUZ1bmMobik7XG4gICAgICBpZiAoIW9wdHMucGF0aCkge1xuICAgICAgICBiLnBhdGggPSBuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGI7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUuY29kZSAhPT0gJ01PRFVMRV9OT1RfRk9VTkQnICYmXG4gICAgICAgICAgZS5jb2RlICE9PSAnUVVBTElGSUVEX1BBVEhfUkVTT0xVVElPTl9GQUlMRUQnICYmXG4gICAgICAgICAgIS9ub3QgZmluZC9pLnRlc3QoZS5tZXNzYWdlKSkge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGVyciA9IG5ldyBFcnJvcihcbiAgICAnQ291bGQgbm90IGxvY2F0ZSB0aGUgYmluZGluZ3MgZmlsZS4gVHJpZWQ6XFxuJyArXG4gICAgICB0cmllc1xuICAgICAgICAubWFwKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICByZXR1cm4gb3B0cy5hcnJvdyArIGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCdcXG4nKVxuICApO1xuICBlcnIudHJpZXMgPSB0cmllcztcbiAgdGhyb3cgZXJyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gYmluZGluZ3M7XG5cbi8qKlxuICogR2V0cyB0aGUgZmlsZW5hbWUgb2YgdGhlIEphdmFTY3JpcHQgZmlsZSB0aGF0IGludm9rZXMgdGhpcyBmdW5jdGlvbi5cbiAqIFVzZWQgdG8gaGVscCBmaW5kIHRoZSByb290IGRpcmVjdG9yeSBvZiBhIG1vZHVsZS5cbiAqIE9wdGlvbmFsbHkgYWNjZXB0cyBhbiBmaWxlbmFtZSBhcmd1bWVudCB0byBza2lwIHdoZW4gc2VhcmNoaW5nIGZvciB0aGUgaW52b2tpbmcgZmlsZW5hbWVcbiAqL1xuXG5leHBvcnRzLmdldEZpbGVOYW1lID0gZnVuY3Rpb24gZ2V0RmlsZU5hbWUoY2FsbGluZ19maWxlKSB7XG4gIHZhciBvcmlnUFNUID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UsXG4gICAgb3JpZ1NUTCA9IEVycm9yLnN0YWNrVHJhY2VMaW1pdCxcbiAgICBkdW1teSA9IHt9LFxuICAgIGZpbGVOYW1lO1xuXG4gIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9IDEwO1xuXG4gIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gZnVuY3Rpb24oZSwgc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZmlsZU5hbWUgPSBzdFtpXS5nZXRGaWxlTmFtZSgpO1xuICAgICAgaWYgKGZpbGVOYW1lICE9PSBfX2ZpbGVuYW1lKSB7XG4gICAgICAgIGlmIChjYWxsaW5nX2ZpbGUpIHtcbiAgICAgICAgICBpZiAoZmlsZU5hbWUgIT09IGNhbGxpbmdfZmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gcnVuIHRoZSAncHJlcGFyZVN0YWNrVHJhY2UnIGZ1bmN0aW9uIGFib3ZlXG4gIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGR1bW15KTtcbiAgZHVtbXkuc3RhY2s7XG5cbiAgLy8gY2xlYW51cFxuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IG9yaWdQU1Q7XG4gIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9IG9yaWdTVEw7XG5cbiAgLy8gaGFuZGxlIGZpbGVuYW1lIHRoYXQgc3RhcnRzIHdpdGggXCJmaWxlOi8vXCJcbiAgdmFyIGZpbGVTY2hlbWEgPSAnZmlsZTovLyc7XG4gIGlmIChmaWxlTmFtZS5pbmRleE9mKGZpbGVTY2hlbWEpID09PSAwKSB7XG4gICAgZmlsZU5hbWUgPSBmaWxlVVJMVG9QYXRoKGZpbGVOYW1lKTtcbiAgfVxuXG4gIHJldHVybiBmaWxlTmFtZTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgYSBtb2R1bGUsIGdpdmVuIGFuIGFyYml0cmFyeSBmaWxlbmFtZVxuICogc29tZXdoZXJlIGluIHRoZSBtb2R1bGUgdHJlZS4gVGhlIFwicm9vdCBkaXJlY3RvcnlcIiBpcyB0aGUgZGlyZWN0b3J5XG4gKiBjb250YWluaW5nIHRoZSBgcGFja2FnZS5qc29uYCBmaWxlLlxuICpcbiAqICAgSW46ICAvaG9tZS9uYXRlL25vZGUtbmF0aXZlLW1vZHVsZS9saWIvaW5kZXguanNcbiAqICAgT3V0OiAvaG9tZS9uYXRlL25vZGUtbmF0aXZlLW1vZHVsZVxuICovXG5cbmV4cG9ydHMuZ2V0Um9vdCA9IGZ1bmN0aW9uIGdldFJvb3QoZmlsZSkge1xuICB2YXIgZGlyID0gZGlybmFtZShmaWxlKSxcbiAgICBwcmV2O1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGlmIChkaXIgPT09ICcuJykge1xuICAgICAgLy8gQXZvaWRzIGFuIGluZmluaXRlIGxvb3AgaW4gcmFyZSBjYXNlcywgbGlrZSB0aGUgUkVQTFxuICAgICAgZGlyID0gcHJvY2Vzcy5jd2QoKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZXhpc3RzKGpvaW4oZGlyLCAncGFja2FnZS5qc29uJykpIHx8XG4gICAgICBleGlzdHMoam9pbihkaXIsICdub2RlX21vZHVsZXMnKSlcbiAgICApIHtcbiAgICAgIC8vIEZvdW5kIHRoZSAncGFja2FnZS5qc29uJyBmaWxlIG9yICdub2RlX21vZHVsZXMnIGRpcjsgd2UncmUgZG9uZVxuICAgICAgcmV0dXJuIGRpcjtcbiAgICB9XG4gICAgaWYgKHByZXYgPT09IGRpcikge1xuICAgICAgLy8gR290IHRvIHRoZSB0b3BcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0NvdWxkIG5vdCBmaW5kIG1vZHVsZSByb290IGdpdmVuIGZpbGU6IFwiJyArXG4gICAgICAgICAgZmlsZSArXG4gICAgICAgICAgJ1wiLiBEbyB5b3UgaGF2ZSBhIGBwYWNrYWdlLmpzb25gIGZpbGU/ICdcbiAgICAgICk7XG4gICAgfVxuICAgIC8vIFRyeSB0aGUgcGFyZW50IGRpciBuZXh0XG4gICAgcHJldiA9IGRpcjtcbiAgICBkaXIgPSBqb2luKGRpciwgJy4uJyk7XG4gIH1cbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuY29uc3QgeyBjcHBkYiB9ID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xuXG5leHBvcnRzLnByZXBhcmUgPSBmdW5jdGlvbiBwcmVwYXJlKHNxbCkge1xuXHRyZXR1cm4gdGhpc1tjcHBkYl0ucHJlcGFyZShzcWwsIHRoaXMsIGZhbHNlKTtcbn07XG5cbmV4cG9ydHMuZXhlYyA9IGZ1bmN0aW9uIGV4ZWMoc3FsKSB7XG5cdHRoaXNbY3BwZGJdLmV4ZWMoc3FsKTtcblx0cmV0dXJuIHRoaXM7XG59O1xuXG5leHBvcnRzLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XG5cdHRoaXNbY3BwZGJdLmNsb3NlKCk7XG5cdHJldHVybiB0aGlzO1xufTtcblxuZXhwb3J0cy5sb2FkRXh0ZW5zaW9uID0gZnVuY3Rpb24gbG9hZEV4dGVuc2lvbiguLi5hcmdzKSB7XG5cdHRoaXNbY3BwZGJdLmxvYWRFeHRlbnNpb24oLi4uYXJncyk7XG5cdHJldHVybiB0aGlzO1xufTtcblxuZXhwb3J0cy5kZWZhdWx0U2FmZUludGVnZXJzID0gZnVuY3Rpb24gZGVmYXVsdFNhZmVJbnRlZ2VycyguLi5hcmdzKSB7XG5cdHRoaXNbY3BwZGJdLmRlZmF1bHRTYWZlSW50ZWdlcnMoLi4uYXJncyk7XG5cdHJldHVybiB0aGlzO1xufTtcblxuZXhwb3J0cy51bnNhZmVNb2RlID0gZnVuY3Rpb24gdW5zYWZlTW9kZSguLi5hcmdzKSB7XG5cdHRoaXNbY3BwZGJdLnVuc2FmZU1vZGUoLi4uYXJncyk7XG5cdHJldHVybiB0aGlzO1xufTtcblxuZXhwb3J0cy5nZXR0ZXJzID0ge1xuXHRuYW1lOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiBuYW1lKCkgeyByZXR1cm4gdGhpc1tjcHBkYl0ubmFtZTsgfSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHR9LFxuXHRvcGVuOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiBvcGVuKCkgeyByZXR1cm4gdGhpc1tjcHBkYl0ub3BlbjsgfSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHR9LFxuXHRpblRyYW5zYWN0aW9uOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiBpblRyYW5zYWN0aW9uKCkgeyByZXR1cm4gdGhpc1tjcHBkYl0uaW5UcmFuc2FjdGlvbjsgfSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHR9LFxuXHRyZWFkb25seToge1xuXHRcdGdldDogZnVuY3Rpb24gcmVhZG9ubHkoKSB7IHJldHVybiB0aGlzW2NwcGRiXS5yZWFkb25seTsgfSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHR9LFxuXHRtZW1vcnk6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uIG1lbW9yeSgpIHsgcmV0dXJuIHRoaXNbY3BwZGJdLm1lbW9yeTsgfSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHR9LFxufTtcbiIsICIndXNlIHN0cmljdCc7XG5jb25zdCB7IGNwcGRiIH0gPSByZXF1aXJlKCcuLi91dGlsJyk7XG5jb25zdCBjb250cm9sbGVycyA9IG5ldyBXZWFrTWFwKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNhY3Rpb24oZm4pIHtcblx0aWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgYSBmdW5jdGlvbicpO1xuXG5cdGNvbnN0IGRiID0gdGhpc1tjcHBkYl07XG5cdGNvbnN0IGNvbnRyb2xsZXIgPSBnZXRDb250cm9sbGVyKGRiLCB0aGlzKTtcblx0Y29uc3QgeyBhcHBseSB9ID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG5cdC8vIEVhY2ggdmVyc2lvbiBvZiB0aGUgdHJhbnNhY3Rpb24gZnVuY3Rpb24gaGFzIHRoZXNlIHNhbWUgcHJvcGVydGllc1xuXHRjb25zdCBwcm9wZXJ0aWVzID0ge1xuXHRcdGRlZmF1bHQ6IHsgdmFsdWU6IHdyYXBUcmFuc2FjdGlvbihhcHBseSwgZm4sIGRiLCBjb250cm9sbGVyLmRlZmF1bHQpIH0sXG5cdFx0ZGVmZXJyZWQ6IHsgdmFsdWU6IHdyYXBUcmFuc2FjdGlvbihhcHBseSwgZm4sIGRiLCBjb250cm9sbGVyLmRlZmVycmVkKSB9LFxuXHRcdGltbWVkaWF0ZTogeyB2YWx1ZTogd3JhcFRyYW5zYWN0aW9uKGFwcGx5LCBmbiwgZGIsIGNvbnRyb2xsZXIuaW1tZWRpYXRlKSB9LFxuXHRcdGV4Y2x1c2l2ZTogeyB2YWx1ZTogd3JhcFRyYW5zYWN0aW9uKGFwcGx5LCBmbiwgZGIsIGNvbnRyb2xsZXIuZXhjbHVzaXZlKSB9LFxuXHRcdGRhdGFiYXNlOiB7IHZhbHVlOiB0aGlzLCBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdH07XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvcGVydGllcy5kZWZhdWx0LnZhbHVlLCBwcm9wZXJ0aWVzKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvcGVydGllcy5kZWZlcnJlZC52YWx1ZSwgcHJvcGVydGllcyk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHByb3BlcnRpZXMuaW1tZWRpYXRlLnZhbHVlLCBwcm9wZXJ0aWVzKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvcGVydGllcy5leGNsdXNpdmUudmFsdWUsIHByb3BlcnRpZXMpO1xuXG5cdC8vIFJldHVybiB0aGUgZGVmYXVsdCB2ZXJzaW9uIG9mIHRoZSB0cmFuc2FjdGlvbiBmdW5jdGlvblxuXHRyZXR1cm4gcHJvcGVydGllcy5kZWZhdWx0LnZhbHVlO1xufTtcblxuLy8gUmV0dXJuIHRoZSBkYXRhYmFzZSdzIGNhY2hlZCB0cmFuc2FjdGlvbiBjb250cm9sbGVyLCBvciBjcmVhdGUgYSBuZXcgb25lXG5jb25zdCBnZXRDb250cm9sbGVyID0gKGRiLCBzZWxmKSA9PiB7XG5cdGxldCBjb250cm9sbGVyID0gY29udHJvbGxlcnMuZ2V0KGRiKTtcblx0aWYgKCFjb250cm9sbGVyKSB7XG5cdFx0Y29uc3Qgc2hhcmVkID0ge1xuXHRcdFx0Y29tbWl0OiBkYi5wcmVwYXJlKCdDT01NSVQnLCBzZWxmLCBmYWxzZSksXG5cdFx0XHRyb2xsYmFjazogZGIucHJlcGFyZSgnUk9MTEJBQ0snLCBzZWxmLCBmYWxzZSksXG5cdFx0XHRzYXZlcG9pbnQ6IGRiLnByZXBhcmUoJ1NBVkVQT0lOVCBgXFx0X2JzMy5cXHRgJywgc2VsZiwgZmFsc2UpLFxuXHRcdFx0cmVsZWFzZTogZGIucHJlcGFyZSgnUkVMRUFTRSBgXFx0X2JzMy5cXHRgJywgc2VsZiwgZmFsc2UpLFxuXHRcdFx0cm9sbGJhY2tUbzogZGIucHJlcGFyZSgnUk9MTEJBQ0sgVE8gYFxcdF9iczMuXFx0YCcsIHNlbGYsIGZhbHNlKSxcblx0XHR9O1xuXHRcdGNvbnRyb2xsZXJzLnNldChkYiwgY29udHJvbGxlciA9IHtcblx0XHRcdGRlZmF1bHQ6IE9iamVjdC5hc3NpZ24oeyBiZWdpbjogZGIucHJlcGFyZSgnQkVHSU4nLCBzZWxmLCBmYWxzZSkgfSwgc2hhcmVkKSxcblx0XHRcdGRlZmVycmVkOiBPYmplY3QuYXNzaWduKHsgYmVnaW46IGRiLnByZXBhcmUoJ0JFR0lOIERFRkVSUkVEJywgc2VsZiwgZmFsc2UpIH0sIHNoYXJlZCksXG5cdFx0XHRpbW1lZGlhdGU6IE9iamVjdC5hc3NpZ24oeyBiZWdpbjogZGIucHJlcGFyZSgnQkVHSU4gSU1NRURJQVRFJywgc2VsZiwgZmFsc2UpIH0sIHNoYXJlZCksXG5cdFx0XHRleGNsdXNpdmU6IE9iamVjdC5hc3NpZ24oeyBiZWdpbjogZGIucHJlcGFyZSgnQkVHSU4gRVhDTFVTSVZFJywgc2VsZiwgZmFsc2UpIH0sIHNoYXJlZCksXG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGNvbnRyb2xsZXI7XG59O1xuXG4vLyBSZXR1cm4gYSBuZXcgdHJhbnNhY3Rpb24gZnVuY3Rpb24gYnkgd3JhcHBpbmcgdGhlIGdpdmVuIGZ1bmN0aW9uXG5jb25zdCB3cmFwVHJhbnNhY3Rpb24gPSAoYXBwbHksIGZuLCBkYiwgeyBiZWdpbiwgY29tbWl0LCByb2xsYmFjaywgc2F2ZXBvaW50LCByZWxlYXNlLCByb2xsYmFja1RvIH0pID0+IGZ1bmN0aW9uIHNxbGl0ZVRyYW5zYWN0aW9uKCkge1xuXHRsZXQgYmVmb3JlLCBhZnRlciwgdW5kbztcblx0aWYgKGRiLmluVHJhbnNhY3Rpb24pIHtcblx0XHRiZWZvcmUgPSBzYXZlcG9pbnQ7XG5cdFx0YWZ0ZXIgPSByZWxlYXNlO1xuXHRcdHVuZG8gPSByb2xsYmFja1RvO1xuXHR9IGVsc2Uge1xuXHRcdGJlZm9yZSA9IGJlZ2luO1xuXHRcdGFmdGVyID0gY29tbWl0O1xuXHRcdHVuZG8gPSByb2xsYmFjaztcblx0fVxuXHRiZWZvcmUucnVuKCk7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXBwbHkuY2FsbChmbiwgdGhpcywgYXJndW1lbnRzKTtcblx0XHRpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignVHJhbnNhY3Rpb24gZnVuY3Rpb24gY2Fubm90IHJldHVybiBhIHByb21pc2UnKTtcblx0XHR9XG5cdFx0YWZ0ZXIucnVuKCk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSBjYXRjaCAoZXgpIHtcblx0XHRpZiAoZGIuaW5UcmFuc2FjdGlvbikge1xuXHRcdFx0dW5kby5ydW4oKTtcblx0XHRcdGlmICh1bmRvICE9PSByb2xsYmFjaykgYWZ0ZXIucnVuKCk7XG5cdFx0fVxuXHRcdHRocm93IGV4O1xuXHR9XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IHsgZ2V0Qm9vbGVhbk9wdGlvbiwgY3BwZGIgfSA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcmFnbWEoc291cmNlLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zID09IG51bGwpIG9wdGlvbnMgPSB7fTtcblx0aWYgKHR5cGVvZiBzb3VyY2UgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBhIHN0cmluZycpO1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBzZWNvbmQgYXJndW1lbnQgdG8gYmUgYW4gb3B0aW9ucyBvYmplY3QnKTtcblx0Y29uc3Qgc2ltcGxlID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnc2ltcGxlJyk7XG5cblx0Y29uc3Qgc3RtdCA9IHRoaXNbY3BwZGJdLnByZXBhcmUoYFBSQUdNQSAke3NvdXJjZX1gLCB0aGlzLCB0cnVlKTtcblx0cmV0dXJuIHNpbXBsZSA/IHN0bXQucGx1Y2soKS5nZXQoKSA6IHN0bXQuYWxsKCk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCB7IHByb21pc2lmeSB9ID0gcmVxdWlyZSgndXRpbCcpO1xuY29uc3QgeyBjcHBkYiB9ID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xuY29uc3QgZnNBY2Nlc3MgPSBwcm9taXNpZnkoZnMuYWNjZXNzKTtcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyBmdW5jdGlvbiBiYWNrdXAoZmlsZW5hbWUsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMgPT0gbnVsbCkgb3B0aW9ucyA9IHt9O1xuXG5cdC8vIFZhbGlkYXRlIGFyZ3VtZW50c1xuXHRpZiAodHlwZW9mIGZpbGVuYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgYSBzdHJpbmcnKTtcblx0aWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIGFuIG9wdGlvbnMgb2JqZWN0Jyk7XG5cblx0Ly8gSW50ZXJwcmV0IG9wdGlvbnNcblx0ZmlsZW5hbWUgPSBmaWxlbmFtZS50cmltKCk7XG5cdGNvbnN0IGF0dGFjaGVkTmFtZSA9ICdhdHRhY2hlZCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuYXR0YWNoZWQgOiAnbWFpbic7XG5cdGNvbnN0IGhhbmRsZXIgPSAncHJvZ3Jlc3MnIGluIG9wdGlvbnMgPyBvcHRpb25zLnByb2dyZXNzIDogbnVsbDtcblxuXHQvLyBWYWxpZGF0ZSBpbnRlcnByZXRlZCBvcHRpb25zXG5cdGlmICghZmlsZW5hbWUpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JhY2t1cCBmaWxlbmFtZSBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nJyk7XG5cdGlmIChmaWxlbmFtZSA9PT0gJzptZW1vcnk6JykgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBiYWNrdXAgZmlsZW5hbWUgXCI6bWVtb3J5OlwiJyk7XG5cdGlmICh0eXBlb2YgYXR0YWNoZWROYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIFwiYXR0YWNoZWRcIiBvcHRpb24gdG8gYmUgYSBzdHJpbmcnKTtcblx0aWYgKCFhdHRhY2hlZE5hbWUpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImF0dGFjaGVkXCIgb3B0aW9uIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcnKTtcblx0aWYgKGhhbmRsZXIgIT0gbnVsbCAmJiB0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIFwicHJvZ3Jlc3NcIiBvcHRpb24gdG8gYmUgYSBmdW5jdGlvbicpO1xuXG5cdC8vIE1ha2Ugc3VyZSB0aGUgc3BlY2lmaWVkIGRpcmVjdG9yeSBleGlzdHNcblx0YXdhaXQgZnNBY2Nlc3MocGF0aC5kaXJuYW1lKGZpbGVuYW1lKSkuY2F0Y2goKCkgPT4ge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBzYXZlIGJhY2t1cCBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgZG9lcyBub3QgZXhpc3QnKTtcblx0fSk7XG5cblx0Y29uc3QgaXNOZXdGaWxlID0gYXdhaXQgZnNBY2Nlc3MoZmlsZW5hbWUpLnRoZW4oKCkgPT4gZmFsc2UsICgpID0+IHRydWUpO1xuXHRyZXR1cm4gcnVuQmFja3VwKHRoaXNbY3BwZGJdLmJhY2t1cCh0aGlzLCBhdHRhY2hlZE5hbWUsIGZpbGVuYW1lLCBpc05ld0ZpbGUpLCBoYW5kbGVyIHx8IG51bGwpO1xufTtcblxuY29uc3QgcnVuQmFja3VwID0gKGJhY2t1cCwgaGFuZGxlcikgPT4ge1xuXHRsZXQgcmF0ZSA9IDA7XG5cdGxldCB1c2VEZWZhdWx0ID0gdHJ1ZTtcblxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHNldEltbWVkaWF0ZShmdW5jdGlvbiBzdGVwKCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgcHJvZ3Jlc3MgPSBiYWNrdXAudHJhbnNmZXIocmF0ZSk7XG5cdFx0XHRcdGlmICghcHJvZ3Jlc3MucmVtYWluaW5nUGFnZXMpIHtcblx0XHRcdFx0XHRiYWNrdXAuY2xvc2UoKTtcblx0XHRcdFx0XHRyZXNvbHZlKHByb2dyZXNzKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHVzZURlZmF1bHQpIHtcblx0XHRcdFx0XHR1c2VEZWZhdWx0ID0gZmFsc2U7XG5cdFx0XHRcdFx0cmF0ZSA9IDEwMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaGFuZGxlcikge1xuXHRcdFx0XHRcdGNvbnN0IHJldCA9IGhhbmRsZXIocHJvZ3Jlc3MpO1xuXHRcdFx0XHRcdGlmIChyZXQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiByZXQgPT09ICdudW1iZXInICYmIHJldCA9PT0gcmV0KSByYXRlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMHg3ZmZmZmZmZiwgTWF0aC5yb3VuZChyZXQpKSk7XG5cdFx0XHRcdFx0XHRlbHNlIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHByb2dyZXNzIGNhbGxiYWNrIHRvIHJldHVybiBhIG51bWJlciBvciB1bmRlZmluZWQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0SW1tZWRpYXRlKHN0ZXApO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGJhY2t1cC5jbG9zZSgpO1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IHsgY3BwZGIgfSA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXJpYWxpemUob3B0aW9ucykge1xuXHRpZiAob3B0aW9ucyA9PSBudWxsKSBvcHRpb25zID0ge307XG5cblx0Ly8gVmFsaWRhdGUgYXJndW1lbnRzXG5cdGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGFuIG9wdGlvbnMgb2JqZWN0Jyk7XG5cblx0Ly8gSW50ZXJwcmV0IGFuZCB2YWxpZGF0ZSBvcHRpb25zXG5cdGNvbnN0IGF0dGFjaGVkTmFtZSA9ICdhdHRhY2hlZCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuYXR0YWNoZWQgOiAnbWFpbic7XG5cdGlmICh0eXBlb2YgYXR0YWNoZWROYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIFwiYXR0YWNoZWRcIiBvcHRpb24gdG8gYmUgYSBzdHJpbmcnKTtcblx0aWYgKCFhdHRhY2hlZE5hbWUpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImF0dGFjaGVkXCIgb3B0aW9uIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmcnKTtcblxuXHRyZXR1cm4gdGhpc1tjcHBkYl0uc2VyaWFsaXplKGF0dGFjaGVkTmFtZSk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IHsgZ2V0Qm9vbGVhbk9wdGlvbiwgY3BwZGIgfSA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVGdW5jdGlvbihuYW1lLCBvcHRpb25zLCBmbikge1xuXHQvLyBBcHBseSBkZWZhdWx0c1xuXHRpZiAob3B0aW9ucyA9PSBudWxsKSBvcHRpb25zID0ge307XG5cdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykgeyBmbiA9IG9wdGlvbnM7IG9wdGlvbnMgPSB7fTsgfVxuXG5cdC8vIFZhbGlkYXRlIGFyZ3VtZW50c1xuXHRpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBhIHN0cmluZycpO1xuXHRpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBsYXN0IGFyZ3VtZW50IHRvIGJlIGEgZnVuY3Rpb24nKTtcblx0aWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIGFuIG9wdGlvbnMgb2JqZWN0Jyk7XG5cdGlmICghbmFtZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVXNlci1kZWZpbmVkIGZ1bmN0aW9uIG5hbWUgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZycpO1xuXG5cdC8vIEludGVycHJldCBvcHRpb25zXG5cdGNvbnN0IHNhZmVJbnRlZ2VycyA9ICdzYWZlSW50ZWdlcnMnIGluIG9wdGlvbnMgPyArZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnc2FmZUludGVnZXJzJykgOiAyO1xuXHRjb25zdCBkZXRlcm1pbmlzdGljID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnZGV0ZXJtaW5pc3RpYycpO1xuXHRjb25zdCBkaXJlY3RPbmx5ID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnZGlyZWN0T25seScpO1xuXHRjb25zdCB2YXJhcmdzID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAndmFyYXJncycpO1xuXHRsZXQgYXJnQ291bnQgPSAtMTtcblxuXHQvLyBEZXRlcm1pbmUgYXJndW1lbnQgY291bnRcblx0aWYgKCF2YXJhcmdzKSB7XG5cdFx0YXJnQ291bnQgPSBmbi5sZW5ndGg7XG5cdFx0aWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGFyZ0NvdW50KSB8fCBhcmdDb3VudCA8IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGZ1bmN0aW9uLmxlbmd0aCB0byBiZSBhIHBvc2l0aXZlIGludGVnZXInKTtcblx0XHRpZiAoYXJnQ291bnQgPiAxMDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdVc2VyLWRlZmluZWQgZnVuY3Rpb25zIGNhbm5vdCBoYXZlIG1vcmUgdGhhbiAxMDAgYXJndW1lbnRzJyk7XG5cdH1cblxuXHR0aGlzW2NwcGRiXS5mdW5jdGlvbihmbiwgbmFtZSwgYXJnQ291bnQsIHNhZmVJbnRlZ2VycywgZGV0ZXJtaW5pc3RpYywgZGlyZWN0T25seSk7XG5cdHJldHVybiB0aGlzO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5jb25zdCB7IGdldEJvb2xlYW5PcHRpb24sIGNwcGRiIH0gPSByZXF1aXJlKCcuLi91dGlsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lQWdncmVnYXRlKG5hbWUsIG9wdGlvbnMpIHtcblx0Ly8gVmFsaWRhdGUgYXJndW1lbnRzXG5cdGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGEgc3RyaW5nJyk7XG5cdGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgfHwgb3B0aW9ucyA9PT0gbnVsbCkgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIGFuIG9wdGlvbnMgb2JqZWN0Jyk7XG5cdGlmICghbmFtZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVXNlci1kZWZpbmVkIGZ1bmN0aW9uIG5hbWUgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZycpO1xuXG5cdC8vIEludGVycHJldCBvcHRpb25zXG5cdGNvbnN0IHN0YXJ0ID0gJ3N0YXJ0JyBpbiBvcHRpb25zID8gb3B0aW9ucy5zdGFydCA6IG51bGw7XG5cdGNvbnN0IHN0ZXAgPSBnZXRGdW5jdGlvbk9wdGlvbihvcHRpb25zLCAnc3RlcCcsIHRydWUpO1xuXHRjb25zdCBpbnZlcnNlID0gZ2V0RnVuY3Rpb25PcHRpb24ob3B0aW9ucywgJ2ludmVyc2UnLCBmYWxzZSk7XG5cdGNvbnN0IHJlc3VsdCA9IGdldEZ1bmN0aW9uT3B0aW9uKG9wdGlvbnMsICdyZXN1bHQnLCBmYWxzZSk7XG5cdGNvbnN0IHNhZmVJbnRlZ2VycyA9ICdzYWZlSW50ZWdlcnMnIGluIG9wdGlvbnMgPyArZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnc2FmZUludGVnZXJzJykgOiAyO1xuXHRjb25zdCBkZXRlcm1pbmlzdGljID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnZGV0ZXJtaW5pc3RpYycpO1xuXHRjb25zdCBkaXJlY3RPbmx5ID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAnZGlyZWN0T25seScpO1xuXHRjb25zdCB2YXJhcmdzID0gZ2V0Qm9vbGVhbk9wdGlvbihvcHRpb25zLCAndmFyYXJncycpO1xuXHRsZXQgYXJnQ291bnQgPSAtMTtcblxuXHQvLyBEZXRlcm1pbmUgYXJndW1lbnQgY291bnRcblx0aWYgKCF2YXJhcmdzKSB7XG5cdFx0YXJnQ291bnQgPSBNYXRoLm1heChnZXRMZW5ndGgoc3RlcCksIGludmVyc2UgPyBnZXRMZW5ndGgoaW52ZXJzZSkgOiAwKTtcblx0XHRpZiAoYXJnQ291bnQgPiAwKSBhcmdDb3VudCAtPSAxO1xuXHRcdGlmIChhcmdDb3VudCA+IDEwMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1VzZXItZGVmaW5lZCBmdW5jdGlvbnMgY2Fubm90IGhhdmUgbW9yZSB0aGFuIDEwMCBhcmd1bWVudHMnKTtcblx0fVxuXG5cdHRoaXNbY3BwZGJdLmFnZ3JlZ2F0ZShzdGFydCwgc3RlcCwgaW52ZXJzZSwgcmVzdWx0LCBuYW1lLCBhcmdDb3VudCwgc2FmZUludGVnZXJzLCBkZXRlcm1pbmlzdGljLCBkaXJlY3RPbmx5KTtcblx0cmV0dXJuIHRoaXM7XG59O1xuXG5jb25zdCBnZXRGdW5jdGlvbk9wdGlvbiA9IChvcHRpb25zLCBrZXksIHJlcXVpcmVkKSA9PiB7XG5cdGNvbnN0IHZhbHVlID0ga2V5IGluIG9wdGlvbnMgPyBvcHRpb25zW2tleV0gOiBudWxsO1xuXHRpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdGlmICh2YWx1ZSAhPSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCB0aGUgXCIke2tleX1cIiBvcHRpb24gdG8gYmUgYSBmdW5jdGlvbmApO1xuXHRpZiAocmVxdWlyZWQpIHRocm93IG5ldyBUeXBlRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgb3B0aW9uIFwiJHtrZXl9XCJgKTtcblx0cmV0dXJuIG51bGw7XG59O1xuXG5jb25zdCBnZXRMZW5ndGggPSAoeyBsZW5ndGggfSkgPT4ge1xuXHRpZiAoTnVtYmVyLmlzSW50ZWdlcihsZW5ndGgpICYmIGxlbmd0aCA+PSAwKSByZXR1cm4gbGVuZ3RoO1xuXHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBmdW5jdGlvbi5sZW5ndGggdG8gYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IHsgY3BwZGIgfSA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVUYWJsZShuYW1lLCBmYWN0b3J5KSB7XG5cdC8vIFZhbGlkYXRlIGFyZ3VtZW50c1xuXHRpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBhIHN0cmluZycpO1xuXHRpZiAoIW5hbWUpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpcnR1YWwgdGFibGUgbW9kdWxlIG5hbWUgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZycpO1xuXG5cdC8vIERldGVybWluZSB3aGV0aGVyIHRoZSBtb2R1bGUgaXMgZXBvbnltb3VzLW9ubHkgb3Igbm90XG5cdGxldCBlcG9ueW1vdXMgPSBmYWxzZTtcblx0aWYgKHR5cGVvZiBmYWN0b3J5ID09PSAnb2JqZWN0JyAmJiBmYWN0b3J5ICE9PSBudWxsKSB7XG5cdFx0ZXBvbnltb3VzID0gdHJ1ZTtcblx0XHRmYWN0b3J5ID0gZGVmZXIocGFyc2VUYWJsZURlZmluaXRpb24oZmFjdG9yeSwgJ3VzZWQnLCBuYW1lKSk7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKHR5cGVvZiBmYWN0b3J5ICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBzZWNvbmQgYXJndW1lbnQgdG8gYmUgYSBmdW5jdGlvbiBvciBhIHRhYmxlIGRlZmluaXRpb24gb2JqZWN0Jyk7XG5cdFx0ZmFjdG9yeSA9IHdyYXBGYWN0b3J5KGZhY3RvcnkpO1xuXHR9XG5cblx0dGhpc1tjcHBkYl0udGFibGUoZmFjdG9yeSwgbmFtZSwgZXBvbnltb3VzKTtcblx0cmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiB3cmFwRmFjdG9yeShmYWN0b3J5KSB7XG5cdHJldHVybiBmdW5jdGlvbiB2aXJ0dWFsVGFibGVGYWN0b3J5KG1vZHVsZU5hbWUsIGRhdGFiYXNlTmFtZSwgdGFibGVOYW1lLCAuLi5hcmdzKSB7XG5cdFx0Y29uc3QgdGhpc09iamVjdCA9IHtcblx0XHRcdG1vZHVsZTogbW9kdWxlTmFtZSxcblx0XHRcdGRhdGFiYXNlOiBkYXRhYmFzZU5hbWUsXG5cdFx0XHR0YWJsZTogdGFibGVOYW1lLFxuXHRcdH07XG5cblx0XHQvLyBHZW5lcmF0ZSBhIG5ldyB0YWJsZSBkZWZpbml0aW9uIGJ5IGludm9raW5nIHRoZSBmYWN0b3J5XG5cdFx0Y29uc3QgZGVmID0gYXBwbHkuY2FsbChmYWN0b3J5LCB0aGlzT2JqZWN0LCBhcmdzKTtcblx0XHRpZiAodHlwZW9mIGRlZiAhPT0gJ29iamVjdCcgfHwgZGVmID09PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiBkaWQgbm90IHJldHVybiBhIHRhYmxlIGRlZmluaXRpb24gb2JqZWN0YCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHBhcnNlVGFibGVEZWZpbml0aW9uKGRlZiwgJ3JldHVybmVkJywgbW9kdWxlTmFtZSk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGFibGVEZWZpbml0aW9uKGRlZiwgdmVyYiwgbW9kdWxlTmFtZSkge1xuXHQvLyBWYWxpZGF0ZSByZXF1aXJlZCBwcm9wZXJ0aWVzXG5cdGlmICghaGFzT3duUHJvcGVydHkuY2FsbChkZWYsICdyb3dzJykpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRob3V0IGEgXCJyb3dzXCIgcHJvcGVydHlgKTtcblx0fVxuXHRpZiAoIWhhc093blByb3BlcnR5LmNhbGwoZGVmLCAnY29sdW1ucycpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgVmlydHVhbCB0YWJsZSBtb2R1bGUgXCIke21vZHVsZU5hbWV9XCIgJHt2ZXJifSBhIHRhYmxlIGRlZmluaXRpb24gd2l0aG91dCBhIFwiY29sdW1uc1wiIHByb3BlcnR5YCk7XG5cdH1cblxuXHQvLyBWYWxpZGF0ZSBcInJvd3NcIiBwcm9wZXJ0eVxuXHRjb25zdCByb3dzID0gZGVmLnJvd3M7XG5cdGlmICh0eXBlb2Ygcm93cyAhPT0gJ2Z1bmN0aW9uJyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yocm93cykgIT09IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgVmlydHVhbCB0YWJsZSBtb2R1bGUgXCIke21vZHVsZU5hbWV9XCIgJHt2ZXJifSBhIHRhYmxlIGRlZmluaXRpb24gd2l0aCBhbiBpbnZhbGlkIFwicm93c1wiIHByb3BlcnR5IChzaG91bGQgYmUgYSBnZW5lcmF0b3IgZnVuY3Rpb24pYCk7XG5cdH1cblxuXHQvLyBWYWxpZGF0ZSBcImNvbHVtbnNcIiBwcm9wZXJ0eVxuXHRsZXQgY29sdW1ucyA9IGRlZi5jb2x1bW5zO1xuXHRpZiAoIUFycmF5LmlzQXJyYXkoY29sdW1ucykgfHwgIShjb2x1bW5zID0gWy4uLmNvbHVtbnNdKS5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJykpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIGFuIGludmFsaWQgXCJjb2x1bW5zXCIgcHJvcGVydHkgKHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzKWApO1xuXHR9XG5cdGlmIChjb2x1bW5zLmxlbmd0aCAhPT0gbmV3IFNldChjb2x1bW5zKS5zaXplKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgVmlydHVhbCB0YWJsZSBtb2R1bGUgXCIke21vZHVsZU5hbWV9XCIgJHt2ZXJifSBhIHRhYmxlIGRlZmluaXRpb24gd2l0aCBkdXBsaWNhdGUgY29sdW1uIG5hbWVzYCk7XG5cdH1cblx0aWYgKCFjb2x1bW5zLmxlbmd0aCkge1xuXHRcdHRocm93IG5ldyBSYW5nZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIHplcm8gY29sdW1uc2ApO1xuXHR9XG5cblx0Ly8gVmFsaWRhdGUgXCJwYXJhbWV0ZXJzXCIgcHJvcGVydHlcblx0bGV0IHBhcmFtZXRlcnM7XG5cdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGRlZiwgJ3BhcmFtZXRlcnMnKSkge1xuXHRcdHBhcmFtZXRlcnMgPSBkZWYucGFyYW1ldGVycztcblx0XHRpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1ldGVycykgfHwgIShwYXJhbWV0ZXJzID0gWy4uLnBhcmFtZXRlcnNdKS5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJykpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYFZpcnR1YWwgdGFibGUgbW9kdWxlIFwiJHttb2R1bGVOYW1lfVwiICR7dmVyYn0gYSB0YWJsZSBkZWZpbml0aW9uIHdpdGggYW4gaW52YWxpZCBcInBhcmFtZXRlcnNcIiBwcm9wZXJ0eSAoc2hvdWxkIGJlIGFuIGFycmF5IG9mIHN0cmluZ3MpYCk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHBhcmFtZXRlcnMgPSBpbmZlclBhcmFtZXRlcnMocm93cyk7XG5cdH1cblx0aWYgKHBhcmFtZXRlcnMubGVuZ3RoICE9PSBuZXcgU2V0KHBhcmFtZXRlcnMpLnNpemUpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIGR1cGxpY2F0ZSBwYXJhbWV0ZXIgbmFtZXNgKTtcblx0fVxuXHRpZiAocGFyYW1ldGVycy5sZW5ndGggPiAzMikge1xuXHRcdHRocm93IG5ldyBSYW5nZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIG1vcmUgdGhhbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgMzIgcGFyYW1ldGVyc2ApO1xuXHR9XG5cdGZvciAoY29uc3QgcGFyYW1ldGVyIG9mIHBhcmFtZXRlcnMpIHtcblx0XHRpZiAoY29sdW1ucy5pbmNsdWRlcyhwYXJhbWV0ZXIpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIGNvbHVtbiBcIiR7cGFyYW1ldGVyfVwiIHdoaWNoIHdhcyBhbWJpZ3VvdXNseSBkZWZpbmVkIGFzIGJvdGggYSBjb2x1bW4gYW5kIHBhcmFtZXRlcmApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFZhbGlkYXRlIFwic2FmZUludGVnZXJzXCIgb3B0aW9uXG5cdGxldCBzYWZlSW50ZWdlcnMgPSAyO1xuXHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChkZWYsICdzYWZlSW50ZWdlcnMnKSkge1xuXHRcdGNvbnN0IGJvb2wgPSBkZWYuc2FmZUludGVnZXJzO1xuXHRcdGlmICh0eXBlb2YgYm9vbCAhPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIGFuIGludmFsaWQgXCJzYWZlSW50ZWdlcnNcIiBwcm9wZXJ0eSAoc2hvdWxkIGJlIGEgYm9vbGVhbilgKTtcblx0XHR9XG5cdFx0c2FmZUludGVnZXJzID0gK2Jvb2w7XG5cdH1cblxuXHQvLyBWYWxpZGF0ZSBcImRpcmVjdE9ubHlcIiBvcHRpb25cblx0bGV0IGRpcmVjdE9ubHkgPSBmYWxzZTtcblx0aWYgKGhhc093blByb3BlcnR5LmNhbGwoZGVmLCAnZGlyZWN0T25seScpKSB7XG5cdFx0ZGlyZWN0T25seSA9IGRlZi5kaXJlY3RPbmx5O1xuXHRcdGlmICh0eXBlb2YgZGlyZWN0T25seSAhPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiAke3ZlcmJ9IGEgdGFibGUgZGVmaW5pdGlvbiB3aXRoIGFuIGludmFsaWQgXCJkaXJlY3RPbmx5XCIgcHJvcGVydHkgKHNob3VsZCBiZSBhIGJvb2xlYW4pYCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gR2VuZXJhdGUgU1FMIGZvciB0aGUgdmlydHVhbCB0YWJsZSBkZWZpbml0aW9uXG5cdGNvbnN0IGNvbHVtbkRlZmluaXRpb25zID0gW1xuXHRcdC4uLnBhcmFtZXRlcnMubWFwKGlkZW50aWZpZXIpLm1hcChzdHIgPT4gYCR7c3RyfSBISURERU5gKSxcblx0XHQuLi5jb2x1bW5zLm1hcChpZGVudGlmaWVyKSxcblx0XTtcblx0cmV0dXJuIFtcblx0XHRgQ1JFQVRFIFRBQkxFIHgoJHtjb2x1bW5EZWZpbml0aW9ucy5qb2luKCcsICcpfSk7YCxcblx0XHR3cmFwR2VuZXJhdG9yKHJvd3MsIG5ldyBNYXAoY29sdW1ucy5tYXAoKHgsIGkpID0+IFt4LCBwYXJhbWV0ZXJzLmxlbmd0aCArIGldKSksIG1vZHVsZU5hbWUpLFxuXHRcdHBhcmFtZXRlcnMsXG5cdFx0c2FmZUludGVnZXJzLFxuXHRcdGRpcmVjdE9ubHksXG5cdF07XG59XG5cbmZ1bmN0aW9uIHdyYXBHZW5lcmF0b3IoZ2VuZXJhdG9yLCBjb2x1bW5NYXAsIG1vZHVsZU5hbWUpIHtcblx0cmV0dXJuIGZ1bmN0aW9uKiB2aXJ0dWFsVGFibGUoLi4uYXJncykge1xuXHRcdC8qXG5cdFx0XHRXZSBtdXN0IGRlZmVuc2l2ZWx5IGNsb25lIGFueSBidWZmZXJzIGluIHRoZSBhcmd1bWVudHMsIGJlY2F1c2Vcblx0XHRcdG90aGVyd2lzZSB0aGUgZ2VuZXJhdG9yIGNvdWxkIG11dGF0ZSBvbmUgb2YgdGhlbSwgd2hpY2ggd291bGQgY2F1c2Vcblx0XHRcdHVzIHRvIHJldHVybiBpbmNvcnJlY3QgdmFsdWVzIGZvciBoaWRkZW4gY29sdW1ucywgcG90ZW50aWFsbHlcblx0XHRcdGNvcnJ1cHRpbmcgdGhlIGRhdGFiYXNlLlxuXHRcdCAqL1xuXHRcdGNvbnN0IG91dHB1dCA9IGFyZ3MubWFwKHggPT4gQnVmZmVyLmlzQnVmZmVyKHgpID8gQnVmZmVyLmZyb20oeCkgOiB4KTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbk1hcC5zaXplOyArK2kpIHtcblx0XHRcdG91dHB1dC5wdXNoKG51bGwpOyAvLyBGaWxsIHdpdGggbnVsbHMgdG8gcHJldmVudCBnYXBzIGluIGFycmF5ICh2OCBvcHRpbWl6YXRpb24pXG5cdFx0fVxuXHRcdGZvciAoY29uc3Qgcm93IG9mIGdlbmVyYXRvciguLi5hcmdzKSkge1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocm93KSkge1xuXHRcdFx0XHRleHRyYWN0Um93QXJyYXkocm93LCBvdXRwdXQsIGNvbHVtbk1hcC5zaXplLCBtb2R1bGVOYW1lKTtcblx0XHRcdFx0eWllbGQgb3V0cHV0O1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2Ygcm93ID09PSAnb2JqZWN0JyAmJiByb3cgIT09IG51bGwpIHtcblx0XHRcdFx0ZXh0cmFjdFJvd09iamVjdChyb3csIG91dHB1dCwgY29sdW1uTWFwLCBtb2R1bGVOYW1lKTtcblx0XHRcdFx0eWllbGQgb3V0cHV0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgVmlydHVhbCB0YWJsZSBtb2R1bGUgXCIke21vZHVsZU5hbWV9XCIgeWllbGRlZCBzb21ldGhpbmcgdGhhdCBpc24ndCBhIHZhbGlkIHJvdyBvYmplY3RgKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RSb3dBcnJheShyb3csIG91dHB1dCwgY29sdW1uQ291bnQsIG1vZHVsZU5hbWUpIHtcblx0aWYgKHJvdy5sZW5ndGggIT09IGNvbHVtbkNvdW50KSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgVmlydHVhbCB0YWJsZSBtb2R1bGUgXCIke21vZHVsZU5hbWV9XCIgeWllbGRlZCBhIHJvdyB3aXRoIGFuIGluY29ycmVjdCBudW1iZXIgb2YgY29sdW1uc2ApO1xuXHR9XG5cdGNvbnN0IG9mZnNldCA9IG91dHB1dC5sZW5ndGggLSBjb2x1bW5Db3VudDtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW5Db3VudDsgKytpKSB7XG5cdFx0b3V0cHV0W2kgKyBvZmZzZXRdID0gcm93W2ldO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RSb3dPYmplY3Qocm93LCBvdXRwdXQsIGNvbHVtbk1hcCwgbW9kdWxlTmFtZSkge1xuXHRsZXQgY291bnQgPSAwO1xuXHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyb3cpKSB7XG5cdFx0Y29uc3QgaW5kZXggPSBjb2x1bW5NYXAuZ2V0KGtleSk7XG5cdFx0aWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYFZpcnR1YWwgdGFibGUgbW9kdWxlIFwiJHttb2R1bGVOYW1lfVwiIHlpZWxkZWQgYSByb3cgd2l0aCBhbiB1bmRlY2xhcmVkIGNvbHVtbiBcIiR7a2V5fVwiYCk7XG5cdFx0fVxuXHRcdG91dHB1dFtpbmRleF0gPSByb3dba2V5XTtcblx0XHRjb3VudCArPSAxO1xuXHR9XG5cdGlmIChjb3VudCAhPT0gY29sdW1uTWFwLnNpemUpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBWaXJ0dWFsIHRhYmxlIG1vZHVsZSBcIiR7bW9kdWxlTmFtZX1cIiB5aWVsZGVkIGEgcm93IHdpdGggbWlzc2luZyBjb2x1bW5zYCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gaW5mZXJQYXJhbWV0ZXJzKHsgbGVuZ3RoIH0pIHtcblx0aWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGxlbmd0aCkgfHwgbGVuZ3RoIDwgMCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGZ1bmN0aW9uLmxlbmd0aCB0byBiZSBhIHBvc2l0aXZlIGludGVnZXInKTtcblx0fVxuXHRjb25zdCBwYXJhbXMgPSBbXTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuXHRcdHBhcmFtcy5wdXNoKGAkJHtpICsgMX1gKTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5jb25zdCB7IGhhc093blByb3BlcnR5IH0gPSBPYmplY3QucHJvdG90eXBlO1xuY29uc3QgeyBhcHBseSB9ID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuY29uc3QgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZnVuY3Rpb24qKCl7fSk7XG5jb25zdCBpZGVudGlmaWVyID0gc3RyID0+IGBcIiR7c3RyLnJlcGxhY2UoL1wiL2csICdcIlwiJyl9XCJgO1xuY29uc3QgZGVmZXIgPSB4ID0+ICgpID0+IHg7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuY29uc3QgRGF0YWJhc2VJbnNwZWN0aW9uID0gZnVuY3Rpb24gRGF0YWJhc2UoKSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbnNwZWN0KGRlcHRoLCBvcHRzKSB7XG5cdHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBEYXRhYmFzZUluc3BlY3Rpb24oKSwgdGhpcyk7XG59O1xuXG4iLCAiJ3VzZSBzdHJpY3QnO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IFNxbGl0ZUVycm9yID0gcmVxdWlyZSgnLi9zcWxpdGUtZXJyb3InKTtcblxubGV0IERFRkFVTFRfQURET047XG5cbmZ1bmN0aW9uIERhdGFiYXNlKGZpbGVuYW1lR2l2ZW4sIG9wdGlvbnMpIHtcblx0aWYgKG5ldy50YXJnZXQgPT0gbnVsbCkge1xuXHRcdHJldHVybiBuZXcgRGF0YWJhc2UoZmlsZW5hbWVHaXZlbiwgb3B0aW9ucyk7XG5cdH1cblxuXHQvLyBBcHBseSBkZWZhdWx0c1xuXHRsZXQgYnVmZmVyO1xuXHRpZiAoQnVmZmVyLmlzQnVmZmVyKGZpbGVuYW1lR2l2ZW4pKSB7XG5cdFx0YnVmZmVyID0gZmlsZW5hbWVHaXZlbjtcblx0XHRmaWxlbmFtZUdpdmVuID0gJzptZW1vcnk6Jztcblx0fVxuXHRpZiAoZmlsZW5hbWVHaXZlbiA9PSBudWxsKSBmaWxlbmFtZUdpdmVuID0gJyc7XG5cdGlmIChvcHRpb25zID09IG51bGwpIG9wdGlvbnMgPSB7fTtcblxuXHQvLyBWYWxpZGF0ZSBhcmd1bWVudHNcblx0aWYgKHR5cGVvZiBmaWxlbmFtZUdpdmVuICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgYSBzdHJpbmcnKTtcblx0aWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIGFuIG9wdGlvbnMgb2JqZWN0Jyk7XG5cdGlmICgncmVhZE9ubHknIGluIG9wdGlvbnMpIHRocm93IG5ldyBUeXBlRXJyb3IoJ01pc3NwZWxsZWQgb3B0aW9uIFwicmVhZE9ubHlcIiBzaG91bGQgYmUgXCJyZWFkb25seVwiJyk7XG5cdGlmICgnbWVtb3J5JyBpbiBvcHRpb25zKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdPcHRpb24gXCJtZW1vcnlcIiB3YXMgcmVtb3ZlZCBpbiB2Ny4wLjAgKHVzZSBcIjptZW1vcnk6XCIgZmlsZW5hbWUgaW5zdGVhZCknKTtcblxuXHQvLyBJbnRlcnByZXQgb3B0aW9uc1xuXHRjb25zdCBmaWxlbmFtZSA9IGZpbGVuYW1lR2l2ZW4udHJpbSgpO1xuXHRjb25zdCBhbm9ueW1vdXMgPSBmaWxlbmFtZSA9PT0gJycgfHwgZmlsZW5hbWUgPT09ICc6bWVtb3J5Oic7XG5cdGNvbnN0IHJlYWRvbmx5ID0gdXRpbC5nZXRCb29sZWFuT3B0aW9uKG9wdGlvbnMsICdyZWFkb25seScpO1xuXHRjb25zdCBmaWxlTXVzdEV4aXN0ID0gdXRpbC5nZXRCb29sZWFuT3B0aW9uKG9wdGlvbnMsICdmaWxlTXVzdEV4aXN0Jyk7XG5cdGNvbnN0IHRpbWVvdXQgPSAndGltZW91dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMudGltZW91dCA6IDUwMDA7XG5cdGNvbnN0IHZlcmJvc2UgPSAndmVyYm9zZScgaW4gb3B0aW9ucyA/IG9wdGlvbnMudmVyYm9zZSA6IG51bGw7XG5cdGNvbnN0IG5hdGl2ZUJpbmRpbmcgPSAnbmF0aXZlQmluZGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMubmF0aXZlQmluZGluZyA6IG51bGw7XG5cblx0Ly8gVmFsaWRhdGUgaW50ZXJwcmV0ZWQgb3B0aW9uc1xuXHRpZiAocmVhZG9ubHkgJiYgYW5vbnltb3VzICYmICFidWZmZXIpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0luLW1lbW9yeS90ZW1wb3JhcnkgZGF0YWJhc2VzIGNhbm5vdCBiZSByZWFkb25seScpO1xuXHRpZiAoIU51bWJlci5pc0ludGVnZXIodGltZW91dCkgfHwgdGltZW91dCA8IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHRoZSBcInRpbWVvdXRcIiBvcHRpb24gdG8gYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG5cdGlmICh0aW1lb3V0ID4gMHg3ZmZmZmZmZikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ09wdGlvbiBcInRpbWVvdXRcIiBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDIxNDc0ODM2NDcnKTtcblx0aWYgKHZlcmJvc2UgIT0gbnVsbCAmJiB0eXBlb2YgdmVyYm9zZSAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIFwidmVyYm9zZVwiIG9wdGlvbiB0byBiZSBhIGZ1bmN0aW9uJyk7XG5cdGlmIChuYXRpdmVCaW5kaW5nICE9IG51bGwgJiYgdHlwZW9mIG5hdGl2ZUJpbmRpbmcgIT09ICdzdHJpbmcnICYmIHR5cGVvZiBuYXRpdmVCaW5kaW5nICE9PSAnb2JqZWN0JykgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIFwibmF0aXZlQmluZGluZ1wiIG9wdGlvbiB0byBiZSBhIHN0cmluZyBvciBhZGRvbiBvYmplY3QnKTtcblxuXHQvLyBMb2FkIHRoZSBuYXRpdmUgYWRkb25cblx0bGV0IGFkZG9uO1xuXHRpZiAobmF0aXZlQmluZGluZyA9PSBudWxsKSB7XG5cdFx0YWRkb24gPSBERUZBVUxUX0FERE9OIHx8IChERUZBVUxUX0FERE9OID0gcmVxdWlyZSgnYmluZGluZ3MnKSgnYmV0dGVyX3NxbGl0ZTMubm9kZScpKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgbmF0aXZlQmluZGluZyA9PT0gJ3N0cmluZycpIHtcblx0XHQvLyBTZWUgPGh0dHBzOi8vd2VicGFjay5qcy5vcmcvYXBpL21vZHVsZS12YXJpYWJsZXMvI19fbm9uX3dlYnBhY2tfcmVxdWlyZV9fLXdlYnBhY2stc3BlY2lmaWM+XG5cdFx0Y29uc3QgcmVxdWlyZUZ1bmMgPSB0eXBlb2YgX19ub25fd2VicGFja19yZXF1aXJlX18gPT09ICdmdW5jdGlvbicgPyBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyA6IHJlcXVpcmU7XG5cdFx0YWRkb24gPSByZXF1aXJlRnVuYyhwYXRoLnJlc29sdmUobmF0aXZlQmluZGluZykucmVwbGFjZSgvKFxcLm5vZGUpPyQvLCAnLm5vZGUnKSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gU2VlIDxodHRwczovL2dpdGh1Yi5jb20vV2lzZUxpYnMvYmV0dGVyLXNxbGl0ZTMvaXNzdWVzLzk3Mj5cblx0XHRhZGRvbiA9IG5hdGl2ZUJpbmRpbmc7XG5cdH1cblxuXHRpZiAoIWFkZG9uLmlzSW5pdGlhbGl6ZWQpIHtcblx0XHRhZGRvbi5zZXRFcnJvckNvbnN0cnVjdG9yKFNxbGl0ZUVycm9yKTtcblx0XHRhZGRvbi5pc0luaXRpYWxpemVkID0gdHJ1ZTtcblx0fVxuXG5cdC8vIE1ha2Ugc3VyZSB0aGUgc3BlY2lmaWVkIGRpcmVjdG9yeSBleGlzdHNcblx0aWYgKCFhbm9ueW1vdXMgJiYgIWZpbGVuYW1lLnN0YXJ0c1dpdGgoJ2ZpbGU6JykgJiYgIWZzLmV4aXN0c1N5bmMocGF0aC5kaXJuYW1lKGZpbGVuYW1lKSkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3Qgb3BlbiBkYXRhYmFzZSBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgZG9lcyBub3QgZXhpc3QnKTtcblx0fVxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcblx0XHRbdXRpbC5jcHBkYl06IHsgdmFsdWU6IG5ldyBhZGRvbi5EYXRhYmFzZShmaWxlbmFtZSwgZmlsZW5hbWVHaXZlbiwgYW5vbnltb3VzLCByZWFkb25seSwgZmlsZU11c3RFeGlzdCwgdGltZW91dCwgdmVyYm9zZSB8fCBudWxsLCBidWZmZXIgfHwgbnVsbCkgfSxcblx0XHQuLi53cmFwcGVycy5nZXR0ZXJzLFxuXHR9KTtcbn1cblxuY29uc3Qgd3JhcHBlcnMgPSByZXF1aXJlKCcuL21ldGhvZHMvd3JhcHBlcnMnKTtcbkRhdGFiYXNlLnByb3RvdHlwZS5wcmVwYXJlID0gd3JhcHBlcnMucHJlcGFyZTtcbkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vbWV0aG9kcy90cmFuc2FjdGlvbicpO1xuRGF0YWJhc2UucHJvdG90eXBlLnByYWdtYSA9IHJlcXVpcmUoJy4vbWV0aG9kcy9wcmFnbWEnKTtcbkRhdGFiYXNlLnByb3RvdHlwZS5iYWNrdXAgPSByZXF1aXJlKCcuL21ldGhvZHMvYmFja3VwJyk7XG5EYXRhYmFzZS5wcm90b3R5cGUuc2VyaWFsaXplID0gcmVxdWlyZSgnLi9tZXRob2RzL3NlcmlhbGl6ZScpO1xuRGF0YWJhc2UucHJvdG90eXBlLmZ1bmN0aW9uID0gcmVxdWlyZSgnLi9tZXRob2RzL2Z1bmN0aW9uJyk7XG5EYXRhYmFzZS5wcm90b3R5cGUuYWdncmVnYXRlID0gcmVxdWlyZSgnLi9tZXRob2RzL2FnZ3JlZ2F0ZScpO1xuRGF0YWJhc2UucHJvdG90eXBlLnRhYmxlID0gcmVxdWlyZSgnLi9tZXRob2RzL3RhYmxlJyk7XG5EYXRhYmFzZS5wcm90b3R5cGUubG9hZEV4dGVuc2lvbiA9IHdyYXBwZXJzLmxvYWRFeHRlbnNpb247XG5EYXRhYmFzZS5wcm90b3R5cGUuZXhlYyA9IHdyYXBwZXJzLmV4ZWM7XG5EYXRhYmFzZS5wcm90b3R5cGUuY2xvc2UgPSB3cmFwcGVycy5jbG9zZTtcbkRhdGFiYXNlLnByb3RvdHlwZS5kZWZhdWx0U2FmZUludGVnZXJzID0gd3JhcHBlcnMuZGVmYXVsdFNhZmVJbnRlZ2VycztcbkRhdGFiYXNlLnByb3RvdHlwZS51bnNhZmVNb2RlID0gd3JhcHBlcnMudW5zYWZlTW9kZTtcbkRhdGFiYXNlLnByb3RvdHlwZVt1dGlsLmluc3BlY3RdID0gcmVxdWlyZSgnLi9tZXRob2RzL2luc3BlY3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRhYmFzZTtcbiIsICIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZGF0YWJhc2UnKTtcbm1vZHVsZS5leHBvcnRzLlNxbGl0ZUVycm9yID0gcmVxdWlyZSgnLi9zcWxpdGUtZXJyb3InKTtcbiIsICJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGtpbmRPZih2YWwpIHtcbiAgaWYgKHZhbCA9PT0gdm9pZCAwKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIGlmICh2YWwgPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gJ2Jvb2xlYW4nO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHJldHVybiAnc3RyaW5nJztcbiAgaWYgKHR5cGUgPT09ICdudW1iZXInKSByZXR1cm4gJ251bWJlcic7XG4gIGlmICh0eXBlID09PSAnc3ltYm9sJykgcmV0dXJuICdzeW1ib2wnO1xuICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpc0dlbmVyYXRvckZuKHZhbCkgPyAnZ2VuZXJhdG9yZnVuY3Rpb24nIDogJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGlmIChpc0FycmF5KHZhbCkpIHJldHVybiAnYXJyYXknO1xuICBpZiAoaXNCdWZmZXIodmFsKSkgcmV0dXJuICdidWZmZXInO1xuICBpZiAoaXNBcmd1bWVudHModmFsKSkgcmV0dXJuICdhcmd1bWVudHMnO1xuICBpZiAoaXNEYXRlKHZhbCkpIHJldHVybiAnZGF0ZSc7XG4gIGlmIChpc0Vycm9yKHZhbCkpIHJldHVybiAnZXJyb3InO1xuICBpZiAoaXNSZWdleHAodmFsKSkgcmV0dXJuICdyZWdleHAnO1xuXG4gIHN3aXRjaCAoY3Rvck5hbWUodmFsKSkge1xuICAgIGNhc2UgJ1N5bWJvbCc6IHJldHVybiAnc3ltYm9sJztcbiAgICBjYXNlICdQcm9taXNlJzogcmV0dXJuICdwcm9taXNlJztcblxuICAgIC8vIFNldCwgTWFwLCBXZWFrU2V0LCBXZWFrTWFwXG4gICAgY2FzZSAnV2Vha01hcCc6IHJldHVybiAnd2Vha21hcCc7XG4gICAgY2FzZSAnV2Vha1NldCc6IHJldHVybiAnd2Vha3NldCc7XG4gICAgY2FzZSAnTWFwJzogcmV0dXJuICdtYXAnO1xuICAgIGNhc2UgJ1NldCc6IHJldHVybiAnc2V0JztcblxuICAgIC8vIDgtYml0IHR5cGVkIGFycmF5c1xuICAgIGNhc2UgJ0ludDhBcnJheSc6IHJldHVybiAnaW50OGFycmF5JztcbiAgICBjYXNlICdVaW50OEFycmF5JzogcmV0dXJuICd1aW50OGFycmF5JztcbiAgICBjYXNlICdVaW50OENsYW1wZWRBcnJheSc6IHJldHVybiAndWludDhjbGFtcGVkYXJyYXknO1xuXG4gICAgLy8gMTYtYml0IHR5cGVkIGFycmF5c1xuICAgIGNhc2UgJ0ludDE2QXJyYXknOiByZXR1cm4gJ2ludDE2YXJyYXknO1xuICAgIGNhc2UgJ1VpbnQxNkFycmF5JzogcmV0dXJuICd1aW50MTZhcnJheSc7XG5cbiAgICAvLyAzMi1iaXQgdHlwZWQgYXJyYXlzXG4gICAgY2FzZSAnSW50MzJBcnJheSc6IHJldHVybiAnaW50MzJhcnJheSc7XG4gICAgY2FzZSAnVWludDMyQXJyYXknOiByZXR1cm4gJ3VpbnQzMmFycmF5JztcbiAgICBjYXNlICdGbG9hdDMyQXJyYXknOiByZXR1cm4gJ2Zsb2F0MzJhcnJheSc7XG4gICAgY2FzZSAnRmxvYXQ2NEFycmF5JzogcmV0dXJuICdmbG9hdDY0YXJyYXknO1xuICB9XG5cbiAgaWYgKGlzR2VuZXJhdG9yT2JqKHZhbCkpIHtcbiAgICByZXR1cm4gJ2dlbmVyYXRvcic7XG4gIH1cblxuICAvLyBOb24tcGxhaW4gb2JqZWN0c1xuICB0eXBlID0gdG9TdHJpbmcuY2FsbCh2YWwpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOiByZXR1cm4gJ29iamVjdCc7XG4gICAgLy8gaXRlcmF0b3JzXG4gICAgY2FzZSAnW29iamVjdCBNYXAgSXRlcmF0b3JdJzogcmV0dXJuICdtYXBpdGVyYXRvcic7XG4gICAgY2FzZSAnW29iamVjdCBTZXQgSXRlcmF0b3JdJzogcmV0dXJuICdzZXRpdGVyYXRvcic7XG4gICAgY2FzZSAnW29iamVjdCBTdHJpbmcgSXRlcmF0b3JdJzogcmV0dXJuICdzdHJpbmdpdGVyYXRvcic7XG4gICAgY2FzZSAnW29iamVjdCBBcnJheSBJdGVyYXRvcl0nOiByZXR1cm4gJ2FycmF5aXRlcmF0b3InO1xuICB9XG5cbiAgLy8gb3RoZXJcbiAgcmV0dXJuIHR5cGUuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKTtcbn07XG5cbmZ1bmN0aW9uIGN0b3JOYW1lKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbC5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyA/IHZhbC5jb25zdHJ1Y3Rvci5uYW1lIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHJldHVybiBBcnJheS5pc0FycmF5KHZhbCk7XG4gIHJldHVybiB2YWwgaW5zdGFuY2VvZiBBcnJheTtcbn1cblxuZnVuY3Rpb24gaXNFcnJvcih2YWwpIHtcbiAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIEVycm9yIHx8ICh0eXBlb2YgdmFsLm1lc3NhZ2UgPT09ICdzdHJpbmcnICYmIHZhbC5jb25zdHJ1Y3RvciAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gJ251bWJlcicpO1xufVxuXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIHR5cGVvZiB2YWwudG9EYXRlU3RyaW5nID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIHZhbC5nZXREYXRlID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIHZhbC5zZXREYXRlID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc1JlZ2V4cCh2YWwpIHtcbiAgaWYgKHZhbCBpbnN0YW5jZW9mIFJlZ0V4cCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiB0eXBlb2YgdmFsLmZsYWdzID09PSAnc3RyaW5nJ1xuICAgICYmIHR5cGVvZiB2YWwuaWdub3JlQ2FzZSA9PT0gJ2Jvb2xlYW4nXG4gICAgJiYgdHlwZW9mIHZhbC5tdWx0aWxpbmUgPT09ICdib29sZWFuJ1xuICAgICYmIHR5cGVvZiB2YWwuZ2xvYmFsID09PSAnYm9vbGVhbic7XG59XG5cbmZ1bmN0aW9uIGlzR2VuZXJhdG9yRm4obmFtZSwgdmFsKSB7XG4gIHJldHVybiBjdG9yTmFtZShuYW1lKSA9PT0gJ0dlbmVyYXRvckZ1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNHZW5lcmF0b3JPYmoodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsLnRocm93ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIHZhbC5yZXR1cm4gPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgdmFsLm5leHQgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbCkge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2YgdmFsLmxlbmd0aCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHZhbC5jYWxsZWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyci5tZXNzYWdlLmluZGV4T2YoJ2NhbGxlZScpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBJZiB5b3UgbmVlZCB0byBzdXBwb3J0IFNhZmFyaSA1LTcgKDgtMTAgeXItb2xkIGJyb3dzZXIpLFxuICogdGFrZSBhIGxvb2sgYXQgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9pcy1idWZmZXJcbiAqL1xuXG5mdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHtcbiAgaWYgKHZhbC5jb25zdHJ1Y3RvciAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsICIvKiFcbiAqIGlzLWV4dGVuZGFibGUgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L2lzLWV4dGVuZGFibGU+XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCBKb24gU2NobGlua2VydC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNFeHRlbmRhYmxlKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsICE9PSBudWxsXG4gICAgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJ2lzLWV4dGVuZGFibGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBleHRlbmQoby8qLCBvYmplY3RzKi8pIHtcbiAgaWYgKCFpc09iamVjdChvKSkgeyBvID0ge307IH1cblxuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBvYmogPSBhcmd1bWVudHNbaV07XG5cbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgYXNzaWduKG8sIG9iaik7XG4gICAgfVxuICB9XG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gYXNzaWduKGEsIGIpIHtcbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoaGFzT3duKGIsIGtleSkpIHtcbiAgICAgIGFba2V5XSA9IGJba2V5XTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGBrZXlgIGlzIGFuIG93biBwcm9wZXJ0eSBvZiBgb2JqYC5cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHlwZU9mID0gcmVxdWlyZSgna2luZC1vZicpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZC1zaGFsbG93Jyk7XG5cbi8qKlxuICogUGFyc2Ugc2VjdGlvbnMgaW4gYGlucHV0YCB3aXRoIHRoZSBnaXZlbiBgb3B0aW9uc2AuXG4gKlxuICogYGBganNcbiAqIHZhciBzZWN0aW9ucyA9IHJlcXVpcmUoJ3slPSBuYW1lICV9Jyk7XG4gKiB2YXIgcmVzdWx0ID0gc2VjdGlvbnMoaW5wdXQsIG9wdGlvbnMpO1xuICogLy8geyBjb250ZW50OiAnQ29udGVudCBiZWZvcmUgc2VjdGlvbnMnLCBzZWN0aW9uczogW10gfVxuICogYGBgXG4gKiBAcGFyYW0ge1N0cmluZ3xCdWZmZXJ8T2JqZWN0fSBgaW5wdXRgIElmIGlucHV0IGlzIGFuIG9iamVjdCwgaXQncyBgY29udGVudGAgcHJvcGVydHkgbXVzdCBiZSBhIHN0cmluZyBvciBidWZmZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgYGNvbnRlbnRgIHN0cmluZyBhbmQgYW4gYXJyYXkgb2YgYHNlY3Rpb25zYCBvYmplY3RzLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGlucHV0LCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMgPSB7IHBhcnNlOiBvcHRpb25zIH07XG4gIH1cblxuICB2YXIgZmlsZSA9IHRvT2JqZWN0KGlucHV0KTtcbiAgdmFyIGRlZmF1bHRzID0ge3NlY3Rpb25fZGVsaW1pdGVyOiAnLS0tJywgcGFyc2U6IGlkZW50aXR5fTtcbiAgdmFyIG9wdHMgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcbiAgdmFyIGRlbGltID0gb3B0cy5zZWN0aW9uX2RlbGltaXRlcjtcbiAgdmFyIGxpbmVzID0gZmlsZS5jb250ZW50LnNwbGl0KC9cXHI/XFxuLyk7XG4gIHZhciBzZWN0aW9ucyA9IG51bGw7XG4gIHZhciBzZWN0aW9uID0gY3JlYXRlU2VjdGlvbigpO1xuICB2YXIgY29udGVudCA9IFtdO1xuICB2YXIgc3RhY2sgPSBbXTtcblxuICBmdW5jdGlvbiBpbml0U2VjdGlvbnModmFsKSB7XG4gICAgZmlsZS5jb250ZW50ID0gdmFsO1xuICAgIHNlY3Rpb25zID0gW107XG4gICAgY29udGVudCA9IFtdO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VTZWN0aW9uKHZhbCkge1xuICAgIGlmIChzdGFjay5sZW5ndGgpIHtcbiAgICAgIHNlY3Rpb24ua2V5ID0gZ2V0S2V5KHN0YWNrWzBdLCBkZWxpbSk7XG4gICAgICBzZWN0aW9uLmNvbnRlbnQgPSB2YWw7XG4gICAgICBvcHRzLnBhcnNlKHNlY3Rpb24sIHNlY3Rpb25zKTtcbiAgICAgIHNlY3Rpb25zLnB1c2goc2VjdGlvbik7XG4gICAgICBzZWN0aW9uID0gY3JlYXRlU2VjdGlvbigpO1xuICAgICAgY29udGVudCA9IFtdO1xuICAgICAgc3RhY2sgPSBbXTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGxpbmUgPSBsaW5lc1tpXTtcbiAgICB2YXIgbGVuID0gc3RhY2subGVuZ3RoO1xuICAgIHZhciBsbiA9IGxpbmUudHJpbSgpO1xuXG4gICAgaWYgKGlzRGVsaW1pdGVyKGxuLCBkZWxpbSkpIHtcbiAgICAgIGlmIChsbi5sZW5ndGggPT09IDMgJiYgaSAhPT0gMCkge1xuICAgICAgICBpZiAobGVuID09PSAwIHx8IGxlbiA9PT0gMikge1xuICAgICAgICAgIGNvbnRlbnQucHVzaChsaW5lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzdGFjay5wdXNoKGxuKTtcbiAgICAgICAgc2VjdGlvbi5kYXRhID0gY29udGVudC5qb2luKCdcXG4nKTtcbiAgICAgICAgY29udGVudCA9IFtdO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlY3Rpb25zID09PSBudWxsKSB7XG4gICAgICAgIGluaXRTZWN0aW9ucyhjb250ZW50LmpvaW4oJ1xcbicpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICBjbG9zZVNlY3Rpb24oY29udGVudC5qb2luKCdcXG4nKSk7XG4gICAgICB9XG5cbiAgICAgIHN0YWNrLnB1c2gobG4pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29udGVudC5wdXNoKGxpbmUpO1xuICB9XG5cbiAgaWYgKHNlY3Rpb25zID09PSBudWxsKSB7XG4gICAgaW5pdFNlY3Rpb25zKGNvbnRlbnQuam9pbignXFxuJykpO1xuICB9IGVsc2Uge1xuICAgIGNsb3NlU2VjdGlvbihjb250ZW50LmpvaW4oJ1xcbicpKTtcbiAgfVxuXG4gIGZpbGUuc2VjdGlvbnMgPSBzZWN0aW9ucztcbiAgcmV0dXJuIGZpbGU7XG59O1xuXG5mdW5jdGlvbiBpc0RlbGltaXRlcihsaW5lLCBkZWxpbSkge1xuICBpZiAobGluZS5zbGljZSgwLCBkZWxpbS5sZW5ndGgpICE9PSBkZWxpbSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAobGluZS5jaGFyQXQoZGVsaW0ubGVuZ3RoICsgMSkgPT09IGRlbGltLnNsaWNlKC0xKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdG9PYmplY3QoaW5wdXQpIHtcbiAgaWYgKHR5cGVPZihpbnB1dCkgIT09ICdvYmplY3QnKSB7XG4gICAgaW5wdXQgPSB7IGNvbnRlbnQ6IGlucHV0IH07XG4gIH1cblxuICBpZiAodHlwZW9mIGlucHV0LmNvbnRlbnQgIT09ICdzdHJpbmcnICYmICFpc0J1ZmZlcihpbnB1dC5jb250ZW50KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGEgYnVmZmVyIG9yIHN0cmluZycpO1xuICB9XG5cbiAgaW5wdXQuY29udGVudCA9IGlucHV0LmNvbnRlbnQudG9TdHJpbmcoKTtcbiAgaW5wdXQuc2VjdGlvbnMgPSBbXTtcbiAgcmV0dXJuIGlucHV0O1xufVxuXG5mdW5jdGlvbiBnZXRLZXkodmFsLCBkZWxpbSkge1xuICByZXR1cm4gdmFsID8gdmFsLnNsaWNlKGRlbGltLmxlbmd0aCkudHJpbSgpIDogJyc7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlY3Rpb24oKSB7XG4gIHJldHVybiB7IGtleTogJycsIGRhdGE6ICcnLCBjb250ZW50OiAnJyB9O1xufVxuXG5mdW5jdGlvbiBpZGVudGl0eSh2YWwpIHtcbiAgcmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIGlmICh2YWwgJiYgdmFsLmNvbnN0cnVjdG9yICYmIHR5cGVvZiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHZhbCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBpc05vdGhpbmcoc3ViamVjdCkge1xuICByZXR1cm4gKHR5cGVvZiBzdWJqZWN0ID09PSAndW5kZWZpbmVkJykgfHwgKHN1YmplY3QgPT09IG51bGwpO1xufVxuXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHN1YmplY3QpIHtcbiAgcmV0dXJuICh0eXBlb2Ygc3ViamVjdCA9PT0gJ29iamVjdCcpICYmIChzdWJqZWN0ICE9PSBudWxsKTtcbn1cblxuXG5mdW5jdGlvbiB0b0FycmF5KHNlcXVlbmNlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkgcmV0dXJuIHNlcXVlbmNlO1xuICBlbHNlIGlmIChpc05vdGhpbmcoc2VxdWVuY2UpKSByZXR1cm4gW107XG5cbiAgcmV0dXJuIFsgc2VxdWVuY2UgXTtcbn1cblxuXG5mdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgdmFyIGluZGV4LCBsZW5ndGgsIGtleSwgc291cmNlS2V5cztcblxuICBpZiAoc291cmNlKSB7XG4gICAgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gc291cmNlS2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICBrZXkgPSBzb3VyY2VLZXlzW2luZGV4XTtcbiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuXG5mdW5jdGlvbiByZXBlYXQoc3RyaW5nLCBjb3VudCkge1xuICB2YXIgcmVzdWx0ID0gJycsIGN5Y2xlO1xuXG4gIGZvciAoY3ljbGUgPSAwOyBjeWNsZSA8IGNvdW50OyBjeWNsZSArPSAxKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gaXNOZWdhdGl2ZVplcm8obnVtYmVyKSB7XG4gIHJldHVybiAobnVtYmVyID09PSAwKSAmJiAoTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZID09PSAxIC8gbnVtYmVyKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cy5pc05vdGhpbmcgICAgICA9IGlzTm90aGluZztcbm1vZHVsZS5leHBvcnRzLmlzT2JqZWN0ICAgICAgID0gaXNPYmplY3Q7XG5tb2R1bGUuZXhwb3J0cy50b0FycmF5ICAgICAgICA9IHRvQXJyYXk7XG5tb2R1bGUuZXhwb3J0cy5yZXBlYXQgICAgICAgICA9IHJlcGVhdDtcbm1vZHVsZS5leHBvcnRzLmlzTmVnYXRpdmVaZXJvID0gaXNOZWdhdGl2ZVplcm87XG5tb2R1bGUuZXhwb3J0cy5leHRlbmQgICAgICAgICA9IGV4dGVuZDtcbiIsICIvLyBZQU1MIGVycm9yIGNsYXNzLiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg0NTg5ODRcbi8vXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFlBTUxFeGNlcHRpb24ocmVhc29uLCBtYXJrKSB7XG4gIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5uYW1lID0gJ1lBTUxFeGNlcHRpb24nO1xuICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgdGhpcy5tYXJrID0gbWFyaztcbiAgdGhpcy5tZXNzYWdlID0gKHRoaXMucmVhc29uIHx8ICcodW5rbm93biByZWFzb24pJykgKyAodGhpcy5tYXJrID8gJyAnICsgdGhpcy5tYXJrLnRvU3RyaW5nKCkgOiAnJyk7XG5cbiAgLy8gSW5jbHVkZSBzdGFjayB0cmFjZSBpbiBlcnJvciBvYmplY3RcbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgLy8gQ2hyb21lIGFuZCBOb2RlSlNcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGRiwgSUUgMTArIGFuZCBTYWZhcmkgNisuIEZhbGxiYWNrIGZvciBvdGhlcnNcbiAgICB0aGlzLnN0YWNrID0gKG5ldyBFcnJvcigpKS5zdGFjayB8fCAnJztcbiAgfVxufVxuXG5cbi8vIEluaGVyaXQgZnJvbSBFcnJvclxuWUFNTEV4Y2VwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5ZQU1MRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFlBTUxFeGNlcHRpb247XG5cblxuWUFNTEV4Y2VwdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhjb21wYWN0KSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLm5hbWUgKyAnOiAnO1xuXG4gIHJlc3VsdCArPSB0aGlzLnJlYXNvbiB8fCAnKHVua25vd24gcmVhc29uKSc7XG5cbiAgaWYgKCFjb21wYWN0ICYmIHRoaXMubWFyaykge1xuICAgIHJlc3VsdCArPSAnICcgKyB0aGlzLm1hcmsudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gWUFNTEV4Y2VwdGlvbjtcbiIsICIndXNlIHN0cmljdCc7XG5cblxudmFyIGNvbW1vbiA9IHJlcXVpcmUoJy4vY29tbW9uJyk7XG5cblxuZnVuY3Rpb24gTWFyayhuYW1lLCBidWZmZXIsIHBvc2l0aW9uLCBsaW5lLCBjb2x1bW4pIHtcbiAgdGhpcy5uYW1lICAgICA9IG5hbWU7XG4gIHRoaXMuYnVmZmVyICAgPSBidWZmZXI7XG4gIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgdGhpcy5saW5lICAgICA9IGxpbmU7XG4gIHRoaXMuY29sdW1uICAgPSBjb2x1bW47XG59XG5cblxuTWFyay5wcm90b3R5cGUuZ2V0U25pcHBldCA9IGZ1bmN0aW9uIGdldFNuaXBwZXQoaW5kZW50LCBtYXhMZW5ndGgpIHtcbiAgdmFyIGhlYWQsIHN0YXJ0LCB0YWlsLCBlbmQsIHNuaXBwZXQ7XG5cbiAgaWYgKCF0aGlzLmJ1ZmZlcikgcmV0dXJuIG51bGw7XG5cbiAgaW5kZW50ID0gaW5kZW50IHx8IDQ7XG4gIG1heExlbmd0aCA9IG1heExlbmd0aCB8fCA3NTtcblxuICBoZWFkID0gJyc7XG4gIHN0YXJ0ID0gdGhpcy5wb3NpdGlvbjtcblxuICB3aGlsZSAoc3RhcnQgPiAwICYmICdcXHgwMFxcclxcblxceDg1XFx1MjAyOFxcdTIwMjknLmluZGV4T2YodGhpcy5idWZmZXIuY2hhckF0KHN0YXJ0IC0gMSkpID09PSAtMSkge1xuICAgIHN0YXJ0IC09IDE7XG4gICAgaWYgKHRoaXMucG9zaXRpb24gLSBzdGFydCA+IChtYXhMZW5ndGggLyAyIC0gMSkpIHtcbiAgICAgIGhlYWQgPSAnIC4uLiAnO1xuICAgICAgc3RhcnQgKz0gNTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHRhaWwgPSAnJztcbiAgZW5kID0gdGhpcy5wb3NpdGlvbjtcblxuICB3aGlsZSAoZW5kIDwgdGhpcy5idWZmZXIubGVuZ3RoICYmICdcXHgwMFxcclxcblxceDg1XFx1MjAyOFxcdTIwMjknLmluZGV4T2YodGhpcy5idWZmZXIuY2hhckF0KGVuZCkpID09PSAtMSkge1xuICAgIGVuZCArPSAxO1xuICAgIGlmIChlbmQgLSB0aGlzLnBvc2l0aW9uID4gKG1heExlbmd0aCAvIDIgLSAxKSkge1xuICAgICAgdGFpbCA9ICcgLi4uICc7XG4gICAgICBlbmQgLT0gNTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHNuaXBwZXQgPSB0aGlzLmJ1ZmZlci5zbGljZShzdGFydCwgZW5kKTtcblxuICByZXR1cm4gY29tbW9uLnJlcGVhdCgnICcsIGluZGVudCkgKyBoZWFkICsgc25pcHBldCArIHRhaWwgKyAnXFxuJyArXG4gICAgICAgICBjb21tb24ucmVwZWF0KCcgJywgaW5kZW50ICsgdGhpcy5wb3NpdGlvbiAtIHN0YXJ0ICsgaGVhZC5sZW5ndGgpICsgJ14nO1xufTtcblxuXG5NYXJrLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKGNvbXBhY3QpIHtcbiAgdmFyIHNuaXBwZXQsIHdoZXJlID0gJyc7XG5cbiAgaWYgKHRoaXMubmFtZSkge1xuICAgIHdoZXJlICs9ICdpbiBcIicgKyB0aGlzLm5hbWUgKyAnXCIgJztcbiAgfVxuXG4gIHdoZXJlICs9ICdhdCBsaW5lICcgKyAodGhpcy5saW5lICsgMSkgKyAnLCBjb2x1bW4gJyArICh0aGlzLmNvbHVtbiArIDEpO1xuXG4gIGlmICghY29tcGFjdCkge1xuICAgIHNuaXBwZXQgPSB0aGlzLmdldFNuaXBwZXQoKTtcblxuICAgIGlmIChzbmlwcGV0KSB7XG4gICAgICB3aGVyZSArPSAnOlxcbicgKyBzbmlwcGV0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3aGVyZTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBNYXJrO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFlBTUxFeGNlcHRpb24gPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpO1xuXG52YXIgVFlQRV9DT05TVFJVQ1RPUl9PUFRJT05TID0gW1xuICAna2luZCcsXG4gICdyZXNvbHZlJyxcbiAgJ2NvbnN0cnVjdCcsXG4gICdpbnN0YW5jZU9mJyxcbiAgJ3ByZWRpY2F0ZScsXG4gICdyZXByZXNlbnQnLFxuICAnZGVmYXVsdFN0eWxlJyxcbiAgJ3N0eWxlQWxpYXNlcydcbl07XG5cbnZhciBZQU1MX05PREVfS0lORFMgPSBbXG4gICdzY2FsYXInLFxuICAnc2VxdWVuY2UnLFxuICAnbWFwcGluZydcbl07XG5cbmZ1bmN0aW9uIGNvbXBpbGVTdHlsZUFsaWFzZXMobWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgbWFwW3N0eWxlXS5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhcykge1xuICAgICAgICByZXN1bHRbU3RyaW5nKGFsaWFzKV0gPSBzdHlsZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gVHlwZSh0YWcsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmIChUWVBFX0NPTlNUUlVDVE9SX09QVElPTlMuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdVbmtub3duIG9wdGlvbiBcIicgKyBuYW1lICsgJ1wiIGlzIG1ldCBpbiBkZWZpbml0aW9uIG9mIFwiJyArIHRhZyArICdcIiBZQU1MIHR5cGUuJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBUT0RPOiBBZGQgdGFnIGZvcm1hdCBjaGVjay5cbiAgdGhpcy50YWcgICAgICAgICAgPSB0YWc7XG4gIHRoaXMua2luZCAgICAgICAgID0gb3B0aW9uc1sna2luZCddICAgICAgICAgfHwgbnVsbDtcbiAgdGhpcy5yZXNvbHZlICAgICAgPSBvcHRpb25zWydyZXNvbHZlJ10gICAgICB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuICB0aGlzLmNvbnN0cnVjdCAgICA9IG9wdGlvbnNbJ2NvbnN0cnVjdCddICAgIHx8IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhOyB9O1xuICB0aGlzLmluc3RhbmNlT2YgICA9IG9wdGlvbnNbJ2luc3RhbmNlT2YnXSAgIHx8IG51bGw7XG4gIHRoaXMucHJlZGljYXRlICAgID0gb3B0aW9uc1sncHJlZGljYXRlJ10gICAgfHwgbnVsbDtcbiAgdGhpcy5yZXByZXNlbnQgICAgPSBvcHRpb25zWydyZXByZXNlbnQnXSAgICB8fCBudWxsO1xuICB0aGlzLmRlZmF1bHRTdHlsZSA9IG9wdGlvbnNbJ2RlZmF1bHRTdHlsZSddIHx8IG51bGw7XG4gIHRoaXMuc3R5bGVBbGlhc2VzID0gY29tcGlsZVN0eWxlQWxpYXNlcyhvcHRpb25zWydzdHlsZUFsaWFzZXMnXSB8fCBudWxsKTtcblxuICBpZiAoWUFNTF9OT0RFX0tJTkRTLmluZGV4T2YodGhpcy5raW5kKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbignVW5rbm93biBraW5kIFwiJyArIHRoaXMua2luZCArICdcIiBpcyBzcGVjaWZpZWQgZm9yIFwiJyArIHRhZyArICdcIiBZQU1MIHR5cGUuJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUeXBlO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuKi9cblxudmFyIGNvbW1vbiAgICAgICAgPSByZXF1aXJlKCcuL2NvbW1vbicpO1xudmFyIFlBTUxFeGNlcHRpb24gPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpO1xudmFyIFR5cGUgICAgICAgICAgPSByZXF1aXJlKCcuL3R5cGUnKTtcblxuXG5mdW5jdGlvbiBjb21waWxlTGlzdChzY2hlbWEsIG5hbWUsIHJlc3VsdCkge1xuICB2YXIgZXhjbHVkZSA9IFtdO1xuXG4gIHNjaGVtYS5pbmNsdWRlLmZvckVhY2goZnVuY3Rpb24gKGluY2x1ZGVkU2NoZW1hKSB7XG4gICAgcmVzdWx0ID0gY29tcGlsZUxpc3QoaW5jbHVkZWRTY2hlbWEsIG5hbWUsIHJlc3VsdCk7XG4gIH0pO1xuXG4gIHNjaGVtYVtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChjdXJyZW50VHlwZSkge1xuICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChwcmV2aW91c1R5cGUsIHByZXZpb3VzSW5kZXgpIHtcbiAgICAgIGlmIChwcmV2aW91c1R5cGUudGFnID09PSBjdXJyZW50VHlwZS50YWcgJiYgcHJldmlvdXNUeXBlLmtpbmQgPT09IGN1cnJlbnRUeXBlLmtpbmQpIHtcbiAgICAgICAgZXhjbHVkZS5wdXNoKHByZXZpb3VzSW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzdWx0LnB1c2goY3VycmVudFR5cGUpO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodHlwZSwgaW5kZXgpIHtcbiAgICByZXR1cm4gZXhjbHVkZS5pbmRleE9mKGluZGV4KSA9PT0gLTE7XG4gIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBpbGVNYXAoLyogbGlzdHMuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgc2NhbGFyOiB7fSxcbiAgICAgICAgc2VxdWVuY2U6IHt9LFxuICAgICAgICBtYXBwaW5nOiB7fSxcbiAgICAgICAgZmFsbGJhY2s6IHt9XG4gICAgICB9LCBpbmRleCwgbGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3RUeXBlKHR5cGUpIHtcbiAgICByZXN1bHRbdHlwZS5raW5kXVt0eXBlLnRhZ10gPSByZXN1bHRbJ2ZhbGxiYWNrJ11bdHlwZS50YWddID0gdHlwZTtcbiAgfVxuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGFyZ3VtZW50c1tpbmRleF0uZm9yRWFjaChjb2xsZWN0VHlwZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBTY2hlbWEoZGVmaW5pdGlvbikge1xuICB0aGlzLmluY2x1ZGUgID0gZGVmaW5pdGlvbi5pbmNsdWRlICB8fCBbXTtcbiAgdGhpcy5pbXBsaWNpdCA9IGRlZmluaXRpb24uaW1wbGljaXQgfHwgW107XG4gIHRoaXMuZXhwbGljaXQgPSBkZWZpbml0aW9uLmV4cGxpY2l0IHx8IFtdO1xuXG4gIHRoaXMuaW1wbGljaXQuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIGlmICh0eXBlLmxvYWRLaW5kICYmIHR5cGUubG9hZEtpbmQgIT09ICdzY2FsYXInKSB7XG4gICAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbignVGhlcmUgaXMgYSBub24tc2NhbGFyIHR5cGUgaW4gdGhlIGltcGxpY2l0IGxpc3Qgb2YgYSBzY2hlbWEuIEltcGxpY2l0IHJlc29sdmluZyBvZiBzdWNoIHR5cGVzIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuICB9KTtcblxuICB0aGlzLmNvbXBpbGVkSW1wbGljaXQgPSBjb21waWxlTGlzdCh0aGlzLCAnaW1wbGljaXQnLCBbXSk7XG4gIHRoaXMuY29tcGlsZWRFeHBsaWNpdCA9IGNvbXBpbGVMaXN0KHRoaXMsICdleHBsaWNpdCcsIFtdKTtcbiAgdGhpcy5jb21waWxlZFR5cGVNYXAgID0gY29tcGlsZU1hcCh0aGlzLmNvbXBpbGVkSW1wbGljaXQsIHRoaXMuY29tcGlsZWRFeHBsaWNpdCk7XG59XG5cblxuU2NoZW1hLkRFRkFVTFQgPSBudWxsO1xuXG5cblNjaGVtYS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGVTY2hlbWEoKSB7XG4gIHZhciBzY2hlbWFzLCB0eXBlcztcblxuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDE6XG4gICAgICBzY2hlbWFzID0gU2NoZW1hLkRFRkFVTFQ7XG4gICAgICB0eXBlcyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOlxuICAgICAgc2NoZW1hcyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIHR5cGVzID0gYXJndW1lbnRzWzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJ1dyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIFNjaGVtYS5jcmVhdGUgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHNjaGVtYXMgPSBjb21tb24udG9BcnJheShzY2hlbWFzKTtcbiAgdHlwZXMgPSBjb21tb24udG9BcnJheSh0eXBlcyk7XG5cbiAgaWYgKCFzY2hlbWFzLmV2ZXJ5KGZ1bmN0aW9uIChzY2hlbWEpIHsgcmV0dXJuIHNjaGVtYSBpbnN0YW5jZW9mIFNjaGVtYTsgfSkpIHtcbiAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbignU3BlY2lmaWVkIGxpc3Qgb2Ygc3VwZXIgc2NoZW1hcyAob3IgYSBzaW5nbGUgU2NoZW1hIG9iamVjdCkgY29udGFpbnMgYSBub24tU2NoZW1hIG9iamVjdC4nKTtcbiAgfVxuXG4gIGlmICghdHlwZXMuZXZlcnkoZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHR5cGUgaW5zdGFuY2VvZiBUeXBlOyB9KSkge1xuICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdTcGVjaWZpZWQgbGlzdCBvZiBZQU1MIHR5cGVzIChvciBhIHNpbmdsZSBUeXBlIG9iamVjdCkgY29udGFpbnMgYSBub24tVHlwZSBvYmplY3QuJyk7XG4gIH1cblxuICByZXR1cm4gbmV3IFNjaGVtYSh7XG4gICAgaW5jbHVkZTogc2NoZW1hcyxcbiAgICBleHBsaWNpdDogdHlwZXNcbiAgfSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gU2NoZW1hO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnN0cicsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogJyc7IH1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNlcScsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiBbXTsgfVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgVHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bWFwJywge1xuICBraW5kOiAnbWFwcGluZycsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307IH1cbn0pO1xuIiwgIi8vIFN0YW5kYXJkIFlBTUwncyBGYWlsc2FmZSBzY2hlbWEuXG4vLyBodHRwOi8vd3d3LnlhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNpZDI4MDIzNDZcblxuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIFNjaGVtYSA9IHJlcXVpcmUoJy4uL3NjaGVtYScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFNjaGVtYSh7XG4gIGV4cGxpY2l0OiBbXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9zdHInKSxcbiAgICByZXF1aXJlKCcuLi90eXBlL3NlcScpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvbWFwJylcbiAgXVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxOdWxsKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBtYXggPSBkYXRhLmxlbmd0aDtcblxuICByZXR1cm4gKG1heCA9PT0gMSAmJiBkYXRhID09PSAnficpIHx8XG4gICAgICAgICAobWF4ID09PSA0ICYmIChkYXRhID09PSAnbnVsbCcgfHwgZGF0YSA9PT0gJ051bGwnIHx8IGRhdGEgPT09ICdOVUxMJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sTnVsbCgpIHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdCA9PT0gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgVHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bnVsbCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sTnVsbCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sTnVsbCxcbiAgcHJlZGljYXRlOiBpc051bGwsXG4gIHJlcHJlc2VudDoge1xuICAgIGNhbm9uaWNhbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ34nOyAgICB9LFxuICAgIGxvd2VyY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ251bGwnOyB9LFxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ05VTEwnOyB9LFxuICAgIGNhbWVsY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ051bGwnOyB9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQm9vbGVhbihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoO1xuXG4gIHJldHVybiAobWF4ID09PSA0ICYmIChkYXRhID09PSAndHJ1ZScgfHwgZGF0YSA9PT0gJ1RydWUnIHx8IGRhdGEgPT09ICdUUlVFJykpIHx8XG4gICAgICAgICAobWF4ID09PSA1ICYmIChkYXRhID09PSAnZmFsc2UnIHx8IGRhdGEgPT09ICdGYWxzZScgfHwgZGF0YSA9PT0gJ0ZBTFNFJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQm9vbGVhbihkYXRhKSB7XG4gIHJldHVybiBkYXRhID09PSAndHJ1ZScgfHxcbiAgICAgICAgIGRhdGEgPT09ICdUcnVlJyB8fFxuICAgICAgICAgZGF0YSA9PT0gJ1RSVUUnO1xufVxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4ob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpib29sJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxCb29sZWFuLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxCb29sZWFuLFxuICBwcmVkaWNhdGU6IGlzQm9vbGVhbixcbiAgcmVwcmVzZW50OiB7XG4gICAgbG93ZXJjYXNlOiBmdW5jdGlvbiAob2JqZWN0KSB7IHJldHVybiBvYmplY3QgPyAndHJ1ZScgOiAnZmFsc2UnOyB9LFxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gKG9iamVjdCkgeyByZXR1cm4gb2JqZWN0ID8gJ1RSVUUnIDogJ0ZBTFNFJzsgfSxcbiAgICBjYW1lbGNhc2U6IGZ1bmN0aW9uIChvYmplY3QpIHsgcmV0dXJuIG9iamVjdCA/ICdUcnVlJyA6ICdGYWxzZSc7IH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnbG93ZXJjYXNlJ1xufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29tbW9uID0gcmVxdWlyZSgnLi4vY29tbW9uJyk7XG52YXIgVHlwZSAgID0gcmVxdWlyZSgnLi4vdHlwZScpO1xuXG5mdW5jdGlvbiBpc0hleENvZGUoYykge1xuICByZXR1cm4gKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM5LyogOSAqLykpIHx8XG4gICAgICAgICAoKDB4NDEvKiBBICovIDw9IGMpICYmIChjIDw9IDB4NDYvKiBGICovKSkgfHxcbiAgICAgICAgICgoMHg2MS8qIGEgKi8gPD0gYykgJiYgKGMgPD0gMHg2Ni8qIGYgKi8pKTtcbn1cblxuZnVuY3Rpb24gaXNPY3RDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzNy8qIDcgKi8pKTtcbn1cblxuZnVuY3Rpb24gaXNEZWNDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxJbnRlZ2VyKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgbWF4ID0gZGF0YS5sZW5ndGgsXG4gICAgICBpbmRleCA9IDAsXG4gICAgICBoYXNEaWdpdHMgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIGlmICghbWF4KSByZXR1cm4gZmFsc2U7XG5cbiAgY2ggPSBkYXRhW2luZGV4XTtcblxuICAvLyBzaWduXG4gIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycpIHtcbiAgICBjaCA9IGRhdGFbKytpbmRleF07XG4gIH1cblxuICBpZiAoY2ggPT09ICcwJykge1xuICAgIC8vIDBcbiAgICBpZiAoaW5kZXggKyAxID09PSBtYXgpIHJldHVybiB0cnVlO1xuICAgIGNoID0gZGF0YVsrK2luZGV4XTtcblxuICAgIC8vIGJhc2UgMiwgYmFzZSA4LCBiYXNlIDE2XG5cbiAgICBpZiAoY2ggPT09ICdiJykge1xuICAgICAgLy8gYmFzZSAyXG4gICAgICBpbmRleCsrO1xuXG4gICAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoY2ggIT09ICcwJyAmJiBjaCAhPT0gJzEnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzRGlnaXRzICYmIGNoICE9PSAnXyc7XG4gICAgfVxuXG5cbiAgICBpZiAoY2ggPT09ICd4Jykge1xuICAgICAgLy8gYmFzZSAxNlxuICAgICAgaW5kZXgrKztcblxuICAgICAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFpc0hleENvZGUoZGF0YS5jaGFyQ29kZUF0KGluZGV4KSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNEaWdpdHMgJiYgY2ggIT09ICdfJztcbiAgICB9XG5cbiAgICAvLyBiYXNlIDhcbiAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgICBpZiAoIWlzT2N0Q29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICB9XG5cbiAgLy8gYmFzZSAxMCAoZXhjZXB0IDApIG9yIGJhc2UgNjBcblxuICAvLyB2YWx1ZSBzaG91bGQgbm90IHN0YXJ0IHdpdGggYF9gO1xuICBpZiAoY2ggPT09ICdfJykgcmV0dXJuIGZhbHNlO1xuXG4gIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgIGlmIChjaCA9PT0gJzonKSBicmVhaztcbiAgICBpZiAoIWlzRGVjQ29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICB9XG5cbiAgLy8gU2hvdWxkIGhhdmUgZGlnaXRzIGFuZCBzaG91bGQgbm90IGVuZCB3aXRoIGBfYFxuICBpZiAoIWhhc0RpZ2l0cyB8fCBjaCA9PT0gJ18nKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gaWYgIWJhc2U2MCAtIGRvbmU7XG4gIGlmIChjaCAhPT0gJzonKSByZXR1cm4gdHJ1ZTtcblxuICAvLyBiYXNlNjAgYWxtb3N0IG5vdCB1c2VkLCBubyBuZWVkcyB0byBvcHRpbWl6ZVxuICByZXR1cm4gL14oOlswLTVdP1swLTldKSskLy50ZXN0KGRhdGEuc2xpY2UoaW5kZXgpKTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbEludGVnZXIoZGF0YSkge1xuICB2YXIgdmFsdWUgPSBkYXRhLCBzaWduID0gMSwgY2gsIGJhc2UsIGRpZ2l0cyA9IFtdO1xuXG4gIGlmICh2YWx1ZS5pbmRleE9mKCdfJykgIT09IC0xKSB7XG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9fL2csICcnKTtcbiAgfVxuXG4gIGNoID0gdmFsdWVbMF07XG5cbiAgaWYgKGNoID09PSAnLScgfHwgY2ggPT09ICcrJykge1xuICAgIGlmIChjaCA9PT0gJy0nKSBzaWduID0gLTE7XG4gICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxKTtcbiAgICBjaCA9IHZhbHVlWzBdO1xuICB9XG5cbiAgaWYgKHZhbHVlID09PSAnMCcpIHJldHVybiAwO1xuXG4gIGlmIChjaCA9PT0gJzAnKSB7XG4gICAgaWYgKHZhbHVlWzFdID09PSAnYicpIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIDIpO1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ3gnKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLCAxNik7XG4gICAgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZSwgOCk7XG4gIH1cblxuICBpZiAodmFsdWUuaW5kZXhPZignOicpICE9PSAtMSkge1xuICAgIHZhbHVlLnNwbGl0KCc6JykuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgZGlnaXRzLnVuc2hpZnQocGFyc2VJbnQodiwgMTApKTtcbiAgICB9KTtcblxuICAgIHZhbHVlID0gMDtcbiAgICBiYXNlID0gMTtcblxuICAgIGRpZ2l0cy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YWx1ZSArPSAoZCAqIGJhc2UpO1xuICAgICAgYmFzZSAqPSA2MDtcbiAgICB9KTtcblxuICAgIHJldHVybiBzaWduICogdmFsdWU7XG5cbiAgfVxuXG4gIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUsIDEwKTtcbn1cblxuZnVuY3Rpb24gaXNJbnRlZ2VyKG9iamVjdCkge1xuICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpKSA9PT0gJ1tvYmplY3QgTnVtYmVyXScgJiZcbiAgICAgICAgIChvYmplY3QgJSAxID09PSAwICYmICFjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmludCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sSW50ZWdlcixcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sSW50ZWdlcixcbiAgcHJlZGljYXRlOiBpc0ludGVnZXIsXG4gIHJlcHJlc2VudDoge1xuICAgIGJpbmFyeTogICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcwYicgKyBvYmoudG9TdHJpbmcoMikgOiAnLTBiJyArIG9iai50b1N0cmluZygyKS5zbGljZSgxKTsgfSxcbiAgICBvY3RhbDogICAgICAgZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqID49IDAgPyAnMCcgICsgb2JqLnRvU3RyaW5nKDgpIDogJy0wJyAgKyBvYmoudG9TdHJpbmcoOCkuc2xpY2UoMSk7IH0sXG4gICAgZGVjaW1hbDogICAgIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai50b1N0cmluZygxMCk7IH0sXG4gICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgIGhleGFkZWNpbWFsOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcweCcgKyBvYmoudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkgOiAgJy0weCcgKyBvYmoudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkuc2xpY2UoMSk7IH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnZGVjaW1hbCcsXG4gIHN0eWxlQWxpYXNlczoge1xuICAgIGJpbmFyeTogICAgICBbIDIsICAnYmluJyBdLFxuICAgIG9jdGFsOiAgICAgICBbIDgsICAnb2N0JyBdLFxuICAgIGRlY2ltYWw6ICAgICBbIDEwLCAnZGVjJyBdLFxuICAgIGhleGFkZWNpbWFsOiBbIDE2LCAnaGV4JyBdXG4gIH1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGNvbW1vbiA9IHJlcXVpcmUoJy4uL2NvbW1vbicpO1xudmFyIFR5cGUgICA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxudmFyIFlBTUxfRkxPQVRfUEFUVEVSTiA9IG5ldyBSZWdFeHAoXG4gIC8vIDIuNWU0LCAyLjUgYW5kIGludGVnZXJzXG4gICdeKD86Wy0rXT8oPzowfFsxLTldWzAtOV9dKikoPzpcXFxcLlswLTlfXSopPyg/OltlRV1bLStdP1swLTldKyk/JyArXG4gIC8vIC4yZTQsIC4yXG4gIC8vIHNwZWNpYWwgY2FzZSwgc2VlbXMgbm90IGZyb20gc3BlY1xuICAnfFxcXFwuWzAtOV9dKyg/OltlRV1bLStdP1swLTldKyk/JyArXG4gIC8vIDIwOjU5XG4gICd8Wy0rXT9bMC05XVswLTlfXSooPzo6WzAtNV0/WzAtOV0pK1xcXFwuWzAtOV9dKicgK1xuICAvLyAuaW5mXG4gICd8Wy0rXT9cXFxcLig/OmluZnxJbmZ8SU5GKScgK1xuICAvLyAubmFuXG4gICd8XFxcXC4oPzpuYW58TmFOfE5BTikpJCcpO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEZsb2F0KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICBpZiAoIVlBTUxfRkxPQVRfUEFUVEVSTi50ZXN0KGRhdGEpIHx8XG4gICAgICAvLyBRdWljayBoYWNrIHRvIG5vdCBhbGxvdyBpbnRlZ2VycyBlbmQgd2l0aCBgX2BcbiAgICAgIC8vIFByb2JhYmx5IHNob3VsZCB1cGRhdGUgcmVnZXhwICYgY2hlY2sgc3BlZWRcbiAgICAgIGRhdGFbZGF0YS5sZW5ndGggLSAxXSA9PT0gJ18nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxGbG9hdChkYXRhKSB7XG4gIHZhciB2YWx1ZSwgc2lnbiwgYmFzZSwgZGlnaXRzO1xuXG4gIHZhbHVlICA9IGRhdGEucmVwbGFjZSgvXy9nLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgc2lnbiAgID0gdmFsdWVbMF0gPT09ICctJyA/IC0xIDogMTtcbiAgZGlnaXRzID0gW107XG5cbiAgaWYgKCcrLScuaW5kZXhPZih2YWx1ZVswXSkgPj0gMCkge1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICBpZiAodmFsdWUgPT09ICcuaW5mJykge1xuICAgIHJldHVybiAoc2lnbiA9PT0gMSkgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJy5uYW4nKSB7XG4gICAgcmV0dXJuIE5hTjtcblxuICB9IGVsc2UgaWYgKHZhbHVlLmluZGV4T2YoJzonKSA+PSAwKSB7XG4gICAgdmFsdWUuc3BsaXQoJzonKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICBkaWdpdHMudW5zaGlmdChwYXJzZUZsb2F0KHYsIDEwKSk7XG4gICAgfSk7XG5cbiAgICB2YWx1ZSA9IDAuMDtcbiAgICBiYXNlID0gMTtcblxuICAgIGRpZ2l0cy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YWx1ZSArPSBkICogYmFzZTtcbiAgICAgIGJhc2UgKj0gNjA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2lnbiAqIHZhbHVlO1xuXG4gIH1cbiAgcmV0dXJuIHNpZ24gKiBwYXJzZUZsb2F0KHZhbHVlLCAxMCk7XG59XG5cblxudmFyIFNDSUVOVElGSUNfV0lUSE9VVF9ET1QgPSAvXlstK10/WzAtOV0rZS87XG5cbmZ1bmN0aW9uIHJlcHJlc2VudFlhbWxGbG9hdChvYmplY3QsIHN0eWxlKSB7XG4gIHZhciByZXM7XG5cbiAgaWYgKGlzTmFOKG9iamVjdCkpIHtcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICBjYXNlICdsb3dlcmNhc2UnOiByZXR1cm4gJy5uYW4nO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICcuTkFOJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLk5hTic7XG4gICAgfVxuICB9IGVsc2UgaWYgKE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA9PT0gb2JqZWN0KSB7XG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbG93ZXJjYXNlJzogcmV0dXJuICcuaW5mJztcbiAgICAgIGNhc2UgJ3VwcGVyY2FzZSc6IHJldHVybiAnLklORic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy5JbmYnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgPT09IG9iamVjdCkge1xuICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6IHJldHVybiAnLS5pbmYnO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICctLklORic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy0uSW5mJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoY29tbW9uLmlzTmVnYXRpdmVaZXJvKG9iamVjdCkpIHtcbiAgICByZXR1cm4gJy0wLjAnO1xuICB9XG5cbiAgcmVzID0gb2JqZWN0LnRvU3RyaW5nKDEwKTtcblxuICAvLyBKUyBzdHJpbmdpZmllciBjYW4gYnVpbGQgc2NpZW50aWZpYyBmb3JtYXQgd2l0aG91dCBkb3RzOiA1ZS0xMDAsXG4gIC8vIHdoaWxlIFlBTUwgcmVxdXJlcyBkb3Q6IDUuZS0xMDAuIEZpeCBpdCB3aXRoIHNpbXBsZSBoYWNrXG5cbiAgcmV0dXJuIFNDSUVOVElGSUNfV0lUSE9VVF9ET1QudGVzdChyZXMpID8gcmVzLnJlcGxhY2UoJ2UnLCAnLmUnKSA6IHJlcztcbn1cblxuZnVuY3Rpb24gaXNGbG9hdChvYmplY3QpIHtcbiAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgTnVtYmVyXScpICYmXG4gICAgICAgICAob2JqZWN0ICUgMSAhPT0gMCB8fCBjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmZsb2F0Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxGbG9hdCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sRmxvYXQsXG4gIHByZWRpY2F0ZTogaXNGbG9hdCxcbiAgcmVwcmVzZW50OiByZXByZXNlbnRZYW1sRmxvYXQsXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuIiwgIi8vIFN0YW5kYXJkIFlBTUwncyBKU09OIHNjaGVtYS5cbi8vIGh0dHA6Ly93d3cueWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2lkMjgwMzIzMVxuLy9cbi8vIE5PVEU6IEpTLVlBTUwgZG9lcyBub3Qgc3VwcG9ydCBzY2hlbWEtc3BlY2lmaWMgdGFnIHJlc29sdXRpb24gcmVzdHJpY3Rpb25zLlxuLy8gU28sIHRoaXMgc2NoZW1hIGlzIG5vdCBzdWNoIHN0cmljdCBhcyBkZWZpbmVkIGluIHRoZSBZQU1MIHNwZWNpZmljYXRpb24uXG4vLyBJdCBhbGxvd3MgbnVtYmVycyBpbiBiaW5hcnkgbm90YWlvbiwgdXNlIGBOdWxsYCBhbmQgYE5VTExgIGFzIGBudWxsYCwgZXRjLlxuXG5cbid1c2Ugc3RyaWN0JztcblxuXG52YXIgU2NoZW1hID0gcmVxdWlyZSgnLi4vc2NoZW1hJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgU2NoZW1hKHtcbiAgaW5jbHVkZTogW1xuICAgIHJlcXVpcmUoJy4vZmFpbHNhZmUnKVxuICBdLFxuICBpbXBsaWNpdDogW1xuICAgIHJlcXVpcmUoJy4uL3R5cGUvbnVsbCcpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvYm9vbCcpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvaW50JyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9mbG9hdCcpXG4gIF1cbn0pO1xuIiwgIi8vIFN0YW5kYXJkIFlBTUwncyBDb3JlIHNjaGVtYS5cbi8vIGh0dHA6Ly93d3cueWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2lkMjgwNDkyM1xuLy9cbi8vIE5PVEU6IEpTLVlBTUwgZG9lcyBub3Qgc3VwcG9ydCBzY2hlbWEtc3BlY2lmaWMgdGFnIHJlc29sdXRpb24gcmVzdHJpY3Rpb25zLlxuLy8gU28sIENvcmUgc2NoZW1hIGhhcyBubyBkaXN0aW5jdGlvbnMgZnJvbSBKU09OIHNjaGVtYSBpcyBKUy1ZQU1MLlxuXG5cbid1c2Ugc3RyaWN0JztcblxuXG52YXIgU2NoZW1hID0gcmVxdWlyZSgnLi4vc2NoZW1hJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgU2NoZW1hKHtcbiAgaW5jbHVkZTogW1xuICAgIHJlcXVpcmUoJy4vanNvbicpXG4gIF1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbnZhciBZQU1MX0RBVEVfUkVHRVhQID0gbmV3IFJlZ0V4cChcbiAgJ14oWzAtOV1bMC05XVswLTldWzAtOV0pJyAgICAgICAgICArIC8vIFsxXSB5ZWFyXG4gICctKFswLTldWzAtOV0pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbMl0gbW9udGhcbiAgJy0oWzAtOV1bMC05XSkkJyk7ICAgICAgICAgICAgICAgICAgIC8vIFszXSBkYXlcblxudmFyIFlBTUxfVElNRVNUQU1QX1JFR0VYUCA9IG5ldyBSZWdFeHAoXG4gICdeKFswLTldWzAtOV1bMC05XVswLTldKScgICAgICAgICAgKyAvLyBbMV0geWVhclxuICAnLShbMC05XVswLTldPyknICAgICAgICAgICAgICAgICAgICsgLy8gWzJdIG1vbnRoXG4gICctKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgKyAvLyBbM10gZGF5XG4gICcoPzpbVHRdfFsgXFxcXHRdKyknICAgICAgICAgICAgICAgICArIC8vIC4uLlxuICAnKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgICsgLy8gWzRdIGhvdXJcbiAgJzooWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFs1XSBtaW51dGVcbiAgJzooWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFs2XSBzZWNvbmRcbiAgJyg/OlxcXFwuKFswLTldKikpPycgICAgICAgICAgICAgICAgICsgLy8gWzddIGZyYWN0aW9uXG4gICcoPzpbIFxcXFx0XSooWnwoWy0rXSkoWzAtOV1bMC05XT8pJyArIC8vIFs4XSB0eiBbOV0gdHpfc2lnbiBbMTBdIHR6X2hvdXJcbiAgJyg/OjooWzAtOV1bMC05XSkpPykpPyQnKTsgICAgICAgICAgIC8vIFsxMV0gdHpfbWludXRlXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sVGltZXN0YW1wKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKFlBTUxfREFURV9SRUdFWFAuZXhlYyhkYXRhKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIGlmIChZQU1MX1RJTUVTVEFNUF9SRUdFWFAuZXhlYyhkYXRhKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFRpbWVzdGFtcChkYXRhKSB7XG4gIHZhciBtYXRjaCwgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uID0gMCxcbiAgICAgIGRlbHRhID0gbnVsbCwgdHpfaG91ciwgdHpfbWludXRlLCBkYXRlO1xuXG4gIG1hdGNoID0gWUFNTF9EQVRFX1JFR0VYUC5leGVjKGRhdGEpO1xuICBpZiAobWF0Y2ggPT09IG51bGwpIG1hdGNoID0gWUFNTF9USU1FU1RBTVBfUkVHRVhQLmV4ZWMoZGF0YSk7XG5cbiAgaWYgKG1hdGNoID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ0RhdGUgcmVzb2x2ZSBlcnJvcicpO1xuXG4gIC8vIG1hdGNoOiBbMV0geWVhciBbMl0gbW9udGggWzNdIGRheVxuXG4gIHllYXIgPSArKG1hdGNoWzFdKTtcbiAgbW9udGggPSArKG1hdGNoWzJdKSAtIDE7IC8vIEpTIG1vbnRoIHN0YXJ0cyB3aXRoIDBcbiAgZGF5ID0gKyhtYXRjaFszXSk7XG5cbiAgaWYgKCFtYXRjaFs0XSkgeyAvLyBubyBob3VyXG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXkpKTtcbiAgfVxuXG4gIC8vIG1hdGNoOiBbNF0gaG91ciBbNV0gbWludXRlIFs2XSBzZWNvbmQgWzddIGZyYWN0aW9uXG5cbiAgaG91ciA9ICsobWF0Y2hbNF0pO1xuICBtaW51dGUgPSArKG1hdGNoWzVdKTtcbiAgc2Vjb25kID0gKyhtYXRjaFs2XSk7XG5cbiAgaWYgKG1hdGNoWzddKSB7XG4gICAgZnJhY3Rpb24gPSBtYXRjaFs3XS5zbGljZSgwLCAzKTtcbiAgICB3aGlsZSAoZnJhY3Rpb24ubGVuZ3RoIDwgMykgeyAvLyBtaWxsaS1zZWNvbmRzXG4gICAgICBmcmFjdGlvbiArPSAnMCc7XG4gICAgfVxuICAgIGZyYWN0aW9uID0gK2ZyYWN0aW9uO1xuICB9XG5cbiAgLy8gbWF0Y2g6IFs4XSB0eiBbOV0gdHpfc2lnbiBbMTBdIHR6X2hvdXIgWzExXSB0el9taW51dGVcblxuICBpZiAobWF0Y2hbOV0pIHtcbiAgICB0el9ob3VyID0gKyhtYXRjaFsxMF0pO1xuICAgIHR6X21pbnV0ZSA9ICsobWF0Y2hbMTFdIHx8IDApO1xuICAgIGRlbHRhID0gKHR6X2hvdXIgKiA2MCArIHR6X21pbnV0ZSkgKiA2MDAwMDsgLy8gZGVsdGEgaW4gbWlsaS1zZWNvbmRzXG4gICAgaWYgKG1hdGNoWzldID09PSAnLScpIGRlbHRhID0gLWRlbHRhO1xuICB9XG5cbiAgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBmcmFjdGlvbikpO1xuXG4gIGlmIChkZWx0YSkgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gZGVsdGEpO1xuXG4gIHJldHVybiBkYXRlO1xufVxuXG5mdW5jdGlvbiByZXByZXNlbnRZYW1sVGltZXN0YW1wKG9iamVjdCAvKiwgc3R5bGUqLykge1xuICByZXR1cm4gb2JqZWN0LnRvSVNPU3RyaW5nKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnRpbWVzdGFtcCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sVGltZXN0YW1wLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxUaW1lc3RhbXAsXG4gIGluc3RhbmNlT2Y6IERhdGUsXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbFRpbWVzdGFtcFxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxNZXJnZShkYXRhKSB7XG4gIHJldHVybiBkYXRhID09PSAnPDwnIHx8IGRhdGEgPT09IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm1lcmdlJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxNZXJnZVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UqL1xuXG52YXIgTm9kZUJ1ZmZlcjtcblxudHJ5IHtcbiAgLy8gQSB0cmljayBmb3IgYnJvd3NlcmlmaWVkIHZlcnNpb24sIHRvIG5vdCBpbmNsdWRlIGBCdWZmZXJgIHNoaW1cbiAgdmFyIF9yZXF1aXJlID0gcmVxdWlyZTtcbiAgTm9kZUJ1ZmZlciA9IF9yZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG59IGNhdGNoIChfXykge31cblxudmFyIFR5cGUgICAgICAgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cblxuLy8gWyA2NCwgNjUsIDY2IF0gLT4gWyBwYWRkaW5nLCBDUiwgTEYgXVxudmFyIEJBU0U2NF9NQVAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cXG5cXHInO1xuXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQmluYXJ5KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgY29kZSwgaWR4LCBiaXRsZW4gPSAwLCBtYXggPSBkYXRhLmxlbmd0aCwgbWFwID0gQkFTRTY0X01BUDtcblxuICAvLyBDb252ZXJ0IG9uZSBieSBvbmUuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGNvZGUgPSBtYXAuaW5kZXhPZihkYXRhLmNoYXJBdChpZHgpKTtcblxuICAgIC8vIFNraXAgQ1IvTEZcbiAgICBpZiAoY29kZSA+IDY0KSBjb250aW51ZTtcblxuICAgIC8vIEZhaWwgb24gaWxsZWdhbCBjaGFyYWN0ZXJzXG4gICAgaWYgKGNvZGUgPCAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICBiaXRsZW4gKz0gNjtcbiAgfVxuXG4gIC8vIElmIHRoZXJlIGFyZSBhbnkgYml0cyBsZWZ0LCBzb3VyY2Ugd2FzIGNvcnJ1cHRlZFxuICByZXR1cm4gKGJpdGxlbiAlIDgpID09PSAwO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQmluYXJ5KGRhdGEpIHtcbiAgdmFyIGlkeCwgdGFpbGJpdHMsXG4gICAgICBpbnB1dCA9IGRhdGEucmVwbGFjZSgvW1xcclxcbj1dL2csICcnKSwgLy8gcmVtb3ZlIENSL0xGICYgcGFkZGluZyB0byBzaW1wbGlmeSBzY2FuXG4gICAgICBtYXggPSBpbnB1dC5sZW5ndGgsXG4gICAgICBtYXAgPSBCQVNFNjRfTUFQLFxuICAgICAgYml0cyA9IDAsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICAvLyBDb2xsZWN0IGJ5IDYqNCBiaXRzICgzIGJ5dGVzKVxuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGlmICgoaWR4ICUgNCA9PT0gMCkgJiYgaWR4KSB7XG4gICAgICByZXN1bHQucHVzaCgoYml0cyA+PiAxNikgJiAweEZGKTtcbiAgICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgICByZXN1bHQucHVzaChiaXRzICYgMHhGRik7XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDYpIHwgbWFwLmluZGV4T2YoaW5wdXQuY2hhckF0KGlkeCkpO1xuICB9XG5cbiAgLy8gRHVtcCB0YWlsXG5cbiAgdGFpbGJpdHMgPSAobWF4ICUgNCkgKiA2O1xuXG4gIGlmICh0YWlsYml0cyA9PT0gMCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDE2KSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgcmVzdWx0LnB1c2goYml0cyAmIDB4RkYpO1xuICB9IGVsc2UgaWYgKHRhaWxiaXRzID09PSAxOCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDEwKSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDIpICYgMHhGRik7XG4gIH0gZWxzZSBpZiAodGFpbGJpdHMgPT09IDEyKSB7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gNCkgJiAweEZGKTtcbiAgfVxuXG4gIC8vIFdyYXAgaW50byBCdWZmZXIgZm9yIE5vZGVKUyBhbmQgbGVhdmUgQXJyYXkgZm9yIGJyb3dzZXJcbiAgaWYgKE5vZGVCdWZmZXIpIHtcbiAgICAvLyBTdXBwb3J0IG5vZGUgNi4rIEJ1ZmZlciBBUEkgd2hlbiBhdmFpbGFibGVcbiAgICByZXR1cm4gTm9kZUJ1ZmZlci5mcm9tID8gTm9kZUJ1ZmZlci5mcm9tKHJlc3VsdCkgOiBuZXcgTm9kZUJ1ZmZlcihyZXN1bHQpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcmVwcmVzZW50WWFtbEJpbmFyeShvYmplY3QgLyosIHN0eWxlKi8pIHtcbiAgdmFyIHJlc3VsdCA9ICcnLCBiaXRzID0gMCwgaWR4LCB0YWlsLFxuICAgICAgbWF4ID0gb2JqZWN0Lmxlbmd0aCxcbiAgICAgIG1hcCA9IEJBU0U2NF9NQVA7XG5cbiAgLy8gQ29udmVydCBldmVyeSB0aHJlZSBieXRlcyB0byA0IEFTQ0lJIGNoYXJhY3RlcnMuXG5cbiAgZm9yIChpZHggPSAwOyBpZHggPCBtYXg7IGlkeCsrKSB7XG4gICAgaWYgKChpZHggJSAzID09PSAwKSAmJiBpZHgpIHtcbiAgICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTgpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDEyKSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA2KSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFtiaXRzICYgMHgzRl07XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDgpICsgb2JqZWN0W2lkeF07XG4gIH1cblxuICAvLyBEdW1wIHRhaWxcblxuICB0YWlsID0gbWF4ICUgMztcblxuICBpZiAodGFpbCA9PT0gMCkge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTgpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDYpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFtiaXRzICYgMHgzRl07XG4gIH0gZWxzZSBpZiAodGFpbCA9PT0gMikge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTApICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA0KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPDwgMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgfSBlbHNlIGlmICh0YWlsID09PSAxKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPDwgNCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGlzQmluYXJ5KG9iamVjdCkge1xuICByZXR1cm4gTm9kZUJ1ZmZlciAmJiBOb2RlQnVmZmVyLmlzQnVmZmVyKG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmJpbmFyeScsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sQmluYXJ5LFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxCaW5hcnksXG4gIHByZWRpY2F0ZTogaXNCaW5hcnksXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbEJpbmFyeVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxudmFyIF9oYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX3RvU3RyaW5nICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxPbWFwKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBvYmplY3RLZXlzID0gW10sIGluZGV4LCBsZW5ndGgsIHBhaXIsIHBhaXJLZXksIHBhaXJIYXNLZXksXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuICAgIHBhaXJIYXNLZXkgPSBmYWxzZTtcblxuICAgIGlmIChfdG9TdHJpbmcuY2FsbChwYWlyKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAocGFpcktleSBpbiBwYWlyKSB7XG4gICAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwocGFpciwgcGFpcktleSkpIHtcbiAgICAgICAgaWYgKCFwYWlySGFzS2V5KSBwYWlySGFzS2V5ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFwYWlySGFzS2V5KSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAob2JqZWN0S2V5cy5pbmRleE9mKHBhaXJLZXkpID09PSAtMSkgb2JqZWN0S2V5cy5wdXNoKHBhaXJLZXkpO1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxPbWFwKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogW107XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm9tYXAnLCB7XG4gIGtpbmQ6ICdzZXF1ZW5jZScsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sT21hcCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sT21hcFxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxudmFyIF90b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sUGFpcnMoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIGluZGV4LCBsZW5ndGgsIHBhaXIsIGtleXMsIHJlc3VsdCxcbiAgICAgIG9iamVjdCA9IGRhdGE7XG5cbiAgcmVzdWx0ID0gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAgaWYgKF90b1N0cmluZy5jYWxsKHBhaXIpICE9PSAnW29iamVjdCBPYmplY3RdJykgcmV0dXJuIGZhbHNlO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHBhaXIpO1xuXG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSAxKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFBhaXJzKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBbXTtcblxuICB2YXIgaW5kZXgsIGxlbmd0aCwgcGFpciwga2V5cywgcmVzdWx0LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICByZXN1bHQgPSBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpciA9IG9iamVjdFtpbmRleF07XG5cbiAgICBrZXlzID0gT2JqZWN0LmtleXMocGFpcik7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpwYWlycycsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxQYWlycyxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sUGFpcnNcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbFNldChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIga2V5LCBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoa2V5IGluIG9iamVjdCkge1xuICAgIGlmIChfaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIGlmIChvYmplY3Rba2V5XSAhPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sU2V0KGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNldCcsIHtcbiAga2luZDogJ21hcHBpbmcnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbFNldCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sU2V0XG59KTtcbiIsICIvLyBKUy1ZQU1MJ3MgZGVmYXVsdCBzY2hlbWEgZm9yIGBzYWZlTG9hZGAgZnVuY3Rpb24uXG4vLyBJdCBpcyBub3QgZGVzY3JpYmVkIGluIHRoZSBZQU1MIHNwZWNpZmljYXRpb24uXG4vL1xuLy8gVGhpcyBzY2hlbWEgaXMgYmFzZWQgb24gc3RhbmRhcmQgWUFNTCdzIENvcmUgc2NoZW1hIGFuZCBpbmNsdWRlcyBtb3N0IG9mXG4vLyBleHRyYSB0eXBlcyBkZXNjcmliZWQgYXQgWUFNTCB0YWcgcmVwb3NpdG9yeS4gKGh0dHA6Ly95YW1sLm9yZy90eXBlLylcblxuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIFNjaGVtYSA9IHJlcXVpcmUoJy4uL3NjaGVtYScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFNjaGVtYSh7XG4gIGluY2x1ZGU6IFtcbiAgICByZXF1aXJlKCcuL2NvcmUnKVxuICBdLFxuICBpbXBsaWNpdDogW1xuICAgIHJlcXVpcmUoJy4uL3R5cGUvdGltZXN0YW1wJyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9tZXJnZScpXG4gIF0sXG4gIGV4cGxpY2l0OiBbXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9iaW5hcnknKSxcbiAgICByZXF1aXJlKCcuLi90eXBlL29tYXAnKSxcbiAgICByZXF1aXJlKCcuLi90eXBlL3BhaXJzJyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9zZXQnKVxuICBdXG59KTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBUeXBlID0gcmVxdWlyZSgnLi4vLi4vdHlwZScpO1xuXG5mdW5jdGlvbiByZXNvbHZlSmF2YXNjcmlwdFVuZGVmaW5lZCgpIHtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdEphdmFzY3JpcHRVbmRlZmluZWQoKSB7XG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkKi9cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcmVwcmVzZW50SmF2YXNjcmlwdFVuZGVmaW5lZCgpIHtcbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICd1bmRlZmluZWQnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpqcy91bmRlZmluZWQnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlSmF2YXNjcmlwdFVuZGVmaW5lZCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RKYXZhc2NyaXB0VW5kZWZpbmVkLFxuICBwcmVkaWNhdGU6IGlzVW5kZWZpbmVkLFxuICByZXByZXNlbnQ6IHJlcHJlc2VudEphdmFzY3JpcHRVbmRlZmluZWRcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi8uLi90eXBlJyk7XG5cbmZ1bmN0aW9uIHJlc29sdmVKYXZhc2NyaXB0UmVnRXhwKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIHJlZ2V4cCA9IGRhdGEsXG4gICAgICB0YWlsICAgPSAvXFwvKFtnaW1dKikkLy5leGVjKGRhdGEpLFxuICAgICAgbW9kaWZpZXJzID0gJyc7XG5cbiAgLy8gaWYgcmVnZXhwIHN0YXJ0cyB3aXRoICcvJyBpdCBjYW4gaGF2ZSBtb2RpZmllcnMgYW5kIG11c3QgYmUgcHJvcGVybHkgY2xvc2VkXG4gIC8vIGAvZm9vL2dpbWAgLSBtb2RpZmllcnMgdGFpbCBjYW4gYmUgbWF4aW11bSAzIGNoYXJzXG4gIGlmIChyZWdleHBbMF0gPT09ICcvJykge1xuICAgIGlmICh0YWlsKSBtb2RpZmllcnMgPSB0YWlsWzFdO1xuXG4gICAgaWYgKG1vZGlmaWVycy5sZW5ndGggPiAzKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gaWYgZXhwcmVzc2lvbiBzdGFydHMgd2l0aCAvLCBpcyBzaG91bGQgYmUgcHJvcGVybHkgdGVybWluYXRlZFxuICAgIGlmIChyZWdleHBbcmVnZXhwLmxlbmd0aCAtIG1vZGlmaWVycy5sZW5ndGggLSAxXSAhPT0gJy8nKSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0SmF2YXNjcmlwdFJlZ0V4cChkYXRhKSB7XG4gIHZhciByZWdleHAgPSBkYXRhLFxuICAgICAgdGFpbCAgID0gL1xcLyhbZ2ltXSopJC8uZXhlYyhkYXRhKSxcbiAgICAgIG1vZGlmaWVycyA9ICcnO1xuXG4gIC8vIGAvZm9vL2dpbWAgLSB0YWlsIGNhbiBiZSBtYXhpbXVtIDQgY2hhcnNcbiAgaWYgKHJlZ2V4cFswXSA9PT0gJy8nKSB7XG4gICAgaWYgKHRhaWwpIG1vZGlmaWVycyA9IHRhaWxbMV07XG4gICAgcmVnZXhwID0gcmVnZXhwLnNsaWNlKDEsIHJlZ2V4cC5sZW5ndGggLSBtb2RpZmllcnMubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleHAsIG1vZGlmaWVycyk7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudEphdmFzY3JpcHRSZWdFeHAob2JqZWN0IC8qLCBzdHlsZSovKSB7XG4gIHZhciByZXN1bHQgPSAnLycgKyBvYmplY3Quc291cmNlICsgJy8nO1xuXG4gIGlmIChvYmplY3QuZ2xvYmFsKSByZXN1bHQgKz0gJ2cnO1xuICBpZiAob2JqZWN0Lm11bHRpbGluZSkgcmVzdWx0ICs9ICdtJztcbiAgaWYgKG9iamVjdC5pZ25vcmVDYXNlKSByZXN1bHQgKz0gJ2knO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpqcy9yZWdleHAnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlSmF2YXNjcmlwdFJlZ0V4cCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RKYXZhc2NyaXB0UmVnRXhwLFxuICBwcmVkaWNhdGU6IGlzUmVnRXhwLFxuICByZXByZXNlbnQ6IHJlcHJlc2VudEphdmFzY3JpcHRSZWdFeHBcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGVzcHJpbWE7XG5cbi8vIEJyb3dzZXJpZmllZCB2ZXJzaW9uIGRvZXMgbm90IGhhdmUgZXNwcmltYVxuLy9cbi8vIDEuIEZvciBub2RlLmpzIGp1c3QgcmVxdWlyZSBtb2R1bGUgYXMgZGVwc1xuLy8gMi4gRm9yIGJyb3dzZXIgdHJ5IHRvIHJlcXVpcmUgbXVkdWxlIHZpYSBleHRlcm5hbCBBTUQgc3lzdGVtLlxuLy8gICAgSWYgbm90IGZvdW5kIC0gdHJ5IHRvIGZhbGxiYWNrIHRvIHdpbmRvdy5lc3ByaW1hLiBJZiBub3Rcbi8vICAgIGZvdW5kIHRvbyAtIHRoZW4gZmFpbCB0byBwYXJzZS5cbi8vXG50cnkge1xuICAvLyB3b3JrYXJvdW5kIHRvIGV4Y2x1ZGUgcGFja2FnZSBmcm9tIGJyb3dzZXJpZnkgbGlzdC5cbiAgdmFyIF9yZXF1aXJlID0gcmVxdWlyZTtcbiAgZXNwcmltYSA9IF9yZXF1aXJlKCdlc3ByaW1hJyk7XG59IGNhdGNoIChfKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXJlZGVjbGFyZSAqL1xuICAvKiBnbG9iYWwgd2luZG93ICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgZXNwcmltYSA9IHdpbmRvdy5lc3ByaW1hO1xufVxuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uLy4uL3R5cGUnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZUphdmFzY3JpcHRGdW5jdGlvbihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdHJ5IHtcbiAgICB2YXIgc291cmNlID0gJygnICsgZGF0YSArICcpJyxcbiAgICAgICAgYXN0ICAgID0gZXNwcmltYS5wYXJzZShzb3VyY2UsIHsgcmFuZ2U6IHRydWUgfSk7XG5cbiAgICBpZiAoYXN0LnR5cGUgICAgICAgICAgICAgICAgICAgICE9PSAnUHJvZ3JhbScgICAgICAgICAgICAgfHxcbiAgICAgICAgYXN0LmJvZHkubGVuZ3RoICAgICAgICAgICAgICE9PSAxICAgICAgICAgICAgICAgICAgICAgfHxcbiAgICAgICAgYXN0LmJvZHlbMF0udHlwZSAgICAgICAgICAgICE9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcgfHxcbiAgICAgICAgKGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSAhPT0gJ0Fycm93RnVuY3Rpb25FeHByZXNzaW9uJyAmJlxuICAgICAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSAhPT0gJ0Z1bmN0aW9uRXhwcmVzc2lvbicpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RKYXZhc2NyaXB0RnVuY3Rpb24oZGF0YSkge1xuICAvKmpzbGludCBldmlsOnRydWUqL1xuXG4gIHZhciBzb3VyY2UgPSAnKCcgKyBkYXRhICsgJyknLFxuICAgICAgYXN0ICAgID0gZXNwcmltYS5wYXJzZShzb3VyY2UsIHsgcmFuZ2U6IHRydWUgfSksXG4gICAgICBwYXJhbXMgPSBbXSxcbiAgICAgIGJvZHk7XG5cbiAgaWYgKGFzdC50eXBlICAgICAgICAgICAgICAgICAgICAhPT0gJ1Byb2dyYW0nICAgICAgICAgICAgIHx8XG4gICAgICBhc3QuYm9keS5sZW5ndGggICAgICAgICAgICAgIT09IDEgICAgICAgICAgICAgICAgICAgICB8fFxuICAgICAgYXN0LmJvZHlbMF0udHlwZSAgICAgICAgICAgICE9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcgfHxcbiAgICAgIChhc3QuYm9keVswXS5leHByZXNzaW9uLnR5cGUgIT09ICdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicgJiZcbiAgICAgICAgYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlICE9PSAnRnVuY3Rpb25FeHByZXNzaW9uJykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZXNvbHZlIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBhc3QuYm9keVswXS5leHByZXNzaW9uLnBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgIHBhcmFtcy5wdXNoKHBhcmFtLm5hbWUpO1xuICB9KTtcblxuICBib2R5ID0gYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi5ib2R5LnJhbmdlO1xuXG4gIC8vIEVzcHJpbWEncyByYW5nZXMgaW5jbHVkZSB0aGUgZmlyc3QgJ3snIGFuZCB0aGUgbGFzdCAnfScgY2hhcmFjdGVycyBvblxuICAvLyBmdW5jdGlvbiBleHByZXNzaW9ucy4gU28gY3V0IHRoZW0gb3V0LlxuICBpZiAoYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi5ib2R5LnR5cGUgPT09ICdCbG9ja1N0YXRlbWVudCcpIHtcbiAgICAvKmVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKHBhcmFtcywgc291cmNlLnNsaWNlKGJvZHlbMF0gKyAxLCBib2R5WzFdIC0gMSkpO1xuICB9XG4gIC8vIEVTNiBhcnJvdyBmdW5jdGlvbnMgY2FuIG9taXQgdGhlIEJsb2NrU3RhdGVtZW50LiBJbiB0aGF0IGNhc2UsIGp1c3QgcmV0dXJuXG4gIC8vIHRoZSBib2R5LlxuICAvKmVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jKi9cbiAgcmV0dXJuIG5ldyBGdW5jdGlvbihwYXJhbXMsICdyZXR1cm4gJyArIHNvdXJjZS5zbGljZShib2R5WzBdLCBib2R5WzFdKSk7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudEphdmFzY3JpcHRGdW5jdGlvbihvYmplY3QgLyosIHN0eWxlKi8pIHtcbiAgcmV0dXJuIG9iamVjdC50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmpzL2Z1bmN0aW9uJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZUphdmFzY3JpcHRGdW5jdGlvbixcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RKYXZhc2NyaXB0RnVuY3Rpb24sXG4gIHByZWRpY2F0ZTogaXNGdW5jdGlvbixcbiAgcmVwcmVzZW50OiByZXByZXNlbnRKYXZhc2NyaXB0RnVuY3Rpb25cbn0pO1xuIiwgIi8vIEpTLVlBTUwncyBkZWZhdWx0IHNjaGVtYSBmb3IgYGxvYWRgIGZ1bmN0aW9uLlxuLy8gSXQgaXMgbm90IGRlc2NyaWJlZCBpbiB0aGUgWUFNTCBzcGVjaWZpY2F0aW9uLlxuLy9cbi8vIFRoaXMgc2NoZW1hIGlzIGJhc2VkIG9uIEpTLVlBTUwncyBkZWZhdWx0IHNhZmUgc2NoZW1hIGFuZCBpbmNsdWRlc1xuLy8gSmF2YVNjcmlwdC1zcGVjaWZpYyB0eXBlczogISFqcy91bmRlZmluZWQsICEhanMvcmVnZXhwIGFuZCAhIWpzL2Z1bmN0aW9uLlxuLy9cbi8vIEFsc28gdGhpcyBzY2hlbWEgaXMgdXNlZCBhcyBkZWZhdWx0IGJhc2Ugc2NoZW1hIGF0IGBTY2hlbWEuY3JlYXRlYCBmdW5jdGlvbi5cblxuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIFNjaGVtYSA9IHJlcXVpcmUoJy4uL3NjaGVtYScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gU2NoZW1hLkRFRkFVTFQgPSBuZXcgU2NoZW1hKHtcbiAgaW5jbHVkZTogW1xuICAgIHJlcXVpcmUoJy4vZGVmYXVsdF9zYWZlJylcbiAgXSxcbiAgZXhwbGljaXQ6IFtcbiAgICByZXF1aXJlKCcuLi90eXBlL2pzL3VuZGVmaW5lZCcpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvanMvcmVnZXhwJyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9qcy9mdW5jdGlvbicpXG4gIF1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuLG5vLXVzZS1iZWZvcmUtZGVmaW5lKi9cblxudmFyIGNvbW1vbiAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL2NvbW1vbicpO1xudmFyIFlBTUxFeGNlcHRpb24gICAgICAgPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpO1xudmFyIE1hcmsgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL21hcmsnKTtcbnZhciBERUZBVUxUX1NBRkVfU0NIRU1BID0gcmVxdWlyZSgnLi9zY2hlbWEvZGVmYXVsdF9zYWZlJyk7XG52YXIgREVGQVVMVF9GVUxMX1NDSEVNQSA9IHJlcXVpcmUoJy4vc2NoZW1hL2RlZmF1bHRfZnVsbCcpO1xuXG5cbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5cbnZhciBDT05URVhUX0ZMT1dfSU4gICA9IDE7XG52YXIgQ09OVEVYVF9GTE9XX09VVCAgPSAyO1xudmFyIENPTlRFWFRfQkxPQ0tfSU4gID0gMztcbnZhciBDT05URVhUX0JMT0NLX09VVCA9IDQ7XG5cblxudmFyIENIT01QSU5HX0NMSVAgID0gMTtcbnZhciBDSE9NUElOR19TVFJJUCA9IDI7XG52YXIgQ0hPTVBJTkdfS0VFUCAgPSAzO1xuXG5cbnZhciBQQVRURVJOX05PTl9QUklOVEFCTEUgICAgICAgICA9IC9bXFx4MDAtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHg3Ri1cXHg4NFxceDg2LVxceDlGXFx1RkZGRVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdKD8hW1xcdURDMDAtXFx1REZGRl0pfCg/OlteXFx1RDgwMC1cXHVEQkZGXXxeKVtcXHVEQzAwLVxcdURGRkZdLztcbnZhciBQQVRURVJOX05PTl9BU0NJSV9MSU5FX0JSRUFLUyA9IC9bXFx4ODVcXHUyMDI4XFx1MjAyOV0vO1xudmFyIFBBVFRFUk5fRkxPV19JTkRJQ0FUT1JTICAgICAgID0gL1ssXFxbXFxdXFx7XFx9XS87XG52YXIgUEFUVEVSTl9UQUdfSEFORExFICAgICAgICAgICAgPSAvXig/OiF8ISF8IVthLXpcXC1dKyEpJC9pO1xudmFyIFBBVFRFUk5fVEFHX1VSSSAgICAgICAgICAgICAgID0gL14oPzohfFteLFxcW1xcXVxce1xcfV0pKD86JVswLTlhLWZdezJ9fFswLTlhLXpcXC0jO1xcL1xcPzpAJj1cXCtcXCQsX1xcLiF+XFwqJ1xcKFxcKVxcW1xcXV0pKiQvaTtcblxuXG5mdW5jdGlvbiBfY2xhc3Mob2JqKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTsgfVxuXG5mdW5jdGlvbiBpc19FT0woYykge1xuICByZXR1cm4gKGMgPT09IDB4MEEvKiBMRiAqLykgfHwgKGMgPT09IDB4MEQvKiBDUiAqLyk7XG59XG5cbmZ1bmN0aW9uIGlzX1dISVRFX1NQQUNFKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fCAoYyA9PT0gMHgyMC8qIFNwYWNlICovKTtcbn1cblxuZnVuY3Rpb24gaXNfV1NfT1JfRU9MKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fFxuICAgICAgICAgKGMgPT09IDB4MjAvKiBTcGFjZSAqLykgfHxcbiAgICAgICAgIChjID09PSAweDBBLyogTEYgKi8pIHx8XG4gICAgICAgICAoYyA9PT0gMHgwRC8qIENSICovKTtcbn1cblxuZnVuY3Rpb24gaXNfRkxPV19JTkRJQ0FUT1IoYykge1xuICByZXR1cm4gYyA9PT0gMHgyQy8qICwgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4NUIvKiBbICovIHx8XG4gICAgICAgICBjID09PSAweDVELyogXSAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg3Qi8qIHsgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4N0QvKiB9ICovO1xufVxuXG5mdW5jdGlvbiBmcm9tSGV4Q29kZShjKSB7XG4gIHZhciBsYztcblxuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSovXG4gIGxjID0gYyB8IDB4MjA7XG5cbiAgaWYgKCgweDYxLyogYSAqLyA8PSBsYykgJiYgKGxjIDw9IDB4NjYvKiBmICovKSkge1xuICAgIHJldHVybiBsYyAtIDB4NjEgKyAxMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlZEhleExlbihjKSB7XG4gIGlmIChjID09PSAweDc4LyogeCAqLykgeyByZXR1cm4gMjsgfVxuICBpZiAoYyA9PT0gMHg3NS8qIHUgKi8pIHsgcmV0dXJuIDQ7IH1cbiAgaWYgKGMgPT09IDB4NTUvKiBVICovKSB7IHJldHVybiA4OyB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBmcm9tRGVjaW1hbENvZGUoYykge1xuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlRXNjYXBlU2VxdWVuY2UoYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBpbmRlbnQgKi9cbiAgcmV0dXJuIChjID09PSAweDMwLyogMCAqLykgPyAnXFx4MDAnIDpcbiAgICAgICAgKGMgPT09IDB4NjEvKiBhICovKSA/ICdcXHgwNycgOlxuICAgICAgICAoYyA9PT0gMHg2Mi8qIGIgKi8pID8gJ1xceDA4JyA6XG4gICAgICAgIChjID09PSAweDc0LyogdCAqLykgPyAnXFx4MDknIDpcbiAgICAgICAgKGMgPT09IDB4MDkvKiBUYWIgKi8pID8gJ1xceDA5JyA6XG4gICAgICAgIChjID09PSAweDZFLyogbiAqLykgPyAnXFx4MEEnIDpcbiAgICAgICAgKGMgPT09IDB4NzYvKiB2ICovKSA/ICdcXHgwQicgOlxuICAgICAgICAoYyA9PT0gMHg2Ni8qIGYgKi8pID8gJ1xceDBDJyA6XG4gICAgICAgIChjID09PSAweDcyLyogciAqLykgPyAnXFx4MEQnIDpcbiAgICAgICAgKGMgPT09IDB4NjUvKiBlICovKSA/ICdcXHgxQicgOlxuICAgICAgICAoYyA9PT0gMHgyMC8qIFNwYWNlICovKSA/ICcgJyA6XG4gICAgICAgIChjID09PSAweDIyLyogXCIgKi8pID8gJ1xceDIyJyA6XG4gICAgICAgIChjID09PSAweDJGLyogLyAqLykgPyAnLycgOlxuICAgICAgICAoYyA9PT0gMHg1Qy8qIFxcICovKSA/ICdcXHg1QycgOlxuICAgICAgICAoYyA9PT0gMHg0RS8qIE4gKi8pID8gJ1xceDg1JyA6XG4gICAgICAgIChjID09PSAweDVGLyogXyAqLykgPyAnXFx4QTAnIDpcbiAgICAgICAgKGMgPT09IDB4NEMvKiBMICovKSA/ICdcXHUyMDI4JyA6XG4gICAgICAgIChjID09PSAweDUwLyogUCAqLykgPyAnXFx1MjAyOScgOiAnJztcbn1cblxuZnVuY3Rpb24gY2hhckZyb21Db2RlcG9pbnQoYykge1xuICBpZiAoYyA8PSAweEZGRkYpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbiAgfVxuICAvLyBFbmNvZGUgVVRGLTE2IHN1cnJvZ2F0ZSBwYWlyXG4gIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi0xNiNDb2RlX3BvaW50c19VLjJCMDEwMDAwX3RvX1UuMkIxMEZGRkZcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgKChjIC0gMHgwMTAwMDApID4+IDEwKSArIDB4RDgwMCxcbiAgICAoKGMgLSAweDAxMDAwMCkgJiAweDAzRkYpICsgMHhEQzAwXG4gICk7XG59XG5cbi8vIHNldCBhIHByb3BlcnR5IG9mIGEgbGl0ZXJhbCBvYmplY3QsIHdoaWxlIHByb3RlY3RpbmcgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLFxuLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvanMteWFtbC9pc3N1ZXMvMTY0IGZvciBtb3JlIGRldGFpbHNcbmZ1bmN0aW9uIHNldFByb3BlcnR5KG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICAvLyB1c2VkIGZvciB0aGlzIHNwZWNpZmljIGtleSBvbmx5IGJlY2F1c2UgT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIHNsb3dcbiAgaWYgKGtleSA9PT0gJ19fcHJvdG9fXycpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIH1cbn1cblxudmFyIHNpbXBsZUVzY2FwZUNoZWNrID0gbmV3IEFycmF5KDI1Nik7IC8vIGludGVnZXIsIGZvciBmYXN0IGFjY2Vzc1xudmFyIHNpbXBsZUVzY2FwZU1hcCA9IG5ldyBBcnJheSgyNTYpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICBzaW1wbGVFc2NhcGVDaGVja1tpXSA9IHNpbXBsZUVzY2FwZVNlcXVlbmNlKGkpID8gMSA6IDA7XG4gIHNpbXBsZUVzY2FwZU1hcFtpXSA9IHNpbXBsZUVzY2FwZVNlcXVlbmNlKGkpO1xufVxuXG5cbmZ1bmN0aW9uIFN0YXRlKGlucHV0LCBvcHRpb25zKSB7XG4gIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICB0aGlzLmZpbGVuYW1lICA9IG9wdGlvbnNbJ2ZpbGVuYW1lJ10gIHx8IG51bGw7XG4gIHRoaXMuc2NoZW1hICAgID0gb3B0aW9uc1snc2NoZW1hJ10gICAgfHwgREVGQVVMVF9GVUxMX1NDSEVNQTtcbiAgdGhpcy5vbldhcm5pbmcgPSBvcHRpb25zWydvbldhcm5pbmcnXSB8fCBudWxsO1xuICB0aGlzLmxlZ2FjeSAgICA9IG9wdGlvbnNbJ2xlZ2FjeSddICAgIHx8IGZhbHNlO1xuICB0aGlzLmpzb24gICAgICA9IG9wdGlvbnNbJ2pzb24nXSAgICAgIHx8IGZhbHNlO1xuICB0aGlzLmxpc3RlbmVyICA9IG9wdGlvbnNbJ2xpc3RlbmVyJ10gIHx8IG51bGw7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy50eXBlTWFwICAgICAgID0gdGhpcy5zY2hlbWEuY29tcGlsZWRUeXBlTWFwO1xuXG4gIHRoaXMubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgdGhpcy5wb3NpdGlvbiAgID0gMDtcbiAgdGhpcy5saW5lICAgICAgID0gMDtcbiAgdGhpcy5saW5lU3RhcnQgID0gMDtcbiAgdGhpcy5saW5lSW5kZW50ID0gMDtcblxuICB0aGlzLmRvY3VtZW50cyA9IFtdO1xuXG4gIC8qXG4gIHRoaXMudmVyc2lvbjtcbiAgdGhpcy5jaGVja0xpbmVCcmVha3M7XG4gIHRoaXMudGFnTWFwO1xuICB0aGlzLmFuY2hvck1hcDtcbiAgdGhpcy50YWc7XG4gIHRoaXMuYW5jaG9yO1xuICB0aGlzLmtpbmQ7XG4gIHRoaXMucmVzdWx0OyovXG5cbn1cblxuXG5mdW5jdGlvbiBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKSB7XG4gIHJldHVybiBuZXcgWUFNTEV4Y2VwdGlvbihcbiAgICBtZXNzYWdlLFxuICAgIG5ldyBNYXJrKHN0YXRlLmZpbGVuYW1lLCBzdGF0ZS5pbnB1dCwgc3RhdGUucG9zaXRpb24sIHN0YXRlLmxpbmUsIChzdGF0ZS5wb3NpdGlvbiAtIHN0YXRlLmxpbmVTdGFydCkpKTtcbn1cblxuZnVuY3Rpb24gdGhyb3dFcnJvcihzdGF0ZSwgbWVzc2FnZSkge1xuICB0aHJvdyBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKTtcbn1cblxuZnVuY3Rpb24gdGhyb3dXYXJuaW5nKHN0YXRlLCBtZXNzYWdlKSB7XG4gIGlmIChzdGF0ZS5vbldhcm5pbmcpIHtcbiAgICBzdGF0ZS5vbldhcm5pbmcuY2FsbChudWxsLCBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKSk7XG4gIH1cbn1cblxuXG52YXIgZGlyZWN0aXZlSGFuZGxlcnMgPSB7XG5cbiAgWUFNTDogZnVuY3Rpb24gaGFuZGxlWWFtbERpcmVjdGl2ZShzdGF0ZSwgbmFtZSwgYXJncykge1xuXG4gICAgdmFyIG1hdGNoLCBtYWpvciwgbWlub3I7XG5cbiAgICBpZiAoc3RhdGUudmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0aW9uIG9mICVZQU1MIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ1lBTUwgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSBvbmUgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBtYXRjaCA9IC9eKFswLTldKylcXC4oWzAtOV0rKSQvLmV4ZWMoYXJnc1swXSk7XG5cbiAgICBpZiAobWF0Y2ggPT09IG51bGwpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIGFyZ3VtZW50IG9mIHRoZSBZQU1MIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIG1ham9yID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICBtaW5vciA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG5cbiAgICBpZiAobWFqb3IgIT09IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCcpO1xuICAgIH1cblxuICAgIHN0YXRlLnZlcnNpb24gPSBhcmdzWzBdO1xuICAgIHN0YXRlLmNoZWNrTGluZUJyZWFrcyA9IChtaW5vciA8IDIpO1xuXG4gICAgaWYgKG1pbm9yICE9PSAxICYmIG1pbm9yICE9PSAyKSB7XG4gICAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICd1bnN1cHBvcnRlZCBZQU1MIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50Jyk7XG4gICAgfVxuICB9LFxuXG4gIFRBRzogZnVuY3Rpb24gaGFuZGxlVGFnRGlyZWN0aXZlKHN0YXRlLCBuYW1lLCBhcmdzKSB7XG5cbiAgICB2YXIgaGFuZGxlLCBwcmVmaXg7XG5cbiAgICBpZiAoYXJncy5sZW5ndGggIT09IDIpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdUQUcgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSB0d28gYXJndW1lbnRzJyk7XG4gICAgfVxuXG4gICAgaGFuZGxlID0gYXJnc1swXTtcbiAgICBwcmVmaXggPSBhcmdzWzFdO1xuXG4gICAgaWYgKCFQQVRURVJOX1RBR19IQU5ETEUudGVzdChoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaWxsLWZvcm1lZCB0YWcgaGFuZGxlIChmaXJzdCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwoc3RhdGUudGFnTWFwLCBoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGhlcmUgaXMgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHN1ZmZpeCBmb3IgXCInICsgaGFuZGxlICsgJ1wiIHRhZyBoYW5kbGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHByZWZpeCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIHRhZyBwcmVmaXggKHNlY29uZCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBzdGF0ZS50YWdNYXBbaGFuZGxlXSA9IHByZWZpeDtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBjYXB0dXJlU2VnbWVudChzdGF0ZSwgc3RhcnQsIGVuZCwgY2hlY2tKc29uKSB7XG4gIHZhciBfcG9zaXRpb24sIF9sZW5ndGgsIF9jaGFyYWN0ZXIsIF9yZXN1bHQ7XG5cbiAgaWYgKHN0YXJ0IDwgZW5kKSB7XG4gICAgX3Jlc3VsdCA9IHN0YXRlLmlucHV0LnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gICAgaWYgKGNoZWNrSnNvbikge1xuICAgICAgZm9yIChfcG9zaXRpb24gPSAwLCBfbGVuZ3RoID0gX3Jlc3VsdC5sZW5ndGg7IF9wb3NpdGlvbiA8IF9sZW5ndGg7IF9wb3NpdGlvbiArPSAxKSB7XG4gICAgICAgIF9jaGFyYWN0ZXIgPSBfcmVzdWx0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcbiAgICAgICAgaWYgKCEoX2NoYXJhY3RlciA9PT0gMHgwOSB8fFxuICAgICAgICAgICAgICAoMHgyMCA8PSBfY2hhcmFjdGVyICYmIF9jaGFyYWN0ZXIgPD0gMHgxMEZGRkYpKSkge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdleHBlY3RlZCB2YWxpZCBKU09OIGNoYXJhY3RlcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChQQVRURVJOX05PTl9QUklOVEFCTEUudGVzdChfcmVzdWx0KSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RoZSBzdHJlYW0gY29udGFpbnMgbm9uLXByaW50YWJsZSBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuXG4gICAgc3RhdGUucmVzdWx0ICs9IF9yZXN1bHQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWVyZ2VNYXBwaW5ncyhzdGF0ZSwgZGVzdGluYXRpb24sIHNvdXJjZSwgb3ZlcnJpZGFibGVLZXlzKSB7XG4gIHZhciBzb3VyY2VLZXlzLCBrZXksIGluZGV4LCBxdWFudGl0eTtcblxuICBpZiAoIWNvbW1vbi5pc09iamVjdChzb3VyY2UpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Nhbm5vdCBtZXJnZSBtYXBwaW5nczsgdGhlIHByb3ZpZGVkIHNvdXJjZSBvYmplY3QgaXMgdW5hY2NlcHRhYmxlJyk7XG4gIH1cblxuICBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcblxuICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSBzb3VyY2VLZXlzLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaW5kZXhdO1xuXG4gICAgaWYgKCFfaGFzT3duUHJvcGVydHkuY2FsbChkZXN0aW5hdGlvbiwga2V5KSkge1xuICAgICAgc2V0UHJvcGVydHkoZGVzdGluYXRpb24sIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgb3ZlcnJpZGFibGVLZXlzW2tleV0gPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBzdGFydExpbmUsIHN0YXJ0UG9zKSB7XG4gIHZhciBpbmRleCwgcXVhbnRpdHk7XG5cbiAgLy8gVGhlIG91dHB1dCBpcyBhIHBsYWluIG9iamVjdCBoZXJlLCBzbyBrZXlzIGNhbiBvbmx5IGJlIHN0cmluZ3MuXG4gIC8vIFdlIG5lZWQgdG8gY29udmVydCBrZXlOb2RlIHRvIGEgc3RyaW5nLCBidXQgZG9pbmcgc28gY2FuIGhhbmcgdGhlIHByb2Nlc3NcbiAgLy8gKGRlZXBseSBuZXN0ZWQgYXJyYXlzIHRoYXQgZXhwbG9kZSBleHBvbmVudGlhbGx5IHVzaW5nIGFsaWFzZXMpLlxuICBpZiAoQXJyYXkuaXNBcnJheShrZXlOb2RlKSkge1xuICAgIGtleU5vZGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChrZXlOb2RlKTtcblxuICAgIGZvciAoaW5kZXggPSAwLCBxdWFudGl0eSA9IGtleU5vZGUubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXlOb2RlW2luZGV4XSkpIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW5zaWRlIGtleXMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBrZXlOb2RlID09PSAnb2JqZWN0JyAmJiBfY2xhc3Moa2V5Tm9kZVtpbmRleF0pID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICBrZXlOb2RlW2luZGV4XSA9ICdbb2JqZWN0IE9iamVjdF0nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEF2b2lkIGNvZGUgZXhlY3V0aW9uIGluIGxvYWQoKSB2aWEgdG9TdHJpbmcgcHJvcGVydHlcbiAgLy8gKHN0aWxsIHVzZSBpdHMgb3duIHRvU3RyaW5nIGZvciBhcnJheXMsIHRpbWVzdGFtcHMsXG4gIC8vIGFuZCB3aGF0ZXZlciB1c2VyIHNjaGVtYSBleHRlbnNpb25zIGhhcHBlbiB0byBoYXZlIEBAdG9TdHJpbmdUYWcpXG4gIGlmICh0eXBlb2Yga2V5Tm9kZSA9PT0gJ29iamVjdCcgJiYgX2NsYXNzKGtleU5vZGUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgIGtleU5vZGUgPSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG5cbiAga2V5Tm9kZSA9IFN0cmluZyhrZXlOb2RlKTtcblxuICBpZiAoX3Jlc3VsdCA9PT0gbnVsbCkge1xuICAgIF9yZXN1bHQgPSB7fTtcbiAgfVxuXG4gIGlmIChrZXlUYWcgPT09ICd0YWc6eWFtbC5vcmcsMjAwMjptZXJnZScpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZU5vZGUpKSB7XG4gICAgICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSB2YWx1ZU5vZGUubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAgICAgIG1lcmdlTWFwcGluZ3Moc3RhdGUsIF9yZXN1bHQsIHZhbHVlTm9kZVtpbmRleF0sIG92ZXJyaWRhYmxlS2V5cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lcmdlTWFwcGluZ3Moc3RhdGUsIF9yZXN1bHQsIHZhbHVlTm9kZSwgb3ZlcnJpZGFibGVLZXlzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFzdGF0ZS5qc29uICYmXG4gICAgICAgICFfaGFzT3duUHJvcGVydHkuY2FsbChvdmVycmlkYWJsZUtleXMsIGtleU5vZGUpICYmXG4gICAgICAgIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKF9yZXN1bHQsIGtleU5vZGUpKSB7XG4gICAgICBzdGF0ZS5saW5lID0gc3RhcnRMaW5lIHx8IHN0YXRlLmxpbmU7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiA9IHN0YXJ0UG9zIHx8IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0ZWQgbWFwcGluZyBrZXknKTtcbiAgICB9XG4gICAgc2V0UHJvcGVydHkoX3Jlc3VsdCwga2V5Tm9kZSwgdmFsdWVOb2RlKTtcbiAgICBkZWxldGUgb3ZlcnJpZGFibGVLZXlzW2tleU5vZGVdO1xuICB9XG5cbiAgcmV0dXJuIF9yZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRMaW5lQnJlYWsoc3RhdGUpIHtcbiAgdmFyIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDBBLyogTEYgKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICB9IGVsc2UgaWYgKGNoID09PSAweDBELyogQ1IgKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgwQS8qIExGICovKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYSBsaW5lIGJyZWFrIGlzIGV4cGVjdGVkJyk7XG4gIH1cblxuICBzdGF0ZS5saW5lICs9IDE7XG4gIHN0YXRlLmxpbmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xufVxuXG5mdW5jdGlvbiBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBhbGxvd0NvbW1lbnRzLCBjaGVja0luZGVudCkge1xuICB2YXIgbGluZUJyZWFrcyA9IDAsXG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoYWxsb3dDb21tZW50cyAmJiBjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgIGRvIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfSB3aGlsZSAoY2ggIT09IDB4MEEvKiBMRiAqLyAmJiBjaCAhPT0gMHgwRC8qIENSICovICYmIGNoICE9PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG5cbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICBsaW5lQnJlYWtzKys7XG4gICAgICBzdGF0ZS5saW5lSW5kZW50ID0gMDtcblxuICAgICAgd2hpbGUgKGNoID09PSAweDIwLyogU3BhY2UgKi8pIHtcbiAgICAgICAgc3RhdGUubGluZUluZGVudCsrO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjaGVja0luZGVudCAhPT0gLTEgJiYgbGluZUJyZWFrcyAhPT0gMCAmJiBzdGF0ZS5saW5lSW5kZW50IDwgY2hlY2tJbmRlbnQpIHtcbiAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICdkZWZpY2llbnQgaW5kZW50YXRpb24nKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lQnJlYWtzO1xufVxuXG5mdW5jdGlvbiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbik7XG5cbiAgLy8gQ29uZGl0aW9uIHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgaXMgdGVzdGVkXG4gIC8vIGluIHBhcmVudCBvbiBlYWNoIGNhbGwsIGZvciBlZmZpY2llbmN5LiBObyBuZWVkcyB0byB0ZXN0IGhlcmUgYWdhaW4uXG4gIGlmICgoY2ggPT09IDB4MkQvKiAtICovIHx8IGNoID09PSAweDJFLyogLiAqLykgJiZcbiAgICAgIGNoID09PSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbiArIDEpICYmXG4gICAgICBjaCA9PT0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24gKyAyKSkge1xuXG4gICAgX3Bvc2l0aW9uICs9IDM7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gMCB8fCBpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIGNvdW50KSB7XG4gIGlmIChjb3VudCA9PT0gMSkge1xuICAgIHN0YXRlLnJlc3VsdCArPSAnICc7XG4gIH0gZWxzZSBpZiAoY291bnQgPiAxKSB7XG4gICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGNvdW50IC0gMSk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiByZWFkUGxhaW5TY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQsIHdpdGhpbkZsb3dDb2xsZWN0aW9uKSB7XG4gIHZhciBwcmVjZWRpbmcsXG4gICAgICBmb2xsb3dpbmcsXG4gICAgICBjYXB0dXJlU3RhcnQsXG4gICAgICBjYXB0dXJlRW5kLFxuICAgICAgaGFzUGVuZGluZ0NvbnRlbnQsXG4gICAgICBfbGluZSxcbiAgICAgIF9saW5lU3RhcnQsXG4gICAgICBfbGluZUluZGVudCxcbiAgICAgIF9raW5kID0gc3RhdGUua2luZCxcbiAgICAgIF9yZXN1bHQgPSBzdGF0ZS5yZXN1bHQsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChpc19XU19PUl9FT0woY2gpICAgICAgfHxcbiAgICAgIGlzX0ZMT1dfSU5ESUNBVE9SKGNoKSB8fFxuICAgICAgY2ggPT09IDB4MjMvKiAjICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNi8qICYgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDJBLyogKiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjEvKiAhICovICAgIHx8XG4gICAgICBjaCA9PT0gMHg3Qy8qIHwgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDNFLyogPiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjcvKiAnICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyMi8qIFwiICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNS8qICUgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDQwLyogQCAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4NjAvKiBgICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGNoID09PSAweDNGLyogPyAqLyB8fCBjaCA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykgfHxcbiAgICAgICAgd2l0aGluRmxvd0NvbGxlY3Rpb24gJiYgaXNfRkxPV19JTkRJQ0FUT1IoZm9sbG93aW5nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgaGFzUGVuZGluZ0NvbnRlbnQgPSBmYWxzZTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGlmIChpc19XU19PUl9FT0woZm9sbG93aW5nKSB8fFxuICAgICAgICAgIHdpdGhpbkZsb3dDb2xsZWN0aW9uICYmIGlzX0ZMT1dfSU5ESUNBVE9SKGZvbGxvd2luZykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgcHJlY2VkaW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiAtIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKHByZWNlZGluZykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHx8XG4gICAgICAgICAgICAgICB3aXRoaW5GbG93Q29sbGVjdGlvbiAmJiBpc19GTE9XX0lORElDQVRPUihjaCkpIHtcbiAgICAgIGJyZWFrO1xuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgICBfbGluZVN0YXJ0ID0gc3RhdGUubGluZVN0YXJ0O1xuICAgICAgX2xpbmVJbmRlbnQgPSBzdGF0ZS5saW5lSW5kZW50O1xuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIC0xKTtcblxuICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPj0gbm9kZUluZGVudCkge1xuICAgICAgICBoYXNQZW5kaW5nQ29udGVudCA9IHRydWU7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucG9zaXRpb24gPSBjYXB0dXJlRW5kO1xuICAgICAgICBzdGF0ZS5saW5lID0gX2xpbmU7XG4gICAgICAgIHN0YXRlLmxpbmVTdGFydCA9IF9saW5lU3RhcnQ7XG4gICAgICAgIHN0YXRlLmxpbmVJbmRlbnQgPSBfbGluZUluZGVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc1BlbmRpbmdDb250ZW50KSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCBmYWxzZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBzdGF0ZS5saW5lIC0gX2xpbmUpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgaGFzUGVuZGluZ0NvbnRlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uICsgMTtcbiAgICB9XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIH1cblxuICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCBmYWxzZSk7XG5cbiAgaWYgKHN0YXRlLnJlc3VsdCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9IF9raW5kO1xuICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlYWRTaW5nbGVRdW90ZWRTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNoLFxuICAgICAgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI3LyogJyAqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIHN0YXRlLnBvc2l0aW9uKys7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICB3aGlsZSAoKGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikpICE9PSAwKSB7XG4gICAgaWYgKGNoID09PSAweDI3LyogJyAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICBpZiAoY2ggPT09IDB4MjcvKiAnICovKSB7XG4gICAgICAgIGNhcHR1cmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZCwgdHJ1ZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgbm9kZUluZGVudCkpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgZG9jdW1lbnQgd2l0aGluIGEgc2luZ2xlIHF1b3RlZCBzY2FsYXInKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIHNpbmdsZSBxdW90ZWQgc2NhbGFyJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWREb3VibGVRdW90ZWRTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNhcHR1cmVTdGFydCxcbiAgICAgIGNhcHR1cmVFbmQsXG4gICAgICBoZXhMZW5ndGgsXG4gICAgICBoZXhSZXN1bHQsXG4gICAgICB0bXAsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyMi8qIFwiICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgc3RhdGUucG9zaXRpb24rKztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4MjIvKiBcIiAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgfSBlbHNlIGlmIChjaCA9PT0gMHg1Qy8qIFxcICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgIGlmIChpc19FT0woY2gpKSB7XG4gICAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KTtcblxuICAgICAgICAvLyBUT0RPOiByZXdvcmsgdG8gaW5saW5lIGZuIHdpdGggbm8gdHlwZSBjYXN0P1xuICAgICAgfSBlbHNlIGlmIChjaCA8IDI1NiAmJiBzaW1wbGVFc2NhcGVDaGVja1tjaF0pIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IHNpbXBsZUVzY2FwZU1hcFtjaF07XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG5cbiAgICAgIH0gZWxzZSBpZiAoKHRtcCA9IGVzY2FwZWRIZXhMZW4oY2gpKSA+IDApIHtcbiAgICAgICAgaGV4TGVuZ3RoID0gdG1wO1xuICAgICAgICBoZXhSZXN1bHQgPSAwO1xuXG4gICAgICAgIGZvciAoOyBoZXhMZW5ndGggPiAwOyBoZXhMZW5ndGgtLSkge1xuICAgICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICAgIGlmICgodG1wID0gZnJvbUhleENvZGUoY2gpKSA+PSAwKSB7XG4gICAgICAgICAgICBoZXhSZXN1bHQgPSAoaGV4UmVzdWx0IDw8IDQpICsgdG1wO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdleHBlY3RlZCBoZXhhZGVjaW1hbCBjaGFyYWN0ZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY2hhckZyb21Db2RlcG9pbnQoaGV4UmVzdWx0KTtcblxuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5rbm93biBlc2NhcGUgc2VxdWVuY2UnKTtcbiAgICAgIH1cblxuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCB0cnVlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBkb2N1bWVudCB3aXRoaW4gYSBkb3VibGUgcXVvdGVkIHNjYWxhcicpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgZG91YmxlIHF1b3RlZCBzY2FsYXInKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZsb3dDb2xsZWN0aW9uKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciByZWFkTmV4dCA9IHRydWUsXG4gICAgICBfbGluZSxcbiAgICAgIF90YWcgICAgID0gc3RhdGUudGFnLFxuICAgICAgX3Jlc3VsdCxcbiAgICAgIF9hbmNob3IgID0gc3RhdGUuYW5jaG9yLFxuICAgICAgZm9sbG93aW5nLFxuICAgICAgdGVybWluYXRvcixcbiAgICAgIGlzUGFpcixcbiAgICAgIGlzRXhwbGljaXRQYWlyLFxuICAgICAgaXNNYXBwaW5nLFxuICAgICAgb3ZlcnJpZGFibGVLZXlzID0ge30sXG4gICAgICBrZXlOb2RlLFxuICAgICAga2V5VGFnLFxuICAgICAgdmFsdWVOb2RlLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4NUIvKiBbICovKSB7XG4gICAgdGVybWluYXRvciA9IDB4NUQ7LyogXSAqL1xuICAgIGlzTWFwcGluZyA9IGZhbHNlO1xuICAgIF9yZXN1bHQgPSBbXTtcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHg3Qi8qIHsgKi8pIHtcbiAgICB0ZXJtaW5hdG9yID0gMHg3RDsvKiB9ICovXG4gICAgaXNNYXBwaW5nID0gdHJ1ZTtcbiAgICBfcmVzdWx0ID0ge307XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IHRlcm1pbmF0b3IpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgIHN0YXRlLmtpbmQgPSBpc01hcHBpbmcgPyAnbWFwcGluZycgOiAnc2VxdWVuY2UnO1xuICAgICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXJlYWROZXh0KSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbWlzc2VkIGNvbW1hIGJldHdlZW4gZmxvdyBjb2xsZWN0aW9uIGVudHJpZXMnKTtcbiAgICB9XG5cbiAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICBpc1BhaXIgPSBpc0V4cGxpY2l0UGFpciA9IGZhbHNlO1xuXG4gICAgaWYgKGNoID09PSAweDNGLyogPyAqLykge1xuICAgICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcbiAgICAgICAgaXNQYWlyID0gaXNFeHBsaWNpdFBhaXIgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgIGtleVRhZyA9IHN0YXRlLnRhZztcbiAgICBrZXlOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmICgoaXNFeHBsaWNpdFBhaXIgfHwgc3RhdGUubGluZSA9PT0gX2xpbmUpICYmIGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgaXNQYWlyID0gdHJ1ZTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuICAgICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIH1cblxuICAgIGlmIChpc01hcHBpbmcpIHtcbiAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUpO1xuICAgIH0gZWxzZSBpZiAoaXNQYWlyKSB7XG4gICAgICBfcmVzdWx0LnB1c2goc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgbnVsbCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcmVzdWx0LnB1c2goa2V5Tm9kZSk7XG4gICAgfVxuXG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSAweDJDLyogLCAqLykge1xuICAgICAgcmVhZE5leHQgPSB0cnVlO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFkTmV4dCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIGZsb3cgY29sbGVjdGlvbicpO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNhcHR1cmVTdGFydCxcbiAgICAgIGZvbGRpbmcsXG4gICAgICBjaG9tcGluZyAgICAgICA9IENIT01QSU5HX0NMSVAsXG4gICAgICBkaWRSZWFkQ29udGVudCA9IGZhbHNlLFxuICAgICAgZGV0ZWN0ZWRJbmRlbnQgPSBmYWxzZSxcbiAgICAgIHRleHRJbmRlbnQgICAgID0gbm9kZUluZGVudCxcbiAgICAgIGVtcHR5TGluZXMgICAgID0gMCxcbiAgICAgIGF0TW9yZUluZGVudGVkID0gZmFsc2UsXG4gICAgICB0bXAsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHg3Qy8qIHwgKi8pIHtcbiAgICBmb2xkaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4M0UvKiA+ICovKSB7XG4gICAgZm9sZGluZyA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IDB4MkIvKiArICovIHx8IGNoID09PSAweDJELyogLSAqLykge1xuICAgICAgaWYgKENIT01QSU5HX0NMSVAgPT09IGNob21waW5nKSB7XG4gICAgICAgIGNob21waW5nID0gKGNoID09PSAweDJCLyogKyAqLykgPyBDSE9NUElOR19LRUVQIDogQ0hPTVBJTkdfU1RSSVA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAncmVwZWF0IG9mIGEgY2hvbXBpbmcgbW9kZSBpZGVudGlmaWVyJyk7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKCh0bXAgPSBmcm9tRGVjaW1hbENvZGUoY2gpKSA+PSAwKSB7XG4gICAgICBpZiAodG1wID09PSAwKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdiYWQgZXhwbGljaXQgaW5kZW50YXRpb24gd2lkdGggb2YgYSBibG9jayBzY2FsYXI7IGl0IGNhbm5vdCBiZSBsZXNzIHRoYW4gb25lJyk7XG4gICAgICB9IGVsc2UgaWYgKCFkZXRlY3RlZEluZGVudCkge1xuICAgICAgICB0ZXh0SW5kZW50ID0gbm9kZUluZGVudCArIHRtcCAtIDE7XG4gICAgICAgIGRldGVjdGVkSW5kZW50ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdyZXBlYXQgb2YgYW4gaW5kZW50YXRpb24gd2lkdGggaWRlbnRpZmllcicpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpO1xuXG4gICAgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICAgIHdoaWxlICghaXNfRU9MKGNoKSAmJiAoY2ggIT09IDApKTtcbiAgICB9XG4gIH1cblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICByZWFkTGluZUJyZWFrKHN0YXRlKTtcbiAgICBzdGF0ZS5saW5lSW5kZW50ID0gMDtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICB3aGlsZSAoKCFkZXRlY3RlZEluZGVudCB8fCBzdGF0ZS5saW5lSW5kZW50IDwgdGV4dEluZGVudCkgJiZcbiAgICAgICAgICAgKGNoID09PSAweDIwLyogU3BhY2UgKi8pKSB7XG4gICAgICBzdGF0ZS5saW5lSW5kZW50Kys7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCFkZXRlY3RlZEluZGVudCAmJiBzdGF0ZS5saW5lSW5kZW50ID4gdGV4dEluZGVudCkge1xuICAgICAgdGV4dEluZGVudCA9IHN0YXRlLmxpbmVJbmRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIGVtcHR5TGluZXMrKztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIEVuZCBvZiB0aGUgc2NhbGFyLlxuICAgIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgdGV4dEluZGVudCkge1xuXG4gICAgICAvLyBQZXJmb3JtIHRoZSBjaG9tcGluZy5cbiAgICAgIGlmIChjaG9tcGluZyA9PT0gQ0hPTVBJTkdfS0VFUCkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZGlkUmVhZENvbnRlbnQgPyAxICsgZW1wdHlMaW5lcyA6IGVtcHR5TGluZXMpO1xuICAgICAgfSBlbHNlIGlmIChjaG9tcGluZyA9PT0gQ0hPTVBJTkdfQ0xJUCkge1xuICAgICAgICBpZiAoZGlkUmVhZENvbnRlbnQpIHsgLy8gaS5lLiBvbmx5IGlmIHRoZSBzY2FsYXIgaXMgbm90IGVtcHR5LlxuICAgICAgICAgIHN0YXRlLnJlc3VsdCArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBCcmVhayB0aGlzIGB3aGlsZWAgY3ljbGUgYW5kIGdvIHRvIHRoZSBmdW5jaXRvbidzIGVwaWxvZ3VlLlxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gRm9sZGVkIHN0eWxlOiB1c2UgZmFuY3kgcnVsZXMgdG8gaGFuZGxlIGxpbmUgYnJlYWtzLlxuICAgIGlmIChmb2xkaW5nKSB7XG5cbiAgICAgIC8vIExpbmVzIHN0YXJ0aW5nIHdpdGggd2hpdGUgc3BhY2UgY2hhcmFjdGVycyAobW9yZS1pbmRlbnRlZCBsaW5lcykgYXJlIG5vdCBmb2xkZWQuXG4gICAgICBpZiAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICAgIGF0TW9yZUluZGVudGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZXhjZXB0IGZvciB0aGUgZmlyc3QgY29udGVudCBsaW5lIChjZi4gRXhhbXBsZSA4LjEpXG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG5cbiAgICAgIC8vIEVuZCBvZiBtb3JlLWluZGVudGVkIGJsb2NrLlxuICAgICAgfSBlbHNlIGlmIChhdE1vcmVJbmRlbnRlZCkge1xuICAgICAgICBhdE1vcmVJbmRlbnRlZCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZW1wdHlMaW5lcyArIDEpO1xuXG4gICAgICAvLyBKdXN0IG9uZSBsaW5lIGJyZWFrIC0gcGVyY2VpdmUgYXMgdGhlIHNhbWUgbGluZS5cbiAgICAgIH0gZWxzZSBpZiAoZW1wdHlMaW5lcyA9PT0gMCkge1xuICAgICAgICBpZiAoZGlkUmVhZENvbnRlbnQpIHsgLy8gaS5lLiBvbmx5IGlmIHdlIGhhdmUgYWxyZWFkeSByZWFkIHNvbWUgc2NhbGFyIGNvbnRlbnQuXG4gICAgICAgICAgc3RhdGUucmVzdWx0ICs9ICcgJztcbiAgICAgICAgfVxuXG4gICAgICAvLyBTZXZlcmFsIGxpbmUgYnJlYWtzIC0gcGVyY2VpdmUgYXMgZGlmZmVyZW50IGxpbmVzLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGVtcHR5TGluZXMpO1xuICAgICAgfVxuXG4gICAgLy8gTGl0ZXJhbCBzdHlsZToganVzdCBhZGQgZXhhY3QgbnVtYmVyIG9mIGxpbmUgYnJlYWtzIGJldHdlZW4gY29udGVudCBsaW5lcy5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gS2VlcCBhbGwgbGluZSBicmVha3MgZXhjZXB0IHRoZSBoZWFkZXIgbGluZSBicmVhay5cbiAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG4gICAgfVxuXG4gICAgZGlkUmVhZENvbnRlbnQgPSB0cnVlO1xuICAgIGRldGVjdGVkSW5kZW50ID0gdHJ1ZTtcbiAgICBlbXB0eUxpbmVzID0gMDtcbiAgICBjYXB0dXJlU3RhcnQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIHdoaWxlICghaXNfRU9MKGNoKSAmJiAoY2ggIT09IDApKSB7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIGZhbHNlKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgX2xpbmUsXG4gICAgICBfdGFnICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBfYW5jaG9yICAgPSBzdGF0ZS5hbmNob3IsXG4gICAgICBfcmVzdWx0ICAgPSBbXSxcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIGRldGVjdGVkICA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG5cbiAgICBpZiAoY2ggIT09IDB4MkQvKiAtICovKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICBpZiAoIWlzX1dTX09SX0VPTChmb2xsb3dpbmcpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgc3RhdGUucG9zaXRpb24rKztcblxuICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50IDw9IG5vZGVJbmRlbnQpIHtcbiAgICAgICAgX3Jlc3VsdC5wdXNoKG51bGwpO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfQkxPQ0tfSU4sIGZhbHNlLCB0cnVlKTtcbiAgICBfcmVzdWx0LnB1c2goc3RhdGUucmVzdWx0KTtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkgJiYgKGNoICE9PSAwKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBpbmRlbnRhdGlvbiBvZiBhIHNlcXVlbmNlIGVudHJ5Jyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgbm9kZUluZGVudCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRldGVjdGVkKSB7XG4gICAgc3RhdGUudGFnID0gX3RhZztcbiAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgIHN0YXRlLmtpbmQgPSAnc2VxdWVuY2UnO1xuICAgIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tNYXBwaW5nKHN0YXRlLCBub2RlSW5kZW50LCBmbG93SW5kZW50KSB7XG4gIHZhciBmb2xsb3dpbmcsXG4gICAgICBhbGxvd0NvbXBhY3QsXG4gICAgICBfbGluZSxcbiAgICAgIF9wb3MsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgX2FuY2hvciAgICAgICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIF9yZXN1bHQgICAgICAgPSB7fSxcbiAgICAgIG92ZXJyaWRhYmxlS2V5cyA9IHt9LFxuICAgICAga2V5VGFnICAgICAgICA9IG51bGwsXG4gICAgICBrZXlOb2RlICAgICAgID0gbnVsbCxcbiAgICAgIHZhbHVlTm9kZSAgICAgPSBudWxsLFxuICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlLFxuICAgICAgZGV0ZWN0ZWQgICAgICA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuICAgIF9saW5lID0gc3RhdGUubGluZTsgLy8gU2F2ZSB0aGUgY3VycmVudCBsaW5lLlxuICAgIF9wb3MgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIC8vXG4gICAgLy8gRXhwbGljaXQgbm90YXRpb24gY2FzZS4gVGhlcmUgYXJlIHR3byBzZXBhcmF0ZSBibG9ja3M6XG4gICAgLy8gZmlyc3QgZm9yIHRoZSBrZXkgKGRlbm90ZWQgYnkgXCI/XCIpIGFuZCBzZWNvbmQgZm9yIHRoZSB2YWx1ZSAoZGVub3RlZCBieSBcIjpcIilcbiAgICAvL1xuICAgIGlmICgoY2ggPT09IDB4M0YvKiA/ICovIHx8IGNoID09PSAweDNBLyogOiAqLykgJiYgaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcblxuICAgICAgaWYgKGNoID09PSAweDNGLyogPyAqLykge1xuICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsKTtcbiAgICAgICAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IHRydWU7XG4gICAgICAgIGFsbG93Q29tcGFjdCA9IHRydWU7XG5cbiAgICAgIH0gZWxzZSBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAvLyBpLmUuIDB4M0EvKiA6ICovID09PSBjaGFyYWN0ZXIgYWZ0ZXIgdGhlIGV4cGxpY2l0IGtleS5cbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlO1xuICAgICAgICBhbGxvd0NvbXBhY3QgPSB0cnVlO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaW5jb21wbGV0ZSBleHBsaWNpdCBtYXBwaW5nIHBhaXI7IGEga2V5IG5vZGUgaXMgbWlzc2VkOyBvciBmb2xsb3dlZCBieSBhIG5vbi10YWJ1bGF0ZWQgZW1wdHkgbGluZScpO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICAgICAgY2ggPSBmb2xsb3dpbmc7XG5cbiAgICAvL1xuICAgIC8vIEltcGxpY2l0IG5vdGF0aW9uIGNhc2UuIEZsb3ctc3R5bGUgbm9kZSBhcyB0aGUga2V5IGZpcnN0LCB0aGVuIFwiOlwiLCBhbmQgdGhlIHZhbHVlLlxuICAgIC8vXG4gICAgfSBlbHNlIGlmIChjb21wb3NlTm9kZShzdGF0ZSwgZmxvd0luZGVudCwgQ09OVEVYVF9GTE9XX09VVCwgZmFsc2UsIHRydWUpKSB7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lID09PSBfbGluZSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgICAgaWYgKCFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYSB3aGl0ZXNwYWNlIGNoYXJhY3RlciBpcyBleHBlY3RlZCBhZnRlciB0aGUga2V5LXZhbHVlIHNlcGFyYXRvciB3aXRoaW4gYSBibG9jayBtYXBwaW5nJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsKTtcbiAgICAgICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBhdEV4cGxpY2l0S2V5ID0gZmFsc2U7XG4gICAgICAgICAgYWxsb3dDb21wYWN0ID0gZmFsc2U7XG4gICAgICAgICAga2V5VGFnID0gc3RhdGUudGFnO1xuICAgICAgICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkZXRlY3RlZCkge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW4gbm90IHJlYWQgYW4gaW1wbGljaXQgbWFwcGluZyBwYWlyOyBhIGNvbG9uIGlzIG1pc3NlZCcpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgICAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBLZWVwIHRoZSByZXN1bHQgb2YgYGNvbXBvc2VOb2RlYC5cbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2UgaWYgKGRldGVjdGVkKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW4gbm90IHJlYWQgYSBibG9jayBtYXBwaW5nIGVudHJ5OyBhIG11bHRpbGluZSBrZXkgbWF5IG5vdCBiZSBhbiBpbXBsaWNpdCBrZXknKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEtlZXAgdGhlIHJlc3VsdCBvZiBgY29tcG9zZU5vZGVgLlxuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrOyAvLyBSZWFkaW5nIGlzIGRvbmUuIEdvIHRvIHRoZSBlcGlsb2d1ZS5cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIENvbW1vbiByZWFkaW5nIGNvZGUgZm9yIGJvdGggZXhwbGljaXQgYW5kIGltcGxpY2l0IG5vdGF0aW9ucy5cbiAgICAvL1xuICAgIGlmIChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkge1xuICAgICAgaWYgKGNvbXBvc2VOb2RlKHN0YXRlLCBub2RlSW5kZW50LCBDT05URVhUX0JMT0NLX09VVCwgdHJ1ZSwgYWxsb3dDb21wYWN0KSkge1xuICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghYXRFeHBsaWNpdEtleSkge1xuICAgICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBfbGluZSwgX3Bvcyk7XG4gICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCAmJiAoY2ggIT09IDApKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYmFkIGluZGVudGF0aW9uIG9mIGEgbWFwcGluZyBlbnRyeScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IG5vZGVJbmRlbnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIEVwaWxvZ3VlLlxuICAvL1xuXG4gIC8vIFNwZWNpYWwgY2FzZTogbGFzdCBtYXBwaW5nJ3Mgbm9kZSBjb250YWlucyBvbmx5IHRoZSBrZXkgaW4gZXhwbGljaXQgbm90YXRpb24uXG4gIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIG51bGwpO1xuICB9XG5cbiAgLy8gRXhwb3NlIHRoZSByZXN1bHRpbmcgbWFwcGluZy5cbiAgaWYgKGRldGVjdGVkKSB7XG4gICAgc3RhdGUudGFnID0gX3RhZztcbiAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgIHN0YXRlLmtpbmQgPSAnbWFwcGluZyc7XG4gICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBkZXRlY3RlZDtcbn1cblxuZnVuY3Rpb24gcmVhZFRhZ1Byb3BlcnR5KHN0YXRlKSB7XG4gIHZhciBfcG9zaXRpb24sXG4gICAgICBpc1ZlcmJhdGltID0gZmFsc2UsXG4gICAgICBpc05hbWVkICAgID0gZmFsc2UsXG4gICAgICB0YWdIYW5kbGUsXG4gICAgICB0YWdOYW1lLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjEvKiAhICovKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGlvbiBvZiBhIHRhZyBwcm9wZXJ0eScpO1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHgzQy8qIDwgKi8pIHtcbiAgICBpc1ZlcmJhdGltID0gdHJ1ZTtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgfSBlbHNlIGlmIChjaCA9PT0gMHgyMS8qICEgKi8pIHtcbiAgICBpc05hbWVkID0gdHJ1ZTtcbiAgICB0YWdIYW5kbGUgPSAnISEnO1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB9IGVsc2Uge1xuICAgIHRhZ0hhbmRsZSA9ICchJztcbiAgfVxuXG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIGlmIChpc1ZlcmJhdGltKSB7XG4gICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgY2ggIT09IDB4M0UvKiA+ICovKTtcblxuICAgIGlmIChzdGF0ZS5wb3NpdGlvbiA8IHN0YXRlLmxlbmd0aCkge1xuICAgICAgdGFnTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSB2ZXJiYXRpbSB0YWcnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyMS8qICEgKi8pIHtcbiAgICAgICAgaWYgKCFpc05hbWVkKSB7XG4gICAgICAgICAgdGFnSGFuZGxlID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uIC0gMSwgc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgICAgIGlmICghUEFUVEVSTl9UQUdfSEFORExFLnRlc3QodGFnSGFuZGxlKSkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25hbWVkIHRhZyBoYW5kbGUgY2Fubm90IGNvbnRhaW4gc3VjaCBjaGFyYWN0ZXJzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNOYW1lZCA9IHRydWU7XG4gICAgICAgICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb24gKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgc3VmZml4IGNhbm5vdCBjb250YWluIGV4Y2xhbWF0aW9uIG1hcmtzJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRhZ05hbWUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChQQVRURVJOX0ZMT1dfSU5ESUNBVE9SUy50ZXN0KHRhZ05hbWUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIHN1ZmZpeCBjYW5ub3QgY29udGFpbiBmbG93IGluZGljYXRvciBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRhZ05hbWUgJiYgIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHRhZ05hbWUpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBuYW1lIGNhbm5vdCBjb250YWluIHN1Y2ggY2hhcmFjdGVyczogJyArIHRhZ05hbWUpO1xuICB9XG5cbiAgaWYgKGlzVmVyYmF0aW0pIHtcbiAgICBzdGF0ZS50YWcgPSB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAoX2hhc093blByb3BlcnR5LmNhbGwoc3RhdGUudGFnTWFwLCB0YWdIYW5kbGUpKSB7XG4gICAgc3RhdGUudGFnID0gc3RhdGUudGFnTWFwW3RhZ0hhbmRsZV0gKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnIScpIHtcbiAgICBzdGF0ZS50YWcgPSAnIScgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnISEnKSB7XG4gICAgc3RhdGUudGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZGVjbGFyZWQgdGFnIGhhbmRsZSBcIicgKyB0YWdIYW5kbGUgKyAnXCInKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbixcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI2LyogJiAqLykgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRpb24gb2YgYW4gYW5jaG9yIHByb3BlcnR5Jyk7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbmNob3Igbm9kZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGNoYXJhY3RlcicpO1xuICB9XG5cbiAgc3RhdGUuYW5jaG9yID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQWxpYXMoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiwgYWxpYXMsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyQS8qICogKi8pIHJldHVybiBmYWxzZTtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbGlhcyBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyJyk7XG4gIH1cblxuICBhbGlhcyA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmICghX2hhc093blByb3BlcnR5LmNhbGwoc3RhdGUuYW5jaG9yTWFwLCBhbGlhcykpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5pZGVudGlmaWVkIGFsaWFzIFwiJyArIGFsaWFzICsgJ1wiJyk7XG4gIH1cblxuICBzdGF0ZS5yZXN1bHQgPSBzdGF0ZS5hbmNob3JNYXBbYWxpYXNdO1xuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb21wb3NlTm9kZShzdGF0ZSwgcGFyZW50SW5kZW50LCBub2RlQ29udGV4dCwgYWxsb3dUb1NlZWssIGFsbG93Q29tcGFjdCkge1xuICB2YXIgYWxsb3dCbG9ja1N0eWxlcyxcbiAgICAgIGFsbG93QmxvY2tTY2FsYXJzLFxuICAgICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zLFxuICAgICAgaW5kZW50U3RhdHVzID0gMSwgLy8gMTogdGhpcz5wYXJlbnQsIDA6IHRoaXM9cGFyZW50LCAtMTogdGhpczxwYXJlbnRcbiAgICAgIGF0TmV3TGluZSAgPSBmYWxzZSxcbiAgICAgIGhhc0NvbnRlbnQgPSBmYWxzZSxcbiAgICAgIHR5cGVJbmRleCxcbiAgICAgIHR5cGVRdWFudGl0eSxcbiAgICAgIHR5cGUsXG4gICAgICBmbG93SW5kZW50LFxuICAgICAgYmxvY2tJbmRlbnQ7XG5cbiAgaWYgKHN0YXRlLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgc3RhdGUubGlzdGVuZXIoJ29wZW4nLCBzdGF0ZSk7XG4gIH1cblxuICBzdGF0ZS50YWcgICAgPSBudWxsO1xuICBzdGF0ZS5hbmNob3IgPSBudWxsO1xuICBzdGF0ZS5raW5kICAgPSBudWxsO1xuICBzdGF0ZS5yZXN1bHQgPSBudWxsO1xuXG4gIGFsbG93QmxvY2tTdHlsZXMgPSBhbGxvd0Jsb2NrU2NhbGFycyA9IGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9XG4gICAgQ09OVEVYVF9CTE9DS19PVVQgPT09IG5vZGVDb250ZXh0IHx8XG4gICAgQ09OVEVYVF9CTE9DS19JTiAgPT09IG5vZGVDb250ZXh0O1xuXG4gIGlmIChhbGxvd1RvU2Vlaykge1xuICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgIGF0TmV3TGluZSA9IHRydWU7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAwO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IC0xO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpbmRlbnRTdGF0dXMgPT09IDEpIHtcbiAgICB3aGlsZSAocmVhZFRhZ1Byb3BlcnR5KHN0YXRlKSB8fCByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpKSB7XG4gICAgICBpZiAoc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpKSB7XG4gICAgICAgIGF0TmV3TGluZSA9IHRydWU7XG4gICAgICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9IGFsbG93QmxvY2tTdHlsZXM7XG5cbiAgICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IC0xO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoYWxsb3dCbG9ja0NvbGxlY3Rpb25zKSB7XG4gICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zID0gYXROZXdMaW5lIHx8IGFsbG93Q29tcGFjdDtcbiAgfVxuXG4gIGlmIChpbmRlbnRTdGF0dXMgPT09IDEgfHwgQ09OVEVYVF9CTE9DS19PVVQgPT09IG5vZGVDb250ZXh0KSB7XG4gICAgaWYgKENPTlRFWFRfRkxPV19JTiA9PT0gbm9kZUNvbnRleHQgfHwgQ09OVEVYVF9GTE9XX09VVCA9PT0gbm9kZUNvbnRleHQpIHtcbiAgICAgIGZsb3dJbmRlbnQgPSBwYXJlbnRJbmRlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsb3dJbmRlbnQgPSBwYXJlbnRJbmRlbnQgKyAxO1xuICAgIH1cblxuICAgIGJsb2NrSW5kZW50ID0gc3RhdGUucG9zaXRpb24gLSBzdGF0ZS5saW5lU3RhcnQ7XG5cbiAgICBpZiAoaW5kZW50U3RhdHVzID09PSAxKSB7XG4gICAgICBpZiAoYWxsb3dCbG9ja0NvbGxlY3Rpb25zICYmXG4gICAgICAgICAgKHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBibG9ja0luZGVudCkgfHxcbiAgICAgICAgICAgcmVhZEJsb2NrTWFwcGluZyhzdGF0ZSwgYmxvY2tJbmRlbnQsIGZsb3dJbmRlbnQpKSB8fFxuICAgICAgICAgIHJlYWRGbG93Q29sbGVjdGlvbihzdGF0ZSwgZmxvd0luZGVudCkpIHtcbiAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoKGFsbG93QmxvY2tTY2FsYXJzICYmIHJlYWRCbG9ja1NjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkpIHx8XG4gICAgICAgICAgICByZWFkU2luZ2xlUXVvdGVkU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50KSB8fFxuICAgICAgICAgICAgcmVhZERvdWJsZVF1b3RlZFNjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlYWRBbGlhcyhzdGF0ZSkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICAgIGlmIChzdGF0ZS50YWcgIT09IG51bGwgfHwgc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYWxpYXMgbm9kZSBzaG91bGQgbm90IGhhdmUgYW55IHByb3BlcnRpZXMnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWFkUGxhaW5TY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQsIENPTlRFWFRfRkxPV19JTiA9PT0gbm9kZUNvbnRleHQpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAoc3RhdGUudGFnID09PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0ZS50YWcgPSAnPyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpbmRlbnRTdGF0dXMgPT09IDApIHtcbiAgICAgIC8vIFNwZWNpYWwgY2FzZTogYmxvY2sgc2VxdWVuY2VzIGFyZSBhbGxvd2VkIHRvIGhhdmUgc2FtZSBpbmRlbnRhdGlvbiBsZXZlbCBhcyB0aGUgcGFyZW50LlxuICAgICAgLy8gaHR0cDovL3d3dy55YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjaWQyNzk5Nzg0XG4gICAgICBoYXNDb250ZW50ID0gYWxsb3dCbG9ja0NvbGxlY3Rpb25zICYmIHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBibG9ja0luZGVudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICchJykge1xuICAgIGlmIChzdGF0ZS50YWcgPT09ICc/Jykge1xuICAgICAgLy8gSW1wbGljaXQgcmVzb2x2aW5nIGlzIG5vdCBhbGxvd2VkIGZvciBub24tc2NhbGFyIHR5cGVzLCBhbmQgJz8nXG4gICAgICAvLyBub24tc3BlY2lmaWMgdGFnIGlzIG9ubHkgYXV0b21hdGljYWxseSBhc3NpZ25lZCB0byBwbGFpbiBzY2FsYXJzLlxuICAgICAgLy9cbiAgICAgIC8vIFdlIG9ubHkgbmVlZCB0byBjaGVjayBraW5kIGNvbmZvcm1pdHkgaW4gY2FzZSB1c2VyIGV4cGxpY2l0bHkgYXNzaWducyAnPydcbiAgICAgIC8vIHRhZywgZm9yIGV4YW1wbGUgbGlrZSB0aGlzOiBcIiE8Pz4gWzBdXCJcbiAgICAgIC8vXG4gICAgICBpZiAoc3RhdGUucmVzdWx0ICE9PSBudWxsICYmIHN0YXRlLmtpbmQgIT09ICdzY2FsYXInKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgbm9kZSBraW5kIGZvciAhPD8+IHRhZzsgaXQgc2hvdWxkIGJlIFwic2NhbGFyXCIsIG5vdCBcIicgKyBzdGF0ZS5raW5kICsgJ1wiJyk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodHlwZUluZGV4ID0gMCwgdHlwZVF1YW50aXR5ID0gc3RhdGUuaW1wbGljaXRUeXBlcy5sZW5ndGg7IHR5cGVJbmRleCA8IHR5cGVRdWFudGl0eTsgdHlwZUluZGV4ICs9IDEpIHtcbiAgICAgICAgdHlwZSA9IHN0YXRlLmltcGxpY2l0VHlwZXNbdHlwZUluZGV4XTtcblxuICAgICAgICBpZiAodHlwZS5yZXNvbHZlKHN0YXRlLnJlc3VsdCkpIHsgLy8gYHN0YXRlLnJlc3VsdGAgdXBkYXRlZCBpbiByZXNvbHZlciBpZiBtYXRjaGVkXG4gICAgICAgICAgc3RhdGUucmVzdWx0ID0gdHlwZS5jb25zdHJ1Y3Qoc3RhdGUucmVzdWx0KTtcbiAgICAgICAgICBzdGF0ZS50YWcgPSB0eXBlLnRhZztcbiAgICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKF9oYXNPd25Qcm9wZXJ0eS5jYWxsKHN0YXRlLnR5cGVNYXBbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXSwgc3RhdGUudGFnKSkge1xuICAgICAgdHlwZSA9IHN0YXRlLnR5cGVNYXBbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXVtzdGF0ZS50YWddO1xuXG4gICAgICBpZiAoc3RhdGUucmVzdWx0ICE9PSBudWxsICYmIHR5cGUua2luZCAhPT0gc3RhdGUua2luZCkge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5hY2NlcHRhYmxlIG5vZGUga2luZCBmb3IgITwnICsgc3RhdGUudGFnICsgJz4gdGFnOyBpdCBzaG91bGQgYmUgXCInICsgdHlwZS5raW5kICsgJ1wiLCBub3QgXCInICsgc3RhdGUua2luZCArICdcIicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXR5cGUucmVzb2x2ZShzdGF0ZS5yZXN1bHQpKSB7IC8vIGBzdGF0ZS5yZXN1bHRgIHVwZGF0ZWQgaW4gcmVzb2x2ZXIgaWYgbWF0Y2hlZFxuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2Fubm90IHJlc29sdmUgYSBub2RlIHdpdGggITwnICsgc3RhdGUudGFnICsgJz4gZXhwbGljaXQgdGFnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgPSB0eXBlLmNvbnN0cnVjdChzdGF0ZS5yZXN1bHQpO1xuICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3Vua25vd24gdGFnICE8JyArIHN0YXRlLnRhZyArICc+Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgc3RhdGUubGlzdGVuZXIoJ2Nsb3NlJywgc3RhdGUpO1xuICB9XG4gIHJldHVybiBzdGF0ZS50YWcgIT09IG51bGwgfHwgIHN0YXRlLmFuY2hvciAhPT0gbnVsbCB8fCBoYXNDb250ZW50O1xufVxuXG5mdW5jdGlvbiByZWFkRG9jdW1lbnQoc3RhdGUpIHtcbiAgdmFyIGRvY3VtZW50U3RhcnQgPSBzdGF0ZS5wb3NpdGlvbixcbiAgICAgIF9wb3NpdGlvbixcbiAgICAgIGRpcmVjdGl2ZU5hbWUsXG4gICAgICBkaXJlY3RpdmVBcmdzLFxuICAgICAgaGFzRGlyZWN0aXZlcyA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgc3RhdGUudmVyc2lvbiA9IG51bGw7XG4gIHN0YXRlLmNoZWNrTGluZUJyZWFrcyA9IHN0YXRlLmxlZ2FjeTtcbiAgc3RhdGUudGFnTWFwID0ge307XG4gIHN0YXRlLmFuY2hvck1hcCA9IHt9O1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiAwIHx8IGNoICE9PSAweDI1LyogJSAqLykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaGFzRGlyZWN0aXZlcyA9IHRydWU7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgZGlyZWN0aXZlTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICAgIGRpcmVjdGl2ZUFyZ3MgPSBbXTtcblxuICAgIGlmIChkaXJlY3RpdmVOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdkaXJlY3RpdmUgbmFtZSBtdXN0IG5vdCBiZSBsZXNzIHRoYW4gb25lIGNoYXJhY3RlciBpbiBsZW5ndGgnKTtcbiAgICB9XG5cbiAgICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfRU9MKGNoKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNfRU9MKGNoKSkgYnJlYWs7XG5cbiAgICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVBcmdzLnB1c2goc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbikpO1xuICAgIH1cblxuICAgIGlmIChjaCAhPT0gMCkgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG5cbiAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwoZGlyZWN0aXZlSGFuZGxlcnMsIGRpcmVjdGl2ZU5hbWUpKSB7XG4gICAgICBkaXJlY3RpdmVIYW5kbGVyc1tkaXJlY3RpdmVOYW1lXShzdGF0ZSwgZGlyZWN0aXZlTmFtZSwgZGlyZWN0aXZlQXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ3Vua25vd24gZG9jdW1lbnQgZGlyZWN0aXZlIFwiJyArIGRpcmVjdGl2ZU5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH1cblxuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IDAgJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pICAgICA9PT0gMHgyRC8qIC0gKi8gJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKSA9PT0gMHgyRC8qIC0gKi8gJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAyKSA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAzO1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICB9IGVsc2UgaWYgKGhhc0RpcmVjdGl2ZXMpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZGlyZWN0aXZlcyBlbmQgbWFyayBpcyBleHBlY3RlZCcpO1xuICB9XG5cbiAgY29tcG9zZU5vZGUoc3RhdGUsIHN0YXRlLmxpbmVJbmRlbnQgLSAxLCBDT05URVhUX0JMT0NLX09VVCwgZmFsc2UsIHRydWUpO1xuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgaWYgKHN0YXRlLmNoZWNrTGluZUJyZWFrcyAmJlxuICAgICAgUEFUVEVSTl9OT05fQVNDSUlfTElORV9CUkVBS1MudGVzdChzdGF0ZS5pbnB1dC5zbGljZShkb2N1bWVudFN0YXJ0LCBzdGF0ZS5wb3NpdGlvbikpKSB7XG4gICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAnbm9uLUFTQ0lJIGxpbmUgYnJlYWtzIGFyZSBpbnRlcnByZXRlZCBhcyBjb250ZW50Jyk7XG4gIH1cblxuICBzdGF0ZS5kb2N1bWVudHMucHVzaChzdGF0ZS5yZXN1bHQpO1xuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcblxuICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgyRS8qIC4gKi8pIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uICs9IDM7XG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA8IChzdGF0ZS5sZW5ndGggLSAxKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdlbmQgb2YgdGhlIHN0cmVhbSBvciBhIGRvY3VtZW50IHNlcGFyYXRvciBpcyBleHBlY3RlZCcpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpIHtcbiAgaW5wdXQgPSBTdHJpbmcoaW5wdXQpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBpZiAoaW5wdXQubGVuZ3RoICE9PSAwKSB7XG5cbiAgICAvLyBBZGQgdGFpbGluZyBgXFxuYCBpZiBub3QgZXhpc3RzXG4gICAgaWYgKGlucHV0LmNoYXJDb2RlQXQoaW5wdXQubGVuZ3RoIC0gMSkgIT09IDB4MEEvKiBMRiAqLyAmJlxuICAgICAgICBpbnB1dC5jaGFyQ29kZUF0KGlucHV0Lmxlbmd0aCAtIDEpICE9PSAweDBELyogQ1IgKi8pIHtcbiAgICAgIGlucHV0ICs9ICdcXG4nO1xuICAgIH1cblxuICAgIC8vIFN0cmlwIEJPTVxuICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KDApID09PSAweEZFRkYpIHtcbiAgICAgIGlucHV0ID0gaW5wdXQuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHN0YXRlID0gbmV3IFN0YXRlKGlucHV0LCBvcHRpb25zKTtcblxuICB2YXIgbnVsbHBvcyA9IGlucHV0LmluZGV4T2YoJ1xcMCcpO1xuXG4gIGlmIChudWxscG9zICE9PSAtMSkge1xuICAgIHN0YXRlLnBvc2l0aW9uID0gbnVsbHBvcztcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbnVsbCBieXRlIGlzIG5vdCBhbGxvd2VkIGluIGlucHV0Jyk7XG4gIH1cblxuICAvLyBVc2UgMCBhcyBzdHJpbmcgdGVybWluYXRvci4gVGhhdCBzaWduaWZpY2FudGx5IHNpbXBsaWZpZXMgYm91bmRzIGNoZWNrLlxuICBzdGF0ZS5pbnB1dCArPSAnXFwwJztcblxuICB3aGlsZSAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MjAvKiBTcGFjZSAqLykge1xuICAgIHN0YXRlLmxpbmVJbmRlbnQgKz0gMTtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICB9XG5cbiAgd2hpbGUgKHN0YXRlLnBvc2l0aW9uIDwgKHN0YXRlLmxlbmd0aCAtIDEpKSB7XG4gICAgcmVhZERvY3VtZW50KHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZS5kb2N1bWVudHM7XG59XG5cblxuZnVuY3Rpb24gbG9hZEFsbChpbnB1dCwgaXRlcmF0b3IsIG9wdGlvbnMpIHtcbiAgaWYgKGl0ZXJhdG9yICE9PSBudWxsICYmIHR5cGVvZiBpdGVyYXRvciA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgb3B0aW9ucyA9IGl0ZXJhdG9yO1xuICAgIGl0ZXJhdG9yID0gbnVsbDtcbiAgfVxuXG4gIHZhciBkb2N1bWVudHMgPSBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKTtcblxuICBpZiAodHlwZW9mIGl0ZXJhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50cztcbiAgfVxuXG4gIGZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZG9jdW1lbnRzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBpdGVyYXRvcihkb2N1bWVudHNbaW5kZXhdKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGxvYWQoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIGRvY3VtZW50cyA9IGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpO1xuXG4gIGlmIChkb2N1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgLyplc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQqL1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBkb2N1bWVudHNbMF07XG4gIH1cbiAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJ2V4cGVjdGVkIGEgc2luZ2xlIGRvY3VtZW50IGluIHRoZSBzdHJlYW0sIGJ1dCBmb3VuZCBtb3JlJyk7XG59XG5cblxuZnVuY3Rpb24gc2FmZUxvYWRBbGwoaW5wdXQsIGl0ZXJhdG9yLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3IgPT09ICdvYmplY3QnICYmIGl0ZXJhdG9yICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJykge1xuICAgIG9wdGlvbnMgPSBpdGVyYXRvcjtcbiAgICBpdGVyYXRvciA9IG51bGw7XG4gIH1cblxuICByZXR1cm4gbG9hZEFsbChpbnB1dCwgaXRlcmF0b3IsIGNvbW1vbi5leHRlbmQoeyBzY2hlbWE6IERFRkFVTFRfU0FGRV9TQ0hFTUEgfSwgb3B0aW9ucykpO1xufVxuXG5cbmZ1bmN0aW9uIHNhZmVMb2FkKGlucHV0LCBvcHRpb25zKSB7XG4gIHJldHVybiBsb2FkKGlucHV0LCBjb21tb24uZXh0ZW5kKHsgc2NoZW1hOiBERUZBVUxUX1NBRkVfU0NIRU1BIH0sIG9wdGlvbnMpKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cy5sb2FkQWxsICAgICA9IGxvYWRBbGw7XG5tb2R1bGUuZXhwb3J0cy5sb2FkICAgICAgICA9IGxvYWQ7XG5tb2R1bGUuZXhwb3J0cy5zYWZlTG9hZEFsbCA9IHNhZmVMb2FkQWxsO1xubW9kdWxlLmV4cG9ydHMuc2FmZUxvYWQgICAgPSBzYWZlTG9hZDtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUqL1xuXG52YXIgY29tbW9uICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vY29tbW9uJyk7XG52YXIgWUFNTEV4Y2VwdGlvbiAgICAgICA9IHJlcXVpcmUoJy4vZXhjZXB0aW9uJyk7XG52YXIgREVGQVVMVF9GVUxMX1NDSEVNQSA9IHJlcXVpcmUoJy4vc2NoZW1hL2RlZmF1bHRfZnVsbCcpO1xudmFyIERFRkFVTFRfU0FGRV9TQ0hFTUEgPSByZXF1aXJlKCcuL3NjaGVtYS9kZWZhdWx0X3NhZmUnKTtcblxudmFyIF90b1N0cmluZyAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIENIQVJfVEFCICAgICAgICAgICAgICAgICAgPSAweDA5OyAvKiBUYWIgKi9cbnZhciBDSEFSX0xJTkVfRkVFRCAgICAgICAgICAgID0gMHgwQTsgLyogTEYgKi9cbnZhciBDSEFSX0NBUlJJQUdFX1JFVFVSTiAgICAgID0gMHgwRDsgLyogQ1IgKi9cbnZhciBDSEFSX1NQQUNFICAgICAgICAgICAgICAgID0gMHgyMDsgLyogU3BhY2UgKi9cbnZhciBDSEFSX0VYQ0xBTUFUSU9OICAgICAgICAgID0gMHgyMTsgLyogISAqL1xudmFyIENIQVJfRE9VQkxFX1FVT1RFICAgICAgICAgPSAweDIyOyAvKiBcIiAqL1xudmFyIENIQVJfU0hBUlAgICAgICAgICAgICAgICAgPSAweDIzOyAvKiAjICovXG52YXIgQ0hBUl9QRVJDRU5UICAgICAgICAgICAgICA9IDB4MjU7IC8qICUgKi9cbnZhciBDSEFSX0FNUEVSU0FORCAgICAgICAgICAgID0gMHgyNjsgLyogJiAqL1xudmFyIENIQVJfU0lOR0xFX1FVT1RFICAgICAgICAgPSAweDI3OyAvKiAnICovXG52YXIgQ0hBUl9BU1RFUklTSyAgICAgICAgICAgICA9IDB4MkE7IC8qICogKi9cbnZhciBDSEFSX0NPTU1BICAgICAgICAgICAgICAgID0gMHgyQzsgLyogLCAqL1xudmFyIENIQVJfTUlOVVMgICAgICAgICAgICAgICAgPSAweDJEOyAvKiAtICovXG52YXIgQ0hBUl9DT0xPTiAgICAgICAgICAgICAgICA9IDB4M0E7IC8qIDogKi9cbnZhciBDSEFSX0VRVUFMUyAgICAgICAgICAgICAgID0gMHgzRDsgLyogPSAqL1xudmFyIENIQVJfR1JFQVRFUl9USEFOICAgICAgICAgPSAweDNFOyAvKiA+ICovXG52YXIgQ0hBUl9RVUVTVElPTiAgICAgICAgICAgICA9IDB4M0Y7IC8qID8gKi9cbnZhciBDSEFSX0NPTU1FUkNJQUxfQVQgICAgICAgID0gMHg0MDsgLyogQCAqL1xudmFyIENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVCAgPSAweDVCOyAvKiBbICovXG52YXIgQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVCA9IDB4NUQ7IC8qIF0gKi9cbnZhciBDSEFSX0dSQVZFX0FDQ0VOVCAgICAgICAgID0gMHg2MDsgLyogYCAqL1xudmFyIENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUICAgPSAweDdCOyAvKiB7ICovXG52YXIgQ0hBUl9WRVJUSUNBTF9MSU5FICAgICAgICA9IDB4N0M7IC8qIHwgKi9cbnZhciBDSEFSX1JJR0hUX0NVUkxZX0JSQUNLRVQgID0gMHg3RDsgLyogfSAqL1xuXG52YXIgRVNDQVBFX1NFUVVFTkNFUyA9IHt9O1xuXG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDBdICAgPSAnXFxcXDAnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDA3XSAgID0gJ1xcXFxhJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwOF0gICA9ICdcXFxcYic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDldICAgPSAnXFxcXHQnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBBXSAgID0gJ1xcXFxuJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwQl0gICA9ICdcXFxcdic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MENdICAgPSAnXFxcXGYnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBEXSAgID0gJ1xcXFxyJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgxQl0gICA9ICdcXFxcZSc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjJdICAgPSAnXFxcXFwiJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHg1Q10gICA9ICdcXFxcXFxcXCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4ODVdICAgPSAnXFxcXE4nO1xuRVNDQVBFX1NFUVVFTkNFU1sweEEwXSAgID0gJ1xcXFxfJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgyMDI4XSA9ICdcXFxcTCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjAyOV0gPSAnXFxcXFAnO1xuXG52YXIgREVQUkVDQVRFRF9CT09MRUFOU19TWU5UQVggPSBbXG4gICd5JywgJ1knLCAneWVzJywgJ1llcycsICdZRVMnLCAnb24nLCAnT24nLCAnT04nLFxuICAnbicsICdOJywgJ25vJywgJ05vJywgJ05PJywgJ29mZicsICdPZmYnLCAnT0ZGJ1xuXTtcblxuZnVuY3Rpb24gY29tcGlsZVN0eWxlTWFwKHNjaGVtYSwgbWFwKSB7XG4gIHZhciByZXN1bHQsIGtleXMsIGluZGV4LCBsZW5ndGgsIHRhZywgc3R5bGUsIHR5cGU7XG5cbiAgaWYgKG1hcCA9PT0gbnVsbCkgcmV0dXJuIHt9O1xuXG4gIHJlc3VsdCA9IHt9O1xuICBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdGFnID0ga2V5c1tpbmRleF07XG4gICAgc3R5bGUgPSBTdHJpbmcobWFwW3RhZ10pO1xuXG4gICAgaWYgKHRhZy5zbGljZSgwLCAyKSA9PT0gJyEhJykge1xuICAgICAgdGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWcuc2xpY2UoMik7XG4gICAgfVxuICAgIHR5cGUgPSBzY2hlbWEuY29tcGlsZWRUeXBlTWFwWydmYWxsYmFjayddW3RhZ107XG5cbiAgICBpZiAodHlwZSAmJiBfaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlLnN0eWxlQWxpYXNlcywgc3R5bGUpKSB7XG4gICAgICBzdHlsZSA9IHR5cGUuc3R5bGVBbGlhc2VzW3N0eWxlXTtcbiAgICB9XG5cbiAgICByZXN1bHRbdGFnXSA9IHN0eWxlO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZW5jb2RlSGV4KGNoYXJhY3Rlcikge1xuICB2YXIgc3RyaW5nLCBoYW5kbGUsIGxlbmd0aDtcblxuICBzdHJpbmcgPSBjaGFyYWN0ZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cbiAgaWYgKGNoYXJhY3RlciA8PSAweEZGKSB7XG4gICAgaGFuZGxlID0gJ3gnO1xuICAgIGxlbmd0aCA9IDI7XG4gIH0gZWxzZSBpZiAoY2hhcmFjdGVyIDw9IDB4RkZGRikge1xuICAgIGhhbmRsZSA9ICd1JztcbiAgICBsZW5ndGggPSA0O1xuICB9IGVsc2UgaWYgKGNoYXJhY3RlciA8PSAweEZGRkZGRkZGKSB7XG4gICAgaGFuZGxlID0gJ1UnO1xuICAgIGxlbmd0aCA9IDg7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJ2NvZGUgcG9pbnQgd2l0aGluIGEgc3RyaW5nIG1heSBub3QgYmUgZ3JlYXRlciB0aGFuIDB4RkZGRkZGRkYnKTtcbiAgfVxuXG4gIHJldHVybiAnXFxcXCcgKyBoYW5kbGUgKyBjb21tb24ucmVwZWF0KCcwJywgbGVuZ3RoIC0gc3RyaW5nLmxlbmd0aCkgKyBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIFN0YXRlKG9wdGlvbnMpIHtcbiAgdGhpcy5zY2hlbWEgICAgICAgID0gb3B0aW9uc1snc2NoZW1hJ10gfHwgREVGQVVMVF9GVUxMX1NDSEVNQTtcbiAgdGhpcy5pbmRlbnQgICAgICAgID0gTWF0aC5tYXgoMSwgKG9wdGlvbnNbJ2luZGVudCddIHx8IDIpKTtcbiAgdGhpcy5ub0FycmF5SW5kZW50ID0gb3B0aW9uc1snbm9BcnJheUluZGVudCddIHx8IGZhbHNlO1xuICB0aGlzLnNraXBJbnZhbGlkICAgPSBvcHRpb25zWydza2lwSW52YWxpZCddIHx8IGZhbHNlO1xuICB0aGlzLmZsb3dMZXZlbCAgICAgPSAoY29tbW9uLmlzTm90aGluZyhvcHRpb25zWydmbG93TGV2ZWwnXSkgPyAtMSA6IG9wdGlvbnNbJ2Zsb3dMZXZlbCddKTtcbiAgdGhpcy5zdHlsZU1hcCAgICAgID0gY29tcGlsZVN0eWxlTWFwKHRoaXMuc2NoZW1hLCBvcHRpb25zWydzdHlsZXMnXSB8fCBudWxsKTtcbiAgdGhpcy5zb3J0S2V5cyAgICAgID0gb3B0aW9uc1snc29ydEtleXMnXSB8fCBmYWxzZTtcbiAgdGhpcy5saW5lV2lkdGggICAgID0gb3B0aW9uc1snbGluZVdpZHRoJ10gfHwgODA7XG4gIHRoaXMubm9SZWZzICAgICAgICA9IG9wdGlvbnNbJ25vUmVmcyddIHx8IGZhbHNlO1xuICB0aGlzLm5vQ29tcGF0TW9kZSAgPSBvcHRpb25zWydub0NvbXBhdE1vZGUnXSB8fCBmYWxzZTtcbiAgdGhpcy5jb25kZW5zZUZsb3cgID0gb3B0aW9uc1snY29uZGVuc2VGbG93J10gfHwgZmFsc2U7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy5leHBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRFeHBsaWNpdDtcblxuICB0aGlzLnRhZyA9IG51bGw7XG4gIHRoaXMucmVzdWx0ID0gJyc7XG5cbiAgdGhpcy5kdXBsaWNhdGVzID0gW107XG4gIHRoaXMudXNlZER1cGxpY2F0ZXMgPSBudWxsO1xufVxuXG4vLyBJbmRlbnRzIGV2ZXJ5IGxpbmUgaW4gYSBzdHJpbmcuIEVtcHR5IGxpbmVzIChcXG4gb25seSkgYXJlIG5vdCBpbmRlbnRlZC5cbmZ1bmN0aW9uIGluZGVudFN0cmluZyhzdHJpbmcsIHNwYWNlcykge1xuICB2YXIgaW5kID0gY29tbW9uLnJlcGVhdCgnICcsIHNwYWNlcyksXG4gICAgICBwb3NpdGlvbiA9IDAsXG4gICAgICBuZXh0ID0gLTEsXG4gICAgICByZXN1bHQgPSAnJyxcbiAgICAgIGxpbmUsXG4gICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgIG5leHQgPSBzdHJpbmcuaW5kZXhPZignXFxuJywgcG9zaXRpb24pO1xuICAgIGlmIChuZXh0ID09PSAtMSkge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbik7XG4gICAgICBwb3NpdGlvbiA9IGxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbiwgbmV4dCArIDEpO1xuICAgICAgcG9zaXRpb24gPSBuZXh0ICsgMTtcbiAgICB9XG5cbiAgICBpZiAobGluZS5sZW5ndGggJiYgbGluZSAhPT0gJ1xcbicpIHJlc3VsdCArPSBpbmQ7XG5cbiAgICByZXN1bHQgKz0gbGluZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKSB7XG4gIHJldHVybiAnXFxuJyArIGNvbW1vbi5yZXBlYXQoJyAnLCBzdGF0ZS5pbmRlbnQgKiBsZXZlbCk7XG59XG5cbmZ1bmN0aW9uIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyKSB7XG4gIHZhciBpbmRleCwgbGVuZ3RoLCB0eXBlO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBzdGF0ZS5pbXBsaWNpdFR5cGVzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB0eXBlID0gc3RhdGUuaW1wbGljaXRUeXBlc1tpbmRleF07XG5cbiAgICBpZiAodHlwZS5yZXNvbHZlKHN0cikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gWzMzXSBzLXdoaXRlIDo6PSBzLXNwYWNlIHwgcy10YWJcbmZ1bmN0aW9uIGlzV2hpdGVzcGFjZShjKSB7XG4gIHJldHVybiBjID09PSBDSEFSX1NQQUNFIHx8IGMgPT09IENIQVJfVEFCO1xufVxuXG4vLyBSZXR1cm5zIHRydWUgaWYgdGhlIGNoYXJhY3RlciBjYW4gYmUgcHJpbnRlZCB3aXRob3V0IGVzY2FwaW5nLlxuLy8gRnJvbSBZQU1MIDEuMjogXCJhbnkgYWxsb3dlZCBjaGFyYWN0ZXJzIGtub3duIHRvIGJlIG5vbi1wcmludGFibGVcbi8vIHNob3VsZCBhbHNvIGJlIGVzY2FwZWQuIFtIb3dldmVyLF0gVGhpcyBpc25cdTIwMTl0IG1hbmRhdG9yeVwiXG4vLyBEZXJpdmVkIGZyb20gbmItY2hhciAtIFxcdCAtICN4ODUgLSAjeEEwIC0gI3gyMDI4IC0gI3gyMDI5LlxuZnVuY3Rpb24gaXNQcmludGFibGUoYykge1xuICByZXR1cm4gICgweDAwMDIwIDw9IGMgJiYgYyA8PSAweDAwMDA3RSlcbiAgICAgIHx8ICgoMHgwMDBBMSA8PSBjICYmIGMgPD0gMHgwMEQ3RkYpICYmIGMgIT09IDB4MjAyOCAmJiBjICE9PSAweDIwMjkpXG4gICAgICB8fCAoKDB4MEUwMDAgPD0gYyAmJiBjIDw9IDB4MDBGRkZEKSAmJiBjICE9PSAweEZFRkYgLyogQk9NICovKVxuICAgICAgfHwgICgweDEwMDAwIDw9IGMgJiYgYyA8PSAweDEwRkZGRik7XG59XG5cbi8vIFszNF0gbnMtY2hhciA6Oj0gbmItY2hhciAtIHMtd2hpdGVcbi8vIFsyN10gbmItY2hhciA6Oj0gYy1wcmludGFibGUgLSBiLWNoYXIgLSBjLWJ5dGUtb3JkZXItbWFya1xuLy8gWzI2XSBiLWNoYXIgIDo6PSBiLWxpbmUtZmVlZCB8IGItY2FycmlhZ2UtcmV0dXJuXG4vLyBbMjRdIGItbGluZS1mZWVkICAgICAgIDo6PSAgICAgI3hBICAgIC8qIExGICovXG4vLyBbMjVdIGItY2FycmlhZ2UtcmV0dXJuIDo6PSAgICAgI3hEICAgIC8qIENSICovXG4vLyBbM10gIGMtYnl0ZS1vcmRlci1tYXJrIDo6PSAgICAgI3hGRUZGXG5mdW5jdGlvbiBpc05zQ2hhcihjKSB7XG4gIHJldHVybiBpc1ByaW50YWJsZShjKSAmJiAhaXNXaGl0ZXNwYWNlKGMpXG4gICAgLy8gYnl0ZS1vcmRlci1tYXJrXG4gICAgJiYgYyAhPT0gMHhGRUZGXG4gICAgLy8gYi1jaGFyXG4gICAgJiYgYyAhPT0gQ0hBUl9DQVJSSUFHRV9SRVRVUk5cbiAgICAmJiBjICE9PSBDSEFSX0xJTkVfRkVFRDtcbn1cblxuLy8gU2ltcGxpZmllZCB0ZXN0IGZvciB2YWx1ZXMgYWxsb3dlZCBhZnRlciB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmUoYywgcHJldikge1xuICAvLyBVc2VzIGEgc3Vic2V0IG9mIG5iLWNoYXIgLSBjLWZsb3ctaW5kaWNhdG9yIC0gXCI6XCIgLSBcIiNcIlxuICAvLyB3aGVyZSBuYi1jaGFyIDo6PSBjLXByaW50YWJsZSAtIGItY2hhciAtIGMtYnl0ZS1vcmRlci1tYXJrLlxuICByZXR1cm4gaXNQcmludGFibGUoYykgJiYgYyAhPT0gMHhGRUZGXG4gICAgLy8gLSBjLWZsb3ctaW5kaWNhdG9yXG4gICAgJiYgYyAhPT0gQ0hBUl9DT01NQVxuICAgICYmIGMgIT09IENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX0xFRlRfQ1VSTFlfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfUklHSFRfQ1VSTFlfQlJBQ0tFVFxuICAgIC8vIC0gXCI6XCIgLSBcIiNcIlxuICAgIC8vIC8qIEFuIG5zLWNoYXIgcHJlY2VkaW5nICovIFwiI1wiXG4gICAgJiYgYyAhPT0gQ0hBUl9DT0xPTlxuICAgICYmICgoYyAhPT0gQ0hBUl9TSEFSUCkgfHwgKHByZXYgJiYgaXNOc0NoYXIocHJldikpKTtcbn1cblxuLy8gU2ltcGxpZmllZCB0ZXN0IGZvciB2YWx1ZXMgYWxsb3dlZCBhcyB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmVGaXJzdChjKSB7XG4gIC8vIFVzZXMgYSBzdWJzZXQgb2YgbnMtY2hhciAtIGMtaW5kaWNhdG9yXG4gIC8vIHdoZXJlIG5zLWNoYXIgPSBuYi1jaGFyIC0gcy13aGl0ZS5cbiAgcmV0dXJuIGlzUHJpbnRhYmxlKGMpICYmIGMgIT09IDB4RkVGRlxuICAgICYmICFpc1doaXRlc3BhY2UoYykgLy8gLSBzLXdoaXRlXG4gICAgLy8gLSAoYy1pbmRpY2F0b3IgOjo9XG4gICAgLy8gXHUyMDFDLVx1MjAxRCB8IFx1MjAxQz9cdTIwMUQgfCBcdTIwMUM6XHUyMDFEIHwgXHUyMDFDLFx1MjAxRCB8IFx1MjAxQ1tcdTIwMUQgfCBcdTIwMUNdXHUyMDFEIHwgXHUyMDFDe1x1MjAxRCB8IFx1MjAxQ31cdTIwMURcbiAgICAmJiBjICE9PSBDSEFSX01JTlVTXG4gICAgJiYgYyAhPT0gQ0hBUl9RVUVTVElPTlxuICAgICYmIGMgIT09IENIQVJfQ09MT05cbiAgICAmJiBjICE9PSBDSEFSX0NPTU1BXG4gICAgJiYgYyAhPT0gQ0hBUl9MRUZUX1NRVUFSRV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUXG4gICAgLy8gfCBcdTIwMUMjXHUyMDFEIHwgXHUyMDFDJlx1MjAxRCB8IFx1MjAxQypcdTIwMUQgfCBcdTIwMUMhXHUyMDFEIHwgXHUyMDFDfFx1MjAxRCB8IFx1MjAxQz1cdTIwMUQgfCBcdTIwMUM+XHUyMDFEIHwgXHUyMDFDJ1x1MjAxRCB8IFx1MjAxQ1wiXHUyMDFEXG4gICAgJiYgYyAhPT0gQ0hBUl9TSEFSUFxuICAgICYmIGMgIT09IENIQVJfQU1QRVJTQU5EXG4gICAgJiYgYyAhPT0gQ0hBUl9BU1RFUklTS1xuICAgICYmIGMgIT09IENIQVJfRVhDTEFNQVRJT05cbiAgICAmJiBjICE9PSBDSEFSX1ZFUlRJQ0FMX0xJTkVcbiAgICAmJiBjICE9PSBDSEFSX0VRVUFMU1xuICAgICYmIGMgIT09IENIQVJfR1JFQVRFUl9USEFOXG4gICAgJiYgYyAhPT0gQ0hBUl9TSU5HTEVfUVVPVEVcbiAgICAmJiBjICE9PSBDSEFSX0RPVUJMRV9RVU9URVxuICAgIC8vIHwgXHUyMDFDJVx1MjAxRCB8IFx1MjAxQ0BcdTIwMUQgfCBcdTIwMUNgXHUyMDFEKVxuICAgICYmIGMgIT09IENIQVJfUEVSQ0VOVFxuICAgICYmIGMgIT09IENIQVJfQ09NTUVSQ0lBTF9BVFxuICAgICYmIGMgIT09IENIQVJfR1JBVkVfQUNDRU5UO1xufVxuXG4vLyBEZXRlcm1pbmVzIHdoZXRoZXIgYmxvY2sgaW5kZW50YXRpb24gaW5kaWNhdG9yIGlzIHJlcXVpcmVkLlxuZnVuY3Rpb24gbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpIHtcbiAgdmFyIGxlYWRpbmdTcGFjZVJlID0gL15cXG4qIC87XG4gIHJldHVybiBsZWFkaW5nU3BhY2VSZS50ZXN0KHN0cmluZyk7XG59XG5cbnZhciBTVFlMRV9QTEFJTiAgID0gMSxcbiAgICBTVFlMRV9TSU5HTEUgID0gMixcbiAgICBTVFlMRV9MSVRFUkFMID0gMyxcbiAgICBTVFlMRV9GT0xERUQgID0gNCxcbiAgICBTVFlMRV9ET1VCTEUgID0gNTtcblxuLy8gRGV0ZXJtaW5lcyB3aGljaCBzY2FsYXIgc3R5bGVzIGFyZSBwb3NzaWJsZSBhbmQgcmV0dXJucyB0aGUgcHJlZmVycmVkIHN0eWxlLlxuLy8gbGluZVdpZHRoID0gLTEgPT4gbm8gbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogc3RyLmxlbmd0aCA+IDAuXG4vLyBQb3N0LWNvbmRpdGlvbnM6XG4vLyAgICBTVFlMRV9QTEFJTiBvciBTVFlMRV9TSU5HTEUgPT4gbm8gXFxuIGFyZSBpbiB0aGUgc3RyaW5nLlxuLy8gICAgU1RZTEVfTElURVJBTCA9PiBubyBsaW5lcyBhcmUgc3VpdGFibGUgZm9yIGZvbGRpbmcgKG9yIGxpbmVXaWR0aCBpcyAtMSkuXG4vLyAgICBTVFlMRV9GT0xERUQgPT4gYSBsaW5lID4gbGluZVdpZHRoIGFuZCBjYW4gYmUgZm9sZGVkIChhbmQgbGluZVdpZHRoICE9IC0xKS5cbmZ1bmN0aW9uIGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIGluZGVudFBlckxldmVsLCBsaW5lV2lkdGgsIHRlc3RBbWJpZ3VvdXNUeXBlKSB7XG4gIHZhciBpO1xuICB2YXIgY2hhciwgcHJldl9jaGFyO1xuICB2YXIgaGFzTGluZUJyZWFrID0gZmFsc2U7XG4gIHZhciBoYXNGb2xkYWJsZUxpbmUgPSBmYWxzZTsgLy8gb25seSBjaGVja2VkIGlmIHNob3VsZFRyYWNrV2lkdGhcbiAgdmFyIHNob3VsZFRyYWNrV2lkdGggPSBsaW5lV2lkdGggIT09IC0xO1xuICB2YXIgcHJldmlvdXNMaW5lQnJlYWsgPSAtMTsgLy8gY291bnQgdGhlIGZpcnN0IGxpbmUgY29ycmVjdGx5XG4gIHZhciBwbGFpbiA9IGlzUGxhaW5TYWZlRmlyc3Qoc3RyaW5nLmNoYXJDb2RlQXQoMCkpXG4gICAgICAgICAgJiYgIWlzV2hpdGVzcGFjZShzdHJpbmcuY2hhckNvZGVBdChzdHJpbmcubGVuZ3RoIC0gMSkpO1xuXG4gIGlmIChzaW5nbGVMaW5lT25seSkge1xuICAgIC8vIENhc2U6IG5vIGJsb2NrIHN0eWxlcy5cbiAgICAvLyBDaGVjayBmb3IgZGlzYWxsb3dlZCBjaGFyYWN0ZXJzIHRvIHJ1bGUgb3V0IHBsYWluIGFuZCBzaW5nbGUuXG4gICAgZm9yIChpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgY2hhciA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgICAgaWYgKCFpc1ByaW50YWJsZShjaGFyKSkge1xuICAgICAgICByZXR1cm4gU1RZTEVfRE9VQkxFO1xuICAgICAgfVxuICAgICAgcHJldl9jaGFyID0gaSA+IDAgPyBzdHJpbmcuY2hhckNvZGVBdChpIC0gMSkgOiBudWxsO1xuICAgICAgcGxhaW4gPSBwbGFpbiAmJiBpc1BsYWluU2FmZShjaGFyLCBwcmV2X2NoYXIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBDYXNlOiBibG9jayBzdHlsZXMgcGVybWl0dGVkLlxuICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXIgPSBzdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICAgIGlmIChjaGFyID09PSBDSEFSX0xJTkVfRkVFRCkge1xuICAgICAgICBoYXNMaW5lQnJlYWsgPSB0cnVlO1xuICAgICAgICAvLyBDaGVjayBpZiBhbnkgbGluZSBjYW4gYmUgZm9sZGVkLlxuICAgICAgICBpZiAoc2hvdWxkVHJhY2tXaWR0aCkge1xuICAgICAgICAgIGhhc0ZvbGRhYmxlTGluZSA9IGhhc0ZvbGRhYmxlTGluZSB8fFxuICAgICAgICAgICAgLy8gRm9sZGFibGUgbGluZSA9IHRvbyBsb25nLCBhbmQgbm90IG1vcmUtaW5kZW50ZWQuXG4gICAgICAgICAgICAoaSAtIHByZXZpb3VzTGluZUJyZWFrIC0gMSA+IGxpbmVXaWR0aCAmJlxuICAgICAgICAgICAgIHN0cmluZ1twcmV2aW91c0xpbmVCcmVhayArIDFdICE9PSAnICcpO1xuICAgICAgICAgIHByZXZpb3VzTGluZUJyZWFrID0gaTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNQcmludGFibGUoY2hhcikpIHtcbiAgICAgICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgICAgIH1cbiAgICAgIHByZXZfY2hhciA9IGkgPiAwID8gc3RyaW5nLmNoYXJDb2RlQXQoaSAtIDEpIDogbnVsbDtcbiAgICAgIHBsYWluID0gcGxhaW4gJiYgaXNQbGFpblNhZmUoY2hhciwgcHJldl9jaGFyKTtcbiAgICB9XG4gICAgLy8gaW4gY2FzZSB0aGUgZW5kIGlzIG1pc3NpbmcgYSBcXG5cbiAgICBoYXNGb2xkYWJsZUxpbmUgPSBoYXNGb2xkYWJsZUxpbmUgfHwgKHNob3VsZFRyYWNrV2lkdGggJiZcbiAgICAgIChpIC0gcHJldmlvdXNMaW5lQnJlYWsgLSAxID4gbGluZVdpZHRoICYmXG4gICAgICAgc3RyaW5nW3ByZXZpb3VzTGluZUJyZWFrICsgMV0gIT09ICcgJykpO1xuICB9XG4gIC8vIEFsdGhvdWdoIGV2ZXJ5IHN0eWxlIGNhbiByZXByZXNlbnQgXFxuIHdpdGhvdXQgZXNjYXBpbmcsIHByZWZlciBibG9jayBzdHlsZXNcbiAgLy8gZm9yIG11bHRpbGluZSwgc2luY2UgdGhleSdyZSBtb3JlIHJlYWRhYmxlIGFuZCB0aGV5IGRvbid0IGFkZCBlbXB0eSBsaW5lcy5cbiAgLy8gQWxzbyBwcmVmZXIgZm9sZGluZyBhIHN1cGVyLWxvbmcgbGluZS5cbiAgaWYgKCFoYXNMaW5lQnJlYWsgJiYgIWhhc0ZvbGRhYmxlTGluZSkge1xuICAgIC8vIFN0cmluZ3MgaW50ZXJwcmV0YWJsZSBhcyBhbm90aGVyIHR5cGUgaGF2ZSB0byBiZSBxdW90ZWQ7XG4gICAgLy8gZS5nLiB0aGUgc3RyaW5nICd0cnVlJyB2cy4gdGhlIGJvb2xlYW4gdHJ1ZS5cbiAgICByZXR1cm4gcGxhaW4gJiYgIXRlc3RBbWJpZ3VvdXNUeXBlKHN0cmluZylcbiAgICAgID8gU1RZTEVfUExBSU4gOiBTVFlMRV9TSU5HTEU7XG4gIH1cbiAgLy8gRWRnZSBjYXNlOiBibG9jayBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgY2FuIG9ubHkgaGF2ZSBvbmUgZGlnaXQuXG4gIGlmIChpbmRlbnRQZXJMZXZlbCA+IDkgJiYgbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgfVxuICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgYmxvY2sgc3R5bGVzIGFyZSB2YWxpZC5cbiAgLy8gUHJlZmVyIGxpdGVyYWwgc3R5bGUgdW5sZXNzIHdlIHdhbnQgdG8gZm9sZC5cbiAgcmV0dXJuIGhhc0ZvbGRhYmxlTGluZSA/IFNUWUxFX0ZPTERFRCA6IFNUWUxFX0xJVEVSQUw7XG59XG5cbi8vIE5vdGU6IGxpbmUgYnJlYWtpbmcvZm9sZGluZyBpcyBpbXBsZW1lbnRlZCBmb3Igb25seSB0aGUgZm9sZGVkIHN0eWxlLlxuLy8gTkIuIFdlIGRyb3AgdGhlIGxhc3QgdHJhaWxpbmcgbmV3bGluZSAoaWYgYW55KSBvZiBhIHJldHVybmVkIGJsb2NrIHNjYWxhclxuLy8gIHNpbmNlIHRoZSBkdW1wZXIgYWRkcyBpdHMgb3duIG5ld2xpbmUuIFRoaXMgYWx3YXlzIHdvcmtzOlxuLy8gICAgXHUyMDIyIE5vIGVuZGluZyBuZXdsaW5lID0+IHVuYWZmZWN0ZWQ7IGFscmVhZHkgdXNpbmcgc3RyaXAgXCItXCIgY2hvbXBpbmcuXG4vLyAgICBcdTIwMjIgRW5kaW5nIG5ld2xpbmUgICAgPT4gcmVtb3ZlZCB0aGVuIHJlc3RvcmVkLlxuLy8gIEltcG9ydGFudGx5LCB0aGlzIGtlZXBzIHRoZSBcIitcIiBjaG9tcCBpbmRpY2F0b3IgZnJvbSBnYWluaW5nIGFuIGV4dHJhIGxpbmUuXG5mdW5jdGlvbiB3cml0ZVNjYWxhcihzdGF0ZSwgc3RyaW5nLCBsZXZlbCwgaXNrZXkpIHtcbiAgc3RhdGUuZHVtcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBcIicnXCI7XG4gICAgfVxuICAgIGlmICghc3RhdGUubm9Db21wYXRNb2RlICYmXG4gICAgICAgIERFUFJFQ0FURURfQk9PTEVBTlNfU1lOVEFYLmluZGV4T2Yoc3RyaW5nKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiBcIidcIiArIHN0cmluZyArIFwiJ1wiO1xuICAgIH1cblxuICAgIHZhciBpbmRlbnQgPSBzdGF0ZS5pbmRlbnQgKiBNYXRoLm1heCgxLCBsZXZlbCk7IC8vIG5vIDAtaW5kZW50IHNjYWxhcnNcbiAgICAvLyBBcyBpbmRlbnRhdGlvbiBnZXRzIGRlZXBlciwgbGV0IHRoZSB3aWR0aCBkZWNyZWFzZSBtb25vdG9uaWNhbGx5XG4gICAgLy8gdG8gdGhlIGxvd2VyIGJvdW5kIG1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKS5cbiAgICAvLyBOb3RlIHRoYXQgdGhpcyBpbXBsaWVzXG4gICAgLy8gIHN0YXRlLmxpbmVXaWR0aCBcdTIyNjQgNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGlzIGZpeGVkIGF0IHRoZSBsb3dlciBib3VuZC5cbiAgICAvLyAgc3RhdGUubGluZVdpZHRoID4gNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGRlY3JlYXNlcyB1bnRpbCB0aGUgbG93ZXIgYm91bmQuXG4gICAgLy8gVGhpcyBiZWhhdmVzIGJldHRlciB0aGFuIGEgY29uc3RhbnQgbWluaW11bSB3aWR0aCB3aGljaCBkaXNhbGxvd3MgbmFycm93ZXIgb3B0aW9ucyxcbiAgICAvLyBvciBhbiBpbmRlbnQgdGhyZXNob2xkIHdoaWNoIGNhdXNlcyB0aGUgd2lkdGggdG8gc3VkZGVubHkgaW5jcmVhc2UuXG4gICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aCA9PT0gLTFcbiAgICAgID8gLTEgOiBNYXRoLm1heChNYXRoLm1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKSwgc3RhdGUubGluZVdpZHRoIC0gaW5kZW50KTtcblxuICAgIC8vIFdpdGhvdXQga25vd2luZyBpZiBrZXlzIGFyZSBpbXBsaWNpdC9leHBsaWNpdCwgYXNzdW1lIGltcGxpY2l0IGZvciBzYWZldHkuXG4gICAgdmFyIHNpbmdsZUxpbmVPbmx5ID0gaXNrZXlcbiAgICAgIC8vIE5vIGJsb2NrIHN0eWxlcyBpbiBmbG93IG1vZGUuXG4gICAgICB8fCAoc3RhdGUuZmxvd0xldmVsID4gLTEgJiYgbGV2ZWwgPj0gc3RhdGUuZmxvd0xldmVsKTtcbiAgICBmdW5jdGlvbiB0ZXN0QW1iaWd1aXR5KHN0cmluZykge1xuICAgICAgcmV0dXJuIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyaW5nKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIHN0YXRlLmluZGVudCwgbGluZVdpZHRoLCB0ZXN0QW1iaWd1aXR5KSkge1xuICAgICAgY2FzZSBTVFlMRV9QTEFJTjpcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIGNhc2UgU1RZTEVfU0lOR0xFOlxuICAgICAgICByZXR1cm4gXCInXCIgKyBzdHJpbmcucmVwbGFjZSgvJy9nLCBcIicnXCIpICsgXCInXCI7XG4gICAgICBjYXNlIFNUWUxFX0xJVEVSQUw6XG4gICAgICAgIHJldHVybiAnfCcgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhzdHJpbmcsIGluZGVudCkpO1xuICAgICAgY2FzZSBTVFlMRV9GT0xERUQ6XG4gICAgICAgIHJldHVybiAnPicgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhmb2xkU3RyaW5nKHN0cmluZywgbGluZVdpZHRoKSwgaW5kZW50KSk7XG4gICAgICBjYXNlIFNUWUxFX0RPVUJMRTpcbiAgICAgICAgcmV0dXJuICdcIicgKyBlc2NhcGVTdHJpbmcoc3RyaW5nLCBsaW5lV2lkdGgpICsgJ1wiJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdpbXBvc3NpYmxlIGVycm9yOiBpbnZhbGlkIHNjYWxhciBzdHlsZScpO1xuICAgIH1cbiAgfSgpKTtcbn1cblxuLy8gUHJlLWNvbmRpdGlvbnM6IHN0cmluZyBpcyB2YWxpZCBmb3IgYSBibG9jayBzY2FsYXIsIDEgPD0gaW5kZW50UGVyTGV2ZWwgPD0gOS5cbmZ1bmN0aW9uIGJsb2NrSGVhZGVyKHN0cmluZywgaW5kZW50UGVyTGV2ZWwpIHtcbiAgdmFyIGluZGVudEluZGljYXRvciA9IG5lZWRJbmRlbnRJbmRpY2F0b3Ioc3RyaW5nKSA/IFN0cmluZyhpbmRlbnRQZXJMZXZlbCkgOiAnJztcblxuICAvLyBub3RlIHRoZSBzcGVjaWFsIGNhc2U6IHRoZSBzdHJpbmcgJ1xcbicgY291bnRzIGFzIGEgXCJ0cmFpbGluZ1wiIGVtcHR5IGxpbmUuXG4gIHZhciBjbGlwID0gICAgICAgICAgc3RyaW5nW3N0cmluZy5sZW5ndGggLSAxXSA9PT0gJ1xcbic7XG4gIHZhciBrZWVwID0gY2xpcCAmJiAoc3RyaW5nW3N0cmluZy5sZW5ndGggLSAyXSA9PT0gJ1xcbicgfHwgc3RyaW5nID09PSAnXFxuJyk7XG4gIHZhciBjaG9tcCA9IGtlZXAgPyAnKycgOiAoY2xpcCA/ICcnIDogJy0nKTtcblxuICByZXR1cm4gaW5kZW50SW5kaWNhdG9yICsgY2hvbXAgKyAnXFxuJztcbn1cblxuLy8gKFNlZSB0aGUgbm90ZSBmb3Igd3JpdGVTY2FsYXIuKVxuZnVuY3Rpb24gZHJvcEVuZGluZ05ld2xpbmUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmdbc3RyaW5nLmxlbmd0aCAtIDFdID09PSAnXFxuJyA/IHN0cmluZy5zbGljZSgwLCAtMSkgOiBzdHJpbmc7XG59XG5cbi8vIE5vdGU6IGEgbG9uZyBsaW5lIHdpdGhvdXQgYSBzdWl0YWJsZSBicmVhayBwb2ludCB3aWxsIGV4Y2VlZCB0aGUgd2lkdGggbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogZXZlcnkgY2hhciBpbiBzdHIgaXNQcmludGFibGUsIHN0ci5sZW5ndGggPiAwLCB3aWR0aCA+IDAuXG5mdW5jdGlvbiBmb2xkU3RyaW5nKHN0cmluZywgd2lkdGgpIHtcbiAgLy8gSW4gZm9sZGVkIHN0eWxlLCAkayQgY29uc2VjdXRpdmUgbmV3bGluZXMgb3V0cHV0IGFzICRrKzEkIG5ld2xpbmVzXHUyMDE0XG4gIC8vIHVubGVzcyB0aGV5J3JlIGJlZm9yZSBvciBhZnRlciBhIG1vcmUtaW5kZW50ZWQgbGluZSwgb3IgYXQgdGhlIHZlcnlcbiAgLy8gYmVnaW5uaW5nIG9yIGVuZCwgaW4gd2hpY2ggY2FzZSAkayQgbWFwcyB0byAkayQuXG4gIC8vIFRoZXJlZm9yZSwgcGFyc2UgZWFjaCBjaHVuayBhcyBuZXdsaW5lKHMpIGZvbGxvd2VkIGJ5IGEgY29udGVudCBsaW5lLlxuICB2YXIgbGluZVJlID0gLyhcXG4rKShbXlxcbl0qKS9nO1xuXG4gIC8vIGZpcnN0IGxpbmUgKHBvc3NpYmx5IGFuIGVtcHR5IGxpbmUpXG4gIHZhciByZXN1bHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXh0TEYgPSBzdHJpbmcuaW5kZXhPZignXFxuJyk7XG4gICAgbmV4dExGID0gbmV4dExGICE9PSAtMSA/IG5leHRMRiA6IHN0cmluZy5sZW5ndGg7XG4gICAgbGluZVJlLmxhc3RJbmRleCA9IG5leHRMRjtcbiAgICByZXR1cm4gZm9sZExpbmUoc3RyaW5nLnNsaWNlKDAsIG5leHRMRiksIHdpZHRoKTtcbiAgfSgpKTtcbiAgLy8gSWYgd2UgaGF2ZW4ndCByZWFjaGVkIHRoZSBmaXJzdCBjb250ZW50IGxpbmUgeWV0LCBkb24ndCBhZGQgYW4gZXh0cmEgXFxuLlxuICB2YXIgcHJldk1vcmVJbmRlbnRlZCA9IHN0cmluZ1swXSA9PT0gJ1xcbicgfHwgc3RyaW5nWzBdID09PSAnICc7XG4gIHZhciBtb3JlSW5kZW50ZWQ7XG5cbiAgLy8gcmVzdCBvZiB0aGUgbGluZXNcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gbGluZVJlLmV4ZWMoc3RyaW5nKSkpIHtcbiAgICB2YXIgcHJlZml4ID0gbWF0Y2hbMV0sIGxpbmUgPSBtYXRjaFsyXTtcbiAgICBtb3JlSW5kZW50ZWQgPSAobGluZVswXSA9PT0gJyAnKTtcbiAgICByZXN1bHQgKz0gcHJlZml4XG4gICAgICArICghcHJldk1vcmVJbmRlbnRlZCAmJiAhbW9yZUluZGVudGVkICYmIGxpbmUgIT09ICcnXG4gICAgICAgID8gJ1xcbicgOiAnJylcbiAgICAgICsgZm9sZExpbmUobGluZSwgd2lkdGgpO1xuICAgIHByZXZNb3JlSW5kZW50ZWQgPSBtb3JlSW5kZW50ZWQ7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBHcmVlZHkgbGluZSBicmVha2luZy5cbi8vIFBpY2tzIHRoZSBsb25nZXN0IGxpbmUgdW5kZXIgdGhlIGxpbWl0IGVhY2ggdGltZSxcbi8vIG90aGVyd2lzZSBzZXR0bGVzIGZvciB0aGUgc2hvcnRlc3QgbGluZSBvdmVyIHRoZSBsaW1pdC5cbi8vIE5CLiBNb3JlLWluZGVudGVkIGxpbmVzICpjYW5ub3QqIGJlIGZvbGRlZCwgYXMgdGhhdCB3b3VsZCBhZGQgYW4gZXh0cmEgXFxuLlxuZnVuY3Rpb24gZm9sZExpbmUobGluZSwgd2lkdGgpIHtcbiAgaWYgKGxpbmUgPT09ICcnIHx8IGxpbmVbMF0gPT09ICcgJykgcmV0dXJuIGxpbmU7XG5cbiAgLy8gU2luY2UgYSBtb3JlLWluZGVudGVkIGxpbmUgYWRkcyBhIFxcbiwgYnJlYWtzIGNhbid0IGJlIGZvbGxvd2VkIGJ5IGEgc3BhY2UuXG4gIHZhciBicmVha1JlID0gLyBbXiBdL2c7IC8vIG5vdGU6IHRoZSBtYXRjaCBpbmRleCB3aWxsIGFsd2F5cyBiZSA8PSBsZW5ndGgtMi5cbiAgdmFyIG1hdGNoO1xuICAvLyBzdGFydCBpcyBhbiBpbmNsdXNpdmUgaW5kZXguIGVuZCwgY3VyciwgYW5kIG5leHQgYXJlIGV4Y2x1c2l2ZS5cbiAgdmFyIHN0YXJ0ID0gMCwgZW5kLCBjdXJyID0gMCwgbmV4dCA9IDA7XG4gIHZhciByZXN1bHQgPSAnJztcblxuICAvLyBJbnZhcmlhbnRzOiAwIDw9IHN0YXJ0IDw9IGxlbmd0aC0xLlxuICAvLyAgIDAgPD0gY3VyciA8PSBuZXh0IDw9IG1heCgwLCBsZW5ndGgtMikuIGN1cnIgLSBzdGFydCA8PSB3aWR0aC5cbiAgLy8gSW5zaWRlIHRoZSBsb29wOlxuICAvLyAgIEEgbWF0Y2ggaW1wbGllcyBsZW5ndGggPj0gMiwgc28gY3VyciBhbmQgbmV4dCBhcmUgPD0gbGVuZ3RoLTIuXG4gIHdoaWxlICgobWF0Y2ggPSBicmVha1JlLmV4ZWMobGluZSkpKSB7XG4gICAgbmV4dCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIG1haW50YWluIGludmFyaWFudDogY3VyciAtIHN0YXJ0IDw9IHdpZHRoXG4gICAgaWYgKG5leHQgLSBzdGFydCA+IHdpZHRoKSB7XG4gICAgICBlbmQgPSAoY3VyciA+IHN0YXJ0KSA/IGN1cnIgOiBuZXh0OyAvLyBkZXJpdmUgZW5kIDw9IGxlbmd0aC0yXG4gICAgICByZXN1bHQgKz0gJ1xcbicgKyBsaW5lLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgLy8gc2tpcCB0aGUgc3BhY2UgdGhhdCB3YXMgb3V0cHV0IGFzIFxcblxuICAgICAgc3RhcnQgPSBlbmQgKyAxOyAgICAgICAgICAgICAgICAgICAgLy8gZGVyaXZlIHN0YXJ0IDw9IGxlbmd0aC0xXG4gICAgfVxuICAgIGN1cnIgPSBuZXh0O1xuICB9XG5cbiAgLy8gQnkgdGhlIGludmFyaWFudHMsIHN0YXJ0IDw9IGxlbmd0aC0xLCBzbyB0aGVyZSBpcyBzb21ldGhpbmcgbGVmdCBvdmVyLlxuICAvLyBJdCBpcyBlaXRoZXIgdGhlIHdob2xlIHN0cmluZyBvciBhIHBhcnQgc3RhcnRpbmcgZnJvbSBub24td2hpdGVzcGFjZS5cbiAgcmVzdWx0ICs9ICdcXG4nO1xuICAvLyBJbnNlcnQgYSBicmVhayBpZiB0aGUgcmVtYWluZGVyIGlzIHRvbyBsb25nIGFuZCB0aGVyZSBpcyBhIGJyZWFrIGF2YWlsYWJsZS5cbiAgaWYgKGxpbmUubGVuZ3RoIC0gc3RhcnQgPiB3aWR0aCAmJiBjdXJyID4gc3RhcnQpIHtcbiAgICByZXN1bHQgKz0gbGluZS5zbGljZShzdGFydCwgY3VycikgKyAnXFxuJyArIGxpbmUuc2xpY2UoY3VyciArIDEpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKHN0YXJ0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuc2xpY2UoMSk7IC8vIGRyb3AgZXh0cmEgXFxuIGpvaW5lclxufVxuXG4vLyBFc2NhcGVzIGEgZG91YmxlLXF1b3RlZCBzdHJpbmcuXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcoc3RyaW5nKSB7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGNoYXIsIG5leHRDaGFyO1xuICB2YXIgZXNjYXBlU2VxO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgY2hhciA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIC8vIENoZWNrIGZvciBzdXJyb2dhdGUgcGFpcnMgKHJlZmVyZW5jZSBVbmljb2RlIDMuMCBzZWN0aW9uIFwiMy43IFN1cnJvZ2F0ZXNcIikuXG4gICAgaWYgKGNoYXIgPj0gMHhEODAwICYmIGNoYXIgPD0gMHhEQkZGLyogaGlnaCBzdXJyb2dhdGUgKi8pIHtcbiAgICAgIG5leHRDaGFyID0gc3RyaW5nLmNoYXJDb2RlQXQoaSArIDEpO1xuICAgICAgaWYgKG5leHRDaGFyID49IDB4REMwMCAmJiBuZXh0Q2hhciA8PSAweERGRkYvKiBsb3cgc3Vycm9nYXRlICovKSB7XG4gICAgICAgIC8vIENvbWJpbmUgdGhlIHN1cnJvZ2F0ZSBwYWlyIGFuZCBzdG9yZSBpdCBlc2NhcGVkLlxuICAgICAgICByZXN1bHQgKz0gZW5jb2RlSGV4KChjaGFyIC0gMHhEODAwKSAqIDB4NDAwICsgbmV4dENoYXIgLSAweERDMDAgKyAweDEwMDAwKTtcbiAgICAgICAgLy8gQWR2YW5jZSBpbmRleCBvbmUgZXh0cmEgc2luY2Ugd2UgYWxyZWFkeSB1c2VkIHRoYXQgY2hhciBoZXJlLlxuICAgICAgICBpKys7IGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBlc2NhcGVTZXEgPSBFU0NBUEVfU0VRVUVOQ0VTW2NoYXJdO1xuICAgIHJlc3VsdCArPSAhZXNjYXBlU2VxICYmIGlzUHJpbnRhYmxlKGNoYXIpXG4gICAgICA/IHN0cmluZ1tpXVxuICAgICAgOiBlc2NhcGVTZXEgfHwgZW5jb2RlSGV4KGNoYXIpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG93U2VxdWVuY2Uoc3RhdGUsIGxldmVsLCBvYmplY3QpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJyxcbiAgICAgIF90YWcgICAgPSBzdGF0ZS50YWcsXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aDtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAvLyBXcml0ZSBvbmx5IHZhbGlkIGVsZW1lbnRzLlxuICAgIGlmICh3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RbaW5kZXhdLCBmYWxzZSwgZmFsc2UpKSB7XG4gICAgICBpZiAoaW5kZXggIT09IDApIF9yZXN1bHQgKz0gJywnICsgKCFzdGF0ZS5jb25kZW5zZUZsb3cgPyAnICcgOiAnJyk7XG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9ICdbJyArIF9yZXN1bHQgKyAnXSc7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgY29tcGFjdCkge1xuICB2YXIgX3Jlc3VsdCA9ICcnLFxuICAgICAgX3RhZyAgICA9IHN0YXRlLnRhZyxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIC8vIFdyaXRlIG9ubHkgdmFsaWQgZWxlbWVudHMuXG4gICAgaWYgKHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RbaW5kZXhdLCB0cnVlLCB0cnVlKSkge1xuICAgICAgaWYgKCFjb21wYWN0IHx8IGluZGV4ICE9PSAwKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gJy0nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3Jlc3VsdCArPSAnLSAnO1xuICAgICAgfVxuXG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ1tdJzsgLy8gRW1wdHkgc2VxdWVuY2UgaWYgbm8gdmFsaWQgdmFsdWVzLlxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb3dNYXBwaW5nKHN0YXRlLCBsZXZlbCwgb2JqZWN0KSB7XG4gIHZhciBfcmVzdWx0ICAgICAgID0gJycsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCksXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIG9iamVjdEtleSxcbiAgICAgIG9iamVjdFZhbHVlLFxuICAgICAgcGFpckJ1ZmZlcjtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG5cbiAgICBwYWlyQnVmZmVyID0gJyc7XG4gICAgaWYgKGluZGV4ICE9PSAwKSBwYWlyQnVmZmVyICs9ICcsICc7XG5cbiAgICBpZiAoc3RhdGUuY29uZGVuc2VGbG93KSBwYWlyQnVmZmVyICs9ICdcIic7XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RLZXksIGZhbHNlLCBmYWxzZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQga2V5O1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpIHBhaXJCdWZmZXIgKz0gJz8gJztcblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcCArIChzdGF0ZS5jb25kZW5zZUZsb3cgPyAnXCInIDogJycpICsgJzonICsgKHN0YXRlLmNvbmRlbnNlRmxvdyA/ICcnIDogJyAnKTtcblxuICAgIGlmICghd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgb2JqZWN0VmFsdWUsIGZhbHNlLCBmYWxzZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQgdmFsdWUuXG4gICAgfVxuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wO1xuXG4gICAgLy8gQm90aCBrZXkgYW5kIHZhbHVlIGFyZSB2YWxpZC5cbiAgICBfcmVzdWx0ICs9IHBhaXJCdWZmZXI7XG4gIH1cblxuICBzdGF0ZS50YWcgPSBfdGFnO1xuICBzdGF0ZS5kdW1wID0gJ3snICsgX3Jlc3VsdCArICd9Jztcbn1cblxuZnVuY3Rpb24gd3JpdGVCbG9ja01hcHBpbmcoc3RhdGUsIGxldmVsLCBvYmplY3QsIGNvbXBhY3QpIHtcbiAgdmFyIF9yZXN1bHQgICAgICAgPSAnJyxcbiAgICAgIF90YWcgICAgICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBvYmplY3RLZXlMaXN0ID0gT2JqZWN0LmtleXMob2JqZWN0KSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgb2JqZWN0S2V5LFxuICAgICAgb2JqZWN0VmFsdWUsXG4gICAgICBleHBsaWNpdFBhaXIsXG4gICAgICBwYWlyQnVmZmVyO1xuXG4gIC8vIEFsbG93IHNvcnRpbmcga2V5cyBzbyB0aGF0IHRoZSBvdXRwdXQgZmlsZSBpcyBkZXRlcm1pbmlzdGljXG4gIGlmIChzdGF0ZS5zb3J0S2V5cyA9PT0gdHJ1ZSkge1xuICAgIC8vIERlZmF1bHQgc29ydGluZ1xuICAgIG9iamVjdEtleUxpc3Quc29ydCgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzdGF0ZS5zb3J0S2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIEN1c3RvbSBzb3J0IGZ1bmN0aW9uXG4gICAgb2JqZWN0S2V5TGlzdC5zb3J0KHN0YXRlLnNvcnRLZXlzKTtcbiAgfSBlbHNlIGlmIChzdGF0ZS5zb3J0S2V5cykge1xuICAgIC8vIFNvbWV0aGluZyBpcyB3cm9uZ1xuICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdzb3J0S2V5cyBtdXN0IGJlIGEgYm9vbGVhbiBvciBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpckJ1ZmZlciA9ICcnO1xuXG4gICAgaWYgKCFjb21wYWN0IHx8IGluZGV4ICE9PSAwKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgb2JqZWN0S2V5LCB0cnVlLCB0cnVlLCB0cnVlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCBrZXkuXG4gICAgfVxuXG4gICAgZXhwbGljaXRQYWlyID0gKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICc/JykgfHxcbiAgICAgICAgICAgICAgICAgICAoc3RhdGUuZHVtcCAmJiBzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpO1xuXG4gICAgaWYgKGV4cGxpY2l0UGFpcikge1xuICAgICAgaWYgKHN0YXRlLmR1bXAgJiYgQ0hBUl9MSU5FX0ZFRUQgPT09IHN0YXRlLmR1bXAuY2hhckNvZGVBdCgwKSkge1xuICAgICAgICBwYWlyQnVmZmVyICs9ICc/JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhaXJCdWZmZXIgKz0gJz8gJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICBpZiAoZXhwbGljaXRQYWlyKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RWYWx1ZSwgdHJ1ZSwgZXhwbGljaXRQYWlyKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCB2YWx1ZS5cbiAgICB9XG5cbiAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICBwYWlyQnVmZmVyICs9ICc6JztcbiAgICB9IGVsc2Uge1xuICAgICAgcGFpckJ1ZmZlciArPSAnOiAnO1xuICAgIH1cblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcDtcblxuICAgIC8vIEJvdGgga2V5IGFuZCB2YWx1ZSBhcmUgdmFsaWQuXG4gICAgX3Jlc3VsdCArPSBwYWlyQnVmZmVyO1xuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ3t9JzsgLy8gRW1wdHkgbWFwcGluZyBpZiBubyB2YWxpZCBwYWlycy5cbn1cblxuZnVuY3Rpb24gZGV0ZWN0VHlwZShzdGF0ZSwgb2JqZWN0LCBleHBsaWNpdCkge1xuICB2YXIgX3Jlc3VsdCwgdHlwZUxpc3QsIGluZGV4LCBsZW5ndGgsIHR5cGUsIHN0eWxlO1xuXG4gIHR5cGVMaXN0ID0gZXhwbGljaXQgPyBzdGF0ZS5leHBsaWNpdFR5cGVzIDogc3RhdGUuaW1wbGljaXRUeXBlcztcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdHlwZUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHR5cGUgPSB0eXBlTGlzdFtpbmRleF07XG5cbiAgICBpZiAoKHR5cGUuaW5zdGFuY2VPZiAgfHwgdHlwZS5wcmVkaWNhdGUpICYmXG4gICAgICAgICghdHlwZS5pbnN0YW5jZU9mIHx8ICgodHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpICYmIChvYmplY3QgaW5zdGFuY2VvZiB0eXBlLmluc3RhbmNlT2YpKSkgJiZcbiAgICAgICAgKCF0eXBlLnByZWRpY2F0ZSAgfHwgdHlwZS5wcmVkaWNhdGUob2JqZWN0KSkpIHtcblxuICAgICAgc3RhdGUudGFnID0gZXhwbGljaXQgPyB0eXBlLnRhZyA6ICc/JztcblxuICAgICAgaWYgKHR5cGUucmVwcmVzZW50KSB7XG4gICAgICAgIHN0eWxlID0gc3RhdGUuc3R5bGVNYXBbdHlwZS50YWddIHx8IHR5cGUuZGVmYXVsdFN0eWxlO1xuXG4gICAgICAgIGlmIChfdG9TdHJpbmcuY2FsbCh0eXBlLnJlcHJlc2VudCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcbiAgICAgICAgICBfcmVzdWx0ID0gdHlwZS5yZXByZXNlbnQob2JqZWN0LCBzdHlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2hhc093blByb3BlcnR5LmNhbGwodHlwZS5yZXByZXNlbnQsIHN0eWxlKSkge1xuICAgICAgICAgIF9yZXN1bHQgPSB0eXBlLnJlcHJlc2VudFtzdHlsZV0ob2JqZWN0LCBzdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJyE8JyArIHR5cGUudGFnICsgJz4gdGFnIHJlc29sdmVyIGFjY2VwdHMgbm90IFwiJyArIHN0eWxlICsgJ1wiIHN0eWxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5kdW1wID0gX3Jlc3VsdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTZXJpYWxpemVzIGBvYmplY3RgIGFuZCB3cml0ZXMgaXQgdG8gZ2xvYmFsIGByZXN1bHRgLlxuLy8gUmV0dXJucyB0cnVlIG9uIHN1Y2Nlc3MsIG9yIGZhbHNlIG9uIGludmFsaWQgb2JqZWN0LlxuLy9cbmZ1bmN0aW9uIHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgYmxvY2ssIGNvbXBhY3QsIGlza2V5KSB7XG4gIHN0YXRlLnRhZyA9IG51bGw7XG4gIHN0YXRlLmR1bXAgPSBvYmplY3Q7XG5cbiAgaWYgKCFkZXRlY3RUeXBlKHN0YXRlLCBvYmplY3QsIGZhbHNlKSkge1xuICAgIGRldGVjdFR5cGUoc3RhdGUsIG9iamVjdCwgdHJ1ZSk7XG4gIH1cblxuICB2YXIgdHlwZSA9IF90b1N0cmluZy5jYWxsKHN0YXRlLmR1bXApO1xuXG4gIGlmIChibG9jaykge1xuICAgIGJsb2NrID0gKHN0YXRlLmZsb3dMZXZlbCA8IDAgfHwgc3RhdGUuZmxvd0xldmVsID4gbGV2ZWwpO1xuICB9XG5cbiAgdmFyIG9iamVjdE9yQXJyYXkgPSB0eXBlID09PSAnW29iamVjdCBPYmplY3RdJyB8fCB0eXBlID09PSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgZHVwbGljYXRlSW5kZXgsXG4gICAgICBkdXBsaWNhdGU7XG5cbiAgaWYgKG9iamVjdE9yQXJyYXkpIHtcbiAgICBkdXBsaWNhdGVJbmRleCA9IHN0YXRlLmR1cGxpY2F0ZXMuaW5kZXhPZihvYmplY3QpO1xuICAgIGR1cGxpY2F0ZSA9IGR1cGxpY2F0ZUluZGV4ICE9PSAtMTtcbiAgfVxuXG4gIGlmICgoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB8fCBkdXBsaWNhdGUgfHwgKHN0YXRlLmluZGVudCAhPT0gMiAmJiBsZXZlbCA+IDApKSB7XG4gICAgY29tcGFjdCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGR1cGxpY2F0ZSAmJiBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0pIHtcbiAgICBzdGF0ZS5kdW1wID0gJypyZWZfJyArIGR1cGxpY2F0ZUluZGV4O1xuICB9IGVsc2Uge1xuICAgIGlmIChvYmplY3RPckFycmF5ICYmIGR1cGxpY2F0ZSAmJiAhc3RhdGUudXNlZER1cGxpY2F0ZXNbZHVwbGljYXRlSW5kZXhdKSB7XG4gICAgICBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0gPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIGlmIChibG9jayAmJiAoT2JqZWN0LmtleXMoc3RhdGUuZHVtcCkubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICB3cml0ZUJsb2NrTWFwcGluZyhzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXAsIGNvbXBhY3QpO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlRmxvd01hcHBpbmcoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wKTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyAnICcgKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICB2YXIgYXJyYXlMZXZlbCA9IChzdGF0ZS5ub0FycmF5SW5kZW50ICYmIChsZXZlbCA+IDApKSA/IGxldmVsIC0gMSA6IGxldmVsO1xuICAgICAgaWYgKGJsb2NrICYmIChzdGF0ZS5kdW1wLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgd3JpdGVCbG9ja1NlcXVlbmNlKHN0YXRlLCBhcnJheUxldmVsLCBzdGF0ZS5kdW1wLCBjb21wYWN0KTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0ZUZsb3dTZXF1ZW5jZShzdGF0ZSwgYXJyYXlMZXZlbCwgc3RhdGUuZHVtcCk7XG4gICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5kdW1wID0gJyZyZWZfJyArIGR1cGxpY2F0ZUluZGV4ICsgJyAnICsgc3RhdGUuZHVtcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgU3RyaW5nXScpIHtcbiAgICAgIGlmIChzdGF0ZS50YWcgIT09ICc/Jykge1xuICAgICAgICB3cml0ZVNjYWxhcihzdGF0ZSwgc3RhdGUuZHVtcCwgbGV2ZWwsIGlza2V5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlLnNraXBJbnZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbigndW5hY2NlcHRhYmxlIGtpbmQgb2YgYW4gb2JqZWN0IHRvIGR1bXAgJyArIHR5cGUpO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS50YWcgIT09IG51bGwgJiYgc3RhdGUudGFnICE9PSAnPycpIHtcbiAgICAgIHN0YXRlLmR1bXAgPSAnITwnICsgc3RhdGUudGFnICsgJz4gJyArIHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldER1cGxpY2F0ZVJlZmVyZW5jZXMob2JqZWN0LCBzdGF0ZSkge1xuICB2YXIgb2JqZWN0cyA9IFtdLFxuICAgICAgZHVwbGljYXRlc0luZGV4ZXMgPSBbXSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGluc3BlY3ROb2RlKG9iamVjdCwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBkdXBsaWNhdGVzSW5kZXhlcy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgc3RhdGUuZHVwbGljYXRlcy5wdXNoKG9iamVjdHNbZHVwbGljYXRlc0luZGV4ZXNbaW5kZXhdXSk7XG4gIH1cbiAgc3RhdGUudXNlZER1cGxpY2F0ZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gaW5zcGVjdE5vZGUob2JqZWN0LCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcykge1xuICB2YXIgb2JqZWN0S2V5TGlzdCxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGlmIChvYmplY3QgIT09IG51bGwgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpIHtcbiAgICBpbmRleCA9IG9iamVjdHMuaW5kZXhPZihvYmplY3QpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChkdXBsaWNhdGVzSW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHtcbiAgICAgICAgZHVwbGljYXRlc0luZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iamVjdHMucHVzaChvYmplY3QpO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICAgIGluc3BlY3ROb2RlKG9iamVjdFtpbmRleF0sIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdEtleUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICAgIGluc3BlY3ROb2RlKG9iamVjdFtvYmplY3RLZXlMaXN0W2luZGV4XV0sIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkdW1wKGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZShvcHRpb25zKTtcblxuICBpZiAoIXN0YXRlLm5vUmVmcykgZ2V0RHVwbGljYXRlUmVmZXJlbmNlcyhpbnB1dCwgc3RhdGUpO1xuXG4gIGlmICh3cml0ZU5vZGUoc3RhdGUsIDAsIGlucHV0LCB0cnVlLCB0cnVlKSkgcmV0dXJuIHN0YXRlLmR1bXAgKyAnXFxuJztcblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIHNhZmVEdW1wKGlucHV0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkdW1wKGlucHV0LCBjb21tb24uZXh0ZW5kKHsgc2NoZW1hOiBERUZBVUxUX1NBRkVfU0NIRU1BIH0sIG9wdGlvbnMpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMuZHVtcCAgICAgPSBkdW1wO1xubW9kdWxlLmV4cG9ydHMuc2FmZUR1bXAgPSBzYWZlRHVtcDtcbiIsICIndXNlIHN0cmljdCc7XG5cblxudmFyIGxvYWRlciA9IHJlcXVpcmUoJy4vanMteWFtbC9sb2FkZXInKTtcbnZhciBkdW1wZXIgPSByZXF1aXJlKCcuL2pzLXlhbWwvZHVtcGVyJyk7XG5cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiAnICsgbmFtZSArICcgaXMgZGVwcmVjYXRlZCBhbmQgY2Fubm90IGJlIHVzZWQuJyk7XG4gIH07XG59XG5cblxubW9kdWxlLmV4cG9ydHMuVHlwZSAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vanMteWFtbC90eXBlJyk7XG5tb2R1bGUuZXhwb3J0cy5TY2hlbWEgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9qcy15YW1sL3NjaGVtYScpO1xubW9kdWxlLmV4cG9ydHMuRkFJTFNBRkVfU0NIRU1BICAgICA9IHJlcXVpcmUoJy4vanMteWFtbC9zY2hlbWEvZmFpbHNhZmUnKTtcbm1vZHVsZS5leHBvcnRzLkpTT05fU0NIRU1BICAgICAgICAgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2pzb24nKTtcbm1vZHVsZS5leHBvcnRzLkNPUkVfU0NIRU1BICAgICAgICAgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2NvcmUnKTtcbm1vZHVsZS5leHBvcnRzLkRFRkFVTFRfU0FGRV9TQ0hFTUEgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2RlZmF1bHRfc2FmZScpO1xubW9kdWxlLmV4cG9ydHMuREVGQVVMVF9GVUxMX1NDSEVNQSA9IHJlcXVpcmUoJy4vanMteWFtbC9zY2hlbWEvZGVmYXVsdF9mdWxsJyk7XG5tb2R1bGUuZXhwb3J0cy5sb2FkICAgICAgICAgICAgICAgID0gbG9hZGVyLmxvYWQ7XG5tb2R1bGUuZXhwb3J0cy5sb2FkQWxsICAgICAgICAgICAgID0gbG9hZGVyLmxvYWRBbGw7XG5tb2R1bGUuZXhwb3J0cy5zYWZlTG9hZCAgICAgICAgICAgID0gbG9hZGVyLnNhZmVMb2FkO1xubW9kdWxlLmV4cG9ydHMuc2FmZUxvYWRBbGwgICAgICAgICA9IGxvYWRlci5zYWZlTG9hZEFsbDtcbm1vZHVsZS5leHBvcnRzLmR1bXAgICAgICAgICAgICAgICAgPSBkdW1wZXIuZHVtcDtcbm1vZHVsZS5leHBvcnRzLnNhZmVEdW1wICAgICAgICAgICAgPSBkdW1wZXIuc2FmZUR1bXA7XG5tb2R1bGUuZXhwb3J0cy5ZQU1MRXhjZXB0aW9uICAgICAgID0gcmVxdWlyZSgnLi9qcy15YW1sL2V4Y2VwdGlvbicpO1xuXG4vLyBEZXByZWNhdGVkIHNjaGVtYSBuYW1lcyBmcm9tIEpTLVlBTUwgMi4wLnhcbm1vZHVsZS5leHBvcnRzLk1JTklNQUxfU0NIRU1BID0gcmVxdWlyZSgnLi9qcy15YW1sL3NjaGVtYS9mYWlsc2FmZScpO1xubW9kdWxlLmV4cG9ydHMuU0FGRV9TQ0hFTUEgICAgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2RlZmF1bHRfc2FmZScpO1xubW9kdWxlLmV4cG9ydHMuREVGQVVMVF9TQ0hFTUEgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2RlZmF1bHRfZnVsbCcpO1xuXG4vLyBEZXByZWNhdGVkIGZ1bmN0aW9ucyBmcm9tIEpTLVlBTUwgMS54Lnhcbm1vZHVsZS5leHBvcnRzLnNjYW4gICAgICAgICAgID0gZGVwcmVjYXRlZCgnc2NhbicpO1xubW9kdWxlLmV4cG9ydHMucGFyc2UgICAgICAgICAgPSBkZXByZWNhdGVkKCdwYXJzZScpO1xubW9kdWxlLmV4cG9ydHMuY29tcG9zZSAgICAgICAgPSBkZXByZWNhdGVkKCdjb21wb3NlJyk7XG5tb2R1bGUuZXhwb3J0cy5hZGRDb25zdHJ1Y3RvciA9IGRlcHJlY2F0ZWQoJ2FkZENvbnN0cnVjdG9yJyk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB5YW1sID0gcmVxdWlyZSgnLi9saWIvanMteWFtbC5qcycpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0geWFtbDtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHlhbWwgPSByZXF1aXJlKCdqcy15YW1sJyk7XG5cbi8qKlxuICogRGVmYXVsdCBlbmdpbmVzXG4gKi9cblxuY29uc3QgZW5naW5lcyA9IGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBZQU1MXG4gKi9cblxuZW5naW5lcy55YW1sID0ge1xuICBwYXJzZTogeWFtbC5zYWZlTG9hZC5iaW5kKHlhbWwpLFxuICBzdHJpbmdpZnk6IHlhbWwuc2FmZUR1bXAuYmluZCh5YW1sKVxufTtcblxuLyoqXG4gKiBKU09OXG4gKi9cblxuZW5naW5lcy5qc29uID0ge1xuICBwYXJzZTogSlNPTi5wYXJzZS5iaW5kKEpTT04pLFxuICBzdHJpbmdpZnk6IGZ1bmN0aW9uKG9iaiwgb3B0aW9ucykge1xuICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtyZXBsYWNlcjogbnVsbCwgc3BhY2U6IDJ9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBvcHRzLnJlcGxhY2VyLCBvcHRzLnNwYWNlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBKYXZhU2NyaXB0XG4gKi9cblxuZW5naW5lcy5qYXZhc2NyaXB0ID0ge1xuICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyLCBvcHRpb25zLCB3cmFwKSB7XG4gICAgLyogZXNsaW50IG5vLWV2YWw6IDAgKi9cbiAgICB0cnkge1xuICAgICAgaWYgKHdyYXAgIT09IGZhbHNlKSB7XG4gICAgICAgIHN0ciA9ICcoZnVuY3Rpb24oKSB7XFxucmV0dXJuICcgKyBzdHIudHJpbSgpICsgJztcXG59KCkpOyc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXZhbChzdHIpIHx8IHt9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHdyYXAgIT09IGZhbHNlICYmIC8odW5leHBlY3RlZHxpZGVudGlmaWVyKS9pLnRlc3QoZXJyLm1lc3NhZ2UpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZShzdHIsIG9wdGlvbnMsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihlcnIpO1xuICAgIH1cbiAgfSxcbiAgc3RyaW5naWZ5OiBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0cmluZ2lmeWluZyBKYXZhU2NyaXB0IGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgfVxufTtcbiIsICIvKiFcbiAqIHN0cmlwLWJvbS1zdHJpbmcgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L3N0cmlwLWJvbS1zdHJpbmc+XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE3LCBKb24gU2NobGlua2VydC5cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3RyKSB7XG4gIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuY2hhckF0KDApID09PSAnXFx1ZmVmZicpIHtcbiAgICByZXR1cm4gc3RyLnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBzdHI7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3Qgc3RyaXBCb20gPSByZXF1aXJlKCdzdHJpcC1ib20tc3RyaW5nJyk7XG5jb25zdCB0eXBlT2YgPSByZXF1aXJlKCdraW5kLW9mJyk7XG5cbmV4cG9ydHMuZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbCkge1xuICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB2YWxcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBgdmFsYCBpcyBhIGJ1ZmZlclxuICovXG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBmdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHR5cGVPZih2YWwpID09PSAnYnVmZmVyJztcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGB2YWxgIGlzIGFuIG9iamVjdFxuICovXG5cbmV4cG9ydHMuaXNPYmplY3QgPSBmdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHR5cGVPZih2YWwpID09PSAnb2JqZWN0Jztcbn07XG5cbi8qKlxuICogQ2FzdCBgaW5wdXRgIHRvIGEgYnVmZmVyXG4gKi9cblxuZXhwb3J0cy50b0J1ZmZlciA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gQnVmZmVyLmZyb20oaW5wdXQpIDogaW5wdXQ7XG59O1xuXG4vKipcbiAqIENhc3QgYHZhbGAgdG8gYSBzdHJpbmcuXG4gKi9cblxuZXhwb3J0cy50b1N0cmluZyA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIGlmIChleHBvcnRzLmlzQnVmZmVyKGlucHV0KSkgcmV0dXJuIHN0cmlwQm9tKFN0cmluZyhpbnB1dCkpO1xuICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGlucHV0IHRvIGJlIGEgc3RyaW5nIG9yIGJ1ZmZlcicpO1xuICB9XG4gIHJldHVybiBzdHJpcEJvbShpbnB1dCk7XG59O1xuXG4vKipcbiAqIENhc3QgYHZhbGAgdG8gYW4gYXJyYXkuXG4gKi9cblxuZXhwb3J0cy5hcnJheWlmeSA9IGZ1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdmFsID8gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdKSA6IFtdO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYHN0cmAgc3RhcnRzIHdpdGggYHN1YnN0cmAuXG4gKi9cblxuZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzdWJzdHIsIGxlbikge1xuICBpZiAodHlwZW9mIGxlbiAhPT0gJ251bWJlcicpIGxlbiA9IHN1YnN0ci5sZW5ndGg7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgbGVuKSA9PT0gc3Vic3RyO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGVuZ2luZXMgPSByZXF1aXJlKCcuL2VuZ2luZXMnKTtcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuXG4gIC8vIGVuc3VyZSB0aGF0IGRlbGltaXRlcnMgYXJlIGFuIGFycmF5XG4gIG9wdHMuZGVsaW1pdGVycyA9IHV0aWxzLmFycmF5aWZ5KG9wdHMuZGVsaW1zIHx8IG9wdHMuZGVsaW1pdGVycyB8fCAnLS0tJyk7XG4gIGlmIChvcHRzLmRlbGltaXRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgb3B0cy5kZWxpbWl0ZXJzLnB1c2gob3B0cy5kZWxpbWl0ZXJzWzBdKTtcbiAgfVxuXG4gIG9wdHMubGFuZ3VhZ2UgPSAob3B0cy5sYW5ndWFnZSB8fCBvcHRzLmxhbmcgfHwgJ3lhbWwnKS50b0xvd2VyQ2FzZSgpO1xuICBvcHRzLmVuZ2luZXMgPSBPYmplY3QuYXNzaWduKHt9LCBlbmdpbmVzLCBvcHRzLnBhcnNlcnMsIG9wdHMuZW5naW5lcyk7XG4gIHJldHVybiBvcHRzO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSwgb3B0aW9ucykge1xuICBsZXQgZW5naW5lID0gb3B0aW9ucy5lbmdpbmVzW25hbWVdIHx8IG9wdGlvbnMuZW5naW5lc1thbGlhc2UobmFtZSldO1xuICBpZiAodHlwZW9mIGVuZ2luZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dyYXktbWF0dGVyIGVuZ2luZSBcIicgKyBuYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBlbmdpbmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBlbmdpbmUgPSB7IHBhcnNlOiBlbmdpbmUgfTtcbiAgfVxuICByZXR1cm4gZW5naW5lO1xufTtcblxuZnVuY3Rpb24gYWxpYXNlKG5hbWUpIHtcbiAgc3dpdGNoIChuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdqcyc6XG4gICAgY2FzZSAnamF2YXNjcmlwdCc6XG4gICAgICByZXR1cm4gJ2phdmFzY3JpcHQnO1xuICAgIGNhc2UgJ2NvZmZlZSc6XG4gICAgY2FzZSAnY29mZmVlc2NyaXB0JzpcbiAgICBjYXNlICdjc29uJzpcbiAgICAgIHJldHVybiAnY29mZmVlJztcbiAgICBjYXNlICd5YW1sJzpcbiAgICBjYXNlICd5bWwnOlxuICAgICAgcmV0dXJuICd5YW1sJztcbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIH1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHR5cGVPZiA9IHJlcXVpcmUoJ2tpbmQtb2YnKTtcbmNvbnN0IGdldEVuZ2luZSA9IHJlcXVpcmUoJy4vZW5naW5lJyk7XG5jb25zdCBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmaWxlLCBkYXRhLCBvcHRpb25zKSB7XG4gIGlmIChkYXRhID09IG51bGwgJiYgb3B0aW9ucyA9PSBudWxsKSB7XG4gICAgc3dpdGNoICh0eXBlT2YoZmlsZSkpIHtcbiAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgIGRhdGEgPSBmaWxlLmRhdGE7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhwZWN0ZWQgZmlsZSB0byBiZSBhIHN0cmluZyBvciBvYmplY3QnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBzdHIgPSBmaWxlLmNvbnRlbnQ7XG4gIGNvbnN0IG9wdHMgPSBkZWZhdWx0cyhvcHRpb25zKTtcbiAgaWYgKGRhdGEgPT0gbnVsbCkge1xuICAgIGlmICghb3B0cy5kYXRhKSByZXR1cm4gZmlsZTtcbiAgICBkYXRhID0gb3B0cy5kYXRhO1xuICB9XG5cbiAgY29uc3QgbGFuZ3VhZ2UgPSBmaWxlLmxhbmd1YWdlIHx8IG9wdHMubGFuZ3VhZ2U7XG4gIGNvbnN0IGVuZ2luZSA9IGdldEVuZ2luZShsYW5ndWFnZSwgb3B0cyk7XG4gIGlmICh0eXBlb2YgZW5naW5lLnN0cmluZ2lmeSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIFwiJyArIGxhbmd1YWdlICsgJy5zdHJpbmdpZnlcIiB0byBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgZmlsZS5kYXRhLCBkYXRhKTtcbiAgY29uc3Qgb3BlbiA9IG9wdHMuZGVsaW1pdGVyc1swXTtcbiAgY29uc3QgY2xvc2UgPSBvcHRzLmRlbGltaXRlcnNbMV07XG4gIGNvbnN0IG1hdHRlciA9IGVuZ2luZS5zdHJpbmdpZnkoZGF0YSwgb3B0aW9ucykudHJpbSgpO1xuICBsZXQgYnVmID0gJyc7XG5cbiAgaWYgKG1hdHRlciAhPT0gJ3t9Jykge1xuICAgIGJ1ZiA9IG5ld2xpbmUob3BlbikgKyBuZXdsaW5lKG1hdHRlcikgKyBuZXdsaW5lKGNsb3NlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZmlsZS5leGNlcnB0ID09PSAnc3RyaW5nJyAmJiBmaWxlLmV4Y2VycHQgIT09ICcnKSB7XG4gICAgaWYgKHN0ci5pbmRleE9mKGZpbGUuZXhjZXJwdC50cmltKCkpID09PSAtMSkge1xuICAgICAgYnVmICs9IG5ld2xpbmUoZmlsZS5leGNlcnB0KSArIG5ld2xpbmUoY2xvc2UpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgKyBuZXdsaW5lKHN0cik7XG59O1xuXG5mdW5jdGlvbiBuZXdsaW5lKHN0cikge1xuICByZXR1cm4gc3RyLnNsaWNlKC0xKSAhPT0gJ1xcbicgPyBzdHIgKyAnXFxuJyA6IHN0cjtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZpbGUsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMpO1xuXG4gIGlmIChmaWxlLmRhdGEgPT0gbnVsbCkge1xuICAgIGZpbGUuZGF0YSA9IHt9O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRzLmV4Y2VycHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gb3B0cy5leGNlcnB0KGZpbGUsIG9wdHMpO1xuICB9XG5cbiAgY29uc3Qgc2VwID0gZmlsZS5kYXRhLmV4Y2VycHRfc2VwYXJhdG9yIHx8IG9wdHMuZXhjZXJwdF9zZXBhcmF0b3I7XG4gIGlmIChzZXAgPT0gbnVsbCAmJiAob3B0cy5leGNlcnB0ID09PSBmYWxzZSB8fCBvcHRzLmV4Y2VycHQgPT0gbnVsbCkpIHtcbiAgICByZXR1cm4gZmlsZTtcbiAgfVxuXG4gIGNvbnN0IGRlbGltaXRlciA9IHR5cGVvZiBvcHRzLmV4Y2VycHQgPT09ICdzdHJpbmcnXG4gICAgPyBvcHRzLmV4Y2VycHRcbiAgICA6IChzZXAgfHwgb3B0cy5kZWxpbWl0ZXJzWzBdKTtcblxuICAvLyBpZiBlbmFibGVkLCBnZXQgdGhlIGV4Y2VycHQgZGVmaW5lZCBhZnRlciBmcm9udC1tYXR0ZXJcbiAgY29uc3QgaWR4ID0gZmlsZS5jb250ZW50LmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICBmaWxlLmV4Y2VycHQgPSBmaWxlLmNvbnRlbnQuc2xpY2UoMCwgaWR4KTtcbiAgfVxuXG4gIHJldHVybiBmaWxlO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHR5cGVPZiA9IHJlcXVpcmUoJ2tpbmQtb2YnKTtcbmNvbnN0IHN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vc3RyaW5naWZ5Jyk7XG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHZhbHVlIHRvIGVuc3VyZSBhbiBvYmplY3QgaXMgcmV0dXJuZWRcbiAqIHdpdGggdGhlIGV4cGVjdGVkIHByb3BlcnRpZXMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmaWxlKSB7XG4gIGlmICh0eXBlT2YoZmlsZSkgIT09ICdvYmplY3QnKSB7XG4gICAgZmlsZSA9IHsgY29udGVudDogZmlsZSB9O1xuICB9XG5cbiAgaWYgKHR5cGVPZihmaWxlLmRhdGEpICE9PSAnb2JqZWN0Jykge1xuICAgIGZpbGUuZGF0YSA9IHt9O1xuICB9XG5cbiAgLy8gaWYgZmlsZSB3YXMgcGFzc2VkIGFzIGFuIG9iamVjdCwgZW5zdXJlIHRoYXRcbiAgLy8gXCJmaWxlLmNvbnRlbnRcIiBpcyBzZXRcbiAgaWYgKGZpbGUuY29udGVudHMgJiYgZmlsZS5jb250ZW50ID09IG51bGwpIHtcbiAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnRzO1xuICB9XG5cbiAgLy8gc2V0IG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMgb24gdGhlIGZpbGUgb2JqZWN0XG4gIHV0aWxzLmRlZmluZShmaWxlLCAnb3JpZycsIHV0aWxzLnRvQnVmZmVyKGZpbGUuY29udGVudCkpO1xuICB1dGlscy5kZWZpbmUoZmlsZSwgJ2xhbmd1YWdlJywgZmlsZS5sYW5ndWFnZSB8fCAnJyk7XG4gIHV0aWxzLmRlZmluZShmaWxlLCAnbWF0dGVyJywgZmlsZS5tYXR0ZXIgfHwgJycpO1xuICB1dGlscy5kZWZpbmUoZmlsZSwgJ3N0cmluZ2lmeScsIGZ1bmN0aW9uKGRhdGEsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxhbmd1YWdlKSB7XG4gICAgICBmaWxlLmxhbmd1YWdlID0gb3B0aW9ucy5sYW5ndWFnZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZ2lmeShmaWxlLCBkYXRhLCBvcHRpb25zKTtcbiAgfSk7XG5cbiAgLy8gc3RyaXAgQk9NIGFuZCBlbnN1cmUgdGhhdCBcImZpbGUuY29udGVudFwiIGlzIGEgc3RyaW5nXG4gIGZpbGUuY29udGVudCA9IHV0aWxzLnRvU3RyaW5nKGZpbGUuY29udGVudCk7XG4gIGZpbGUuaXNFbXB0eSA9IGZhbHNlO1xuICBmaWxlLmV4Y2VycHQgPSAnJztcbiAgcmV0dXJuIGZpbGU7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZ2V0RW5naW5lID0gcmVxdWlyZSgnLi9lbmdpbmUnKTtcbmNvbnN0IGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxhbmd1YWdlLCBzdHIsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMpO1xuICBjb25zdCBlbmdpbmUgPSBnZXRFbmdpbmUobGFuZ3VhZ2UsIG9wdHMpO1xuICBpZiAodHlwZW9mIGVuZ2luZS5wYXJzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIFwiJyArIGxhbmd1YWdlICsgJy5wYXJzZVwiIHRvIGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICByZXR1cm4gZW5naW5lLnBhcnNlKHN0ciwgb3B0cyk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3Qgc2VjdGlvbnMgPSByZXF1aXJlKCdzZWN0aW9uLW1hdHRlcicpO1xuY29uc3QgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2xpYi9kZWZhdWx0cycpO1xuY29uc3Qgc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9saWIvc3RyaW5naWZ5Jyk7XG5jb25zdCBleGNlcnB0ID0gcmVxdWlyZSgnLi9saWIvZXhjZXJwdCcpO1xuY29uc3QgZW5naW5lcyA9IHJlcXVpcmUoJy4vbGliL2VuZ2luZXMnKTtcbmNvbnN0IHRvRmlsZSA9IHJlcXVpcmUoJy4vbGliL3RvLWZpbGUnKTtcbmNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9saWIvcGFyc2UnKTtcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi9saWIvdXRpbHMnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHN0cmluZyBvciBvYmplY3Qgd2l0aCBgY29udGVudGAgcHJvcGVydHksIGV4dHJhY3RzXG4gKiBhbmQgcGFyc2VzIGZyb250LW1hdHRlciBmcm9tIHRoZSBzdHJpbmcsIHRoZW4gcmV0dXJucyBhbiBvYmplY3RcbiAqIHdpdGggYGRhdGFgLCBgY29udGVudGAgYW5kIG90aGVyIFt1c2VmdWwgcHJvcGVydGllc10oI3JldHVybmVkLW9iamVjdCkuXG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdHRlciA9IHJlcXVpcmUoJ2dyYXktbWF0dGVyJyk7XG4gKiBjb25zb2xlLmxvZyhtYXR0ZXIoJy0tLVxcbnRpdGxlOiBIb21lXFxuLS0tXFxuT3RoZXIgc3R1ZmYnKSk7XG4gKiAvLz0+IHsgZGF0YTogeyB0aXRsZTogJ0hvbWUnfSwgY29udGVudDogJ090aGVyIHN0dWZmJyB9XG4gKiBgYGBcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gYGlucHV0YCBTdHJpbmcsIG9yIG9iamVjdCB3aXRoIGBjb250ZW50YCBzdHJpbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBgb3B0aW9uc2BcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gbWF0dGVyKGlucHV0LCBvcHRpb25zKSB7XG4gIGlmIChpbnB1dCA9PT0gJycpIHtcbiAgICByZXR1cm4geyBkYXRhOiB7fSwgY29udGVudDogaW5wdXQsIGV4Y2VycHQ6ICcnLCBvcmlnOiBpbnB1dCB9O1xuICB9XG5cbiAgbGV0IGZpbGUgPSB0b0ZpbGUoaW5wdXQpO1xuICBjb25zdCBjYWNoZWQgPSBtYXR0ZXIuY2FjaGVbZmlsZS5jb250ZW50XTtcblxuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBmaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgY2FjaGVkKTtcbiAgICAgIGZpbGUub3JpZyA9IGNhY2hlZC5vcmlnO1xuICAgICAgcmV0dXJuIGZpbGU7XG4gICAgfVxuXG4gICAgLy8gb25seSBjYWNoZSBpZiB0aGVyZSBhcmUgbm8gb3B0aW9ucyBwYXNzZWQuIGlmIHdlIGNhY2hlIHdoZW4gb3B0aW9uc1xuICAgIC8vIGFyZSBwYXNzZWQsIHdlIHdvdWxkIG5lZWQgdG8gYWxzbyBjYWNoZSBvcHRpb25zIHZhbHVlcywgd2hpY2ggd291bGRcbiAgICAvLyBuZWdhdGUgYW55IHBlcmZvcm1hbmNlIGJlbmVmaXRzIG9mIGNhY2hpbmdcbiAgICBtYXR0ZXIuY2FjaGVbZmlsZS5jb250ZW50XSA9IGZpbGU7XG4gIH1cblxuICByZXR1cm4gcGFyc2VNYXR0ZXIoZmlsZSwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogUGFyc2UgZnJvbnQgbWF0dGVyXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VNYXR0ZXIoZmlsZSwgb3B0aW9ucykge1xuICBjb25zdCBvcHRzID0gZGVmYXVsdHMob3B0aW9ucyk7XG4gIGNvbnN0IG9wZW4gPSBvcHRzLmRlbGltaXRlcnNbMF07XG4gIGNvbnN0IGNsb3NlID0gJ1xcbicgKyBvcHRzLmRlbGltaXRlcnNbMV07XG4gIGxldCBzdHIgPSBmaWxlLmNvbnRlbnQ7XG5cbiAgaWYgKG9wdHMubGFuZ3VhZ2UpIHtcbiAgICBmaWxlLmxhbmd1YWdlID0gb3B0cy5sYW5ndWFnZTtcbiAgfVxuXG4gIC8vIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBvcGVuaW5nIGRlbGltaXRlclxuICBjb25zdCBvcGVuTGVuID0gb3Blbi5sZW5ndGg7XG4gIGlmICghdXRpbHMuc3RhcnRzV2l0aChzdHIsIG9wZW4sIG9wZW5MZW4pKSB7XG4gICAgZXhjZXJwdChmaWxlLCBvcHRzKTtcbiAgICByZXR1cm4gZmlsZTtcbiAgfVxuXG4gIC8vIGlmIHRoZSBuZXh0IGNoYXJhY3RlciBhZnRlciB0aGUgb3BlbmluZyBkZWxpbWl0ZXIgaXNcbiAgLy8gYSBjaGFyYWN0ZXIgZnJvbSB0aGUgZGVsaW1pdGVyLCB0aGVuIGl0J3Mgbm90IGEgZnJvbnQtXG4gIC8vIG1hdHRlciBkZWxpbWl0ZXJcbiAgaWYgKHN0ci5jaGFyQXQob3BlbkxlbikgPT09IG9wZW4uc2xpY2UoLTEpKSB7XG4gICAgcmV0dXJuIGZpbGU7XG4gIH1cblxuICAvLyBzdHJpcCB0aGUgb3BlbmluZyBkZWxpbWl0ZXJcbiAgc3RyID0gc3RyLnNsaWNlKG9wZW5MZW4pO1xuICBjb25zdCBsZW4gPSBzdHIubGVuZ3RoO1xuXG4gIC8vIHVzZSB0aGUgbGFuZ3VhZ2UgZGVmaW5lZCBhZnRlciBmaXJzdCBkZWxpbWl0ZXIsIGlmIGl0IGV4aXN0c1xuICBjb25zdCBsYW5ndWFnZSA9IG1hdHRlci5sYW5ndWFnZShzdHIsIG9wdHMpO1xuICBpZiAobGFuZ3VhZ2UubmFtZSkge1xuICAgIGZpbGUubGFuZ3VhZ2UgPSBsYW5ndWFnZS5uYW1lO1xuICAgIHN0ciA9IHN0ci5zbGljZShsYW5ndWFnZS5yYXcubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIGdldCB0aGUgaW5kZXggb2YgdGhlIGNsb3NpbmcgZGVsaW1pdGVyXG4gIGxldCBjbG9zZUluZGV4ID0gc3RyLmluZGV4T2YoY2xvc2UpO1xuICBpZiAoY2xvc2VJbmRleCA9PT0gLTEpIHtcbiAgICBjbG9zZUluZGV4ID0gbGVuO1xuICB9XG5cbiAgLy8gZ2V0IHRoZSByYXcgZnJvbnQtbWF0dGVyIGJsb2NrXG4gIGZpbGUubWF0dGVyID0gc3RyLnNsaWNlKDAsIGNsb3NlSW5kZXgpO1xuXG4gIGNvbnN0IGJsb2NrID0gZmlsZS5tYXR0ZXIucmVwbGFjZSgvXlxccyojW15cXG5dKy9nbSwgJycpLnRyaW0oKTtcbiAgaWYgKGJsb2NrID09PSAnJykge1xuICAgIGZpbGUuaXNFbXB0eSA9IHRydWU7XG4gICAgZmlsZS5lbXB0eSA9IGZpbGUuY29udGVudDtcbiAgICBmaWxlLmRhdGEgPSB7fTtcbiAgfSBlbHNlIHtcblxuICAgIC8vIGNyZWF0ZSBmaWxlLmRhdGEgYnkgcGFyc2luZyB0aGUgcmF3IGZpbGUubWF0dGVyIGJsb2NrXG4gICAgZmlsZS5kYXRhID0gcGFyc2UoZmlsZS5sYW5ndWFnZSwgZmlsZS5tYXR0ZXIsIG9wdHMpO1xuICB9XG5cbiAgLy8gdXBkYXRlIGZpbGUuY29udGVudFxuICBpZiAoY2xvc2VJbmRleCA9PT0gbGVuKSB7XG4gICAgZmlsZS5jb250ZW50ID0gJyc7XG4gIH0gZWxzZSB7XG4gICAgZmlsZS5jb250ZW50ID0gc3RyLnNsaWNlKGNsb3NlSW5kZXggKyBjbG9zZS5sZW5ndGgpO1xuICAgIGlmIChmaWxlLmNvbnRlbnRbMF0gPT09ICdcXHInKSB7XG4gICAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnQuc2xpY2UoMSk7XG4gICAgfVxuICAgIGlmIChmaWxlLmNvbnRlbnRbMF0gPT09ICdcXG4nKSB7XG4gICAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnQuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgZXhjZXJwdChmaWxlLCBvcHRzKTtcblxuICBpZiAob3B0cy5zZWN0aW9ucyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3B0cy5zZWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgc2VjdGlvbnMoZmlsZSwgb3B0cy5zZWN0aW9uKTtcbiAgfVxuICByZXR1cm4gZmlsZTtcbn1cblxuLyoqXG4gKiBFeHBvc2UgZW5naW5lc1xuICovXG5cbm1hdHRlci5lbmdpbmVzID0gZW5naW5lcztcblxuLyoqXG4gKiBTdHJpbmdpZnkgYW4gb2JqZWN0IHRvIFlBTUwgb3IgdGhlIHNwZWNpZmllZCBsYW5ndWFnZSwgYW5kXG4gKiBhcHBlbmQgaXQgdG8gdGhlIGdpdmVuIHN0cmluZy4gQnkgZGVmYXVsdCwgb25seSBZQU1MIGFuZCBKU09OXG4gKiBjYW4gYmUgc3RyaW5naWZpZWQuIFNlZSB0aGUgW2VuZ2luZXNdKCNlbmdpbmVzKSBzZWN0aW9uIHRvIGxlYXJuXG4gKiBob3cgdG8gc3RyaW5naWZ5IG90aGVyIGxhbmd1YWdlcy5cbiAqXG4gKiBgYGBqc1xuICogY29uc29sZS5sb2cobWF0dGVyLnN0cmluZ2lmeSgnZm9vIGJhciBiYXonLCB7dGl0bGU6ICdIb21lJ30pKTtcbiAqIC8vIHJlc3VsdHMgaW46XG4gKiAvLyAtLS1cbiAqIC8vIHRpdGxlOiBIb21lXG4gKiAvLyAtLS1cbiAqIC8vIGZvbyBiYXIgYmF6XG4gKiBgYGBcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gYGZpbGVgIFRoZSBjb250ZW50IHN0cmluZyB0byBhcHBlbmQgdG8gc3RyaW5naWZpZWQgZnJvbnQtbWF0dGVyLCBvciBhIGZpbGUgb2JqZWN0IHdpdGggYGZpbGUuY29udGVudGAgc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R9IGBkYXRhYCBGcm9udCBtYXR0ZXIgdG8gc3RyaW5naWZ5LlxuICogQHBhcmFtIHtPYmplY3R9IGBvcHRpb25zYCBbT3B0aW9uc10oI29wdGlvbnMpIHRvIHBhc3MgdG8gZ3JheS1tYXR0ZXIgYW5kIFtqcy15YW1sXS5cbiAqIEByZXR1cm4ge1N0cmluZ30gUmV0dXJucyBhIHN0cmluZyBjcmVhdGVkIGJ5IHdyYXBwaW5nIHN0cmluZ2lmaWVkIHlhbWwgd2l0aCBkZWxpbWl0ZXJzLCBhbmQgYXBwZW5kaW5nIHRoYXQgdG8gdGhlIGdpdmVuIHN0cmluZy5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubWF0dGVyLnN0cmluZ2lmeSA9IGZ1bmN0aW9uKGZpbGUsIGRhdGEsIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBmaWxlID09PSAnc3RyaW5nJykgZmlsZSA9IG1hdHRlcihmaWxlLCBvcHRpb25zKTtcbiAgcmV0dXJuIHN0cmluZ2lmeShmaWxlLCBkYXRhLCBvcHRpb25zKTtcbn07XG5cbi8qKlxuICogU3luY2hyb25vdXNseSByZWFkIGEgZmlsZSBmcm9tIHRoZSBmaWxlIHN5c3RlbSBhbmQgcGFyc2VcbiAqIGZyb250IG1hdHRlci4gUmV0dXJucyB0aGUgc2FtZSBvYmplY3QgYXMgdGhlIFttYWluIGZ1bmN0aW9uXSgjbWF0dGVyKS5cbiAqXG4gKiBgYGBqc1xuICogY29uc3QgZmlsZSA9IG1hdHRlci5yZWFkKCcuL2NvbnRlbnQvYmxvZy1wb3N0Lm1kJyk7XG4gKiBgYGBcbiAqIEBwYXJhbSB7U3RyaW5nfSBgZmlsZXBhdGhgIGZpbGUgcGF0aCBvZiB0aGUgZmlsZSB0byByZWFkLlxuICogQHBhcmFtIHtPYmplY3R9IGBvcHRpb25zYCBbT3B0aW9uc10oI29wdGlvbnMpIHRvIHBhc3MgdG8gZ3JheS1tYXR0ZXIuXG4gKiBAcmV0dXJuIHtPYmplY3R9IFJldHVybnMgW2FuIG9iamVjdF0oI3JldHVybmVkLW9iamVjdCkgd2l0aCBgZGF0YWAgYW5kIGBjb250ZW50YFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tYXR0ZXIucmVhZCA9IGZ1bmN0aW9uKGZpbGVwYXRoLCBvcHRpb25zKSB7XG4gIGNvbnN0IHN0ciA9IGZzLnJlYWRGaWxlU3luYyhmaWxlcGF0aCwgJ3V0ZjgnKTtcbiAgY29uc3QgZmlsZSA9IG1hdHRlcihzdHIsIG9wdGlvbnMpO1xuICBmaWxlLnBhdGggPSBmaWxlcGF0aDtcbiAgcmV0dXJuIGZpbGU7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gYHN0cmluZ2AgaGFzIGZyb250IG1hdHRlci5cbiAqIEBwYXJhbSAge1N0cmluZ30gYHN0cmluZ2BcbiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIGZyb250IG1hdHRlciBleGlzdHMuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1hdHRlci50ZXN0ID0gZnVuY3Rpb24oc3RyLCBvcHRpb25zKSB7XG4gIHJldHVybiB1dGlscy5zdGFydHNXaXRoKHN0ciwgZGVmYXVsdHMob3B0aW9ucykuZGVsaW1pdGVyc1swXSk7XG59O1xuXG4vKipcbiAqIERldGVjdCB0aGUgbGFuZ3VhZ2UgdG8gdXNlLCBpZiBvbmUgaXMgZGVmaW5lZCBhZnRlciB0aGVcbiAqIGZpcnN0IGZyb250LW1hdHRlciBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGBzdHJpbmdgXG4gKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYFxuICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBgcmF3YCAoYWN0dWFsIGxhbmd1YWdlIHN0cmluZyksIGFuZCBgbmFtZWAsIHRoZSBsYW5ndWFnZSB3aXRoIHdoaXRlc3BhY2UgdHJpbW1lZFxuICovXG5cbm1hdHRlci5sYW5ndWFnZSA9IGZ1bmN0aW9uKHN0ciwgb3B0aW9ucykge1xuICBjb25zdCBvcHRzID0gZGVmYXVsdHMob3B0aW9ucyk7XG4gIGNvbnN0IG9wZW4gPSBvcHRzLmRlbGltaXRlcnNbMF07XG5cbiAgaWYgKG1hdHRlci50ZXN0KHN0cikpIHtcbiAgICBzdHIgPSBzdHIuc2xpY2Uob3Blbi5sZW5ndGgpO1xuICB9XG5cbiAgY29uc3QgbGFuZ3VhZ2UgPSBzdHIuc2xpY2UoMCwgc3RyLnNlYXJjaCgvXFxyP1xcbi8pKTtcbiAgcmV0dXJuIHtcbiAgICByYXc6IGxhbmd1YWdlLFxuICAgIG5hbWU6IGxhbmd1YWdlID8gbGFuZ3VhZ2UudHJpbSgpIDogJydcbiAgfTtcbn07XG5cbi8qKlxuICogRXhwb3NlIGBtYXR0ZXJgXG4gKi9cblxubWF0dGVyLmNhY2hlID0ge307XG5tYXR0ZXIuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICBtYXR0ZXIuY2FjaGUgPSB7fTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IG1hdHRlcjtcbiIsICJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgbm9ybWFsaXplUGF0aCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblwiO1xuaW1wb3J0IHsgc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblN0b3JlXCI7XG5pbXBvcnQgeyBPdmxBcGlDbGllbnQgfSBmcm9tIFwiLi9hcGlcIjtcbmltcG9ydCB7IGFwcGVuZEVycm9yTG9nIH0gZnJvbSBcIi4vbG9nZ2luZ1wiO1xuaW1wb3J0IHsgU2F2ZUNvbnZlcnNhdGlvbk1vZGFsLCBTYXZlQ29udmVyc2F0aW9uRm9ybSB9IGZyb20gXCIuL21vZGFscy9zYXZlQ29udmVyc2F0aW9uTW9kYWxcIjtcbmltcG9ydCB7IEluZGV4aW5nUHJvZ3Jlc3NNb2RhbCB9IGZyb20gXCIuL21vZGFscy9pbmRleGluZ1Byb2dyZXNzTW9kYWxcIjtcbmltcG9ydCB7IHBhcnNlVHVybnMgfSBmcm9tIFwiLi9wYXJzZVR1cm5zXCI7XG5pbXBvcnQgeyBPdmxTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIE92bFNldHRpbmdzLCBFTUJFRERJTkdfUFJFU0VUUyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBDaGF0VmlldywgVklFV19UWVBFX09WTF9DSEFUIH0gZnJvbSBcIi4vdmlld3MvY2hhdFZpZXdcIjtcbmltcG9ydCB7IEluZGV4ZXIgfSBmcm9tIFwiLi9pbmRleGluZy9pbmRleGVyXCI7XG5pbXBvcnQgeyBWYXVsdFdhdGNoZXIgfSBmcm9tIFwiLi92YXVsdFdhdGNoZXJcIjtcbmltcG9ydCB7IGpvaW4gfSBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPdmxQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBwdWJsaWMgc2V0dGluZ3M6IE92bFNldHRpbmdzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTIH07XG4gIHByaXZhdGUgYXBpQ2xpZW50OiBPdmxBcGlDbGllbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbmRleGVyOiBJbmRleGVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdmF1bHRXYXRjaGVyOiBWYXVsdFdhdGNoZXIgfCBudWxsID0gbnVsbDtcblxuICBhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIEFQSSBcdUQ2MzhcdUNEOUMgXHVCODVDXHVDOUMxXHVDNzQ0IFx1QkQ4NFx1QjlBQ1x1RDU3NCBcdUMwQzFcdUQwRENcdUI5N0MgXHVDNzIwXHVDOUMwXHVENTY5XHVCMkM4XHVCMkU0LlxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IE92bEFwaUNsaWVudChcbiAgICAgICgpID0+IHRoaXMuc2V0dGluZ3MsXG4gICAgICAoY29udGV4dDogc3RyaW5nLCBkZXRhaWw6IHVua25vd24pID0+XG4gICAgICAgIGFwcGVuZEVycm9yTG9nKHRoaXMuYXBwLCB0aGlzLm1hbmlmZXN0LCBjb250ZXh0LCBkZXRhaWwpXG4gICAgKTtcblxuICAgIC8vIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pbmRleGluZ0VuYWJsZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUluZGV4aW5nKCk7XG4gICAgfVxuXG4gICAgLy8gXHVDMEFDXHVDNzc0XHVCNERDXHVCQzE0IFx1Q0M0NFx1RDMwNSBcdUJERjAgXHVCNEYxXHVCODVEXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoVklFV19UWVBFX09WTF9DSEFULCAobGVhZikgPT4gbmV3IENoYXRWaWV3KGxlYWYsIHRoaXMpKTtcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbihcIm1lc3NhZ2UtY2lyY2xlXCIsIFwiT1ZMIFx1QjMwMFx1RDY1NCBcdUM1RjRcdUFFMzBcIiwgKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLm9wZW5DaGF0VmlldygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm92bC1vcGVuLWNoYXRcIixcbiAgICAgIG5hbWU6IFwiT1ZMIFx1QjMwMFx1RDY1NCBcdUNDM0QgXHVDNUY0XHVBRTMwXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB2b2lkIHRoaXMub3BlbkNoYXRWaWV3KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwib3ZsLXNhdmUtY29udmVyc2F0aW9uXCIsXG4gICAgICBuYW1lOiBcIlx1QjMwMFx1RDY1NCBKU09OXHVDNUQwXHVDMTFDIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUM4MDBcdUM3QTVcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIG5ldyBTYXZlQ29udmVyc2F0aW9uTW9kYWwodGhpcywgKGZvcm0pID0+IHtcbiAgICAgICAgICB2b2lkIHRoaXMuaGFuZGxlU2F2ZUNvbnZlcnNhdGlvbihmb3JtKTtcbiAgICAgICAgfSkub3BlbigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm92bC1pbmRleC12YXVsdFwiLFxuICAgICAgbmFtZTogXCJcdUJDRkNcdUQyQjggXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzJEQ1x1Qzc5MVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdm9pZCB0aGlzLnN0YXJ0SW5kZXhpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgT3ZsU2V0dGluZ1RhYih0aGlzKSk7XG4gIH1cblxuICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9PVkxfQ0hBVCkuZm9yRWFjaCgobGVhZikgPT4ge1xuICAgICAgbGVhZi5kZXRhY2goKTtcbiAgICB9KTtcblxuICAgIC8vIFx1Qzc3OFx1QjM3MVx1QzExQyBcdUM4MTVcdUI5QUNcbiAgICBpZiAodGhpcy5pbmRleGVyKSB7XG4gICAgICB0aGlzLmluZGV4ZXIuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzJEQ1x1QzJBNFx1RDE1QyBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUluZGV4aW5nKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCNTE0XHVCODA5XHVEMUEwXHVCOUFDIFx1QUNCRFx1Qjg1Q1xuICAgICAgY29uc3QgZGF0YURpciA9IGpvaW4oXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLSBPYnNpZGlhbiBBUElcdUM3NTggXHVCMEI0XHVCRDgwIFx1QzE4RFx1QzEzMSBcdUMwQUNcdUM2QTlcbiAgICAgICAgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5iYXNlUGF0aCxcbiAgICAgICAgXCIub2JzaWRpYW5cIixcbiAgICAgICAgXCJwbHVnaW5zXCIsXG4gICAgICAgIHRoaXMubWFuaWZlc3QuaWRcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG1ldGFEYlBhdGggPSBqb2luKGRhdGFEaXIsIFwibWV0YS5kYlwiKTtcbiAgICAgIGNvbnN0IHZlY3RvckRiUGF0aCA9IGpvaW4oZGF0YURpciwgXCJ2ZWN0b3JzLmRiXCIpO1xuXG4gICAgICAvLyBcdUM3NzhcdUIzNzFcdUMxMUMgXHVDMEREXHVDMTMxXG4gICAgICB0aGlzLmluZGV4ZXIgPSBuZXcgSW5kZXhlcih7XG4gICAgICAgIGNodW5rU2l6ZTogdGhpcy5zZXR0aW5ncy5jaHVua1NpemUsXG4gICAgICAgIGNodW5rT3ZlcmxhcDogdGhpcy5zZXR0aW5ncy5jaHVua092ZXJsYXAsXG4gICAgICAgIHRvcEs6IHRoaXMuc2V0dGluZ3MudG9wSyxcbiAgICAgICAgZW1iZWRkaW5nUHJvdmlkZXI6IHRoaXMuc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXIsXG4gICAgICAgIGVtYmVkZGluZ01vZGVsOiB0aGlzLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsLFxuICAgICAgICBlbWJlZGRpbmdBcGlLZXk6IHRoaXMuc2V0dGluZ3MuZW1iZWRkaW5nQXBpS2V5IHx8IHRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuICAgICAgICBlbWJlZGRpbmdBcGlVcmw6IHRoaXMuZ2V0RW1iZWRkaW5nQXBpVXJsKCksXG4gICAgICAgIG1ldGFEYlBhdGgsXG4gICAgICAgIHZlY3RvckRiUGF0aCxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB0aGlzLmluZGV4ZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAvLyBcdUJDRkNcdUQyQjggXHVDNkNDXHVDQzk4IFx1QzEyNFx1QzgxNVxuICAgICAgdGhpcy52YXVsdFdhdGNoZXIgPSBuZXcgVmF1bHRXYXRjaGVyKHRoaXMuYXBwLnZhdWx0KTtcbiAgICAgIHRoaXMudmF1bHRXYXRjaGVyLnNldEluZGV4ZXIodGhpcy5pbmRleGVyKTtcblxuICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVCNEYxXHVCODVEXG4gICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiY3JlYXRlXCIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgdm9pZCB0aGlzLnZhdWx0V2F0Y2hlcj8ub25GaWxlQ3JlYXRlKGZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJtb2RpZnlcIiwgKGZpbGUpID0+IHtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICB2b2lkIHRoaXMudmF1bHRXYXRjaGVyPy5vbkZpbGVNb2RpZnkoZmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcImRlbGV0ZVwiLCAoZmlsZSkgPT4ge1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMudmF1bHRXYXRjaGVyPy5vbkZpbGVEZWxldGUoZmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcInJlbmFtZVwiLCAoZmlsZSwgb2xkUGF0aCkgPT4ge1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIHZvaWQgdGhpcy52YXVsdFdhdGNoZXI/Lm9uRmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUMyQTRcdUQxNUMgXHVDRDA4XHVBRTMwXHVENjU0IFx1QzY0NFx1QjhDQ1wiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUMyQTRcdUQxNUMgXHVDRDA4XHVBRTMwXHVENjU0IFx1QzJFNFx1RDMyODpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUMyQTRcdUQxNUMgXHVDRDA4XHVBRTMwXHVENjU0XHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVCQ0ZDXHVEMkI4IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUM3OTFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc3RhcnRJbmRleGluZygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuaW5kZXhpbmdFbmFibGVkKSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHVCQTNDXHVDODAwIFx1QzEyNFx1QzgxNVx1QzVEMFx1QzExQyBcdUM3NzhcdUIzNzFcdUMyRjFcdUM3NDQgXHVENjVDXHVDMTMxXHVENjU0XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaW5kZXhlcikge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplSW5kZXhpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudmF1bHRXYXRjaGVyKSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzJEQ1x1QzJBNFx1RDE1Q1x1Qzc3NCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFx1QzlDNFx1RDU4OVx1QjNDNCBcdUJBQThcdUIyRUMgXHVENDVDXHVDMkRDXG4gICAgY29uc3QgcHJvZ3Jlc3NNb2RhbCA9IG5ldyBJbmRleGluZ1Byb2dyZXNzTW9kYWwodGhpcy5hcHAsICgpID0+IHtcbiAgICAgIC8vIFx1Q0RFOFx1QzE4QyBcdUJDODRcdUQyQkMgXHVEMDc0XHVCOUFEIFx1QzJEQ1xuICAgICAgdGhpcy52YXVsdFdhdGNoZXI/LmNhbmNlbEluZGV4aW5nKCk7XG4gICAgfSk7XG4gICAgcHJvZ3Jlc3NNb2RhbC5vcGVuKCk7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy52YXVsdFdhdGNoZXIuaW5kZXhWYXVsdCgocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgcHJvZ3Jlc3NNb2RhbC51cGRhdGVQcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QkNGQ1x1RDJCOCBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiXHVCQ0ZDXHVEMkI4IFx1Qzc3OFx1QjM3MVx1QzJGMVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgICBwcm9ncmVzc01vZGFsLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1QkNBMVx1RDEzMCBcdUFDODBcdUMwQzkgXHVDMjE4XHVENTg5XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgY2h1bms6IGFueTsgbm90ZTogYW55OyBzY29yZTogbnVtYmVyIH0+PiB7XG4gICAgaWYgKCF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc3OFx1QjM3MVx1QzJGMVx1Qzc3NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSBhd2FpdCB0aGlzLmluZGV4ZXIuc2VhcmNoKHF1ZXJ5KTtcbiAgICByZXR1cm4gdGhpcy5pbmRleGVyLmdldFNlYXJjaFJlc3VsdHNXaXRoTWV0YWRhdGEoc2VhcmNoUmVzdWx0cyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9wZW5DaGF0VmlldygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGlzdGluZ0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9PVkxfQ0hBVClbMF07XG4gICAgY29uc3QgbGVhZiA9IGV4aXN0aW5nTGVhZiA/PyB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICBpZiAoIWxlYWYpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdUIzMDBcdUQ2NTQgXHVDQzNEXHVDNzQ0IFx1QzVGNCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFZJRVdfVFlQRV9PVkxfQ0hBVCwgYWN0aXZlOiB0cnVlIH0pO1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlcXVlc3RBc3Npc3RhbnRSZXBseSh0dXJuczogQ29udmVyc2F0aW9uVHVybltdKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuYXBpQ2xpZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgXHVEMDc0XHVCNzdDXHVDNzc0XHVDNUI4XHVEMkI4XHVCOTdDIFx1Q0QwOFx1QUUzMFx1RDY1NFx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LnJlcXVlc3RBc3Npc3RhbnRSZXBseSh0dXJucyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghdGhpcy5hcGlDbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBcdUQwNzRcdUI3N0NcdUM3NzRcdUM1QjhcdUQyQjhcdUI5N0MgXHVDRDA4XHVBRTMwXHVENjU0XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQucmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlQ29udmVyc2F0aW9uRnJvbVR1cm5zKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10sXG4gICAgb3V0cHV0Rm9sZGVyOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyh0aGlzLmFwcC52YXVsdCwgc2Vzc2lvbklkLCB0dXJucywgb3V0cHV0Rm9sZGVyKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MsIC4uLihhd2FpdCB0aGlzLmxvYWREYXRhKCkpIH07XG5cbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmVtYmVkZGluZ1Byb3ZpZGVyID09PSBcImxvY2FsXCIpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXIgPSBcImdlbWluaVwiO1xuICAgICAgdGhpcy5zZXR0aW5ncy5lbWJlZGRpbmdNb2RlbCA9IEVNQkVERElOR19QUkVTRVRTLmdlbWluaS5tb2RlbDtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlU2F2ZUNvbnZlcnNhdGlvbihmb3JtOiBTYXZlQ29udmVyc2F0aW9uRm9ybSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWZvcm0uaW5wdXRQYXRoKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJKU09OIFx1RDMwQ1x1Qzc3QyBcdUFDQkRcdUI4NUNcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghZm9ybS5zZXNzaW9uSWQpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1QzEzOFx1QzE1OCBJRFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzQgXHVDOEZDXHVDMTM4XHVDNjk0LlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBqc29uUGF0aCA9IG5vcm1hbGl6ZVBhdGgoZm9ybS5pbnB1dFBhdGgpLnJlcGxhY2UoL15cXC8rLywgXCJcIik7XG4gICAgICBjb25zdCBqc29uRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoanNvblBhdGgpO1xuICAgICAgaWYgKCFqc29uRXhpc3RzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJKU09OIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUNDM0VcdUM3NDQgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGpzb25Db250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGpzb25QYXRoKTtcbiAgICAgIGNvbnN0IHR1cm5zID0gcGFyc2VUdXJucyhqc29uQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IG91dHB1dEZvbGRlciA9IGZvcm0ub3V0cHV0Rm9sZGVyXG4gICAgICAgID8gbm9ybWFsaXplUGF0aChmb3JtLm91dHB1dEZvbGRlcikucmVwbGFjZSgvXlxcLysvLCBcIlwiKVxuICAgICAgICA6IFwiXCI7XG4gICAgICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyhcbiAgICAgICAgdGhpcy5hcHAudmF1bHQsXG4gICAgICAgIGZvcm0uc2Vzc2lvbklkLFxuICAgICAgICB0dXJucyxcbiAgICAgICAgb3V0cHV0Rm9sZGVyXG4gICAgICApO1xuICAgICAgbmV3IE5vdGljZShgXHVCMzAwXHVENjU0IFx1QzgwMFx1QzdBNSBcdUM2NDRcdUI4Q0M6ICR7dGFyZ2V0UGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1QzgwMFx1QzdBNSBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDODA0XHVDQ0I0IFx1QkNGQ1x1RDJCOFx1Qjk3QyBcdUM3ODRcdUJDQTBcdUI1MjlcdUQ1NjlcdUIyQzhcdUIyRTQgKFx1QzJBNFx1Q0U5NCBcdUQ2QzQgXHVDN0FDXHVDNzc4XHVCMzcxXHVDMkYxKVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluZGV4VmF1bHRBbGwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmluZGV4aW5nRW5hYmxlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzc0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUluZGV4aW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZhdWx0V2F0Y2hlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzJEQ1x1QzJBNFx1RDE1Q1x1Qzc3NCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlx1QzgwNFx1Q0NCNCBcdUJDRkNcdUQyQjggXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzJEQ1x1Qzc5MS4uLlwiKTtcbiAgICAgIGF3YWl0IHRoaXMudmF1bHRXYXRjaGVyLmluZGV4VmF1bHQoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXHVDODA0XHVDQ0I0IFx1QkNGQ1x1RDJCOCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNjQ0XHVCOENDXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVDODA0XHVDQ0I0IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUMyRTBcdUFEREMgXHVCMTc4XHVEMkI4XHVCOUNDIFx1Qzc4NFx1QkNBMFx1QjUyOVx1RDU2OVx1QjJDOFx1QjJFNCAoXHVDOTlEXHVCRDg0IFx1Qzc3OFx1QjM3MVx1QzJGMSlcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbmRleE5ld0ZpbGVzT25seSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuaW5kZXhpbmdFbmFibGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUM3NzhcdUIzNzFcdUMyRjFcdUM3NzQgXHVENjVDXHVDMTMxXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaW5kZXhlcikge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplSW5kZXhpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudmF1bHRXYXRjaGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkRDXHVDMkE0XHVEMTVDXHVDNzc0IFx1Q0QwOFx1QUUzMFx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiXHVDMkUwXHVBRERDIFx1RDMwQ1x1Qzc3QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkRDXHVDNzkxLi4uXCIpO1xuICAgICAgXG4gICAgICAvLyBcdUJDRkNcdUQyQjhcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQzMENcdUM3N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCBpbmRleGVkID0gMDtcblxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGFsbEZpbGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgLy8gXHVBQzAxIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUM3NzhcdUIzNzFcdUMyRjEgKFx1Qzc3NFx1QkJGOCBcdUM3NzhcdUIzNzFcdUMyRjFcdUI0MUMgXHVEMzBDXHVDNzdDXHVDNzQwIGluZGV4ZXJcdUM1RDBcdUMxMUMgXHVENjU1XHVDNzc4KVxuICAgICAgICAgIGlmICh0aGlzLmluZGV4ZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlci5pbmRleEZpbGUoZmlsZS5wYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXhlZCsrO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgXHVEMzBDXHVDNzdDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgXHVDMkUwXHVBRERDIFx1RDMwQ1x1Qzc3QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNjQ0XHVCOENDOiAke2luZGV4ZWR9XHVBQzFDIFx1RDMwQ1x1Qzc3QyBcdUNDOThcdUI5QUNgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QzJFMFx1QUREQyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IEFQSSBVUkwgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAqL1xuICBwcml2YXRlIGdldEVtYmVkZGluZ0FwaVVybCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHByZXNldCA9IEVNQkVERElOR19QUkVTRVRTW3RoaXMuc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXJdO1xuICAgIHJldHVybiBwcmVzZXQ/LmFwaVVybDtcbiAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uLCBDb252ZXJzYXRpb25UdXJuIH0gZnJvbSBcIi4vY29udmVyc2F0aW9uXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9NYXJrZG93biB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyhcbiAgdmF1bHQ6IFZhdWx0LFxuICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgb3V0cHV0Rm9sZGVyOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uID0ge1xuICAgIHNlc3Npb25JZCxcbiAgICB0dXJucyxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcbiAgfTtcblxuICBjb25zdCBtYXJrZG93biA9IGNvbnZlcnRUb01hcmtkb3duKGNvbnZlcnNhdGlvbik7XG4gIGNvbnN0IGZpbGVuYW1lID0gYnVpbGRGaWxlTmFtZShjb252ZXJzYXRpb24pO1xuICBjb25zdCBjbGVhbmVkRm9sZGVyID0gb3V0cHV0Rm9sZGVyID8gbm9ybWFsaXplUGF0aChvdXRwdXRGb2xkZXIpLnJlcGxhY2UoL15cXC8rLywgXCJcIikgOiBcIlwiO1xuICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgZW5zdXJlVW5pcXVlUGF0aChcbiAgICB2YXVsdCxcbiAgICBub3JtYWxpemVQYXRoKGNsZWFuZWRGb2xkZXIgPyBgJHtjbGVhbmVkRm9sZGVyfS8ke2ZpbGVuYW1lfWAgOiBmaWxlbmFtZSlcbiAgKTtcblxuICBpZiAoY2xlYW5lZEZvbGRlcikge1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyh2YXVsdCwgY2xlYW5lZEZvbGRlcik7XG4gIH1cblxuICBhd2FpdCB2YXVsdC5jcmVhdGUodGFyZ2V0UGF0aCwgbWFya2Rvd24pO1xuICByZXR1cm4gdGFyZ2V0UGF0aDtcbn1cblxuZnVuY3Rpb24gYnVpbGRGaWxlTmFtZShjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbik6IHN0cmluZyB7XG4gIGNvbnN0IHNhZmVUaXRsZSA9IHNhbml0aXplRmlsZVNlZ21lbnQoY29udmVyc2F0aW9uLnNlc3Npb25JZCk7XG4gIHJldHVybiBgJHtzYWZlVGl0bGV9Lm1kYDtcbn1cblxuZnVuY3Rpb24gc2FuaXRpemVGaWxlU2VnbWVudCh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSB7XG4gICAgcmV0dXJuIFwidW50aXRsZWRcIjtcbiAgfVxuXG4gIGNvbnN0IGNsZWFuZWQgPSB0cmltbWVkXG4gICAgLnJlcGxhY2UoL1tcXFxcLzoqP1wiPD58XS9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAudHJpbSgpO1xuXG4gIHJldHVybiBjbGVhbmVkIHx8IFwidW50aXRsZWRcIjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyRXhpc3RzKHZhdWx0OiBWYXVsdCwgZm9sZGVyOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgZXhpc3RzID0gYXdhaXQgdmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyKTtcbiAgaWYgKCFleGlzdHMpIHtcbiAgICBhd2FpdCB2YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVVbmlxdWVQYXRoKHZhdWx0OiBWYXVsdCwgcGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG4gIGNvbnN0IGV4dGVuc2lvbkluZGV4ID0gbm9ybWFsaXplZC5sYXN0SW5kZXhPZihcIi5tZFwiKTtcbiAgY29uc3QgYmFzZSA9IGV4dGVuc2lvbkluZGV4ID09PSAtMSA/IG5vcm1hbGl6ZWQgOiBub3JtYWxpemVkLnNsaWNlKDAsIGV4dGVuc2lvbkluZGV4KTtcbiAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uSW5kZXggPT09IC0xID8gXCJcIiA6IFwiLm1kXCI7XG5cbiAgbGV0IGNhbmRpZGF0ZSA9IG5vcm1hbGl6ZWQ7XG4gIGxldCBjb3VudCA9IDE7XG5cbiAgd2hpbGUgKGF3YWl0IHZhdWx0LmFkYXB0ZXIuZXhpc3RzKGNhbmRpZGF0ZSkpIHtcbiAgICBjYW5kaWRhdGUgPSBgJHtiYXNlfS0ke2NvdW50fSR7ZXh0ZW5zaW9ufWA7XG4gICAgY291bnQgKz0gMTtcbiAgfVxuXG4gIHJldHVybiBjYW5kaWRhdGU7XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5cbi8vIFx1QjMwMFx1RDY1NFx1Qzc1OCBcdUFDMDEgXHVEMTM0XHVDNzQ0IFx1QjA5OFx1RDBDMFx1QjBCNFx1QjI5NCBcdUQwQzBcdUM3ODVcbmV4cG9ydCB0eXBlIENvbnZlcnNhdGlvblR1cm4gPSB7XG4gIHJvbGU6IFwidXNlclwiIHwgXCJhc3Npc3RhbnRcIiB8IFwic3lzdGVtXCI7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wPzogRGF0ZSB8IHN0cmluZztcbn07XG5cbi8vIFx1QjMwMFx1RDY1NCBcdUM4MDRcdUNDQjRcdUI5N0MgXHVCMDk4XHVEMEMwXHVCMEI0XHVCMjk0IFx1RDBDMFx1Qzc4NVxuZXhwb3J0IHR5cGUgQ29udmVyc2F0aW9uID0ge1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xufTtcblxuLy8gXHVCMzAwXHVENjU0XHVCOTdDIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVCQ0MwXHVENjU4XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvTWFya2Rvd24oY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb24pOiBzdHJpbmcge1xuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgXG4gIC8vIFx1RDVFNFx1QjM1NDogXHVDODFDXHVCQUE5XHVBQ0ZDIFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMFxuICBsaW5lcy5wdXNoKGAjIFx1QjMwMFx1RDY1NCBcdUFFMzBcdUI4NUQgLSAke2NvbnZlcnNhdGlvbi5zZXNzaW9uSWR9YCk7XG4gIGxpbmVzLnB1c2goXCJcIik7XG4gIGxpbmVzLnB1c2goYFx1QzBERFx1QzEzMVx1Qzc3QzogJHtjb252ZXJzYXRpb24uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCl9YCk7XG4gIGxpbmVzLnB1c2goXCJcIik7XG4gIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIGxpbmVzLnB1c2goXCJcIik7XG4gIFxuICAvLyBcdUFDMDEgXHVEMTM0XHVDNzQ0IFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNFx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NThcbiAgZm9yIChjb25zdCB0dXJuIG9mIGNvbnZlcnNhdGlvbi50dXJucykge1xuICAgIGNvbnN0IHJvbGVMYWJlbCA9IHR1cm4ucm9sZSA9PT0gXCJ1c2VyXCIgPyBcIlx1RDgzRFx1REM2NCBcdUMwQUNcdUM2QTlcdUM3OTBcIiA6IFxuICAgICAgICAgICAgICAgICAgICAgdHVybi5yb2xlID09PSBcImFzc2lzdGFudFwiID8gXCJcdUQ4M0VcdUREMTYgXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCIgOiBcbiAgICAgICAgICAgICAgICAgICAgIFwiXHUyNjk5XHVGRTBGIFx1QzJEQ1x1QzJBNFx1RDE1Q1wiO1xuICAgIFxuICAgIGxpbmVzLnB1c2goYCMjICR7cm9sZUxhYmVsfWApO1xuICAgIFxuICAgIGlmICh0dXJuLnRpbWVzdGFtcCkge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gdHlwZW9mIHR1cm4udGltZXN0YW1wID09PSBcInN0cmluZ1wiIFxuICAgICAgICA/IHR1cm4udGltZXN0YW1wIFxuICAgICAgICA6IHR1cm4udGltZXN0YW1wLnRvSVNPU3RyaW5nKCk7XG4gICAgICBsaW5lcy5wdXNoKGAqJHt0aW1lc3RhbXB9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgXG4gICAgbGluZXMucHVzaCh0dXJuLmNvbnRlbnQpO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cbiAgXG4gIHJldHVybiBsaW5lcy5qb2luKFwiXFxuXCIpO1xufVxuXG4vLyBcdUIzMDBcdUQ2NTRcdUI5N0MgXHVEMzBDXHVDNzdDXHVCODVDIFx1QzgwMFx1QzdBNVxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVDb252ZXJzYXRpb24oXG4gIGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uLFxuICB0YXJnZXREaXI6IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHRhcmdldERpcikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QjMwMFx1QzBDMSBcdUI1MTRcdUI4MDlcdUQxQTBcdUI5QUNcdUFDMDAgXHVDODc0XHVDN0FDXHVENTU4XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNDogJHt0YXJnZXREaXJ9YCk7XG4gIH1cbiAgXG4gIGNvbnN0IG1hcmtkb3duID0gY29udmVydFRvTWFya2Rvd24oY29udmVyc2F0aW9uKTtcbiAgXG4gIC8vIFx1RDMwQ1x1Qzc3Q1x1QkE4NSBcdUMwRERcdUMxMzE6IFlZWVktTU0tREQtc2Vzc2lvbklkLm1kXG4gIGNvbnN0IGRhdGUgPSBjb252ZXJzYXRpb24uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICBjb25zdCBmaWxlbmFtZSA9IGAke2RhdGV9LSR7Y29udmVyc2F0aW9uLnNlc3Npb25JZH0ubWRgO1xuICBjb25zdCBmaWxlcGF0aCA9IHBhdGguam9pbih0YXJnZXREaXIsIGZpbGVuYW1lKTtcbiAgXG4gIGZzLndyaXRlRmlsZVN5bmMoZmlsZXBhdGgsIG1hcmtkb3duLCBcInV0Zi04XCIpO1xuICBcbiAgcmV0dXJuIGZpbGVwYXRoO1xufVxuIiwgImltcG9ydCB7IHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblwiO1xuaW1wb3J0IHR5cGUgeyBPdmxTZXR0aW5ncyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBQUk9WSURFUl9QUkVTRVRTIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxudHlwZSBMb2dXcml0ZXIgPSAoY29udGV4dDogc3RyaW5nLCBkZXRhaWw6IHVua25vd24pID0+IFByb21pc2U8dm9pZD47XG5cbnR5cGUgU2V0dGluZ3NHZXR0ZXIgPSAoKSA9PiBPdmxTZXR0aW5ncztcblxuZXhwb3J0IGNsYXNzIE92bEFwaUNsaWVudCB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZ2V0U2V0dGluZ3M6IFNldHRpbmdzR2V0dGVyO1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ1dyaXRlcjogTG9nV3JpdGVyO1xuXG4gIGNvbnN0cnVjdG9yKGdldFNldHRpbmdzOiBTZXR0aW5nc0dldHRlciwgbG9nV3JpdGVyPzogTG9nV3JpdGVyKSB7XG4gICAgdGhpcy5nZXRTZXR0aW5ncyA9IGdldFNldHRpbmdzO1xuICAgIC8vIFx1Qjg1Q1x1QURGOCBcdUFFMzBcdUI4NURcdUFFMzBcdUI5N0MgXHVDOEZDXHVDNzg1XHVCQzFCXHVDOUMwIFx1QkFCQlx1RDU1QyBcdUFDQkRcdUM2QjBcdUM1RDBcdUIzQzQgXHVDNTQ4XHVDODA0XHVENTU4XHVBQzhDIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QjNDNFx1Qjg1RCBcdUNDOThcdUI5QUNcdUQ1NjlcdUIyQzhcdUIyRTQuXG4gICAgdGhpcy5sb2dXcml0ZXIgPSBsb2dXcml0ZXIgPz8gKGFzeW5jICgpID0+IHt9KTtcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RBc3Npc3RhbnRSZXBseSh0dXJuczogQ29udmVyc2F0aW9uVHVybltdKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcblxuICAgIGlmIChzZXR0aW5ncy5wcm92aWRlciA9PT0gXCJnZW1pbmlcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdEdlbWluaVJlcGx5KHNldHRpbmdzLCB0dXJucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdE9wZW5BaUNvbXBhdGlibGVSZXBseShzZXR0aW5ncywgdHVybnMpO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuICAgIGNvbnN0IHRpdGxlTW9kZWwgPSBzZXR0aW5ncy50aXRsZU1vZGVsLnRyaW0oKTtcbiAgICBjb25zdCBtb2RlbE5hbWUgPSB0aXRsZU1vZGVsIHx8IHNldHRpbmdzLm1vZGVsLnRyaW0oKTtcbiAgICBjb25zdCB0dXJuczogQ29udmVyc2F0aW9uVHVybltdID0gW1xuICAgICAge1xuICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgY29udGVudDogcHJvbXB0LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfVxuICAgIF07XG5cbiAgICBpZiAoc2V0dGluZ3MucHJvdmlkZXIgPT09IFwiZ2VtaW5pXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RHZW1pbmlSZXBseShzZXR0aW5ncywgdHVybnMsIHtcbiAgICAgICAgbW9kZWxOYW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6IFwiXCJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3RPcGVuQWlDb21wYXRpYmxlUmVwbHkoc2V0dGluZ3MsIHR1cm5zLCB7XG4gICAgICBtb2RlbE5hbWUsXG4gICAgICBzeXN0ZW1Qcm9tcHQ6IFwiXCJcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVxdWVzdE9wZW5BaUNvbXBhdGlibGVSZXBseShcbiAgICBzZXR0aW5nczogT3ZsU2V0dGluZ3MsXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBvcHRpb25zPzogeyBtb2RlbE5hbWU/OiBzdHJpbmc7IHN5c3RlbVByb21wdD86IHN0cmluZyB8IG51bGwgfVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGFwaVVybCA9IHNldHRpbmdzLmFwaVVybC50cmltKCk7XG4gICAgaWYgKCFhcGlVcmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBVUkxcdUM3NDQgXHVDMTI0XHVDODE1XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWxOYW1lID0gb3B0aW9ucz8ubW9kZWxOYW1lPy50cmltKCkgfHwgc2V0dGluZ3MubW9kZWwudHJpbSgpIHx8IFBST1ZJREVSX1BSRVNFVFMub3BlbmFpLm1vZGVsO1xuICAgIGlmICghbW9kZWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUJBQThcdUIzNzggXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5idWlsZE9wZW5BaU1lc3NhZ2VzKHNldHRpbmdzLCB0dXJucywgb3B0aW9ucz8uc3lzdGVtUHJvbXB0ID8/IG51bGwpO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgbWVzc2FnZXNcbiAgICB9O1xuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcblxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH07XG4gICAgaWYgKHNldHRpbmdzLmFwaUtleS50cmltKCkpIHtcbiAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHtzZXR0aW5ncy5hcGlLZXkudHJpbSgpfWA7XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlOiB7IHRleHQ6IHN0cmluZzsganNvbj86IHVua25vd247IHN0YXR1cz86IG51bWJlciB9O1xuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IGFwaVVybCxcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBhd2FpdCB0aGlzLmxvZyhcIm9wZW5haS1jb21wYXRpYmxlIHJlcXVlc3QgZmFpbGVkXCIsIHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgIGVycm9yOiBtZXNzYWdlXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIFx1QzY5NFx1Q0NBRCBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgaWYgKHN0YXR1cyAmJiBzdGF0dXMgPj0gNDAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmxvZyhcIm9wZW5haS1jb21wYXRpYmxlIHJlc3BvbnNlIGVycm9yXCIsIHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLnRleHRcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgXHVDNjI0XHVCOTU4OiAke3N0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJzZUpzb25SZXNwb25zZShyZXNwb25zZS50ZXh0LCByZXNwb25zZS5qc29uKTtcbiAgICBjb25zdCBjb250ZW50ID1cbiAgICAgIChkYXRhIGFzIHsgY2hvaWNlcz86IEFycmF5PHsgbWVzc2FnZT86IHsgY29udGVudD86IHN0cmluZyB9IH0+IH0pPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2VcbiAgICAgICAgPy5jb250ZW50ID8/XG4gICAgICAoZGF0YSBhcyB7IHJlcGx5Pzogc3RyaW5nIH0pPy5yZXBseSA/P1xuICAgICAgKGRhdGEgYXMgeyBjb250ZW50Pzogc3RyaW5nIH0pPy5jb250ZW50ID8/XG4gICAgICAoZGF0YSBhcyB7IG1lc3NhZ2U/OiBzdHJpbmcgfSk/Lm1lc3NhZ2U7XG5cbiAgICBpZiAoIWNvbnRlbnQgfHwgdHlwZW9mIGNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwib3BlbmFpLWNvbXBhdGlibGUgcmVzcG9uc2UgaW52YWxpZFwiLCB7IHVybDogYXBpVXJsLCByZXNwb25zZTogZGF0YSB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQudHJpbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXF1ZXN0R2VtaW5pUmVwbHkoXG4gICAgc2V0dGluZ3M6IE92bFNldHRpbmdzLFxuICAgIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10sXG4gICAgb3B0aW9ucz86IHsgbW9kZWxOYW1lPzogc3RyaW5nOyBzeXN0ZW1Qcm9tcHQ/OiBzdHJpbmcgfCBudWxsIH1cbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBhcGlLZXkgPSBzZXR0aW5ncy5hcGlLZXkudHJpbSgpO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW1pbmkgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzQgXHVDOEZDXHVDMTM4XHVDNjk0LlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RlbE5hbWUgPSBvcHRpb25zPy5tb2RlbE5hbWU/LnRyaW0oKSB8fCBzZXR0aW5ncy5tb2RlbC50cmltKCkgfHwgUFJPVklERVJfUFJFU0VUUy5nZW1pbmkubW9kZWw7XG4gICAgaWYgKCFtb2RlbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbWluaSBcdUJBQThcdUIzNzggXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IChvcHRpb25zPy5zeXN0ZW1Qcm9tcHQgPz8gc2V0dGluZ3Muc3lzdGVtUHJvbXB0KS50cmltKCk7XG4gICAgY29uc3QgY29udGVudHMgPSB0dXJucy5tYXAoKHR1cm4pID0+IHtcbiAgICAgIGNvbnN0IHJvbGUgPSB0dXJuLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgPyBcIm1vZGVsXCIgOiBcInVzZXJcIjtcbiAgICAgIGNvbnN0IHRleHQgPSB0dXJuLnJvbGUgPT09IFwic3lzdGVtXCIgPyBgW1x1QzJEQ1x1QzJBNFx1RDE1Q10gJHt0dXJuLmNvbnRlbnR9YCA6IHR1cm4uY29udGVudDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJvbGUsXG4gICAgICAgIHBhcnRzOiBbeyB0ZXh0IH1dXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgcGF5bG9hZDoge1xuICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb24/OiB7IHBhcnRzOiBBcnJheTx7IHRleHQ6IHN0cmluZyB9PiB9O1xuICAgICAgY29udGVudHM6IEFycmF5PHsgcm9sZTogc3RyaW5nOyBwYXJ0czogQXJyYXk8eyB0ZXh0OiBzdHJpbmcgfT4gfT47XG4gICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7IHJlc3BvbnNlTWltZVR5cGU6IHN0cmluZyB9O1xuICAgIH0gPSB7XG4gICAgICBjb250ZW50cyxcbiAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcbiAgICAgICAgcmVzcG9uc2VNaW1lVHlwZTogXCJ0ZXh0L3BsYWluXCJcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN5c3RlbVByb21wdCkge1xuICAgICAgcGF5bG9hZC5zeXN0ZW1JbnN0cnVjdGlvbiA9IHsgcGFydHM6IFt7IHRleHQ6IHN5c3RlbVByb21wdCB9XSB9O1xuICAgIH1cblxuICAgIC8vIEdlbWluaSBBUEkgVVJMIFx1QUQ2Q1x1QzEzMSAoQVBJIFx1RDBBNFx1Qjk3QyBcdUNGRkNcdUI5QUMgXHVEMzBDXHVCNzdDXHVCQkY4XHVEMTMwXHVCODVDIFx1QzgwNFx1QjJFQylcbiAgICBjb25zdCBhcGlVcmwgPSBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8ke21vZGVsTmFtZX06Z2VuZXJhdGVDb250ZW50P2tleT0ke2FwaUtleX1gO1xuXG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfTtcblxuICAgIGxldCByZXNwb25zZTogeyB0ZXh0OiBzdHJpbmc7IGpzb24/OiB1bmtub3duOyBzdGF0dXM/OiBudW1iZXIgfTtcbiAgICB0cnkge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwiZ2VtaW5pIHJlcXVlc3QgZmFpbGVkXCIsIHtcbiAgICAgICAgbW9kZWw6IG1vZGVsTmFtZSxcbiAgICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgICAgZXJyb3I6IG1lc3NhZ2VcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBHZW1pbmkgXHVDNjk0XHVDQ0FEIFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICBpZiAoc3RhdHVzICYmIHN0YXR1cyA+PSA0MDApIHtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwiZ2VtaW5pIHJlc3BvbnNlIGVycm9yXCIsIHtcbiAgICAgICAgbW9kZWw6IG1vZGVsTmFtZSxcbiAgICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICByZXNwb25zZTogcmVzcG9uc2UudGV4dFxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlbWluaSBBUEkgXHVDNjI0XHVCOTU4OiAke3N0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJzZUpzb25SZXNwb25zZShyZXNwb25zZS50ZXh0LCByZXNwb25zZS5qc29uKTtcbiAgICBjb25zdCB0ZXh0ID1cbiAgICAgIChkYXRhIGFzIHsgdGV4dD86IHN0cmluZyB9KT8udGV4dCA/P1xuICAgICAgKGRhdGEgYXMgeyBjYW5kaWRhdGVzPzogQXJyYXk8eyBjb250ZW50PzogeyBwYXJ0cz86IEFycmF5PHsgdGV4dD86IHN0cmluZyB9PiB9IH0+IH0pXG4gICAgICAgID8uY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0c1xuICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC50ZXh0ID8/IFwiXCIpXG4gICAgICAgIC5qb2luKFwiXCIpXG4gICAgICAgIC50cmltKCkgPz9cbiAgICAgIFwiXCI7XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwiZ2VtaW5pIHJlc3BvbnNlIGludmFsaWRcIiwgeyBtb2RlbDogbW9kZWxOYW1lLCByZXNwb25zZTogZGF0YSB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkT3BlbkFpTWVzc2FnZXMoXG4gICAgc2V0dGluZ3M6IE92bFNldHRpbmdzLFxuICAgIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10sXG4gICAgc3lzdGVtUHJvbXB0T3ZlcnJpZGU6IHN0cmluZyB8IG51bGxcbiAgKTogQXJyYXk8eyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBbXSBhcyBBcnJheTx7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0+O1xuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IHN5c3RlbVByb21wdE92ZXJyaWRlICE9PSBudWxsXG4gICAgICA/IHN5c3RlbVByb21wdE92ZXJyaWRlLnRyaW0oKVxuICAgICAgOiBzZXR0aW5ncy5zeXN0ZW1Qcm9tcHQudHJpbSgpO1xuICAgIGlmIChzeXN0ZW1Qcm9tcHQpIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdHVybiBvZiB0dXJucykge1xuICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IHR1cm4ucm9sZSwgY29udGVudDogdHVybi5jb250ZW50IH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZXM7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlSnNvblJlc3BvbnNlKHRleHQ6IHN0cmluZywganNvbj86IHVua25vd24pOiB1bmtub3duIHtcbiAgICBpZiAoanNvbikge1xuICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBcdUM3NTFcdUIyRjVcdUM3NDQgXHVENTc0XHVDMTFEXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9nKGNvbnRleHQ6IHN0cmluZywgZGV0YWlsOiB1bmtub3duKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5sb2dXcml0ZXIoY29udGV4dCwgZGV0YWlsKTtcbiAgfVxufVxuIiwgImV4cG9ydCB0eXBlIEFwaVByb3ZpZGVyID0gXCJnZW1pbmlcIiB8IFwib3BlbmFpXCIgfCBcIm9sbGFtYVwiIHwgXCJjdXN0b21cIjtcbmV4cG9ydCB0eXBlIEVtYmVkZGluZ1Byb3ZpZGVyID0gXCJnZW1pbmlcIiB8IFwib3BlbmFpXCIgfCBcImxvY2FsXCIgfCBcImN1c3RvbVwiO1xuXG5leHBvcnQgdHlwZSBPdmxTZXR0aW5ncyA9IHtcbiAgcHJvdmlkZXI6IEFwaVByb3ZpZGVyO1xuICBhcGlVcmw6IHN0cmluZztcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIG1vZGVsOiBzdHJpbmc7XG4gIHRpdGxlTW9kZWw6IHN0cmluZztcbiAgc3lzdGVtUHJvbXB0OiBzdHJpbmc7XG4gIGRlZmF1bHRPdXRwdXRGb2xkZXI6IHN0cmluZztcbiAgLy8gXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzEyNFx1QzgxNVxuICBpbmRleGluZ0VuYWJsZWQ6IGJvb2xlYW47XG4gIGNodW5rU2l6ZTogbnVtYmVyO1xuICBjaHVua092ZXJsYXA6IG51bWJlcjtcbiAgdG9wSzogbnVtYmVyO1xuICAvLyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMTI0XHVDODE1XG4gIGVtYmVkZGluZ1Byb3ZpZGVyOiBFbWJlZGRpbmdQcm92aWRlcjtcbiAgZW1iZWRkaW5nQXBpS2V5OiBzdHJpbmc7XG4gIGVtYmVkZGluZ01vZGVsOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3QgUFJPVklERVJfUFJFU0VUUzogUmVjb3JkPEFwaVByb3ZpZGVyLCB7IGFwaVVybDogc3RyaW5nOyBtb2RlbDogc3RyaW5nIH0+ID0ge1xuICBnZW1pbmk6IHtcbiAgICBhcGlVcmw6IFwiaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktMy4wLXByZXZpZXc6Z2VuZXJhdGVDb250ZW50XCIsXG4gICAgbW9kZWw6IFwiZ2VtaW5pLTMuMC1wcmV2aWV3XCJcbiAgfSxcbiAgb3BlbmFpOiB7XG4gICAgYXBpVXJsOiBcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9uc1wiLFxuICAgIG1vZGVsOiBcImdwdC00by1taW5pXCJcbiAgfSxcbiAgb2xsYW1hOiB7XG4gICAgYXBpVXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQvdjEvY2hhdC9jb21wbGV0aW9uc1wiLFxuICAgIG1vZGVsOiBcImxsYW1hMy4xXCJcbiAgfSxcbiAgY3VzdG9tOiB7XG4gICAgYXBpVXJsOiBcIlwiLFxuICAgIG1vZGVsOiBcIlwiXG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBFTUJFRERJTkdfUFJFU0VUUzogUmVjb3JkPEVtYmVkZGluZ1Byb3ZpZGVyLCB7IG1vZGVsOiBzdHJpbmc7IGFwaVVybD86IHN0cmluZyB9PiA9IHtcbiAgZ2VtaW5pOiB7XG4gICAgbW9kZWw6IFwidGV4dC1lbWJlZGRpbmctMDA0XCIsXG4gICAgYXBpVXJsOiBcImh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHNcIlxuICB9LFxuICBvcGVuYWk6IHtcbiAgICBtb2RlbDogXCJ0ZXh0LWVtYmVkZGluZy0zLXNtYWxsXCIsXG4gICAgYXBpVXJsOiBcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvZW1iZWRkaW5nc1wiXG4gIH0sXG4gIGxvY2FsOiB7XG4gICAgbW9kZWw6IFwiWGVub3ZhL2FsbC1NaW5pTE0tTDYtdjJcIlxuICB9LFxuICBjdXN0b206IHtcbiAgICBtb2RlbDogXCJcIlxuICB9XG59O1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogT3ZsU2V0dGluZ3MgPSB7XG4gIHByb3ZpZGVyOiBcImdlbWluaVwiLFxuICBhcGlVcmw6IFBST1ZJREVSX1BSRVNFVFMuZ2VtaW5pLmFwaVVybCxcbiAgYXBpS2V5OiBcIlwiLFxuICBtb2RlbDogUFJPVklERVJfUFJFU0VUUy5nZW1pbmkubW9kZWwsXG4gIHRpdGxlTW9kZWw6IFwiXCIsXG4gIHN5c3RlbVByb21wdDogXCJcIixcbiAgZGVmYXVsdE91dHB1dEZvbGRlcjogXCJcIixcbiAgLy8gXHVDNzc4XHVCMzcxXHVDMkYxIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcbiAgaW5kZXhpbmdFbmFibGVkOiBmYWxzZSxcbiAgY2h1bmtTaXplOiA0MDAsXG4gIGNodW5rT3ZlcmxhcDogNTAsXG4gIHRvcEs6IDgsXG4gIC8vIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUFFMzBcdUJDRjggXHVDMTI0XHVDODE1IChHZW1pbmkpXG4gIGVtYmVkZGluZ1Byb3ZpZGVyOiBcImdlbWluaVwiLFxuICBlbWJlZGRpbmdBcGlLZXk6IFwiXCIsXG4gIGVtYmVkZGluZ01vZGVsOiBFTUJFRERJTkdfUFJFU0VUUy5nZW1pbmkubW9kZWwsXG59O1xuIiwgImltcG9ydCB0eXBlIHsgQXBwLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGx1Z2luTG9nUGF0aChhcHA6IEFwcCwgbWFuaWZlc3Q/OiBQbHVnaW5NYW5pZmVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IHBsdWdpbklkID0gbWFuaWZlc3Q/LmlkID8/IFwib2JzaWRpYW4tdmF1bHQtbGxtXCI7XG4gIHJldHVybiBub3JtYWxpemVQYXRoKGAke2FwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvJHtwbHVnaW5JZH0vbG9nLnR4dGApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kRXJyb3JMb2coXG4gIGFwcDogQXBwLFxuICBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QgfCB1bmRlZmluZWQsXG4gIGNvbnRleHQ6IHN0cmluZyxcbiAgZGV0YWlsOiB1bmtub3duXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgbG9nUGF0aCA9IGdldFBsdWdpbkxvZ1BhdGgoYXBwLCBtYW5pZmVzdCk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgY29uc3QgZGV0YWlsVGV4dCA9IHRvU2FmZVN0cmluZyhkZXRhaWwpO1xuICBjb25zdCBlbnRyeSA9IGBcXG5bJHt0aW1lc3RhbXB9XSAke2NvbnRleHR9XFxuJHtkZXRhaWxUZXh0fVxcbmA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5leGlzdHMobG9nUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQobG9nUGF0aCk7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShsb2dQYXRoLCBgJHtlbnRyeX0ke2N1cnJlbnR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGxvZ1BhdGgsIGVudHJ5LnRyaW1TdGFydCgpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB3cml0ZSBwbHVnaW4gbG9nXCIsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtYmVkZGluZ0xvZ0RhdGEge1xuICBpbnB1dFRleHQ6IHN0cmluZztcbiAgZW1iZWRkaW5nOiBudW1iZXJbXTtcbiAgc2ltaWxhcml0eT86IG51bWJlcjsgLy8gXHVDNzc0XHVDODA0IFx1Qzc4NFx1QkNBMFx1QjUyOVx1QUNGQ1x1Qzc1OCBcdUM3MjBcdUMwQUNcdUIzQzRcbiAgcHJldmlvdXNJbnB1dFRleHQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBlbmRFbWJlZGRpbmdMb2coXG4gIGFwcDogQXBwLFxuICBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QgfCB1bmRlZmluZWQsXG4gIGRhdGE6IEVtYmVkZGluZ0xvZ0RhdGFcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBsb2dQYXRoID0gZ2V0UGx1Z2luTG9nUGF0aChhcHAsIG1hbmlmZXN0KTtcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBcbiAgLy8gXHVDNzg1XHVCODI1IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM4MDRcdUNDQjQgKFx1QUMxQ1x1RDU4OSBcdUM4MUNcdUFDNzApXG4gIGNvbnN0IGlucHV0VGV4dCA9IGRhdGEuaW5wdXRUZXh0LnJlcGxhY2UoL1xcbi9nLCAnICcpO1xuICBcbiAgLy8gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QkNBMVx1RDEzMFx1Qjk3QyBcdUFDMDRcdUIyRThcdUQ3ODggXHVENDVDXHVENjA0XG4gIGNvbnN0IGVtYmVkZGluZ0luZm8gPSBgW1x1QkNBMVx1RDEzMCBcdUNDMjhcdUM2RDA6ICR7ZGF0YS5lbWJlZGRpbmcubGVuZ3RofV1gO1xuICBcbiAgLy8gXHVDNzIwXHVDMEFDXHVCM0M0IFx1QzgxNVx1QkNGNFxuICBsZXQgc2ltaWxhcml0eUluZm8gPSAnJztcbiAgaWYgKGRhdGEuc2ltaWxhcml0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc2ltaWxhcml0eUluZm8gPSBgIHwgXHVDNzc0XHVDODA0IFx1Qzc4NFx1QkNBMFx1QjUyOVx1QUNGQ1x1Qzc1OCBcdUM3MjBcdUMwQUNcdUIzQzQ6ICR7KGRhdGEuc2ltaWxhcml0eSAqIDEwMCkudG9GaXhlZCgyKX0lYDtcbiAgfVxuICBcbiAgLy8gXHVCODVDXHVBREY4IFx1QzVENFx1RDJCOFx1QjlBQ1xuICBsZXQgZW50cnkgPSBgXFxuWyR7dGltZXN0YW1wfV0gW1x1Qzc4NFx1QkNBMFx1QjUyOV0gXHVDNzg1XHVCODI1OiBcIiR7aW5wdXRUZXh0fVwiICR7ZW1iZWRkaW5nSW5mb30ke3NpbWlsYXJpdHlJbmZvfVxcbmA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5leGlzdHMobG9nUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQobG9nUGF0aCk7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShsb2dQYXRoLCBgJHtlbnRyeX0ke2N1cnJlbnR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGxvZ1BhdGgsIGVudHJ5LnRyaW1TdGFydCgpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1x1Qzc4NFx1QkNBMFx1QjUyOSBcdUI4NUNcdUFERjhdIFx1RDMwQ1x1Qzc3QyBcdUM0RjBcdUFFMzAgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyhcbiAgYXBwOiBBcHAsXG4gIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCB8IHVuZGVmaW5lZCxcbiAgcmVhc29uOiBzdHJpbmcsXG4gIGRldGFpbHM/OiB1bmtub3duXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgbG9nUGF0aCA9IGdldFBsdWdpbkxvZ1BhdGgoYXBwLCBtYW5pZmVzdCk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgXG4gIGxldCBlbnRyeSA9IGBcXG5bJHt0aW1lc3RhbXB9XSBbXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUMyRTRcdUQzMjhdIFx1Qzc3NFx1QzcyMDogJHtyZWFzb259XFxuYDtcbiAgXG4gIGlmIChkZXRhaWxzKSB7XG4gICAgZW50cnkgKz0gYFx1QzBDMVx1QzEzODogJHt0b1NhZmVTdHJpbmcoZGV0YWlscyl9XFxuYDtcbiAgfVxuICBcbiAgZW50cnkgKz0gXCItLS1cXG5cIjtcblxuICB0cnkge1xuICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhsb2dQYXRoKTtcbiAgICBpZiAoZXhpc3RzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChsb2dQYXRoKTtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGxvZ1BhdGgsIGAke2VudHJ5fSR7Y3VycmVudH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUobG9nUGF0aCwgZW50cnkudHJpbVN0YXJ0KCkpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUMyRTRcdUQzMjggXHVCODVDXHVBREY4XSBcdUQzMENcdUM3N0MgXHVDNEYwXHVBRTMwIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG9TYWZlU3RyaW5nKGRldGFpbDogdW5rbm93bik6IHN0cmluZyB7XG4gIGlmIChkZXRhaWwgPT09IG51bGwgfHwgZGV0YWlsID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gU3RyaW5nKGRldGFpbCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXRhaWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZGV0YWlsO1xuICB9XG4gIGlmIChkZXRhaWwgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBkZXRhaWwuc3RhY2sgPz8gZGV0YWlsLm1lc3NhZ2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBzZWVuID0gbmV3IFdlYWtTZXQ8b2JqZWN0PigpO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShcbiAgICAgIGRldGFpbCxcbiAgICAgIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoc2Vlbi5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJbXHVDMjFDXHVENjU4IFx1Q0MzOFx1Qzg3MF1cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2Vlbi5hZGQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICAyXG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgXHVDOUMxXHVCODJDXHVENjU0IFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWA7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IHR5cGUgU2F2ZUNvbnZlcnNhdGlvbkZvcm0gPSB7XG4gIGlucHV0UGF0aDogc3RyaW5nO1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgb3V0cHV0Rm9sZGVyOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY2xhc3MgU2F2ZUNvbnZlcnNhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHJlYWRvbmx5IG9uU3VibWl0OiAodmFsdWU6IFNhdmVDb252ZXJzYXRpb25Gb3JtKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luLCBvblN1Ym1pdDogKHZhbHVlOiBTYXZlQ29udmVyc2F0aW9uRm9ybSkgPT4gdm9pZCkge1xuICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgfVxuXG4gIG9uT3BlbigpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJcdUIzMDBcdUQ2NTQgSlNPTiBcdUM4MDBcdUM3QTVcIiB9KTtcblxuICAgIGNvbnN0IGlucHV0UGF0aEVsID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiB9KTtcbiAgICBpbnB1dFBhdGhFbC5wbGFjZWhvbGRlciA9IFwiSlNPTiBcdUQzMENcdUM3N0MgXHVBQ0JEXHVCODVDIChcdUJDRkNcdUQyQjggXHVBRTMwXHVDOTAwKVwiO1xuXG4gICAgY29uc3Qgc2Vzc2lvbklkRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiIH0pO1xuICAgIHNlc3Npb25JZEVsLnBsYWNlaG9sZGVyID0gXCJcdUMxMzhcdUMxNTggSURcIjtcblxuICAgIGNvbnN0IG91dHB1dEZvbGRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiB9KTtcbiAgICBvdXRwdXRGb2xkZXJFbC5wbGFjZWhvbGRlciA9IFwiXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCAoXHVDMTIwXHVEMERELCBcdUJDRkNcdUQyQjggXHVBRTMwXHVDOTAwKVwiO1xuXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUM4MDBcdUM3QTVcIiB9KTtcbiAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMub25TdWJtaXQoe1xuICAgICAgICBpbnB1dFBhdGg6IGlucHV0UGF0aEVsLnZhbHVlLnRyaW0oKSxcbiAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWRFbC52YWx1ZS50cmltKCksXG4gICAgICAgIG91dHB1dEZvbGRlcjogb3V0cHV0Rm9sZGVyRWwudmFsdWUudHJpbSgpXG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgSW5kZXhpbmdQcm9ncmVzcyB9IGZyb20gXCIuLi9pbmRleGluZy90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgSW5kZXhpbmdQcm9ncmVzc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHByb2dyZXNzOiBJbmRleGluZ1Byb2dyZXNzO1xuICBwcml2YXRlIHByb2dyZXNzQmFyRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZGV0YWlsc0VsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNhbmNlbEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbkNhbmNlbDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uQ2FuY2VsPzogKCkgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wcm9ncmVzcyA9IHtcbiAgICAgIHRvdGFsRmlsZXM6IDAsXG4gICAgICBwcm9jZXNzZWRGaWxlczogMCxcbiAgICAgIHN0YXR1czogXCJpbml0aWFsaXppbmdcIixcbiAgICB9O1xuICAgIHRoaXMub25DYW5jZWwgPSBvbkNhbmNlbCB8fCBudWxsO1xuICB9XG5cbiAgb25PcGVuKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcImluZGV4aW5nLXByb2dyZXNzLW1vZGFsXCIpO1xuXG4gICAgLy8gXHVDODFDXHVCQUE5XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIlx1QkNGQ1x1RDJCOCBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDOUM0XHVENTg5IFx1QzkxMVwiIH0pO1xuXG4gICAgLy8gXHVDMEMxXHVEMERDIFx1RDE0RFx1QzJBNFx1RDJCOFxuICAgIHRoaXMuc3RhdHVzRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImluZGV4aW5nLXN0YXR1c1wiIH0pO1xuICAgIHRoaXMudXBkYXRlU3RhdHVzVGV4dCgpO1xuXG4gICAgLy8gXHVDOUM0XHVENTg5XHVCM0M0IFx1QkMxNCBcdUNFRThcdUQxNENcdUM3NzRcdUIxMDhcbiAgICBjb25zdCBwcm9ncmVzc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiaW5kZXhpbmctcHJvZ3Jlc3MtY29udGFpbmVyXCIgfSk7XG4gICAgY29uc3QgcHJvZ3Jlc3NCYXJCZyA9IHByb2dyZXNzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJpbmRleGluZy1wcm9ncmVzcy1iZ1wiIH0pO1xuICAgIHRoaXMucHJvZ3Jlc3NCYXJFbCA9IHByb2dyZXNzQmFyQmcuY3JlYXRlRGl2KHsgY2xzOiBcImluZGV4aW5nLXByb2dyZXNzLWJhclwiIH0pO1xuXG4gICAgLy8gXHVDOUM0XHVENTg5XHVCM0M0IFx1RDM3Q1x1QzEzQ1x1RDJCOFxuICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiaW5kZXhpbmctcHJvZ3Jlc3MtdGV4dFwiIH0pO1xuICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IFwiMCVcIjtcbiAgICB0aGlzLnByb2dyZXNzQmFyRWwuZGF0YXNldC50ZXh0RWwgPSBwcm9ncmVzc1RleHQuaWQgPSBcInByb2dyZXNzLXRleHRcIjtcblxuICAgIC8vIFx1QzEzOFx1QkQ4MCBcdUM4MTVcdUJDRjRcbiAgICB0aGlzLmRldGFpbHNFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiaW5kZXhpbmctZGV0YWlsc1wiIH0pO1xuICAgIHRoaXMudXBkYXRlRGV0YWlscygpO1xuXG4gICAgLy8gXHVDREU4XHVDMThDIFx1QkM4NFx1RDJCQ1xuICAgIGlmICh0aGlzLm9uQ2FuY2VsKSB7XG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImluZGV4aW5nLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcbiAgICAgIHRoaXMuY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUNERThcdUMxOENcIiB9KTtcbiAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm9uQ2FuY2VsKSB7XG4gICAgICAgICAgdGhpcy5vbkNhbmNlbCgpO1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1QzlDNFx1RDU4OVx1QjNDNCBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICovXG4gIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzOiBJbmRleGluZ1Byb2dyZXNzKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgIHRoaXMudXBkYXRlU3RhdHVzVGV4dCgpO1xuICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NCYXIoKTtcbiAgICB0aGlzLnVwZGF0ZURldGFpbHMoKTtcblxuICAgIC8vIFx1QzY0NFx1QjhDQ1x1QjQxOFx1QkE3NCBcdUM3OTBcdUIzRDlcdUM3M0NcdUI4NUMgXHVCMkVCXHVBRTMwXG4gICAgaWYgKHByb2dyZXNzLnN0YXR1cyA9PT0gXCJjb21wbGV0ZWRcIikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNsb3NlKCksIDE1MDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUMwQzFcdUQwREMgXHVEMTREXHVDMkE0XHVEMkI4IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0dXNUZXh0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdGF0dXNFbCkgcmV0dXJuO1xuXG4gICAgbGV0IHN0YXR1c1RleHQgPSBcIlwiO1xuICAgIHN3aXRjaCAodGhpcy5wcm9ncmVzcy5zdGF0dXMpIHtcbiAgICAgIGNhc2UgXCJpbml0aWFsaXppbmdcIjpcbiAgICAgICAgc3RhdHVzVGV4dCA9IFwiXHVDRDA4XHVBRTMwXHVENjU0IFx1QzkxMS4uLlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJpbmRleGluZ1wiOlxuICAgICAgICBzdGF0dXNUZXh0ID0gYFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUM5MTEuLi4gKCR7dGhpcy5wcm9ncmVzcy5wcm9jZXNzZWRGaWxlc30vJHt0aGlzLnByb2dyZXNzLnRvdGFsRmlsZXN9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNvbXBsZXRlZFwiOlxuICAgICAgICBzdGF0dXNUZXh0ID0gXCJcdUM3NzhcdUIzNzFcdUMyRjEgXHVDNjQ0XHVCOENDIVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICBzdGF0dXNUZXh0ID0gYFx1QzVEMFx1QjdFQyBcdUJDMUNcdUMwREQ6ICR7dGhpcy5wcm9ncmVzcy5lcnJvciB8fCBcIlx1QzU0QyBcdUMyMTggXHVDNUM2XHVCMjk0IFx1QzYyNFx1Qjk1OFwifWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNhbmNlbGxlZFwiOlxuICAgICAgICBzdGF0dXNUZXh0ID0gXCJcdUM3NzhcdUIzNzFcdUMyRjFcdUM3NzQgXHVDREU4XHVDMThDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0XCI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSBzdGF0dXNUZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzlDNFx1RDU4OVx1QjNDNCBcdUJDMTQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzQmFyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5wcm9ncmVzc0JhckVsKSByZXR1cm47XG5cbiAgICBjb25zdCBwZXJjZW50YWdlID1cbiAgICAgIHRoaXMucHJvZ3Jlc3MudG90YWxGaWxlcyA+IDBcbiAgICAgICAgPyBNYXRoLnJvdW5kKCh0aGlzLnByb2dyZXNzLnByb2Nlc3NlZEZpbGVzIC8gdGhpcy5wcm9ncmVzcy50b3RhbEZpbGVzKSAqIDEwMClcbiAgICAgICAgOiAwO1xuXG4gICAgdGhpcy5wcm9ncmVzc0JhckVsLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudGFnZX0lYDtcblxuICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZ3Jlc3MtdGV4dFwiKTtcbiAgICBpZiAocHJvZ3Jlc3NUZXh0KSB7XG4gICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHtwZXJjZW50YWdlfSVgO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUMxMzhcdUJEODAgXHVDODE1XHVCQ0Y0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVEZXRhaWxzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kZXRhaWxzRWwpIHJldHVybjtcblxuICAgIGxldCBkZXRhaWxzID0gXCJcIjtcbiAgICBpZiAodGhpcy5wcm9ncmVzcy5jdXJyZW50RmlsZSkge1xuICAgICAgLy8gXHVEMzBDXHVDNzdDXHVCQTg1XHVCOUNDIFx1RDQ1Q1x1QzJEQyAoXHVBQ0JEXHVCODVDIFx1QzgxQ1x1QzY3OClcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gdGhpcy5wcm9ncmVzcy5jdXJyZW50RmlsZS5zcGxpdChcIi9cIikucG9wKCkgfHwgdGhpcy5wcm9ncmVzcy5jdXJyZW50RmlsZTtcbiAgICAgIGRldGFpbHMgPSBgXHVENjA0XHVDN0FDIFx1RDMwQ1x1Qzc3QzogJHtmaWxlTmFtZX1gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9ncmVzcy5zdGF0dXMgPT09IFwiaW5pdGlhbGl6aW5nXCIpIHtcbiAgICAgIGRldGFpbHMgPSBcIlx1RDMwQ1x1Qzc3QyBcdUJBQTlcdUI4NURcdUM3NDQgXHVDMkE0XHVDRTk0XHVENTU4XHVCMjk0IFx1QzkxMS4uLlwiO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9ncmVzcy5zdGF0dXMgPT09IFwiY29tcGxldGVkXCIpIHtcbiAgICAgIGRldGFpbHMgPSBgXHVDRDFEICR7dGhpcy5wcm9ncmVzcy50b3RhbEZpbGVzfVx1QUMxQ1x1Qzc1OCBcdUQzMENcdUM3N0NcdUM3NDQgXHVDQzk4XHVCOUFDXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0YDtcbiAgICB9XG5cbiAgICB0aGlzLmRldGFpbHNFbC50ZXh0Q29udGVudCA9IGRldGFpbHM7XG4gIH1cblxuICBvbkNsb3NlKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25UdXJuIH0gZnJvbSBcIi4vY29udmVyc2F0aW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cm5zKGNvbnRlbnQ6IHN0cmluZyk6IENvbnZlcnNhdGlvblR1cm5bXSB7XG4gIGxldCBkYXRhOiB1bmtub3duO1xuICB0cnkge1xuICAgIGRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICB9IGNhdGNoIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJKU09OIFx1RDYxNVx1QzJERFx1Qzc3NCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkpTT05cdUM3NDAgXHVCQzMwXHVDNUY0XHVDNzc0XHVDNUI0XHVDNTdDIFx1RDU2OVx1QjJDOFx1QjJFNC5cIik7XG4gIH1cblxuICByZXR1cm4gZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKCFpdGVtIHx8IHR5cGVvZiBpdGVtICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1Qzc5OFx1QkFCQlx1QjQxQyBcdUQ1NkRcdUJBQTk6ICR7aW5kZXggKyAxfVx1QkM4OFx1QzlGOGApO1xuICAgIH1cblxuICAgIGNvbnN0IHJvbGUgPSAoaXRlbSBhcyB7IHJvbGU/OiBzdHJpbmcgfSkucm9sZTtcbiAgICBjb25zdCBjb250ZW50VmFsdWUgPSAoaXRlbSBhcyB7IGNvbnRlbnQ/OiBzdHJpbmcgfSkuY29udGVudDtcbiAgICBjb25zdCB0aW1lc3RhbXBWYWx1ZSA9IChpdGVtIGFzIHsgdGltZXN0YW1wPzogc3RyaW5nIH0pLnRpbWVzdGFtcDtcblxuICAgIGlmIChyb2xlICE9PSBcInVzZXJcIiAmJiByb2xlICE9PSBcImFzc2lzdGFudFwiICYmIHJvbGUgIT09IFwic3lzdGVtXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgcm9sZVx1Qzc3NCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0OiAke2luZGV4ICsgMX1cdUJDODhcdUM5RjhgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb250ZW50VmFsdWUgIT09IFwic3RyaW5nXCIgfHwgIWNvbnRlbnRWYWx1ZS50cmltKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgY29udGVudFx1QUMwMCBcdUM2MkNcdUJDMTRcdUI5NzRcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0OiAke2luZGV4ICsgMX1cdUJDODhcdUM5RjhgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnRWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wVmFsdWVcbiAgICB9O1xuICB9KTtcbn1cbiIsICJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgcmVxdWVzdFVybCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBBcGlQcm92aWRlciwgT3ZsU2V0dGluZ3MsIEVtYmVkZGluZ1Byb3ZpZGVyIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFBST1ZJREVSX1BSRVNFVFMsIEVNQkVERElOR19QUkVTRVRTIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IHR5cGUgU2V0dGluZ3NIb3N0ID0gUGx1Z2luICYge1xuICBzZXR0aW5nczogT3ZsU2V0dGluZ3M7XG4gIHNhdmVTZXR0aW5nczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgaW5kZXhWYXVsdEFsbDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgaW5kZXhOZXdGaWxlc09ubHk6ICgpID0+IFByb21pc2U8dm9pZD47XG59O1xuXG5leHBvcnQgY2xhc3MgT3ZsU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwcml2YXRlIHJlYWRvbmx5IHBsdWdpbjogU2V0dGluZ3NIb3N0O1xuICBwcml2YXRlIGdlbWluaU1vZGVsczogc3RyaW5nW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFNldHRpbmdzSG9zdCkge1xuICAgIHN1cGVyKHBsdWdpbi5hcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk9WTCBcdUMxMjRcdUM4MTVcIiB9KTtcblxuICAgIGxldCBhcGlVcmxJbnB1dDogeyBzZXRWYWx1ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xuICAgIGxldCBtb2RlbElucHV0OiB7IHNldFZhbHVlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZCB9IHwgbnVsbCA9IG51bGw7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQVBJIFx1QzgxQ1x1QUNGNVx1QzBBQ1wiKVxuICAgICAgLnNldERlc2MoXCJcdUMwQUNcdUM2QTlcdUQ1NjAgQVBJIFx1QzgxQ1x1QUNGNVx1QzBBQ1x1Qjk3QyBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuIChPbGxhbWEgXHVEM0VDXHVENTY4KVwiKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5hZGRPcHRpb25zKHtcbiAgICAgICAgICAgIGdlbWluaTogXCJHb29nbGUgR2VtaW5pXCIsXG4gICAgICAgICAgICBvcGVuYWk6IFwiT3BlbkFJIFx1RDYzOFx1RDY1OFwiLFxuICAgICAgICAgICAgb2xsYW1hOiBcIk9sbGFtYSAoXHVCODVDXHVDRUVDKVwiLFxuICAgICAgICAgICAgY3VzdG9tOiBcIlx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM5QzBcdUM4MTVcIlxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdmFsdWUgYXMgQXBpUHJvdmlkZXI7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICAgICAgY29uc3QgcHJlc2V0ID0gUFJPVklERVJfUFJFU0VUU1twcm92aWRlcl07XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlVcmwgPSBwcmVzZXQuYXBpVXJsO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwgPSBwcmVzZXQubW9kZWw7XG4gICAgICAgICAgICBhcGlVcmxJbnB1dD8uc2V0VmFsdWUocHJlc2V0LmFwaVVybCk7XG4gICAgICAgICAgICBtb2RlbElucHV0Py5zZXRWYWx1ZShwcmVzZXQubW9kZWwpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkFQSSBVUkxcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDODFDXHVBQ0Y1XHVDMEFDXHVCQ0M0IFx1Q0M0NFx1RDMwNSBcdUM1RDRcdUI0RENcdUQzRUNcdUM3NzhcdUQyQjggVVJMXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICBhcGlVcmxJbnB1dCA9IHRleHQ7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJodHRwOi8vbG9jYWxob3N0OjExNDM0L3YxL2NoYXQvY29tcGxldGlvbnNcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaVVybCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQVBJIFx1RDBBNFwiKVxuICAgICAgLnNldERlc2MoXCJcdUQ1NDRcdUM2OTRcdUQ1NUMgXHVBQ0JEXHVDNkIwIEJlYXJlciBcdUQxQTBcdUQwNzAgXHVCNjEwXHVCMjk0IFx1QzgxQ1x1QUNGNVx1QzBBQyBcdUQwQTRcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LlwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJcdUMxMjBcdUQwRERcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIgPT09IFwiZ2VtaW5pXCIpIHtcbiAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIkdlbWluaSBcdUJBQThcdUIzNzggXHVCQUE5XHVCODVEXCIpXG4gICAgICAgIC5zZXREZXNjKFwiR29vZ2xlXHVDNUQwXHVDMTFDIFx1QzgxQ1x1QUNGNVx1RDU1OFx1QjI5NCBcdUJBQThcdUIzNzhcdUM3NDQgXHVCRDg4XHVCN0VDXHVDNjQwIFx1QzEyMFx1RDBERFx1RDU2MCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKVxuICAgICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+IHtcbiAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIlx1QkFBOVx1Qjg1RCBcdUJEODhcdUI3RUNcdUM2MjRcdUFFMzBcIikub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRHZW1pbmlNb2RlbHMoKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuZ2VtaW5pTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgLnNldE5hbWUoXCJHZW1pbmkgXHVCQUE4XHVCMzc4IFx1QzEyMFx1RDBERFwiKVxuICAgICAgICAgIC5zZXREZXNjKFwiXHVCQUE5XHVCODVEXHVDNUQwIFx1QzVDNlx1QjI5NCBcdUJBQThcdUIzNzhcdUM3NDAgXHVDNTQ0XHVCNzk4XHVDNUQwXHVDMTFDIFx1QzlDMVx1QzgxMSBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuXCIpXG4gICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2VtaW5pTW9kZWxzLnJlZHVjZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PihcbiAgICAgICAgICAgICAgKGFjYywgbmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFjY1tuYW1lXSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAuYWRkT3B0aW9ucyhvcHRpb25zKVxuICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwpXG4gICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIG1vZGVsSW5wdXQ/LnNldFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1QkFBOFx1QjM3OFwiKVxuICAgICAgLnNldERlc2MoXCJcdUM4MUNcdUFDRjVcdUMwQUNcdUJDQzQgXHVCQUE4XHVCMzc4IFx1Qzc3NFx1Qjk4NCAoXHVDOUMxXHVDODExIFx1Qzc4NVx1QjgyNSBcdUFDMDBcdUIyQTUpXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICBtb2RlbElucHV0ID0gdGV4dDtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcImdwdC00by1taW5pXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUM4MUNcdUJBQTkgXHVDMEREXHVDMTMxIFx1QkFBOFx1QjM3OFwiKVxuICAgICAgLnNldERlc2MoXCJcdUMxMzhcdUMxNTgvXHVDODAwXHVDN0E1IFx1QzgxQ1x1QkFBOSBcdUMwRERcdUMxMzFcdUM1RDAgXHVDMEFDXHVDNkE5XHVENTYwIFx1QkFBOFx1QjM3OCAoXHVCRTQ0XHVDNUI0XHVDNzg4XHVDNzNDXHVCQTc0IFx1QUUzMFx1QkNGOCBcdUJBQThcdUIzNzggXHVDMEFDXHVDNkE5KVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJncHQtNG8tbWluaVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZU1vZGVsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlTW9kZWwgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUMyRENcdUMyQTRcdUQxNUMgXHVENTA0XHVCODZDXHVENTA0XHVEMkI4XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QkFBOFx1QjRFMCBcdUM2OTRcdUNDQURcdUM1RDAgXHVEM0VDXHVENTY4XHVCNDIwIFx1QzJEQ1x1QzJBNFx1RDE1QyBcdUJBNTRcdUMyRENcdUM5QzBcIilcbiAgICAgIC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIlx1QzYwODogXHVCMTA4XHVCMjk0IE9ic2lkaWFuIFx1QjlBQ1x1QzExQ1x1Q0U1OCBcdUM1QjRcdUMyRENcdUMyQTRcdUQxMzRcdUQyQjhcdUIyRTQuXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbVByb21wdClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1Qcm9tcHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1QUUzMFx1QkNGOCBcdUM4MDBcdUM3QTUgXHVEM0Y0XHVCMzU0XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QjMwMFx1RDY1NFx1Qjk3QyBcdUM4MDBcdUM3QTVcdUQ1NjAgXHVBRTMwXHVCQ0Y4IFx1RDNGNFx1QjM1NCAoXHVCQ0ZDXHVEMkI4IFx1QUUzMFx1QzkwMClcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiXHVDNjA4OiBDb252ZXJzYXRpb25zXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPdXRwdXRGb2xkZXIpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE91dHB1dEZvbGRlciA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiXHVDNzc4XHVCMzcxXHVDMkYxIFx1QkMwRiBcdUFDODBcdUMwQzkgXHVDMTI0XHVDODE1XCIgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiXHVDNzc4XHVCMzcxXHVDMkYxIFx1RDY1Q1x1QzEzMVx1RDY1NFwiKVxuICAgICAgLnNldERlc2MoXCJcdUJDRkNcdUQyQjggXHVEMzBDXHVDNzdDXHVDNzQ0IFx1Qzc3OFx1QjM3MVx1QzJGMVx1RDU1OFx1QzVFQyBcdUJDQTFcdUQxMzAgXHVBQzgwXHVDMEM5XHVDNzQ0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU2OVx1QjJDOFx1QjJFNC5cIilcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4aW5nRW5hYmxlZClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleGluZ0VuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1QzgwNFx1Q0NCNCBcdUJDRkNcdUQyQjggXHVDNzg0XHVCQ0EwXHVCNTI5XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QkNGQ1x1RDJCOFx1Qzc1OCBcdUJBQThcdUI0RTAgXHVCMTc4XHVEMkI4XHVCOTdDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJDMEYgXHVDNzc4XHVCMzcxXHVDMkYxXHVENTY5XHVCMkM4XHVCMkU0LiAoXHVDMkRDXHVBQzA0XHVDNzc0IFx1QUM3OFx1QjlCNCBcdUMyMTggXHVDNzg4XHVDNzRDKVwiKVxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvblxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiXHVDODA0XHVDQ0I0IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRENcdUM3OTFcIilcbiAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIlx1QzlDNFx1RDU4OSBcdUM5MTEuLi5cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5pbmRleFZhdWx0QWxsKCk7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdUM4MDRcdUNDQjQgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzY0NFx1QjhDQyFcIik7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIlx1QzgwNFx1Q0NCNCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkRDXHVDNzkxXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiXHVDMkUwXHVBRERDIFx1QjE3OFx1RDJCOFx1QjlDQyBcdUM3ODRcdUJDQTBcdUI1MjlcIilcbiAgICAgIC5zZXREZXNjKFwiXHVCOUM4XHVDOUMwXHVCOUM5IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUM3NzRcdUQ2QzQgXHVDMEREXHVDMTMxXHVCNDE4XHVBQzcwXHVCMDk4IFx1QzIxOFx1QzgxNVx1QjQxQyBcdUIxNzhcdUQyQjhcdUI5Q0MgXHVDNzg0XHVCQ0EwXHVCNTI5XHVENTY5XHVCMkM4XHVCMkU0LlwiKVxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvblxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiXHVDMkUwXHVBRERDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRENcdUM3OTFcIilcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIlx1QzlDNFx1RDU4OSBcdUM5MTEuLi5cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5pbmRleE5ld0ZpbGVzT25seSgpO1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiXHVDMkUwXHVBRERDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM2NDRcdUI4Q0MhXCIpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJcdUMyRTBcdUFEREMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzJEQ1x1Qzc5MVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1Q0NBRFx1RDA2QyBcdUQwNkNcdUFFMzBcIilcbiAgICAgIC5zZXREZXNjKFwiXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QkQ4NFx1RDU2MFx1RDU2MCBcdUI1NEMgXHVBQzAxIFx1Q0NBRFx1RDA2Q1x1Qzc1OCBcdUNENUNcdUIzMDAgXHVEMUEwXHVEMDcwIFx1QzIxOCAoXHVBRTMwXHVCQ0Y4OiA0MDApXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjQwMFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2h1bmtTaXplKSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaHVua1NpemUgPSBudW07XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1Q0NBRFx1RDA2QyBcdUM2MjRcdUJDODRcdUI3QTlcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDNzc4XHVDODExXHVENTVDIFx1Q0NBRFx1RDA2QyBcdUFDMDQgXHVDOTExXHVCQ0Y1XHVCNDE4XHVCMjk0IFx1RDFBMFx1RDA3MCBcdUMyMTggKFx1QUUzMFx1QkNGODogNTApXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjUwXCIpXG4gICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaHVua092ZXJsYXApKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaHVua092ZXJsYXAgPSBudW07XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1QUM4MFx1QzBDOSBcdUFDQjBcdUFDRkMgXHVDMjE4IChUb3AtSylcIilcbiAgICAgIC5zZXREZXNjKFwiXHVBQzgwXHVDMEM5IFx1QzJEQyBcdUJDMThcdUQ2NThcdUQ1NjAgXHVDRDVDXHVCMzAwIFx1QUNCMFx1QUNGQyBcdUMyMTggKFx1QUUzMFx1QkNGODogOClcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiOFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9wSykpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9wSyA9IG51bTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMTI0XHVDODE1XCIgfSk7XG5cbiAgICBsZXQgZW1iZWRkaW5nTW9kZWxJbnB1dDogeyBzZXRWYWx1ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM4MUNcdUFDRjVcdUM3OTBcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVx1QzVEMCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDODFDXHVBQ0Y1XHVDNzkwXHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NFwiKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5hZGRPcHRpb25zKHtcbiAgICAgICAgICAgIGdlbWluaTogXCJHb29nbGUgR2VtaW5pIChBUEkpXCIsXG4gICAgICAgICAgICBvcGVuYWk6IFwiT3BlbkFJIChBUEkpXCIsXG4gICAgICAgICAgICBsb2NhbDogXCJcdUI4NUNcdUNFRUMgXHVCQUE4XHVCMzc4IChIdWdnaW5nRmFjZSlcIixcbiAgICAgICAgICAgIGN1c3RvbTogXCJcdUNFRTRcdUMyQTRcdUQxNDAgQVBJXCJcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdQcm92aWRlcilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHZhbHVlIGFzIEVtYmVkZGluZ1Byb3ZpZGVyO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgICAgIGNvbnN0IHByZXNldCA9IEVNQkVERElOR19QUkVTRVRTW3Byb3ZpZGVyXTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsID0gcHJlc2V0Lm1vZGVsO1xuICAgICAgICAgICAgZW1iZWRkaW5nTW9kZWxJbnB1dD8uc2V0VmFsdWUocHJlc2V0Lm1vZGVsKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdQcm92aWRlciAhPT0gXCJsb2NhbFwiKSB7XG4gICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJcdUM3ODRcdUJDQTBcdUI1MjkgQVBJIFx1RDBBNFwiKVxuICAgICAgICAuc2V0RGVzYyhcIlx1Qzc4NFx1QkNBMFx1QjUyOSBBUEkgXHVEMEE0IChcdUJFNDRcdUM1QjRcdUM3ODhcdUM3M0NcdUJBNzQgTExNIEFQSSBcdUQwQTQgXHVDMEFDXHVDNkE5KVwiKVxuICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJcdUMxMjBcdUQwRERcIilcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdBcGlLZXkpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ0FwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJBQThcdUIzNzhcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDMEFDXHVDNkE5XHVENTYwIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJBQThcdUIzNzhcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgIGVtYmVkZGluZ01vZGVsSW5wdXQgPSB0ZXh0O1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiXHVCQUE4XHVCMzc4XHVCQTg1XCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEdlbWluaU1vZGVscygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhcGlLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkudHJpbSgpO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICBuZXcgTm90aWNlKFwiR2VtaW5pIEFQSSBcdUQwQTRcdUI5N0MgXHVCQTNDXHVDODAwIFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzP2tleT0ke2FwaUtleX1gXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uIGFzXG4gICAgICAgIHwgeyBtb2RlbHM/OiBBcnJheTx7IG5hbWU/OiBzdHJpbmc7IHN1cHBvcnRlZEdlbmVyYXRpb25NZXRob2RzPzogc3RyaW5nW10gfT4gfVxuICAgICAgICB8IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IG1vZGVscyA9IGRhdGE/Lm1vZGVscyA/PyBbXTtcbiAgICAgIHRoaXMuZ2VtaW5pTW9kZWxzID0gbW9kZWxzXG4gICAgICAgIC5maWx0ZXIoKG1vZGVsKSA9PiBtb2RlbC5zdXBwb3J0ZWRHZW5lcmF0aW9uTWV0aG9kcz8uaW5jbHVkZXMoXCJnZW5lcmF0ZUNvbnRlbnRcIikpXG4gICAgICAgIC5tYXAoKG1vZGVsKSA9PiBtb2RlbC5uYW1lKVxuICAgICAgICAuZmlsdGVyKChuYW1lKTogbmFtZSBpcyBzdHJpbmcgPT4gQm9vbGVhbihuYW1lKSk7XG5cbiAgICAgIGlmICh0aGlzLmdlbWluaU1vZGVscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1QzBBQ1x1QzZBOSBcdUFDMDBcdUIyQTVcdUQ1NUMgR2VtaW5pIFx1QkFBOFx1QjM3OFx1Qzc0NCBcdUNDM0VcdUM5QzAgXHVCQUJCXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJHZW1pbmkgXHVCQUE4XHVCMzc4IFx1QkFBOVx1Qjg1RFx1Qzc0NCBcdUJEODhcdUI3RUNcdUM2NTRcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgR2VtaW5pIFx1QkFBOFx1QjM3OCBcdUJBQTlcdUI4NUQgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25UdXJuIH0gZnJvbSBcIi4uL2NvbnZlcnNhdGlvblwiO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW5DaGF0QXBpIH0gZnJvbSBcIi4uL3BsdWdpbkFwaVwiO1xuaW1wb3J0IHsgVG9waWNTZXBhcmF0aW9uRW5naW5lIH0gZnJvbSBcIi4uL3RvcGljU2VwYXJhdGlvblwiO1xuaW1wb3J0IHsgc2F2ZVNlZ21lbnRzQXNOb3RlcyB9IGZyb20gXCIuLi90b3BpY1NlcGFyYXRpb25cIjtcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9PVkxfQ0hBVCA9IFwib3ZsLWNoYXQtdmlld1wiO1xuXG5leHBvcnQgY2xhc3MgQ2hhdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGx1Z2luOiBQbHVnaW5DaGF0QXBpO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDb252ZXJzYXRpb25UdXJuW10gPSBbXTtcbiAgcHJpdmF0ZSBtZXNzYWdlc0VsOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0RWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZW5kQnV0dG9uRWw6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2F2ZUJ1dHRvbkVsOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNlc3Npb25JZEVsOiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdXNlUmFnQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzaG93U291cmNlc0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBQbHVnaW5DaGF0QXBpKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfT1ZMX0NIQVQ7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIk9WTCBcdUIzMDBcdUQ2NTRcIjtcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJtZXNzYWdlLWNpcmNsZVwiO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcIm92bC1jaGF0LXZpZXdcIik7XG5cbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC1oZWFkZXJcIiB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC10aXRsZVwiLCB0ZXh0OiBcIk9WTCBcdUIzMDBcdUQ2NTRcIiB9KTtcblxuICAgIGNvbnN0IHNlc3Npb25XcmFwRWwgPSBoZWFkZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC1zZXNzaW9uXCIgfSk7XG4gICAgc2Vzc2lvbldyYXBFbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlx1QzgxQ1x1QkFBOVwiIH0pO1xuICAgIGNvbnN0IHNlc3Npb25JbnB1dEVsID0gc2Vzc2lvbldyYXBFbC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIgfSk7XG4gICAgc2Vzc2lvbklucHV0RWwudmFsdWUgPSB0aGlzLmJ1aWxkU2Vzc2lvbklkKCk7XG4gICAgdGhpcy5zZXNzaW9uSWRFbCA9IHNlc3Npb25JbnB1dEVsO1xuXG4gICAgY29uc3QgY29udHJvbHNFbCA9IGhlYWRlckVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm92bC1jaGF0LWNvbnRyb2xzXCIgfSk7XG4gICAgXG4gICAgLy8gUkFHIFx1QzYzNVx1QzE1OFxuICAgIGNvbnN0IHJhZ1dyYXBFbCA9IGNvbnRyb2xzRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3ZsLXJhZy1vcHRpb25zXCIgfSk7XG4gICAgY29uc3QgdXNlUmFnTGFiZWwgPSByYWdXcmFwRWwuY3JlYXRlRWwoXCJsYWJlbFwiKTtcbiAgICBjb25zdCB1c2VSYWdDaGVja2JveCA9IHVzZVJhZ0xhYmVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcImNoZWNrYm94XCIgfSk7XG4gICAgdXNlUmFnQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgdXNlUmFnTGFiZWwuYXBwZW5kVGV4dChcIiBSQUcgXHVDMEFDXHVDNkE5XCIpO1xuICAgIHRoaXMudXNlUmFnQ2hlY2tib3ggPSB1c2VSYWdDaGVja2JveDtcblxuICAgIGNvbnN0IHNob3dTb3VyY2VzTGFiZWwgPSByYWdXcmFwRWwuY3JlYXRlRWwoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBzaG93U291cmNlc0NoZWNrYm94ID0gc2hvd1NvdXJjZXNMYWJlbC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJjaGVja2JveFwiIH0pO1xuICAgIHNob3dTb3VyY2VzQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgIHNob3dTb3VyY2VzTGFiZWwuYXBwZW5kVGV4dChcIiBcdUMxOENcdUMyQTRcdUI5Q0MgXHVCQ0Y0XHVBRTMwXCIpO1xuICAgIHRoaXMuc2hvd1NvdXJjZXNDaGVja2JveCA9IHNob3dTb3VyY2VzQ2hlY2tib3g7XG5cbiAgICBjb25zdCBzYXZlQnV0dG9uRWwgPSBjb250cm9sc0VsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUM4MDBcdUM3QTVcIiwgY2xzOiBcIm92bC1jaGF0LWJ1dHRvblwiIH0pO1xuICAgIHNhdmVCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLmhhbmRsZVNhdmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLnNhdmVCdXR0b25FbCA9IHNhdmVCdXR0b25FbDtcblxuICAgIGNvbnN0IG1lc3NhZ2VzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3ZsLWNoYXQtbWVzc2FnZXNcIiB9KTtcbiAgICB0aGlzLm1lc3NhZ2VzRWwgPSBtZXNzYWdlc0VsO1xuXG4gICAgY29uc3QgaW5wdXRXcmFwRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3ZsLWNoYXQtaW5wdXRcIiB9KTtcbiAgICBjb25zdCB0ZXh0YXJlYUVsID0gaW5wdXRXcmFwRWwuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiKTtcbiAgICB0ZXh0YXJlYUVsLnBsYWNlaG9sZGVyID0gXCJcdUJBNTRcdUMyRENcdUM5QzBcdUI5N0MgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LiAoQ3RybCtFbnRlciBcdUM4MDRcdUMxQTEpXCI7XG4gICAgdGhpcy5pbnB1dEVsID0gdGV4dGFyZWFFbDtcblxuICAgIGNvbnN0IHNlbmRCdXR0b25FbCA9IGlucHV0V3JhcEVsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUM4MDRcdUMxQTFcIiwgY2xzOiBcIm92bC1jaGF0LWJ1dHRvblwiIH0pO1xuICAgIHNlbmRCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLmhhbmRsZVNlbmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLnNlbmRCdXR0b25FbCA9IHNlbmRCdXR0b25FbDtcblxuICAgIHRleHRhcmVhRWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIgJiYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdm9pZCB0aGlzLmhhbmRsZVNlbmQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csIFwiLVwiKTtcbiAgICByZXR1cm4gYHNlc3Npb24tJHtzdGFtcH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRCdXN5U3RhdGUoc3RhdGU6IHtcbiAgICBpc0J1c3k6IGJvb2xlYW47XG4gICAgc2VuZExvYWRpbmc/OiBib29sZWFuO1xuICAgIHNhdmVMb2FkaW5nPzogYm9vbGVhbjtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHNlbmRMb2FkaW5nID0gc3RhdGUuc2VuZExvYWRpbmcgPz8gZmFsc2U7XG4gICAgY29uc3Qgc2F2ZUxvYWRpbmcgPSBzdGF0ZS5zYXZlTG9hZGluZyA/PyBmYWxzZTtcblxuICAgIGlmICh0aGlzLnNlbmRCdXR0b25FbCkge1xuICAgICAgdGhpcy5zZW5kQnV0dG9uRWwuZGlzYWJsZWQgPSBzdGF0ZS5pc0J1c3k7XG4gICAgICB0aGlzLnNlbmRCdXR0b25FbC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtbG9hZGluZ1wiLCBzZW5kTG9hZGluZyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNhdmVCdXR0b25FbCkge1xuICAgICAgdGhpcy5zYXZlQnV0dG9uRWwuZGlzYWJsZWQgPSBzdGF0ZS5pc0J1c3k7XG4gICAgICB0aGlzLnNhdmVCdXR0b25FbC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtbG9hZGluZ1wiLCBzYXZlTG9hZGluZyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlucHV0RWwpIHtcbiAgICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IHN0YXRlLmlzQnVzeTtcbiAgICB9XG4gICAgaWYgKHN0YXRlLmlzQnVzeSkge1xuICAgICAgdGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoXCJvdmwtY2hhdC1idXN5XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5yZW1vdmVDbGFzcyhcIm92bC1jaGF0LWJ1c3lcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhcHBlbmRNZXNzYWdlKHR1cm46IENvbnZlcnNhdGlvblR1cm4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2godHVybik7XG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VzRWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBgb3ZsLWNoYXQtbWVzc2FnZSBvdmwtY2hhdC0ke3R1cm4ucm9sZX1gXG4gICAgfSk7XG4gICAgbWVzc2FnZUVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJvdmwtY2hhdC1yb2xlXCIsXG4gICAgICB0ZXh0OiB0aGlzLmdldFJvbGVMYWJlbCh0dXJuLnJvbGUpXG4gICAgfSk7XG4gICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJvdmwtY2hhdC1jb250ZW50IG1hcmtkb3duLXByZXZpZXctdmlldyBtYXJrZG93bi1yZW5kZXJlZFwiXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odHVybi5jb250ZW50LCBjb250ZW50RWwsIFwiXCIsIHRoaXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmYWxsYmFjayA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIGNvbnRlbnRFbC5zZXRUZXh0KGBcdUI4MENcdUIzNTRcdUI5QzEgXHVDMkU0XHVEMzI4OiAke2ZhbGxiYWNrfWApO1xuICAgIH1cbiAgICBpZiAodHVybi50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHR5cGVvZiB0dXJuLnRpbWVzdGFtcCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IHR1cm4udGltZXN0YW1wXG4gICAgICAgIDogdHVybi50aW1lc3RhbXAudG9JU09TdHJpbmcoKTtcbiAgICAgIG1lc3NhZ2VFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICAgIGNsczogXCJvdmwtY2hhdC10aW1lc3RhbXBcIixcbiAgICAgICAgdGV4dDogdGltZXN0YW1wXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0VsLnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Um9sZUxhYmVsKHJvbGU6IENvbnZlcnNhdGlvblR1cm5bXCJyb2xlXCJdKTogc3RyaW5nIHtcbiAgICBpZiAocm9sZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgIHJldHVybiBcIlx1QzBBQ1x1QzZBOVx1Qzc5MFwiO1xuICAgIH1cbiAgICBpZiAocm9sZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgcmV0dXJuIFwiXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCI7XG4gICAgfVxuICAgIHJldHVybiBcIlx1QzJEQ1x1QzJBNFx1RDE1Q1wiO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTZW5kKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbnB1dEVsPy52YWx1ZS50cmltKCkgPz8gXCJcIjtcbiAgICBpZiAoIWlucHV0KSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHVCQTU0XHVDMkRDXHVDOUMwXHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzRmlyc3RRdWVzdGlvbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoID09PSAwO1xuXG4gICAgYXdhaXQgdGhpcy5hcHBlbmRNZXNzYWdlKHtcbiAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgY29udGVudDogaW5wdXQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICAgIGlmICh0aGlzLmlucHV0RWwpIHtcbiAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKGlzRmlyc3RRdWVzdGlvbikge1xuICAgICAgdm9pZCB0aGlzLmdlbmVyYXRlU2Vzc2lvblRpdGxlRnJvbVF1ZXN0aW9uKGlucHV0KTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEJ1c3lTdGF0ZSh7IGlzQnVzeTogdHJ1ZSwgc2VuZExvYWRpbmc6IHRydWUgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZVJhZyA9IHRoaXMudXNlUmFnQ2hlY2tib3g/LmNoZWNrZWQgPz8gZmFsc2U7XG4gICAgICBjb25zdCBzaG93U291cmNlc09ubHkgPSB0aGlzLnNob3dTb3VyY2VzQ2hlY2tib3g/LmNoZWNrZWQgPz8gZmFsc2U7XG5cbiAgICAgIGxldCByZXBseTogc3RyaW5nO1xuXG4gICAgICBpZiAodXNlUmFnICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4aW5nRW5hYmxlZCkge1xuICAgICAgICAvLyBSQUcgXHVDMEFDXHVDNkE5OiBcdUFDODBcdUMwQzkgXHVENkM0IFx1Q0VFOFx1RDE0RFx1QzJBNFx1RDJCOCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gYXdhaXQgdGhpcy5wbHVnaW4uc2VhcmNoKGlucHV0KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc2hvd1NvdXJjZXNPbmx5KSB7XG4gICAgICAgICAgICAvLyBcdUMxOENcdUMyQTRcdUI5Q0MgXHVENDVDXHVDMkRDXG4gICAgICAgICAgICByZXBseSA9IHRoaXMuZm9ybWF0U2VhcmNoUmVzdWx0cyhzZWFyY2hSZXN1bHRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVBQzgwXHVDMEM5IFx1QUNCMFx1QUNGQ1x1Qjk3QyBcdUNFRThcdUQxNERcdUMyQTRcdUQyQjhcdUI4NUMgTExNXHVDNUQwIFx1QzgwNFx1QjJFQ1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuYnVpbGRDb250ZXh0KHNlYXJjaFJlc3VsdHMpO1xuICAgICAgICAgICAgY29uc3QgZW5oYW5jZWRNZXNzYWdlcyA9IHRoaXMuYnVpbGRFbmhhbmNlZE1lc3NhZ2VzKGlucHV0LCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJlcGx5ID0gYXdhaXQgdGhpcy5wbHVnaW4ucmVxdWVzdEFzc2lzdGFudFJlcGx5KGVuaGFuY2VkTWVzc2FnZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUkFHIFx1QUM4MFx1QzBDOSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiXHVBQzgwXHVDMEM5XHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU1OFx1QzVFQyBcdUM3N0NcdUJDMTggXHVCQUE4XHVCNERDXHVCODVDIFx1QzgwNFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNFwiKTtcbiAgICAgICAgICByZXBseSA9IGF3YWl0IHRoaXMucGx1Z2luLnJlcXVlc3RBc3Npc3RhbnRSZXBseSh0aGlzLm1lc3NhZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHVDNzdDXHVCQzE4IFx1QkFBOFx1QjREQ1xuICAgICAgICByZXBseSA9IGF3YWl0IHRoaXMucGx1Z2luLnJlcXVlc3RBc3Npc3RhbnRSZXBseSh0aGlzLm1lc3NhZ2VzKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5hcHBlbmRNZXNzYWdlKHtcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgY29udGVudDogcmVwbHksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1QjMwMFx1RDY1NCBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5zZXRCdXN5U3RhdGUoeyBpc0J1c3k6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRDb250ZXh0KHNlYXJjaFJlc3VsdHM6IGFueVtdKTogc3RyaW5nIHtcbiAgICBpZiAoc2VhcmNoUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBcIlx1QUQwMFx1QjgyOCBcdUJCMzhcdUMxMUNcdUI5N0MgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCI7XG4gICAgfVxuXG4gICAgbGV0IGNvbnRleHQgPSBcIlx1QjJFNFx1Qzc0Q1x1Qzc0MCBcdUFDODBcdUMwQzlcdUI0MUMgXHVBRDAwXHVCODI4IFx1QkIzOFx1QzExQ1x1QjRFNFx1Qzc4NVx1QjJDOFx1QjJFNDpcXG5cXG5cIjtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlYXJjaFJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlYXJjaFJlc3VsdHNbaV07XG4gICAgICBjb25zdCB7IGNodW5rLCBub3RlLCBzY29yZSB9ID0gcmVzdWx0O1xuICAgICAgXG4gICAgICBjb250ZXh0ICs9IGAjIyBcdUJCMzhcdUMxMUMgJHtpICsgMX06ICR7bm90ZS50aXRsZX1cXG5gO1xuICAgICAgY29udGV4dCArPSBgLSBcdUQzMENcdUM3N0M6ICR7bm90ZS5wYXRofVxcbmA7XG4gICAgICBjb250ZXh0ICs9IGAtIFx1QzEzOVx1QzE1ODogJHtjaHVuay5zZWN0aW9uIHx8IFwiXHVCQ0Y4XHVCQjM4XCJ9XFxuYDtcbiAgICAgIGNvbnRleHQgKz0gYC0gXHVDNzIwXHVDMEFDXHVCM0M0OiAkeyhzY29yZSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuXFxuYDtcbiAgICAgIGNvbnRleHQgKz0gYCR7Y2h1bmsudGV4dH1cXG5cXG5gO1xuICAgICAgY29udGV4dCArPSBcIi0tLVxcblxcblwiO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRTZWFyY2hSZXN1bHRzKHNlYXJjaFJlc3VsdHM6IGFueVtdKTogc3RyaW5nIHtcbiAgICBpZiAoc2VhcmNoUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBcIlx1QUM4MFx1QzBDOSBcdUFDQjBcdUFDRkNcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiO1xuICAgIH1cblxuICAgIGxldCBvdXRwdXQgPSBcIiMgXHVBQzgwXHVDMEM5IFx1QUNCMFx1QUNGQ1xcblxcblwiO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VhcmNoUmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gc2VhcmNoUmVzdWx0c1tpXTtcbiAgICAgIGNvbnN0IHsgY2h1bmssIG5vdGUsIHNjb3JlIH0gPSByZXN1bHQ7XG4gICAgICBcbiAgICAgIG91dHB1dCArPSBgIyMgJHtpICsgMX0uICR7bm90ZS50aXRsZX1cXG5cXG5gO1xuICAgICAgb3V0cHV0ICs9IGAqKlx1RDMwQ1x1Qzc3QyoqOiBbWyR7bm90ZS5wYXRofV1dXFxuYDtcbiAgICAgIG91dHB1dCArPSBgKipcdUMxMzlcdUMxNTgqKjogJHtjaHVuay5zZWN0aW9uIHx8IFwiXHVCQ0Y4XHVCQjM4XCJ9XFxuYDtcbiAgICAgIG91dHB1dCArPSBgKipcdUM3MjBcdUMwQUNcdUIzQzQqKjogJHsoc2NvcmUgKiAxMDApLnRvRml4ZWQoMSl9JVxcblxcbmA7XG4gICAgICBvdXRwdXQgKz0gYD4gJHtjaHVuay50ZXh0LnN1YnN0cmluZygwLCAyMDApfSR7Y2h1bmsudGV4dC5sZW5ndGggPiAyMDAgPyBcIi4uLlwiIDogXCJcIn1cXG5cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkRW5oYW5jZWRNZXNzYWdlcyhxdWVyeTogc3RyaW5nLCBjb250ZXh0OiBzdHJpbmcpOiBDb252ZXJzYXRpb25UdXJuW10ge1xuICAgIC8vIFx1QzJEQ1x1QzJBNFx1RDE1QyBcdUQ1MDRcdUI4NkNcdUQ1MDRcdUQyQjhcdUM1RDAgXHVDRUU4XHVEMTREXHVDMkE0XHVEMkI4IFx1Q0Q5NFx1QUMwMFxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBcdUIxMDhcdUIyOTQgT2JzaWRpYW4gXHVCQ0ZDXHVEMkI4XHVDNzU4IFx1QzgwNFx1QkIzOCBcdUI5QUNcdUMxMUNcdUNFNTggXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XHVCMkU0LiBcblx1QzgxQ1x1QUNGNVx1QjQxQyBcdUJCMzhcdUMxMUNcdUI0RTRcdUM3NDQgXHVDQzM4XHVBQ0UwXHVENTU4XHVDNUVDIFx1QzBBQ1x1QzZBOVx1Qzc5MFx1Qzc1OCBcdUM5QzhcdUJCMzhcdUM1RDAgXHVCMkY1XHVCQ0MwXHVENTU4XHVCNDE4LCBcdUQ1NkRcdUMwQzEgXHVDRDlDXHVDQzk4XHVCOTdDIFx1QkE4NVx1QzJEQ1x1RDU1OFx1Qjc3Qy5cblx1QkFBOFx1Qjk3NFx1QjI5NCBcdUIwQjRcdUM2QTlcdUM3NDAgXHVDRDk0XHVDRTIxXHVENTU4XHVDOUMwIFx1QjlEMFx1QUNFMCBcdUMxOTRcdUM5QzFcdUQ1NThcdUFDOEMgXHVCQUE4XHVCOTc4XHVCMkU0XHVBQ0UwIFx1QjJGNVx1QkNDMFx1RDU1OFx1Qjc3Qy5cblxuJHtjb250ZXh0fWA7XG5cbiAgICAvLyBcdUFFMzBcdUM4NzQgXHVCQTU0XHVDMkRDXHVDOUMwXHVDNUQwIFx1QzJEQ1x1QzJBNFx1RDE1QyBcdUQ1MDRcdUI4NkNcdUQ1MDRcdUQyQjggXHVDRDk0XHVBQzAwXG4gICAgcmV0dXJuIFtcbiAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogc3lzdGVtUHJvbXB0LCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9LFxuICAgICAgLi4udGhpcy5tZXNzYWdlc1xuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVNhdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMubWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHVDODAwXHVDN0E1XHVENTYwIFx1QjMwMFx1RDY1NFx1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QnVzeVN0YXRlKHsgaXNCdXN5OiB0cnVlLCBzYXZlTG9hZGluZzogdHJ1ZSB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udmVyc2F0aW9uVGl0bGUgPSBhd2FpdCB0aGlzLmdlbmVyYXRlVGl0bGVGb3JTYXZlKCk7XG4gICAgICBjb25zdCBzZXNzaW9uSWQgPSB0aGlzLnNlc3Npb25JZEVsPy52YWx1ZS50cmltKCkgPz8gXCJcIjtcbiAgICAgIGNvbnN0IGZpbmFsU2Vzc2lvbklkID0gY29udmVyc2F0aW9uVGl0bGUgfHwgc2Vzc2lvbklkO1xuICAgICAgaWYgKCFmaW5hbFNlc3Npb25JZCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiXHVDODFDXHVCQUE5XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoY29udmVyc2F0aW9uVGl0bGUgJiYgdGhpcy5zZXNzaW9uSWRFbCkge1xuICAgICAgICB0aGlzLnNlc3Npb25JZEVsLnZhbHVlID0gY29udmVyc2F0aW9uVGl0bGU7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1QzhGQ1x1QzgxQyBcdUJEODRcdUI5QUMgXHVENjVDXHVDMTMxXHVENjU0IFx1RDY1NVx1Qzc3OCAoXHVCMzAwXHVENjU0XHVBQzAwIDRcdUQxMzQgXHVDNzc0XHVDMEMxXHVDNzdDIFx1QjU0Q1x1QjlDQylcbiAgICAgIGNvbnN0IGVuYWJsZVRvcGljU2VwYXJhdGlvbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoID49IDQgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5O1xuXG4gICAgICBpZiAoZW5hYmxlVG9waWNTZXBhcmF0aW9uKSB7XG4gICAgICAgIC8vIFx1QzhGQ1x1QzgxQyBcdUJEODRcdUI5QUMgQUkgXHVDMEFDXHVDNkE5XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdUIzMDBcdUQ2NTRcdUI5N0MgXHVDOEZDXHVDODFDXHVCQ0M0XHVCODVDIFx1QkQ4NFx1QzExRFx1RDU1OFx1QjI5NCBcdUM5MTEuLi5cIik7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBUb3BpY1NlcGFyYXRpb25FbmdpbmUoe1xuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdBcGlLZXkgfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5LFxuICAgICAgICAgICAgZW1iZWRkaW5nTW9kZWw6IHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsLFxuICAgICAgICAgICAgc2ltaWxhcml0eVRocmVzaG9sZDogMC43NSxcbiAgICAgICAgICAgIG1pblNlZ21lbnRMZW5ndGg6IDIsXG4gICAgICAgICAgICB3aW5kb3dTaXplOiAyLFxuICAgICAgICAgICAgZW5hYmxlS2V5d29yZE1ldGFkYXRhOiB0cnVlLFxuICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICAgIG1hbmlmZXN0OiB0aGlzLnBsdWdpbi5tYW5pZmVzdCxcbiAgICAgICAgICAgIGVuYWJsZUVtYmVkZGluZ0xvZ2dpbmc6IHRydWVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVuZ2luZS5zZXBhcmF0ZVRvcGljcyh0aGlzLm1lc3NhZ2VzKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUM2NDRcdUI4Q0M6ICR7cmVzdWx0LnNlZ21lbnRzLmxlbmd0aH1cdUFDMUMgXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QUMxMFx1QzlDMGApO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdC5zZWdtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAvLyBcdUM1RUNcdUI3RUMgXHVDOEZDXHVDODFDXHVCODVDIFx1QkQ4NFx1QjlBQ1x1QjQyOFxuICAgICAgICAgICAgbmV3IE5vdGljZShgJHtyZXN1bHQuc2VnbWVudHMubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUM4RkNcdUM4MUNcdUI4NUMgXHVCRDg0XHVCOUFDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUM4MDBcdUM3QTUgXHVDOTExLi4uYCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG11bHRpTm90ZVJlc3VsdCA9IGF3YWl0IHNhdmVTZWdtZW50c0FzTm90ZXMoXG4gICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgICAgICAgICByZXN1bHQuc2VnbWVudHMsXG4gICAgICAgICAgICAgIHJlc3VsdC5saW5rcyxcbiAgICAgICAgICAgICAgZmluYWxTZXNzaW9uSWQsXG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPdXRwdXRGb2xkZXIsXG4gICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5tYW5pZmVzdFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgYFx1QzhGQ1x1QzgxQ1x1QkNDNFx1Qjg1QyBcdUJEODRcdUI5QUNcdUQ1NThcdUM1RUMgXHVDODAwXHVDN0E1IFx1QzY0NFx1QjhDQyFcXG4tIFx1QzhGQ1x1QzgxQyBcdUIxNzhcdUQyQjg6ICR7bXVsdGlOb3RlUmVzdWx0Lm5vdGVQYXRocy5sZW5ndGh9XHVBQzFDXFxuLSBcdUM3NzhcdUIzNzFcdUMyQTQ6ICR7bXVsdGlOb3RlUmVzdWx0Lm1haW5Ob3RlUGF0aH1gXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBlbmdpbmUuY2xlYXJDYWNoZSgpO1xuICAgICAgICAgICAgdGhpcy5yZXNldFNlc3Npb24oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVCMkU4XHVDNzdDIFx1QzhGQ1x1QzgxQ1x1Qjg1QyBcdUQzMTBcdUIyRThcdUI0MjhcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXHVCMkU4XHVDNzdDIFx1QzhGQ1x1QzgxQ1x1Qjg1QyBcdUQzMTBcdUIyRThcdUI0MThcdUM1QjQgXHVDNzdDXHVCQzE4IFx1QzgwMFx1QzdBNSBcdUMyMThcdUQ1ODlcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZW5naW5lLmNsZWFyQ2FjaGUoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUMyRTRcdUQzMjgsIFx1Qzc3Q1x1QkMxOCBcdUM4MDBcdUM3QTVcdUM3M0NcdUI4NUMgXHVDODA0XHVENjU4OlwiLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1QzhGQ1x1QzgxQyBcdUJEODRcdUI5QUMgXHVDMkU0XHVEMzI4LiBcdUM3N0NcdUJDMTggXHVCQzI5XHVDMkREXHVDNzNDXHVCODVDIFx1QzgwMFx1QzdBNVx1RDU2OVx1QjJDOFx1QjJFNC5cIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gXHVDNzdDXHVCQzE4IFx1QzgwMFx1QzdBNSAoXHVBRTMwXHVDODc0IFx1Qjg1Q1x1QzlDMSlcbiAgICAgIGNvbnN0IHN1bW1hcnlQcm9tcHQgPSB0aGlzLmJ1aWxkV2lraVN1bW1hcnlQcm9tcHQodGhpcy5tZXNzYWdlcyk7XG4gICAgICBsZXQgc3VtbWFyeSA9IGF3YWl0IHRoaXMucGx1Z2luLnJlcXVlc3RBc3Npc3RhbnRSZXBseShbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBzdW1tYXJ5UHJvbXB0LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgc3VtbWFyeSA9IHRoaXMuY2xlYW5TdW1tYXJ5KHN1bW1hcnkpO1xuXG4gICAgICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyhcbiAgICAgICAgZmluYWxTZXNzaW9uSWQsXG4gICAgICAgIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgY29udGVudDogc3VtbWFyeSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0T3V0cHV0Rm9sZGVyXG4gICAgICApO1xuICAgICAgbmV3IE5vdGljZShgXHVDNzA0XHVEMEE0IFx1QzY5NFx1QzU3RCBcdUM4MDBcdUM3QTUgXHVDNjQ0XHVCOENDOiAke3RhcmdldFBhdGh9YCk7XG4gICAgICB0aGlzLnJlc2V0U2Vzc2lvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnNldEJ1c3lTdGF0ZSh7IGlzQnVzeTogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXNldFNlc3Npb24oKTogdm9pZCB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIGlmICh0aGlzLm1lc3NhZ2VzRWwpIHtcbiAgICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pbnB1dEVsKSB7XG4gICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXNzaW9uSWRFbCkge1xuICAgICAgdGhpcy5zZXNzaW9uSWRFbC52YWx1ZSA9IHRoaXMuYnVpbGRTZXNzaW9uSWQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkV2lraVN1bW1hcnlQcm9tcHQodHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSk6IHN0cmluZyB7XG4gICAgY29uc3QgdHJhbnNjcmlwdCA9IHR1cm5zXG4gICAgICAubWFwKCh0dXJuKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvbGVMYWJlbCA9XG4gICAgICAgICAgdHVybi5yb2xlID09PSBcInVzZXJcIiA/IFwiXHVDMEFDXHVDNkE5XHVDNzkwXCIgOlxuICAgICAgICAgIHR1cm4ucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwiXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCIgOlxuICAgICAgICAgIFwiXHVDMkRDXHVDMkE0XHVEMTVDXCI7XG4gICAgICAgIHJldHVybiBgWyR7cm9sZUxhYmVsfV0gJHt0dXJuLmNvbnRlbnR9YDtcbiAgICAgIH0pXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBgXHVCMkU0XHVDNzRDIFx1QjMwMFx1RDY1NFx1Qjk3QyBcdUM3MDRcdUQwQTQgXHVENjE1XHVDMkREXHVDNzU4IFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUJDRjhcdUJCMzhcdUM3M0NcdUI4NUMgXHVDODE1XHVCOUFDXHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cXG5cXG5gICtcbiAgICAgIGBcdUNEOUNcdUI4MjUgXHVENjE1XHVDMkREKFx1QkNGOFx1QkIzOFx1QjlDQyk6XFxuYCArXG4gICAgICBgIyBcdUM4MUNcdUJBQTlcXG5gICtcbiAgICAgIGAjIyBcdUM2OTRcdUM1N0RcXG5gICtcbiAgICAgIGAjIyBcdUQ1NzVcdUMyRUMgXHVDOEZDXHVDODFDXFxuYCArXG4gICAgICBgIyMgXHVBQ0IwXHVDODE1IFx1QzBBQ1x1RDU2RFxcbmAgK1xuICAgICAgYCMjIFx1QzU2MVx1QzE1OCBcdUM1NDRcdUM3NzRcdUQxNUNcXG5gICtcbiAgICAgIGAjIyBcdUM1RjRcdUI5QjAgXHVDOUM4XHVCQjM4XFxuXFxuYCArXG4gICAgICBgXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxcbmAgK1xuICAgICAgYC0gXHVDNzA0IFx1RDYxNVx1QzJERFx1Qzc0NCBcdUM5QzBcdUNGMUNcdUMxMUMgXHVBRDZDXHVDODcwXHVDODAxXHVDNzNDXHVCODVDIFx1Qzc5MVx1QzEzMVxcbmAgK1xuICAgICAgYC0gXHVBQzAwXHVCMkE1XHVENTVDIFx1QUNCRFx1QzZCMCBcdUJBQTlcdUI4NURcdUFDRkMgXHVENDVDIFx1QzBBQ1x1QzZBOVxcbmAgK1xuICAgICAgYC0gXHVENTVDXHVBRDZEXHVDNUI0XHVCODVDIFx1Qzc5MVx1QzEzMVxcbmAgK1xuICAgICAgYC0gXCJcdUM1QjRcdUMyRENcdUMyQTRcdUQxMzRcdUQyQjhcIi9cdUQwQzBcdUM3ODRcdUMyQTRcdUQwRUNcdUQ1MDQvXHVDMTFDXHVCQjM4L1x1QzEyNFx1QkE4NS9cdUMwQUNcdUM4NzEgXHVDNUM2XHVDNzc0IFx1QkNGOFx1QkIzOFx1QjlDQyBcdUNEOUNcdUI4MjVcXG5cXG5gICtcbiAgICAgIGBcdUIzMDBcdUQ2NTQgXHVBRTMwXHVCODVEOlxcbiR7dHJhbnNjcmlwdH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhblN1bW1hcnkoc3VtbWFyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lcyA9IHN1bW1hcnkuc3BsaXQoXCJcXG5cIik7XG4gICAgY29uc3QgY2xlYW5lZCA9IFtdIGFzIHN0cmluZ1tdO1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICB3aGlsZSAoaW5kZXggPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpbmRleF0udHJpbSgpO1xuICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcIiMjIFx1RDgzRVx1REQxNlwiKSB8fCBsaW5lLnN0YXJ0c1dpdGgoXCIjIyBcdUM1QjRcdUMyRENcdUMyQTRcdUQxMzRcdUQyQjhcIikpIHtcbiAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgd2hpbGUgKGluZGV4IDwgbGluZXMubGVuZ3RoICYmIGxpbmVzW2luZGV4XS50cmltKCkuc3RhcnRzV2l0aChcIipcIikpIHtcbiAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGxpbmVzLmxlbmd0aCAmJiBsaW5lc1tpbmRleF0udHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJcdUIyRTRcdUM3NENcdUM3NDAgXCIpICYmIGxpbmUuaW5jbHVkZXMoXCJcdUM2OTRcdUM1N0RcIikpIHtcbiAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgd2hpbGUgKGluZGV4IDwgbGluZXMubGVuZ3RoICYmIGxpbmVzW2luZGV4XS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY2xlYW5lZC5wdXNoKGxpbmVzW2luZGV4XSk7XG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNlc3Npb25UaXRsZUZyb21RdWVzdGlvbihxdWVzdGlvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNlc3Npb25JZEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbXB0ID1cbiAgICAgIFwiXHVCMkU0XHVDNzRDIFx1QzlDOFx1QkIzOFx1Qzc0NCBcdUJDRjRcdUFDRTAgXHVDMTM4XHVDMTU4IFx1QzgxQ1x1QkFBOVx1Qzc0NCBcdUI5Q0NcdUI0RTRcdUM1QjQgXHVDOEZDXHVDMTM4XHVDNjk0LiBcIiArXG4gICAgICBcIlx1Qzg3MFx1QUM3NDogMTJ+MjBcdUM3OTAgXHVCMEI0XHVDNjc4XHVDNzU4IFx1QUMwNFx1QUNCMFx1RDU1QyBcdUM4MUNcdUJBQTksIFx1Qzc3NFx1QkFBOFx1QzlDMC9cdUI1MzBcdUM2MzRcdUQ0NUMgXHVBRTA4XHVDOUMwLCBcdUM4MUNcdUJBQTlcdUI5Q0MgXHVDRDlDXHVCODI1LlxcblxcblwiICtcbiAgICAgIGBcdUM5QzhcdUJCMzg6ICR7cXVlc3Rpb259YDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aXRsZSA9IGF3YWl0IHRoaXMucGx1Z2luLnJlcXVlc3RUaXRsZVJlcGx5KHByb21wdCk7XG4gICAgICBjb25zdCBjbGVhbmVkID0gdGhpcy5jbGVhblRpdGxlKHRpdGxlKTtcbiAgICAgIGlmIChjbGVhbmVkKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkRWwudmFsdWUgPSBjbGVhbmVkO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVDMTM4XHVDMTU4IFx1QzgxQ1x1QkFBOSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRpdGxlRm9yU2F2ZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRyYW5zY3JpcHQgPSB0aGlzLm1lc3NhZ2VzXG4gICAgICAubWFwKCh0dXJuKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvbGVMYWJlbCA9XG4gICAgICAgICAgdHVybi5yb2xlID09PSBcInVzZXJcIiA/IFwiXHVDMEFDXHVDNkE5XHVDNzkwXCIgOlxuICAgICAgICAgIHR1cm4ucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwiXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCIgOlxuICAgICAgICAgIFwiXHVDMkRDXHVDMkE0XHVEMTVDXCI7XG4gICAgICAgIHJldHVybiBgWyR7cm9sZUxhYmVsfV0gJHt0dXJuLmNvbnRlbnR9YDtcbiAgICAgIH0pXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIGNvbnN0IHByb21wdCA9XG4gICAgICBcIlx1QjJFNFx1Qzc0QyBcdUIzMDBcdUQ2NTQgXHVCMEI0XHVDNkE5XHVDNzQ0IFx1QkNGNFx1QUNFMCBcdUJCMzhcdUM3QTVcdUQ2MTUgXHVDODFDXHVCQUE5XHVDNzQ0IFx1QjlDQ1x1QjRFNFx1QzVCNCBcdUM4RkNcdUMxMzhcdUM2OTQuIFwiICtcbiAgICAgIFwiXHVDODcwXHVBQzc0OiAyMH40MFx1Qzc5MCBcdUIwQjRcdUM2NzgsIFx1Qzc3NFx1QkFBOFx1QzlDMC9cdUI1MzBcdUM2MzRcdUQ0NUMgXHVBRTA4XHVDOUMwLCBcdUM4MUNcdUJBQTlcdUI5Q0MgXHVDRDlDXHVCODI1LlxcblxcblwiICtcbiAgICAgIGBcdUIzMDBcdUQ2NTQ6XFxuJHt0cmFuc2NyaXB0fWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5yZXF1ZXN0VGl0bGVSZXBseShwcm9tcHQpO1xuICAgICAgcmV0dXJuIHRoaXMuY2xlYW5UaXRsZSh0aXRsZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdUM4MDBcdUM3QTVcdUM2QTkgXHVDODFDXHVCQUE5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2xlYW5UaXRsZSh0aXRsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGl0bGVcbiAgICAgIC5yZXBsYWNlKC9bXCInYF0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgICAgLnRyaW0oKTtcbiAgfVxufVxuIiwgIi8qKlxuICogXHVEMEE0XHVDNkNDXHVCNERDIFx1Q0Q5NFx1Q0Q5QyBcdUJBQThcdUI0QzhcbiAqIFxuICogXHVENTVDXHVBRDZEXHVDNUI0IFx1RDE0RFx1QzJBNFx1RDJCOFx1QzVEMFx1QzExQyBcdUQ1NzVcdUMyRUMgXHVEMEE0XHVDNkNDXHVCNERDXHVCOTdDIFx1Q0Q5NFx1Q0Q5Q1x1RDU2OVx1QjJDOFx1QjJFNC5cbiAqIGtpd2ktcmVzY3JpcHRcdUFDMDAgTm9kZS5qcyBcdUQ2NThcdUFDQkRcdUM1RDBcdUMxMUMgXHVCM0Q5XHVDNzkxXHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0NCBcdUMyMTggXHVDNzg4XHVDNzNDXHVCQkMwXHVCODVDLFxuICogXHVCMzAwXHVDNTQ4XHVDNzNDXHVCODVDIFx1QUMwNFx1QjJFOFx1RDU1QyBcdUFERENcdUNFNTkgXHVBRTMwXHVCQzE4IFx1RDBBNFx1QzZDQ1x1QjREQyBcdUNEOTRcdUNEOUNcdUM3NDQgXHVBRDZDXHVENjA0XHVENTY5XHVCMkM4XHVCMkU0LlxuICovXG5cbi8qKlxuICogXHVEMTREXHVDMkE0XHVEMkI4XHVDNUQwXHVDMTFDIFx1RDBBNFx1QzZDQ1x1QjREQ1x1Qjk3QyBcdUNEOTRcdUNEOUNcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqIEBwYXJhbSB0ZXh0IFx1Qzc4NVx1QjgyNSBcdUQxNERcdUMyQTRcdUQyQjhcbiAqIEByZXR1cm5zIFx1Q0Q5NFx1Q0Q5Q1x1QjQxQyBcdUQwQTRcdUM2Q0NcdUI0REMgXHVCQzMwXHVDNUY0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gXHVBRTMwXHVCQ0Y4IFx1QzgwNFx1Q0M5OFx1QjlBQzogXHVEMkI5XHVDMjE4XHVCQjM4XHVDNzkwIFx1QzgxQ1x1QUM3MCBcdUJDMEYgXHVDMThDXHVCQjM4XHVDNzkwIFx1QkNDMFx1RDY1OFxuICBjb25zdCBjbGVhbmVkID0gdGV4dFxuICAgIC5yZXBsYWNlKC9bXlxcd1xcc1x1MzEzMS1cdTMxNEVcdTMxNEYtXHUzMTYzXHVBQzAwLVx1RDdBM10vZywgJyAnKVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnRyaW0oKTtcblxuICAvLyBcdUIyRThcdUM1QjQgXHVCRDg0XHVCOUFDXG4gIGNvbnN0IHdvcmRzID0gY2xlYW5lZC5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMSk7XG5cbiAgLy8gXHVCRDg4XHVDNkE5XHVDNUI0IFx1QzgxQ1x1QUM3MCAoXHVENTVDXHVBRDZEXHVDNUI0IFx1Qzc3Q1x1QkMxOFx1QzgwMVx1Qzc3OCBcdUJEODhcdUM2QTlcdUM1QjQpXG4gIGNvbnN0IHN0b3BXb3JkcyA9IG5ldyBTZXQoW1xuICAgICdcdUM3NzQnLCAnXHVBREY4JywgJ1x1QzgwMCcsICdcdUFDODMnLCAnXHVDMjE4JywgJ1x1QjRGMScsICdcdUI0RTQnLCAnXHVCQzBGJywgJ1x1Qzc0NCcsICdcdUI5N0MnLCAnXHVDNzc0XHVCOTdDJywgJ1x1QURGOFx1Qjk3QycsICdcdUM4MDBcdUI5N0MnLFxuICAgICdcdUM3NDAnLCAnXHVCMjk0JywgJ1x1Qzc3NFx1QjI5NCcsICdcdUFERjhcdUIyOTQnLCAnXHVDODAwXHVCMjk0JywgJ1x1QUMwMCcsICdcdUM1RDAnLCAnXHVDNzU4JywgJ1x1Qjg1QycsICdcdUM3M0NcdUI4NUMnLCAnXHVDNUQwXHVDMTFDJywgJ1x1QzY0MCcsICdcdUFDRkMnLFxuICAgICdcdUQ1NThcdUIyRTQnLCAnXHVDNzg4XHVCMkU0JywgJ1x1QjQxOFx1QjJFNCcsICdcdUM1NEFcdUIyRTQnLCAnXHVDNUM2XHVCMkU0JywgJ1x1QUMxOVx1QjJFNCcsICdcdUM3NzRcdUIyRTQnLCAnXHVDNTQ0XHVCMkM4XHVCMkU0JyxcbiAgICAnXHVENTU4XHVCMjk0JywgJ1x1Qzc4OFx1QjI5NCcsICdcdUI0MThcdUIyOTQnLCAnXHVENTU4XHVBQ0UwJywgJ1x1Qzc4OFx1QUNFMCcsICdcdUI0MThcdUFDRTAnLCAnXHVENTVDJywgJ1x1RDU1OFx1QkE3MCcsICdcdUM3ODhcdUM3M0NcdUJBNzAnLFxuICAgICdcdUQ1NjAnLCAnXHVDNzg4XHVDNzQ0JywgJ1x1QjQyMCcsICdcdUQ1NjlcdUIyQzhcdUIyRTQnLCAnXHVDNzg1XHVCMkM4XHVCMkU0JywgJ1x1QzJCNVx1QjJDOFx1QjJFNCcsXG4gICAgJ1x1QURGOFx1QjlBQ1x1QUNFMCcsICdcdUFERjhcdUI3RUNcdUIwOTgnLCAnXHVENTU4XHVDOUMwXHVCOUNDJywgJ1x1QjYxMFx1RDU1QycsICdcdUI2MTAnLCAnXHVCQzBGJywgJ1x1QjRGMScsXG4gICAgJ1x1QjU0Q1x1QkIzOCcsICdcdUFDQkRcdUM2QjAnLCAnXHVEMUI1XHVENTc0JywgJ1x1QjMwMFx1RDU1QycsICdcdUM3MDRcdUQ1NUMnLCAnXHVBRDAwXHVENTVDJywgJ1x1QjUzMFx1Qjk3OCcsXG4gICAgJ1x1QUM4MycsICdcdUM4MTAnLCAnXHVCNTRDJywgJ1x1QzkxMScsICdcdUIwQjQnLCAnXHVDNjc4J1xuICBdKTtcblxuICBjb25zdCBmaWx0ZXJlZCA9IHdvcmRzLmZpbHRlcih3b3JkID0+ICFzdG9wV29yZHMuaGFzKHdvcmQpICYmIHdvcmQubGVuZ3RoID49IDIpO1xuXG4gIC8vIFx1QkU0OFx1QjNDNFx1QzIxOCBcdUFDQzRcdUMwQjBcbiAgY29uc3QgZnJlcXVlbmN5ID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgZm9yIChjb25zdCB3b3JkIG9mIGZpbHRlcmVkKSB7XG4gICAgZnJlcXVlbmN5LnNldCh3b3JkLCAoZnJlcXVlbmN5LmdldCh3b3JkKSB8fCAwKSArIDEpO1xuICB9XG5cbiAgLy8gXHVCRTQ4XHVCM0M0XHVDMjFDXHVDNzNDXHVCODVDIFx1QzgxNVx1QjgyQ1x1RDU1OFx1QzVFQyBcdUMwQzFcdUM3MDQgXHVEMEE0XHVDNkNDXHVCNERDIFx1QkMxOFx1RDY1OFxuICBjb25zdCBzb3J0ZWQgPSBBcnJheS5mcm9tKGZyZXF1ZW5jeS5lbnRyaWVzKCkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKVxuICAgIC5tYXAoKFt3b3JkXSkgPT4gd29yZCk7XG5cbiAgLy8gXHVDRDVDXHVCMzAwIDEwXHVBQzFDXHVBRTRDXHVDOUMwIFx1QkMxOFx1RDY1OFxuICByZXR1cm4gc29ydGVkLnNsaWNlKDAsIDEwKTtcbn1cblxuLyoqXG4gKiBcdUM1RUNcdUI3RUMgXHVEMTREXHVDMkE0XHVEMkI4XHVDNUQwXHVDMTFDIFx1QUNGNVx1RDFCNSBcdUQwQTRcdUM2Q0NcdUI0RENcdUI5N0MgXHVDRDk0XHVDRDlDXHVENTY5XHVCMkM4XHVCMkU0XG4gKiBAcGFyYW0gdGV4dHMgXHVEMTREXHVDMkE0XHVEMkI4IFx1QkMzMFx1QzVGNFxuICogQHJldHVybnMgXHVBQ0Y1XHVEMUI1IFx1RDBBNFx1QzZDQ1x1QjREQyBcdUJDMzBcdUM1RjRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RDb21tb25LZXl3b3Jkcyh0ZXh0czogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gIGlmICh0ZXh0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBcdUFDMDEgXHVEMTREXHVDMkE0XHVEMkI4XHVDNzU4IFx1RDBBNFx1QzZDQ1x1QjREQyBcdUNEOTRcdUNEOUNcbiAgY29uc3QgYWxsS2V5d29yZFNldHMgPSB0ZXh0cy5tYXAodGV4dCA9PiBuZXcgU2V0KGV4dHJhY3RLZXl3b3Jkcyh0ZXh0KSkpO1xuXG4gIGlmIChhbGxLZXl3b3JkU2V0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBcdUJBQThcdUI0RTAgXHVEMTREXHVDMkE0XHVEMkI4XHVDNUQwIFx1QUNGNVx1RDFCNVx1QzczQ1x1Qjg1QyBcdUI0RjFcdUM3QTVcdUQ1NThcdUIyOTQgXHVEMEE0XHVDNkNDXHVCNERDIFx1Q0MzRVx1QUUzMFxuICBjb25zdCBjb21tb25LZXl3b3Jkczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgZmlyc3RTZXQgPSBhbGxLZXl3b3JkU2V0c1swXTtcblxuICBmb3IgKGNvbnN0IGtleXdvcmQgb2YgZmlyc3RTZXQpIHtcbiAgICBpZiAoYWxsS2V5d29yZFNldHMuZXZlcnkoc2V0ID0+IHNldC5oYXMoa2V5d29yZCkpKSB7XG4gICAgICBjb21tb25LZXl3b3Jkcy5wdXNoKGtleXdvcmQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb21tb25LZXl3b3Jkcztcbn1cblxuLyoqXG4gKiBcdUQwQTRcdUM2Q0NcdUI0RENcdUI5N0MgXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUQzRUNcdUI5RjdcdUQzMDVcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqIEBwYXJhbSBrZXl3b3JkcyBcdUQwQTRcdUM2Q0NcdUI0REMgXHVCQzMwXHVDNUY0XG4gKiBAcmV0dXJucyBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCQjM4XHVDNzkwXHVDNUY0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRLZXl3b3Jkc01ldGFkYXRhKGtleXdvcmRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIGlmIChrZXl3b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIGBbS2V5d29yZHM6ICR7a2V5d29yZHMuam9pbignLCAnKX1dYDtcbn1cbiIsICIvKipcbiAqIENvbnRhaW5zIHRoZSBsaXN0IG9mIE9wZW5BUEkgZGF0YSB0eXBlc1xuICogYXMgZGVmaW5lZCBieSBodHRwczovL3N3YWdnZXIuaW8vZG9jcy9zcGVjaWZpY2F0aW9uL2RhdGEtbW9kZWxzL2RhdGEtdHlwZXMvXG4gKiBAcHVibGljXG4gKi9cbnZhciBTY2hlbWFUeXBlO1xuKGZ1bmN0aW9uIChTY2hlbWFUeXBlKSB7XG4gICAgLyoqIFN0cmluZyB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJTVFJJTkdcIl0gPSBcInN0cmluZ1wiO1xuICAgIC8qKiBOdW1iZXIgdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiTlVNQkVSXCJdID0gXCJudW1iZXJcIjtcbiAgICAvKiogSW50ZWdlciB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJJTlRFR0VSXCJdID0gXCJpbnRlZ2VyXCI7XG4gICAgLyoqIEJvb2xlYW4gdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiQk9PTEVBTlwiXSA9IFwiYm9vbGVhblwiO1xuICAgIC8qKiBBcnJheSB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJBUlJBWVwiXSA9IFwiYXJyYXlcIjtcbiAgICAvKiogT2JqZWN0IHR5cGUuICovXG4gICAgU2NoZW1hVHlwZVtcIk9CSkVDVFwiXSA9IFwib2JqZWN0XCI7XG59KShTY2hlbWFUeXBlIHx8IChTY2hlbWFUeXBlID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQHB1YmxpY1xuICovXG52YXIgRXhlY3V0YWJsZUNvZGVMYW5ndWFnZTtcbihmdW5jdGlvbiAoRXhlY3V0YWJsZUNvZGVMYW5ndWFnZSkge1xuICAgIEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2VbXCJMQU5HVUFHRV9VTlNQRUNJRklFRFwiXSA9IFwibGFuZ3VhZ2VfdW5zcGVjaWZpZWRcIjtcbiAgICBFeGVjdXRhYmxlQ29kZUxhbmd1YWdlW1wiUFlUSE9OXCJdID0gXCJweXRob25cIjtcbn0pKEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2UgfHwgKEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2UgPSB7fSkpO1xuLyoqXG4gKiBQb3NzaWJsZSBvdXRjb21lcyBvZiBjb2RlIGV4ZWN1dGlvbi5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIE91dGNvbWU7XG4oZnVuY3Rpb24gKE91dGNvbWUpIHtcbiAgICAvKipcbiAgICAgKiBVbnNwZWNpZmllZCBzdGF0dXMuIFRoaXMgdmFsdWUgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICAgICAqL1xuICAgIE91dGNvbWVbXCJPVVRDT01FX1VOU1BFQ0lGSUVEXCJdID0gXCJvdXRjb21lX3Vuc3BlY2lmaWVkXCI7XG4gICAgLyoqXG4gICAgICogQ29kZSBleGVjdXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgKi9cbiAgICBPdXRjb21lW1wiT1VUQ09NRV9PS1wiXSA9IFwib3V0Y29tZV9va1wiO1xuICAgIC8qKlxuICAgICAqIENvZGUgZXhlY3V0aW9uIGZpbmlzaGVkIGJ1dCB3aXRoIGEgZmFpbHVyZS4gYHN0ZGVycmAgc2hvdWxkIGNvbnRhaW4gdGhlXG4gICAgICogcmVhc29uLlxuICAgICAqL1xuICAgIE91dGNvbWVbXCJPVVRDT01FX0ZBSUxFRFwiXSA9IFwib3V0Y29tZV9mYWlsZWRcIjtcbiAgICAvKipcbiAgICAgKiBDb2RlIGV4ZWN1dGlvbiByYW4gZm9yIHRvbyBsb25nLCBhbmQgd2FzIGNhbmNlbGxlZC4gVGhlcmUgbWF5IG9yIG1heSBub3RcbiAgICAgKiBiZSBhIHBhcnRpYWwgb3V0cHV0IHByZXNlbnQuXG4gICAgICovXG4gICAgT3V0Y29tZVtcIk9VVENPTUVfREVBRExJTkVfRVhDRUVERURcIl0gPSBcIm91dGNvbWVfZGVhZGxpbmVfZXhjZWVkZWRcIjtcbn0pKE91dGNvbWUgfHwgKE91dGNvbWUgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQb3NzaWJsZSByb2xlcy5cbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgUE9TU0lCTEVfUk9MRVMgPSBbXCJ1c2VyXCIsIFwibW9kZWxcIiwgXCJmdW5jdGlvblwiLCBcInN5c3RlbVwiXTtcbi8qKlxuICogSGFybSBjYXRlZ29yaWVzIHRoYXQgd291bGQgY2F1c2UgcHJvbXB0cyBvciBjYW5kaWRhdGVzIHRvIGJlIGJsb2NrZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBIYXJtQ2F0ZWdvcnk7XG4oZnVuY3Rpb24gKEhhcm1DYXRlZ29yeSkge1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIl0gPSBcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIjtcbiAgICBIYXJtQ2F0ZWdvcnlbXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCJdID0gXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9TRVhVQUxMWV9FWFBMSUNJVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9TRVhVQUxMWV9FWFBMSUNJVFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfSEFSQVNTTUVOVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9IQVJBU1NNRU5UXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfQ0lWSUNfSU5URUdSSVRZXCJdID0gXCJIQVJNX0NBVEVHT1JZX0NJVklDX0lOVEVHUklUWVwiO1xufSkoSGFybUNhdGVnb3J5IHx8IChIYXJtQ2F0ZWdvcnkgPSB7fSkpO1xuLyoqXG4gKiBUaHJlc2hvbGQgYWJvdmUgd2hpY2ggYSBwcm9tcHQgb3IgY2FuZGlkYXRlIHdpbGwgYmUgYmxvY2tlZC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEhhcm1CbG9ja1RocmVzaG9sZDtcbihmdW5jdGlvbiAoSGFybUJsb2NrVGhyZXNob2xkKSB7XG4gICAgLyoqIFRocmVzaG9sZCBpcyB1bnNwZWNpZmllZC4gKi9cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJIQVJNX0JMT0NLX1RIUkVTSE9MRF9VTlNQRUNJRklFRFwiXSA9IFwiSEFSTV9CTE9DS19USFJFU0hPTERfVU5TUEVDSUZJRURcIjtcbiAgICAvKiogQ29udGVudCB3aXRoIE5FR0xJR0lCTEUgd2lsbCBiZSBhbGxvd2VkLiAqL1xuICAgIEhhcm1CbG9ja1RocmVzaG9sZFtcIkJMT0NLX0xPV19BTkRfQUJPVkVcIl0gPSBcIkJMT0NLX0xPV19BTkRfQUJPVkVcIjtcbiAgICAvKiogQ29udGVudCB3aXRoIE5FR0xJR0lCTEUgYW5kIExPVyB3aWxsIGJlIGFsbG93ZWQuICovXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiQkxPQ0tfTUVESVVNX0FORF9BQk9WRVwiXSA9IFwiQkxPQ0tfTUVESVVNX0FORF9BQk9WRVwiO1xuICAgIC8qKiBDb250ZW50IHdpdGggTkVHTElHSUJMRSwgTE9XLCBhbmQgTUVESVVNIHdpbGwgYmUgYWxsb3dlZC4gKi9cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJCTE9DS19PTkxZX0hJR0hcIl0gPSBcIkJMT0NLX09OTFlfSElHSFwiO1xuICAgIC8qKiBBbGwgY29udGVudCB3aWxsIGJlIGFsbG93ZWQuICovXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiQkxPQ0tfTk9ORVwiXSA9IFwiQkxPQ0tfTk9ORVwiO1xufSkoSGFybUJsb2NrVGhyZXNob2xkIHx8IChIYXJtQmxvY2tUaHJlc2hvbGQgPSB7fSkpO1xuLyoqXG4gKiBQcm9iYWJpbGl0eSB0aGF0IGEgcHJvbXB0IG9yIGNhbmRpZGF0ZSBtYXRjaGVzIGEgaGFybSBjYXRlZ29yeS5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEhhcm1Qcm9iYWJpbGl0eTtcbihmdW5jdGlvbiAoSGFybVByb2JhYmlsaXR5KSB7XG4gICAgLyoqIFByb2JhYmlsaXR5IGlzIHVuc3BlY2lmaWVkLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIkhBUk1fUFJPQkFCSUxJVFlfVU5TUEVDSUZJRURcIl0gPSBcIkhBUk1fUFJPQkFCSUxJVFlfVU5TUEVDSUZJRURcIjtcbiAgICAvKiogQ29udGVudCBoYXMgYSBuZWdsaWdpYmxlIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuICovXG4gICAgSGFybVByb2JhYmlsaXR5W1wiTkVHTElHSUJMRVwiXSA9IFwiTkVHTElHSUJMRVwiO1xuICAgIC8qKiBDb250ZW50IGhhcyBhIGxvdyBjaGFuY2Ugb2YgYmVpbmcgdW5zYWZlLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIkxPV1wiXSA9IFwiTE9XXCI7XG4gICAgLyoqIENvbnRlbnQgaGFzIGEgbWVkaXVtIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuICovXG4gICAgSGFybVByb2JhYmlsaXR5W1wiTUVESVVNXCJdID0gXCJNRURJVU1cIjtcbiAgICAvKiogQ29udGVudCBoYXMgYSBoaWdoIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuICovXG4gICAgSGFybVByb2JhYmlsaXR5W1wiSElHSFwiXSA9IFwiSElHSFwiO1xufSkoSGFybVByb2JhYmlsaXR5IHx8IChIYXJtUHJvYmFiaWxpdHkgPSB7fSkpO1xuLyoqXG4gKiBSZWFzb24gdGhhdCBhIHByb21wdCB3YXMgYmxvY2tlZC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEJsb2NrUmVhc29uO1xuKGZ1bmN0aW9uIChCbG9ja1JlYXNvbikge1xuICAgIC8vIEEgYmxvY2tlZCByZWFzb24gd2FzIG5vdCBzcGVjaWZpZWQuXG4gICAgQmxvY2tSZWFzb25bXCJCTE9DS0VEX1JFQVNPTl9VTlNQRUNJRklFRFwiXSA9IFwiQkxPQ0tFRF9SRUFTT05fVU5TUEVDSUZJRURcIjtcbiAgICAvLyBDb250ZW50IHdhcyBibG9ja2VkIGJ5IHNhZmV0eSBzZXR0aW5ncy5cbiAgICBCbG9ja1JlYXNvbltcIlNBRkVUWVwiXSA9IFwiU0FGRVRZXCI7XG4gICAgLy8gQ29udGVudCB3YXMgYmxvY2tlZCwgYnV0IHRoZSByZWFzb24gaXMgdW5jYXRlZ29yaXplZC5cbiAgICBCbG9ja1JlYXNvbltcIk9USEVSXCJdID0gXCJPVEhFUlwiO1xufSkoQmxvY2tSZWFzb24gfHwgKEJsb2NrUmVhc29uID0ge30pKTtcbi8qKlxuICogUmVhc29uIHRoYXQgYSBjYW5kaWRhdGUgZmluaXNoZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBGaW5pc2hSZWFzb247XG4oZnVuY3Rpb24gKEZpbmlzaFJlYXNvbikge1xuICAgIC8vIERlZmF1bHQgdmFsdWUuIFRoaXMgdmFsdWUgaXMgdW51c2VkLlxuICAgIEZpbmlzaFJlYXNvbltcIkZJTklTSF9SRUFTT05fVU5TUEVDSUZJRURcIl0gPSBcIkZJTklTSF9SRUFTT05fVU5TUEVDSUZJRURcIjtcbiAgICAvLyBOYXR1cmFsIHN0b3AgcG9pbnQgb2YgdGhlIG1vZGVsIG9yIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UuXG4gICAgRmluaXNoUmVhc29uW1wiU1RPUFwiXSA9IFwiU1RPUFwiO1xuICAgIC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgYXMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLlxuICAgIEZpbmlzaFJlYXNvbltcIk1BWF9UT0tFTlNcIl0gPSBcIk1BWF9UT0tFTlNcIjtcbiAgICAvLyBUaGUgY2FuZGlkYXRlIGNvbnRlbnQgd2FzIGZsYWdnZWQgZm9yIHNhZmV0eSByZWFzb25zLlxuICAgIEZpbmlzaFJlYXNvbltcIlNBRkVUWVwiXSA9IFwiU0FGRVRZXCI7XG4gICAgLy8gVGhlIGNhbmRpZGF0ZSBjb250ZW50IHdhcyBmbGFnZ2VkIGZvciByZWNpdGF0aW9uIHJlYXNvbnMuXG4gICAgRmluaXNoUmVhc29uW1wiUkVDSVRBVElPTlwiXSA9IFwiUkVDSVRBVElPTlwiO1xuICAgIC8vIFRoZSBjYW5kaWRhdGUgY29udGVudCB3YXMgZmxhZ2dlZCBmb3IgdXNpbmcgYW4gdW5zdXBwb3J0ZWQgbGFuZ3VhZ2UuXG4gICAgRmluaXNoUmVhc29uW1wiTEFOR1VBR0VcIl0gPSBcIkxBTkdVQUdFXCI7XG4gICAgLy8gVG9rZW4gZ2VuZXJhdGlvbiBzdG9wcGVkIGJlY2F1c2UgdGhlIGNvbnRlbnQgY29udGFpbnMgZm9yYmlkZGVuIHRlcm1zLlxuICAgIEZpbmlzaFJlYXNvbltcIkJMT0NLTElTVFwiXSA9IFwiQkxPQ0tMSVNUXCI7XG4gICAgLy8gVG9rZW4gZ2VuZXJhdGlvbiBzdG9wcGVkIGZvciBwb3RlbnRpYWxseSBjb250YWluaW5nIHByb2hpYml0ZWQgY29udGVudC5cbiAgICBGaW5pc2hSZWFzb25bXCJQUk9ISUJJVEVEX0NPTlRFTlRcIl0gPSBcIlBST0hJQklURURfQ09OVEVOVFwiO1xuICAgIC8vIFRva2VuIGdlbmVyYXRpb24gc3RvcHBlZCBiZWNhdXNlIHRoZSBjb250ZW50IHBvdGVudGlhbGx5IGNvbnRhaW5zIFNlbnNpdGl2ZSBQZXJzb25hbGx5IElkZW50aWZpYWJsZSBJbmZvcm1hdGlvbiAoU1BJSSkuXG4gICAgRmluaXNoUmVhc29uW1wiU1BJSVwiXSA9IFwiU1BJSVwiO1xuICAgIC8vIFRoZSBmdW5jdGlvbiBjYWxsIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgaXMgaW52YWxpZC5cbiAgICBGaW5pc2hSZWFzb25bXCJNQUxGT1JNRURfRlVOQ1RJT05fQ0FMTFwiXSA9IFwiTUFMRk9STUVEX0ZVTkNUSU9OX0NBTExcIjtcbiAgICAvLyBVbmtub3duIHJlYXNvbi5cbiAgICBGaW5pc2hSZWFzb25bXCJPVEhFUlwiXSA9IFwiT1RIRVJcIjtcbn0pKEZpbmlzaFJlYXNvbiB8fCAoRmluaXNoUmVhc29uID0ge30pKTtcbi8qKlxuICogVGFzayB0eXBlIGZvciBlbWJlZGRpbmcgY29udGVudC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIFRhc2tUeXBlO1xuKGZ1bmN0aW9uIChUYXNrVHlwZSkge1xuICAgIFRhc2tUeXBlW1wiVEFTS19UWVBFX1VOU1BFQ0lGSUVEXCJdID0gXCJUQVNLX1RZUEVfVU5TUEVDSUZJRURcIjtcbiAgICBUYXNrVHlwZVtcIlJFVFJJRVZBTF9RVUVSWVwiXSA9IFwiUkVUUklFVkFMX1FVRVJZXCI7XG4gICAgVGFza1R5cGVbXCJSRVRSSUVWQUxfRE9DVU1FTlRcIl0gPSBcIlJFVFJJRVZBTF9ET0NVTUVOVFwiO1xuICAgIFRhc2tUeXBlW1wiU0VNQU5USUNfU0lNSUxBUklUWVwiXSA9IFwiU0VNQU5USUNfU0lNSUxBUklUWVwiO1xuICAgIFRhc2tUeXBlW1wiQ0xBU1NJRklDQVRJT05cIl0gPSBcIkNMQVNTSUZJQ0FUSU9OXCI7XG4gICAgVGFza1R5cGVbXCJDTFVTVEVSSU5HXCJdID0gXCJDTFVTVEVSSU5HXCI7XG59KShUYXNrVHlwZSB8fCAoVGFza1R5cGUgPSB7fSkpO1xuLyoqXG4gKiBAcHVibGljXG4gKi9cbnZhciBGdW5jdGlvbkNhbGxpbmdNb2RlO1xuKGZ1bmN0aW9uIChGdW5jdGlvbkNhbGxpbmdNb2RlKSB7XG4gICAgLy8gVW5zcGVjaWZpZWQgZnVuY3Rpb24gY2FsbGluZyBtb2RlLiBUaGlzIHZhbHVlIHNob3VsZCBub3QgYmUgdXNlZC5cbiAgICBGdW5jdGlvbkNhbGxpbmdNb2RlW1wiTU9ERV9VTlNQRUNJRklFRFwiXSA9IFwiTU9ERV9VTlNQRUNJRklFRFwiO1xuICAgIC8vIERlZmF1bHQgbW9kZWwgYmVoYXZpb3IsIG1vZGVsIGRlY2lkZXMgdG8gcHJlZGljdCBlaXRoZXIgYSBmdW5jdGlvbiBjYWxsXG4gICAgLy8gb3IgYSBuYXR1cmFsIGxhbmd1YWdlIHJlcHNwb3NlLlxuICAgIEZ1bmN0aW9uQ2FsbGluZ01vZGVbXCJBVVRPXCJdID0gXCJBVVRPXCI7XG4gICAgLy8gTW9kZWwgaXMgY29uc3RyYWluZWQgdG8gYWx3YXlzIHByZWRpY3RpbmcgYSBmdW5jdGlvbiBjYWxsIG9ubHkuXG4gICAgLy8gSWYgXCJhbGxvd2VkX2Z1bmN0aW9uX25hbWVzXCIgYXJlIHNldCwgdGhlIHByZWRpY3RlZCBmdW5jdGlvbiBjYWxsIHdpbGwgYmVcbiAgICAvLyBsaW1pdGVkIHRvIGFueSBvbmUgb2YgXCJhbGxvd2VkX2Z1bmN0aW9uX25hbWVzXCIsIGVsc2UgdGhlIHByZWRpY3RlZFxuICAgIC8vIGZ1bmN0aW9uIGNhbGwgd2lsbCBiZSBhbnkgb25lIG9mIHRoZSBwcm92aWRlZCBcImZ1bmN0aW9uX2RlY2xhcmF0aW9uc1wiLlxuICAgIEZ1bmN0aW9uQ2FsbGluZ01vZGVbXCJBTllcIl0gPSBcIkFOWVwiO1xuICAgIC8vIE1vZGVsIHdpbGwgbm90IHByZWRpY3QgYW55IGZ1bmN0aW9uIGNhbGwuIE1vZGVsIGJlaGF2aW9yIGlzIHNhbWUgYXMgd2hlblxuICAgIC8vIG5vdCBwYXNzaW5nIGFueSBmdW5jdGlvbiBkZWNsYXJhdGlvbnMuXG4gICAgRnVuY3Rpb25DYWxsaW5nTW9kZVtcIk5PTkVcIl0gPSBcIk5PTkVcIjtcbn0pKEZ1bmN0aW9uQ2FsbGluZ01vZGUgfHwgKEZ1bmN0aW9uQ2FsbGluZ01vZGUgPSB7fSkpO1xuLyoqXG4gKiBUaGUgbW9kZSBvZiB0aGUgcHJlZGljdG9yIHRvIGJlIHVzZWQgaW4gZHluYW1pYyByZXRyaWV2YWwuXG4gKiBAcHVibGljXG4gKi9cbnZhciBEeW5hbWljUmV0cmlldmFsTW9kZTtcbihmdW5jdGlvbiAoRHluYW1pY1JldHJpZXZhbE1vZGUpIHtcbiAgICAvLyBVbnNwZWNpZmllZCBmdW5jdGlvbiBjYWxsaW5nIG1vZGUuIFRoaXMgdmFsdWUgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICAgIER5bmFtaWNSZXRyaWV2YWxNb2RlW1wiTU9ERV9VTlNQRUNJRklFRFwiXSA9IFwiTU9ERV9VTlNQRUNJRklFRFwiO1xuICAgIC8vIFJ1biByZXRyaWV2YWwgb25seSB3aGVuIHN5c3RlbSBkZWNpZGVzIGl0IGlzIG5lY2Vzc2FyeS5cbiAgICBEeW5hbWljUmV0cmlldmFsTW9kZVtcIk1PREVfRFlOQU1JQ1wiXSA9IFwiTU9ERV9EWU5BTUlDXCI7XG59KShEeW5hbWljUmV0cmlldmFsTW9kZSB8fCAoRHluYW1pY1JldHJpZXZhbE1vZGUgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBCYXNpYyBlcnJvciB0eXBlIGZvciB0aGlzIFNESy5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihgW0dvb2dsZUdlbmVyYXRpdmVBSSBFcnJvcl06ICR7bWVzc2FnZX1gKTtcbiAgICB9XG59XG4vKipcbiAqIEVycm9ycyBpbiB0aGUgY29udGVudHMgb2YgYSByZXNwb25zZSBmcm9tIHRoZSBtb2RlbC4gVGhpcyBpbmNsdWRlcyBwYXJzaW5nXG4gKiBlcnJvcnMsIG9yIHJlc3BvbnNlcyBpbmNsdWRpbmcgYSBzYWZldHkgYmxvY2sgcmVhc29uLlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yIGV4dGVuZHMgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHJlc3BvbnNlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciBjbGFzcyBjb3ZlcmluZyBIVFRQIGVycm9ycyB3aGVuIGNhbGxpbmcgdGhlIHNlcnZlci4gSW5jbHVkZXMgSFRUUFxuICogc3RhdHVzLCBzdGF0dXNUZXh0LCBhbmQgb3B0aW9uYWwgZGV0YWlscywgaWYgcHJvdmlkZWQgaW4gdGhlIHNlcnZlciByZXNwb25zZS5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJRmV0Y2hFcnJvciBleHRlbmRzIEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXMsIHN0YXR1c1RleHQsIGVycm9yRGV0YWlscykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuc3RhdHVzVGV4dCA9IHN0YXR1c1RleHQ7XG4gICAgICAgIHRoaXMuZXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3JzIGluIHRoZSBjb250ZW50cyBvZiBhIHJlcXVlc3Qgb3JpZ2luYXRpbmcgZnJvbSB1c2VyIGlucHV0LlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvciBleHRlbmRzIEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSByZXF1ZXN0IGlzIGFib3J0ZWQsIGVpdGhlciBkdWUgdG8gYSB0aW1lb3V0IG9yXG4gKiBpbnRlbnRpb25hbCBjYW5jZWxsYXRpb24gYnkgdGhlIHVzZXIuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSUFib3J0RXJyb3IgZXh0ZW5kcyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciB7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBERUZBVUxUX0JBU0VfVVJMID0gXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiO1xuY29uc3QgREVGQVVMVF9BUElfVkVSU0lPTiA9IFwidjFiZXRhXCI7XG4vKipcbiAqIFdlIGNhbid0IGByZXF1aXJlYCBwYWNrYWdlLmpzb24gaWYgdGhpcyBydW5zIG9uIHdlYi4gV2Ugd2lsbCB1c2Ugcm9sbHVwIHRvXG4gKiBzd2FwIGluIHRoZSB2ZXJzaW9uIG51bWJlciBoZXJlIGF0IGJ1aWxkIHRpbWUuXG4gKi9cbmNvbnN0IFBBQ0tBR0VfVkVSU0lPTiA9IFwiMC4yNC4xXCI7XG5jb25zdCBQQUNLQUdFX0xPR19IRUFERVIgPSBcImdlbmFpLWpzXCI7XG52YXIgVGFzaztcbihmdW5jdGlvbiAoVGFzaykge1xuICAgIFRhc2tbXCJHRU5FUkFURV9DT05URU5UXCJdID0gXCJnZW5lcmF0ZUNvbnRlbnRcIjtcbiAgICBUYXNrW1wiU1RSRUFNX0dFTkVSQVRFX0NPTlRFTlRcIl0gPSBcInN0cmVhbUdlbmVyYXRlQ29udGVudFwiO1xuICAgIFRhc2tbXCJDT1VOVF9UT0tFTlNcIl0gPSBcImNvdW50VG9rZW5zXCI7XG4gICAgVGFza1tcIkVNQkVEX0NPTlRFTlRcIl0gPSBcImVtYmVkQ29udGVudFwiO1xuICAgIFRhc2tbXCJCQVRDSF9FTUJFRF9DT05URU5UU1wiXSA9IFwiYmF0Y2hFbWJlZENvbnRlbnRzXCI7XG59KShUYXNrIHx8IChUYXNrID0ge30pKTtcbmNsYXNzIFJlcXVlc3RVcmwge1xuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSwgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnRhc2sgPSB0YXNrO1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMucmVxdWVzdE9wdGlvbnMgPSByZXF1ZXN0T3B0aW9ucztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAoKF9hID0gdGhpcy5yZXF1ZXN0T3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwaVZlcnNpb24pIHx8IERFRkFVTFRfQVBJX1ZFUlNJT047XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSAoKF9iID0gdGhpcy5yZXF1ZXN0T3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJhc2VVcmwpIHx8IERFRkFVTFRfQkFTRV9VUkw7XG4gICAgICAgIGxldCB1cmwgPSBgJHtiYXNlVXJsfS8ke2FwaVZlcnNpb259LyR7dGhpcy5tb2RlbH06JHt0aGlzLnRhc2t9YDtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICB1cmwgKz0gXCI/YWx0PXNzZVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxufVxuLyoqXG4gKiBTaW1wbGUsIGJ1dCBtYXkgYmVjb21lIG1vcmUgY29tcGxleCBpZiB3ZSBhZGQgbW9yZSB2ZXJzaW9ucyB0byBsb2cuXG4gKi9cbmZ1bmN0aW9uIGdldENsaWVudEhlYWRlcnMocmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCBjbGllbnRIZWFkZXJzID0gW107XG4gICAgaWYgKHJlcXVlc3RPcHRpb25zID09PSBudWxsIHx8IHJlcXVlc3RPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0T3B0aW9ucy5hcGlDbGllbnQpIHtcbiAgICAgICAgY2xpZW50SGVhZGVycy5wdXNoKHJlcXVlc3RPcHRpb25zLmFwaUNsaWVudCk7XG4gICAgfVxuICAgIGNsaWVudEhlYWRlcnMucHVzaChgJHtQQUNLQUdFX0xPR19IRUFERVJ9LyR7UEFDS0FHRV9WRVJTSU9OfWApO1xuICAgIHJldHVybiBjbGllbnRIZWFkZXJzLmpvaW4oXCIgXCIpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0SGVhZGVycyh1cmwpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIGhlYWRlcnMuYXBwZW5kKFwieC1nb29nLWFwaS1jbGllbnRcIiwgZ2V0Q2xpZW50SGVhZGVycyh1cmwucmVxdWVzdE9wdGlvbnMpKTtcbiAgICBoZWFkZXJzLmFwcGVuZChcIngtZ29vZy1hcGkta2V5XCIsIHVybC5hcGlLZXkpO1xuICAgIGxldCBjdXN0b21IZWFkZXJzID0gKF9hID0gdXJsLnJlcXVlc3RPcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY3VzdG9tSGVhZGVycztcbiAgICBpZiAoY3VzdG9tSGVhZGVycykge1xuICAgICAgICBpZiAoIShjdXN0b21IZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tSGVhZGVycyA9IG5ldyBIZWFkZXJzKGN1c3RvbUhlYWRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoYHVuYWJsZSB0byBjb252ZXJ0IGN1c3RvbUhlYWRlcnMgdmFsdWUgJHtKU09OLnN0cmluZ2lmeShjdXN0b21IZWFkZXJzKX0gdG8gSGVhZGVyczogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWVdIG9mIGN1c3RvbUhlYWRlcnMuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSA9PT0gXCJ4LWdvb2ctYXBpLWtleVwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKGBDYW5ub3Qgc2V0IHJlc2VydmVkIGhlYWRlciBuYW1lICR7aGVhZGVyTmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUgPT09IFwieC1nb29nLWFwaS1jbGllbnRcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcihgSGVhZGVyIG5hbWUgJHtoZWFkZXJOYW1lfSBjYW4gb25seSBiZSBzZXQgdXNpbmcgdGhlIGFwaUNsaWVudCBmaWVsZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXJzO1xufVxuYXN5bmMgZnVuY3Rpb24gY29uc3RydWN0TW9kZWxSZXF1ZXN0KG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSwgYm9keSwgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgUmVxdWVzdFVybChtb2RlbCwgdGFzaywgYXBpS2V5LCBzdHJlYW0sIHJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmw6IHVybC50b1N0cmluZygpLFxuICAgICAgICBmZXRjaE9wdGlvbnM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYnVpbGRGZXRjaE9wdGlvbnMocmVxdWVzdE9wdGlvbnMpKSwgeyBtZXRob2Q6IFwiUE9TVFwiLCBoZWFkZXJzOiBhd2FpdCBnZXRIZWFkZXJzKHVybCksIGJvZHkgfSksXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIHRhc2ssIGFwaUtleSwgc3RyZWFtLCBib2R5LCByZXF1ZXN0T3B0aW9ucyA9IHt9LCBcbi8vIEFsbG93cyB0aGlzIHRvIGJlIHN0dWJiZWQgZm9yIHRlc3RzXG5mZXRjaEZuID0gZmV0Y2gpIHtcbiAgICBjb25zdCB7IHVybCwgZmV0Y2hPcHRpb25zIH0gPSBhd2FpdCBjb25zdHJ1Y3RNb2RlbFJlcXVlc3QobW9kZWwsIHRhc2ssIGFwaUtleSwgc3RyZWFtLCBib2R5LCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIG1ha2VSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zLCBmZXRjaEZuKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zLCBmZXRjaEZuID0gZmV0Y2gpIHtcbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEZuKHVybCwgZmV0Y2hPcHRpb25zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaGFuZGxlUmVzcG9uc2VFcnJvcihlLCB1cmwpO1xuICAgIH1cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlTm90T2socmVzcG9uc2UsIHVybCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbn1cbmZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlRXJyb3IoZSwgdXJsKSB7XG4gICAgbGV0IGVyciA9IGU7XG4gICAgaWYgKGVyci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xuICAgICAgICBlcnIgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJQWJvcnRFcnJvcihgUmVxdWVzdCBhYm9ydGVkIHdoZW4gZmV0Y2hpbmcgJHt1cmwudG9TdHJpbmcoKX06ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICBlcnIuc3RhY2sgPSBlLnN0YWNrO1xuICAgIH1cbiAgICBlbHNlIGlmICghKGUgaW5zdGFuY2VvZiBHb29nbGVHZW5lcmF0aXZlQUlGZXRjaEVycm9yIHx8XG4gICAgICAgIGUgaW5zdGFuY2VvZiBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcikpIHtcbiAgICAgICAgZXJyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBFcnJvciBmZXRjaGluZyBmcm9tICR7dXJsLnRvU3RyaW5nKCl9OiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgZXJyLnN0YWNrID0gZS5zdGFjaztcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2VOb3RPayhyZXNwb25zZSwgdXJsKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xuICAgIGxldCBlcnJvckRldGFpbHM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgbWVzc2FnZSA9IGpzb24uZXJyb3IubWVzc2FnZTtcbiAgICAgICAgaWYgKGpzb24uZXJyb3IuZGV0YWlscykge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgICR7SlNPTi5zdHJpbmdpZnkoanNvbi5lcnJvci5kZXRhaWxzKX1gO1xuICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0ganNvbi5lcnJvci5kZXRhaWxzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlnbm9yZWRcbiAgICB9XG4gICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUZldGNoRXJyb3IoYEVycm9yIGZldGNoaW5nIGZyb20gJHt1cmwudG9TdHJpbmcoKX06IFske3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fV0gJHttZXNzYWdlfWAsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwgZXJyb3JEZXRhaWxzKTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSByZXF1ZXN0IG9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSBmZXRjaCBBUEkuXG4gKiBAcGFyYW0gcmVxdWVzdE9wdGlvbnMgLSBUaGUgdXNlci1kZWZpbmVkIHJlcXVlc3Qgb3B0aW9ucy5cbiAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgcmVxdWVzdCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBidWlsZEZldGNoT3B0aW9ucyhyZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IHt9O1xuICAgIGlmICgocmVxdWVzdE9wdGlvbnMgPT09IG51bGwgfHwgcmVxdWVzdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3RPcHRpb25zLnNpZ25hbCkgIT09IHVuZGVmaW5lZCB8fCAocmVxdWVzdE9wdGlvbnMgPT09IG51bGwgfHwgcmVxdWVzdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3RPcHRpb25zLnRpbWVvdXQpID49IDApIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgaWYgKChyZXF1ZXN0T3B0aW9ucyA9PT0gbnVsbCB8fCByZXF1ZXN0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdE9wdGlvbnMudGltZW91dCkgPj0gMCkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHJlcXVlc3RPcHRpb25zLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXF1ZXN0T3B0aW9ucyA9PT0gbnVsbCB8fCByZXF1ZXN0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdE9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmZXRjaE9wdGlvbnMuc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG4gICAgfVxuICAgIHJldHVybiBmZXRjaE9wdGlvbnM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFkZHMgY29udmVuaWVuY2UgaGVscGVyIG1ldGhvZHMgdG8gYSByZXNwb25zZSBvYmplY3QsIGluY2x1ZGluZyBzdHJlYW1cbiAqIGNodW5rcyAoYXMgbG9uZyBhcyBlYWNoIGNodW5rIGlzIGEgY29tcGxldGUgR2VuZXJhdGVDb250ZW50UmVzcG9uc2UgSlNPTikuXG4gKi9cbmZ1bmN0aW9uIGFkZEhlbHBlcnMocmVzcG9uc2UpIHtcbiAgICByZXNwb25zZS50ZXh0ID0gKCkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcyAmJiByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoaXMgcmVzcG9uc2UgaGFkICR7cmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGh9IGAgK1xuICAgICAgICAgICAgICAgICAgICBgY2FuZGlkYXRlcy4gUmV0dXJuaW5nIHRleHQgZnJvbSB0aGUgZmlyc3QgY2FuZGlkYXRlIG9ubHkuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgQWNjZXNzIHJlc3BvbnNlLmNhbmRpZGF0ZXMgZGlyZWN0bHkgdG8gdXNlIHRoZSBvdGhlciBjYW5kaWRhdGVzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihyZXNwb25zZS5jYW5kaWRhdGVzWzBdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGV4dChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UucHJvbXB0RmVlZGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGBUZXh0IG5vdCBhdmFpbGFibGUuICR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRPRE86IHJlbW92ZSBhdCBuZXh0IG1ham9yIHZlcnNpb25cbiAgICAgKi9cbiAgICByZXNwb25zZS5mdW5jdGlvbkNhbGwgPSAoKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzICYmIHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhpcyByZXNwb25zZSBoYWQgJHtyZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aH0gYCArXG4gICAgICAgICAgICAgICAgICAgIGBjYW5kaWRhdGVzLiBSZXR1cm5pbmcgZnVuY3Rpb24gY2FsbHMgZnJvbSB0aGUgZmlyc3QgY2FuZGlkYXRlIG9ubHkuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgQWNjZXNzIHJlc3BvbnNlLmNhbmRpZGF0ZXMgZGlyZWN0bHkgdG8gdXNlIHRoZSBvdGhlciBjYW5kaWRhdGVzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihyZXNwb25zZS5jYW5kaWRhdGVzWzBdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHJlc3BvbnNlLmZ1bmN0aW9uQ2FsbCgpIGlzIGRlcHJlY2F0ZWQuIGAgK1xuICAgICAgICAgICAgICAgIGBVc2UgcmVzcG9uc2UuZnVuY3Rpb25DYWxscygpIGluc3RlYWQuYCk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0RnVuY3Rpb25DYWxscyhyZXNwb25zZSlbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UucHJvbXB0RmVlZGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGBGdW5jdGlvbiBjYWxsIG5vdCBhdmFpbGFibGUuICR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmVzcG9uc2UuZnVuY3Rpb25DYWxscyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMgJiYgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGlzIHJlc3BvbnNlIGhhZCAke3Jlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RofSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNhbmRpZGF0ZXMuIFJldHVybmluZyBmdW5jdGlvbiBjYWxscyBmcm9tIHRoZSBmaXJzdCBjYW5kaWRhdGUgb25seS4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBBY2Nlc3MgcmVzcG9uc2UuY2FuZGlkYXRlcyBkaXJlY3RseSB0byB1c2UgdGhlIG90aGVyIGNhbmRpZGF0ZXMuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFkQmFkRmluaXNoUmVhc29uKHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IoYCR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRGdW5jdGlvbkNhbGxzKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5wcm9tcHRGZWVkYmFjaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IoYEZ1bmN0aW9uIGNhbGwgbm90IGF2YWlsYWJsZS4gJHtmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSl9YCwgcmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIHRleHQgZm91bmQgaW4gYWxsIHBhcnRzIG9mIGZpcnN0IGNhbmRpZGF0ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VGV4dChyZXNwb25zZSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCB0ZXh0U3RyaW5ncyA9IFtdO1xuICAgIGlmICgoX2IgPSAoX2EgPSByZXNwb25zZS5jYW5kaWRhdGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0uY29udGVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhcnRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiAoX2QgPSAoX2MgPSByZXNwb25zZS5jYW5kaWRhdGVzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NbMF0uY29udGVudCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnBhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydC50ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGV4dFN0cmluZ3MucHVzaChwYXJ0LnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnQuZXhlY3V0YWJsZUNvZGUpIHtcbiAgICAgICAgICAgICAgICB0ZXh0U3RyaW5ncy5wdXNoKFwiXFxuYGBgXCIgK1xuICAgICAgICAgICAgICAgICAgICBwYXJ0LmV4ZWN1dGFibGVDb2RlLmxhbmd1YWdlICtcbiAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIHBhcnQuZXhlY3V0YWJsZUNvZGUuY29kZSArXG4gICAgICAgICAgICAgICAgICAgIFwiXFxuYGBgXFxuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRleHRTdHJpbmdzLnB1c2goXCJcXG5gYGBcXG5cIiArIHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdC5vdXRwdXQgKyBcIlxcbmBgYFxcblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGV4dFN0cmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGV4dFN0cmluZ3Muam9pbihcIlwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyBmdW5jdGlvbkNhbGwgb2YgZmlyc3QgY2FuZGlkYXRlLlxuICovXG5mdW5jdGlvbiBnZXRGdW5jdGlvbkNhbGxzKHJlc3BvbnNlKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbHMgPSBbXTtcbiAgICBpZiAoKF9iID0gKF9hID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdLmNvbnRlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wYXJ0cykge1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgKF9kID0gKF9jID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jWzBdLmNvbnRlbnQpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQuZnVuY3Rpb25DYWxsKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25DYWxscy5wdXNoKHBhcnQuZnVuY3Rpb25DYWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZnVuY3Rpb25DYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbkNhbGxzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG5jb25zdCBiYWRGaW5pc2hSZWFzb25zID0gW1xuICAgIEZpbmlzaFJlYXNvbi5SRUNJVEFUSU9OLFxuICAgIEZpbmlzaFJlYXNvbi5TQUZFVFksXG4gICAgRmluaXNoUmVhc29uLkxBTkdVQUdFLFxuXTtcbmZ1bmN0aW9uIGhhZEJhZEZpbmlzaFJlYXNvbihjYW5kaWRhdGUpIHtcbiAgICByZXR1cm4gKCEhY2FuZGlkYXRlLmZpbmlzaFJlYXNvbiAmJlxuICAgICAgICBiYWRGaW5pc2hSZWFzb25zLmluY2x1ZGVzKGNhbmRpZGF0ZS5maW5pc2hSZWFzb24pKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xuICAgIGlmICgoIXJlc3BvbnNlLmNhbmRpZGF0ZXMgfHwgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPT09IDApICYmXG4gICAgICAgIHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJSZXNwb25zZSB3YXMgYmxvY2tlZFwiO1xuICAgICAgICBpZiAoKF9hID0gcmVzcG9uc2UucHJvbXB0RmVlZGJhY2spID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ibG9ja1JlYXNvbikge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgIGR1ZSB0byAke3Jlc3BvbnNlLnByb21wdEZlZWRiYWNrLmJsb2NrUmVhc29ufWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfYiA9IHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmxvY2tSZWFzb25NZXNzYWdlKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGA6ICR7cmVzcG9uc2UucHJvbXB0RmVlZGJhY2suYmxvY2tSZWFzb25NZXNzYWdlfWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKF9jID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jWzBdKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0Q2FuZGlkYXRlID0gcmVzcG9uc2UuY2FuZGlkYXRlc1swXTtcbiAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihmaXJzdENhbmRpZGF0ZSkpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYENhbmRpZGF0ZSB3YXMgYmxvY2tlZCBkdWUgdG8gJHtmaXJzdENhbmRpZGF0ZS5maW5pc2hSZWFzb259YDtcbiAgICAgICAgICAgIGlmIChmaXJzdENhbmRpZGF0ZS5maW5pc2hNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSArPSBgOiAke2ZpcnN0Q2FuZGlkYXRlLmZpbmlzaE1lc3NhZ2V9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbnR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgcmVzcG9uc2VMaW5lUkUgPSAvXmRhdGFcXDogKC4qKSg/OlxcblxcbnxcXHJcXHJ8XFxyXFxuXFxyXFxuKS87XG4vKipcbiAqIFByb2Nlc3MgYSByZXNwb25zZS5ib2R5IHN0cmVhbSBmcm9tIHRoZSBiYWNrZW5kIGFuZCByZXR1cm4gYW5cbiAqIGl0ZXJhdG9yIHRoYXQgcHJvdmlkZXMgb25lIGNvbXBsZXRlIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlIGF0IGEgdGltZVxuICogYW5kIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBzaW5nbGUgYWdncmVnYXRlZFxuICogR2VuZXJhdGVDb250ZW50UmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHJlc3BvbnNlIC0gUmVzcG9uc2UgZnJvbSBhIGZldGNoIGNhbGxcbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1N0cmVhbShyZXNwb25zZSkge1xuICAgIGNvbnN0IGlucHV0U3RyZWFtID0gcmVzcG9uc2UuYm9keS5waXBlVGhyb3VnaChuZXcgVGV4dERlY29kZXJTdHJlYW0oXCJ1dGY4XCIsIHsgZmF0YWw6IHRydWUgfSkpO1xuICAgIGNvbnN0IHJlc3BvbnNlU3RyZWFtID0gZ2V0UmVzcG9uc2VTdHJlYW0oaW5wdXRTdHJlYW0pO1xuICAgIGNvbnN0IFtzdHJlYW0xLCBzdHJlYW0yXSA9IHJlc3BvbnNlU3RyZWFtLnRlZSgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0cmVhbTogZ2VuZXJhdGVSZXNwb25zZVNlcXVlbmNlKHN0cmVhbTEpLFxuICAgICAgICByZXNwb25zZTogZ2V0UmVzcG9uc2VQcm9taXNlKHN0cmVhbTIpLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBnZXRSZXNwb25zZVByb21pc2Uoc3RyZWFtKSB7XG4gICAgY29uc3QgYWxsUmVzcG9uc2VzID0gW107XG4gICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkSGVscGVycyhhZ2dyZWdhdGVSZXNwb25zZXMoYWxsUmVzcG9uc2VzKSk7XG4gICAgICAgIH1cbiAgICAgICAgYWxsUmVzcG9uc2VzLnB1c2godmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdlbmVyYXRlUmVzcG9uc2VTZXF1ZW5jZShzdHJlYW0pIHtcbiAgICByZXR1cm4gX19hc3luY0dlbmVyYXRvcih0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKiBnZW5lcmF0ZVJlc3BvbnNlU2VxdWVuY2VfMSgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0geWllbGQgX19hd2FpdChyZWFkZXIucmVhZCgpKTtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB5aWVsZCBfX2F3YWl0KGFkZEhlbHBlcnModmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBSZWFkcyBhIHJhdyBzdHJlYW0gZnJvbSB0aGUgZmV0Y2ggcmVzcG9uc2UgYW5kIGpvaW4gaW5jb21wbGV0ZVxuICogY2h1bmtzLCByZXR1cm5pbmcgYSBuZXcgc3RyZWFtIHRoYXQgcHJvdmlkZXMgYSBzaW5nbGUgY29tcGxldGVcbiAqIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlIGluIGVhY2ggaXRlcmF0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRSZXNwb25zZVN0cmVhbShpbnB1dFN0cmVhbSkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0U3RyZWFtLmdldFJlYWRlcigpO1xuICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGV4dCA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyXG4gICAgICAgICAgICAgICAgICAgIC5yZWFkKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHsgdmFsdWUsIGRvbmUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUZXh0LnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZXJyb3IobmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHN0cmVhbVwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0ICs9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBjdXJyZW50VGV4dC5tYXRjaChyZXNwb25zZUxpbmVSRSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFJlc3BvbnNlID0gSlNPTi5wYXJzZShtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZXJyb3IobmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBFcnJvciBwYXJzaW5nIEpTT04gcmVzcG9uc2U6IFwiJHttYXRjaFsxXX1cImApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUocGFyc2VkUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRleHQgPSBjdXJyZW50VGV4dC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gY3VycmVudFRleHQubWF0Y2gocmVzcG9uc2VMaW5lUkUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnIgPSBlO1xuICAgICAgICAgICAgICAgICAgICBlcnIuc3RhY2sgPSBlLnN0YWNrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJQWJvcnRFcnJvcihcIlJlcXVlc3QgYWJvcnRlZCB3aGVuIHJlYWRpbmcgZnJvbSB0aGUgc3RyZWFtXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiRXJyb3IgcmVhZGluZyBmcm9tIHRoZSBzdHJlYW1cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBzdHJlYW07XG59XG4vKipcbiAqIEFnZ3JlZ2F0ZXMgYW4gYXJyYXkgb2YgYEdlbmVyYXRlQ29udGVudFJlc3BvbnNlYHMgaW50byBhIHNpbmdsZVxuICogR2VuZXJhdGVDb250ZW50UmVzcG9uc2UuXG4gKi9cbmZ1bmN0aW9uIGFnZ3JlZ2F0ZVJlc3BvbnNlcyhyZXNwb25zZXMpIHtcbiAgICBjb25zdCBsYXN0UmVzcG9uc2UgPSByZXNwb25zZXNbcmVzcG9uc2VzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGFnZ3JlZ2F0ZWRSZXNwb25zZSA9IHtcbiAgICAgICAgcHJvbXB0RmVlZGJhY2s6IGxhc3RSZXNwb25zZSA9PT0gbnVsbCB8fCBsYXN0UmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3RSZXNwb25zZS5wcm9tcHRGZWVkYmFjayxcbiAgICB9O1xuICAgIGZvciAoY29uc3QgcmVzcG9uc2Ugb2YgcmVzcG9uc2VzKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICBsZXQgY2FuZGlkYXRlSW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgcmVzcG9uc2UuY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tjYW5kaWRhdGVJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGNhbmRpZGF0ZUluZGV4LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBLZWVwIG92ZXJ3cml0aW5nLCB0aGUgbGFzdCBvbmUgd2lsbCBiZSBmaW5hbFxuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5jaXRhdGlvbk1ldGFkYXRhID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmNpdGF0aW9uTWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLmdyb3VuZGluZ01ldGFkYXRhID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmdyb3VuZGluZ01ldGFkYXRhO1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5maW5pc2hSZWFzb24gPVxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUuZmluaXNoUmVhc29uO1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5maW5pc2hNZXNzYWdlID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmZpbmlzaE1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLnNhZmV0eVJhdGluZ3MgPVxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUuc2FmZXR5UmF0aW5ncztcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDYW5kaWRhdGVzIHNob3VsZCBhbHdheXMgaGF2ZSBjb250ZW50IGFuZCBwYXJ0cywgYnV0IHRoaXMgaGFuZGxlc1xuICAgICAgICAgICAgICAgICAqIHBvc3NpYmxlIG1hbGZvcm1lZCByZXNwb25zZXMuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5jb250ZW50ICYmIGNhbmRpZGF0ZS5jb250ZW50LnBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5jb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6IGNhbmRpZGF0ZS5jb250ZW50LnJvbGUgfHwgXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQudGV4dCA9IHBhcnQudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQuZnVuY3Rpb25DYWxsID0gcGFydC5mdW5jdGlvbkNhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5leGVjdXRhYmxlQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQuZXhlY3V0YWJsZUNvZGUgPSBwYXJ0LmV4ZWN1dGFibGVDb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCA9IHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXdQYXJ0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0LnRleHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLmNvbnRlbnQucGFydHMucHVzaChuZXdQYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbmRpZGF0ZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3BvbnNlLnVzYWdlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS51c2FnZU1ldGFkYXRhID0gcmVzcG9uc2UudXNhZ2VNZXRhZGF0YTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWdncmVnYXRlZFJlc3BvbnNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb250ZW50U3RyZWFtKGFwaUtleSwgbW9kZWwsIHBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suU1RSRUFNX0dFTkVSQVRFX0NPTlRFTlQsIGFwaUtleSwgXG4gICAgLyogc3RyZWFtICovIHRydWUsIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4gcHJvY2Vzc1N0cmVhbShyZXNwb25zZSk7XG59XG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUNvbnRlbnQoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbWFrZU1vZGVsUmVxdWVzdChtb2RlbCwgVGFzay5HRU5FUkFURV9DT05URU5ULCBhcGlLZXksIFxuICAgIC8qIHN0cmVhbSAqLyBmYWxzZSwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zdCBlbmhhbmNlZFJlc3BvbnNlID0gYWRkSGVscGVycyhyZXNwb25zZUpzb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3BvbnNlOiBlbmhhbmNlZFJlc3BvbnNlLFxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBmb3JtYXRTeXN0ZW1JbnN0cnVjdGlvbihpbnB1dCkge1xuICAgIC8vIG51bGwgb3IgdW5kZWZpbmVkXG4gICAgaWYgKGlucHV0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7IHJvbGU6IFwic3lzdGVtXCIsIHBhcnRzOiBbeyB0ZXh0OiBpbnB1dCB9XSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbnB1dC50ZXh0KSB7XG4gICAgICAgIHJldHVybiB7IHJvbGU6IFwic3lzdGVtXCIsIHBhcnRzOiBbaW5wdXRdIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlucHV0LnBhcnRzKSB7XG4gICAgICAgIGlmICghaW5wdXQucm9sZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgcm9sZTogXCJzeXN0ZW1cIiwgcGFydHM6IGlucHV0LnBhcnRzIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QpIHtcbiAgICBsZXQgbmV3UGFydHMgPSBbXTtcbiAgICBpZiAodHlwZW9mIHJlcXVlc3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbmV3UGFydHMgPSBbeyB0ZXh0OiByZXF1ZXN0IH1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0T3JTdHJpbmcgb2YgcmVxdWVzdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0T3JTdHJpbmcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHsgdGV4dDogcGFydE9yU3RyaW5nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0T3JTdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25Sb2xlVG9QYXJ0c0FuZFZhbGlkYXRlU2VuZE1lc3NhZ2VSZXF1ZXN0KG5ld1BhcnRzKTtcbn1cbi8qKlxuICogV2hlbiBtdWx0aXBsZSBQYXJ0IHR5cGVzIChpLmUuIEZ1bmN0aW9uUmVzcG9uc2VQYXJ0IGFuZCBUZXh0UGFydCkgYXJlXG4gKiBwYXNzZWQgaW4gYSBzaW5nbGUgUGFydCBhcnJheSwgd2UgbWF5IG5lZWQgdG8gYXNzaWduIGRpZmZlcmVudCByb2xlcyB0byBlYWNoXG4gKiBwYXJ0LiBDdXJyZW50bHkgb25seSBGdW5jdGlvblJlc3BvbnNlUGFydCByZXF1aXJlcyBhIHJvbGUgb3RoZXIgdGhhbiAndXNlcicuXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHBhcnRzIEFycmF5IG9mIHBhcnRzIHRvIHBhc3MgdG8gdGhlIG1vZGVsXG4gKiBAcmV0dXJucyBBcnJheSBvZiBjb250ZW50IGl0ZW1zXG4gKi9cbmZ1bmN0aW9uIGFzc2lnblJvbGVUb1BhcnRzQW5kVmFsaWRhdGVTZW5kTWVzc2FnZVJlcXVlc3QocGFydHMpIHtcbiAgICBjb25zdCB1c2VyQ29udGVudCA9IHsgcm9sZTogXCJ1c2VyXCIsIHBhcnRzOiBbXSB9O1xuICAgIGNvbnN0IGZ1bmN0aW9uQ29udGVudCA9IHsgcm9sZTogXCJmdW5jdGlvblwiLCBwYXJ0czogW10gfTtcbiAgICBsZXQgaGFzVXNlckNvbnRlbnQgPSBmYWxzZTtcbiAgICBsZXQgaGFzRnVuY3Rpb25Db250ZW50ID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uUmVzcG9uc2VcIiBpbiBwYXJ0KSB7XG4gICAgICAgICAgICBmdW5jdGlvbkNvbnRlbnQucGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgICAgIGhhc0Z1bmN0aW9uQ29udGVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1c2VyQ29udGVudC5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgICAgICAgaGFzVXNlckNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNVc2VyQ29udGVudCAmJiBoYXNGdW5jdGlvbkNvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiV2l0aGluIGEgc2luZ2xlIG1lc3NhZ2UsIEZ1bmN0aW9uUmVzcG9uc2UgY2Fubm90IGJlIG1peGVkIHdpdGggb3RoZXIgdHlwZSBvZiBwYXJ0IGluIHRoZSByZXF1ZXN0IGZvciBzZW5kaW5nIGNoYXQgbWVzc2FnZS5cIik7XG4gICAgfVxuICAgIGlmICghaGFzVXNlckNvbnRlbnQgJiYgIWhhc0Z1bmN0aW9uQ29udGVudCkge1xuICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoXCJObyBjb250ZW50IGlzIHByb3ZpZGVkIGZvciBzZW5kaW5nIGNoYXQgbWVzc2FnZS5cIik7XG4gICAgfVxuICAgIGlmIChoYXNVc2VyQ29udGVudCkge1xuICAgICAgICByZXR1cm4gdXNlckNvbnRlbnQ7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbkNvbnRlbnQ7XG59XG5mdW5jdGlvbiBmb3JtYXRDb3VudFRva2Vuc0lucHV0KHBhcmFtcywgbW9kZWxQYXJhbXMpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QgPSB7XG4gICAgICAgIG1vZGVsOiBtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXMubW9kZWwsXG4gICAgICAgIGdlbmVyYXRpb25Db25maWc6IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy5nZW5lcmF0aW9uQ29uZmlnLFxuICAgICAgICBzYWZldHlTZXR0aW5nczogbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLnNhZmV0eVNldHRpbmdzLFxuICAgICAgICB0b29sczogbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLnRvb2xzLFxuICAgICAgICB0b29sQ29uZmlnOiBtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXMudG9vbENvbmZpZyxcbiAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy5zeXN0ZW1JbnN0cnVjdGlvbixcbiAgICAgICAgY2FjaGVkQ29udGVudDogKF9hID0gbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLmNhY2hlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lLFxuICAgICAgICBjb250ZW50czogW10sXG4gICAgfTtcbiAgICBjb25zdCBjb250YWluc0dlbmVyYXRlQ29udGVudFJlcXVlc3QgPSBwYXJhbXMuZ2VuZXJhdGVDb250ZW50UmVxdWVzdCAhPSBudWxsO1xuICAgIGlmIChwYXJhbXMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5zR2VuZXJhdGVDb250ZW50UmVxdWVzdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKFwiQ291bnRUb2tlbnNSZXF1ZXN0IG11c3QgaGF2ZSBvbmUgb2YgY29udGVudHMgb3IgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCwgbm90IGJvdGguXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QuY29udGVudHMgPSBwYXJhbXMuY29udGVudHM7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRhaW5zR2VuZXJhdGVDb250ZW50UmVxdWVzdCkge1xuICAgICAgICBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0KSwgcGFyYW1zLmdlbmVyYXRlQ29udGVudFJlcXVlc3QpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQXJyYXkgb3Igc3RyaW5nXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHBhcmFtcyk7XG4gICAgICAgIGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QuY29udGVudHMgPSBbY29udGVudF07XG4gICAgfVxuICAgIHJldHVybiB7IGdlbmVyYXRlQ29udGVudFJlcXVlc3Q6IGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QgfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEdlbmVyYXRlQ29udGVudElucHV0KHBhcmFtcykge1xuICAgIGxldCBmb3JtYXR0ZWRSZXF1ZXN0O1xuICAgIGlmIChwYXJhbXMuY29udGVudHMpIHtcbiAgICAgICAgZm9ybWF0dGVkUmVxdWVzdCA9IHBhcmFtcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEFycmF5IG9yIHN0cmluZ1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChwYXJhbXMpO1xuICAgICAgICBmb3JtYXR0ZWRSZXF1ZXN0ID0geyBjb250ZW50czogW2NvbnRlbnRdIH07XG4gICAgfVxuICAgIGlmIChwYXJhbXMuc3lzdGVtSW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgZm9ybWF0dGVkUmVxdWVzdC5zeXN0ZW1JbnN0cnVjdGlvbiA9IGZvcm1hdFN5c3RlbUluc3RydWN0aW9uKHBhcmFtcy5zeXN0ZW1JbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWRSZXF1ZXN0O1xufVxuZnVuY3Rpb24gZm9ybWF0RW1iZWRDb250ZW50SW5wdXQocGFyYW1zKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShwYXJhbXMpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHBhcmFtcyk7XG4gICAgICAgIHJldHVybiB7IGNvbnRlbnQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIGh0dHBzOi8vYWkuZ29vZ2xlLmRldi9hcGkvcmVzdC92MWJldGEvQ29udGVudCNwYXJ0XG5jb25zdCBWQUxJRF9QQVJUX0ZJRUxEUyA9IFtcbiAgICBcInRleHRcIixcbiAgICBcImlubGluZURhdGFcIixcbiAgICBcImZ1bmN0aW9uQ2FsbFwiLFxuICAgIFwiZnVuY3Rpb25SZXNwb25zZVwiLFxuICAgIFwiZXhlY3V0YWJsZUNvZGVcIixcbiAgICBcImNvZGVFeGVjdXRpb25SZXN1bHRcIixcbl07XG5jb25zdCBWQUxJRF9QQVJUU19QRVJfUk9MRSA9IHtcbiAgICB1c2VyOiBbXCJ0ZXh0XCIsIFwiaW5saW5lRGF0YVwiXSxcbiAgICBmdW5jdGlvbjogW1wiZnVuY3Rpb25SZXNwb25zZVwiXSxcbiAgICBtb2RlbDogW1widGV4dFwiLCBcImZ1bmN0aW9uQ2FsbFwiLCBcImV4ZWN1dGFibGVDb2RlXCIsIFwiY29kZUV4ZWN1dGlvblJlc3VsdFwiXSxcbiAgICAvLyBTeXN0ZW0gaW5zdHJ1Y3Rpb25zIHNob3VsZG4ndCBiZSBpbiBoaXN0b3J5IGFueXdheS5cbiAgICBzeXN0ZW06IFtcInRleHRcIl0sXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVDaGF0SGlzdG9yeShoaXN0b3J5KSB7XG4gICAgbGV0IHByZXZDb250ZW50ID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBjdXJyQ29udGVudCBvZiBoaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcm9sZSwgcGFydHMgfSA9IGN1cnJDb250ZW50O1xuICAgICAgICBpZiAoIXByZXZDb250ZW50ICYmIHJvbGUgIT09IFwidXNlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYEZpcnN0IGNvbnRlbnQgc2hvdWxkIGJlIHdpdGggcm9sZSAndXNlcicsIGdvdCAke3JvbGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFQT1NTSUJMRV9ST0xFUy5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBFYWNoIGl0ZW0gc2hvdWxkIGluY2x1ZGUgcm9sZSBmaWVsZC4gR290ICR7cm9sZX0gYnV0IHZhbGlkIHJvbGVzIGFyZTogJHtKU09OLnN0cmluZ2lmeShQT1NTSUJMRV9ST0xFUyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcnRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiQ29udGVudCBzaG91bGQgaGF2ZSAncGFydHMnIHByb3BlcnR5IHdpdGggYW4gYXJyYXkgb2YgUGFydHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiRWFjaCBDb250ZW50IHNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBwYXJ0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvdW50RmllbGRzID0ge1xuICAgICAgICAgICAgdGV4dDogMCxcbiAgICAgICAgICAgIGlubGluZURhdGE6IDAsXG4gICAgICAgICAgICBmdW5jdGlvbkNhbGw6IDAsXG4gICAgICAgICAgICBmdW5jdGlvblJlc3BvbnNlOiAwLFxuICAgICAgICAgICAgZmlsZURhdGE6IDAsXG4gICAgICAgICAgICBleGVjdXRhYmxlQ29kZTogMCxcbiAgICAgICAgICAgIGNvZGVFeGVjdXRpb25SZXN1bHQ6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgVkFMSURfUEFSVF9GSUVMRFMpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHBhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnRGaWVsZHNba2V5XSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZFBhcnRzID0gVkFMSURfUEFSVFNfUEVSX1JPTEVbcm9sZV07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFZBTElEX1BBUlRfRklFTERTKSB7XG4gICAgICAgICAgICBpZiAoIXZhbGlkUGFydHMuaW5jbHVkZXMoa2V5KSAmJiBjb3VudEZpZWxkc1trZXldID4gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihgQ29udGVudCB3aXRoIHJvbGUgJyR7cm9sZX0nIGNhbid0IGNvbnRhaW4gJyR7a2V5fScgcGFydGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByZXZDb250ZW50ID0gdHJ1ZTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVzcG9uc2UgaXMgdmFsaWQgKGNvdWxkIGJlIGFwcGVuZGVkIHRvIHRoZSBoaXN0b3J5KSwgZmxhc2Ugb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc1ZhbGlkUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMgPT09IHVuZGVmaW5lZCB8fCByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSAoX2EgPSByZXNwb25zZS5jYW5kaWRhdGVzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGVudDtcbiAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQucGFydHMgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcGFydCBvZiBjb250ZW50LnBhcnRzKSB7XG4gICAgICAgIGlmIChwYXJ0ID09PSB1bmRlZmluZWQgfHwgT2JqZWN0LmtleXMocGFydCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnQudGV4dCAhPT0gdW5kZWZpbmVkICYmIHBhcnQudGV4dCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEbyBub3QgbG9nIGEgbWVzc2FnZSBmb3IgdGhpcyBlcnJvci5cbiAqL1xuY29uc3QgU0lMRU5UX0VSUk9SID0gXCJTSUxFTlRfRVJST1JcIjtcbi8qKlxuICogQ2hhdFNlc3Npb24gY2xhc3MgdGhhdCBlbmFibGVzIHNlbmRpbmcgY2hhdCBtZXNzYWdlcyBhbmQgc3RvcmVzXG4gKiBoaXN0b3J5IG9mIHNlbnQgYW5kIHJlY2VpdmVkIG1lc3NhZ2VzIHNvIGZhci5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENoYXRTZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIG1vZGVsLCBwYXJhbXMsIF9yZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuX3JlcXVlc3RPcHRpb25zID0gX3JlcXVlc3RPcHRpb25zO1xuICAgICAgICB0aGlzLl9oaXN0b3J5ID0gW107XG4gICAgICAgIHRoaXMuX3NlbmRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHRoaXMuX2FwaUtleSA9IGFwaUtleTtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5oaXN0b3J5KSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUNoYXRIaXN0b3J5KHBhcmFtcy5oaXN0b3J5KTtcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkgPSBwYXJhbXMuaGlzdG9yeTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjaGF0IGhpc3Rvcnkgc28gZmFyLiBCbG9ja2VkIHByb21wdHMgYXJlIG5vdCBhZGRlZCB0byBoaXN0b3J5LlxuICAgICAqIEJsb2NrZWQgY2FuZGlkYXRlcyBhcmUgbm90IGFkZGVkIHRvIGhpc3RvcnksIG5vciBhcmUgdGhlIHByb21wdHMgdGhhdFxuICAgICAqIGdlbmVyYXRlZCB0aGVtLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEhpc3RvcnkoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faGlzdG9yeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBjaGF0IG1lc3NhZ2UgYW5kIHJlY2VpdmVzIGEgbm9uLXN0cmVhbWluZ1xuICAgICAqIHtAbGluayBHZW5lcmF0ZUNvbnRlbnRSZXN1bHR9LlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgc2VuZE1lc3NhZ2UocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZFByb21pc2U7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IChfYSA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiAoX2IgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICB0b29sczogKF9jID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b29scyxcbiAgICAgICAgICAgIHRvb2xDb25maWc6IChfZCA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudG9vbENvbmZpZyxcbiAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiAoX2UgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnN5c3RlbUluc3RydWN0aW9uLFxuICAgICAgICAgICAgY2FjaGVkQ29udGVudDogKF9mID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWNoZWRDb250ZW50LFxuICAgICAgICAgICAgY29udGVudHM6IFsuLi50aGlzLl9oaXN0b3J5LCBuZXdDb250ZW50XSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2hhdFNlc3Npb25SZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIGxldCBmaW5hbFJlc3VsdDtcbiAgICAgICAgLy8gQWRkIG9udG8gdGhlIGNoYWluLlxuICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IHRoaXMuX3NlbmRQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiBnZW5lcmF0ZUNvbnRlbnQodGhpcy5fYXBpS2V5LCB0aGlzLm1vZGVsLCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0LCBjaGF0U2Vzc2lvblJlcXVlc3RPcHRpb25zKSlcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkUmVzcG9uc2UocmVzdWx0LnJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkucHVzaChuZXdDb250ZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUNvbnRlbnQgPSBPYmplY3QuYXNzaWduKHsgcGFydHM6IFtdLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzcG9uc2Ugc2VlbXMgdG8gY29tZSBiYWNrIHdpdGhvdXQgYSByb2xlIHNldC5cbiAgICAgICAgICAgICAgICAgICAgcm9sZTogXCJtb2RlbFwiIH0sIChfYSA9IHJlc3VsdC5yZXNwb25zZS5jYW5kaWRhdGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0uY29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKHJlc3BvbnNlQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBibG9ja0Vycm9yTWVzc2FnZSA9IGZvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3VsdC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrRXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihgc2VuZE1lc3NhZ2UoKSB3YXMgdW5zdWNjZXNzZnVsLiAke2Jsb2NrRXJyb3JNZXNzYWdlfS4gSW5zcGVjdCByZXNwb25zZSBvYmplY3QgZm9yIGRldGFpbHMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIC8vIFJlc2V0cyBfc2VuZFByb21pc2UgdG8gYXZvaWQgc3Vic2VxdWVudCBjYWxscyBmYWlsaW5nIGFuZCB0aHJvdyBlcnJvci5cbiAgICAgICAgICAgIHRoaXMuX3NlbmRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZFByb21pc2U7XG4gICAgICAgIHJldHVybiBmaW5hbFJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBjaGF0IG1lc3NhZ2UgYW5kIHJlY2VpdmVzIHRoZSByZXNwb25zZSBhcyBhXG4gICAgICoge0BsaW5rIEdlbmVyYXRlQ29udGVudFN0cmVhbVJlc3VsdH0gY29udGFpbmluZyBhbiBpdGVyYWJsZSBzdHJlYW1cbiAgICAgKiBhbmQgYSByZXNwb25zZSBwcm9taXNlLlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgc2VuZE1lc3NhZ2VTdHJlYW0ocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZFByb21pc2U7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IChfYSA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiAoX2IgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICB0b29sczogKF9jID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b29scyxcbiAgICAgICAgICAgIHRvb2xDb25maWc6IChfZCA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudG9vbENvbmZpZyxcbiAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiAoX2UgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnN5c3RlbUluc3RydWN0aW9uLFxuICAgICAgICAgICAgY2FjaGVkQ29udGVudDogKF9mID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWNoZWRDb250ZW50LFxuICAgICAgICAgICAgY29udGVudHM6IFsuLi50aGlzLl9oaXN0b3J5LCBuZXdDb250ZW50XSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2hhdFNlc3Npb25SZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHN0cmVhbVByb21pc2UgPSBnZW5lcmF0ZUNvbnRlbnRTdHJlYW0odGhpcy5fYXBpS2V5LCB0aGlzLm1vZGVsLCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0LCBjaGF0U2Vzc2lvblJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgLy8gQWRkIG9udG8gdGhlIGNoYWluLlxuICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IHRoaXMuX3NlbmRQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiBzdHJlYW1Qcm9taXNlKVxuICAgICAgICAgICAgLy8gVGhpcyBtdXN0IGJlIGhhbmRsZWQgdG8gYXZvaWQgdW5oYW5kbGVkIHJlamVjdGlvbiwgYnV0IGp1bXBcbiAgICAgICAgICAgIC8vIHRvIHRoZSBmaW5hbCBjYXRjaCBibG9jayB3aXRoIGEgbGFiZWwgdG8gbm90IGxvZyB0aGlzIGVycm9yLlxuICAgICAgICAgICAgLmNhdGNoKChfaWdub3JlZCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFNJTEVOVF9FUlJPUik7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoc3RyZWFtUmVzdWx0KSA9PiBzdHJlYW1SZXN1bHQucmVzcG9uc2UpXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkUmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKG5ld0NvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0uY29udGVudCk7XG4gICAgICAgICAgICAgICAgLy8gUmVzcG9uc2Ugc2VlbXMgdG8gY29tZSBiYWNrIHdpdGhvdXQgYSByb2xlIHNldC5cbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlQ29udGVudC5yb2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudC5yb2xlID0gXCJtb2RlbFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnB1c2gocmVzcG9uc2VDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrRXJyb3JNZXNzYWdlID0gZm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmIChibG9ja0Vycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYHNlbmRNZXNzYWdlU3RyZWFtKCkgd2FzIHVuc3VjY2Vzc2Z1bC4gJHtibG9ja0Vycm9yTWVzc2FnZX0uIEluc3BlY3QgcmVzcG9uc2Ugb2JqZWN0IGZvciBkZXRhaWxzLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgLy8gRXJyb3JzIGluIHN0cmVhbVByb21pc2UgYXJlIGFscmVhZHkgY2F0Y2hhYmxlIGJ5IHRoZSB1c2VyIGFzXG4gICAgICAgICAgICAvLyBzdHJlYW1Qcm9taXNlIGlzIHJldHVybmVkLlxuICAgICAgICAgICAgLy8gQXZvaWQgZHVwbGljYXRpbmcgdGhlIGVycm9yIG1lc3NhZ2UgaW4gbG9ncy5cbiAgICAgICAgICAgIGlmIChlLm1lc3NhZ2UgIT09IFNJTEVOVF9FUlJPUikge1xuICAgICAgICAgICAgICAgIC8vIFVzZXJzIGRvIG5vdCBoYXZlIGFjY2VzcyB0byBfc2VuZFByb21pc2UgdG8gY2F0Y2ggZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gZG93bnN0cmVhbSBmcm9tIHN0cmVhbVByb21pc2UsIHNvIHRoZXkgc2hvdWxkIG5vdCB0aHJvdy5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbVByb21pc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY291bnRUb2tlbnMoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCBzaW5nbGVSZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbWFrZU1vZGVsUmVxdWVzdChtb2RlbCwgVGFzay5DT1VOVF9UT0tFTlMsIGFwaUtleSwgZmFsc2UsIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksIHNpbmdsZVJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW1iZWRDb250ZW50KGFwaUtleSwgbW9kZWwsIHBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suRU1CRURfQ09OVEVOVCwgYXBpS2V5LCBmYWxzZSwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5hc3luYyBmdW5jdGlvbiBiYXRjaEVtYmVkQ29udGVudHMoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IHJlcXVlc3RzV2l0aE1vZGVsID0gcGFyYW1zLnJlcXVlc3RzLm1hcCgocmVxdWVzdCkgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBtb2RlbCB9KTtcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suQkFUQ0hfRU1CRURfQ09OVEVOVFMsIGFwaUtleSwgZmFsc2UsIEpTT04uc3RyaW5naWZ5KHsgcmVxdWVzdHM6IHJlcXVlc3RzV2l0aE1vZGVsIH0pLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ2xhc3MgZm9yIGdlbmVyYXRpdmUgbW9kZWwgQVBJcy5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR2VuZXJhdGl2ZU1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIG1vZGVsUGFyYW1zLCBfcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5fcmVxdWVzdE9wdGlvbnMgPSBfcmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIGlmIChtb2RlbFBhcmFtcy5tb2RlbC5pbmNsdWRlcyhcIi9cIikpIHtcbiAgICAgICAgICAgIC8vIE1vZGVscyBtYXkgYmUgbmFtZWQgXCJtb2RlbHMvbW9kZWwtbmFtZVwiIG9yIFwidHVuZWRNb2RlbHMvbW9kZWwtbmFtZVwiXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWxQYXJhbXMubW9kZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBwYXRoIGlzIG5vdCBpbmNsdWRlZCwgYXNzdW1lIGl0J3MgYSBub24tdHVuZWQgbW9kZWwuXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gYG1vZGVscy8ke21vZGVsUGFyYW1zLm1vZGVsfWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uQ29uZmlnID0gbW9kZWxQYXJhbXMuZ2VuZXJhdGlvbkNvbmZpZyB8fCB7fTtcbiAgICAgICAgdGhpcy5zYWZldHlTZXR0aW5ncyA9IG1vZGVsUGFyYW1zLnNhZmV0eVNldHRpbmdzIHx8IFtdO1xuICAgICAgICB0aGlzLnRvb2xzID0gbW9kZWxQYXJhbXMudG9vbHM7XG4gICAgICAgIHRoaXMudG9vbENvbmZpZyA9IG1vZGVsUGFyYW1zLnRvb2xDb25maWc7XG4gICAgICAgIHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24gPSBmb3JtYXRTeXN0ZW1JbnN0cnVjdGlvbihtb2RlbFBhcmFtcy5zeXN0ZW1JbnN0cnVjdGlvbik7XG4gICAgICAgIHRoaXMuY2FjaGVkQ29udGVudCA9IG1vZGVsUGFyYW1zLmNhY2hlZENvbnRlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIG5vbi1zdHJlYW1pbmcgY2FsbCB0byB0aGUgbW9kZWxcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhIHNpbmdsZSB7QGxpbmsgR2VuZXJhdGVDb250ZW50UmVzcG9uc2V9LlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDb250ZW50KHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRHZW5lcmF0ZUNvbnRlbnRJbnB1dChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb250ZW50KHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBPYmplY3QuYXNzaWduKHsgZ2VuZXJhdGlvbkNvbmZpZzogdGhpcy5nZW5lcmF0aW9uQ29uZmlnLCBzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncywgdG9vbHM6IHRoaXMudG9vbHMsIHRvb2xDb25maWc6IHRoaXMudG9vbENvbmZpZywgc3lzdGVtSW5zdHJ1Y3Rpb246IHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24sIGNhY2hlZENvbnRlbnQ6IChfYSA9IHRoaXMuY2FjaGVkQ29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUgfSwgZm9ybWF0dGVkUGFyYW1zKSwgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBzdHJlYW1pbmcgY2FsbCB0byB0aGUgbW9kZWwgYW5kIHJldHVybnMgYW4gb2JqZWN0XG4gICAgICogY29udGFpbmluZyBhbiBpdGVyYWJsZSBzdHJlYW0gdGhhdCBpdGVyYXRlcyBvdmVyIGFsbCBjaHVua3MgaW4gdGhlXG4gICAgICogc3RyZWFtaW5nIHJlc3BvbnNlIGFzIHdlbGwgYXMgYSBwcm9taXNlIHRoYXQgcmV0dXJucyB0aGUgZmluYWxcbiAgICAgKiBhZ2dyZWdhdGVkIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDb250ZW50U3RyZWFtKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRHZW5lcmF0ZUNvbnRlbnRJbnB1dChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb250ZW50U3RyZWFtKHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBPYmplY3QuYXNzaWduKHsgZ2VuZXJhdGlvbkNvbmZpZzogdGhpcy5nZW5lcmF0aW9uQ29uZmlnLCBzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncywgdG9vbHM6IHRoaXMudG9vbHMsIHRvb2xDb25maWc6IHRoaXMudG9vbENvbmZpZywgc3lzdGVtSW5zdHJ1Y3Rpb246IHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24sIGNhY2hlZENvbnRlbnQ6IChfYSA9IHRoaXMuY2FjaGVkQ29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUgfSwgZm9ybWF0dGVkUGFyYW1zKSwgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgbmV3IHtAbGluayBDaGF0U2Vzc2lvbn0gaW5zdGFuY2Ugd2hpY2ggY2FuIGJlIHVzZWQgZm9yXG4gICAgICogbXVsdGktdHVybiBjaGF0cy5cbiAgICAgKi9cbiAgICBzdGFydENoYXQoc3RhcnRDaGF0UGFyYW1zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0U2Vzc2lvbih0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgT2JqZWN0LmFzc2lnbih7IGdlbmVyYXRpb25Db25maWc6IHRoaXMuZ2VuZXJhdGlvbkNvbmZpZywgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsIHRvb2xzOiB0aGlzLnRvb2xzLCB0b29sQ29uZmlnOiB0aGlzLnRvb2xDb25maWcsIHN5c3RlbUluc3RydWN0aW9uOiB0aGlzLnN5c3RlbUluc3RydWN0aW9uLCBjYWNoZWRDb250ZW50OiAoX2EgPSB0aGlzLmNhY2hlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lIH0sIHN0YXJ0Q2hhdFBhcmFtcyksIHRoaXMuX3JlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ291bnRzIHRoZSB0b2tlbnMgaW4gdGhlIHByb3ZpZGVkIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBGaWVsZHMgc2V0IGluIHRoZSBvcHRpb25hbCB7QGxpbmsgU2luZ2xlUmVxdWVzdE9wdGlvbnN9IHBhcmFtZXRlciB3aWxsXG4gICAgICogdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIHtAbGluayBSZXF1ZXN0T3B0aW9uc30gdmFsdWVzIHByb3ZpZGVkIHRvXG4gICAgICoge0BsaW5rIEdvb2dsZUdlbmVyYXRpdmVBSS5nZXRHZW5lcmF0aXZlTW9kZWwgfS5cbiAgICAgKi9cbiAgICBhc3luYyBjb3VudFRva2VucyhyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtcyA9IGZvcm1hdENvdW50VG9rZW5zSW5wdXQocmVxdWVzdCwge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB0aGlzLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICBzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncyxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLnRvb2xzLFxuICAgICAgICAgICAgdG9vbENvbmZpZzogdGhpcy50b29sQ29uZmlnLFxuICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24sXG4gICAgICAgICAgICBjYWNoZWRDb250ZW50OiB0aGlzLmNhY2hlZENvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBjb3VudFRva2Vucyh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgZm9ybWF0dGVkUGFyYW1zLCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtYmVkcyB0aGUgcHJvdmlkZWQgY29udGVudC5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIGVtYmVkQ29udGVudChyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtcyA9IGZvcm1hdEVtYmVkQ29udGVudElucHV0KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBlbWJlZENvbnRlbnQodGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIGZvcm1hdHRlZFBhcmFtcywgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWJlZHMgYW4gYXJyYXkgb2Yge0BsaW5rIEVtYmVkQ29udGVudFJlcXVlc3R9cy5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIGJhdGNoRW1iZWRDb250ZW50cyhiYXRjaEVtYmVkQ29udGVudFJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gYmF0Y2hFbWJlZENvbnRlbnRzKHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBiYXRjaEVtYmVkQ29udGVudFJlcXVlc3QsIGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRvcC1sZXZlbCBjbGFzcyBmb3IgdGhpcyBTREtcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXkpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB7QGxpbmsgR2VuZXJhdGl2ZU1vZGVsfSBpbnN0YW5jZSBmb3IgdGhlIHByb3ZpZGVkIG1vZGVsIG5hbWUuXG4gICAgICovXG4gICAgZ2V0R2VuZXJhdGl2ZU1vZGVsKG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgICAgICBpZiAoIW1vZGVsUGFyYW1zLm1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYE11c3QgcHJvdmlkZSBhIG1vZGVsIG5hbWUuIGAgK1xuICAgICAgICAgICAgICAgIGBFeGFtcGxlOiBnZW5haS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ215LW1vZGVsLW5hbWUnIH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aXZlTW9kZWwodGhpcy5hcGlLZXksIG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgR2VuZXJhdGl2ZU1vZGVsfSBpbnN0YW5jZSBmcm9tIHByb3ZpZGVkIGNvbnRlbnQgY2FjaGUuXG4gICAgICovXG4gICAgZ2V0R2VuZXJhdGl2ZU1vZGVsRnJvbUNhY2hlZENvbnRlbnQoY2FjaGVkQ29udGVudCwgbW9kZWxQYXJhbXMsIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgICAgIGlmICghY2FjaGVkQ29udGVudC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoXCJDYWNoZWQgY29udGVudCBtdXN0IGNvbnRhaW4gYSBgbmFtZWAgZmllbGQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2FjaGVkQ29udGVudC5tb2RlbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKFwiQ2FjaGVkIGNvbnRlbnQgbXVzdCBjb250YWluIGEgYG1vZGVsYCBmaWVsZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vdCBjaGVja2luZyB0b29scyBhbmQgdG9vbENvbmZpZyBmb3Igbm93IGFzIGl0IHdvdWxkIHJlcXVpcmUgYSBkZWVwXG4gICAgICAgICAqIGVxdWFsaXR5IGNvbXBhcmlzb24gYW5kIGlzbid0IGxpa2VseSB0byBiZSBhIGNvbW1vbiBjYXNlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgZGlzYWxsb3dlZER1cGxpY2F0ZXMgPSBbXCJtb2RlbFwiLCBcInN5c3RlbUluc3RydWN0aW9uXCJdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBkaXNhbGxvd2VkRHVwbGljYXRlcykge1xuICAgICAgICAgICAgaWYgKChtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXNba2V5XSkgJiZcbiAgICAgICAgICAgICAgICBjYWNoZWRDb250ZW50W2tleV0gJiZcbiAgICAgICAgICAgICAgICAobW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zW2tleV0pICE9PSBjYWNoZWRDb250ZW50W2tleV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIm1vZGVsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxQYXJhbXNDb21wID0gbW9kZWxQYXJhbXMubW9kZWwuc3RhcnRzV2l0aChcIm1vZGVscy9cIilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbW9kZWxQYXJhbXMubW9kZWwucmVwbGFjZShcIm1vZGVscy9cIiwgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbW9kZWxQYXJhbXMubW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZENvbnRlbnRDb21wID0gY2FjaGVkQ29udGVudC5tb2RlbC5zdGFydHNXaXRoKFwibW9kZWxzL1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjYWNoZWRDb250ZW50Lm1vZGVsLnJlcGxhY2UoXCJtb2RlbHMvXCIsIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNhY2hlZENvbnRlbnQubW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbFBhcmFtc0NvbXAgPT09IGNhY2hlZENvbnRlbnRDb21wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoYERpZmZlcmVudCB2YWx1ZSBmb3IgXCIke2tleX1cIiBzcGVjaWZpZWQgaW4gbW9kZWxQYXJhbXNgICtcbiAgICAgICAgICAgICAgICAgICAgYCAoJHttb2RlbFBhcmFtc1trZXldfSkgYW5kIGNhY2hlZENvbnRlbnQgKCR7Y2FjaGVkQ29udGVudFtrZXldfSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbFBhcmFtc0Zyb21DYWNoZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbW9kZWxQYXJhbXMpLCB7IG1vZGVsOiBjYWNoZWRDb250ZW50Lm1vZGVsLCB0b29sczogY2FjaGVkQ29udGVudC50b29scywgdG9vbENvbmZpZzogY2FjaGVkQ29udGVudC50b29sQ29uZmlnLCBzeXN0ZW1JbnN0cnVjdGlvbjogY2FjaGVkQ29udGVudC5zeXN0ZW1JbnN0cnVjdGlvbiwgY2FjaGVkQ29udGVudCB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aXZlTW9kZWwodGhpcy5hcGlLZXksIG1vZGVsUGFyYW1zRnJvbUNhY2hlLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBCbG9ja1JlYXNvbiwgQ2hhdFNlc3Npb24sIER5bmFtaWNSZXRyaWV2YWxNb2RlLCBFeGVjdXRhYmxlQ29kZUxhbmd1YWdlLCBGaW5pc2hSZWFzb24sIEZ1bmN0aW9uQ2FsbGluZ01vZGUsIEdlbmVyYXRpdmVNb2RlbCwgR29vZ2xlR2VuZXJhdGl2ZUFJLCBHb29nbGVHZW5lcmF0aXZlQUlBYm9ydEVycm9yLCBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciwgR29vZ2xlR2VuZXJhdGl2ZUFJRmV0Y2hFcnJvciwgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IsIEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IsIEhhcm1CbG9ja1RocmVzaG9sZCwgSGFybUNhdGVnb3J5LCBIYXJtUHJvYmFiaWxpdHksIE91dGNvbWUsIFBPU1NJQkxFX1JPTEVTLCBTY2hlbWFUeXBlLCBUYXNrVHlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIiwgIi8qKlxuICogXHVCQ0ExXHVEMTMwIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJDMEYgXHVDNzIwXHVDMEFDXHVCM0M0IFx1QUNDNFx1QzBCMCBcdUJBQThcdUI0QzhcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEFwcCwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xuaW1wb3J0IHsgYXBwZW5kRW1iZWRkaW5nTG9nIH0gZnJvbSAnLi4vbG9nZ2luZyc7XG5cbi8qKlxuICogXHVDRjU0XHVDMEFDXHVDNzc4IFx1QzcyMFx1QzBBQ1x1QjNDNFx1Qjk3QyBcdUFDQzRcdUMwQjBcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqIEBwYXJhbSB2ZWNBIFx1QkNBMVx1RDEzMCBBXG4gKiBAcGFyYW0gdmVjQiBcdUJDQTFcdUQxMzAgQlxuICogQHJldHVybnMgXHVDRjU0XHVDMEFDXHVDNzc4IFx1QzcyMFx1QzBBQ1x1QjNDNCAoLTF+MSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvc2luZVNpbWlsYXJpdHkodmVjQTogbnVtYmVyW10sIHZlY0I6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgaWYgKHZlY0EubGVuZ3RoICE9PSB2ZWNCLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignXHVCQ0ExXHVEMTMwXHVDNzU4IFx1Q0MyOFx1QzZEMFx1Qzc3NCBcdUM3N0NcdUNFNThcdUQ1NThcdUM5QzAgXHVDNTRBXHVDMkI1XHVCMkM4XHVCMkU0Jyk7XG4gIH1cblxuICBsZXQgZG90UHJvZHVjdCA9IDA7XG4gIGxldCBub3JtQSA9IDA7XG4gIGxldCBub3JtQiA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZWNBLmxlbmd0aDsgaSsrKSB7XG4gICAgZG90UHJvZHVjdCArPSB2ZWNBW2ldICogdmVjQltpXTtcbiAgICBub3JtQSArPSB2ZWNBW2ldICogdmVjQVtpXTtcbiAgICBub3JtQiArPSB2ZWNCW2ldICogdmVjQltpXTtcbiAgfVxuXG4gIGNvbnN0IGRlbm9taW5hdG9yID0gTWF0aC5zcXJ0KG5vcm1BKSAqIE1hdGguc3FydChub3JtQik7XG4gIGlmIChkZW5vbWluYXRvciA9PT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIGRvdFByb2R1Y3QgLyBkZW5vbWluYXRvcjtcbn1cblxuLyoqXG4gKiBHZW1pbmkgQVBJXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU1OFx1QzVFQyBcdUQxNERcdUMyQTRcdUQyQjggXHVDNzg0XHVCQ0EwXHVCNTI5XHVDNzQ0IFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNFxuICovXG5leHBvcnQgY2xhc3MgRW1iZWRkaW5nR2VuZXJhdG9yIHtcbiAgcHJpdmF0ZSBnZW5BSTogR29vZ2xlR2VuZXJhdGl2ZUFJIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbW9kZWw6IGFueSA9IG51bGw7XG4gIHByaXZhdGUgY2FjaGU6IE1hcDxzdHJpbmcsIG51bWJlcltdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBsYXN0RW1iZWRkaW5nOiBudW1iZXJbXSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxhc3RUZXh0OiBzdHJpbmcgPSAnJztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFwaUtleTogc3RyaW5nLFxuICAgIHByaXZhdGUgbW9kZWxOYW1lOiBzdHJpbmcgPSAnZW1iZWRkaW5nLTAwMScsXG4gICAgcHJpdmF0ZSBhcHA/OiBBcHAsXG4gICAgcHJpdmF0ZSBtYW5pZmVzdD86IFBsdWdpbk1hbmlmZXN0LFxuICAgIHByaXZhdGUgZW5hYmxlTG9nZ2luZzogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIGlmIChhcGlLZXkpIHtcbiAgICAgIHRoaXMuZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKGFwaUtleSk7XG4gICAgICAvLyBtb2RlbHMvIFx1QzgxMVx1QjQ1MFx1QzBBQyBcdUM4MUNcdUFDNzBcbiAgICAgIGNvbnN0IGNsZWFuTW9kZWxOYW1lID0gdGhpcy5tb2RlbE5hbWUucmVwbGFjZSgvXm1vZGVsc1xcLy8sICcnKTtcbiAgICAgIHRoaXMubW9kZWwgPSB0aGlzLmdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBjbGVhbk1vZGVsTmFtZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QkNBMVx1RDEzMFx1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NjlcdUIyQzhcdUIyRTRcbiAgICogQHBhcmFtIHRleHQgXHVDNzg1XHVCODI1IFx1RDE0RFx1QzJBNFx1RDJCOFxuICAgKiBAcmV0dXJucyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQ0ExXHVEMTMwXG4gICAqL1xuICBhc3luYyBlbWJlZCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgaWYgKCF0aGlzLm1vZGVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dlbWluaSBBUElcdUFDMDAgXHVDRDA4XHVBRTMwXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNCcpO1xuICAgIH1cblxuICAgIGxldCBlbWJlZGRpbmc6IG51bWJlcltdIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gXHVDRTkwXHVDMkRDIFx1RDY1NVx1Qzc3OFxuICAgIGlmICh0aGlzLmNhY2hlLmhhcyh0ZXh0KSkge1xuICAgICAgZW1iZWRkaW5nID0gdGhpcy5jYWNoZS5nZXQodGV4dCkhO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1vZGVsLmVtYmVkQ29udGVudCh0ZXh0KTtcbiAgICAgICAgZW1iZWRkaW5nID0gcmVzdWx0LmVtYmVkZGluZy52YWx1ZXM7XG5cbiAgICAgICAgLy8gXHVDRTkwXHVDMkRDXHVDNUQwIFx1QzgwMFx1QzdBNVxuICAgICAgICB0aGlzLmNhY2hlLnNldCh0ZXh0LCBlbWJlZGRpbmcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUI4NUNcdUFFNDUgXHVDQzk4XHVCOUFDIC0gXHVCQUE4XHVCNEUwIFx1Qzc4NFx1QkNBMFx1QjUyOShcdUNFOTBcdUMyREMgXHVEM0VDXHVENTY4KVx1Qzc0NCBcdUI4NUNcdUFFNDVcbiAgICBpZiAodGhpcy5lbmFibGVMb2dnaW5nICYmIHRoaXMuYXBwKSB7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgc2ltaWxhcml0eTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgcHJldmlvdXNUZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMubGFzdEVtYmVkZGluZykge1xuICAgICAgICAgIHNpbWlsYXJpdHkgPSBjb3NpbmVTaW1pbGFyaXR5KHRoaXMubGFzdEVtYmVkZGluZywgZW1iZWRkaW5nKTtcbiAgICAgICAgICBwcmV2aW91c1RleHQgPSB0aGlzLmxhc3RUZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgYXBwZW5kRW1iZWRkaW5nTG9nKHRoaXMuYXBwLCB0aGlzLm1hbmlmZXN0LCB7XG4gICAgICAgICAgaW5wdXRUZXh0OiB0ZXh0LFxuICAgICAgICAgIGVtYmVkZGluZyxcbiAgICAgICAgICBzaW1pbGFyaXR5LFxuICAgICAgICAgIHByZXZpb3VzSW5wdXRUZXh0OiBwcmV2aW91c1RleHRcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChsb2dFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdcdUM3ODRcdUJDQTBcdUI1MjkgXHVCODVDXHVBREY4IFx1Qzc5MVx1QzEzMSBcdUMyRTRcdUQzMjg6JywgbG9nRXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgdGhpcy5sYXN0RW1iZWRkaW5nID0gZW1iZWRkaW5nO1xuICAgIHRoaXMubGFzdFRleHQgPSB0ZXh0O1xuXG4gICAgcmV0dXJuIGVtYmVkZGluZztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM1RUNcdUI3RUMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1RDU1QyBcdUJDODhcdUM1RDAgXHVCQ0ExXHVEMTMwXHVCODVDIFx1QkNDMFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNFxuICAgKiBAcGFyYW0gdGV4dHMgXHVDNzg1XHVCODI1IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUJDMzBcdUM1RjRcbiAgICogQHJldHVybnMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QkNBMVx1RDEzMCBcdUJDMzBcdUM1RjRcbiAgICovXG4gIGFzeW5jIGVtYmVkQmF0Y2godGV4dHM6IHN0cmluZ1tdKTogUHJvbWlzZTxudW1iZXJbXVtdPiB7XG4gICAgY29uc3QgZW1iZWRkaW5nczogbnVtYmVyW11bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0ZXh0IG9mIHRleHRzKSB7XG4gICAgICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCB0aGlzLmVtYmVkKHRleHQpO1xuICAgICAgZW1iZWRkaW5ncy5wdXNoKGVtYmVkZGluZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVtYmVkZGluZ3M7XG4gIH1cblxuICAvKipcbiAgICogXHVDRTkwXHVDMkRDXHVCOTdDIFx1Q0QwOFx1QUUzMFx1RDY1NFx1RDU2OVx1QjJDOFx1QjJFNFxuICAgKi9cbiAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIFx1QzhGQ1x1QzgxQyBcdUJEODRcdUI5QUMgXHVDNUQ0XHVDOUM0XG4gKiBcbiAqIFx1QjMwMFx1RDY1NFx1Qzc1OCBcdUM3NThcdUJCRjhcdUI4NjBcdUM4MDEgXHVBQ0JEXHVBQ0M0XHVCOTdDIFx1RDBEMFx1QzlDMFx1RDU1OFx1QzVFQyBcdUM4RkNcdUM4MUNcdUJDQzRcdUI4NUMgXHVCRDg0XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0LlxuICovXG5cbmltcG9ydCB0eXBlIHsgQXBwLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gJy4uL2NvbnZlcnNhdGlvbic7XG5pbXBvcnQgeyBleHRyYWN0S2V5d29yZHMsIGZvcm1hdEtleXdvcmRzTWV0YWRhdGEsIGV4dHJhY3RDb21tb25LZXl3b3JkcyB9IGZyb20gJy4va2V5d29yZEV4dHJhY3Rvcic7XG5pbXBvcnQgeyBFbWJlZGRpbmdHZW5lcmF0b3IsIGNvc2luZVNpbWlsYXJpdHkgfSBmcm9tICcuL2VtYmVkZGluZ1NlcnZpY2UnO1xuaW1wb3J0IHsgYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyB9IGZyb20gJy4uL2xvZ2dpbmcnO1xuaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25TZWdtZW50LCBUb3BpY0JvdW5kYXJ5LCBTZWdtZW50TGluaywgVG9waWNTZXBhcmF0aW9uUmVzdWx0IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9waWNTZXBhcmF0aW9uQ29uZmlnIHtcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIGVtYmVkZGluZ01vZGVsPzogc3RyaW5nOyAvLyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQUE4XHVCMzc4IFx1Qzc3NFx1Qjk4NFxuICBzaW1pbGFyaXR5VGhyZXNob2xkPzogbnVtYmVyOyAvLyBcdUFFMzBcdUJDRjhcdUFDMTI6IDAuNzVcbiAgbWluU2VnbWVudExlbmd0aD86IG51bWJlcjsgLy8gXHVDRDVDXHVDMThDIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUFFMzhcdUM3NzQgKFx1RDEzNCBcdUMyMTgpXG4gIHdpbmRvd1NpemU/OiBudW1iZXI7IC8vIFx1QzJBQ1x1Qjc3Q1x1Qzc3NFx1QjUyOSBcdUM3MDhcdUIzQzRcdUM2QjAgXHVEMDZDXHVBRTMwXG4gIGVuYWJsZUtleXdvcmRNZXRhZGF0YT86IGJvb2xlYW47IC8vIFx1RDBBNFx1QzZDQ1x1QjREQyBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDMEFDXHVDNkE5IFx1QzVFQ1x1QkQ4MFxuICBhcHA/OiBBcHA7IC8vIFx1Qjg1Q1x1QUU0NVx1QzZBOSBPYnNpZGlhbiBcdUM1NzFcbiAgbWFuaWZlc3Q/OiBQbHVnaW5NYW5pZmVzdDsgLy8gXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4IFx1QjlFNFx1QjJDOFx1RDM5OFx1QzJBNFx1RDJCOFxuICBlbmFibGVFbWJlZGRpbmdMb2dnaW5nPzogYm9vbGVhbjsgLy8gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1Qjg1Q1x1QUU0NSBcdUQ2NUNcdUMxMzFcdUQ2NTRcbn1cblxuZXhwb3J0IGNsYXNzIFRvcGljU2VwYXJhdGlvbkVuZ2luZSB7XG4gIHByaXZhdGUgZW1iZWRkaW5nR2VuZXJhdG9yOiBFbWJlZGRpbmdHZW5lcmF0b3I7XG4gIHByaXZhdGUgY29uZmlnOiBUb3BpY1NlcGFyYXRpb25Db25maWc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBUb3BpY1NlcGFyYXRpb25Db25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIHNpbWlsYXJpdHlUaHJlc2hvbGQ6IGNvbmZpZy5zaW1pbGFyaXR5VGhyZXNob2xkID8/IDAuNzUsXG4gICAgICBtaW5TZWdtZW50TGVuZ3RoOiBjb25maWcubWluU2VnbWVudExlbmd0aCA/PyAyLFxuICAgICAgd2luZG93U2l6ZTogY29uZmlnLndpbmRvd1NpemUgPz8gMixcbiAgICAgIGVuYWJsZUtleXdvcmRNZXRhZGF0YTogY29uZmlnLmVuYWJsZUtleXdvcmRNZXRhZGF0YSA/PyB0cnVlLFxuICAgICAgZW5hYmxlRW1iZWRkaW5nTG9nZ2luZzogY29uZmlnLmVuYWJsZUVtYmVkZGluZ0xvZ2dpbmcgPz8gZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuZW1iZWRkaW5nR2VuZXJhdG9yID0gbmV3IEVtYmVkZGluZ0dlbmVyYXRvcihcbiAgICAgIGNvbmZpZy5hcGlLZXksXG4gICAgICBjb25maWcuZW1iZWRkaW5nTW9kZWwgPz8gJ2VtYmVkZGluZy0wMDEnLFxuICAgICAgY29uZmlnLmFwcCxcbiAgICAgIGNvbmZpZy5tYW5pZmVzdCxcbiAgICAgIGNvbmZpZy5lbmFibGVFbWJlZGRpbmdMb2dnaW5nID8/IGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIzMDBcdUQ2NTRcdUI5N0MgXHVDOEZDXHVDODFDXHVCQ0M0XHVCODVDIFx1QkQ4NFx1QjlBQ1x1RDU2OVx1QjJDOFx1QjJFNFxuICAgKiBAcGFyYW0gdHVybnMgXHVCMzAwXHVENjU0IFx1RDEzNCBcdUJDMzBcdUM1RjRcbiAgICogQHJldHVybnMgXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUFDQjBcdUFDRkNcbiAgICovXG4gIGFzeW5jIHNlcGFyYXRlVG9waWNzKHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10pOiBQcm9taXNlPFRvcGljU2VwYXJhdGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodHVybnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2VnbWVudHM6IFtdLFxuICAgICAgICAgIGJvdW5kYXJpZXM6IFtdLFxuICAgICAgICAgIGxpbmtzOiBbXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyAxLiBcdUFDMDEgXHVEMTM0XHVDNzU4IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM5MDBcdUJFNDQgKFx1RDBBNFx1QzZDQ1x1QjREQyBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDRDk0XHVBQzAwKVxuICAgICAgY29uc3QgdHVyblRleHRzID0gdGhpcy5wcmVwYXJlVHVyblRleHRzKHR1cm5zKTtcblxuICAgICAgLy8gMi4gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVxuICAgICAgY29uc29sZS5sb2coJ1x1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzEgXHVDOTExLi4uJyk7XG4gICAgICBsZXQgZW1iZWRkaW5nczogbnVtYmVyW11bXTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVtYmVkZGluZ3MgPSBhd2FpdCB0aGlzLmVtYmVkZGluZ0dlbmVyYXRvci5lbWJlZEJhdGNoKHR1cm5UZXh0cyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBtc2cgPSBgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWA7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hcHApIHtcbiAgICAgICAgICBhd2FpdCBhcHBlbmRUb3BpY1NlcGFyYXRpb25GYWlsdXJlTG9nKHRoaXMuY29uZmlnLmFwcCwgdGhpcy5jb25maWcubWFuaWZlc3QsIG1zZywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfVxuXG4gICAgICAvLyAzLiBcdUMyQUNcdUI3N0NcdUM3NzRcdUI1MjkgXHVDNzA4XHVCM0M0XHVDNkIwXHVCODVDIFx1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDQzRcdUMwQjBcbiAgICAgIGNvbnNvbGUubG9nKCdcdUM3MjBcdUMwQUNcdUIzQzQgXHVBQ0M0XHVDMEIwIFx1QzkxMS4uLicpO1xuICAgICAgbGV0IHNpbWlsYXJpdGllczogbnVtYmVyW107XG4gICAgICB0cnkge1xuICAgICAgICBzaW1pbGFyaXRpZXMgPSB0aGlzLmNhbGN1bGF0ZVdpbmRvd1NpbWlsYXJpdGllcyhlbWJlZGRpbmdzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGBcdUM3MjBcdUMwQUNcdUIzQzQgXHVBQ0M0XHVDMEIwIFx1QzJFNFx1RDMyODogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YDtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFwcCkge1xuICAgICAgICAgIGF3YWl0IGFwcGVuZFRvcGljU2VwYXJhdGlvbkZhaWx1cmVMb2codGhpcy5jb25maWcuYXBwLCB0aGlzLmNvbmZpZy5tYW5pZmVzdCwgbXNnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDQuIFx1QzhGQ1x1QzgxQyBcdUFDQkRcdUFDQzQgXHVEMEQwXHVDOUMwXG4gICAgICBjb25zb2xlLmxvZygnXHVDOEZDXHVDODFDIFx1QUNCRFx1QUNDNCBcdUQwRDBcdUM5QzAgXHVDOTExLi4uJyk7XG4gICAgICBsZXQgYm91bmRhcmllczogVG9waWNCb3VuZGFyeVtdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYm91bmRhcmllcyA9IHRoaXMuZGV0ZWN0VG9waWNCb3VuZGFyaWVzKHNpbWlsYXJpdGllcyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBtc2cgPSBgXHVDOEZDXHVDODFDIFx1QUNCRFx1QUNDNCBcdUQwRDBcdUM5QzAgXHVDMkU0XHVEMzI4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gO1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYXBwKSB7XG4gICAgICAgICAgYXdhaXQgYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyh0aGlzLmNvbmZpZy5hcHAsIHRoaXMuY29uZmlnLm1hbmlmZXN0LCBtc2csIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH1cblxuICAgICAgLy8gNS4gXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QzBERFx1QzEzMVxuICAgICAgY29uc29sZS5sb2coJ1x1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUMwRERcdUMxMzEgXHVDOTExLi4uJyk7XG4gICAgICBsZXQgc2VnbWVudHM6IENvbnZlcnNhdGlvblNlZ21lbnRbXTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlZ21lbnRzID0gdGhpcy5jcmVhdGVTZWdtZW50cyh0dXJucywgYm91bmRhcmllcywgc2ltaWxhcml0aWVzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjggXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YDtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFwcCkge1xuICAgICAgICAgIGF3YWl0IGFwcGVuZFRvcGljU2VwYXJhdGlvbkZhaWx1cmVMb2codGhpcy5jb25maWcuYXBwLCB0aGlzLmNvbmZpZy5tYW5pZmVzdCwgbXNnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDYuIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUFDMDQgXHVCOUMxXHVEMDZDIFx1QkQ4NFx1QzExRFxuICAgICAgY29uc29sZS5sb2coJ1x1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUI5QzFcdUQwNkMgXHVCRDg0XHVDMTFEIFx1QzkxMS4uLicpO1xuICAgICAgbGV0IGxpbmtzOiBTZWdtZW50TGlua1tdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlua3MgPSB0aGlzLmFuYWx5emVTZWdtZW50TGlua3Moc2VnbWVudHMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUI5QzFcdUQwNkMgXHVCRDg0XHVDMTFEIFx1QzJFNFx1RDMyODogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YDtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFwcCkge1xuICAgICAgICAgIGF3YWl0IGFwcGVuZFRvcGljU2VwYXJhdGlvbkZhaWx1cmVMb2codGhpcy5jb25maWcuYXBwLCB0aGlzLmNvbmZpZy5tYW5pZmVzdCwgbXNnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlZ21lbnRzLFxuICAgICAgICBib3VuZGFyaWVzLFxuICAgICAgICBsaW5rc1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gXHVDNzc0XHVCQkY4IFx1Qjg1Q1x1QUU0NVx1QjQxQyBcdUM1RDBcdUI3RUNcdUIyOTQgXHVCMkU0XHVDMkRDIFx1Qjg1Q1x1QUU0NVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NENcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1x1QzJFNFx1RDMyODonKSkge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgLy8gXHVDNjA4XHVDMEMxXHVDRTU4IFx1QkFCQlx1RDU1QyBcdUM1RDBcdUI3RUNcbiAgICAgIGNvbnN0IG1zZyA9IGBcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIFx1QzkxMSBcdUM2MDhcdUMwQzFcdUNFNTggXHVCQUJCXHVENTVDIFx1QzYyNFx1Qjk1ODogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YDtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5hcHApIHtcbiAgICAgICAgYXdhaXQgYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyh0aGlzLmNvbmZpZy5hcHAsIHRoaXMuY29uZmlnLm1hbmlmZXN0LCBtc2csIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUQxNERcdUMyQTRcdUQyQjhcdUM3NTggXHVCOUM4XHVDOUMwXHVCOUM5IE5cdUFDMUMgXHVCQjM4XHVDN0E1XHVDNzQ0IFx1Q0Q5NFx1Q0Q5Q1x1RDU2OVx1QjJDOFx1QjJFNFxuICAgKi9cbiAgcHJpdmF0ZSBnZXRMYXN0TlNlbnRlbmNlcyh0ZXh0OiBzdHJpbmcsIG46IG51bWJlciA9IDMpOiBzdHJpbmcge1xuICAgIC8vIFx1QjlDOFx1Q0U2OFx1RDQ1QywgXHVCMjkwXHVCMDhDXHVENDVDLCBcdUJCM0NcdUM3NENcdUQ0NUNcdUI4NUMgXHVCQjM4XHVDN0E1XHVDNzQ0IFx1QkQ4NFx1QjlBQ1xuICAgIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQuc3BsaXQoLyhbLiE/XSspLykuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgXG4gICAgLy8gXHVCQjM4XHVDN0E1IFx1QzMwRFx1QzczQ1x1Qjg1QyBcdUFENkNcdUMxMzEgKFx1QkIzOFx1QzdBNSArIFx1QUQ2Q1x1QjQ1MFx1QzgxMClcbiAgICBjb25zdCBzZW50ZW5jZUxpc3Q6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZW50ZW5jZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgIGlmIChpICsgMSA8IHNlbnRlbmNlcy5sZW5ndGgpIHtcbiAgICAgICAgc2VudGVuY2VMaXN0LnB1c2goc2VudGVuY2VzW2ldICsgc2VudGVuY2VzW2kgKyAxXSk7XG4gICAgICB9IGVsc2UgaWYgKGkgPCBzZW50ZW5jZXMubGVuZ3RoKSB7XG4gICAgICAgIHNlbnRlbmNlTGlzdC5wdXNoKHNlbnRlbmNlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBOXHVBQzFDIFx1QkIzOFx1QzdBNSBcdUNEOTRcdUNEOUNcbiAgICBjb25zdCBsYXN0U2VudGVuY2VzID0gc2VudGVuY2VMaXN0LnNsaWNlKC1uKTtcbiAgICByZXR1cm4gbGFzdFNlbnRlbmNlcy5qb2luKCcgJykudHJpbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1RDEzNCBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDOTAwXHVCRTQ0XHVENTY5XHVCMkM4XHVCMkU0IChcdUMwQUNcdUM2QTlcdUM3OTAgXHVDOUMwXHVDODE1IFx1RDYxNVx1QzJERClcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IFx1Qzc4NVx1QjgyNSA9IFtcdUQ2MDRcdUM3QUMgXHVDOUM4XHVCQjM4XHVBQ0ZDIFx1QURGOCBcdUIyRjVcdUJDQzBcdUM3NTggXHVEMEE0XHVDNkNDXHVCNERDXSArIFx1Qzc3NFx1QzgwNCBhc3Npc3RhbnQgXHVCOUM4XHVDOUMwXHVCOUM5IDJ+M1x1QkIzOFx1QzdBNSArIFx1RDYwNFx1QzdBQyBcdUM5QzhcdUJCMzggKyBcdUQ2MDRcdUM3QUMgYXNzaXN0YW50IFx1QjlDOFx1QzlDMFx1QjlDOSAyfjNcdUJCMzhcdUM3QTVcbiAgICovXG4gIHByaXZhdGUgcHJlcGFyZVR1cm5UZXh0cyh0dXJuczogQ29udmVyc2F0aW9uVHVybltdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR1cm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0dXJuID0gdHVybnNbaV07XG4gICAgICBsZXQgZW1iZWRkaW5nSW5wdXQgPSAnJztcbiAgICAgIFxuICAgICAgLy8gdXNlci1hc3Npc3RhbnQgXHVDMzBEXHVDNzQ0IFx1Qzc3NFx1QjhFOFx1QjNDNFx1Qjg1RCBcdUNDOThcdUI5QUNcbiAgICAgIGlmICh0dXJuLnJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICAvLyAxLiBcdUQ2MDRcdUM3QUMgXHVDOUM4XHVCQjM4XHVBQ0ZDIFx1QjJFNFx1Qzc0QyBcdUIyRjVcdUJDQzAoXHVDNzg4XHVCMkU0XHVCQTc0KVx1Qzc1OCBcdUQwQTRcdUM2Q0NcdUI0REMgXHVDRDk0XHVDRDlDXG4gICAgICAgIGxldCBjb21iaW5lZFRleHQgPSB0dXJuLmNvbnRlbnQ7XG4gICAgICAgIGxldCBrZXl3b3Jkczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUQxMzRcdUM3NzQgYXNzaXN0YW50XHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgICAgICBpZiAoaSArIDEgPCB0dXJucy5sZW5ndGggJiYgdHVybnNbaSArIDFdLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFR1cm4gPSB0dXJuc1tpICsgMV07XG4gICAgICAgICAgY29tYmluZWRUZXh0ICs9ICcgJyArIG5leHRUdXJuLmNvbnRlbnQ7XG4gICAgICAgICAga2V5d29yZHMgPSBleHRyYWN0S2V5d29yZHMoY29tYmluZWRUZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBrZXl3b3JkcyA9IGV4dHJhY3RLZXl3b3Jkcyh0dXJuLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAyLiBcdUM3NzRcdUM4MDQgYXNzaXN0YW50IFx1QjlDOFx1QzlDMFx1QjlDOSAyfjNcdUJCMzhcdUM3QTUgXHVDRDk0XHVDRDlDIChcdUM3MDhcdUIzQzRcdUM2QjAgXHVDNjI0XHVCQzg0XHVCN0E5KVxuICAgICAgICBsZXQgcHJldmlvdXNBc3Npc3RhbnRPdmVybGFwID0gJyc7XG4gICAgICAgIGZvciAobGV0IGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBpZiAodHVybnNbal0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICAgIHByZXZpb3VzQXNzaXN0YW50T3ZlcmxhcCA9IHRoaXMuZ2V0TGFzdE5TZW50ZW5jZXModHVybnNbal0uY29udGVudCwgMyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDMuIFx1RDYwNFx1QzdBQyBcdUM5QzhcdUJCMzhcbiAgICAgICAgY29uc3QgY3VycmVudFF1ZXN0aW9uID0gdHVybi5jb250ZW50O1xuICAgICAgICBcbiAgICAgICAgLy8gNC4gXHVENjA0XHVDN0FDIFx1QzlDOFx1QkIzOFx1QzVEMCBcdUIzMDBcdUQ1NUMgYXNzaXN0YW50IFx1QjJGNVx1QkNDMFx1Qzc1OCBcdUI5QzhcdUM5QzBcdUI5QzkgMn4zXHVCQjM4XHVDN0E1XG4gICAgICAgIGxldCBjdXJyZW50QXNzaXN0YW50T3ZlcmxhcCA9ICcnO1xuICAgICAgICBpZiAoaSArIDEgPCB0dXJucy5sZW5ndGggJiYgdHVybnNbaSArIDFdLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgY3VycmVudEFzc2lzdGFudE92ZXJsYXAgPSB0aGlzLmdldExhc3ROU2VudGVuY2VzKHR1cm5zW2kgKyAxXS5jb250ZW50LCAzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHVCQUE4XHVCNDUwIFx1RDU2OVx1Q0U1OFx1QUUzMFxuICAgICAgICBjb25zdCBrZXl3b3JkU3RyID0ga2V5d29yZHMubGVuZ3RoID4gMCA/IGBbXHVEMEE0XHVDNkNDXHVCNERDOiAke2tleXdvcmRzLmpvaW4oJywgJyl9XWAgOiAnJztcbiAgICAgICAgZW1iZWRkaW5nSW5wdXQgPSBbXG4gICAgICAgICAga2V5d29yZFN0cixcbiAgICAgICAgICBwcmV2aW91c0Fzc2lzdGFudE92ZXJsYXAsXG4gICAgICAgICAgY3VycmVudFF1ZXN0aW9uLFxuICAgICAgICAgIGN1cnJlbnRBc3Npc3RhbnRPdmVybGFwXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKVxuICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQucHVzaChlbWJlZGRpbmdJbnB1dCk7XG4gICAgICAgIFxuICAgICAgICAvLyBhc3Npc3RhbnQgXHVEMTM0XHVDNzQwIFx1QUM3NFx1QjEwOFx1QjZGMFx1QUUzMCAodXNlciBcdUQxMzRcdUM1RDBcdUMxMUMgXHVDNzc0XHVCQkY4IFx1Q0M5OFx1QjlBQ1x1QjQyOClcbiAgICAgICAgaWYgKGkgKyAxIDwgdHVybnMubGVuZ3RoICYmIHR1cm5zW2kgKyAxXS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0dXJuLnJvbGUgPT09ICdhc3Npc3RhbnQnICYmIChpID09PSAwIHx8IHR1cm5zW2kgLSAxXS5yb2xlICE9PSAndXNlcicpKSB7XG4gICAgICAgIC8vIHVzZXIgXHVDMzBEXHVDNzc0IFx1QzVDNlx1QjI5NCBcdUIzQzVcdUI5QkRcdUM4MDFcdUM3NzggYXNzaXN0YW50IFx1RDEzNFx1Qzc3OCBcdUFDQkRcdUM2QjBcbiAgICAgICAgY29uc3Qga2V5d29yZHMgPSBleHRyYWN0S2V5d29yZHModHVybi5jb250ZW50KTtcbiAgICAgICAgY29uc3QgbGFzdFNlbnRlbmNlcyA9IHRoaXMuZ2V0TGFzdE5TZW50ZW5jZXModHVybi5jb250ZW50LCAzKTtcbiAgICAgICAgY29uc3Qga2V5d29yZFN0ciA9IGtleXdvcmRzLmxlbmd0aCA+IDAgPyBgW1x1RDBBNFx1QzZDQ1x1QjREQzogJHtrZXl3b3Jkcy5qb2luKCcsICcpfV1gIDogJyc7XG4gICAgICAgIFxuICAgICAgICBlbWJlZGRpbmdJbnB1dCA9IFtrZXl3b3JkU3RyLCBsYXN0U2VudGVuY2VzXS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApLmpvaW4oJyAnKTtcbiAgICAgICAgcmVzdWx0LnB1c2goZW1iZWRkaW5nSW5wdXQpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHQgOiB0dXJucy5tYXAodCA9PiB0LmNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzJBQ1x1Qjc3Q1x1Qzc3NFx1QjUyOSBcdUM3MDhcdUIzQzRcdUM2QjAgXHVCQzI5XHVDMkREXHVDNzNDXHVCODVDIFx1QzcyMFx1QzBBQ1x1QjNDNFx1Qjk3QyBcdUFDQzRcdUMwQjBcdUQ1NjlcdUIyQzhcdUIyRTRcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlV2luZG93U2ltaWxhcml0aWVzKGVtYmVkZGluZ3M6IG51bWJlcltdW10pOiBudW1iZXJbXSB7XG4gICAgY29uc3Qgc2ltaWxhcml0aWVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IHdpbmRvd1NpemUgPSB0aGlzLmNvbmZpZy53aW5kb3dTaXplITtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW1iZWRkaW5ncy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUM3MDhcdUIzQzRcdUM2QjA6IFx1RDYwNFx1QzdBQyBcdUQxMzRcdUJEODBcdUQxMzAgd2luZG93U2l6ZVx1QjlDQ1x1RDA3Q1xuICAgICAgY29uc3QgY3VycmVudFdpbmRvdyA9IHRoaXMuY29tYmluZUVtYmVkZGluZ3MoXG4gICAgICAgIGVtYmVkZGluZ3Muc2xpY2UoTWF0aC5tYXgoMCwgaSAtIHdpbmRvd1NpemUgKyAxKSwgaSArIDEpXG4gICAgICApO1xuXG4gICAgICAvLyBcdUIyRTRcdUM3NEMgXHVDNzA4XHVCM0M0XHVDNkIwOiBcdUIyRTRcdUM3NEMgXHVEMTM0XG4gICAgICBjb25zdCBuZXh0V2luZG93ID0gZW1iZWRkaW5nc1tpICsgMV07XG5cbiAgICAgIC8vIFx1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDQzRcdUMwQjBcbiAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSBjb3NpbmVTaW1pbGFyaXR5KGN1cnJlbnRXaW5kb3csIG5leHRXaW5kb3cpO1xuICAgICAgc2ltaWxhcml0aWVzLnB1c2goc2ltaWxhcml0eSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNpbWlsYXJpdGllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM1RUNcdUI3RUMgXHVDNzg0XHVCQ0EwXHVCNTI5XHVDNzQ0IFx1RDNDOVx1QURFMFx1RDU1OFx1QzVFQyBcdUQ1NThcdUIwOThcdUI4NUMgXHVBQ0IwXHVENTY5XHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGNvbWJpbmVFbWJlZGRpbmdzKGVtYmVkZGluZ3M6IG51bWJlcltdW10pOiBudW1iZXJbXSB7XG4gICAgLy8gXHVCQzI5XHVDNUI0XHVDODAxIFx1RDUwNFx1Qjg1Q1x1QURGOFx1Qjc5OFx1QkMwRDogXHVDNzc0XHVCODYwXHVDODAxXHVDNzNDXHVCODVDIHVucmVhY2hhYmxlXHVENTU4XHVDOUMwXHVCOUNDIFx1RDBDMFx1Qzc4NSBcdUM1NDhcdUM4MTVcdUMxMzFcdUM3NDQgXHVDNzA0XHVENTc0IFx1QzcyMFx1QzlDMFxuICAgIGlmIChlbWJlZGRpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQzMwXHVDNUY0XHVDNzc0IFx1QkU0NFx1QzVCNFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNCcpO1xuICAgIH1cblxuICAgIGlmIChlbWJlZGRpbmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGVtYmVkZGluZ3NbMF07XG4gICAgfVxuXG4gICAgY29uc3QgZGltID0gZW1iZWRkaW5nc1swXS5sZW5ndGg7XG4gICAgY29uc3QgY29tYmluZWQgPSBuZXcgQXJyYXkoZGltKS5maWxsKDApO1xuXG4gICAgZm9yIChjb25zdCBlbWJlZGRpbmcgb2YgZW1iZWRkaW5ncykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW07IGkrKykge1xuICAgICAgICBjb21iaW5lZFtpXSArPSBlbWJlZGRpbmdbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVEM0M5XHVBREUwIFx1QUNDNFx1QzBCMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGltOyBpKyspIHtcbiAgICAgIGNvbWJpbmVkW2ldIC89IGVtYmVkZGluZ3MubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiBjb21iaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM4RkNcdUM4MUMgXHVBQ0JEXHVBQ0M0XHVCOTdDIFx1RDBEMFx1QzlDMFx1RDU2OVx1QjJDOFx1QjJFNFxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3RUb3BpY0JvdW5kYXJpZXMoc2ltaWxhcml0aWVzOiBudW1iZXJbXSk6IFRvcGljQm91bmRhcnlbXSB7XG4gICAgY29uc3QgYm91bmRhcmllczogVG9waWNCb3VuZGFyeVtdID0gW107XG4gICAgY29uc3QgdGhyZXNob2xkID0gdGhpcy5jb25maWcuc2ltaWxhcml0eVRocmVzaG9sZCE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpbWlsYXJpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHNpbWlsYXJpdGllc1tpXTtcblxuICAgICAgLy8gXHVDNzIwXHVDMEFDXHVCM0M0XHVBQzAwIFx1Qzc4NFx1QUNDNFx1QUMxMiBcdUJCRjhcdUI5Q0NcdUM3NzRcdUFDNzBcdUIwOTggXHVBRTA5XHVBQ0E5XHVENzg4IFx1RDU1OFx1Qjc3RFx1RDU1QyBcdUFDQkRcdUM2QjBcbiAgICAgIGNvbnN0IGlzUHJpbWFyeUJvdW5kYXJ5ID0gc2ltaWxhcml0eSA8IHRocmVzaG9sZDtcblxuICAgICAgLy8gXHVDNzc0XHVDODA0IFx1QjMwMFx1QkU0NCBcdUFFMDlcdUFDQTlcdUQ1NUMgXHVENTU4XHVCNzdEIFx1QUMxMFx1QzlDMFxuICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgIGNvbnN0IHByZXZTaW1pbGFyaXR5ID0gc2ltaWxhcml0aWVzW2kgLSAxXTtcbiAgICAgICAgY29uc3QgZHJvcCA9IHByZXZTaW1pbGFyaXR5IC0gc2ltaWxhcml0eTtcbiAgICAgICAgXG4gICAgICAgIC8vIDAuMTUgXHVDNzc0XHVDMEMxIFx1QUUwOVx1QUNBOVx1RDc4OCBcdUQ1NThcdUI3N0RcdUQ1NUMgXHVBQ0JEXHVDNkIwXHVCM0M0IFx1QUNCRFx1QUNDNFx1Qjg1QyBcdUFDMDRcdUM4RkNcbiAgICAgICAgaWYgKGRyb3AgPiAwLjE1KSB7XG4gICAgICAgICAgYm91bmRhcmllcy5wdXNoKHtcbiAgICAgICAgICAgIGluZGV4OiBpICsgMSwgLy8gXHVCMkU0XHVDNzRDIFx1RDEzNFx1QkQ4MFx1RDEzMCBcdUMwQzhcdUI4NUNcdUM2QjQgXHVDOEZDXHVDODFDXG4gICAgICAgICAgICBzaW1pbGFyaXR5LFxuICAgICAgICAgICAgaXNQcmltYXJ5Qm91bmRhcnk6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNQcmltYXJ5Qm91bmRhcnkpIHtcbiAgICAgICAgYm91bmRhcmllcy5wdXNoKHtcbiAgICAgICAgICBpbmRleDogaSArIDEsXG4gICAgICAgICAgc2ltaWxhcml0eSxcbiAgICAgICAgICBpc1ByaW1hcnlCb3VuZGFyeTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYm91bmRhcmllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjhcdUI5N0MgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVNlZ21lbnRzKFxuICAgIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10sXG4gICAgYm91bmRhcmllczogVG9waWNCb3VuZGFyeVtdLFxuICAgIHNpbWlsYXJpdGllczogbnVtYmVyW11cbiAgKTogQ29udmVyc2F0aW9uU2VnbWVudFtdIHtcbiAgICBjb25zdCBzZWdtZW50czogQ29udmVyc2F0aW9uU2VnbWVudFtdID0gW107XG4gICAgY29uc3QgYm91bmRhcnlJbmRpY2VzID0gYm91bmRhcmllcy5tYXAoYiA9PiBiLmluZGV4KS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgY29uc3QgbWluU2VnbWVudExlbmd0aCA9IHRoaXMuY29uZmlnLm1pblNlZ21lbnRMZW5ndGghO1xuXG4gICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xuICAgIGZvciAoY29uc3QgZW5kSW5kZXggb2YgYm91bmRhcnlJbmRpY2VzKSB7XG4gICAgICBpZiAoZW5kSW5kZXggLSBzdGFydEluZGV4ID49IG1pblNlZ21lbnRMZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudFR1cm5zID0gdHVybnMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuICAgICAgICBjb25zdCBrZXl3b3JkcyA9IHRoaXMuZXh0cmFjdFNlZ21lbnRLZXl3b3JkcyhzZWdtZW50VHVybnMpO1xuICAgICAgICBjb25zdCBhdmdTaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlU2ltaWxhcml0eShzaW1pbGFyaXRpZXMsIHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcblxuICAgICAgICBzZWdtZW50cy5wdXNoKHtcbiAgICAgICAgICBzdGFydEluZGV4LFxuICAgICAgICAgIGVuZEluZGV4LFxuICAgICAgICAgIHR1cm5zOiBzZWdtZW50VHVybnMsXG4gICAgICAgICAga2V5d29yZHMsXG4gICAgICAgICAgYXZnU2ltaWxhcml0eVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4O1xuICAgIH1cblxuICAgIC8vIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjhcbiAgICBpZiAoc3RhcnRJbmRleCA8IHR1cm5zLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc2VnbWVudFR1cm5zID0gdHVybnMuc2xpY2Uoc3RhcnRJbmRleCk7XG4gICAgICBjb25zdCBrZXl3b3JkcyA9IHRoaXMuZXh0cmFjdFNlZ21lbnRLZXl3b3JkcyhzZWdtZW50VHVybnMpO1xuICAgICAgY29uc3QgYXZnU2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlQXZlcmFnZVNpbWlsYXJpdHkoc2ltaWxhcml0aWVzLCBzdGFydEluZGV4LCB0dXJucy5sZW5ndGgpO1xuXG4gICAgICBzZWdtZW50cy5wdXNoKHtcbiAgICAgICAgc3RhcnRJbmRleCxcbiAgICAgICAgZW5kSW5kZXg6IHR1cm5zLmxlbmd0aCxcbiAgICAgICAgdHVybnM6IHNlZ21lbnRUdXJucyxcbiAgICAgICAga2V5d29yZHMsXG4gICAgICAgIGF2Z1NpbWlsYXJpdHlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBzZWdtZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjhcdUM3NTggXHVEMEE0XHVDNkNDXHVCNERDXHVCOTdDIFx1Q0Q5NFx1Q0Q5Q1x1RDU2OVx1QjJDOFx1QjJFNFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0U2VnbWVudEtleXdvcmRzKHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYWxsVGV4dCA9IHR1cm5zLm1hcCh0ID0+IHQuY29udGVudCkuam9pbignICcpO1xuICAgIHJldHVybiBleHRyYWN0S2V5d29yZHMoYWxsVGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogXHVBRDZDXHVBQzA0XHVDNzU4IFx1RDNDOVx1QURFMCBcdUM3MjBcdUMwQUNcdUIzQzRcdUI5N0MgXHVBQ0M0XHVDMEIwXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUF2ZXJhZ2VTaW1pbGFyaXR5KHNpbWlsYXJpdGllczogbnVtYmVyW10sIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoc3RhcnQgPj0gZW5kIC0gMSkge1xuICAgICAgcmV0dXJuIDEuMDtcbiAgICB9XG5cbiAgICBjb25zdCByZWxldmFudFNpbWlsYXJpdGllcyA9IHNpbWlsYXJpdGllcy5zbGljZShzdGFydCwgTWF0aC5taW4oZW5kIC0gMSwgc2ltaWxhcml0aWVzLmxlbmd0aCkpO1xuICAgIGlmIChyZWxldmFudFNpbWlsYXJpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAxLjA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3VtID0gcmVsZXZhbnRTaW1pbGFyaXRpZXMucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICsgdmFsLCAwKTtcbiAgICByZXR1cm4gc3VtIC8gcmVsZXZhbnRTaW1pbGFyaXRpZXMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUFDMDQgXHVCOUMxXHVEMDZDXHVCOTdDIFx1QkQ4NFx1QzExRFx1RDU2OVx1QjJDOFx1QjJFNFxuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplU2VnbWVudExpbmtzKHNlZ21lbnRzOiBDb252ZXJzYXRpb25TZWdtZW50W10pOiBTZWdtZW50TGlua1tdIHtcbiAgICBjb25zdCBsaW5rczogU2VnbWVudExpbmtbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgc2VnbWVudHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudEEgPSBzZWdtZW50c1tpXTtcbiAgICAgICAgY29uc3Qgc2VnbWVudEIgPSBzZWdtZW50c1tqXTtcblxuICAgICAgICAvLyBcdUFDRjVcdUQxQjUgXHVEMEE0XHVDNkNDXHVCNERDIFx1Q0MzRVx1QUUzMFxuICAgICAgICBjb25zdCBjb21tb25LZXl3b3JkcyA9IHNlZ21lbnRBLmtleXdvcmRzLmZpbHRlcihrID0+IHNlZ21lbnRCLmtleXdvcmRzLmluY2x1ZGVzKGspKTtcblxuICAgICAgICBpZiAoY29tbW9uS2V5d29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIFx1QzVGMFx1QUQwMFx1QzEzMSBcdUM4MTBcdUMyMTggXHVBQ0M0XHVDMEIwIChKYWNjYXJkIFx1QzcyMFx1QzBBQ1x1QjNDNClcbiAgICAgICAgICBjb25zdCB1bmlvblNpemUgPSBuZXcgU2V0KFsuLi5zZWdtZW50QS5rZXl3b3JkcywgLi4uc2VnbWVudEIua2V5d29yZHNdKS5zaXplO1xuICAgICAgICAgIGNvbnN0IHJlbGV2YW5jZVNjb3JlID0gY29tbW9uS2V5d29yZHMubGVuZ3RoIC8gdW5pb25TaXplO1xuXG4gICAgICAgICAgLy8gXHVDRDVDXHVDMThDIFx1QzVGMFx1QUQwMFx1QzEzMSBcdUM3ODRcdUFDQzRcdUFDMTIgKDAuMSlcbiAgICAgICAgICBpZiAocmVsZXZhbmNlU2NvcmUgPiAwLjEpIHtcbiAgICAgICAgICAgIGxpbmtzLnB1c2goe1xuICAgICAgICAgICAgICBmcm9tU2VnbWVudDogaSxcbiAgICAgICAgICAgICAgdG9TZWdtZW50OiBqLFxuICAgICAgICAgICAgICBjb21tb25LZXl3b3JkcyxcbiAgICAgICAgICAgICAgcmVsZXZhbmNlU2NvcmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsaW5rcztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNFOTBcdUMyRENcdUI5N0MgXHVDRDA4XHVBRTMwXHVENjU0XHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMuZW1iZWRkaW5nR2VuZXJhdG9yLmNsZWFyQ2FjaGUoKTtcbiAgfVxufVxuIiwgIi8qKlxuICogXHVCMkU0XHVDOTExIFx1QjE3OFx1RDJCOCBcdUM4MDBcdUM3QTUgXHVCQUE4XHVCNEM4XG4gKiBcbiAqIFx1QzhGQ1x1QzgxQ1x1QkNDNFx1Qjg1QyBcdUJEODRcdUI5QUNcdUI0MUMgXHVCMzAwXHVENjU0XHVCOTdDIFx1QzVFQ1x1QjdFQyBcdUIxNzhcdUQyQjhcdUI4NUMgXHVDODAwXHVDN0E1XHVENTU4XHVBQ0UwIFx1QjlDMVx1RDA2Q1x1Qjg1QyBcdUM1RjBcdUFDQjBcdUQ1NjlcdUIyQzhcdUIyRTQuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBWYXVsdCwgQXBwLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSB7IENvbnZlcnNhdGlvblNlZ21lbnQsIFNlZ21lbnRMaW5rIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBjb252ZXJ0VG9NYXJrZG93biB9IGZyb20gJy4uL2NvbnZlcnNhdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXVsdGlOb3RlU2F2ZVJlc3VsdCB7XG4gIG5vdGVQYXRoczogc3RyaW5nW107XG4gIG1haW5Ob3RlUGF0aDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOFx1Qjk3QyBcdUFDMUNcdUJDQzQgXHVCMTc4XHVEMkI4XHVCODVDIFx1QzgwMFx1QzdBNVx1RDU2OVx1QjJDOFx1QjJFNFxuICogQHBhcmFtIHZhdWx0IE9ic2lkaWFuIFZhdWx0XG4gKiBAcGFyYW0gc2VnbWVudHMgXHVCMzAwXHVENjU0IFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUJDMzBcdUM1RjRcbiAqIEBwYXJhbSBsaW5rcyBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjggXHVBQzA0IFx1QjlDMVx1RDA2Q1xuICogQHBhcmFtIGJhc2VUaXRsZSBcdUFFMzBcdUJDRjggXHVDODFDXHVCQUE5XG4gKiBAcGFyYW0gb3V0cHV0Rm9sZGVyIFx1QzgwMFx1QzdBNSBcdUQzRjRcdUIzNTRcbiAqIEBwYXJhbSBhcHAgT2JzaWRpYW4gXHVDNTcxIFx1Qzc3OFx1QzJBNFx1RDEzNFx1QzJBNCAoXHVCODVDXHVBRTQ1XHVDNkE5KVxuICogQHBhcmFtIG1hbmlmZXN0IFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUI5RTRcdUIyQzhcdUQzOThcdUMyQTRcdUQyQjggKFx1Qjg1Q1x1QUU0NVx1QzZBOSlcbiAqIEByZXR1cm5zIFx1QzgwMFx1QzdBNVx1QjQxQyBcdUIxNzhcdUQyQjggXHVBQ0JEXHVCODVDXHVCNEU0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU2VnbWVudHNBc05vdGVzKFxuICB2YXVsdDogVmF1bHQsXG4gIHNlZ21lbnRzOiBDb252ZXJzYXRpb25TZWdtZW50W10sXG4gIGxpbmtzOiBTZWdtZW50TGlua1tdLFxuICBiYXNlVGl0bGU6IHN0cmluZyxcbiAgb3V0cHV0Rm9sZGVyOiBzdHJpbmcsXG4gIGFwcD86IEFwcCxcbiAgbWFuaWZlc3Q/OiBQbHVnaW5NYW5pZmVzdFxuKTogUHJvbWlzZTxNdWx0aU5vdGVTYXZlUmVzdWx0PiB7XG4gIGNvbnN0IG5vdGVQYXRoczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgY2xlYW5lZEZvbGRlciA9IG91dHB1dEZvbGRlciA/IG5vcm1hbGl6ZVBhdGgob3V0cHV0Rm9sZGVyKS5yZXBsYWNlKC9eXFwvKy8sICcnKSA6ICcnO1xuXG4gIC8vIFx1RDNGNFx1QjM1NCBcdUMwRERcdUMxMzFcbiAgaWYgKGNsZWFuZWRGb2xkZXIpIHtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHModmF1bHQsIGNsZWFuZWRGb2xkZXIpO1xuICB9XG5cbiAgLy8gXHVBQzAxIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOFx1Qjk3QyBcdUFDMUNcdUJDQzQgXHVCMTc4XHVEMkI4XHVCODVDIFx1QzgwMFx1QzdBNVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgIGNvbnN0IHNlZ21lbnRUaXRsZSA9IGF3YWl0IGdlbmVyYXRlU2VnbWVudFRpdGxlKHNlZ21lbnQsIGJhc2VUaXRsZSwgaSArIDEpO1xuICAgIGNvbnN0IG1hcmtkb3duID0gZ2VuZXJhdGVTZWdtZW50TWFya2Rvd24oc2VnbWVudCwgaSwgc2VnbWVudHMubGVuZ3RoLCBsaW5rcywgbm90ZVBhdGhzKTtcblxuICAgIGNvbnN0IGZpbGVuYW1lID0gc2FuaXRpemVGaWxlbmFtZShzZWdtZW50VGl0bGUpICsgJy5tZCc7XG4gICAgY29uc3QgdGFyZ2V0UGF0aCA9IGF3YWl0IGVuc3VyZVVuaXF1ZVBhdGgoXG4gICAgICB2YXVsdCxcbiAgICAgIG5vcm1hbGl6ZVBhdGgoY2xlYW5lZEZvbGRlciA/IGAke2NsZWFuZWRGb2xkZXJ9LyR7ZmlsZW5hbWV9YCA6IGZpbGVuYW1lKVxuICAgICk7XG5cbiAgICBhd2FpdCB2YXVsdC5jcmVhdGUodGFyZ2V0UGF0aCwgbWFya2Rvd24pO1xuICAgIG5vdGVQYXRocy5wdXNoKHRhcmdldFBhdGgpO1xuICB9XG5cbiAgLy8gXHVCQTU0XHVDNzc4IFx1Qzc3OFx1QjM3MVx1QzJBNCBcdUIxNzhcdUQyQjggXHVDMEREXHVDMTMxXG4gIGNvbnN0IG1haW5Ob3RlUGF0aCA9IGF3YWl0IGNyZWF0ZU1haW5JbmRleE5vdGUodmF1bHQsIHNlZ21lbnRzLCBub3RlUGF0aHMsIGJhc2VUaXRsZSwgY2xlYW5lZEZvbGRlcik7XG5cbiAgcmV0dXJuIHtcbiAgICBub3RlUGF0aHMsXG4gICAgbWFpbk5vdGVQYXRoXG4gIH07XG59XG5cbi8qKlxuICogXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4XHVDNzU4IFx1QzgxQ1x1QkFBOVx1Qzc0NCBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVTZWdtZW50VGl0bGUoXG4gIHNlZ21lbnQ6IENvbnZlcnNhdGlvblNlZ21lbnQsXG4gIGJhc2VUaXRsZTogc3RyaW5nLFxuICBzZWdtZW50TnVtYmVyOiBudW1iZXJcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIFx1RDBBNFx1QzZDQ1x1QjREQyBcdUFFMzBcdUJDMTggXHVDODFDXHVCQUE5IFx1QzBERFx1QzEzMVxuICBjb25zdCB0b3BLZXl3b3JkcyA9IHNlZ21lbnQua2V5d29yZHMuc2xpY2UoMCwgMykuam9pbignLCAnKTtcbiAgXG4gIGlmICh0b3BLZXl3b3Jkcykge1xuICAgIHJldHVybiBgJHtiYXNlVGl0bGV9IC0gJHtzZWdtZW50TnVtYmVyfS4gJHt0b3BLZXl3b3Jkc31gO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHtiYXNlVGl0bGV9IC0gXHVDOEZDXHVDODFDICR7c2VnbWVudE51bWJlcn1gO1xuICB9XG59XG5cbi8qKlxuICogXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4XHVCOTdDIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNFx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NThcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVTZWdtZW50TWFya2Rvd24oXG4gIHNlZ21lbnQ6IENvbnZlcnNhdGlvblNlZ21lbnQsXG4gIHNlZ21lbnRJbmRleDogbnVtYmVyLFxuICB0b3RhbFNlZ21lbnRzOiBudW1iZXIsXG4gIGxpbmtzOiBTZWdtZW50TGlua1tdLFxuICBub3RlUGF0aHM6IHN0cmluZ1tdXG4pOiBzdHJpbmcge1xuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzBcbiAgbGluZXMucHVzaCgnLS0tJyk7XG4gIGxpbmVzLnB1c2goYHNlZ21lbnQ6ICR7c2VnbWVudEluZGV4ICsgMX0vJHt0b3RhbFNlZ21lbnRzfWApO1xuICBsaW5lcy5wdXNoKGBrZXl3b3JkczogWyR7c2VnbWVudC5rZXl3b3Jkcy5qb2luKCcsICcpfV1gKTtcbiAgbGluZXMucHVzaChgYXZnU2ltaWxhcml0eTogJHtzZWdtZW50LmF2Z1NpbWlsYXJpdHkudG9GaXhlZCgzKX1gKTtcbiAgbGluZXMucHVzaCgnLS0tJyk7XG4gIGxpbmVzLnB1c2goJycpO1xuXG4gIC8vIFx1QzgxQ1x1QkFBOVxuICBsaW5lcy5wdXNoKGAjIFx1QzhGQ1x1QzgxQyAke3NlZ21lbnRJbmRleCArIDF9YCk7XG4gIGxpbmVzLnB1c2goJycpO1xuXG4gIC8vIFx1RDBBNFx1QzZDQ1x1QjREQ1xuICBpZiAoc2VnbWVudC5rZXl3b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgbGluZXMucHVzaCgnIyMgXHVDOEZDXHVDNjk0IFx1RDBBNFx1QzZDQ1x1QjREQycpO1xuICAgIGxpbmVzLnB1c2goJycpO1xuICAgIGxpbmVzLnB1c2goc2VnbWVudC5rZXl3b3Jkcy5tYXAoayA9PiBgLSAke2t9YCkuam9pbignXFxuJykpO1xuICAgIGxpbmVzLnB1c2goJycpO1xuICB9XG5cbiAgLy8gXHVDNUYwXHVBRDAwIFx1QzhGQ1x1QzgxQyBcdUI5QzFcdUQwNkNcbiAgY29uc3QgcmVsYXRlZExpbmtzID0gbGlua3MuZmlsdGVyKFxuICAgIGxpbmsgPT4gbGluay5mcm9tU2VnbWVudCA9PT0gc2VnbWVudEluZGV4IHx8IGxpbmsudG9TZWdtZW50ID09PSBzZWdtZW50SW5kZXhcbiAgKTtcblxuICBpZiAocmVsYXRlZExpbmtzLmxlbmd0aCA+IDApIHtcbiAgICBsaW5lcy5wdXNoKCcjIyBcdUM1RjBcdUFEMDAgXHVDOEZDXHVDODFDJyk7XG4gICAgbGluZXMucHVzaCgnJyk7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmsgb2YgcmVsYXRlZExpbmtzKSB7XG4gICAgICBjb25zdCB0YXJnZXRJbmRleCA9IGxpbmsuZnJvbVNlZ21lbnQgPT09IHNlZ21lbnRJbmRleCA/IGxpbmsudG9TZWdtZW50IDogbGluay5mcm9tU2VnbWVudDtcbiAgICAgIFxuICAgICAgaWYgKG5vdGVQYXRoc1t0YXJnZXRJbmRleF0pIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IG5vdGVQYXRoc1t0YXJnZXRJbmRleF07XG4gICAgICAgIGNvbnN0IHRhcmdldE5hbWUgPSB0YXJnZXRQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCBgXHVDOEZDXHVDODFDICR7dGFyZ2V0SW5kZXggKyAxfWA7XG4gICAgICAgIGNvbnN0IGNvbW1vbktleXdvcmRzVGV4dCA9IGxpbmsuY29tbW9uS2V5d29yZHMuc2xpY2UoMCwgMykuam9pbignLCAnKTtcbiAgICAgICAgXG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske3RhcmdldFBhdGgucmVwbGFjZSgnLm1kJywgJycpfXwke3RhcmdldE5hbWV9XV0gKCR7Y29tbW9uS2V5d29yZHNUZXh0fSlgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGluZXMucHVzaCgnJyk7XG4gIH1cblxuICAvLyBcdUIzMDBcdUQ2NTQgXHVCMEI0XHVDNkE5XG4gIGxpbmVzLnB1c2goJyMjIFx1QjMwMFx1RDY1NCBcdUIwQjRcdUM2QTknKTtcbiAgbGluZXMucHVzaCgnJyk7XG5cbiAgZm9yIChjb25zdCB0dXJuIG9mIHNlZ21lbnQudHVybnMpIHtcbiAgICBjb25zdCByb2xlRW1vamkgPSB0dXJuLnJvbGUgPT09ICd1c2VyJyA/ICdcdUQ4M0RcdURDNjQnIDogJ1x1RDgzRVx1REQxNic7XG4gICAgY29uc3Qgcm9sZUxhYmVsID0gdHVybi5yb2xlID09PSAndXNlcicgPyAnXHVDMEFDXHVDNkE5XHVDNzkwJyA6ICdcdUM1QjRcdUMyRENcdUMyQTRcdUQxMzRcdUQyQjgnO1xuICAgIFxuICAgIGxpbmVzLnB1c2goYCMjIyAke3JvbGVFbW9qaX0gJHtyb2xlTGFiZWx9YCk7XG4gICAgXG4gICAgaWYgKHR1cm4udGltZXN0YW1wKSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSB0eXBlb2YgdHVybi50aW1lc3RhbXAgPT09ICdzdHJpbmcnXG4gICAgICAgID8gdHVybi50aW1lc3RhbXBcbiAgICAgICAgOiB0dXJuLnRpbWVzdGFtcC50b0lTT1N0cmluZygpO1xuICAgICAgbGluZXMucHVzaChgKiR7dGltZXN0YW1wfSpgKTtcbiAgICAgIGxpbmVzLnB1c2goJycpO1xuICAgIH1cbiAgICBcbiAgICBsaW5lcy5wdXNoKHR1cm4uY29udGVudCk7XG4gICAgbGluZXMucHVzaCgnJyk7XG4gIH1cblxuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbi8qKlxuICogXHVCQTU0XHVDNzc4IFx1Qzc3OFx1QjM3MVx1QzJBNCBcdUIxNzhcdUQyQjhcdUI5N0MgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1haW5JbmRleE5vdGUoXG4gIHZhdWx0OiBWYXVsdCxcbiAgc2VnbWVudHM6IENvbnZlcnNhdGlvblNlZ21lbnRbXSxcbiAgbm90ZVBhdGhzOiBzdHJpbmdbXSxcbiAgYmFzZVRpdGxlOiBzdHJpbmcsXG4gIGZvbGRlcjogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBcdUM4MUNcdUJBQTlcbiAgbGluZXMucHVzaChgIyAke2Jhc2VUaXRsZX0gLSBcdUM4MDRcdUNDQjQgXHVDNzc4XHVCMzcxXHVDMkE0YCk7XG4gIGxpbmVzLnB1c2goJycpO1xuXG4gIC8vIFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMFxuICBsaW5lcy5wdXNoKCctLS0nKTtcbiAgbGluZXMucHVzaChgdG90YWxTZWdtZW50czogJHtzZWdtZW50cy5sZW5ndGh9YCk7XG4gIGxpbmVzLnB1c2goYGNyZWF0ZWRBdDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCk7XG4gIGxpbmVzLnB1c2goJy0tLScpO1xuICBsaW5lcy5wdXNoKCcnKTtcblxuICAvLyBcdUM2OTRcdUM1N0RcbiAgbGluZXMucHVzaCgnIyMgXHVBQzFDXHVDNjk0Jyk7XG4gIGxpbmVzLnB1c2goJycpO1xuICBsaW5lcy5wdXNoKGBcdUM3NzQgXHVCMzAwXHVENjU0XHVCMjk0ICR7c2VnbWVudHMubGVuZ3RofVx1QUMxQ1x1Qzc1OCBcdUM4RkNcdUM4MUNcdUI4NUMgXHVCRDg0XHVCOUFDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LmApO1xuICBsaW5lcy5wdXNoKCcnKTtcblxuICAvLyBcdUM4RkNcdUM4MUMgXHVCQUE5XHVCODVEXG4gIGxpbmVzLnB1c2goJyMjIFx1QzhGQ1x1QzgxQyBcdUJBQTlcdUI4NUQnKTtcbiAgbGluZXMucHVzaCgnJyk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICBjb25zdCBub3RlUGF0aCA9IG5vdGVQYXRoc1tpXTtcbiAgICBjb25zdCBub3RlTmFtZSA9IG5vdGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCBgXHVDOEZDXHVDODFDICR7aSArIDF9YDtcbiAgICBjb25zdCBrZXl3b3JkcyA9IHNlZ21lbnQua2V5d29yZHMuc2xpY2UoMCwgMykuam9pbignLCAnKTtcblxuICAgIGxpbmVzLnB1c2goYCMjIyAke2kgKyAxfS4gW1ske25vdGVQYXRoLnJlcGxhY2UoJy5tZCcsICcnKX18JHtub3RlTmFtZX1dXWApO1xuICAgIGxpbmVzLnB1c2goJycpO1xuICAgIGxpbmVzLnB1c2goYCoqXHVEMEE0XHVDNkNDXHVCNERDKio6ICR7a2V5d29yZHN9YCk7XG4gICAgbGluZXMucHVzaChgKipcdUQxMzQgXHVDMjE4Kio6ICR7c2VnbWVudC50dXJucy5sZW5ndGh9YCk7XG4gICAgbGluZXMucHVzaChgKipcdUM3MjBcdUMwQUNcdUIzQzQqKjogJHsoc2VnbWVudC5hdmdTaW1pbGFyaXR5ICogMTAwKS50b0ZpeGVkKDEpfSVgKTtcbiAgICBsaW5lcy5wdXNoKCcnKTtcbiAgfVxuXG4gIGNvbnN0IG1hcmtkb3duID0gbGluZXMuam9pbignXFxuJyk7XG4gIGNvbnN0IGZpbGVuYW1lID0gc2FuaXRpemVGaWxlbmFtZShiYXNlVGl0bGUpICsgJy1cdUM3NzhcdUIzNzFcdUMyQTQubWQnO1xuICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgZW5zdXJlVW5pcXVlUGF0aChcbiAgICB2YXVsdCxcbiAgICBub3JtYWxpemVQYXRoKGZvbGRlciA/IGAke2ZvbGRlcn0vJHtmaWxlbmFtZX1gIDogZmlsZW5hbWUpXG4gICk7XG5cbiAgYXdhaXQgdmF1bHQuY3JlYXRlKHRhcmdldFBhdGgsIG1hcmtkb3duKTtcbiAgcmV0dXJuIHRhcmdldFBhdGg7XG59XG5cbi8qKlxuICogXHVEMzBDXHVDNzdDXHVCQTg1XHVDNzQ0IFx1QzU0OFx1QzgwNFx1RDU1OFx1QUM4QyBcdUJDQzBcdUQ2NThcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqL1xuZnVuY3Rpb24gc2FuaXRpemVGaWxlbmFtZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSB7XG4gICAgcmV0dXJuICd1bnRpdGxlZCc7XG4gIH1cblxuICBjb25zdCBjbGVhbmVkID0gdHJpbW1lZFxuICAgIC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJyAnKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJylcbiAgICAudHJpbSgpO1xuXG4gIHJldHVybiBjbGVhbmVkIHx8ICd1bnRpdGxlZCc7XG59XG5cbi8qKlxuICogXHVEM0Y0XHVCMzU0XHVBQzAwIFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcdUQ1NThcdUFDRTAgXHVDNUM2XHVDNzNDXHVCQTc0IFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNFxuICovXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXJFeGlzdHModmF1bHQ6IFZhdWx0LCBmb2xkZXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBleGlzdHMgPSBhd2FpdCB2YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXIpO1xuICBpZiAoIWV4aXN0cykge1xuICAgIGF3YWl0IHZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIpO1xuICB9XG59XG5cbi8qKlxuICogXHVBQ0UwXHVDNzIwXHVENTVDIFx1RDMwQ1x1Qzc3QyBcdUFDQkRcdUI4NUNcdUI5N0MgXHVCQ0Y0XHVDN0E1XHVENTY5XHVCMkM4XHVCMkU0XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZVVuaXF1ZVBhdGgodmF1bHQ6IFZhdWx0LCBwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChwYXRoKTtcbiAgY29uc3QgZXh0ZW5zaW9uSW5kZXggPSBub3JtYWxpemVkLmxhc3RJbmRleE9mKCcubWQnKTtcbiAgY29uc3QgYmFzZSA9IGV4dGVuc2lvbkluZGV4ID09PSAtMSA/IG5vcm1hbGl6ZWQgOiBub3JtYWxpemVkLnNsaWNlKDAsIGV4dGVuc2lvbkluZGV4KTtcbiAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uSW5kZXggPT09IC0xID8gJycgOiAnLm1kJztcblxuICBsZXQgY2FuZGlkYXRlID0gbm9ybWFsaXplZDtcbiAgbGV0IGNvdW50ID0gMTtcblxuICB3aGlsZSAoYXdhaXQgdmF1bHQuYWRhcHRlci5leGlzdHMoY2FuZGlkYXRlKSkge1xuICAgIGNhbmRpZGF0ZSA9IGAke2Jhc2V9LSR7Y291bnR9JHtleHRlbnNpb259YDtcbiAgICBjb3VudCArPSAxO1xuICB9XG5cbiAgcmV0dXJuIGNhbmRpZGF0ZTtcbn1cbiIsICIvLyBTUUxpdGUgXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNVx1QzE4Q1xuXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSBcImJldHRlci1zcWxpdGUzXCI7XG5pbXBvcnQgeyBOb3RlTWV0YWRhdGEsIENodW5rIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIE1ldGFkYXRhU3RvcmUge1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZS5EYXRhYmFzZTtcblxuICBjb25zdHJ1Y3RvcihkYlBhdGg6IHN0cmluZykge1xuICAgIHRoaXMuZGIgPSBuZXcgRGF0YWJhc2UoZGJQYXRoKTtcbiAgICB0aGlzLmluaXRpYWxpemVTY2hlbWEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVDMkE0XHVEMEE0XHVCOUM4IFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplU2NoZW1hKCk6IHZvaWQge1xuICAgIHRoaXMuZGIuZXhlYyhgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBub3RlcyAoXG4gICAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgICAgIHBhdGggVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIHRhZ3MgVEVYVCwgLS0gSlNPTiBhcnJheVxuICAgICAgICBsaW5rcyBURVhULCAtLSBKU09OIGFycmF5XG4gICAgICAgIGZyb250bWF0dGVyIFRFWFQsIC0tIEpTT04gb2JqZWN0XG4gICAgICAgIHVwZGF0ZWRfYXQgSU5URUdFUiBOT1QgTlVMTCxcbiAgICAgICAgaGFzaCBURVhUIE5PVCBOVUxMLFxuICAgICAgICBtb2RpZmllZF9hdCBJTlRFR0VSIC0tIFx1RDMwQ1x1Qzc3Q1x1QzJEQ1x1QzJBNFx1RDE1QyBcdUMyMThcdUM4MTUgXHVDMkRDXHVBQzA0XG4gICAgICApO1xuXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjaHVua3MgKFxuICAgICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgICBub3RlX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIHRleHQgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgcG9zaXRpb24gSU5URUdFUiBOT1QgTlVMTCxcbiAgICAgICAgdG9rZW5fY291bnQgSU5URUdFUiBOT1QgTlVMTCxcbiAgICAgICAgc2VjdGlvbiBURVhULFxuICAgICAgICBGT1JFSUdOIEtFWSAobm90ZV9pZCkgUkVGRVJFTkNFUyBub3RlcyhpZCkgT04gREVMRVRFIENBU0NBREVcbiAgICAgICk7XG5cbiAgICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9ub3Rlc19wYXRoIE9OIG5vdGVzKHBhdGgpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X25vdGVzX3VwZGF0ZWRfYXQgT04gbm90ZXModXBkYXRlZF9hdCk7XG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfbm90ZXNfbW9kaWZpZWRfYXQgT04gbm90ZXMobW9kaWZpZWRfYXQpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2NodW5rc19ub3RlX2lkIE9OIGNodW5rcyhub3RlX2lkKTtcbiAgICBgKTtcblxuICAgIC8vIG1vZGlmaWVkX2F0IFx1Q0VFQ1x1QjdGQ1x1Qzc3NCBcdUM1QzZcdUIyOTQgXHVBRTMwXHVDODc0IERCXHVCOTdDIFx1QjlDOFx1Qzc3NFx1QURGOFx1QjgwOFx1Qzc3NFx1QzE1OFxuICAgIHRoaXMubWlncmF0ZUlmTmVlZGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogXHVENTQ0XHVDNjk0XHVENTVDIFx1QUNCRFx1QzZCMCBcdUMyQTRcdUQwQTRcdUI5QzggXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4XG4gICAqL1xuICBwcml2YXRlIG1pZ3JhdGVJZk5lZWRlZCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgLy8gbW9kaWZpZWRfYXQgXHVDRUVDXHVCN0ZDXHVDNzc0IFx1Qzc4OFx1QjI5NFx1QzlDMCBcdUQ2NTVcdUM3NzhcbiAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLmRiLnByYWdtYShcInRhYmxlX2luZm8obm90ZXMpXCIpIGFzIGFueVtdO1xuICAgICAgY29uc3QgaGFzTW9kaWZpZWRBdCA9IGNvbHVtbnMuc29tZShjb2wgPT4gY29sLm5hbWUgPT09IFwibW9kaWZpZWRfYXRcIik7XG4gICAgICBcbiAgICAgIGlmICghaGFzTW9kaWZpZWRBdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1vZGlmaWVkX2F0IFx1Q0VFQ1x1QjdGQyBcdUNEOTRcdUFDMDAgXHVDOTExLi4uXCIpO1xuICAgICAgICB0aGlzLmRiLmV4ZWMoXCJBTFRFUiBUQUJMRSBub3RlcyBBREQgQ09MVU1OIG1vZGlmaWVkX2F0IElOVEVHRVJcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXHVCOUM4XHVDNzc0XHVBREY4XHVCODA4XHVDNzc0XHVDMTU4IFx1QzY0NFx1QjhDQ1wiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QzJBNFx1RDBBNFx1QjlDOCBcdUI5QzhcdUM3NzRcdUFERjhcdUI4MDhcdUM3NzRcdUMxNTggXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1QjE3OFx1RDJCOCBcdUM4MDBcdUM3QTUgXHVCNjEwXHVCMjk0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgKi9cbiAgdXBzZXJ0Tm90ZShub3RlOiBOb3RlTWV0YWRhdGEpOiB2b2lkIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIElOU0VSVCBJTlRPIG5vdGVzIChpZCwgcGF0aCwgdGl0bGUsIHRhZ3MsIGxpbmtzLCBmcm9udG1hdHRlciwgdXBkYXRlZF9hdCwgaGFzaCwgbW9kaWZpZWRfYXQpXG4gICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8pXG4gICAgICBPTiBDT05GTElDVChpZCkgRE8gVVBEQVRFIFNFVFxuICAgICAgICBwYXRoID0gZXhjbHVkZWQucGF0aCxcbiAgICAgICAgdGl0bGUgPSBleGNsdWRlZC50aXRsZSxcbiAgICAgICAgdGFncyA9IGV4Y2x1ZGVkLnRhZ3MsXG4gICAgICAgIGxpbmtzID0gZXhjbHVkZWQubGlua3MsXG4gICAgICAgIGZyb250bWF0dGVyID0gZXhjbHVkZWQuZnJvbnRtYXR0ZXIsXG4gICAgICAgIHVwZGF0ZWRfYXQgPSBleGNsdWRlZC51cGRhdGVkX2F0LFxuICAgICAgICBoYXNoID0gZXhjbHVkZWQuaGFzaCxcbiAgICAgICAgbW9kaWZpZWRfYXQgPSBleGNsdWRlZC5tb2RpZmllZF9hdFxuICAgIGApO1xuXG4gICAgc3RtdC5ydW4oXG4gICAgICBub3RlLmlkLFxuICAgICAgbm90ZS5wYXRoLFxuICAgICAgbm90ZS50aXRsZSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KG5vdGUudGFncyksXG4gICAgICBKU09OLnN0cmluZ2lmeShub3RlLmxpbmtzKSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KG5vdGUuZnJvbnRtYXR0ZXIpLFxuICAgICAgbm90ZS51cGRhdGVkQXQsXG4gICAgICBub3RlLmhhc2gsXG4gICAgICBub3RlLm1vZGlmaWVkQXQgfHwgbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogXHVBQ0JEXHVCODVDXHVCODVDIFx1QjE3OFx1RDJCOCBcdUM4NzBcdUQ2OENcbiAgICovXG4gIGdldE5vdGVCeVBhdGgocGF0aDogc3RyaW5nKTogTm90ZU1ldGFkYXRhIHwgbnVsbCB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCAqIEZST00gbm90ZXMgV0hFUkUgcGF0aCA9ID9cIik7XG4gICAgY29uc3Qgcm93ID0gc3RtdC5nZXQocGF0aCkgYXMgYW55O1xuICAgIHJldHVybiByb3cgPyB0aGlzLnJvd1RvTm90ZShyb3cpIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJRFx1Qjg1QyBcdUIxNzhcdUQyQjggXHVDODcwXHVENjhDXG4gICAqL1xuICBnZXROb3RlQnlJZChpZDogc3RyaW5nKTogTm90ZU1ldGFkYXRhIHwgbnVsbCB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCAqIEZST00gbm90ZXMgV0hFUkUgaWQgPSA/XCIpO1xuICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KGlkKSBhcyBhbnk7XG4gICAgcmV0dXJuIHJvdyA/IHRoaXMucm93VG9Ob3RlKHJvdykgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QkFBOFx1QjRFMCBcdUIxNzhcdUQyQjggXHVDODcwXHVENjhDXG4gICAqL1xuICBnZXRBbGxOb3RlcygpOiBOb3RlTWV0YWRhdGFbXSB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCAqIEZST00gbm90ZXMgT1JERVIgQlkgdXBkYXRlZF9hdCBERVNDXCIpO1xuICAgIGNvbnN0IHJvd3MgPSBzdG10LmFsbCgpIGFzIGFueVtdO1xuICAgIHJldHVybiByb3dzLm1hcCgocm93KSA9PiB0aGlzLnJvd1RvTm90ZShyb3cpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIxNzhcdUQyQjggXHVDMEFEXHVDODFDXG4gICAqL1xuICBkZWxldGVOb3RlKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFwiREVMRVRFIEZST00gbm90ZXMgV0hFUkUgaWQgPSA/XCIpO1xuICAgIHN0bXQucnVuKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNDQURcdUQwNkMgXHVDODAwXHVDN0E1XG4gICAqL1xuICBpbnNlcnRDaHVua3MoY2h1bmtzOiBDaHVua1tdKTogdm9pZCB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBJTlNFUlQgSU5UTyBjaHVua3MgKGlkLCBub3RlX2lkLCB0ZXh0LCBwb3NpdGlvbiwgdG9rZW5fY291bnQsIHNlY3Rpb24pXG4gICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXG4gICAgYCk7XG5cbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oKGNodW5rczogQ2h1bmtbXSkgPT4ge1xuICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgICAgc3RtdC5ydW4oXG4gICAgICAgICAgY2h1bmsuaWQsXG4gICAgICAgICAgY2h1bmsubm90ZUlkLFxuICAgICAgICAgIGNodW5rLnRleHQsXG4gICAgICAgICAgY2h1bmsucG9zaXRpb24sXG4gICAgICAgICAgY2h1bmsudG9rZW5Db3VudCxcbiAgICAgICAgICBjaHVuay5zZWN0aW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0cmFuc2FjdGlvbihjaHVua3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QjE3OFx1RDJCOFx1Qzc1OCBcdUNDQURcdUQwNkMgXHVDMEFEXHVDODFDXG4gICAqL1xuICBkZWxldGVDaHVua3NCeU5vdGVJZChub3RlSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoXCJERUxFVEUgRlJPTSBjaHVua3MgV0hFUkUgbm90ZV9pZCA9ID9cIik7XG4gICAgc3RtdC5ydW4obm90ZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIxNzhcdUQyQjhcdUM3NTggXHVDQ0FEXHVEMDZDIFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0Q2h1bmtzQnlOb3RlSWQobm90ZUlkOiBzdHJpbmcpOiBDaHVua1tdIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFwiU0VMRUNUICogRlJPTSBjaHVua3MgV0hFUkUgbm90ZV9pZCA9ID8gT1JERVIgQlkgcG9zaXRpb25cIik7XG4gICAgY29uc3Qgcm93cyA9IHN0bXQuYWxsKG5vdGVJZCkgYXMgYW55W107XG4gICAgcmV0dXJuIHJvd3MubWFwKChyb3cpID0+IHRoaXMucm93VG9DaHVuayhyb3cpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJRFx1Qjg1QyBcdUNDQURcdUQwNkMgXHVDODcwXHVENjhDXG4gICAqL1xuICBnZXRDaHVua0J5SWQoaWQ6IHN0cmluZyk6IENodW5rIHwgbnVsbCB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCAqIEZST00gY2h1bmtzIFdIRVJFIGlkID0gP1wiKTtcbiAgICBjb25zdCByb3cgPSBzdG10LmdldChpZCkgYXMgYW55O1xuICAgIHJldHVybiByb3cgPyB0aGlzLnJvd1RvQ2h1bmsocm93KSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogXHVCQUE4XHVCNEUwIFx1Q0NBRFx1RDA2QyBcdUM4NzBcdUQ2OENcbiAgICovXG4gIGdldEFsbENodW5rcygpOiBDaHVua1tdIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFwiU0VMRUNUICogRlJPTSBjaHVua3NcIik7XG4gICAgY29uc3Qgcm93cyA9IHN0bXQuYWxsKCkgYXMgYW55W107XG4gICAgcmV0dXJuIHJvd3MubWFwKChyb3cpID0+IHRoaXMucm93VG9DaHVuayhyb3cpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVCMkVCXHVBRTMwXG4gICAqL1xuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmRiLmNsb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogREIgXHVENTg5XHVDNzQ0IE5vdGVNZXRhZGF0YVx1Qjg1QyBcdUJDQzBcdUQ2NThcbiAgICovXG4gIHByaXZhdGUgcm93VG9Ob3RlKHJvdzogYW55KTogTm90ZU1ldGFkYXRhIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgIHBhdGg6IHJvdy5wYXRoLFxuICAgICAgdGl0bGU6IHJvdy50aXRsZSxcbiAgICAgIHRhZ3M6IEpTT04ucGFyc2Uocm93LnRhZ3MgfHwgXCJbXVwiKSxcbiAgICAgIGxpbmtzOiBKU09OLnBhcnNlKHJvdy5saW5rcyB8fCBcIltdXCIpLFxuICAgICAgZnJvbnRtYXR0ZXI6IEpTT04ucGFyc2Uocm93LmZyb250bWF0dGVyIHx8IFwie31cIiksXG4gICAgICB1cGRhdGVkQXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgaGFzaDogcm93Lmhhc2gsXG4gICAgICBtb2RpZmllZEF0OiByb3cubW9kaWZpZWRfYXQgfHwgdW5kZWZpbmVkLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogREIgXHVENTg5XHVDNzQ0IENodW5rXHVCODVDIFx1QkNDMFx1RDY1OFxuICAgKi9cbiAgcHJpdmF0ZSByb3dUb0NodW5rKHJvdzogYW55KTogQ2h1bmsge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcm93LmlkLFxuICAgICAgbm90ZUlkOiByb3cubm90ZV9pZCxcbiAgICAgIHRleHQ6IHJvdy50ZXh0LFxuICAgICAgcG9zaXRpb246IHJvdy5wb3NpdGlvbixcbiAgICAgIHRva2VuQ291bnQ6IHJvdy50b2tlbl9jb3VudCxcbiAgICAgIHNlY3Rpb246IHJvdy5zZWN0aW9uLFxuICAgIH07XG4gIH1cbn1cbiIsICIvLyBcdUJDQTFcdUQxMzAgXHVDMkE0XHVEMUEwXHVDNUI0IC0gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzgwMFx1QzdBNSBcdUJDMEYgXHVDNzIwXHVDMEFDXHVCM0M0IFx1QUM4MFx1QzBDOVxuXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSBcImJldHRlci1zcWxpdGUzXCI7XG5pbXBvcnQgeyBDaHVuaywgU2VhcmNoUmVzdWx0LCBTZWFyY2hGaWx0ZXIgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgVmVjdG9yU3RvcmUge1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZS5EYXRhYmFzZTtcblxuICBjb25zdHJ1Y3RvcihkYlBhdGg6IHN0cmluZykge1xuICAgIHRoaXMuZGIgPSBuZXcgRGF0YWJhc2UoZGJQYXRoKTtcbiAgICB0aGlzLmluaXRpYWxpemVTY2hlbWEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVDMkE0XHVEMEE0XHVCOUM4IFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplU2NoZW1hKCk6IHZvaWQge1xuICAgIHRoaXMuZGIuZXhlYyhgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBlbWJlZGRpbmdzIChcbiAgICAgICAgY2h1bmtfaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICAgICAgZW1iZWRkaW5nIFRFWFQgTk9UIE5VTEwgLS0gSlNPTiBhcnJheSBvZiBudW1iZXJzXG4gICAgICApO1xuXG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfZW1iZWRkaW5nc19jaHVua19pZCBPTiBlbWJlZGRpbmdzKGNodW5rX2lkKTtcbiAgICBgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDODAwXHVDN0E1XG4gICAqL1xuICBzdG9yZUVtYmVkZGluZyhjaHVua0lkOiBzdHJpbmcsIGVtYmVkZGluZzogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIElOU0VSVCBPUiBSRVBMQUNFIElOVE8gZW1iZWRkaW5ncyAoY2h1bmtfaWQsIGVtYmVkZGluZylcbiAgICAgIFZBTFVFUyAoPywgPylcbiAgICBgKTtcbiAgICBzdG10LnJ1bihjaHVua0lkLCBKU09OLnN0cmluZ2lmeShlbWJlZGRpbmcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM1RUNcdUI3RUMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1Qzc3Q1x1QUQwNCBcdUM4MDBcdUM3QTVcbiAgICovXG4gIHN0b3JlRW1iZWRkaW5ncyhlbWJlZGRpbmdzOiBNYXA8c3RyaW5nLCBudW1iZXJbXT4pOiB2b2lkIHtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIElOU0VSVCBPUiBSRVBMQUNFIElOVE8gZW1iZWRkaW5ncyAoY2h1bmtfaWQsIGVtYmVkZGluZylcbiAgICAgIFZBTFVFUyAoPywgPylcbiAgICBgKTtcblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbigoZW1iZWRkaW5nczogTWFwPHN0cmluZywgbnVtYmVyW10+KSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IFtjaHVua0lkLCBlbWJlZGRpbmddIG9mIGVtYmVkZGluZ3MuZW50cmllcygpKSB7XG4gICAgICAgIHN0bXQucnVuKGNodW5rSWQsIEpTT04uc3RyaW5naWZ5KGVtYmVkZGluZykpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdHJhbnNhY3Rpb24oZW1iZWRkaW5ncyk7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0RW1iZWRkaW5nKGNodW5rSWQ6IHN0cmluZyk6IG51bWJlcltdIHwgbnVsbCB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCBlbWJlZGRpbmcgRlJPTSBlbWJlZGRpbmdzIFdIRVJFIGNodW5rX2lkID0gP1wiKTtcbiAgICBjb25zdCByb3cgPSBzdG10LmdldChjaHVua0lkKSBhcyBhbnk7XG4gICAgcmV0dXJuIHJvdyA/IEpTT04ucGFyc2Uocm93LmVtYmVkZGluZykgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QkFBOFx1QjRFMCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDODcwXHVENjhDXG4gICAqL1xuICBnZXRBbGxFbWJlZGRpbmdzKCk6IE1hcDxzdHJpbmcsIG51bWJlcltdPiB7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShcIlNFTEVDVCBjaHVua19pZCwgZW1iZWRkaW5nIEZST00gZW1iZWRkaW5nc1wiKTtcbiAgICBjb25zdCByb3dzID0gc3RtdC5hbGwoKSBhcyBhbnlbXTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyW10+KCk7XG5cbiAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICByZXN1bHQuc2V0KHJvdy5jaHVua19pZCwgSlNPTi5wYXJzZShyb3cuZW1iZWRkaW5nKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNDQURcdUQwNkNcdUM3NTggXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBBRFx1QzgxQ1xuICAgKi9cbiAgZGVsZXRlRW1iZWRkaW5nKGNodW5rSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoXCJERUxFVEUgRlJPTSBlbWJlZGRpbmdzIFdIRVJFIGNodW5rX2lkID0gP1wiKTtcbiAgICBzdG10LnJ1bihjaHVua0lkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM1RUNcdUI3RUMgXHVDQ0FEXHVEMDZDXHVDNzU4IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwQURcdUM4MUNcbiAgICovXG4gIGRlbGV0ZUVtYmVkZGluZ3MoY2h1bmtJZHM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJzID0gY2h1bmtJZHMubWFwKCgpID0+IFwiP1wiKS5qb2luKFwiLFwiKTtcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBERUxFVEUgRlJPTSBlbWJlZGRpbmdzIFdIRVJFIGNodW5rX2lkIElOICgke3BsYWNlaG9sZGVyc30pYCk7XG4gICAgc3RtdC5ydW4oLi4uY2h1bmtJZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1Q0Y1NFx1QzBBQ1x1Qzc3OCBcdUM3MjBcdUMwQUNcdUIzQzQgXHVBQ0M0XHVDMEIwXG4gICAqL1xuICBwcml2YXRlIGNvc2luZVNpbWlsYXJpdHkoYTogbnVtYmVyW10sIGI6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUJDQTFcdUQxMzAgXHVBRTM4XHVDNzc0XHVBQzAwIFx1Qzc3Q1x1Q0U1OFx1RDU1OFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgbGV0IGRvdFByb2R1Y3QgPSAwO1xuICAgIGxldCBub3JtQSA9IDA7XG4gICAgbGV0IG5vcm1CID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgZG90UHJvZHVjdCArPSBhW2ldICogYltpXTtcbiAgICAgIG5vcm1BICs9IGFbaV0gKiBhW2ldO1xuICAgICAgbm9ybUIgKz0gYltpXSAqIGJbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvdFByb2R1Y3QgLyAoTWF0aC5zcXJ0KG5vcm1BKSAqIE1hdGguc3FydChub3JtQikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QkNBMVx1RDEzMCBcdUFDODBcdUMwQzkgLSBUb3AtSyBcdUM3MjBcdUMwQUMgXHVDQ0FEXHVEMDZDIFx1Q0MzRVx1QUUzMFxuICAgKiBcbiAgICogXHVDQzM4XHVBQ0UwOiBcdUQ2MDRcdUM3QUMgXHVBRDZDXHVENjA0XHVDNzQwIFx1QkFBOFx1QjRFMCBcdUM3ODRcdUJDQTBcdUI1MjlcdUM3NDQgXHVCQTU0XHVCQUE4XHVCOUFDXHVDNUQwIFx1Qjg1Q1x1QjREQ1x1RDU1OFx1QzVFQyBcdUMxMjBcdUQ2MTUgXHVBQzgwXHVDMEM5XHVDNzQ0IFx1QzIxOFx1RDU4OVx1RDU2OVx1QjJDOFx1QjJFNC5cbiAgICogXHVCMzAwXHVBRERDXHVCQUE4IFx1QkNGQ1x1RDJCOFx1Qzc1OCBcdUFDQkRcdUM2QjAgXHVDMTMxXHVCMkE1XHVDNzc0IFx1QzgwMFx1RDU1OFx1QjQyMCBcdUMyMTggXHVDNzg4XHVDNzNDXHVCQTcwLCBcdUIyRTRcdUM3NENcdUFDRkMgXHVBQzE5XHVDNzQwIFx1QUMxQ1x1QzEyMFx1Qzc3NCBcdUFEOENcdUM3QTVcdUI0MjlcdUIyQzhcdUIyRTQ6XG4gICAqIC0gQU5OKEFwcHJveGltYXRlIE5lYXJlc3QgTmVpZ2hib3IpIFx1QzU0Q1x1QUNFMFx1QjlBQ1x1Qzk5OCBcdUMwQUNcdUM2QTkgKEZBSVNTLCBITlNXIFx1QjRGMSlcbiAgICogLSBcdUM4MDRcdUM2QTkgXHVCQ0ExXHVEMTMwIFx1QjM3MFx1Qzc3NFx1RDEzMFx1QkNBMFx1Qzc3NFx1QzJBNCBcdUMwQUNcdUM2QTkgKENocm9tYSwgUWRyYW50IFx1QjRGMSlcbiAgICogLSBcdUM5OURcdUJEODQgXHVBQzgwXHVDMEM5IFx1QjYxMFx1QjI5NCBcdUM3NzhcdUIzNzFcdUMyQTQgXHVDRTkwXHVDMkYxXG4gICAqL1xuICBzZWFyY2gocXVlcnlFbWJlZGRpbmc6IG51bWJlcltdLCBrOiBudW1iZXIgPSA4KTogQXJyYXk8eyBjaHVua0lkOiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICAgIGNvbnN0IGFsbEVtYmVkZGluZ3MgPSB0aGlzLmdldEFsbEVtYmVkZGluZ3MoKTtcbiAgICBjb25zdCBzY29yZXM6IEFycmF5PHsgY2h1bmtJZDogc3RyaW5nOyBzY29yZTogbnVtYmVyIH0+ID0gW107XG5cbiAgICBmb3IgKGNvbnN0IFtjaHVua0lkLCBlbWJlZGRpbmddIG9mIGFsbEVtYmVkZGluZ3MuZW50cmllcygpKSB7XG4gICAgICBjb25zdCBzY29yZSA9IHRoaXMuY29zaW5lU2ltaWxhcml0eShxdWVyeUVtYmVkZGluZywgZW1iZWRkaW5nKTtcbiAgICAgIHNjb3Jlcy5wdXNoKHsgY2h1bmtJZCwgc2NvcmUgfSk7XG4gICAgfVxuXG4gICAgLy8gXHVDODEwXHVDMjE4IFx1QUUzMFx1QzkwMCBcdUIwQjRcdUI5QkNcdUNDMjhcdUMyMUMgXHVDODE1XHVCODJDIFx1RDZDNCBcdUMwQzFcdUM3MDQgS1x1QUMxQyBcdUJDMThcdUQ2NThcbiAgICBzY29yZXMuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpO1xuICAgIHJldHVybiBzY29yZXMuc2xpY2UoMCwgayk7XG4gIH1cblxuICAvKipcbiAgICogXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QjJFQlx1QUUzMFxuICAgKi9cbiAgY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5kYi5jbG9zZSgpO1xuICB9XG59XG4iLCAiLy8gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVx1QUUzMCAtIEFQSSBcdUFFMzBcdUJDMTggXHVCQzBGIFx1Qjg1Q1x1Q0VFQyBcdUJBQThcdUIzNzggXHVDOUMwXHVDNkQwXG5cbmltcG9ydCB7IHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IHR5cGUgRW1iZWRkaW5nQ29uZmlnID0ge1xuICBwcm92aWRlcjogXCJnZW1pbmlcIiB8IFwib3BlbmFpXCIgfCBcImxvY2FsXCIgfCBcImN1c3RvbVwiO1xuICBhcGlLZXk/OiBzdHJpbmc7XG4gIG1vZGVsOiBzdHJpbmc7XG4gIGFwaVVybD86IHN0cmluZztcbn07XG5cbmludGVyZmFjZSBHZW1pbmlFbWJlZGRpbmdSZXNwb25zZSB7XG4gIGVtYmVkZGluZz86IHtcbiAgICB2YWx1ZXM/OiBudW1iZXJbXTtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIE9wZW5BSUVtYmVkZGluZ1Jlc3BvbnNlIHtcbiAgZGF0YT86IEFycmF5PHtcbiAgICBlbWJlZGRpbmc/OiBudW1iZXJbXTtcbiAgfT47XG59XG5cbmludGVyZmFjZSBDdXN0b21FbWJlZGRpbmdSZXNwb25zZSB7XG4gIGRhdGE/OiBBcnJheTx7XG4gICAgZW1iZWRkaW5nPzogbnVtYmVyW107XG4gIH0+O1xufVxuXG5leHBvcnQgY2xhc3MgRW1iZWRkaW5nR2VuZXJhdG9yIHtcbiAgcHJpdmF0ZSBwaXBlbGluZTogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSBwaXBlbGluZUZhY3Rvcnk6ICgodGFzazogc3RyaW5nLCBtb2RlbDogc3RyaW5nKSA9PiBQcm9taXNlPGFueT4pIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY29uZmlnOiBFbWJlZGRpbmdDb25maWc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBFbWJlZGRpbmdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDRDA4XHVBRTMwXHVENjU0XG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmNvbmZpZy5wcm92aWRlciA9PT0gXCJsb2NhbFwiKSB7XG4gICAgICBpZiAodGhpcy5waXBlbGluZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGBcdUI4NUNcdUNFRUMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QkFBOFx1QjM3OCBcdUI4NUNcdUI1MjkgXHVDOTExOiAke3RoaXMuY29uZmlnLm1vZGVsfWApO1xuICAgICAgY29uc29sZS5sb2coYFx1QkFBOFx1QjM3OFx1Qzc0MCBIdWdnaW5nRmFjZVx1QzVEMFx1QzExQyBcdUIyRTRcdUM2QjRcdUI4NUNcdUI0RENcdUI0MThcdUM1QjQgXHVCODVDXHVDRUVDXHVDNUQwIFx1Q0U5MFx1QzJEQ1x1QjQyOVx1QjJDOFx1QjJFNC5gKTtcbiAgICAgIGNvbnN0IHBpcGVsaW5lRmFjdG9yeSA9IGF3YWl0IHRoaXMubG9hZFBpcGVsaW5lRmFjdG9yeSgpO1xuICAgICAgdGhpcy5waXBlbGluZSA9IGF3YWl0IHBpcGVsaW5lRmFjdG9yeShcImZlYXR1cmUtZXh0cmFjdGlvblwiLCB0aGlzLmNvbmZpZy5tb2RlbCk7XG4gICAgICBjb25zb2xlLmxvZyhcIlx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJBQThcdUIzNzggXHVCODVDXHVCNTI5IFx1QzY0NFx1QjhDQ1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQVBJIFx1QUUzMFx1QkMxOFx1Qzc0MCBcdUNEMDhcdUFFMzBcdUQ2NTQgXHVCRDg4XHVENTQ0XHVDNjk0XG4gICAgICBjb25zb2xlLmxvZyhgQVBJIFx1QUUzMFx1QkMxOCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEFDXHVDNkE5OiAke3RoaXMuY29uZmlnLnByb3ZpZGVyfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QkNBMVx1RDEzMFx1Qjg1QyBcdUJDQzBcdUQ2NThcbiAgICovXG4gIGFzeW5jIGVtYmVkKHRleHQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgICBpZiAodGhpcy5jb25maWcucHJvdmlkZXIgPT09IFwibG9jYWxcIikge1xuICAgICAgcmV0dXJuIHRoaXMuZW1iZWRMb2NhbCh0ZXh0KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnByb3ZpZGVyID09PSBcImdlbWluaVwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWJlZEdlbWluaSh0ZXh0KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnByb3ZpZGVyID09PSBcIm9wZW5haVwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWJlZE9wZW5BSSh0ZXh0KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnByb3ZpZGVyID09PSBcImN1c3RvbVwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWJlZEN1c3RvbSh0ZXh0KTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QzlDMFx1QzZEMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzgxQ1x1QUNGNVx1Qzc5MDogJHt0aGlzLmNvbmZpZy5wcm92aWRlcn1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUI4NUNcdUNFRUMgXHVCQUE4XHVCMzc4XHVCODVDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW1iZWRMb2NhbCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgaWYgKCF0aGlzLnBpcGVsaW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGlwZWxpbmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc4NFx1QkNBMFx1QjUyOSBcdUQzMENcdUM3NzRcdUQ1MDRcdUI3N0NcdUM3NzggXHVDRDA4XHVBRTMwXHVENjU0IFx1QzJFNFx1RDMyOFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCB0aGlzLnBpcGVsaW5lKHRleHQsIHtcbiAgICAgIHBvb2xpbmc6IFwibWVhblwiLFxuICAgICAgbm9ybWFsaXplOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20ob3V0cHV0LmRhdGEgYXMgRmxvYXQzMkFycmF5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUI4NUNcdUNFRUMgXHVDNzg0XHVCQ0EwXHVCNTI5XHVDNkE5IFx1RDMwQ1x1Qzc3NFx1RDUwNFx1Qjc3Q1x1Qzc3OCBcdUI4NUNcdUIzNTQgKFx1RDU0NFx1QzY5NFx1RDU2MCBcdUI1NENcdUI5Q0MgXHVCODVDXHVCNERDKVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBsb2FkUGlwZWxpbmVGYWN0b3J5KCk6IFByb21pc2U8KHRhc2s6IHN0cmluZywgbW9kZWw6IHN0cmluZykgPT4gUHJvbWlzZTxhbnk+PiB7XG4gICAgaWYgKHRoaXMucGlwZWxpbmVGYWN0b3J5KSB7XG4gICAgICByZXR1cm4gdGhpcy5waXBlbGluZUZhY3Rvcnk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kdWxlID0gYXdhaXQgaW1wb3J0KFwiQHhlbm92YS90cmFuc2Zvcm1lcnNcIik7XG4gICAgdGhpcy5waXBlbGluZUZhY3RvcnkgPSBtb2R1bGUucGlwZWxpbmUgYXMgKHRhc2s6IHN0cmluZywgbW9kZWw6IHN0cmluZykgPT4gUHJvbWlzZTxhbnk+O1xuICAgIHJldHVybiB0aGlzLnBpcGVsaW5lRmFjdG9yeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW1pbmkgQVBJXHVCODVDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW1iZWRHZW1pbmkodGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGlmICghdGhpcy5jb25maWcuYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW1pbmkgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuY29uZmlnLmFwaVVybH0vJHt0aGlzLmNvbmZpZy5tb2RlbH06ZW1iZWRDb250ZW50P2tleT0ke3RoaXMuY29uZmlnLmFwaUtleX1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgIHVybCxcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgcGFydHM6IFt7IHRleHQgfV0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb24gYXMgR2VtaW5pRW1iZWRkaW5nUmVzcG9uc2U7XG4gICAgICBpZiAoZGF0YS5lbWJlZGRpbmc/LnZhbHVlcykge1xuICAgICAgICByZXR1cm4gZGF0YS5lbWJlZGRpbmcudmFsdWVzO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW1pbmkgQVBJIFx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkdlbWluaSBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5BSSBBUElcdUI4NUMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbWJlZE9wZW5BSSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5hcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk9wZW5BSSBBUEkgXHVEMEE0XHVBQzAwIFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgIHVybDogdGhpcy5jb25maWcuYXBpVXJsIHx8IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9lbWJlZGRpbmdzXCIsXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke3RoaXMuY29uZmlnLmFwaUtleX1gLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWw6IHRoaXMuY29uZmlnLm1vZGVsLFxuICAgICAgICAgIGlucHV0OiB0ZXh0LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhcyBPcGVuQUlFbWJlZGRpbmdSZXNwb25zZTtcbiAgICAgIGlmIChkYXRhLmRhdGE/LlswXT8uZW1iZWRkaW5nKSB7XG4gICAgICAgIHJldHVybiBkYXRhLmRhdGFbMF0uZW1iZWRkaW5nO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPcGVuQUkgQVBJIFx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5BSSBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1Q0VFNFx1QzJBNFx1RDE0MCBBUElcdUI4NUMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbWJlZEN1c3RvbSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5hcGlVcmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Q0VFNFx1QzJBNFx1RDE0MCBBUEkgVVJMXHVDNzc0IFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmFwaUtleSkge1xuICAgICAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5hcGlLZXl9YDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgdXJsOiB0aGlzLmNvbmZpZy5hcGlVcmwsXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtb2RlbDogdGhpcy5jb25maWcubW9kZWwsXG4gICAgICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uIGFzIEN1c3RvbUVtYmVkZGluZ1Jlc3BvbnNlIHwgbnVtYmVyW107XG4gICAgICBcbiAgICAgIC8vIE9wZW5BSSBcdUQ2MzhcdUQ2NTggXHVENjE1XHVDMkREXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgZGF0YS5kYXRhPy5bMF0/LmVtYmVkZGluZykge1xuICAgICAgICByZXR1cm4gZGF0YS5kYXRhWzBdLmVtYmVkZGluZztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHVDOUMxXHVDODExIFx1QkMzMFx1QzVGNCBcdUJDMThcdUQ2NThcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUNFRTRcdUMyQTRcdUQxNDAgQVBJIFx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NDQgXHVEMzBDXHVDMkYxXHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdUNFRTRcdUMyQTRcdUQxNDAgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM1RUNcdUI3RUMgXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QkMzMFx1Q0U1OFx1Qjg1QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxXG4gICAqL1xuICBhc3luYyBlbWJlZEJhdGNoKHRleHRzOiBzdHJpbmdbXSk6IFByb21pc2U8bnVtYmVyW11bXT4ge1xuICAgIGNvbnN0IGVtYmVkZGluZ3M6IG51bWJlcltdW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgdGV4dCBvZiB0ZXh0cykge1xuICAgICAgY29uc3QgZW1iZWRkaW5nID0gYXdhaXQgdGhpcy5lbWJlZCh0ZXh0KTtcbiAgICAgIGVtYmVkZGluZ3MucHVzaChlbWJlZGRpbmcpO1xuICAgIH1cblxuICAgIHJldHVybiBlbWJlZGRpbmdzO1xuICB9XG59XG4iLCAiLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1RDMwQ1x1QzExQyAtIGZyb250bWF0dGVyLCBcdUQwRENcdUFERjgsIFx1QjlDMVx1RDA2QyBcdUNEOTRcdUNEOUNcblxuaW1wb3J0IG1hdHRlciBmcm9tIFwiZ3JheS1tYXR0ZXJcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiY3J5cHRvXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkTm90ZSB7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgbGlua3M6IHN0cmluZ1tdO1xuICB0aXRsZTogc3RyaW5nO1xuICBzZWN0aW9uczogU2VjdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlY3Rpb24ge1xuICBoZWFkaW5nOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgbGV2ZWw6IG51bWJlcjtcbiAgcG9zaXRpb246IG51bWJlcjtcbn1cblxuLyoqXG4gKiBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjQgXHVEMzBDXHVDNzdDXHVDNzQ0IFx1RDMwQ1x1QzJGMVx1RDU1OFx1QzVFQyBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzBcdUI5N0MgXHVDRDk0XHVDRDlDXHVENTY5XHVCMkM4XHVCMkU0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXJrZG93bihmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQYXJzZWROb3RlIHtcbiAgLy8gRnJvbnRtYXR0ZXIgXHVEMzBDXHVDMkYxXG4gIGNvbnN0IHBhcnNlZCA9IG1hdHRlcihjb250ZW50KTtcbiAgY29uc3QgZnJvbnRtYXR0ZXIgPSBwYXJzZWQuZGF0YSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgY29uc3QgYm9keUNvbnRlbnQgPSBwYXJzZWQuY29udGVudDtcblxuICAvLyBcdUM4MUNcdUJBQTkgXHVDRDk0XHVDRDlDIChmcm9udG1hdHRlclx1Qzc1OCB0aXRsZSBcdUI2MTBcdUIyOTQgXHVEMzBDXHVDNzdDXHVCQTg1KVxuICBjb25zdCB0aXRsZSA9IChmcm9udG1hdHRlci50aXRsZSBhcyBzdHJpbmcpIHx8IGV4dHJhY3RUaXRsZUZyb21QYXRoKGZpbGVQYXRoKTtcblxuICAvLyBcdUQwRENcdUFERjggXHVDRDk0XHVDRDlDICgjXHVEMERDXHVBREY4IFx1RDYxNVx1QzJERClcbiAgY29uc3QgdGFncyA9IGV4dHJhY3RUYWdzKGJvZHlDb250ZW50LCBmcm9udG1hdHRlcik7XG5cbiAgLy8gXHVCOUMxXHVEMDZDIFx1Q0Q5NFx1Q0Q5QyAoW1tcdUI5QzFcdUQwNkNdXSBcdUQ2MTVcdUMyREQpXG4gIGNvbnN0IGxpbmtzID0gZXh0cmFjdExpbmtzKGJvZHlDb250ZW50KTtcblxuICAvLyBcdUMxMzlcdUMxNTggXHVCRDg0XHVCOUFDXG4gIGNvbnN0IHNlY3Rpb25zID0gZXh0cmFjdFNlY3Rpb25zKGJvZHlDb250ZW50KTtcblxuICByZXR1cm4ge1xuICAgIGNvbnRlbnQ6IGJvZHlDb250ZW50LFxuICAgIGZyb250bWF0dGVyLFxuICAgIHRhZ3MsXG4gICAgbGlua3MsXG4gICAgdGl0bGUsXG4gICAgc2VjdGlvbnMsXG4gIH07XG59XG5cbi8qKlxuICogXHVEMzBDXHVDNzdDIFx1QUNCRFx1Qjg1Q1x1QzVEMFx1QzExQyBcdUM4MUNcdUJBQTkgXHVDRDk0XHVDRDlDXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RUaXRsZUZyb21QYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoLnNwbGl0KFwiL1wiKS5wb3AoKSB8fCBcIlwiO1xuICByZXR1cm4gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG59XG5cbi8qKlxuICogXHVCQ0Y4XHVCQjM4XHVBQ0ZDIGZyb250bWF0dGVyXHVDNUQwXHVDMTFDIFx1RDBEQ1x1QURGOCBcdUNEOTRcdUNEOUNcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFRhZ3MoY29udGVudDogc3RyaW5nLCBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAvLyBGcm9udG1hdHRlclx1Qzc1OCB0YWdzIFx1RDU0NFx1QjREQ1xuICBpZiAoQXJyYXkuaXNBcnJheShmcm9udG1hdHRlci50YWdzKSkge1xuICAgIGZyb250bWF0dGVyLnRhZ3MuZm9yRWFjaCgodGFnKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRhZyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0YWdzLmFkZCh0YWcucmVwbGFjZSgvXiMvLCBcIlwiKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBcdUJDRjhcdUJCMzhcdUM1RDBcdUMxMUMgI1x1RDBEQ1x1QURGOCBcdUNEOTRcdUNEOUNcbiAgY29uc3QgaGFzaHRhZ1JlZ2V4ID0gLyMoW2EtekEtWjAtOVx1QUMwMC1cdUQ3QTNfLV0rKS9nO1xuICBsZXQgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSBoYXNodGFnUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICB0YWdzLmFkZChtYXRjaFsxXSk7XG4gIH1cblxuICByZXR1cm4gQXJyYXkuZnJvbSh0YWdzKTtcbn1cblxuLyoqXG4gKiBPYnNpZGlhbiBcdUI5QzFcdUQwNkMgXHVDRDk0XHVDRDlDIChbW1x1QjlDMVx1RDA2Q11dIFx1RDYxNVx1QzJERClcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdExpbmtzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgbGlua3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3QgbGlua1JlZ2V4ID0gL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nO1xuICBsZXQgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSBsaW5rUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAvLyBcdUJDQzRcdUNFNkQgXHVDQzk4XHVCOUFDIFtbXHVCOUMxXHVEMDZDfFx1QkNDNFx1Q0U2RF1dXG4gICAgY29uc3QgbGluayA9IG1hdGNoWzFdLnNwbGl0KFwifFwiKVswXS50cmltKCk7XG4gICAgbGlua3MuYWRkKGxpbmspO1xuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGxpbmtzKTtcbn1cblxuLyoqXG4gKiBcdUQ1RTRcdUIzNTQgXHVBRTMwXHVDOTAwXHVDNzNDXHVCODVDIFx1QzEzOVx1QzE1OCBcdUJEODRcdUI5QUNcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFNlY3Rpb25zKGNvbnRlbnQ6IHN0cmluZyk6IFNlY3Rpb25bXSB7XG4gIGNvbnN0IHNlY3Rpb25zOiBTZWN0aW9uW10gPSBbXTtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KFwiXFxuXCIpO1xuXG4gIGxldCBjdXJyZW50U2VjdGlvbjogU2VjdGlvbiB8IG51bGwgPSBudWxsO1xuICBsZXQgY3VycmVudENvbnRlbnQ6IHN0cmluZ1tdID0gW107XG4gIGxldCBwb3NpdGlvbiA9IDA7XG5cbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKCN7MSw2fSlcXHMrKC4rKSQvKTtcblxuICAgIGlmIChoZWFkZXJNYXRjaCkge1xuICAgICAgLy8gXHVDNzc0XHVDODA0IFx1QzEzOVx1QzE1OCBcdUM4MDBcdUM3QTVcbiAgICAgIGlmIChjdXJyZW50U2VjdGlvbikge1xuICAgICAgICBjdXJyZW50U2VjdGlvbi5jb250ZW50ID0gY3VycmVudENvbnRlbnQuam9pbihcIlxcblwiKS50cmltKCk7XG4gICAgICAgIHNlY3Rpb25zLnB1c2goY3VycmVudFNlY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICAvLyBcdUMwQzggXHVDMTM5XHVDMTU4IFx1QzJEQ1x1Qzc5MVxuICAgICAgY3VycmVudFNlY3Rpb24gPSB7XG4gICAgICAgIGhlYWRpbmc6IGhlYWRlck1hdGNoWzJdLnRyaW0oKSxcbiAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgbGV2ZWw6IGhlYWRlck1hdGNoWzFdLmxlbmd0aCxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICB9O1xuICAgICAgY3VycmVudENvbnRlbnQgPSBbXTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgICBjdXJyZW50Q29udGVudC5wdXNoKGxpbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdUQ1RTRcdUIzNTQgXHVDNUM2XHVCMjk0IFx1Q0NBQiBcdUJEODBcdUJEODRcbiAgICAgIGlmIChzZWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY3VycmVudFNlY3Rpb24gPSB7XG4gICAgICAgICAgaGVhZGluZzogXCJcIixcbiAgICAgICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgICAgIGxldmVsOiAwLFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY3VycmVudENvbnRlbnQucHVzaChsaW5lKTtcbiAgICB9XG5cbiAgICBwb3NpdGlvbiArPSBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciBuZXdsaW5lXG4gIH1cblxuICAvLyBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDMTM5XHVDMTU4IFx1QzgwMFx1QzdBNVxuICBpZiAoY3VycmVudFNlY3Rpb24pIHtcbiAgICBjdXJyZW50U2VjdGlvbi5jb250ZW50ID0gY3VycmVudENvbnRlbnQuam9pbihcIlxcblwiKS50cmltKCk7XG4gICAgc2VjdGlvbnMucHVzaChjdXJyZW50U2VjdGlvbik7XG4gIH1cblxuICByZXR1cm4gc2VjdGlvbnM7XG59XG5cbi8qKlxuICogXHVEMzBDXHVDNzdDIFx1QjBCNFx1QzZBOVx1Qzc1OCBcdUQ1NzRcdUMyREMgXHVDMEREXHVDMTMxXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlSGFzaChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gY3JlYXRlSGFzaChcInNoYTI1NlwiKS51cGRhdGUoY29udGVudCkuZGlnZXN0KFwiaGV4XCIpO1xufVxuIiwgIi8vIFx1QkIzOFx1QzExQyBcdUNDQURcdUQwQjkgXHVCODVDXHVDOUMxIC0gXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1QzgwMVx1QzgwOFx1RDU1QyBcdUQwNkNcdUFFMzBcdUI4NUMgXHVCRDg0XHVENTYwXG5cbmltcG9ydCB7IENodW5rIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9wYXJzZXJcIjtcblxuLyoqXG4gKiBcdUFDMDRcdUIyRThcdUQ1NUMgXHVEMUEwXHVEMDcwIFx1Q0U3NFx1QzZCNFx1RDEzMCAoXHVBQ0Y1XHVCQzMxIFx1QUUzMFx1QzkwMCBcdUFERkNcdUMwQUNcdUNFNTgpXG4gKiBcdUNDMzhcdUFDRTA6IFx1RDU1Q1x1QUUwMFx1QUNGQyBcdUM2MDFcdUM1QjRcdUI5N0MgXHVCRDg0XHVCOUFDXHVENTU4XHVDNUVDIFx1Q0U3NFx1QzZCNFx1RDJCOFx1RDU1OFx1QzVFQyBcdUM3NzRcdUM5MTEgXHVDRTc0XHVDNkI0XHVEMkI4IFx1QkMyOVx1QzlDMFxuICovXG5mdW5jdGlvbiBlc3RpbWF0ZVRva2VuQ291bnQodGV4dDogc3RyaW5nKTogbnVtYmVyIHtcbiAgLy8gXHVENTVDXHVBRTAwIFx1QkIzOFx1Qzc5MCBcdUM4MUNcdUFDNzAgXHVENkM0IFx1QzYwMVx1QzVCNC9cdUMyMkJcdUM3OTAgXHVCMkU4XHVDNUI0IFx1Q0U3NFx1QzZCNFx1RDJCOFxuICBjb25zdCBub25Lb3JlYW5UZXh0ID0gdGV4dC5yZXBsYWNlKC9bXHVBQzAwLVx1RDdBM10vZywgXCIgXCIpO1xuICBjb25zdCB3b3JkcyA9IG5vbktvcmVhblRleHQuc3BsaXQoL1xccysvKS5maWx0ZXIoKHcpID0+IHcubGVuZ3RoID4gMCkubGVuZ3RoO1xuICBcbiAgLy8gXHVENTVDXHVBRTAwIFx1QkIzOFx1Qzc5MFx1QjlDQyBcdUNFNzRcdUM2QjRcdUQyQjhcbiAgY29uc3Qga29yZWFuQ2hhcnMgPSAodGV4dC5tYXRjaCgvW1x1QUMwMC1cdUQ3QTNdL2cpIHx8IFtdKS5sZW5ndGg7XG4gIFxuICAvLyBcdUM2MDFcdUM1QjRcdUIyOTQgMVx1QjJFOFx1QzVCNCBcdTIyNDggMS4zIFx1RDFBMFx1RDA3MCwgXHVENTVDXHVBRTAwXHVDNzQwIDFcdUM3NENcdUM4MDggXHUyMjQ4IDEgXHVEMUEwXHVEMDcwIFx1QURGQ1x1QzBBQ1xuICByZXR1cm4gTWF0aC5jZWlsKHdvcmRzICogMS4zICsga29yZWFuQ2hhcnMpO1xufVxuXG4vKipcbiAqIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUNDQURcdUQwNkNcdUI4NUMgXHVCRDg0XHVENTYwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaHVua1RleHQoXG4gIG5vdGVJZDogc3RyaW5nLFxuICBzZWN0aW9uczogU2VjdGlvbltdLFxuICBvcHRpb25zOiB7XG4gICAgY2h1bmtTaXplPzogbnVtYmVyO1xuICAgIGNodW5rT3ZlcmxhcD86IG51bWJlcjtcbiAgfSA9IHt9XG4pOiBDaHVua1tdIHtcbiAgY29uc3QgY2h1bmtTaXplID0gb3B0aW9ucy5jaHVua1NpemUgfHwgNDAwO1xuICBjb25zdCBjaHVua092ZXJsYXAgPSBvcHRpb25zLmNodW5rT3ZlcmxhcCB8fCA1MDtcbiAgY29uc3QgY2h1bmtzOiBDaHVua1tdID0gW107XG5cbiAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHNlY3Rpb25zKSB7XG4gICAgY29uc3Qgc2VjdGlvblRleHQgPSBzZWN0aW9uLmhlYWRpbmdcbiAgICAgID8gYCMgJHtzZWN0aW9uLmhlYWRpbmd9XFxuXFxuJHtzZWN0aW9uLmNvbnRlbnR9YFxuICAgICAgOiBzZWN0aW9uLmNvbnRlbnQ7XG5cbiAgICBpZiAoIXNlY3Rpb25UZXh0LnRyaW0oKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW5Db3VudCA9IGVzdGltYXRlVG9rZW5Db3VudChzZWN0aW9uVGV4dCk7XG5cbiAgICAvLyBcdUMxMzlcdUMxNThcdUM3NzQgXHVDQ0FEXHVEMDZDIFx1RDA2Q1x1QUUzMFx1QkNGNFx1QjJFNCBcdUM3OTFcdUM3M0NcdUJBNzQgXHVBREY4XHVCMzAwXHVCODVDIFx1QzBBQ1x1QzZBOVxuICAgIGlmICh0b2tlbkNvdW50IDw9IGNodW5rU2l6ZSkge1xuICAgICAgY2h1bmtzLnB1c2goe1xuICAgICAgICBpZDogYCR7bm90ZUlkfS1jaHVuay0ke2NodW5rcy5sZW5ndGh9YCxcbiAgICAgICAgbm90ZUlkLFxuICAgICAgICB0ZXh0OiBzZWN0aW9uVGV4dCxcbiAgICAgICAgcG9zaXRpb246IHNlY3Rpb24ucG9zaXRpb24sXG4gICAgICAgIHRva2VuQ291bnQsXG4gICAgICAgIHNlY3Rpb246IHNlY3Rpb24uaGVhZGluZyxcbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gXHVDMTM5XHVDMTU4XHVDNzc0IFx1RDA2Q1x1QkE3NCBcdUJCMzhcdUM3QTUgXHVCMkU4XHVDNzA0XHVCODVDIFx1QkQ4NFx1RDU2MFxuICAgIGNvbnN0IHNlbnRlbmNlcyA9IHNwbGl0SW50b1NlbnRlbmNlcyhzZWN0aW9uVGV4dCk7XG4gICAgbGV0IGN1cnJlbnRDaHVuazogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudFRva2VucyA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IHNlbnRlbmNlIG9mIHNlbnRlbmNlcykge1xuICAgICAgY29uc3Qgc2VudGVuY2VUb2tlbnMgPSBlc3RpbWF0ZVRva2VuQ291bnQoc2VudGVuY2UpO1xuXG4gICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDQ0FEXHVEMDZDXHVDNUQwIFx1Q0Q5NFx1QUMwMCBcdUFDMDBcdUIyQTVcdUQ1NUNcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgICBpZiAoY3VycmVudFRva2VucyArIHNlbnRlbmNlVG9rZW5zIDw9IGNodW5rU2l6ZSkge1xuICAgICAgICBjdXJyZW50Q2h1bmsucHVzaChzZW50ZW5jZSk7XG4gICAgICAgIGN1cnJlbnRUb2tlbnMgKz0gc2VudGVuY2VUb2tlbnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdUQ2MDRcdUM3QUMgXHVDQ0FEXHVEMDZDIFx1QzgwMFx1QzdBNVxuICAgICAgICBpZiAoY3VycmVudENodW5rLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBjaHVua1RleHQgPSBjdXJyZW50Q2h1bmsuam9pbihcIiBcIik7XG4gICAgICAgICAgY2h1bmtzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGAke25vdGVJZH0tY2h1bmstJHtjaHVua3MubGVuZ3RofWAsXG4gICAgICAgICAgICBub3RlSWQsXG4gICAgICAgICAgICB0ZXh0OiBjaHVua1RleHQsXG4gICAgICAgICAgICBwb3NpdGlvbjogc2VjdGlvbi5wb3NpdGlvbixcbiAgICAgICAgICAgIHRva2VuQ291bnQ6IGN1cnJlbnRUb2tlbnMsXG4gICAgICAgICAgICBzZWN0aW9uOiBzZWN0aW9uLmhlYWRpbmcsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBcdUM2MjRcdUJDODRcdUI3QTlcdUM3NDQgXHVDNzA0XHVENTc0IFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJBODcgXHVCQjM4XHVDN0E1IFx1QzcyMFx1QzlDMFxuICAgICAgICAgIGNvbnN0IG92ZXJsYXBTZW50ZW5jZXMgPSBnZXRPdmVybGFwU2VudGVuY2VzKGN1cnJlbnRDaHVuaywgY2h1bmtPdmVybGFwKTtcbiAgICAgICAgICBjdXJyZW50Q2h1bmsgPSBvdmVybGFwU2VudGVuY2VzO1xuICAgICAgICAgIGN1cnJlbnRUb2tlbnMgPSBlc3RpbWF0ZVRva2VuQ291bnQoY3VycmVudENodW5rLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1QzBDOCBcdUNDQURcdUQwNkMgXHVDMkRDXHVDNzkxXG4gICAgICAgIGN1cnJlbnRDaHVuay5wdXNoKHNlbnRlbmNlKTtcbiAgICAgICAgY3VycmVudFRva2VucyArPSBzZW50ZW5jZVRva2VucztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUI5QzhcdUM5QzBcdUI5QzkgXHVDQ0FEXHVEMDZDIFx1QzgwMFx1QzdBNVxuICAgIGlmIChjdXJyZW50Q2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2h1bmtUZXh0ID0gY3VycmVudENodW5rLmpvaW4oXCIgXCIpO1xuICAgICAgY2h1bmtzLnB1c2goe1xuICAgICAgICBpZDogYCR7bm90ZUlkfS1jaHVuay0ke2NodW5rcy5sZW5ndGh9YCxcbiAgICAgICAgbm90ZUlkLFxuICAgICAgICB0ZXh0OiBjaHVua1RleHQsXG4gICAgICAgIHBvc2l0aW9uOiBzZWN0aW9uLnBvc2l0aW9uLFxuICAgICAgICB0b2tlbkNvdW50OiBjdXJyZW50VG9rZW5zLFxuICAgICAgICBzZWN0aW9uOiBzZWN0aW9uLmhlYWRpbmcsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2h1bmtzO1xufVxuXG4vKipcbiAqIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUJCMzhcdUM3QTVcdUM3M0NcdUI4NUMgXHVCRDg0XHVENTYwIChcdUFDMDRcdUIyRThcdUQ1NUMgXHVCQzg0XHVDODA0KVxuICogXHVDQzM4XHVBQ0UwOiBcdUM1N0RcdUM1QjQoRHIuLCBNci4gXHVCNEYxKVx1QjA5OCBcdUMxOENcdUMyMThcdUM4MTBcdUM1RDBcdUMxMUMgXHVCRDg0XHVENTYwXHVCNDIwIFx1QzIxOCBcdUM3ODhcdUM3NENcbiAqL1xuZnVuY3Rpb24gc3BsaXRJbnRvU2VudGVuY2VzKHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgLy8gXHVCOUM4XHVDRTY4XHVENDVDLCBcdUIyOTBcdUIwOENcdUQ0NUMsIFx1QkIzQ1x1Qzc0Q1x1RDQ1QyBcdUI0QTQgXHVBQ0Y1XHVCQzMxXHVDNzNDXHVCODVDIFx1QkQ4NFx1RDU2MFxuICAvLyBcdUM4MUNcdUQ1NUNcdUMwQUNcdUQ1NkQ6IFx1QzU3RFx1QzVCNFx1QjA5OCBcdUMxOENcdUMyMThcdUM4MTBcdUM1RDBcdUMxMUMgXHVDNzk4XHVCQUJCIFx1QkQ4NFx1RDU2MFx1QjQyMCBcdUMyMTggXHVDNzg4XHVDNzRDXG4gIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQuc3BsaXQoLyhbLiE/XVxccyspLykuZmlsdGVyKChzKSA9PiBzLnRyaW0oKSk7XG4gIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbnRlbmNlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIGNvbnN0IHNlbnRlbmNlID0gc2VudGVuY2VzW2ldO1xuICAgIGNvbnN0IHB1bmN0dWF0aW9uID0gc2VudGVuY2VzW2kgKyAxXSB8fCBcIlwiO1xuICAgIHJlc3VsdC5wdXNoKHNlbnRlbmNlICsgcHVuY3R1YXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoKHMpID0+IHMudHJpbSgpKTtcbn1cblxuLyoqXG4gKiBcdUM2MjRcdUJDODRcdUI3QTlcdUM3NDQgXHVDNzA0XHVENTVDIFx1QjlDOFx1QzlDMFx1QjlDOSBcdUJCMzhcdUM3QTVcdUI0RTQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gKi9cbmZ1bmN0aW9uIGdldE92ZXJsYXBTZW50ZW5jZXMoc2VudGVuY2VzOiBzdHJpbmdbXSwgdGFyZ2V0VG9rZW5zOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IG92ZXJsYXA6IHN0cmluZ1tdID0gW107XG4gIGxldCB0b2tlbnMgPSAwO1xuXG4gIGZvciAobGV0IGkgPSBzZW50ZW5jZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCBzZW50ZW5jZSA9IHNlbnRlbmNlc1tpXTtcbiAgICBjb25zdCBzZW50ZW5jZVRva2VucyA9IGVzdGltYXRlVG9rZW5Db3VudChzZW50ZW5jZSk7XG5cbiAgICBpZiAodG9rZW5zICsgc2VudGVuY2VUb2tlbnMgPiB0YXJnZXRUb2tlbnMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIG92ZXJsYXAudW5zaGlmdChzZW50ZW5jZSk7XG4gICAgdG9rZW5zICs9IHNlbnRlbmNlVG9rZW5zO1xuICB9XG5cbiAgcmV0dXJuIG92ZXJsYXA7XG59XG4iLCAiLy8gXHVDNzc4XHVCMzcxXHVDMTFDIC0gXHVEMzBDXHVDNzdDIFx1QzJBNFx1Q0U5NCwgXHVEMzBDXHVDMkYxLCBcdUNDQURcdUQwQjksIFx1Qzc4NFx1QkNBMFx1QjUyOSwgXHVDODAwXHVDN0E1XHVDNzQ0IFx1RDFCNVx1RDU2OVxuXG5pbXBvcnQgeyBNZXRhZGF0YVN0b3JlIH0gZnJvbSBcIi4vbWV0YWRhdGFTdG9yZVwiO1xuaW1wb3J0IHsgVmVjdG9yU3RvcmUgfSBmcm9tIFwiLi92ZWN0b3JTdG9yZVwiO1xuaW1wb3J0IHsgRW1iZWRkaW5nR2VuZXJhdG9yLCBFbWJlZGRpbmdDb25maWcgfSBmcm9tIFwiLi9lbWJlZGRpbmdzXCI7XG5pbXBvcnQgeyBwYXJzZU1hcmtkb3duLCBjb21wdXRlSGFzaCB9IGZyb20gXCIuL3BhcnNlclwiO1xuaW1wb3J0IHsgY2h1bmtUZXh0IH0gZnJvbSBcIi4vY2h1bmtlclwiO1xuaW1wb3J0IHsgSW5kZXhpbmdDb25maWcsIE5vdGVNZXRhZGF0YSwgQ2h1bmssIEluZGV4aW5nUHJvZ3Jlc3MgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gXCJjcnlwdG9cIjtcblxuZXhwb3J0IHR5cGUgUHJvZ3Jlc3NDYWxsYmFjayA9IChwcm9ncmVzczogSW5kZXhpbmdQcm9ncmVzcykgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIEluZGV4ZXIge1xuICBwcml2YXRlIG1ldGFkYXRhU3RvcmU6IE1ldGFkYXRhU3RvcmU7XG4gIHByaXZhdGUgdmVjdG9yU3RvcmU6IFZlY3RvclN0b3JlO1xuICBwcml2YXRlIGVtYmVkZGluZ0dlbmVyYXRvcjogRW1iZWRkaW5nR2VuZXJhdG9yO1xuICBwcml2YXRlIGNvbmZpZzogSW5kZXhpbmdDb25maWc7XG4gIHByaXZhdGUgY2FuY2VsbGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBJbmRleGluZ0NvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMubWV0YWRhdGFTdG9yZSA9IG5ldyBNZXRhZGF0YVN0b3JlKGNvbmZpZy5tZXRhRGJQYXRoKTtcbiAgICB0aGlzLnZlY3RvclN0b3JlID0gbmV3IFZlY3RvclN0b3JlKGNvbmZpZy52ZWN0b3JEYlBhdGgpO1xuICAgIFxuICAgIGNvbnN0IGVtYmVkZGluZ0NvbmZpZzogRW1iZWRkaW5nQ29uZmlnID0ge1xuICAgICAgcHJvdmlkZXI6IGNvbmZpZy5lbWJlZGRpbmdQcm92aWRlcixcbiAgICAgIG1vZGVsOiBjb25maWcuZW1iZWRkaW5nTW9kZWwsXG4gICAgICBhcGlLZXk6IGNvbmZpZy5lbWJlZGRpbmdBcGlLZXksXG4gICAgICBhcGlVcmw6IGNvbmZpZy5lbWJlZGRpbmdBcGlVcmwsXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmVtYmVkZGluZ0dlbmVyYXRvciA9IG5ldyBFbWJlZGRpbmdHZW5lcmF0b3IoZW1iZWRkaW5nQ29uZmlnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNEMDhcdUFFMzBcdUQ2NTQgLSBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQUE4XHVCMzc4IFx1Qjg1Q1x1QjREQ1xuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmVtYmVkZGluZ0dlbmVyYXRvci5pbml0aWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzc4XHVCMzcxXHVDMkYxIFx1Q0RFOFx1QzE4Q1xuICAgKi9cbiAgY2FuY2VsKCk6IHZvaWQge1xuICAgIHRoaXMuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNERThcdUMxOEMgXHVDMEMxXHVEMERDIFx1QjlBQ1x1QzE0QlxuICAgKi9cbiAgcmVzZXRDYW5jZWwoKTogdm9pZCB7XG4gICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIyRThcdUM3N0MgXHVEMzBDXHVDNzdDIFx1Qzc3OFx1QjM3MVx1QzJGMSAoXHVEMzBDXHVDNzdDIFx1QzIxOFx1QzgxNSBcdUMyRENcdUFDMDQgXHVEM0VDXHVENTY4KVxuICAgKi9cbiAgYXN5bmMgaW5kZXhGaWxlKFxuICAgIGZpbGVQYXRoOiBzdHJpbmcsXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIG1vZGlmaWVkQXQ/OiBudW1iZXJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1Q0RFOFx1QzE4QyBcdUQ2NTVcdUM3NzhcbiAgICAgIGlmICh0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUM3NzhcdUIzNzFcdUMyRjFcdUM3NzQgXHVDREU4XHVDMThDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBcdUQzMENcdUM3N0MgXHVENTc0XHVDMkRDIFx1QUNDNFx1QzBCMFxuICAgICAgY29uc3QgaGFzaCA9IGNvbXB1dGVIYXNoKGNvbnRlbnQpO1xuXG4gICAgICAvLyBcdUFFMzBcdUM4NzQgXHVCMTc4XHVEMkI4IFx1RDY1NVx1Qzc3OFxuICAgICAgY29uc3QgZXhpc3RpbmdOb3RlID0gdGhpcy5tZXRhZGF0YVN0b3JlLmdldE5vdGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgXG4gICAgICAvLyBcdUJDQzBcdUFDQkQgXHVDQ0I0XHVEMDZDOiBcdUQ1NzRcdUMyRENcdUM2NDAgXHVDMjE4XHVDODE1IFx1QzJEQ1x1QUMwNCBcdUJBQThcdUI0NTAgXHVENjU1XHVDNzc4XG4gICAgICBpZiAoZXhpc3RpbmdOb3RlKSB7XG4gICAgICAgIC8vIFx1RDU3NFx1QzJEQ1x1QUMwMCBcdUFDMTlcdUM3M0NcdUJBNzQgXHVDMkE0XHVEMEI1XG4gICAgICAgIGlmIChleGlzdGluZ05vdGUuaGFzaCA9PT0gaGFzaCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUQzMENcdUM3N0MgXHVCQ0MwXHVBQ0JEIFx1QzVDNlx1Qzc0QyAoXHVENTc0XHVDMkRDKSwgXHVDMkE0XHVEMEI1OiAke2ZpbGVQYXRofWApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gbW9kaWZpZWRBdFx1Qzc3NCBcdUM3ODhcdUFDRTAgXHVBRTMwXHVDODc0IFx1QUMxMlx1QUNGQyBcdUFDMTlcdUM3M0NcdUJBNzQgXHVDMkE0XHVEMEI1XG4gICAgICAgIGlmIChcbiAgICAgICAgICBtb2RpZmllZEF0ICYmXG4gICAgICAgICAgZXhpc3RpbmdOb3RlLm1vZGlmaWVkQXQgJiZcbiAgICAgICAgICBleGlzdGluZ05vdGUubW9kaWZpZWRBdCA9PT0gbW9kaWZpZWRBdFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEMzBDXHVDNzdDIFx1QkNDMFx1QUNCRCBcdUM1QzZcdUM3NEMgKFx1QzIxOFx1QzgxNSBcdUMyRENcdUFDMDQpLCBcdUMyQTRcdUQwQjU6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQzMENcdUMyRjFcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlTWFya2Rvd24oZmlsZVBhdGgsIGNvbnRlbnQpO1xuXG4gICAgICAvLyBcdUIxNzhcdUQyQjggSUQgXHVDMEREXHVDMTMxXG4gICAgICBjb25zdCBub3RlSWQgPSB0aGlzLmdlbmVyYXRlTm90ZUlkKGZpbGVQYXRoKTtcblxuICAgICAgLy8gXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNVxuICAgICAgY29uc3Qgbm90ZU1ldGFkYXRhOiBOb3RlTWV0YWRhdGEgPSB7XG4gICAgICAgIGlkOiBub3RlSWQsXG4gICAgICAgIHBhdGg6IGZpbGVQYXRoLFxuICAgICAgICB0aXRsZTogcGFyc2VkLnRpdGxlLFxuICAgICAgICB0YWdzOiBwYXJzZWQudGFncyxcbiAgICAgICAgbGlua3M6IHBhcnNlZC5saW5rcyxcbiAgICAgICAgZnJvbnRtYXR0ZXI6IHBhcnNlZC5mcm9udG1hdHRlcixcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICBoYXNoLFxuICAgICAgICBtb2RpZmllZEF0LFxuICAgICAgfTtcblxuICAgICAgdGhpcy5tZXRhZGF0YVN0b3JlLnVwc2VydE5vdGUobm90ZU1ldGFkYXRhKTtcblxuICAgICAgLy8gXHVBRTMwXHVDODc0IFx1Q0NBRFx1RDA2QyBcdUMwQURcdUM4MUNcbiAgICAgIGlmIChleGlzdGluZ05vdGUpIHtcbiAgICAgICAgY29uc3Qgb2xkQ2h1bmtzID0gdGhpcy5tZXRhZGF0YVN0b3JlLmdldENodW5rc0J5Tm90ZUlkKG5vdGVJZCk7XG4gICAgICAgIHRoaXMudmVjdG9yU3RvcmUuZGVsZXRlRW1iZWRkaW5ncyhvbGRDaHVua3MubWFwKChjKSA9PiBjLmlkKSk7XG4gICAgICAgIHRoaXMubWV0YWRhdGFTdG9yZS5kZWxldGVDaHVua3NCeU5vdGVJZChub3RlSWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBcdUNDQURcdUQwQjlcbiAgICAgIGNvbnN0IGNodW5rcyA9IGNodW5rVGV4dChub3RlSWQsIHBhcnNlZC5zZWN0aW9ucywge1xuICAgICAgICBjaHVua1NpemU6IHRoaXMuY29uZmlnLmNodW5rU2l6ZSxcbiAgICAgICAgY2h1bmtPdmVybGFwOiB0aGlzLmNvbmZpZy5jaHVua092ZXJsYXAsXG4gICAgICB9KTtcblxuICAgICAgaWYgKGNodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYFx1Q0NBRFx1RDA2QyBcdUM1QzZcdUM3NEM6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHVDQ0FEXHVEMDZDIFx1QzgwMFx1QzdBNVxuICAgICAgdGhpcy5tZXRhZGF0YVN0b3JlLmluc2VydENodW5rcyhjaHVua3MpO1xuXG4gICAgICAvLyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxIFx1QkMwRiBcdUM4MDBcdUM3QTVcbiAgICAgIGNvbnNvbGUubG9nKGBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxIFx1QzkxMTogJHtmaWxlUGF0aH0gKCR7Y2h1bmtzLmxlbmd0aH1cdUFDMUMgXHVDQ0FEXHVEMDZDKWApO1xuICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgICAgLy8gXHVDREU4XHVDMThDIFx1RDY1NVx1Qzc3OFxuICAgICAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUM3NzhcdUIzNzFcdUMyRjFcdUM3NzQgXHVDREU4XHVDMThDXHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW1iZWRkaW5nID0gYXdhaXQgdGhpcy5lbWJlZGRpbmdHZW5lcmF0b3IuZW1iZWQoY2h1bmsudGV4dCk7XG4gICAgICAgIHRoaXMudmVjdG9yU3RvcmUuc3RvcmVFbWJlZGRpbmcoY2h1bmsuaWQsIGVtYmVkZGluZyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDNjQ0XHVCOENDOiAke2ZpbGVQYXRofWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmVycm9yKGBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkU0XHVEMzI4OiAke2ZpbGVQYXRofWAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUQzMENcdUM3N0MgXHVDMEFEXHVDODFDIFx1Q0M5OFx1QjlBQ1xuICAgKi9cbiAgYXN5bmMgZGVsZXRlRmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgbm90ZSA9IHRoaXMubWV0YWRhdGFTdG9yZS5nZXROb3RlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICBpZiAoIW5vdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVua3MgPSB0aGlzLm1ldGFkYXRhU3RvcmUuZ2V0Q2h1bmtzQnlOb3RlSWQobm90ZS5pZCk7XG4gICAgdGhpcy52ZWN0b3JTdG9yZS5kZWxldGVFbWJlZGRpbmdzKGNodW5rcy5tYXAoKGMpID0+IGMuaWQpKTtcbiAgICB0aGlzLm1ldGFkYXRhU3RvcmUuZGVsZXRlQ2h1bmtzQnlOb3RlSWQobm90ZS5pZCk7XG4gICAgdGhpcy5tZXRhZGF0YVN0b3JlLmRlbGV0ZU5vdGUobm90ZS5pZCk7XG5cbiAgICBjb25zb2xlLmxvZyhgXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQyBcdUM2NDRcdUI4Q0M6ICR7ZmlsZVBhdGh9YCk7XG4gIH1cblxuICAvKipcbiAgICogXHVBQzgwXHVDMEM5XG4gICAqL1xuICBhc3luYyBzZWFyY2gocXVlcnk6IHN0cmluZywgaz86IG51bWJlcik6IFByb21pc2U8QXJyYXk8eyBjaHVuazogQ2h1bms7IHNjb3JlOiBudW1iZXIgfT4+IHtcbiAgICBjb25zdCB0b3BLID0gayB8fCB0aGlzLmNvbmZpZy50b3BLO1xuXG4gICAgLy8gXHVDRkZDXHVCOUFDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzFcbiAgICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IGF3YWl0IHRoaXMuZW1iZWRkaW5nR2VuZXJhdG9yLmVtYmVkKHF1ZXJ5KTtcblxuICAgIC8vIFx1QkNBMVx1RDEzMCBcdUFDODBcdUMwQzlcbiAgICBjb25zdCByZXN1bHRzID0gdGhpcy52ZWN0b3JTdG9yZS5zZWFyY2gocXVlcnlFbWJlZGRpbmcsIHRvcEspO1xuXG4gICAgLy8gXHVDQ0FEXHVEMDZDIFx1QzgxNVx1QkNGNCBcdUNEOTRcdUFDMDBcbiAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gcmVzdWx0c1xuICAgICAgLm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5tZXRhZGF0YVN0b3JlLmdldENodW5rQnlJZChyZXN1bHQuY2h1bmtJZCk7XG4gICAgICAgIGlmICghY2h1bmspIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNodW5rLFxuICAgICAgICAgIHNjb3JlOiByZXN1bHQuc2NvcmUsXG4gICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmZpbHRlcigocikgPT4gciAhPT0gbnVsbCkgYXMgQXJyYXk8eyBjaHVuazogQ2h1bms7IHNjb3JlOiBudW1iZXIgfT47XG5cbiAgICByZXR1cm4gc2VhcmNoUmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUFDODBcdUMwQzkgXHVBQ0IwXHVBQ0ZDXHVDNUQwIFx1QjE3OFx1RDJCOCBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDRDk0XHVBQzAwXG4gICAqL1xuICBnZXRTZWFyY2hSZXN1bHRzV2l0aE1ldGFkYXRhKFxuICAgIHNlYXJjaFJlc3VsdHM6IEFycmF5PHsgY2h1bms6IENodW5rOyBzY29yZTogbnVtYmVyIH0+XG4gICk6IEFycmF5PHtcbiAgICBjaHVuazogQ2h1bms7XG4gICAgbm90ZTogTm90ZU1ldGFkYXRhO1xuICAgIHNjb3JlOiBudW1iZXI7XG4gIH0+IHtcbiAgICByZXR1cm4gc2VhcmNoUmVzdWx0c1xuICAgICAgLm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdGUgPSB0aGlzLm1ldGFkYXRhU3RvcmUuZ2V0Tm90ZUJ5SWQocmVzdWx0LmNodW5rLm5vdGVJZCk7XG4gICAgICAgIGlmICghbm90ZSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2h1bms6IHJlc3VsdC5jaHVuayxcbiAgICAgICAgICBub3RlLFxuICAgICAgICAgIHNjb3JlOiByZXN1bHQuc2NvcmUsXG4gICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmZpbHRlcigocikgPT4gciAhPT0gbnVsbCkgYXMgQXJyYXk8e1xuICAgICAgY2h1bms6IENodW5rO1xuICAgICAgbm90ZTogTm90ZU1ldGFkYXRhO1xuICAgICAgc2NvcmU6IG51bWJlcjtcbiAgICB9PjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIxNzhcdUQyQjggSUQgXHVDMEREXHVDMTMxXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlTm90ZUlkKGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBjcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShmaWxlUGF0aCkuZGlnZXN0KFwiaGV4XCIpLnN1YnN0cmluZygwLCAxNik7XG4gIH1cblxuICAvKipcbiAgICogXHVCOUFDXHVDMThDXHVDMkE0IFx1RDU3NFx1QzgxQ1xuICAgKi9cbiAgY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5tZXRhZGF0YVN0b3JlLmNsb3NlKCk7XG4gICAgdGhpcy52ZWN0b3JTdG9yZS5jbG9zZSgpO1xuICB9XG59XG4iLCAiLy8gT2JzaWRpYW4gXHVCQ0ZDXHVEMkI4IFx1RDMwQ1x1Qzc3QyBcdUJDQzBcdUFDQkQgXHVBQzEwXHVDOUMwIFx1QkMwRiBcdUM3OTBcdUIzRDkgXHVDNzc4XHVCMzcxXHVDMkYxXG5cbmltcG9ydCB7IFRGaWxlLCBWYXVsdCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBJbmRleGVyLCBQcm9ncmVzc0NhbGxiYWNrIH0gZnJvbSBcIi4vaW5kZXhpbmcvaW5kZXhlclwiO1xuaW1wb3J0IHsgSW5kZXhpbmdQcm9ncmVzcyB9IGZyb20gXCIuL2luZGV4aW5nL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFdhdGNoZXIge1xuICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcbiAgcHJpdmF0ZSBpbmRleGVyOiBJbmRleGVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaXNJbmRleGluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGluZGV4UXVldWU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGluZGV4aW5nSW5Qcm9ncmVzczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7IC8vIFx1QzlDNFx1RDU4OSBcdUM5MTFcdUM3NzggXHVDNzc4XHVCMzcxXHVDMkYxIFx1Q0Q5NFx1QzgwMVxuXG4gIGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCkge1xuICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM3NzhcdUIzNzFcdUMxMUMgXHVDMTI0XHVDODE1XG4gICAqL1xuICBzZXRJbmRleGVyKGluZGV4ZXI6IEluZGV4ZXIgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5pbmRleGVyID0gaW5kZXhlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNEMDhcdUFFMzAgXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzJFNFx1RDU4OSAoXHVDOUM0XHVENTg5XHVCM0M0IFx1Q0Y1Q1x1QkMzMSBcdUM5QzBcdUM2RDApXG4gICAqL1xuICBhc3luYyBpbmRleFZhdWx0KHByb2dyZXNzQ2FsbGJhY2s/OiBQcm9ncmVzc0NhbGxiYWNrKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc3OFx1QjM3MVx1QzExQ1x1QUMwMCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSW5kZXhpbmcpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdUM3NzRcdUJCRjggXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzc0IFx1QzlDNFx1RDU4OSBcdUM5MTFcdUM3ODVcdUIyQzhcdUIyRTRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0luZGV4aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmluZGV4ZXIucmVzZXRDYW5jZWwoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZEZpbGVzID0gdGhpcy52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBjb25zb2xlLmxvZyhgXHVDNzc4XHVCMzcxXHVDMkYxXHVENTYwIFx1RDMwQ1x1Qzc3QyBcdUMyMTg6ICR7bWRGaWxlcy5sZW5ndGh9YCk7XG5cbiAgICAgIC8vIFx1Q0QwOFx1QUUzMCBcdUM5QzRcdUQ1ODlcdUIzQzQgXHVDRjVDXHVCQzMxXG4gICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKHtcbiAgICAgICAgICB0b3RhbEZpbGVzOiBtZEZpbGVzLmxlbmd0aCxcbiAgICAgICAgICBwcm9jZXNzZWRGaWxlczogMCxcbiAgICAgICAgICBzdGF0dXM6IFwiaW5kZXhpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGxldCBpbmRleGVkID0gMDtcbiAgICAgIGxldCBmYWlsZWQgPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgbWRGaWxlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1QzIxOFx1QzgxNSBcdUMyRENcdUFDMDQgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICAgICAgY29uc3QgbW9kaWZpZWRBdCA9IGZpbGUuc3RhdD8ubXRpbWUgfHwgdW5kZWZpbmVkO1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlci5pbmRleEZpbGUoZmlsZS5wYXRoLCBjb250ZW50LCBtb2RpZmllZEF0KTtcbiAgICAgICAgICBpbmRleGVkKys7XG5cbiAgICAgICAgICAvLyBcdUM5QzRcdUQ1ODlcdUIzQzQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soe1xuICAgICAgICAgICAgICB0b3RhbEZpbGVzOiBtZEZpbGVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgcHJvY2Vzc2VkRmlsZXM6IGluZGV4ZWQsXG4gICAgICAgICAgICAgIGN1cnJlbnRGaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgIHN0YXR1czogXCJpbmRleGluZ1wiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IFwiXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzc0IFx1Q0RFOFx1QzE4Q1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1Qzc3OFx1QjM3MVx1QzJGMVx1Qzc3NCBcdUMwQUNcdUM2QTlcdUM3OTBcdUM1RDAgXHVDNzU4XHVENTc0IFx1Q0RFOFx1QzE4Q1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIHRvdGFsRmlsZXM6IG1kRmlsZXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZEZpbGVzOiBpbmRleGVkLFxuICAgICAgICAgICAgICAgIHN0YXR1czogXCJjYW5jZWxsZWRcIixcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1RDMwQ1x1Qzc3QyBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkU0XHVEMzI4OiAke2ZpbGUucGF0aH1gLCBlcnJvcik7XG4gICAgICAgICAgZmFpbGVkKys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gXHVDNjQ0XHVCOENDIFx1Q0Y1Q1x1QkMzMVxuICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayh7XG4gICAgICAgICAgdG90YWxGaWxlczogbWRGaWxlcy5sZW5ndGgsXG4gICAgICAgICAgcHJvY2Vzc2VkRmlsZXM6IGluZGV4ZWQsXG4gICAgICAgICAgc3RhdHVzOiBcImNvbXBsZXRlZFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgbmV3IE5vdGljZShgXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzY0NFx1QjhDQzogJHtpbmRleGVkfVx1QUMxQyBcdUMxMzFcdUFDRjUsICR7ZmFpbGVkfVx1QUMxQyBcdUMyRTRcdUQzMjhgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QkNGQ1x1RDJCOCBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDOTExIFx1QzYyNFx1Qjk1ODpcIiwgZXJyb3IpO1xuICAgICAgXG4gICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKHtcbiAgICAgICAgICB0b3RhbEZpbGVzOiAwLFxuICAgICAgICAgIHByb2Nlc3NlZEZpbGVzOiAwLFxuICAgICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbmV3IE5vdGljZShcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUM5MTEgXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0luZGV4aW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUNERThcdUMxOENcbiAgICovXG4gIGNhbmNlbEluZGV4aW5nKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmluZGV4ZXIpIHtcbiAgICAgIHRoaXMuaW5kZXhlci5jYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMzBDXHVDNzdDIFx1QzBERFx1QzEzMSBcdUM3NzRcdUJDQTRcdUQyQjggXHVDQzk4XHVCOUFDXG4gICAqL1xuICBhc3luYyBvbkZpbGVDcmVhdGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlciB8fCBmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICBjb25zdCBtb2RpZmllZEF0ID0gZmlsZS5zdGF0Py5tdGltZSB8fCB1bmRlZmluZWQ7XG4gICAgICBhd2FpdCB0aGlzLmluZGV4ZXIuaW5kZXhGaWxlKGZpbGUucGF0aCwgY29udGVudCwgbW9kaWZpZWRBdCk7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEMzBDXHVDNzdDIFx1QzBERFx1QzEzMSBcdUM3NzhcdUIzNzFcdUMyRjE6ICR7ZmlsZS5wYXRofWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdUQzMENcdUM3N0MgXHVDMEREXHVDMTMxIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMzBDXHVDNzdDIFx1QzIxOFx1QzgxNSBcdUM3NzRcdUJDQTRcdUQyQjggXHVDQzk4XHVCOUFDXG4gICAqL1xuICBhc3luYyBvbkZpbGVNb2RpZnkoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlciB8fCBmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHVDOTExXHVCQ0Y1IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUJDMjlcdUM5QzBcdUI5N0MgXHVDNzA0XHVENTc0IFx1RDA1MFx1QzVEMCBcdUNEOTRcdUFDMDBcbiAgICB0aGlzLmluZGV4UXVldWUuYWRkKGZpbGUucGF0aCk7XG5cbiAgICAvLyAxMDBtcyBcdUQ2QzRcdUM1RDAgXHVDNzc4XHVCMzcxXHVDMkYxIChcdUM1RjBcdUMxOEQgXHVDMjE4XHVDODE1IFx1QkMyOVx1QzlDMClcbiAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmluZGV4UXVldWUuaGFzKGZpbGUucGF0aCkgJiYgIXRoaXMuaW5kZXhpbmdJblByb2dyZXNzLmhhcyhmaWxlLnBhdGgpKSB7XG4gICAgICAgIHRoaXMuaW5kZXhRdWV1ZS5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgdGhpcy5pbmRleGluZ0luUHJvZ3Jlc3MuYWRkKGZpbGUucGF0aCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIGNvbnN0IG1vZGlmaWVkQXQgPSBmaWxlLnN0YXQ/Lm10aW1lIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodGhpcy5pbmRleGVyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4ZXIuaW5kZXhGaWxlKGZpbGUucGF0aCwgY29udGVudCwgbW9kaWZpZWRBdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUQzMENcdUM3N0MgXHVDMjE4XHVDODE1IFx1Qzc3OFx1QjM3MVx1QzJGMTogJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgXHVEMzBDXHVDNzdDIFx1QzIxOFx1QzgxNSBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkU0XHVEMzI4OiAke2ZpbGUucGF0aH1gLCBlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdGhpcy5pbmRleGluZ0luUHJvZ3Jlc3MuZGVsZXRlKGZpbGUucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1RDMwQ1x1Qzc3QyBcdUMwQURcdUM4MUMgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1Q0M5OFx1QjlBQ1xuICAgKi9cbiAgYXN5bmMgb25GaWxlRGVsZXRlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmluZGV4ZXIgfHwgZmlsZS5leHRlbnNpb24gIT09IFwibWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmluZGV4ZXIuZGVsZXRlRmlsZShmaWxlLnBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYFx1RDMwQ1x1Qzc3QyBcdUMwQURcdUM4MUMgXHVDQzk4XHVCOUFDOiAke2ZpbGUucGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQyBcdUNDOThcdUI5QUMgXHVDMkU0XHVEMzI4OiAke2ZpbGUucGF0aH1gLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1RDMwQ1x1Qzc3QyBcdUM3NzRcdUI5ODQgXHVCQ0MwXHVBQ0JEIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUNDOThcdUI5QUNcbiAgICovXG4gIGFzeW5jIG9uRmlsZVJlbmFtZShmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmluZGV4ZXIgfHwgZmlsZS5leHRlbnNpb24gIT09IFwibWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBcdUM3NzRcdUM4MDQgXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQ1xuICAgICAgYXdhaXQgdGhpcy5pbmRleGVyLmRlbGV0ZUZpbGUob2xkUGF0aCk7XG5cbiAgICAgIC8vIFx1QzBDOCBcdUQzMENcdUM3N0MgXHVDNzc4XHVCMzcxXHVDMkYxXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgbW9kaWZpZWRBdCA9IGZpbGUuc3RhdD8ubXRpbWUgfHwgdW5kZWZpbmVkO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5pbmRleGVyKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlci5pbmRleEZpbGUoZmlsZS5wYXRoLCBjb250ZW50LCBtb2RpZmllZEF0KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYFx1RDMwQ1x1Qzc3QyBcdUM3NzRcdUI5ODQgXHVCQ0MwXHVBQ0JEIFx1Q0M5OFx1QjlBQzogJHtvbGRQYXRofSAtPiAke2ZpbGUucGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHVEMzBDXHVDNzdDIFx1Qzc3NFx1Qjk4NCBcdUJDQzBcdUFDQkQgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODogJHtvbGRQYXRofSAtPiAke2ZpbGUucGF0aH1gLCBlcnJvcik7XG4gICAgfVxuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLDRDQUFBQSxVQUFBO0FBQUE7QUFFQSxJQUFBQSxTQUFRLG1CQUFtQixDQUFDQyxVQUFTLFFBQVE7QUFDNUMsVUFBSSxRQUFRO0FBQ1osVUFBSSxPQUFPQSxZQUFXLFFBQVEsUUFBUUEsU0FBUSxHQUFHLE9BQU8sV0FBVztBQUNsRSxjQUFNLElBQUksVUFBVSxpQkFBaUIsR0FBRywwQkFBMEI7QUFBQSxNQUNuRTtBQUNBLGFBQU87QUFBQSxJQUNSO0FBRUEsSUFBQUQsU0FBUSxRQUFRLE9BQU87QUFDdkIsSUFBQUEsU0FBUSxVQUFVLE9BQU8sSUFBSSw0QkFBNEI7QUFBQTtBQUFBOzs7QUNYekQ7QUFBQSxvREFBQUUsVUFBQUMsU0FBQTtBQUFBO0FBQ0EsUUFBTSxhQUFhLEVBQUUsT0FBTyxlQUFlLFVBQVUsTUFBTSxZQUFZLE9BQU8sY0FBYyxLQUFLO0FBRWpHLGFBQVMsWUFBWSxTQUFTLE1BQU07QUFDbkMsVUFBSSxlQUFlLGFBQWE7QUFDL0IsZUFBTyxJQUFJLFlBQVksU0FBUyxJQUFJO0FBQUEsTUFDckM7QUFDQSxVQUFJLE9BQU8sU0FBUyxVQUFVO0FBQzdCLGNBQU0sSUFBSSxVQUFVLHlDQUF5QztBQUFBLE1BQzlEO0FBQ0EsWUFBTSxLQUFLLE1BQU0sT0FBTztBQUN4QixpQkFBVyxRQUFRLEtBQUs7QUFDeEIsYUFBTyxlQUFlLE1BQU0sV0FBVyxVQUFVO0FBQ2pELFlBQU0sa0JBQWtCLE1BQU0sV0FBVztBQUN6QyxXQUFLLE9BQU87QUFBQSxJQUNiO0FBQ0EsV0FBTyxlQUFlLGFBQWEsS0FBSztBQUN4QyxXQUFPLGVBQWUsWUFBWSxXQUFXLE1BQU0sU0FBUztBQUM1RCxXQUFPLGVBQWUsWUFBWSxXQUFXLFFBQVEsVUFBVTtBQUMvRCxJQUFBQSxRQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUNuQmpCO0FBQUEsMkNBQUFDLFVBQUFDLFNBQUE7QUFLQSxRQUFJLE1BQU0sUUFBUSxNQUFNLEVBQUUsT0FBTztBQU1qQyxJQUFBQSxRQUFPLFVBQVU7QUFVakIsYUFBUyxjQUFlLEtBQUs7QUFDM0IsVUFBSSxZQUFZLE9BQU8sT0FDbkIsSUFBSSxVQUFVLEtBQ2QsYUFBYSxJQUFJLFVBQVUsR0FBRyxDQUFDLEdBQUc7QUFDcEMsY0FBTSxJQUFJLFVBQVUsc0RBQXNEO0FBQUEsTUFDNUU7QUFFQSxVQUFJLE9BQU8sVUFBVSxJQUFJLFVBQVUsQ0FBQyxDQUFDO0FBQ3JDLFVBQUksYUFBYSxLQUFLLFFBQVEsR0FBRztBQUNqQyxVQUFJLE9BQU8sS0FBSyxVQUFVLEdBQUcsVUFBVTtBQUN2QyxVQUFJLE9BQU8sS0FBSyxVQUFVLGFBQWEsQ0FBQztBQU14QyxVQUFJLGVBQWUsS0FBTSxRQUFPO0FBRWhDLFVBQUksTUFBTTtBQUNSLGVBQU8sTUFBTSxNQUFNO0FBQUEsTUFDckI7QUFTQSxhQUFPLEtBQUssUUFBUSxXQUFXLEtBQUs7QUFHcEMsVUFBSSxPQUFPLE1BQU07QUFDZixlQUFPLEtBQUssUUFBUSxPQUFPLElBQUk7QUFBQSxNQUNqQztBQUVBLFVBQUksUUFBUSxLQUFLLElBQUksR0FBRztBQUFBLE1BRXhCLE9BQU87QUFFTCxlQUFPLE1BQU07QUFBQSxNQUNmO0FBRUEsYUFBTyxPQUFPO0FBQUEsSUFDaEI7QUFBQTtBQUFBOzs7QUNqRUE7QUFBQSxzQ0FBQUMsVUFBQUMsU0FBQTtBQUlBLFFBQUksS0FBSyxRQUFRLElBQUk7QUFBckIsUUFDRSxPQUFPLFFBQVEsTUFBTTtBQUR2QixRQUVFLGdCQUFnQjtBQUZsQixRQUdFQyxRQUFPLEtBQUs7QUFIZCxRQUlFLFVBQVUsS0FBSztBQUpqQixRQUtFLFNBQ0csR0FBRyxjQUNGLFNBQVNDLE9BQU07QUFDYixVQUFJO0FBQ0YsV0FBRyxXQUFXQSxLQUFJO0FBQUEsTUFDcEIsU0FBUyxHQUFHO0FBQ1YsZUFBTztBQUFBLE1BQ1Q7QUFDQSxhQUFPO0FBQUEsSUFDVCxLQUNGLEdBQUcsY0FDSCxLQUFLO0FBaEJULFFBaUJFLFdBQVc7QUFBQSxNQUNULE9BQU8sUUFBUSxJQUFJLHVCQUF1QjtBQUFBLE1BQzFDLFVBQVUsUUFBUSxJQUFJLDhCQUE4QjtBQUFBLE1BQ3BELFVBQVUsUUFBUTtBQUFBLE1BQ2xCLE1BQU0sUUFBUTtBQUFBLE1BQ2QsWUFDRSxXQUNBLFFBQVEsU0FBUyxVQUNqQixNQUNBLFFBQVEsV0FDUixNQUNBLFFBQVE7QUFBQSxNQUNWLFNBQVMsUUFBUSxTQUFTO0FBQUEsTUFDMUIsVUFBVTtBQUFBLE1BQ1YsS0FBSztBQUFBO0FBQUEsUUFFSCxDQUFDLGVBQWUsU0FBUyxVQUFVO0FBQUE7QUFBQSxRQUVuQyxDQUFDLGVBQWUsU0FBUyxTQUFTLFVBQVU7QUFBQSxRQUM1QyxDQUFDLGVBQWUsU0FBUyxXQUFXLFVBQVU7QUFBQTtBQUFBLFFBRTlDLENBQUMsZUFBZSxPQUFPLFNBQVMsVUFBVTtBQUFBLFFBQzFDLENBQUMsZUFBZSxTQUFTLFVBQVU7QUFBQTtBQUFBLFFBRW5DLENBQUMsZUFBZSxPQUFPLFdBQVcsVUFBVTtBQUFBLFFBQzVDLENBQUMsZUFBZSxXQUFXLFVBQVU7QUFBQTtBQUFBLFFBRXJDLENBQUMsZUFBZSxTQUFTLFdBQVcsVUFBVTtBQUFBO0FBQUEsUUFFOUMsQ0FBQyxlQUFlLFlBQVksV0FBVyxZQUFZLFFBQVEsVUFBVTtBQUFBO0FBQUEsUUFFckUsQ0FBQyxlQUFlLGVBQWUsV0FBVyxnQkFBZ0IsVUFBVTtBQUFBLFFBQ3BFLENBQUMsZUFBZSxlQUFlLFNBQVMsZ0JBQWdCLFVBQVU7QUFBQSxRQUNsRSxDQUFDLGVBQWUsZUFBZSxXQUFXLGdCQUFnQixVQUFVO0FBQUE7QUFBQSxRQUVwRSxDQUFDLGVBQWUsT0FBTyxXQUFXLGNBQWMsVUFBVTtBQUFBLE1BQzVEO0FBQUEsSUFDRjtBQVFGLGFBQVMsU0FBUyxNQUFNO0FBRXRCLFVBQUksT0FBTyxRQUFRLFVBQVU7QUFDM0IsZUFBTyxFQUFFLFVBQVUsS0FBSztBQUFBLE1BQzFCLFdBQVcsQ0FBQyxNQUFNO0FBQ2hCLGVBQU8sQ0FBQztBQUFBLE1BQ1Y7QUFHQSxhQUFPLEtBQUssUUFBUSxFQUFFLElBQUksU0FBU0MsSUFBRztBQUNwQyxZQUFJLEVBQUVBLE1BQUssTUFBTyxNQUFLQSxFQUFDLElBQUksU0FBU0EsRUFBQztBQUFBLE1BQ3hDLENBQUM7QUFHRCxVQUFJLENBQUMsS0FBSyxhQUFhO0FBQ3JCLGFBQUssY0FBY0osU0FBUSxRQUFRQSxTQUFRLFlBQVksQ0FBQztBQUFBLE1BQzFEO0FBR0EsVUFBSSxLQUFLLFFBQVEsS0FBSyxRQUFRLEtBQUssU0FBUztBQUMxQyxhQUFLLFlBQVk7QUFBQSxNQUNuQjtBQUdBLFVBQUksY0FDRixPQUFPLHdCQUF3QixhQUMzQiwwQkFDQTtBQUVOLFVBQUksUUFBUSxDQUFDLEdBQ1gsSUFBSSxHQUNKLElBQUksS0FBSyxJQUFJLFFBQ2IsR0FDQSxHQUNBO0FBRUYsYUFBTyxJQUFJLEdBQUcsS0FBSztBQUNqQixZQUFJRSxNQUFLO0FBQUEsVUFDUDtBQUFBLFVBQ0EsS0FBSyxJQUFJLENBQUMsRUFBRSxJQUFJLFNBQVMsR0FBRztBQUMxQixtQkFBTyxLQUFLLENBQUMsS0FBSztBQUFBLFVBQ3BCLENBQUM7QUFBQSxRQUNIO0FBQ0EsY0FBTSxLQUFLLENBQUM7QUFDWixZQUFJO0FBQ0YsY0FBSSxLQUFLLE9BQU8sWUFBWSxRQUFRLENBQUMsSUFBSSxZQUFZLENBQUM7QUFDdEQsY0FBSSxDQUFDLEtBQUssTUFBTTtBQUNkLGNBQUUsT0FBTztBQUFBLFVBQ1g7QUFDQSxpQkFBTztBQUFBLFFBQ1QsU0FBUyxHQUFHO0FBQ1YsY0FBSSxFQUFFLFNBQVMsc0JBQ1gsRUFBRSxTQUFTLHNDQUNYLENBQUMsWUFBWSxLQUFLLEVBQUUsT0FBTyxHQUFHO0FBQ2hDLGtCQUFNO0FBQUEsVUFDUjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBRUEsWUFBTSxJQUFJO0FBQUEsUUFDUixpREFDRSxNQUNHLElBQUksU0FBUyxHQUFHO0FBQ2YsaUJBQU8sS0FBSyxRQUFRO0FBQUEsUUFDdEIsQ0FBQyxFQUNBLEtBQUssSUFBSTtBQUFBLE1BQ2hCO0FBQ0EsVUFBSSxRQUFRO0FBQ1osWUFBTTtBQUFBLElBQ1I7QUFDQSxJQUFBRCxRQUFPLFVBQVVELFdBQVU7QUFRM0IsSUFBQUEsU0FBUSxjQUFjLFNBQVMsWUFBWSxjQUFjO0FBQ3ZELFVBQUksVUFBVSxNQUFNLG1CQUNsQixVQUFVLE1BQU0saUJBQ2hCLFFBQVEsQ0FBQyxHQUNUO0FBRUYsWUFBTSxrQkFBa0I7QUFFeEIsWUFBTSxvQkFBb0IsU0FBUyxHQUFHLElBQUk7QUFDeEMsaUJBQVMsSUFBSSxHQUFHLElBQUksR0FBRyxRQUFRLElBQUksR0FBRyxLQUFLO0FBQ3pDLHFCQUFXLEdBQUcsQ0FBQyxFQUFFLFlBQVk7QUFDN0IsY0FBSSxhQUFhLFlBQVk7QUFDM0IsZ0JBQUksY0FBYztBQUNoQixrQkFBSSxhQUFhLGNBQWM7QUFDN0I7QUFBQSxjQUNGO0FBQUEsWUFDRixPQUFPO0FBQ0w7QUFBQSxZQUNGO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBR0EsWUFBTSxrQkFBa0IsS0FBSztBQUM3QixZQUFNO0FBR04sWUFBTSxvQkFBb0I7QUFDMUIsWUFBTSxrQkFBa0I7QUFHeEIsVUFBSSxhQUFhO0FBQ2pCLFVBQUksU0FBUyxRQUFRLFVBQVUsTUFBTSxHQUFHO0FBQ3RDLG1CQUFXLGNBQWMsUUFBUTtBQUFBLE1BQ25DO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFXQSxJQUFBQSxTQUFRLFVBQVUsU0FBUyxRQUFRLE1BQU07QUFDdkMsVUFBSSxNQUFNLFFBQVEsSUFBSSxHQUNwQjtBQUNGLGFBQU8sTUFBTTtBQUNYLFlBQUksUUFBUSxLQUFLO0FBRWYsZ0JBQU0sUUFBUSxJQUFJO0FBQUEsUUFDcEI7QUFDQSxZQUNFLE9BQU9FLE1BQUssS0FBSyxjQUFjLENBQUMsS0FDaEMsT0FBT0EsTUFBSyxLQUFLLGNBQWMsQ0FBQyxHQUNoQztBQUVBLGlCQUFPO0FBQUEsUUFDVDtBQUNBLFlBQUksU0FBUyxLQUFLO0FBRWhCLGdCQUFNLElBQUk7QUFBQSxZQUNSLDZDQUNFLE9BQ0E7QUFBQSxVQUNKO0FBQUEsUUFDRjtBQUVBLGVBQU87QUFDUCxjQUFNQSxNQUFLLEtBQUssSUFBSTtBQUFBLE1BQ3RCO0FBQUEsSUFDRjtBQUFBO0FBQUE7OztBQzVOQTtBQUFBLHdEQUFBRyxVQUFBO0FBQUE7QUFDQSxRQUFNLEVBQUUsTUFBTSxJQUFJO0FBRWxCLElBQUFBLFNBQVEsVUFBVSxTQUFTLFFBQVEsS0FBSztBQUN2QyxhQUFPLEtBQUssS0FBSyxFQUFFLFFBQVEsS0FBSyxNQUFNLEtBQUs7QUFBQSxJQUM1QztBQUVBLElBQUFBLFNBQVEsT0FBTyxTQUFTLEtBQUssS0FBSztBQUNqQyxXQUFLLEtBQUssRUFBRSxLQUFLLEdBQUc7QUFDcEIsYUFBTztBQUFBLElBQ1I7QUFFQSxJQUFBQSxTQUFRLFFBQVEsU0FBUyxRQUFRO0FBQ2hDLFdBQUssS0FBSyxFQUFFLE1BQU07QUFDbEIsYUFBTztBQUFBLElBQ1I7QUFFQSxJQUFBQSxTQUFRLGdCQUFnQixTQUFTLGlCQUFpQixNQUFNO0FBQ3ZELFdBQUssS0FBSyxFQUFFLGNBQWMsR0FBRyxJQUFJO0FBQ2pDLGFBQU87QUFBQSxJQUNSO0FBRUEsSUFBQUEsU0FBUSxzQkFBc0IsU0FBUyx1QkFBdUIsTUFBTTtBQUNuRSxXQUFLLEtBQUssRUFBRSxvQkFBb0IsR0FBRyxJQUFJO0FBQ3ZDLGFBQU87QUFBQSxJQUNSO0FBRUEsSUFBQUEsU0FBUSxhQUFhLFNBQVMsY0FBYyxNQUFNO0FBQ2pELFdBQUssS0FBSyxFQUFFLFdBQVcsR0FBRyxJQUFJO0FBQzlCLGFBQU87QUFBQSxJQUNSO0FBRUEsSUFBQUEsU0FBUSxVQUFVO0FBQUEsTUFDakIsTUFBTTtBQUFBLFFBQ0wsS0FBSyxTQUFTLE9BQU87QUFBRSxpQkFBTyxLQUFLLEtBQUssRUFBRTtBQUFBLFFBQU07QUFBQSxRQUNoRCxZQUFZO0FBQUEsTUFDYjtBQUFBLE1BQ0EsTUFBTTtBQUFBLFFBQ0wsS0FBSyxTQUFTLE9BQU87QUFBRSxpQkFBTyxLQUFLLEtBQUssRUFBRTtBQUFBLFFBQU07QUFBQSxRQUNoRCxZQUFZO0FBQUEsTUFDYjtBQUFBLE1BQ0EsZUFBZTtBQUFBLFFBQ2QsS0FBSyxTQUFTLGdCQUFnQjtBQUFFLGlCQUFPLEtBQUssS0FBSyxFQUFFO0FBQUEsUUFBZTtBQUFBLFFBQ2xFLFlBQVk7QUFBQSxNQUNiO0FBQUEsTUFDQSxVQUFVO0FBQUEsUUFDVCxLQUFLLFNBQVMsV0FBVztBQUFFLGlCQUFPLEtBQUssS0FBSyxFQUFFO0FBQUEsUUFBVTtBQUFBLFFBQ3hELFlBQVk7QUFBQSxNQUNiO0FBQUEsTUFDQSxRQUFRO0FBQUEsUUFDUCxLQUFLLFNBQVMsU0FBUztBQUFFLGlCQUFPLEtBQUssS0FBSyxFQUFFO0FBQUEsUUFBUTtBQUFBLFFBQ3BELFlBQVk7QUFBQSxNQUNiO0FBQUEsSUFDRDtBQUFBO0FBQUE7OztBQ3JEQTtBQUFBLDJEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFDQSxRQUFNLEVBQUUsTUFBTSxJQUFJO0FBQ2xCLFFBQU0sY0FBYyxvQkFBSSxRQUFRO0FBRWhDLElBQUFBLFFBQU8sVUFBVSxTQUFTLFlBQVksSUFBSTtBQUN6QyxVQUFJLE9BQU8sT0FBTyxXQUFZLE9BQU0sSUFBSSxVQUFVLDBDQUEwQztBQUU1RixZQUFNLEtBQUssS0FBSyxLQUFLO0FBQ3JCLFlBQU0sYUFBYSxjQUFjLElBQUksSUFBSTtBQUN6QyxZQUFNLEVBQUUsTUFBTSxJQUFJLFNBQVM7QUFHM0IsWUFBTSxhQUFhO0FBQUEsUUFDbEIsU0FBUyxFQUFFLE9BQU8sZ0JBQWdCLE9BQU8sSUFBSSxJQUFJLFdBQVcsT0FBTyxFQUFFO0FBQUEsUUFDckUsVUFBVSxFQUFFLE9BQU8sZ0JBQWdCLE9BQU8sSUFBSSxJQUFJLFdBQVcsUUFBUSxFQUFFO0FBQUEsUUFDdkUsV0FBVyxFQUFFLE9BQU8sZ0JBQWdCLE9BQU8sSUFBSSxJQUFJLFdBQVcsU0FBUyxFQUFFO0FBQUEsUUFDekUsV0FBVyxFQUFFLE9BQU8sZ0JBQWdCLE9BQU8sSUFBSSxJQUFJLFdBQVcsU0FBUyxFQUFFO0FBQUEsUUFDekUsVUFBVSxFQUFFLE9BQU8sTUFBTSxZQUFZLEtBQUs7QUFBQSxNQUMzQztBQUVBLGFBQU8saUJBQWlCLFdBQVcsUUFBUSxPQUFPLFVBQVU7QUFDNUQsYUFBTyxpQkFBaUIsV0FBVyxTQUFTLE9BQU8sVUFBVTtBQUM3RCxhQUFPLGlCQUFpQixXQUFXLFVBQVUsT0FBTyxVQUFVO0FBQzlELGFBQU8saUJBQWlCLFdBQVcsVUFBVSxPQUFPLFVBQVU7QUFHOUQsYUFBTyxXQUFXLFFBQVE7QUFBQSxJQUMzQjtBQUdBLFFBQU0sZ0JBQWdCLENBQUMsSUFBSSxTQUFTO0FBQ25DLFVBQUksYUFBYSxZQUFZLElBQUksRUFBRTtBQUNuQyxVQUFJLENBQUMsWUFBWTtBQUNoQixjQUFNLFNBQVM7QUFBQSxVQUNkLFFBQVEsR0FBRyxRQUFRLFVBQVUsTUFBTSxLQUFLO0FBQUEsVUFDeEMsVUFBVSxHQUFHLFFBQVEsWUFBWSxNQUFNLEtBQUs7QUFBQSxVQUM1QyxXQUFXLEdBQUcsUUFBUSx1QkFBeUIsTUFBTSxLQUFLO0FBQUEsVUFDMUQsU0FBUyxHQUFHLFFBQVEscUJBQXVCLE1BQU0sS0FBSztBQUFBLFVBQ3RELFlBQVksR0FBRyxRQUFRLHlCQUEyQixNQUFNLEtBQUs7QUFBQSxRQUM5RDtBQUNBLG9CQUFZLElBQUksSUFBSSxhQUFhO0FBQUEsVUFDaEMsU0FBUyxPQUFPLE9BQU8sRUFBRSxPQUFPLEdBQUcsUUFBUSxTQUFTLE1BQU0sS0FBSyxFQUFFLEdBQUcsTUFBTTtBQUFBLFVBQzFFLFVBQVUsT0FBTyxPQUFPLEVBQUUsT0FBTyxHQUFHLFFBQVEsa0JBQWtCLE1BQU0sS0FBSyxFQUFFLEdBQUcsTUFBTTtBQUFBLFVBQ3BGLFdBQVcsT0FBTyxPQUFPLEVBQUUsT0FBTyxHQUFHLFFBQVEsbUJBQW1CLE1BQU0sS0FBSyxFQUFFLEdBQUcsTUFBTTtBQUFBLFVBQ3RGLFdBQVcsT0FBTyxPQUFPLEVBQUUsT0FBTyxHQUFHLFFBQVEsbUJBQW1CLE1BQU0sS0FBSyxFQUFFLEdBQUcsTUFBTTtBQUFBLFFBQ3ZGLENBQUM7QUFBQSxNQUNGO0FBQ0EsYUFBTztBQUFBLElBQ1I7QUFHQSxRQUFNLGtCQUFrQixDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUUsT0FBTyxRQUFRLFVBQVUsV0FBVyxTQUFTLFdBQVcsTUFBTSxTQUFTLG9CQUFvQjtBQUNwSSxVQUFJLFFBQVEsT0FBTztBQUNuQixVQUFJLEdBQUcsZUFBZTtBQUNyQixpQkFBUztBQUNULGdCQUFRO0FBQ1IsZUFBTztBQUFBLE1BQ1IsT0FBTztBQUNOLGlCQUFTO0FBQ1QsZ0JBQVE7QUFDUixlQUFPO0FBQUEsTUFDUjtBQUNBLGFBQU8sSUFBSTtBQUNYLFVBQUk7QUFDSCxjQUFNLFNBQVMsTUFBTSxLQUFLLElBQUksTUFBTSxTQUFTO0FBQzdDLFlBQUksVUFBVSxPQUFPLE9BQU8sU0FBUyxZQUFZO0FBQ2hELGdCQUFNLElBQUksVUFBVSw4Q0FBOEM7QUFBQSxRQUNuRTtBQUNBLGNBQU0sSUFBSTtBQUNWLGVBQU87QUFBQSxNQUNSLFNBQVMsSUFBSTtBQUNaLFlBQUksR0FBRyxlQUFlO0FBQ3JCLGVBQUssSUFBSTtBQUNULGNBQUksU0FBUyxTQUFVLE9BQU0sSUFBSTtBQUFBLFFBQ2xDO0FBQ0EsY0FBTTtBQUFBLE1BQ1A7QUFBQSxJQUNEO0FBQUE7QUFBQTs7O0FDN0VBO0FBQUEsc0RBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUNBLFFBQU0sRUFBRSxrQkFBa0IsTUFBTSxJQUFJO0FBRXBDLElBQUFBLFFBQU8sVUFBVSxTQUFTLE9BQU8sUUFBUUMsVUFBUztBQUNqRCxVQUFJQSxZQUFXLEtBQU0sQ0FBQUEsV0FBVSxDQUFDO0FBQ2hDLFVBQUksT0FBTyxXQUFXLFNBQVUsT0FBTSxJQUFJLFVBQVUsd0NBQXdDO0FBQzVGLFVBQUksT0FBT0EsYUFBWSxTQUFVLE9BQU0sSUFBSSxVQUFVLGtEQUFrRDtBQUN2RyxZQUFNLFNBQVMsaUJBQWlCQSxVQUFTLFFBQVE7QUFFakQsWUFBTSxPQUFPLEtBQUssS0FBSyxFQUFFLFFBQVEsVUFBVSxNQUFNLElBQUksTUFBTSxJQUFJO0FBQy9ELGFBQU8sU0FBUyxLQUFLLE1BQU0sRUFBRSxJQUFJLElBQUksS0FBSyxJQUFJO0FBQUEsSUFDL0M7QUFBQTtBQUFBOzs7QUNYQTtBQUFBLHNEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFDQSxRQUFNLEtBQUssUUFBUSxJQUFJO0FBQ3ZCLFFBQU0sT0FBTyxRQUFRLE1BQU07QUFDM0IsUUFBTSxFQUFFLFVBQVUsSUFBSSxRQUFRLE1BQU07QUFDcEMsUUFBTSxFQUFFLE1BQU0sSUFBSTtBQUNsQixRQUFNLFdBQVcsVUFBVSxHQUFHLE1BQU07QUFFcEMsSUFBQUEsUUFBTyxVQUFVLGVBQWUsT0FBTyxVQUFVQyxVQUFTO0FBQ3pELFVBQUlBLFlBQVcsS0FBTSxDQUFBQSxXQUFVLENBQUM7QUFHaEMsVUFBSSxPQUFPLGFBQWEsU0FBVSxPQUFNLElBQUksVUFBVSx3Q0FBd0M7QUFDOUYsVUFBSSxPQUFPQSxhQUFZLFNBQVUsT0FBTSxJQUFJLFVBQVUsa0RBQWtEO0FBR3ZHLGlCQUFXLFNBQVMsS0FBSztBQUN6QixZQUFNLGVBQWUsY0FBY0EsV0FBVUEsU0FBUSxXQUFXO0FBQ2hFLFlBQU0sVUFBVSxjQUFjQSxXQUFVQSxTQUFRLFdBQVc7QUFHM0QsVUFBSSxDQUFDLFNBQVUsT0FBTSxJQUFJLFVBQVUsMkNBQTJDO0FBQzlFLFVBQUksYUFBYSxXQUFZLE9BQU0sSUFBSSxVQUFVLG9DQUFvQztBQUNyRixVQUFJLE9BQU8saUJBQWlCLFNBQVUsT0FBTSxJQUFJLFVBQVUsK0NBQStDO0FBQ3pHLFVBQUksQ0FBQyxhQUFjLE9BQU0sSUFBSSxVQUFVLGlEQUFpRDtBQUN4RixVQUFJLFdBQVcsUUFBUSxPQUFPLFlBQVksV0FBWSxPQUFNLElBQUksVUFBVSxpREFBaUQ7QUFHM0gsWUFBTSxTQUFTLEtBQUssUUFBUSxRQUFRLENBQUMsRUFBRSxNQUFNLE1BQU07QUFDbEQsY0FBTSxJQUFJLFVBQVUseURBQXlEO0FBQUEsTUFDOUUsQ0FBQztBQUVELFlBQU0sWUFBWSxNQUFNLFNBQVMsUUFBUSxFQUFFLEtBQUssTUFBTSxPQUFPLE1BQU0sSUFBSTtBQUN2RSxhQUFPLFVBQVUsS0FBSyxLQUFLLEVBQUUsT0FBTyxNQUFNLGNBQWMsVUFBVSxTQUFTLEdBQUcsV0FBVyxJQUFJO0FBQUEsSUFDOUY7QUFFQSxRQUFNLFlBQVksQ0FBQyxRQUFRLFlBQVk7QUFDdEMsVUFBSSxPQUFPO0FBQ1gsVUFBSSxhQUFhO0FBRWpCLGFBQU8sSUFBSSxRQUFRLENBQUMsU0FBUyxXQUFXO0FBQ3ZDLHFCQUFhLFNBQVMsT0FBTztBQUM1QixjQUFJO0FBQ0gsa0JBQU0sV0FBVyxPQUFPLFNBQVMsSUFBSTtBQUNyQyxnQkFBSSxDQUFDLFNBQVMsZ0JBQWdCO0FBQzdCLHFCQUFPLE1BQU07QUFDYixzQkFBUSxRQUFRO0FBQ2hCO0FBQUEsWUFDRDtBQUNBLGdCQUFJLFlBQVk7QUFDZiwyQkFBYTtBQUNiLHFCQUFPO0FBQUEsWUFDUjtBQUNBLGdCQUFJLFNBQVM7QUFDWixvQkFBTSxNQUFNLFFBQVEsUUFBUTtBQUM1QixrQkFBSSxRQUFRLFFBQVc7QUFDdEIsb0JBQUksT0FBTyxRQUFRLFlBQVksUUFBUSxJQUFLLFFBQU8sS0FBSyxJQUFJLEdBQUcsS0FBSyxJQUFJLFlBQVksS0FBSyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQUEsb0JBQy9GLE9BQU0sSUFBSSxVQUFVLDREQUE0RDtBQUFBLGNBQ3RGO0FBQUEsWUFDRDtBQUNBLHlCQUFhLElBQUk7QUFBQSxVQUNsQixTQUFTLEtBQUs7QUFDYixtQkFBTyxNQUFNO0FBQ2IsbUJBQU8sR0FBRztBQUFBLFVBQ1g7QUFBQSxRQUNELENBQUM7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNGO0FBQUE7QUFBQTs7O0FDbEVBO0FBQUEseURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUNBLFFBQU0sRUFBRSxNQUFNLElBQUk7QUFFbEIsSUFBQUEsUUFBTyxVQUFVLFNBQVMsVUFBVUMsVUFBUztBQUM1QyxVQUFJQSxZQUFXLEtBQU0sQ0FBQUEsV0FBVSxDQUFDO0FBR2hDLFVBQUksT0FBT0EsYUFBWSxTQUFVLE9BQU0sSUFBSSxVQUFVLGlEQUFpRDtBQUd0RyxZQUFNLGVBQWUsY0FBY0EsV0FBVUEsU0FBUSxXQUFXO0FBQ2hFLFVBQUksT0FBTyxpQkFBaUIsU0FBVSxPQUFNLElBQUksVUFBVSwrQ0FBK0M7QUFDekcsVUFBSSxDQUFDLGFBQWMsT0FBTSxJQUFJLFVBQVUsaURBQWlEO0FBRXhGLGFBQU8sS0FBSyxLQUFLLEVBQUUsVUFBVSxZQUFZO0FBQUEsSUFDMUM7QUFBQTtBQUFBOzs7QUNmQTtBQUFBLHdEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFDQSxRQUFNLEVBQUUsa0JBQWtCLE1BQU0sSUFBSTtBQUVwQyxJQUFBQSxRQUFPLFVBQVUsU0FBUyxlQUFlLE1BQU1DLFVBQVMsSUFBSTtBQUUzRCxVQUFJQSxZQUFXLEtBQU0sQ0FBQUEsV0FBVSxDQUFDO0FBQ2hDLFVBQUksT0FBT0EsYUFBWSxZQUFZO0FBQUUsYUFBS0E7QUFBUyxRQUFBQSxXQUFVLENBQUM7QUFBQSxNQUFHO0FBR2pFLFVBQUksT0FBTyxTQUFTLFNBQVUsT0FBTSxJQUFJLFVBQVUsd0NBQXdDO0FBQzFGLFVBQUksT0FBTyxPQUFPLFdBQVksT0FBTSxJQUFJLFVBQVUseUNBQXlDO0FBQzNGLFVBQUksT0FBT0EsYUFBWSxTQUFVLE9BQU0sSUFBSSxVQUFVLGtEQUFrRDtBQUN2RyxVQUFJLENBQUMsS0FBTSxPQUFNLElBQUksVUFBVSxzREFBc0Q7QUFHckYsWUFBTSxlQUFlLGtCQUFrQkEsV0FBVSxDQUFDLGlCQUFpQkEsVUFBUyxjQUFjLElBQUk7QUFDOUYsWUFBTSxnQkFBZ0IsaUJBQWlCQSxVQUFTLGVBQWU7QUFDL0QsWUFBTSxhQUFhLGlCQUFpQkEsVUFBUyxZQUFZO0FBQ3pELFlBQU0sVUFBVSxpQkFBaUJBLFVBQVMsU0FBUztBQUNuRCxVQUFJLFdBQVc7QUFHZixVQUFJLENBQUMsU0FBUztBQUNiLG1CQUFXLEdBQUc7QUFDZCxZQUFJLENBQUMsT0FBTyxVQUFVLFFBQVEsS0FBSyxXQUFXLEVBQUcsT0FBTSxJQUFJLFVBQVUsbURBQW1EO0FBQ3hILFlBQUksV0FBVyxJQUFLLE9BQU0sSUFBSSxXQUFXLDREQUE0RDtBQUFBLE1BQ3RHO0FBRUEsV0FBSyxLQUFLLEVBQUUsU0FBUyxJQUFJLE1BQU0sVUFBVSxjQUFjLGVBQWUsVUFBVTtBQUNoRixhQUFPO0FBQUEsSUFDUjtBQUFBO0FBQUE7OztBQzlCQTtBQUFBLHlEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFDQSxRQUFNLEVBQUUsa0JBQWtCLE1BQU0sSUFBSTtBQUVwQyxJQUFBQSxRQUFPLFVBQVUsU0FBUyxnQkFBZ0IsTUFBTUMsVUFBUztBQUV4RCxVQUFJLE9BQU8sU0FBUyxTQUFVLE9BQU0sSUFBSSxVQUFVLHdDQUF3QztBQUMxRixVQUFJLE9BQU9BLGFBQVksWUFBWUEsYUFBWSxLQUFNLE9BQU0sSUFBSSxVQUFVLGtEQUFrRDtBQUMzSCxVQUFJLENBQUMsS0FBTSxPQUFNLElBQUksVUFBVSxzREFBc0Q7QUFHckYsWUFBTSxRQUFRLFdBQVdBLFdBQVVBLFNBQVEsUUFBUTtBQUNuRCxZQUFNLE9BQU8sa0JBQWtCQSxVQUFTLFFBQVEsSUFBSTtBQUNwRCxZQUFNLFVBQVUsa0JBQWtCQSxVQUFTLFdBQVcsS0FBSztBQUMzRCxZQUFNLFNBQVMsa0JBQWtCQSxVQUFTLFVBQVUsS0FBSztBQUN6RCxZQUFNLGVBQWUsa0JBQWtCQSxXQUFVLENBQUMsaUJBQWlCQSxVQUFTLGNBQWMsSUFBSTtBQUM5RixZQUFNLGdCQUFnQixpQkFBaUJBLFVBQVMsZUFBZTtBQUMvRCxZQUFNLGFBQWEsaUJBQWlCQSxVQUFTLFlBQVk7QUFDekQsWUFBTSxVQUFVLGlCQUFpQkEsVUFBUyxTQUFTO0FBQ25ELFVBQUksV0FBVztBQUdmLFVBQUksQ0FBQyxTQUFTO0FBQ2IsbUJBQVcsS0FBSyxJQUFJLFVBQVUsSUFBSSxHQUFHLFVBQVUsVUFBVSxPQUFPLElBQUksQ0FBQztBQUNyRSxZQUFJLFdBQVcsRUFBRyxhQUFZO0FBQzlCLFlBQUksV0FBVyxJQUFLLE9BQU0sSUFBSSxXQUFXLDREQUE0RDtBQUFBLE1BQ3RHO0FBRUEsV0FBSyxLQUFLLEVBQUUsVUFBVSxPQUFPLE1BQU0sU0FBUyxRQUFRLE1BQU0sVUFBVSxjQUFjLGVBQWUsVUFBVTtBQUMzRyxhQUFPO0FBQUEsSUFDUjtBQUVBLFFBQU0sb0JBQW9CLENBQUNBLFVBQVMsS0FBSyxhQUFhO0FBQ3JELFlBQU0sUUFBUSxPQUFPQSxXQUFVQSxTQUFRLEdBQUcsSUFBSTtBQUM5QyxVQUFJLE9BQU8sVUFBVSxXQUFZLFFBQU87QUFDeEMsVUFBSSxTQUFTLEtBQU0sT0FBTSxJQUFJLFVBQVUsaUJBQWlCLEdBQUcsMkJBQTJCO0FBQ3RGLFVBQUksU0FBVSxPQUFNLElBQUksVUFBVSw0QkFBNEIsR0FBRyxHQUFHO0FBQ3BFLGFBQU87QUFBQSxJQUNSO0FBRUEsUUFBTSxZQUFZLENBQUMsRUFBRSxPQUFPLE1BQU07QUFDakMsVUFBSSxPQUFPLFVBQVUsTUFBTSxLQUFLLFVBQVUsRUFBRyxRQUFPO0FBQ3BELFlBQU0sSUFBSSxVQUFVLG1EQUFtRDtBQUFBLElBQ3hFO0FBQUE7QUFBQTs7O0FDMUNBO0FBQUEscURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUNBLFFBQU0sRUFBRSxNQUFNLElBQUk7QUFFbEIsSUFBQUEsUUFBTyxVQUFVLFNBQVMsWUFBWSxNQUFNLFNBQVM7QUFFcEQsVUFBSSxPQUFPLFNBQVMsU0FBVSxPQUFNLElBQUksVUFBVSx3Q0FBd0M7QUFDMUYsVUFBSSxDQUFDLEtBQU0sT0FBTSxJQUFJLFVBQVUscURBQXFEO0FBR3BGLFVBQUksWUFBWTtBQUNoQixVQUFJLE9BQU8sWUFBWSxZQUFZLFlBQVksTUFBTTtBQUNwRCxvQkFBWTtBQUNaLGtCQUFVLE1BQU0scUJBQXFCLFNBQVMsUUFBUSxJQUFJLENBQUM7QUFBQSxNQUM1RCxPQUFPO0FBQ04sWUFBSSxPQUFPLFlBQVksV0FBWSxPQUFNLElBQUksVUFBVSx3RUFBd0U7QUFDL0gsa0JBQVUsWUFBWSxPQUFPO0FBQUEsTUFDOUI7QUFFQSxXQUFLLEtBQUssRUFBRSxNQUFNLFNBQVMsTUFBTSxTQUFTO0FBQzFDLGFBQU87QUFBQSxJQUNSO0FBRUEsYUFBUyxZQUFZLFNBQVM7QUFDN0IsYUFBTyxTQUFTLG9CQUFvQixZQUFZLGNBQWMsY0FBYyxNQUFNO0FBQ2pGLGNBQU0sYUFBYTtBQUFBLFVBQ2xCLFFBQVE7QUFBQSxVQUNSLFVBQVU7QUFBQSxVQUNWLE9BQU87QUFBQSxRQUNSO0FBR0EsY0FBTSxNQUFNLE1BQU0sS0FBSyxTQUFTLFlBQVksSUFBSTtBQUNoRCxZQUFJLE9BQU8sUUFBUSxZQUFZLFFBQVEsTUFBTTtBQUM1QyxnQkFBTSxJQUFJLFVBQVUseUJBQXlCLFVBQVUsNENBQTRDO0FBQUEsUUFDcEc7QUFFQSxlQUFPLHFCQUFxQixLQUFLLFlBQVksVUFBVTtBQUFBLE1BQ3hEO0FBQUEsSUFDRDtBQUVBLGFBQVMscUJBQXFCLEtBQUssTUFBTSxZQUFZO0FBRXBELFVBQUksQ0FBQyxlQUFlLEtBQUssS0FBSyxNQUFNLEdBQUc7QUFDdEMsY0FBTSxJQUFJLFVBQVUseUJBQXlCLFVBQVUsS0FBSyxJQUFJLCtDQUErQztBQUFBLE1BQ2hIO0FBQ0EsVUFBSSxDQUFDLGVBQWUsS0FBSyxLQUFLLFNBQVMsR0FBRztBQUN6QyxjQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSxLQUFLLElBQUksa0RBQWtEO0FBQUEsTUFDbkg7QUFHQSxZQUFNLE9BQU8sSUFBSTtBQUNqQixVQUFJLE9BQU8sU0FBUyxjQUFjLE9BQU8sZUFBZSxJQUFJLE1BQU0sNEJBQTRCO0FBQzdGLGNBQU0sSUFBSSxVQUFVLHlCQUF5QixVQUFVLEtBQUssSUFBSSxzRkFBc0Y7QUFBQSxNQUN2SjtBQUdBLFVBQUksVUFBVSxJQUFJO0FBQ2xCLFVBQUksQ0FBQyxNQUFNLFFBQVEsT0FBTyxLQUFLLEVBQUUsVUFBVSxDQUFDLEdBQUcsT0FBTyxHQUFHLE1BQU0sT0FBSyxPQUFPLE1BQU0sUUFBUSxHQUFHO0FBQzNGLGNBQU0sSUFBSSxVQUFVLHlCQUF5QixVQUFVLEtBQUssSUFBSSx3RkFBd0Y7QUFBQSxNQUN6SjtBQUNBLFVBQUksUUFBUSxXQUFXLElBQUksSUFBSSxPQUFPLEVBQUUsTUFBTTtBQUM3QyxjQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSxLQUFLLElBQUksaURBQWlEO0FBQUEsTUFDbEg7QUFDQSxVQUFJLENBQUMsUUFBUSxRQUFRO0FBQ3BCLGNBQU0sSUFBSSxXQUFXLHlCQUF5QixVQUFVLEtBQUssSUFBSSx1Q0FBdUM7QUFBQSxNQUN6RztBQUdBLFVBQUk7QUFDSixVQUFJLGVBQWUsS0FBSyxLQUFLLFlBQVksR0FBRztBQUMzQyxxQkFBYSxJQUFJO0FBQ2pCLFlBQUksQ0FBQyxNQUFNLFFBQVEsVUFBVSxLQUFLLEVBQUUsYUFBYSxDQUFDLEdBQUcsVUFBVSxHQUFHLE1BQU0sT0FBSyxPQUFPLE1BQU0sUUFBUSxHQUFHO0FBQ3BHLGdCQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSxLQUFLLElBQUksMkZBQTJGO0FBQUEsUUFDNUo7QUFBQSxNQUNELE9BQU87QUFDTixxQkFBYSxnQkFBZ0IsSUFBSTtBQUFBLE1BQ2xDO0FBQ0EsVUFBSSxXQUFXLFdBQVcsSUFBSSxJQUFJLFVBQVUsRUFBRSxNQUFNO0FBQ25ELGNBQU0sSUFBSSxVQUFVLHlCQUF5QixVQUFVLEtBQUssSUFBSSxvREFBb0Q7QUFBQSxNQUNySDtBQUNBLFVBQUksV0FBVyxTQUFTLElBQUk7QUFDM0IsY0FBTSxJQUFJLFdBQVcseUJBQXlCLFVBQVUsS0FBSyxJQUFJLHdFQUF3RTtBQUFBLE1BQzFJO0FBQ0EsaUJBQVcsYUFBYSxZQUFZO0FBQ25DLFlBQUksUUFBUSxTQUFTLFNBQVMsR0FBRztBQUNoQyxnQkFBTSxJQUFJLFVBQVUseUJBQXlCLFVBQVUsS0FBSyxJQUFJLG9DQUFvQyxTQUFTLGdFQUFnRTtBQUFBLFFBQzlLO0FBQUEsTUFDRDtBQUdBLFVBQUksZUFBZTtBQUNuQixVQUFJLGVBQWUsS0FBSyxLQUFLLGNBQWMsR0FBRztBQUM3QyxjQUFNLE9BQU8sSUFBSTtBQUNqQixZQUFJLE9BQU8sU0FBUyxXQUFXO0FBQzlCLGdCQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSxLQUFLLElBQUksbUZBQW1GO0FBQUEsUUFDcEo7QUFDQSx1QkFBZSxDQUFDO0FBQUEsTUFDakI7QUFHQSxVQUFJLGFBQWE7QUFDakIsVUFBSSxlQUFlLEtBQUssS0FBSyxZQUFZLEdBQUc7QUFDM0MscUJBQWEsSUFBSTtBQUNqQixZQUFJLE9BQU8sZUFBZSxXQUFXO0FBQ3BDLGdCQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSxLQUFLLElBQUksaUZBQWlGO0FBQUEsUUFDbEo7QUFBQSxNQUNEO0FBR0EsWUFBTSxvQkFBb0I7QUFBQSxRQUN6QixHQUFHLFdBQVcsSUFBSSxVQUFVLEVBQUUsSUFBSSxDQUFBQyxTQUFPLEdBQUdBLElBQUcsU0FBUztBQUFBLFFBQ3hELEdBQUcsUUFBUSxJQUFJLFVBQVU7QUFBQSxNQUMxQjtBQUNBLGFBQU87QUFBQSxRQUNOLGtCQUFrQixrQkFBa0IsS0FBSyxJQUFJLENBQUM7QUFBQSxRQUM5QyxjQUFjLE1BQU0sSUFBSSxJQUFJLFFBQVEsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsV0FBVyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVTtBQUFBLFFBQzFGO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUVBLGFBQVMsY0FBYyxXQUFXLFdBQVcsWUFBWTtBQUN4RCxhQUFPLFVBQVUsZ0JBQWdCLE1BQU07QUFPdEMsY0FBTSxTQUFTLEtBQUssSUFBSSxPQUFLLE9BQU8sU0FBUyxDQUFDLElBQUksT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3BFLGlCQUFTLElBQUksR0FBRyxJQUFJLFVBQVUsTUFBTSxFQUFFLEdBQUc7QUFDeEMsaUJBQU8sS0FBSyxJQUFJO0FBQUEsUUFDakI7QUFDQSxtQkFBVyxPQUFPLFVBQVUsR0FBRyxJQUFJLEdBQUc7QUFDckMsY0FBSSxNQUFNLFFBQVEsR0FBRyxHQUFHO0FBQ3ZCLDRCQUFnQixLQUFLLFFBQVEsVUFBVSxNQUFNLFVBQVU7QUFDdkQsa0JBQU07QUFBQSxVQUNQLFdBQVcsT0FBTyxRQUFRLFlBQVksUUFBUSxNQUFNO0FBQ25ELDZCQUFpQixLQUFLLFFBQVEsV0FBVyxVQUFVO0FBQ25ELGtCQUFNO0FBQUEsVUFDUCxPQUFPO0FBQ04sa0JBQU0sSUFBSSxVQUFVLHlCQUF5QixVQUFVLG1EQUFtRDtBQUFBLFVBQzNHO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsYUFBUyxnQkFBZ0IsS0FBSyxRQUFRLGFBQWEsWUFBWTtBQUM5RCxVQUFJLElBQUksV0FBVyxhQUFhO0FBQy9CLGNBQU0sSUFBSSxVQUFVLHlCQUF5QixVQUFVLHFEQUFxRDtBQUFBLE1BQzdHO0FBQ0EsWUFBTSxTQUFTLE9BQU8sU0FBUztBQUMvQixlQUFTLElBQUksR0FBRyxJQUFJLGFBQWEsRUFBRSxHQUFHO0FBQ3JDLGVBQU8sSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDO0FBQUEsTUFDM0I7QUFBQSxJQUNEO0FBRUEsYUFBUyxpQkFBaUIsS0FBSyxRQUFRLFdBQVcsWUFBWTtBQUM3RCxVQUFJLFFBQVE7QUFDWixpQkFBVyxPQUFPLE9BQU8sS0FBSyxHQUFHLEdBQUc7QUFDbkMsY0FBTSxRQUFRLFVBQVUsSUFBSSxHQUFHO0FBQy9CLFlBQUksVUFBVSxRQUFXO0FBQ3hCLGdCQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSw4Q0FBOEMsR0FBRyxHQUFHO0FBQUEsUUFDNUc7QUFDQSxlQUFPLEtBQUssSUFBSSxJQUFJLEdBQUc7QUFDdkIsaUJBQVM7QUFBQSxNQUNWO0FBQ0EsVUFBSSxVQUFVLFVBQVUsTUFBTTtBQUM3QixjQUFNLElBQUksVUFBVSx5QkFBeUIsVUFBVSxzQ0FBc0M7QUFBQSxNQUM5RjtBQUFBLElBQ0Q7QUFFQSxhQUFTLGdCQUFnQixFQUFFLE9BQU8sR0FBRztBQUNwQyxVQUFJLENBQUMsT0FBTyxVQUFVLE1BQU0sS0FBSyxTQUFTLEdBQUc7QUFDNUMsY0FBTSxJQUFJLFVBQVUsbURBQW1EO0FBQUEsTUFDeEU7QUFDQSxZQUFNLFNBQVMsQ0FBQztBQUNoQixlQUFTLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxHQUFHO0FBQ2hDLGVBQU8sS0FBSyxJQUFJLElBQUksQ0FBQyxFQUFFO0FBQUEsTUFDeEI7QUFDQSxhQUFPO0FBQUEsSUFDUjtBQUVBLFFBQU0sRUFBRSxlQUFlLElBQUksT0FBTztBQUNsQyxRQUFNLEVBQUUsTUFBTSxJQUFJLFNBQVM7QUFDM0IsUUFBTSw2QkFBNkIsT0FBTyxlQUFlLGFBQVc7QUFBQSxJQUFDLENBQUM7QUFDdEUsUUFBTSxhQUFhLENBQUFBLFNBQU8sSUFBSUEsS0FBSSxRQUFRLE1BQU0sSUFBSSxDQUFDO0FBQ3JELFFBQU0sUUFBUSxPQUFLLE1BQU07QUFBQTtBQUFBOzs7QUM1THpCO0FBQUEsdURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUNBLFFBQU0scUJBQXFCLFNBQVNDLFlBQVc7QUFBQSxJQUFDO0FBRWhELElBQUFELFFBQU8sVUFBVSxTQUFTLFFBQVEsT0FBTyxNQUFNO0FBQzlDLGFBQU8sT0FBTyxPQUFPLElBQUksbUJBQW1CLEdBQUcsSUFBSTtBQUFBLElBQ3BEO0FBQUE7QUFBQTs7O0FDTEE7QUFBQSxnREFBQUUsVUFBQUMsU0FBQTtBQUFBO0FBQ0EsUUFBTSxLQUFLLFFBQVEsSUFBSTtBQUN2QixRQUFNLE9BQU8sUUFBUSxNQUFNO0FBQzNCLFFBQU0sT0FBTztBQUNiLFFBQU0sY0FBYztBQUVwQixRQUFJO0FBRUosYUFBU0MsVUFBUyxlQUFlQyxVQUFTO0FBQ3pDLFVBQUksY0FBYyxNQUFNO0FBQ3ZCLGVBQU8sSUFBSUQsVUFBUyxlQUFlQyxRQUFPO0FBQUEsTUFDM0M7QUFHQSxVQUFJO0FBQ0osVUFBSSxPQUFPLFNBQVMsYUFBYSxHQUFHO0FBQ25DLGlCQUFTO0FBQ1Qsd0JBQWdCO0FBQUEsTUFDakI7QUFDQSxVQUFJLGlCQUFpQixLQUFNLGlCQUFnQjtBQUMzQyxVQUFJQSxZQUFXLEtBQU0sQ0FBQUEsV0FBVSxDQUFDO0FBR2hDLFVBQUksT0FBTyxrQkFBa0IsU0FBVSxPQUFNLElBQUksVUFBVSx3Q0FBd0M7QUFDbkcsVUFBSSxPQUFPQSxhQUFZLFNBQVUsT0FBTSxJQUFJLFVBQVUsa0RBQWtEO0FBQ3ZHLFVBQUksY0FBY0EsU0FBUyxPQUFNLElBQUksVUFBVSxtREFBbUQ7QUFDbEcsVUFBSSxZQUFZQSxTQUFTLE9BQU0sSUFBSSxVQUFVLHlFQUF5RTtBQUd0SCxZQUFNLFdBQVcsY0FBYyxLQUFLO0FBQ3BDLFlBQU0sWUFBWSxhQUFhLE1BQU0sYUFBYTtBQUNsRCxZQUFNLFdBQVcsS0FBSyxpQkFBaUJBLFVBQVMsVUFBVTtBQUMxRCxZQUFNLGdCQUFnQixLQUFLLGlCQUFpQkEsVUFBUyxlQUFlO0FBQ3BFLFlBQU0sVUFBVSxhQUFhQSxXQUFVQSxTQUFRLFVBQVU7QUFDekQsWUFBTSxVQUFVLGFBQWFBLFdBQVVBLFNBQVEsVUFBVTtBQUN6RCxZQUFNLGdCQUFnQixtQkFBbUJBLFdBQVVBLFNBQVEsZ0JBQWdCO0FBRzNFLFVBQUksWUFBWSxhQUFhLENBQUMsT0FBUSxPQUFNLElBQUksVUFBVSxrREFBa0Q7QUFDNUcsVUFBSSxDQUFDLE9BQU8sVUFBVSxPQUFPLEtBQUssVUFBVSxFQUFHLE9BQU0sSUFBSSxVQUFVLHdEQUF3RDtBQUMzSCxVQUFJLFVBQVUsV0FBWSxPQUFNLElBQUksV0FBVyxvREFBb0Q7QUFDbkcsVUFBSSxXQUFXLFFBQVEsT0FBTyxZQUFZLFdBQVksT0FBTSxJQUFJLFVBQVUsZ0RBQWdEO0FBQzFILFVBQUksaUJBQWlCLFFBQVEsT0FBTyxrQkFBa0IsWUFBWSxPQUFPLGtCQUFrQixTQUFVLE9BQU0sSUFBSSxVQUFVLG9FQUFvRTtBQUc3TCxVQUFJO0FBQ0osVUFBSSxpQkFBaUIsTUFBTTtBQUMxQixnQkFBUSxrQkFBa0IsZ0JBQWdCLG1CQUFvQixxQkFBcUI7QUFBQSxNQUNwRixXQUFXLE9BQU8sa0JBQWtCLFVBQVU7QUFFN0MsY0FBTSxjQUFjLE9BQU8sNEJBQTRCLGFBQWEsMEJBQTBCO0FBQzlGLGdCQUFRLFlBQVksS0FBSyxRQUFRLGFBQWEsRUFBRSxRQUFRLGNBQWMsT0FBTyxDQUFDO0FBQUEsTUFDL0UsT0FBTztBQUVOLGdCQUFRO0FBQUEsTUFDVDtBQUVBLFVBQUksQ0FBQyxNQUFNLGVBQWU7QUFDekIsY0FBTSxvQkFBb0IsV0FBVztBQUNyQyxjQUFNLGdCQUFnQjtBQUFBLE1BQ3ZCO0FBR0EsVUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLFdBQVcsT0FBTyxLQUFLLENBQUMsR0FBRyxXQUFXLEtBQUssUUFBUSxRQUFRLENBQUMsR0FBRztBQUMxRixjQUFNLElBQUksVUFBVSwyREFBMkQ7QUFBQSxNQUNoRjtBQUVBLGFBQU8saUJBQWlCLE1BQU07QUFBQSxRQUM3QixDQUFDLEtBQUssS0FBSyxHQUFHLEVBQUUsT0FBTyxJQUFJLE1BQU0sU0FBUyxVQUFVLGVBQWUsV0FBVyxVQUFVLGVBQWUsU0FBUyxXQUFXLE1BQU0sVUFBVSxJQUFJLEVBQUU7QUFBQSxRQUNqSixHQUFHLFNBQVM7QUFBQSxNQUNiLENBQUM7QUFBQSxJQUNGO0FBRUEsUUFBTSxXQUFXO0FBQ2pCLElBQUFELFVBQVMsVUFBVSxVQUFVLFNBQVM7QUFDdEMsSUFBQUEsVUFBUyxVQUFVLGNBQWM7QUFDakMsSUFBQUEsVUFBUyxVQUFVLFNBQVM7QUFDNUIsSUFBQUEsVUFBUyxVQUFVLFNBQVM7QUFDNUIsSUFBQUEsVUFBUyxVQUFVLFlBQVk7QUFDL0IsSUFBQUEsVUFBUyxVQUFVLFdBQVc7QUFDOUIsSUFBQUEsVUFBUyxVQUFVLFlBQVk7QUFDL0IsSUFBQUEsVUFBUyxVQUFVLFFBQVE7QUFDM0IsSUFBQUEsVUFBUyxVQUFVLGdCQUFnQixTQUFTO0FBQzVDLElBQUFBLFVBQVMsVUFBVSxPQUFPLFNBQVM7QUFDbkMsSUFBQUEsVUFBUyxVQUFVLFFBQVEsU0FBUztBQUNwQyxJQUFBQSxVQUFTLFVBQVUsc0JBQXNCLFNBQVM7QUFDbEQsSUFBQUEsVUFBUyxVQUFVLGFBQWEsU0FBUztBQUN6QyxJQUFBQSxVQUFTLFVBQVUsS0FBSyxPQUFPLElBQUk7QUFFbkMsSUFBQUQsUUFBTyxVQUFVQztBQUFBO0FBQUE7OztBQ3pGakI7QUFBQSw2Q0FBQUUsVUFBQUMsU0FBQTtBQUFBO0FBQ0EsSUFBQUEsUUFBTyxVQUFVO0FBQ2pCLElBQUFBLFFBQU8sUUFBUSxjQUFjO0FBQUE7QUFBQTs7O0FDRjdCO0FBQUEsa0NBQUFDLFVBQUFDLFNBQUE7QUFBQSxRQUFJLFdBQVcsT0FBTyxVQUFVO0FBRWhDLElBQUFBLFFBQU8sVUFBVSxTQUFTLE9BQU8sS0FBSztBQUNwQyxVQUFJLFFBQVEsT0FBUSxRQUFPO0FBQzNCLFVBQUksUUFBUSxLQUFNLFFBQU87QUFFekIsVUFBSSxPQUFPLE9BQU87QUFDbEIsVUFBSSxTQUFTLFVBQVcsUUFBTztBQUMvQixVQUFJLFNBQVMsU0FBVSxRQUFPO0FBQzlCLFVBQUksU0FBUyxTQUFVLFFBQU87QUFDOUIsVUFBSSxTQUFTLFNBQVUsUUFBTztBQUM5QixVQUFJLFNBQVMsWUFBWTtBQUN2QixlQUFPLGNBQWMsR0FBRyxJQUFJLHNCQUFzQjtBQUFBLE1BQ3BEO0FBRUEsVUFBSSxRQUFRLEdBQUcsRUFBRyxRQUFPO0FBQ3pCLFVBQUksU0FBUyxHQUFHLEVBQUcsUUFBTztBQUMxQixVQUFJLFlBQVksR0FBRyxFQUFHLFFBQU87QUFDN0IsVUFBSSxPQUFPLEdBQUcsRUFBRyxRQUFPO0FBQ3hCLFVBQUksUUFBUSxHQUFHLEVBQUcsUUFBTztBQUN6QixVQUFJLFNBQVMsR0FBRyxFQUFHLFFBQU87QUFFMUIsY0FBUSxTQUFTLEdBQUcsR0FBRztBQUFBLFFBQ3JCLEtBQUs7QUFBVSxpQkFBTztBQUFBLFFBQ3RCLEtBQUs7QUFBVyxpQkFBTztBQUFBO0FBQUEsUUFHdkIsS0FBSztBQUFXLGlCQUFPO0FBQUEsUUFDdkIsS0FBSztBQUFXLGlCQUFPO0FBQUEsUUFDdkIsS0FBSztBQUFPLGlCQUFPO0FBQUEsUUFDbkIsS0FBSztBQUFPLGlCQUFPO0FBQUE7QUFBQSxRQUduQixLQUFLO0FBQWEsaUJBQU87QUFBQSxRQUN6QixLQUFLO0FBQWMsaUJBQU87QUFBQSxRQUMxQixLQUFLO0FBQXFCLGlCQUFPO0FBQUE7QUFBQSxRQUdqQyxLQUFLO0FBQWMsaUJBQU87QUFBQSxRQUMxQixLQUFLO0FBQWUsaUJBQU87QUFBQTtBQUFBLFFBRzNCLEtBQUs7QUFBYyxpQkFBTztBQUFBLFFBQzFCLEtBQUs7QUFBZSxpQkFBTztBQUFBLFFBQzNCLEtBQUs7QUFBZ0IsaUJBQU87QUFBQSxRQUM1QixLQUFLO0FBQWdCLGlCQUFPO0FBQUEsTUFDOUI7QUFFQSxVQUFJLGVBQWUsR0FBRyxHQUFHO0FBQ3ZCLGVBQU87QUFBQSxNQUNUO0FBR0EsYUFBTyxTQUFTLEtBQUssR0FBRztBQUN4QixjQUFRLE1BQU07QUFBQSxRQUNaLEtBQUs7QUFBbUIsaUJBQU87QUFBQTtBQUFBLFFBRS9CLEtBQUs7QUFBeUIsaUJBQU87QUFBQSxRQUNyQyxLQUFLO0FBQXlCLGlCQUFPO0FBQUEsUUFDckMsS0FBSztBQUE0QixpQkFBTztBQUFBLFFBQ3hDLEtBQUs7QUFBMkIsaUJBQU87QUFBQSxNQUN6QztBQUdBLGFBQU8sS0FBSyxNQUFNLEdBQUcsRUFBRSxFQUFFLFlBQVksRUFBRSxRQUFRLE9BQU8sRUFBRTtBQUFBLElBQzFEO0FBRUEsYUFBUyxTQUFTLEtBQUs7QUFDckIsYUFBTyxPQUFPLElBQUksZ0JBQWdCLGFBQWEsSUFBSSxZQUFZLE9BQU87QUFBQSxJQUN4RTtBQUVBLGFBQVMsUUFBUSxLQUFLO0FBQ3BCLFVBQUksTUFBTSxRQUFTLFFBQU8sTUFBTSxRQUFRLEdBQUc7QUFDM0MsYUFBTyxlQUFlO0FBQUEsSUFDeEI7QUFFQSxhQUFTLFFBQVEsS0FBSztBQUNwQixhQUFPLGVBQWUsU0FBVSxPQUFPLElBQUksWUFBWSxZQUFZLElBQUksZUFBZSxPQUFPLElBQUksWUFBWSxvQkFBb0I7QUFBQSxJQUNuSTtBQUVBLGFBQVMsT0FBTyxLQUFLO0FBQ25CLFVBQUksZUFBZSxLQUFNLFFBQU87QUFDaEMsYUFBTyxPQUFPLElBQUksaUJBQWlCLGNBQzlCLE9BQU8sSUFBSSxZQUFZLGNBQ3ZCLE9BQU8sSUFBSSxZQUFZO0FBQUEsSUFDOUI7QUFFQSxhQUFTLFNBQVMsS0FBSztBQUNyQixVQUFJLGVBQWUsT0FBUSxRQUFPO0FBQ2xDLGFBQU8sT0FBTyxJQUFJLFVBQVUsWUFDdkIsT0FBTyxJQUFJLGVBQWUsYUFDMUIsT0FBTyxJQUFJLGNBQWMsYUFDekIsT0FBTyxJQUFJLFdBQVc7QUFBQSxJQUM3QjtBQUVBLGFBQVMsY0FBYyxNQUFNLEtBQUs7QUFDaEMsYUFBTyxTQUFTLElBQUksTUFBTTtBQUFBLElBQzVCO0FBRUEsYUFBUyxlQUFlLEtBQUs7QUFDM0IsYUFBTyxPQUFPLElBQUksVUFBVSxjQUN2QixPQUFPLElBQUksV0FBVyxjQUN0QixPQUFPLElBQUksU0FBUztBQUFBLElBQzNCO0FBRUEsYUFBUyxZQUFZLEtBQUs7QUFDeEIsVUFBSTtBQUNGLFlBQUksT0FBTyxJQUFJLFdBQVcsWUFBWSxPQUFPLElBQUksV0FBVyxZQUFZO0FBQ3RFLGlCQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ0YsU0FBUyxLQUFLO0FBQ1osWUFBSSxJQUFJLFFBQVEsUUFBUSxRQUFRLE1BQU0sSUFBSTtBQUN4QyxpQkFBTztBQUFBLFFBQ1Q7QUFBQSxNQUNGO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFPQSxhQUFTLFNBQVMsS0FBSztBQUNyQixVQUFJLElBQUksZUFBZSxPQUFPLElBQUksWUFBWSxhQUFhLFlBQVk7QUFDckUsZUFBTyxJQUFJLFlBQVksU0FBUyxHQUFHO0FBQUEsTUFDckM7QUFDQSxhQUFPO0FBQUEsSUFDVDtBQUFBO0FBQUE7OztBQ2hJQTtBQUFBLHdDQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFTQSxJQUFBQSxRQUFPLFVBQVUsU0FBUyxhQUFhLEtBQUs7QUFDMUMsYUFBTyxPQUFPLFFBQVEsZUFBZSxRQUFRLFNBQ3ZDLE9BQU8sUUFBUSxZQUFZLE9BQU8sUUFBUTtBQUFBLElBQ2xEO0FBQUE7QUFBQTs7O0FDWkE7QUFBQSx5Q0FBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBSSxXQUFXO0FBRWYsSUFBQUEsUUFBTyxVQUFVLFNBQVMsT0FBTyxHQUFnQjtBQUMvQyxVQUFJLENBQUMsU0FBUyxDQUFDLEdBQUc7QUFBRSxZQUFJLENBQUM7QUFBQSxNQUFHO0FBRTVCLFVBQUksTUFBTSxVQUFVO0FBQ3BCLGVBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxLQUFLO0FBQzVCLFlBQUksTUFBTSxVQUFVLENBQUM7QUFFckIsWUFBSSxTQUFTLEdBQUcsR0FBRztBQUNqQixpQkFBTyxHQUFHLEdBQUc7QUFBQSxRQUNmO0FBQUEsTUFDRjtBQUNBLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxPQUFPLEdBQUcsR0FBRztBQUNwQixlQUFTLE9BQU8sR0FBRztBQUNqQixZQUFJLE9BQU8sR0FBRyxHQUFHLEdBQUc7QUFDbEIsWUFBRSxHQUFHLElBQUksRUFBRSxHQUFHO0FBQUEsUUFDaEI7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQU1BLGFBQVMsT0FBTyxLQUFLLEtBQUs7QUFDeEIsYUFBTyxPQUFPLFVBQVUsZUFBZSxLQUFLLEtBQUssR0FBRztBQUFBLElBQ3REO0FBQUE7QUFBQTs7O0FDaENBO0FBQUEseUNBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksU0FBUztBQUNiLFFBQUksU0FBUztBQWdCYixJQUFBQSxRQUFPLFVBQVUsU0FBUyxPQUFPQyxVQUFTO0FBQ3hDLFVBQUksT0FBT0EsYUFBWSxZQUFZO0FBQ2pDLFFBQUFBLFdBQVUsRUFBRSxPQUFPQSxTQUFRO0FBQUEsTUFDN0I7QUFFQSxVQUFJLE9BQU8sU0FBUyxLQUFLO0FBQ3pCLFVBQUksV0FBVyxFQUFDLG1CQUFtQixPQUFPLE9BQU8sU0FBUTtBQUN6RCxVQUFJLE9BQU8sT0FBTyxDQUFDLEdBQUcsVUFBVUEsUUFBTztBQUN2QyxVQUFJLFFBQVEsS0FBSztBQUNqQixVQUFJLFFBQVEsS0FBSyxRQUFRLE1BQU0sT0FBTztBQUN0QyxVQUFJLFdBQVc7QUFDZixVQUFJLFVBQVUsY0FBYztBQUM1QixVQUFJLFVBQVUsQ0FBQztBQUNmLFVBQUksUUFBUSxDQUFDO0FBRWIsZUFBUyxhQUFhLEtBQUs7QUFDekIsYUFBSyxVQUFVO0FBQ2YsbUJBQVcsQ0FBQztBQUNaLGtCQUFVLENBQUM7QUFBQSxNQUNiO0FBRUEsZUFBUyxhQUFhLEtBQUs7QUFDekIsWUFBSSxNQUFNLFFBQVE7QUFDaEIsa0JBQVEsTUFBTSxPQUFPLE1BQU0sQ0FBQyxHQUFHLEtBQUs7QUFDcEMsa0JBQVEsVUFBVTtBQUNsQixlQUFLLE1BQU0sU0FBUyxRQUFRO0FBQzVCLG1CQUFTLEtBQUssT0FBTztBQUNyQixvQkFBVSxjQUFjO0FBQ3hCLG9CQUFVLENBQUM7QUFDWCxrQkFBUSxDQUFDO0FBQUEsUUFDWDtBQUFBLE1BQ0Y7QUFFQSxlQUFTLElBQUksR0FBRyxJQUFJLE1BQU0sUUFBUSxLQUFLO0FBQ3JDLFlBQUksT0FBTyxNQUFNLENBQUM7QUFDbEIsWUFBSSxNQUFNLE1BQU07QUFDaEIsWUFBSSxLQUFLLEtBQUssS0FBSztBQUVuQixZQUFJLFlBQVksSUFBSSxLQUFLLEdBQUc7QUFDMUIsY0FBSSxHQUFHLFdBQVcsS0FBSyxNQUFNLEdBQUc7QUFDOUIsZ0JBQUksUUFBUSxLQUFLLFFBQVEsR0FBRztBQUMxQixzQkFBUSxLQUFLLElBQUk7QUFDakI7QUFBQSxZQUNGO0FBQ0Esa0JBQU0sS0FBSyxFQUFFO0FBQ2Isb0JBQVEsT0FBTyxRQUFRLEtBQUssSUFBSTtBQUNoQyxzQkFBVSxDQUFDO0FBQ1g7QUFBQSxVQUNGO0FBRUEsY0FBSSxhQUFhLE1BQU07QUFDckIseUJBQWEsUUFBUSxLQUFLLElBQUksQ0FBQztBQUFBLFVBQ2pDO0FBRUEsY0FBSSxRQUFRLEdBQUc7QUFDYix5QkFBYSxRQUFRLEtBQUssSUFBSSxDQUFDO0FBQUEsVUFDakM7QUFFQSxnQkFBTSxLQUFLLEVBQUU7QUFDYjtBQUFBLFFBQ0Y7QUFFQSxnQkFBUSxLQUFLLElBQUk7QUFBQSxNQUNuQjtBQUVBLFVBQUksYUFBYSxNQUFNO0FBQ3JCLHFCQUFhLFFBQVEsS0FBSyxJQUFJLENBQUM7QUFBQSxNQUNqQyxPQUFPO0FBQ0wscUJBQWEsUUFBUSxLQUFLLElBQUksQ0FBQztBQUFBLE1BQ2pDO0FBRUEsV0FBSyxXQUFXO0FBQ2hCLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxZQUFZLE1BQU0sT0FBTztBQUNoQyxVQUFJLEtBQUssTUFBTSxHQUFHLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDekMsZUFBTztBQUFBLE1BQ1Q7QUFDQSxVQUFJLEtBQUssT0FBTyxNQUFNLFNBQVMsQ0FBQyxNQUFNLE1BQU0sTUFBTSxFQUFFLEdBQUc7QUFDckQsZUFBTztBQUFBLE1BQ1Q7QUFDQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsU0FBUyxPQUFPO0FBQ3ZCLFVBQUksT0FBTyxLQUFLLE1BQU0sVUFBVTtBQUM5QixnQkFBUSxFQUFFLFNBQVMsTUFBTTtBQUFBLE1BQzNCO0FBRUEsVUFBSSxPQUFPLE1BQU0sWUFBWSxZQUFZLENBQUMsU0FBUyxNQUFNLE9BQU8sR0FBRztBQUNqRSxjQUFNLElBQUksVUFBVSw2QkFBNkI7QUFBQSxNQUNuRDtBQUVBLFlBQU0sVUFBVSxNQUFNLFFBQVEsU0FBUztBQUN2QyxZQUFNLFdBQVcsQ0FBQztBQUNsQixhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsT0FBTyxLQUFLLE9BQU87QUFDMUIsYUFBTyxNQUFNLElBQUksTUFBTSxNQUFNLE1BQU0sRUFBRSxLQUFLLElBQUk7QUFBQSxJQUNoRDtBQUVBLGFBQVMsZ0JBQWdCO0FBQ3ZCLGFBQU8sRUFBRSxLQUFLLElBQUksTUFBTSxJQUFJLFNBQVMsR0FBRztBQUFBLElBQzFDO0FBRUEsYUFBUyxTQUFTLEtBQUs7QUFDckIsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLFNBQVMsS0FBSztBQUNyQixVQUFJLE9BQU8sSUFBSSxlQUFlLE9BQU8sSUFBSSxZQUFZLGFBQWEsWUFBWTtBQUM1RSxlQUFPLElBQUksWUFBWSxTQUFTLEdBQUc7QUFBQSxNQUNyQztBQUNBLGFBQU87QUFBQSxJQUNUO0FBQUE7QUFBQTs7O0FDdklBO0FBQUEsK0NBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUdBLGFBQVMsVUFBVSxTQUFTO0FBQzFCLGFBQVEsT0FBTyxZQUFZLGVBQWlCLFlBQVk7QUFBQSxJQUMxRDtBQUdBLGFBQVMsU0FBUyxTQUFTO0FBQ3pCLGFBQVEsT0FBTyxZQUFZLFlBQWMsWUFBWTtBQUFBLElBQ3ZEO0FBR0EsYUFBUyxRQUFRLFVBQVU7QUFDekIsVUFBSSxNQUFNLFFBQVEsUUFBUSxFQUFHLFFBQU87QUFBQSxlQUMzQixVQUFVLFFBQVEsRUFBRyxRQUFPLENBQUM7QUFFdEMsYUFBTyxDQUFFLFFBQVM7QUFBQSxJQUNwQjtBQUdBLGFBQVMsT0FBTyxRQUFRLFFBQVE7QUFDOUIsVUFBSSxPQUFPLFFBQVEsS0FBSztBQUV4QixVQUFJLFFBQVE7QUFDVixxQkFBYSxPQUFPLEtBQUssTUFBTTtBQUUvQixhQUFLLFFBQVEsR0FBRyxTQUFTLFdBQVcsUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBQ3RFLGdCQUFNLFdBQVcsS0FBSztBQUN0QixpQkFBTyxHQUFHLElBQUksT0FBTyxHQUFHO0FBQUEsUUFDMUI7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFHQSxhQUFTLE9BQU8sUUFBUSxPQUFPO0FBQzdCLFVBQUksU0FBUyxJQUFJO0FBRWpCLFdBQUssUUFBUSxHQUFHLFFBQVEsT0FBTyxTQUFTLEdBQUc7QUFDekMsa0JBQVU7QUFBQSxNQUNaO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFHQSxhQUFTLGVBQWUsUUFBUTtBQUM5QixhQUFRLFdBQVcsS0FBTyxPQUFPLHNCQUFzQixJQUFJO0FBQUEsSUFDN0Q7QUFHQSxJQUFBQSxRQUFPLFFBQVEsWUFBaUI7QUFDaEMsSUFBQUEsUUFBTyxRQUFRLFdBQWlCO0FBQ2hDLElBQUFBLFFBQU8sUUFBUSxVQUFpQjtBQUNoQyxJQUFBQSxRQUFPLFFBQVEsU0FBaUI7QUFDaEMsSUFBQUEsUUFBTyxRQUFRLGlCQUFpQjtBQUNoQyxJQUFBQSxRQUFPLFFBQVEsU0FBaUI7QUFBQTtBQUFBOzs7QUMxRGhDO0FBQUEsa0RBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUlBLGFBQVMsY0FBYyxRQUFRLE1BQU07QUFFbkMsWUFBTSxLQUFLLElBQUk7QUFFZixXQUFLLE9BQU87QUFDWixXQUFLLFNBQVM7QUFDZCxXQUFLLE9BQU87QUFDWixXQUFLLFdBQVcsS0FBSyxVQUFVLHVCQUF1QixLQUFLLE9BQU8sTUFBTSxLQUFLLEtBQUssU0FBUyxJQUFJO0FBRy9GLFVBQUksTUFBTSxtQkFBbUI7QUFFM0IsY0FBTSxrQkFBa0IsTUFBTSxLQUFLLFdBQVc7QUFBQSxNQUNoRCxPQUFPO0FBRUwsYUFBSyxRQUFTLElBQUksTUFBTSxFQUFHLFNBQVM7QUFBQSxNQUN0QztBQUFBLElBQ0Y7QUFJQSxrQkFBYyxZQUFZLE9BQU8sT0FBTyxNQUFNLFNBQVM7QUFDdkQsa0JBQWMsVUFBVSxjQUFjO0FBR3RDLGtCQUFjLFVBQVUsV0FBVyxTQUFTLFNBQVMsU0FBUztBQUM1RCxVQUFJLFNBQVMsS0FBSyxPQUFPO0FBRXpCLGdCQUFVLEtBQUssVUFBVTtBQUV6QixVQUFJLENBQUMsV0FBVyxLQUFLLE1BQU07QUFDekIsa0JBQVUsTUFBTSxLQUFLLEtBQUssU0FBUztBQUFBLE1BQ3JDO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFHQSxJQUFBQSxRQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUMxQ2pCO0FBQUEsNkNBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUdBLFFBQUksU0FBUztBQUdiLGFBQVMsS0FBSyxNQUFNLFFBQVEsVUFBVSxNQUFNLFFBQVE7QUFDbEQsV0FBSyxPQUFXO0FBQ2hCLFdBQUssU0FBVztBQUNoQixXQUFLLFdBQVc7QUFDaEIsV0FBSyxPQUFXO0FBQ2hCLFdBQUssU0FBVztBQUFBLElBQ2xCO0FBR0EsU0FBSyxVQUFVLGFBQWEsU0FBUyxXQUFXLFFBQVEsV0FBVztBQUNqRSxVQUFJLE1BQU0sT0FBTyxNQUFNLEtBQUs7QUFFNUIsVUFBSSxDQUFDLEtBQUssT0FBUSxRQUFPO0FBRXpCLGVBQVMsVUFBVTtBQUNuQixrQkFBWSxhQUFhO0FBRXpCLGFBQU87QUFDUCxjQUFRLEtBQUs7QUFFYixhQUFPLFFBQVEsS0FBSyx5QkFBMkIsUUFBUSxLQUFLLE9BQU8sT0FBTyxRQUFRLENBQUMsQ0FBQyxNQUFNLElBQUk7QUFDNUYsaUJBQVM7QUFDVCxZQUFJLEtBQUssV0FBVyxRQUFTLFlBQVksSUFBSSxHQUFJO0FBQy9DLGlCQUFPO0FBQ1AsbUJBQVM7QUFDVDtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUNQLFlBQU0sS0FBSztBQUVYLGFBQU8sTUFBTSxLQUFLLE9BQU8sVUFBVSx5QkFBMkIsUUFBUSxLQUFLLE9BQU8sT0FBTyxHQUFHLENBQUMsTUFBTSxJQUFJO0FBQ3JHLGVBQU87QUFDUCxZQUFJLE1BQU0sS0FBSyxXQUFZLFlBQVksSUFBSSxHQUFJO0FBQzdDLGlCQUFPO0FBQ1AsaUJBQU87QUFDUDtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBRUEsZ0JBQVUsS0FBSyxPQUFPLE1BQU0sT0FBTyxHQUFHO0FBRXRDLGFBQU8sT0FBTyxPQUFPLEtBQUssTUFBTSxJQUFJLE9BQU8sVUFBVSxPQUFPLE9BQ3JELE9BQU8sT0FBTyxLQUFLLFNBQVMsS0FBSyxXQUFXLFFBQVEsS0FBSyxNQUFNLElBQUk7QUFBQSxJQUM1RTtBQUdBLFNBQUssVUFBVSxXQUFXLFNBQVMsU0FBUyxTQUFTO0FBQ25ELFVBQUksU0FBUyxRQUFRO0FBRXJCLFVBQUksS0FBSyxNQUFNO0FBQ2IsaUJBQVMsU0FBUyxLQUFLLE9BQU87QUFBQSxNQUNoQztBQUVBLGVBQVMsY0FBYyxLQUFLLE9BQU8sS0FBSyxlQUFlLEtBQUssU0FBUztBQUVyRSxVQUFJLENBQUMsU0FBUztBQUNaLGtCQUFVLEtBQUssV0FBVztBQUUxQixZQUFJLFNBQVM7QUFDWCxtQkFBUyxRQUFRO0FBQUEsUUFDbkI7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFHQSxJQUFBQSxRQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUMzRWpCO0FBQUEsNkNBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksZ0JBQWdCO0FBRXBCLFFBQUksMkJBQTJCO0FBQUEsTUFDN0I7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRjtBQUVBLFFBQUksa0JBQWtCO0FBQUEsTUFDcEI7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0Y7QUFFQSxhQUFTLG9CQUFvQixLQUFLO0FBQ2hDLFVBQUksU0FBUyxDQUFDO0FBRWQsVUFBSSxRQUFRLE1BQU07QUFDaEIsZUFBTyxLQUFLLEdBQUcsRUFBRSxRQUFRLFNBQVUsT0FBTztBQUN4QyxjQUFJLEtBQUssRUFBRSxRQUFRLFNBQVUsT0FBTztBQUNsQyxtQkFBTyxPQUFPLEtBQUssQ0FBQyxJQUFJO0FBQUEsVUFDMUIsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0g7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsS0FBSyxLQUFLQyxVQUFTO0FBQzFCLE1BQUFBLFdBQVVBLFlBQVcsQ0FBQztBQUV0QixhQUFPLEtBQUtBLFFBQU8sRUFBRSxRQUFRLFNBQVUsTUFBTTtBQUMzQyxZQUFJLHlCQUF5QixRQUFRLElBQUksTUFBTSxJQUFJO0FBQ2pELGdCQUFNLElBQUksY0FBYyxxQkFBcUIsT0FBTyxnQ0FBZ0MsTUFBTSxjQUFjO0FBQUEsUUFDMUc7QUFBQSxNQUNGLENBQUM7QUFHRCxXQUFLLE1BQWU7QUFDcEIsV0FBSyxPQUFlQSxTQUFRLE1BQU0sS0FBYTtBQUMvQyxXQUFLLFVBQWVBLFNBQVEsU0FBUyxLQUFVLFdBQVk7QUFBRSxlQUFPO0FBQUEsTUFBTTtBQUMxRSxXQUFLLFlBQWVBLFNBQVEsV0FBVyxLQUFRLFNBQVUsTUFBTTtBQUFFLGVBQU87QUFBQSxNQUFNO0FBQzlFLFdBQUssYUFBZUEsU0FBUSxZQUFZLEtBQU87QUFDL0MsV0FBSyxZQUFlQSxTQUFRLFdBQVcsS0FBUTtBQUMvQyxXQUFLLFlBQWVBLFNBQVEsV0FBVyxLQUFRO0FBQy9DLFdBQUssZUFBZUEsU0FBUSxjQUFjLEtBQUs7QUFDL0MsV0FBSyxlQUFlLG9CQUFvQkEsU0FBUSxjQUFjLEtBQUssSUFBSTtBQUV2RSxVQUFJLGdCQUFnQixRQUFRLEtBQUssSUFBSSxNQUFNLElBQUk7QUFDN0MsY0FBTSxJQUFJLGNBQWMsbUJBQW1CLEtBQUssT0FBTyx5QkFBeUIsTUFBTSxjQUFjO0FBQUEsTUFDdEc7QUFBQSxJQUNGO0FBRUEsSUFBQUQsUUFBTyxVQUFVO0FBQUE7QUFBQTs7O0FDNURqQjtBQUFBLCtDQUFBRSxVQUFBQyxTQUFBO0FBQUE7QUFJQSxRQUFJLFNBQWdCO0FBQ3BCLFFBQUksZ0JBQWdCO0FBQ3BCLFFBQUksT0FBZ0I7QUFHcEIsYUFBUyxZQUFZLFFBQVEsTUFBTSxRQUFRO0FBQ3pDLFVBQUksVUFBVSxDQUFDO0FBRWYsYUFBTyxRQUFRLFFBQVEsU0FBVSxnQkFBZ0I7QUFDL0MsaUJBQVMsWUFBWSxnQkFBZ0IsTUFBTSxNQUFNO0FBQUEsTUFDbkQsQ0FBQztBQUVELGFBQU8sSUFBSSxFQUFFLFFBQVEsU0FBVSxhQUFhO0FBQzFDLGVBQU8sUUFBUSxTQUFVLGNBQWMsZUFBZTtBQUNwRCxjQUFJLGFBQWEsUUFBUSxZQUFZLE9BQU8sYUFBYSxTQUFTLFlBQVksTUFBTTtBQUNsRixvQkFBUSxLQUFLLGFBQWE7QUFBQSxVQUM1QjtBQUFBLFFBQ0YsQ0FBQztBQUVELGVBQU8sS0FBSyxXQUFXO0FBQUEsTUFDekIsQ0FBQztBQUVELGFBQU8sT0FBTyxPQUFPLFNBQVUsTUFBTSxPQUFPO0FBQzFDLGVBQU8sUUFBUSxRQUFRLEtBQUssTUFBTTtBQUFBLE1BQ3BDLENBQUM7QUFBQSxJQUNIO0FBR0EsYUFBUyxhQUEyQjtBQUNsQyxVQUFJLFNBQVM7QUFBQSxRQUNQLFFBQVEsQ0FBQztBQUFBLFFBQ1QsVUFBVSxDQUFDO0FBQUEsUUFDWCxTQUFTLENBQUM7QUFBQSxRQUNWLFVBQVUsQ0FBQztBQUFBLE1BQ2IsR0FBRyxPQUFPO0FBRWQsZUFBUyxZQUFZLE1BQU07QUFDekIsZUFBTyxLQUFLLElBQUksRUFBRSxLQUFLLEdBQUcsSUFBSSxPQUFPLFVBQVUsRUFBRSxLQUFLLEdBQUcsSUFBSTtBQUFBLE1BQy9EO0FBRUEsV0FBSyxRQUFRLEdBQUcsU0FBUyxVQUFVLFFBQVEsUUFBUSxRQUFRLFNBQVMsR0FBRztBQUNyRSxrQkFBVSxLQUFLLEVBQUUsUUFBUSxXQUFXO0FBQUEsTUFDdEM7QUFDQSxhQUFPO0FBQUEsSUFDVDtBQUdBLGFBQVMsT0FBTyxZQUFZO0FBQzFCLFdBQUssVUFBVyxXQUFXLFdBQVksQ0FBQztBQUN4QyxXQUFLLFdBQVcsV0FBVyxZQUFZLENBQUM7QUFDeEMsV0FBSyxXQUFXLFdBQVcsWUFBWSxDQUFDO0FBRXhDLFdBQUssU0FBUyxRQUFRLFNBQVUsTUFBTTtBQUNwQyxZQUFJLEtBQUssWUFBWSxLQUFLLGFBQWEsVUFBVTtBQUMvQyxnQkFBTSxJQUFJLGNBQWMsaUhBQWlIO0FBQUEsUUFDM0k7QUFBQSxNQUNGLENBQUM7QUFFRCxXQUFLLG1CQUFtQixZQUFZLE1BQU0sWUFBWSxDQUFDLENBQUM7QUFDeEQsV0FBSyxtQkFBbUIsWUFBWSxNQUFNLFlBQVksQ0FBQyxDQUFDO0FBQ3hELFdBQUssa0JBQW1CLFdBQVcsS0FBSyxrQkFBa0IsS0FBSyxnQkFBZ0I7QUFBQSxJQUNqRjtBQUdBLFdBQU8sVUFBVTtBQUdqQixXQUFPLFNBQVMsU0FBUyxlQUFlO0FBQ3RDLFVBQUksU0FBUztBQUViLGNBQVEsVUFBVSxRQUFRO0FBQUEsUUFDeEIsS0FBSztBQUNILG9CQUFVLE9BQU87QUFDakIsa0JBQVEsVUFBVSxDQUFDO0FBQ25CO0FBQUEsUUFFRixLQUFLO0FBQ0gsb0JBQVUsVUFBVSxDQUFDO0FBQ3JCLGtCQUFRLFVBQVUsQ0FBQztBQUNuQjtBQUFBLFFBRUY7QUFDRSxnQkFBTSxJQUFJLGNBQWMsc0RBQXNEO0FBQUEsTUFDbEY7QUFFQSxnQkFBVSxPQUFPLFFBQVEsT0FBTztBQUNoQyxjQUFRLE9BQU8sUUFBUSxLQUFLO0FBRTVCLFVBQUksQ0FBQyxRQUFRLE1BQU0sU0FBVSxRQUFRO0FBQUUsZUFBTyxrQkFBa0I7QUFBQSxNQUFRLENBQUMsR0FBRztBQUMxRSxjQUFNLElBQUksY0FBYywyRkFBMkY7QUFBQSxNQUNySDtBQUVBLFVBQUksQ0FBQyxNQUFNLE1BQU0sU0FBVSxNQUFNO0FBQUUsZUFBTyxnQkFBZ0I7QUFBQSxNQUFNLENBQUMsR0FBRztBQUNsRSxjQUFNLElBQUksY0FBYyxvRkFBb0Y7QUFBQSxNQUM5RztBQUVBLGFBQU8sSUFBSSxPQUFPO0FBQUEsUUFDaEIsU0FBUztBQUFBLFFBQ1QsVUFBVTtBQUFBLE1BQ1osQ0FBQztBQUFBLElBQ0g7QUFHQSxJQUFBQSxRQUFPLFVBQVU7QUFBQTtBQUFBOzs7QUMzR2pCO0FBQUEsaURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksT0FBTztBQUVYLElBQUFBLFFBQU8sVUFBVSxJQUFJLEtBQUsseUJBQXlCO0FBQUEsTUFDakQsTUFBTTtBQUFBLE1BQ04sV0FBVyxTQUFVLE1BQU07QUFBRSxlQUFPLFNBQVMsT0FBTyxPQUFPO0FBQUEsTUFBSTtBQUFBLElBQ2pFLENBQUM7QUFBQTtBQUFBOzs7QUNQRDtBQUFBLGlEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFFQSxRQUFJLE9BQU87QUFFWCxJQUFBQSxRQUFPLFVBQVUsSUFBSSxLQUFLLHlCQUF5QjtBQUFBLE1BQ2pELE1BQU07QUFBQSxNQUNOLFdBQVcsU0FBVSxNQUFNO0FBQUUsZUFBTyxTQUFTLE9BQU8sT0FBTyxDQUFDO0FBQUEsTUFBRztBQUFBLElBQ2pFLENBQUM7QUFBQTtBQUFBOzs7QUNQRDtBQUFBLGlEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFFQSxRQUFJLE9BQU87QUFFWCxJQUFBQSxRQUFPLFVBQVUsSUFBSSxLQUFLLHlCQUF5QjtBQUFBLE1BQ2pELE1BQU07QUFBQSxNQUNOLFdBQVcsU0FBVSxNQUFNO0FBQUUsZUFBTyxTQUFTLE9BQU8sT0FBTyxDQUFDO0FBQUEsTUFBRztBQUFBLElBQ2pFLENBQUM7QUFBQTtBQUFBOzs7QUNQRDtBQUFBLHdEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFPQSxRQUFJLFNBQVM7QUFHYixJQUFBQSxRQUFPLFVBQVUsSUFBSSxPQUFPO0FBQUEsTUFDMUIsVUFBVTtBQUFBLFFBQ1I7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFBQTtBQUFBOzs7QUNoQkQ7QUFBQSxrREFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBSSxPQUFPO0FBRVgsYUFBUyxnQkFBZ0IsTUFBTTtBQUM3QixVQUFJLFNBQVMsS0FBTSxRQUFPO0FBRTFCLFVBQUksTUFBTSxLQUFLO0FBRWYsYUFBUSxRQUFRLEtBQUssU0FBUyxPQUN0QixRQUFRLE1BQU0sU0FBUyxVQUFVLFNBQVMsVUFBVSxTQUFTO0FBQUEsSUFDdkU7QUFFQSxhQUFTLG9CQUFvQjtBQUMzQixhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsT0FBTyxRQUFRO0FBQ3RCLGFBQU8sV0FBVztBQUFBLElBQ3BCO0FBRUEsSUFBQUEsUUFBTyxVQUFVLElBQUksS0FBSywwQkFBMEI7QUFBQSxNQUNsRCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsTUFDVCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsUUFDVCxXQUFXLFdBQVk7QUFBRSxpQkFBTztBQUFBLFFBQVE7QUFBQSxRQUN4QyxXQUFXLFdBQVk7QUFBRSxpQkFBTztBQUFBLFFBQVE7QUFBQSxRQUN4QyxXQUFXLFdBQVk7QUFBRSxpQkFBTztBQUFBLFFBQVE7QUFBQSxRQUN4QyxXQUFXLFdBQVk7QUFBRSxpQkFBTztBQUFBLFFBQVE7QUFBQSxNQUMxQztBQUFBLE1BQ0EsY0FBYztBQUFBLElBQ2hCLENBQUM7QUFBQTtBQUFBOzs7QUNqQ0Q7QUFBQSxrREFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBSSxPQUFPO0FBRVgsYUFBUyxtQkFBbUIsTUFBTTtBQUNoQyxVQUFJLFNBQVMsS0FBTSxRQUFPO0FBRTFCLFVBQUksTUFBTSxLQUFLO0FBRWYsYUFBUSxRQUFRLE1BQU0sU0FBUyxVQUFVLFNBQVMsVUFBVSxTQUFTLFdBQzdELFFBQVEsTUFBTSxTQUFTLFdBQVcsU0FBUyxXQUFXLFNBQVM7QUFBQSxJQUN6RTtBQUVBLGFBQVMscUJBQXFCLE1BQU07QUFDbEMsYUFBTyxTQUFTLFVBQ1QsU0FBUyxVQUNULFNBQVM7QUFBQSxJQUNsQjtBQUVBLGFBQVMsVUFBVSxRQUFRO0FBQ3pCLGFBQU8sT0FBTyxVQUFVLFNBQVMsS0FBSyxNQUFNLE1BQU07QUFBQSxJQUNwRDtBQUVBLElBQUFBLFFBQU8sVUFBVSxJQUFJLEtBQUssMEJBQTBCO0FBQUEsTUFDbEQsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLFFBQ1QsV0FBVyxTQUFVLFFBQVE7QUFBRSxpQkFBTyxTQUFTLFNBQVM7QUFBQSxRQUFTO0FBQUEsUUFDakUsV0FBVyxTQUFVLFFBQVE7QUFBRSxpQkFBTyxTQUFTLFNBQVM7QUFBQSxRQUFTO0FBQUEsUUFDakUsV0FBVyxTQUFVLFFBQVE7QUFBRSxpQkFBTyxTQUFTLFNBQVM7QUFBQSxRQUFTO0FBQUEsTUFDbkU7QUFBQSxNQUNBLGNBQWM7QUFBQSxJQUNoQixDQUFDO0FBQUE7QUFBQTs7O0FDbENEO0FBQUEsaURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksU0FBUztBQUNiLFFBQUksT0FBUztBQUViLGFBQVMsVUFBVSxHQUFHO0FBQ3BCLGFBQVMsTUFBZSxLQUFPLEtBQUssTUFDM0IsTUFBZSxLQUFPLEtBQUssTUFDM0IsTUFBZSxLQUFPLEtBQUs7QUFBQSxJQUN0QztBQUVBLGFBQVMsVUFBVSxHQUFHO0FBQ3BCLGFBQVMsTUFBZSxLQUFPLEtBQUs7QUFBQSxJQUN0QztBQUVBLGFBQVMsVUFBVSxHQUFHO0FBQ3BCLGFBQVMsTUFBZSxLQUFPLEtBQUs7QUFBQSxJQUN0QztBQUVBLGFBQVMsbUJBQW1CLE1BQU07QUFDaEMsVUFBSSxTQUFTLEtBQU0sUUFBTztBQUUxQixVQUFJLE1BQU0sS0FBSyxRQUNYLFFBQVEsR0FDUixZQUFZLE9BQ1o7QUFFSixVQUFJLENBQUMsSUFBSyxRQUFPO0FBRWpCLFdBQUssS0FBSyxLQUFLO0FBR2YsVUFBSSxPQUFPLE9BQU8sT0FBTyxLQUFLO0FBQzVCLGFBQUssS0FBSyxFQUFFLEtBQUs7QUFBQSxNQUNuQjtBQUVBLFVBQUksT0FBTyxLQUFLO0FBRWQsWUFBSSxRQUFRLE1BQU0sSUFBSyxRQUFPO0FBQzlCLGFBQUssS0FBSyxFQUFFLEtBQUs7QUFJakIsWUFBSSxPQUFPLEtBQUs7QUFFZDtBQUVBLGlCQUFPLFFBQVEsS0FBSyxTQUFTO0FBQzNCLGlCQUFLLEtBQUssS0FBSztBQUNmLGdCQUFJLE9BQU8sSUFBSztBQUNoQixnQkFBSSxPQUFPLE9BQU8sT0FBTyxJQUFLLFFBQU87QUFDckMsd0JBQVk7QUFBQSxVQUNkO0FBQ0EsaUJBQU8sYUFBYSxPQUFPO0FBQUEsUUFDN0I7QUFHQSxZQUFJLE9BQU8sS0FBSztBQUVkO0FBRUEsaUJBQU8sUUFBUSxLQUFLLFNBQVM7QUFDM0IsaUJBQUssS0FBSyxLQUFLO0FBQ2YsZ0JBQUksT0FBTyxJQUFLO0FBQ2hCLGdCQUFJLENBQUMsVUFBVSxLQUFLLFdBQVcsS0FBSyxDQUFDLEVBQUcsUUFBTztBQUMvQyx3QkFBWTtBQUFBLFVBQ2Q7QUFDQSxpQkFBTyxhQUFhLE9BQU87QUFBQSxRQUM3QjtBQUdBLGVBQU8sUUFBUSxLQUFLLFNBQVM7QUFDM0IsZUFBSyxLQUFLLEtBQUs7QUFDZixjQUFJLE9BQU8sSUFBSztBQUNoQixjQUFJLENBQUMsVUFBVSxLQUFLLFdBQVcsS0FBSyxDQUFDLEVBQUcsUUFBTztBQUMvQyxzQkFBWTtBQUFBLFFBQ2Q7QUFDQSxlQUFPLGFBQWEsT0FBTztBQUFBLE1BQzdCO0FBS0EsVUFBSSxPQUFPLElBQUssUUFBTztBQUV2QixhQUFPLFFBQVEsS0FBSyxTQUFTO0FBQzNCLGFBQUssS0FBSyxLQUFLO0FBQ2YsWUFBSSxPQUFPLElBQUs7QUFDaEIsWUFBSSxPQUFPLElBQUs7QUFDaEIsWUFBSSxDQUFDLFVBQVUsS0FBSyxXQUFXLEtBQUssQ0FBQyxHQUFHO0FBQ3RDLGlCQUFPO0FBQUEsUUFDVDtBQUNBLG9CQUFZO0FBQUEsTUFDZDtBQUdBLFVBQUksQ0FBQyxhQUFhLE9BQU8sSUFBSyxRQUFPO0FBR3JDLFVBQUksT0FBTyxJQUFLLFFBQU87QUFHdkIsYUFBTyxvQkFBb0IsS0FBSyxLQUFLLE1BQU0sS0FBSyxDQUFDO0FBQUEsSUFDbkQ7QUFFQSxhQUFTLHFCQUFxQixNQUFNO0FBQ2xDLFVBQUksUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLE1BQU0sU0FBUyxDQUFDO0FBRWhELFVBQUksTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJO0FBQzdCLGdCQUFRLE1BQU0sUUFBUSxNQUFNLEVBQUU7QUFBQSxNQUNoQztBQUVBLFdBQUssTUFBTSxDQUFDO0FBRVosVUFBSSxPQUFPLE9BQU8sT0FBTyxLQUFLO0FBQzVCLFlBQUksT0FBTyxJQUFLLFFBQU87QUFDdkIsZ0JBQVEsTUFBTSxNQUFNLENBQUM7QUFDckIsYUFBSyxNQUFNLENBQUM7QUFBQSxNQUNkO0FBRUEsVUFBSSxVQUFVLElBQUssUUFBTztBQUUxQixVQUFJLE9BQU8sS0FBSztBQUNkLFlBQUksTUFBTSxDQUFDLE1BQU0sSUFBSyxRQUFPLE9BQU8sU0FBUyxNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDOUQsWUFBSSxNQUFNLENBQUMsTUFBTSxJQUFLLFFBQU8sT0FBTyxTQUFTLE9BQU8sRUFBRTtBQUN0RCxlQUFPLE9BQU8sU0FBUyxPQUFPLENBQUM7QUFBQSxNQUNqQztBQUVBLFVBQUksTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJO0FBQzdCLGNBQU0sTUFBTSxHQUFHLEVBQUUsUUFBUSxTQUFVLEdBQUc7QUFDcEMsaUJBQU8sUUFBUSxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQUEsUUFDaEMsQ0FBQztBQUVELGdCQUFRO0FBQ1IsZUFBTztBQUVQLGVBQU8sUUFBUSxTQUFVLEdBQUc7QUFDMUIsbUJBQVUsSUFBSTtBQUNkLGtCQUFRO0FBQUEsUUFDVixDQUFDO0FBRUQsZUFBTyxPQUFPO0FBQUEsTUFFaEI7QUFFQSxhQUFPLE9BQU8sU0FBUyxPQUFPLEVBQUU7QUFBQSxJQUNsQztBQUVBLGFBQVMsVUFBVSxRQUFRO0FBQ3pCLGFBQVEsT0FBTyxVQUFVLFNBQVMsS0FBSyxNQUFNLE1BQU8sc0JBQzVDLFNBQVMsTUFBTSxLQUFLLENBQUMsT0FBTyxlQUFlLE1BQU07QUFBQSxJQUMzRDtBQUVBLElBQUFBLFFBQU8sVUFBVSxJQUFJLEtBQUsseUJBQXlCO0FBQUEsTUFDakQsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLFFBQ1QsUUFBYSxTQUFVLEtBQUs7QUFBRSxpQkFBTyxPQUFPLElBQUksT0FBTyxJQUFJLFNBQVMsQ0FBQyxJQUFJLFFBQVEsSUFBSSxTQUFTLENBQUMsRUFBRSxNQUFNLENBQUM7QUFBQSxRQUFHO0FBQUEsUUFDM0csT0FBYSxTQUFVLEtBQUs7QUFBRSxpQkFBTyxPQUFPLElBQUksTUFBTyxJQUFJLFNBQVMsQ0FBQyxJQUFJLE9BQVEsSUFBSSxTQUFTLENBQUMsRUFBRSxNQUFNLENBQUM7QUFBQSxRQUFHO0FBQUEsUUFDM0csU0FBYSxTQUFVLEtBQUs7QUFBRSxpQkFBTyxJQUFJLFNBQVMsRUFBRTtBQUFBLFFBQUc7QUFBQTtBQUFBLFFBRXZELGFBQWEsU0FBVSxLQUFLO0FBQUUsaUJBQU8sT0FBTyxJQUFJLE9BQU8sSUFBSSxTQUFTLEVBQUUsRUFBRSxZQUFZLElBQUssUUFBUSxJQUFJLFNBQVMsRUFBRSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7QUFBQSxRQUFHO0FBQUEsTUFDNUk7QUFBQSxNQUNBLGNBQWM7QUFBQSxNQUNkLGNBQWM7QUFBQSxRQUNaLFFBQWEsQ0FBRSxHQUFJLEtBQU07QUFBQSxRQUN6QixPQUFhLENBQUUsR0FBSSxLQUFNO0FBQUEsUUFDekIsU0FBYSxDQUFFLElBQUksS0FBTTtBQUFBLFFBQ3pCLGFBQWEsQ0FBRSxJQUFJLEtBQU07QUFBQSxNQUMzQjtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUE7OztBQzVLRDtBQUFBLG1EQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFFQSxRQUFJLFNBQVM7QUFDYixRQUFJLE9BQVM7QUFFYixRQUFJLHFCQUFxQixJQUFJO0FBQUE7QUFBQSxNQUUzQjtBQUFBLElBU3VCO0FBRXpCLGFBQVMsaUJBQWlCLE1BQU07QUFDOUIsVUFBSSxTQUFTLEtBQU0sUUFBTztBQUUxQixVQUFJLENBQUMsbUJBQW1CLEtBQUssSUFBSTtBQUFBO0FBQUEsTUFHN0IsS0FBSyxLQUFLLFNBQVMsQ0FBQyxNQUFNLEtBQUs7QUFDakMsZUFBTztBQUFBLE1BQ1Q7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsbUJBQW1CLE1BQU07QUFDaEMsVUFBSSxPQUFPLE1BQU0sTUFBTTtBQUV2QixjQUFTLEtBQUssUUFBUSxNQUFNLEVBQUUsRUFBRSxZQUFZO0FBQzVDLGFBQVMsTUFBTSxDQUFDLE1BQU0sTUFBTSxLQUFLO0FBQ2pDLGVBQVMsQ0FBQztBQUVWLFVBQUksS0FBSyxRQUFRLE1BQU0sQ0FBQyxDQUFDLEtBQUssR0FBRztBQUMvQixnQkFBUSxNQUFNLE1BQU0sQ0FBQztBQUFBLE1BQ3ZCO0FBRUEsVUFBSSxVQUFVLFFBQVE7QUFDcEIsZUFBUSxTQUFTLElBQUssT0FBTyxvQkFBb0IsT0FBTztBQUFBLE1BRTFELFdBQVcsVUFBVSxRQUFRO0FBQzNCLGVBQU87QUFBQSxNQUVULFdBQVcsTUFBTSxRQUFRLEdBQUcsS0FBSyxHQUFHO0FBQ2xDLGNBQU0sTUFBTSxHQUFHLEVBQUUsUUFBUSxTQUFVLEdBQUc7QUFDcEMsaUJBQU8sUUFBUSxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQUEsUUFDbEMsQ0FBQztBQUVELGdCQUFRO0FBQ1IsZUFBTztBQUVQLGVBQU8sUUFBUSxTQUFVLEdBQUc7QUFDMUIsbUJBQVMsSUFBSTtBQUNiLGtCQUFRO0FBQUEsUUFDVixDQUFDO0FBRUQsZUFBTyxPQUFPO0FBQUEsTUFFaEI7QUFDQSxhQUFPLE9BQU8sV0FBVyxPQUFPLEVBQUU7QUFBQSxJQUNwQztBQUdBLFFBQUkseUJBQXlCO0FBRTdCLGFBQVMsbUJBQW1CLFFBQVEsT0FBTztBQUN6QyxVQUFJO0FBRUosVUFBSSxNQUFNLE1BQU0sR0FBRztBQUNqQixnQkFBUSxPQUFPO0FBQUEsVUFDYixLQUFLO0FBQWEsbUJBQU87QUFBQSxVQUN6QixLQUFLO0FBQWEsbUJBQU87QUFBQSxVQUN6QixLQUFLO0FBQWEsbUJBQU87QUFBQSxRQUMzQjtBQUFBLE1BQ0YsV0FBVyxPQUFPLHNCQUFzQixRQUFRO0FBQzlDLGdCQUFRLE9BQU87QUFBQSxVQUNiLEtBQUs7QUFBYSxtQkFBTztBQUFBLFVBQ3pCLEtBQUs7QUFBYSxtQkFBTztBQUFBLFVBQ3pCLEtBQUs7QUFBYSxtQkFBTztBQUFBLFFBQzNCO0FBQUEsTUFDRixXQUFXLE9BQU8sc0JBQXNCLFFBQVE7QUFDOUMsZ0JBQVEsT0FBTztBQUFBLFVBQ2IsS0FBSztBQUFhLG1CQUFPO0FBQUEsVUFDekIsS0FBSztBQUFhLG1CQUFPO0FBQUEsVUFDekIsS0FBSztBQUFhLG1CQUFPO0FBQUEsUUFDM0I7QUFBQSxNQUNGLFdBQVcsT0FBTyxlQUFlLE1BQU0sR0FBRztBQUN4QyxlQUFPO0FBQUEsTUFDVDtBQUVBLFlBQU0sT0FBTyxTQUFTLEVBQUU7QUFLeEIsYUFBTyx1QkFBdUIsS0FBSyxHQUFHLElBQUksSUFBSSxRQUFRLEtBQUssSUFBSSxJQUFJO0FBQUEsSUFDckU7QUFFQSxhQUFTLFFBQVEsUUFBUTtBQUN2QixhQUFRLE9BQU8sVUFBVSxTQUFTLEtBQUssTUFBTSxNQUFNLHNCQUMzQyxTQUFTLE1BQU0sS0FBSyxPQUFPLGVBQWUsTUFBTTtBQUFBLElBQzFEO0FBRUEsSUFBQUEsUUFBTyxVQUFVLElBQUksS0FBSywyQkFBMkI7QUFBQSxNQUNuRCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsTUFDVCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsTUFDWCxjQUFjO0FBQUEsSUFDaEIsQ0FBQztBQUFBO0FBQUE7OztBQ25IRDtBQUFBLG9EQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFXQSxRQUFJLFNBQVM7QUFHYixJQUFBQSxRQUFPLFVBQVUsSUFBSSxPQUFPO0FBQUEsTUFDMUIsU0FBUztBQUFBLFFBQ1A7QUFBQSxNQUNGO0FBQUEsTUFDQSxVQUFVO0FBQUEsUUFDUjtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFBQTtBQUFBOzs7QUN4QkQ7QUFBQSxvREFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBVUEsUUFBSSxTQUFTO0FBR2IsSUFBQUEsUUFBTyxVQUFVLElBQUksT0FBTztBQUFBLE1BQzFCLFNBQVM7QUFBQSxRQUNQO0FBQUEsTUFDRjtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUE7OztBQ2pCRDtBQUFBLHVEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFFQSxRQUFJLE9BQU87QUFFWCxRQUFJLG1CQUFtQixJQUFJO0FBQUEsTUFDekI7QUFBQSxJQUVnQjtBQUVsQixRQUFJLHdCQUF3QixJQUFJO0FBQUEsTUFDOUI7QUFBQSxJQVN3QjtBQUUxQixhQUFTLHFCQUFxQixNQUFNO0FBQ2xDLFVBQUksU0FBUyxLQUFNLFFBQU87QUFDMUIsVUFBSSxpQkFBaUIsS0FBSyxJQUFJLE1BQU0sS0FBTSxRQUFPO0FBQ2pELFVBQUksc0JBQXNCLEtBQUssSUFBSSxNQUFNLEtBQU0sUUFBTztBQUN0RCxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsdUJBQXVCLE1BQU07QUFDcEMsVUFBSSxPQUFPLE1BQU0sT0FBTyxLQUFLLE1BQU0sUUFBUSxRQUFRLFdBQVcsR0FDMUQsUUFBUSxNQUFNLFNBQVMsV0FBVztBQUV0QyxjQUFRLGlCQUFpQixLQUFLLElBQUk7QUFDbEMsVUFBSSxVQUFVLEtBQU0sU0FBUSxzQkFBc0IsS0FBSyxJQUFJO0FBRTNELFVBQUksVUFBVSxLQUFNLE9BQU0sSUFBSSxNQUFNLG9CQUFvQjtBQUl4RCxhQUFPLENBQUUsTUFBTSxDQUFDO0FBQ2hCLGNBQVEsQ0FBRSxNQUFNLENBQUMsSUFBSztBQUN0QixZQUFNLENBQUUsTUFBTSxDQUFDO0FBRWYsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHO0FBQ2IsZUFBTyxJQUFJLEtBQUssS0FBSyxJQUFJLE1BQU0sT0FBTyxHQUFHLENBQUM7QUFBQSxNQUM1QztBQUlBLGFBQU8sQ0FBRSxNQUFNLENBQUM7QUFDaEIsZUFBUyxDQUFFLE1BQU0sQ0FBQztBQUNsQixlQUFTLENBQUUsTUFBTSxDQUFDO0FBRWxCLFVBQUksTUFBTSxDQUFDLEdBQUc7QUFDWixtQkFBVyxNQUFNLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQztBQUM5QixlQUFPLFNBQVMsU0FBUyxHQUFHO0FBQzFCLHNCQUFZO0FBQUEsUUFDZDtBQUNBLG1CQUFXLENBQUM7QUFBQSxNQUNkO0FBSUEsVUFBSSxNQUFNLENBQUMsR0FBRztBQUNaLGtCQUFVLENBQUUsTUFBTSxFQUFFO0FBQ3BCLG9CQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUs7QUFDM0IsaUJBQVMsVUFBVSxLQUFLLGFBQWE7QUFDckMsWUFBSSxNQUFNLENBQUMsTUFBTSxJQUFLLFNBQVEsQ0FBQztBQUFBLE1BQ2pDO0FBRUEsYUFBTyxJQUFJLEtBQUssS0FBSyxJQUFJLE1BQU0sT0FBTyxLQUFLLE1BQU0sUUFBUSxRQUFRLFFBQVEsQ0FBQztBQUUxRSxVQUFJLE1BQU8sTUFBSyxRQUFRLEtBQUssUUFBUSxJQUFJLEtBQUs7QUFFOUMsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLHVCQUF1QixRQUFvQjtBQUNsRCxhQUFPLE9BQU8sWUFBWTtBQUFBLElBQzVCO0FBRUEsSUFBQUEsUUFBTyxVQUFVLElBQUksS0FBSywrQkFBK0I7QUFBQSxNQUN2RCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsTUFDVCxXQUFXO0FBQUEsTUFDWCxZQUFZO0FBQUEsTUFDWixXQUFXO0FBQUEsSUFDYixDQUFDO0FBQUE7QUFBQTs7O0FDdkZEO0FBQUEsbURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksT0FBTztBQUVYLGFBQVMsaUJBQWlCLE1BQU07QUFDOUIsYUFBTyxTQUFTLFFBQVEsU0FBUztBQUFBLElBQ25DO0FBRUEsSUFBQUEsUUFBTyxVQUFVLElBQUksS0FBSywyQkFBMkI7QUFBQSxNQUNuRCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsSUFDWCxDQUFDO0FBQUE7QUFBQTs7O0FDWEQ7QUFBQSxvREFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBSUEsUUFBSTtBQUVKLFFBQUk7QUFFRSxpQkFBVztBQUNmLG1CQUFhLFNBQVMsUUFBUSxFQUFFO0FBQUEsSUFDbEMsU0FBUyxJQUFJO0FBQUEsSUFBQztBQUZSO0FBSU4sUUFBSSxPQUFhO0FBSWpCLFFBQUksYUFBYTtBQUdqQixhQUFTLGtCQUFrQixNQUFNO0FBQy9CLFVBQUksU0FBUyxLQUFNLFFBQU87QUFFMUIsVUFBSSxNQUFNLEtBQUssU0FBUyxHQUFHLE1BQU0sS0FBSyxRQUFRLE1BQU07QUFHcEQsV0FBSyxNQUFNLEdBQUcsTUFBTSxLQUFLLE9BQU87QUFDOUIsZUFBTyxJQUFJLFFBQVEsS0FBSyxPQUFPLEdBQUcsQ0FBQztBQUduQyxZQUFJLE9BQU8sR0FBSTtBQUdmLFlBQUksT0FBTyxFQUFHLFFBQU87QUFFckIsa0JBQVU7QUFBQSxNQUNaO0FBR0EsYUFBUSxTQUFTLE1BQU87QUFBQSxJQUMxQjtBQUVBLGFBQVMsb0JBQW9CLE1BQU07QUFDakMsVUFBSSxLQUFLLFVBQ0wsUUFBUSxLQUFLLFFBQVEsWUFBWSxFQUFFLEdBQ25DLE1BQU0sTUFBTSxRQUNaLE1BQU0sWUFDTixPQUFPLEdBQ1AsU0FBUyxDQUFDO0FBSWQsV0FBSyxNQUFNLEdBQUcsTUFBTSxLQUFLLE9BQU87QUFDOUIsWUFBSyxNQUFNLE1BQU0sS0FBTSxLQUFLO0FBQzFCLGlCQUFPLEtBQU0sUUFBUSxLQUFNLEdBQUk7QUFDL0IsaUJBQU8sS0FBTSxRQUFRLElBQUssR0FBSTtBQUM5QixpQkFBTyxLQUFLLE9BQU8sR0FBSTtBQUFBLFFBQ3pCO0FBRUEsZUFBUSxRQUFRLElBQUssSUFBSSxRQUFRLE1BQU0sT0FBTyxHQUFHLENBQUM7QUFBQSxNQUNwRDtBQUlBLGlCQUFZLE1BQU0sSUFBSztBQUV2QixVQUFJLGFBQWEsR0FBRztBQUNsQixlQUFPLEtBQU0sUUFBUSxLQUFNLEdBQUk7QUFDL0IsZUFBTyxLQUFNLFFBQVEsSUFBSyxHQUFJO0FBQzlCLGVBQU8sS0FBSyxPQUFPLEdBQUk7QUFBQSxNQUN6QixXQUFXLGFBQWEsSUFBSTtBQUMxQixlQUFPLEtBQU0sUUFBUSxLQUFNLEdBQUk7QUFDL0IsZUFBTyxLQUFNLFFBQVEsSUFBSyxHQUFJO0FBQUEsTUFDaEMsV0FBVyxhQUFhLElBQUk7QUFDMUIsZUFBTyxLQUFNLFFBQVEsSUFBSyxHQUFJO0FBQUEsTUFDaEM7QUFHQSxVQUFJLFlBQVk7QUFFZCxlQUFPLFdBQVcsT0FBTyxXQUFXLEtBQUssTUFBTSxJQUFJLElBQUksV0FBVyxNQUFNO0FBQUEsTUFDMUU7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsb0JBQW9CLFFBQW9CO0FBQy9DLFVBQUksU0FBUyxJQUFJLE9BQU8sR0FBRyxLQUFLLE1BQzVCLE1BQU0sT0FBTyxRQUNiLE1BQU07QUFJVixXQUFLLE1BQU0sR0FBRyxNQUFNLEtBQUssT0FBTztBQUM5QixZQUFLLE1BQU0sTUFBTSxLQUFNLEtBQUs7QUFDMUIsb0JBQVUsSUFBSyxRQUFRLEtBQU0sRUFBSTtBQUNqQyxvQkFBVSxJQUFLLFFBQVEsS0FBTSxFQUFJO0FBQ2pDLG9CQUFVLElBQUssUUFBUSxJQUFLLEVBQUk7QUFDaEMsb0JBQVUsSUFBSSxPQUFPLEVBQUk7QUFBQSxRQUMzQjtBQUVBLGdCQUFRLFFBQVEsS0FBSyxPQUFPLEdBQUc7QUFBQSxNQUNqQztBQUlBLGFBQU8sTUFBTTtBQUViLFVBQUksU0FBUyxHQUFHO0FBQ2Qsa0JBQVUsSUFBSyxRQUFRLEtBQU0sRUFBSTtBQUNqQyxrQkFBVSxJQUFLLFFBQVEsS0FBTSxFQUFJO0FBQ2pDLGtCQUFVLElBQUssUUFBUSxJQUFLLEVBQUk7QUFDaEMsa0JBQVUsSUFBSSxPQUFPLEVBQUk7QUFBQSxNQUMzQixXQUFXLFNBQVMsR0FBRztBQUNyQixrQkFBVSxJQUFLLFFBQVEsS0FBTSxFQUFJO0FBQ2pDLGtCQUFVLElBQUssUUFBUSxJQUFLLEVBQUk7QUFDaEMsa0JBQVUsSUFBSyxRQUFRLElBQUssRUFBSTtBQUNoQyxrQkFBVSxJQUFJLEVBQUU7QUFBQSxNQUNsQixXQUFXLFNBQVMsR0FBRztBQUNyQixrQkFBVSxJQUFLLFFBQVEsSUFBSyxFQUFJO0FBQ2hDLGtCQUFVLElBQUssUUFBUSxJQUFLLEVBQUk7QUFDaEMsa0JBQVUsSUFBSSxFQUFFO0FBQ2hCLGtCQUFVLElBQUksRUFBRTtBQUFBLE1BQ2xCO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLFNBQVMsUUFBUTtBQUN4QixhQUFPLGNBQWMsV0FBVyxTQUFTLE1BQU07QUFBQSxJQUNqRDtBQUVBLElBQUFBLFFBQU8sVUFBVSxJQUFJLEtBQUssNEJBQTRCO0FBQUEsTUFDcEQsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLElBQ2IsQ0FBQztBQUFBO0FBQUE7OztBQ3pJRDtBQUFBLGtEQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFFQSxRQUFJLE9BQU87QUFFWCxRQUFJLGtCQUFrQixPQUFPLFVBQVU7QUFDdkMsUUFBSSxZQUFrQixPQUFPLFVBQVU7QUFFdkMsYUFBUyxnQkFBZ0IsTUFBTTtBQUM3QixVQUFJLFNBQVMsS0FBTSxRQUFPO0FBRTFCLFVBQUksYUFBYSxDQUFDLEdBQUcsT0FBTyxRQUFRLE1BQU0sU0FBUyxZQUMvQyxTQUFTO0FBRWIsV0FBSyxRQUFRLEdBQUcsU0FBUyxPQUFPLFFBQVEsUUFBUSxRQUFRLFNBQVMsR0FBRztBQUNsRSxlQUFPLE9BQU8sS0FBSztBQUNuQixxQkFBYTtBQUViLFlBQUksVUFBVSxLQUFLLElBQUksTUFBTSxrQkFBbUIsUUFBTztBQUV2RCxhQUFLLFdBQVcsTUFBTTtBQUNwQixjQUFJLGdCQUFnQixLQUFLLE1BQU0sT0FBTyxHQUFHO0FBQ3ZDLGdCQUFJLENBQUMsV0FBWSxjQUFhO0FBQUEsZ0JBQ3pCLFFBQU87QUFBQSxVQUNkO0FBQUEsUUFDRjtBQUVBLFlBQUksQ0FBQyxXQUFZLFFBQU87QUFFeEIsWUFBSSxXQUFXLFFBQVEsT0FBTyxNQUFNLEdBQUksWUFBVyxLQUFLLE9BQU87QUFBQSxZQUMxRCxRQUFPO0FBQUEsTUFDZDtBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxrQkFBa0IsTUFBTTtBQUMvQixhQUFPLFNBQVMsT0FBTyxPQUFPLENBQUM7QUFBQSxJQUNqQztBQUVBLElBQUFBLFFBQU8sVUFBVSxJQUFJLEtBQUssMEJBQTBCO0FBQUEsTUFDbEQsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsV0FBVztBQUFBLElBQ2IsQ0FBQztBQUFBO0FBQUE7OztBQzNDRDtBQUFBLG1EQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFFQSxRQUFJLE9BQU87QUFFWCxRQUFJLFlBQVksT0FBTyxVQUFVO0FBRWpDLGFBQVMsaUJBQWlCLE1BQU07QUFDOUIsVUFBSSxTQUFTLEtBQU0sUUFBTztBQUUxQixVQUFJLE9BQU8sUUFBUSxNQUFNLE1BQU0sUUFDM0IsU0FBUztBQUViLGVBQVMsSUFBSSxNQUFNLE9BQU8sTUFBTTtBQUVoQyxXQUFLLFFBQVEsR0FBRyxTQUFTLE9BQU8sUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBQ2xFLGVBQU8sT0FBTyxLQUFLO0FBRW5CLFlBQUksVUFBVSxLQUFLLElBQUksTUFBTSxrQkFBbUIsUUFBTztBQUV2RCxlQUFPLE9BQU8sS0FBSyxJQUFJO0FBRXZCLFlBQUksS0FBSyxXQUFXLEVBQUcsUUFBTztBQUU5QixlQUFPLEtBQUssSUFBSSxDQUFFLEtBQUssQ0FBQyxHQUFHLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBRTtBQUFBLE1BQzNDO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLG1CQUFtQixNQUFNO0FBQ2hDLFVBQUksU0FBUyxLQUFNLFFBQU8sQ0FBQztBQUUzQixVQUFJLE9BQU8sUUFBUSxNQUFNLE1BQU0sUUFDM0IsU0FBUztBQUViLGVBQVMsSUFBSSxNQUFNLE9BQU8sTUFBTTtBQUVoQyxXQUFLLFFBQVEsR0FBRyxTQUFTLE9BQU8sUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBQ2xFLGVBQU8sT0FBTyxLQUFLO0FBRW5CLGVBQU8sT0FBTyxLQUFLLElBQUk7QUFFdkIsZUFBTyxLQUFLLElBQUksQ0FBRSxLQUFLLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUU7QUFBQSxNQUMzQztBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsSUFBQUEsUUFBTyxVQUFVLElBQUksS0FBSywyQkFBMkI7QUFBQSxNQUNuRCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsTUFDVCxXQUFXO0FBQUEsSUFDYixDQUFDO0FBQUE7QUFBQTs7O0FDcEREO0FBQUEsaURBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksT0FBTztBQUVYLFFBQUksa0JBQWtCLE9BQU8sVUFBVTtBQUV2QyxhQUFTLGVBQWUsTUFBTTtBQUM1QixVQUFJLFNBQVMsS0FBTSxRQUFPO0FBRTFCLFVBQUksS0FBSyxTQUFTO0FBRWxCLFdBQUssT0FBTyxRQUFRO0FBQ2xCLFlBQUksZ0JBQWdCLEtBQUssUUFBUSxHQUFHLEdBQUc7QUFDckMsY0FBSSxPQUFPLEdBQUcsTUFBTSxLQUFNLFFBQU87QUFBQSxRQUNuQztBQUFBLE1BQ0Y7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsaUJBQWlCLE1BQU07QUFDOUIsYUFBTyxTQUFTLE9BQU8sT0FBTyxDQUFDO0FBQUEsSUFDakM7QUFFQSxJQUFBQSxRQUFPLFVBQVUsSUFBSSxLQUFLLHlCQUF5QjtBQUFBLE1BQ2pELE1BQU07QUFBQSxNQUNOLFNBQVM7QUFBQSxNQUNULFdBQVc7QUFBQSxJQUNiLENBQUM7QUFBQTtBQUFBOzs7QUM1QkQ7QUFBQSw0REFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBVUEsUUFBSSxTQUFTO0FBR2IsSUFBQUEsUUFBTyxVQUFVLElBQUksT0FBTztBQUFBLE1BQzFCLFNBQVM7QUFBQSxRQUNQO0FBQUEsTUFDRjtBQUFBLE1BQ0EsVUFBVTtBQUFBLFFBQ1I7QUFBQSxRQUNBO0FBQUEsTUFDRjtBQUFBLE1BQ0EsVUFBVTtBQUFBLFFBQ1I7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNGO0FBQUEsSUFDRixDQUFDO0FBQUE7QUFBQTs7O0FDM0JEO0FBQUEsMERBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQUksT0FBTztBQUVYLGFBQVMsNkJBQTZCO0FBQ3BDLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUywrQkFBK0I7QUFFdEMsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLCtCQUErQjtBQUN0QyxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsWUFBWSxRQUFRO0FBQzNCLGFBQU8sT0FBTyxXQUFXO0FBQUEsSUFDM0I7QUFFQSxJQUFBQSxRQUFPLFVBQVUsSUFBSSxLQUFLLGtDQUFrQztBQUFBLE1BQzFELE1BQU07QUFBQSxNQUNOLFNBQVM7QUFBQSxNQUNULFdBQVc7QUFBQSxNQUNYLFdBQVc7QUFBQSxNQUNYLFdBQVc7QUFBQSxJQUNiLENBQUM7QUFBQTtBQUFBOzs7QUMzQkQ7QUFBQSx1REFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBSSxPQUFPO0FBRVgsYUFBUyx3QkFBd0IsTUFBTTtBQUNyQyxVQUFJLFNBQVMsS0FBTSxRQUFPO0FBQzFCLFVBQUksS0FBSyxXQUFXLEVBQUcsUUFBTztBQUU5QixVQUFJLFNBQVMsTUFDVCxPQUFTLGNBQWMsS0FBSyxJQUFJLEdBQ2hDLFlBQVk7QUFJaEIsVUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLO0FBQ3JCLFlBQUksS0FBTSxhQUFZLEtBQUssQ0FBQztBQUU1QixZQUFJLFVBQVUsU0FBUyxFQUFHLFFBQU87QUFFakMsWUFBSSxPQUFPLE9BQU8sU0FBUyxVQUFVLFNBQVMsQ0FBQyxNQUFNLElBQUssUUFBTztBQUFBLE1BQ25FO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLDBCQUEwQixNQUFNO0FBQ3ZDLFVBQUksU0FBUyxNQUNULE9BQVMsY0FBYyxLQUFLLElBQUksR0FDaEMsWUFBWTtBQUdoQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUs7QUFDckIsWUFBSSxLQUFNLGFBQVksS0FBSyxDQUFDO0FBQzVCLGlCQUFTLE9BQU8sTUFBTSxHQUFHLE9BQU8sU0FBUyxVQUFVLFNBQVMsQ0FBQztBQUFBLE1BQy9EO0FBRUEsYUFBTyxJQUFJLE9BQU8sUUFBUSxTQUFTO0FBQUEsSUFDckM7QUFFQSxhQUFTLDBCQUEwQixRQUFvQjtBQUNyRCxVQUFJLFNBQVMsTUFBTSxPQUFPLFNBQVM7QUFFbkMsVUFBSSxPQUFPLE9BQVEsV0FBVTtBQUM3QixVQUFJLE9BQU8sVUFBVyxXQUFVO0FBQ2hDLFVBQUksT0FBTyxXQUFZLFdBQVU7QUFFakMsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLFNBQVMsUUFBUTtBQUN4QixhQUFPLE9BQU8sVUFBVSxTQUFTLEtBQUssTUFBTSxNQUFNO0FBQUEsSUFDcEQ7QUFFQSxJQUFBQSxRQUFPLFVBQVUsSUFBSSxLQUFLLCtCQUErQjtBQUFBLE1BQ3ZELE1BQU07QUFBQSxNQUNOLFNBQVM7QUFBQSxNQUNULFdBQVc7QUFBQSxNQUNYLFdBQVc7QUFBQSxNQUNYLFdBQVc7QUFBQSxJQUNiLENBQUM7QUFBQTtBQUFBOzs7QUMzREQsSUFBQUMsb0JBQUE7QUFBQSx5REFBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBSTtBQVNKLFFBQUk7QUFFRSxpQkFBVztBQUNmLGdCQUFVLFNBQVMsU0FBUztBQUFBLElBQzlCLFNBQVMsR0FBRztBQUdWLFVBQUksT0FBTyxXQUFXLFlBQWEsV0FBVSxPQUFPO0FBQUEsSUFDdEQ7QUFOTTtBQVFOLFFBQUksT0FBTztBQUVYLGFBQVMsMEJBQTBCLE1BQU07QUFDdkMsVUFBSSxTQUFTLEtBQU0sUUFBTztBQUUxQixVQUFJO0FBQ0YsWUFBSSxTQUFTLE1BQU0sT0FBTyxLQUN0QixNQUFTLFFBQVEsTUFBTSxRQUFRLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFFbEQsWUFBSSxJQUFJLFNBQTRCLGFBQ2hDLElBQUksS0FBSyxXQUF1QixLQUNoQyxJQUFJLEtBQUssQ0FBQyxFQUFFLFNBQW9CLHlCQUMvQixJQUFJLEtBQUssQ0FBQyxFQUFFLFdBQVcsU0FBUyw2QkFDL0IsSUFBSSxLQUFLLENBQUMsRUFBRSxXQUFXLFNBQVMsc0JBQXVCO0FBQzNELGlCQUFPO0FBQUEsUUFDVDtBQUVBLGVBQU87QUFBQSxNQUNULFNBQVMsS0FBSztBQUNaLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUVBLGFBQVMsNEJBQTRCLE1BQU07QUFHekMsVUFBSSxTQUFTLE1BQU0sT0FBTyxLQUN0QixNQUFTLFFBQVEsTUFBTSxRQUFRLEVBQUUsT0FBTyxLQUFLLENBQUMsR0FDOUMsU0FBUyxDQUFDLEdBQ1Y7QUFFSixVQUFJLElBQUksU0FBNEIsYUFDaEMsSUFBSSxLQUFLLFdBQXVCLEtBQ2hDLElBQUksS0FBSyxDQUFDLEVBQUUsU0FBb0IseUJBQy9CLElBQUksS0FBSyxDQUFDLEVBQUUsV0FBVyxTQUFTLDZCQUMvQixJQUFJLEtBQUssQ0FBQyxFQUFFLFdBQVcsU0FBUyxzQkFBdUI7QUFDM0QsY0FBTSxJQUFJLE1BQU0sNEJBQTRCO0FBQUEsTUFDOUM7QUFFQSxVQUFJLEtBQUssQ0FBQyxFQUFFLFdBQVcsT0FBTyxRQUFRLFNBQVUsT0FBTztBQUNyRCxlQUFPLEtBQUssTUFBTSxJQUFJO0FBQUEsTUFDeEIsQ0FBQztBQUVELGFBQU8sSUFBSSxLQUFLLENBQUMsRUFBRSxXQUFXLEtBQUs7QUFJbkMsVUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFLFdBQVcsS0FBSyxTQUFTLGtCQUFrQjtBQUV6RCxlQUFPLElBQUksU0FBUyxRQUFRLE9BQU8sTUFBTSxLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUFBLE1BQ3BFO0FBSUEsYUFBTyxJQUFJLFNBQVMsUUFBUSxZQUFZLE9BQU8sTUFBTSxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQUEsSUFDeEU7QUFFQSxhQUFTLDRCQUE0QixRQUFvQjtBQUN2RCxhQUFPLE9BQU8sU0FBUztBQUFBLElBQ3pCO0FBRUEsYUFBUyxXQUFXLFFBQVE7QUFDMUIsYUFBTyxPQUFPLFVBQVUsU0FBUyxLQUFLLE1BQU0sTUFBTTtBQUFBLElBQ3BEO0FBRUEsSUFBQUEsUUFBTyxVQUFVLElBQUksS0FBSyxpQ0FBaUM7QUFBQSxNQUN6RCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsTUFDVCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsSUFDYixDQUFDO0FBQUE7QUFBQTs7O0FDNUZEO0FBQUEsNERBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQVlBLFFBQUksU0FBUztBQUdiLElBQUFBLFFBQU8sVUFBVSxPQUFPLFVBQVUsSUFBSSxPQUFPO0FBQUEsTUFDM0MsU0FBUztBQUFBLFFBQ1A7QUFBQSxNQUNGO0FBQUEsTUFDQSxVQUFVO0FBQUEsUUFDUjtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDRjtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUE7OztBQ3hCRDtBQUFBLCtDQUFBQyxVQUFBQyxTQUFBO0FBQUE7QUFJQSxRQUFJLFNBQXNCO0FBQzFCLFFBQUksZ0JBQXNCO0FBQzFCLFFBQUksT0FBc0I7QUFDMUIsUUFBSSxzQkFBc0I7QUFDMUIsUUFBSSxzQkFBc0I7QUFHMUIsUUFBSSxrQkFBa0IsT0FBTyxVQUFVO0FBR3ZDLFFBQUksa0JBQW9CO0FBQ3hCLFFBQUksbUJBQW9CO0FBQ3hCLFFBQUksbUJBQW9CO0FBQ3hCLFFBQUksb0JBQW9CO0FBR3hCLFFBQUksZ0JBQWlCO0FBQ3JCLFFBQUksaUJBQWlCO0FBQ3JCLFFBQUksZ0JBQWlCO0FBR3JCLFFBQUksd0JBQWdDO0FBQ3BDLFFBQUksZ0NBQWdDO0FBQ3BDLFFBQUksMEJBQWdDO0FBQ3BDLFFBQUkscUJBQWdDO0FBQ3BDLFFBQUksa0JBQWdDO0FBR3BDLGFBQVMsT0FBTyxLQUFLO0FBQUUsYUFBTyxPQUFPLFVBQVUsU0FBUyxLQUFLLEdBQUc7QUFBQSxJQUFHO0FBRW5FLGFBQVMsT0FBTyxHQUFHO0FBQ2pCLGFBQVEsTUFBTSxNQUFrQixNQUFNO0FBQUEsSUFDeEM7QUFFQSxhQUFTLGVBQWUsR0FBRztBQUN6QixhQUFRLE1BQU0sS0FBbUIsTUFBTTtBQUFBLElBQ3pDO0FBRUEsYUFBUyxhQUFhLEdBQUc7QUFDdkIsYUFBUSxNQUFNLEtBQ04sTUFBTSxNQUNOLE1BQU0sTUFDTixNQUFNO0FBQUEsSUFDaEI7QUFFQSxhQUFTLGtCQUFrQixHQUFHO0FBQzVCLGFBQU8sTUFBTSxNQUNOLE1BQU0sTUFDTixNQUFNLE1BQ04sTUFBTSxPQUNOLE1BQU07QUFBQSxJQUNmO0FBRUEsYUFBUyxZQUFZLEdBQUc7QUFDdEIsVUFBSTtBQUVKLFVBQUssTUFBZSxLQUFPLEtBQUssSUFBYztBQUM1QyxlQUFPLElBQUk7QUFBQSxNQUNiO0FBR0EsV0FBSyxJQUFJO0FBRVQsVUFBSyxNQUFlLE1BQVEsTUFBTSxLQUFjO0FBQzlDLGVBQU8sS0FBSyxLQUFPO0FBQUEsTUFDckI7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsY0FBYyxHQUFHO0FBQ3hCLFVBQUksTUFBTSxLQUFhO0FBQUUsZUFBTztBQUFBLE1BQUc7QUFDbkMsVUFBSSxNQUFNLEtBQWE7QUFBRSxlQUFPO0FBQUEsTUFBRztBQUNuQyxVQUFJLE1BQU0sSUFBYTtBQUFFLGVBQU87QUFBQSxNQUFHO0FBQ25DLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxnQkFBZ0IsR0FBRztBQUMxQixVQUFLLE1BQWUsS0FBTyxLQUFLLElBQWM7QUFDNUMsZUFBTyxJQUFJO0FBQUEsTUFDYjtBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxxQkFBcUIsR0FBRztBQUUvQixhQUFRLE1BQU0sS0FBZSxPQUN0QixNQUFNLEtBQWUsU0FDckIsTUFBTSxLQUFlLE9BQ3JCLE1BQU0sTUFBZSxNQUNyQixNQUFNLElBQWlCLE1BQ3ZCLE1BQU0sTUFBZSxPQUNyQixNQUFNLE1BQWUsT0FDckIsTUFBTSxNQUFlLE9BQ3JCLE1BQU0sTUFBZSxPQUNyQixNQUFNLE1BQWUsU0FDckIsTUFBTSxLQUFtQixNQUN6QixNQUFNLEtBQWUsTUFDckIsTUFBTSxLQUFlLE1BQ3JCLE1BQU0sS0FBZSxPQUNyQixNQUFNLEtBQWUsU0FDckIsTUFBTSxLQUFlLFNBQ3JCLE1BQU0sS0FBZSxXQUNyQixNQUFNLEtBQWUsV0FBVztBQUFBLElBQ3pDO0FBRUEsYUFBUyxrQkFBa0IsR0FBRztBQUM1QixVQUFJLEtBQUssT0FBUTtBQUNmLGVBQU8sT0FBTyxhQUFhLENBQUM7QUFBQSxNQUM5QjtBQUdBLGFBQU8sT0FBTztBQUFBLFNBQ1YsSUFBSSxTQUFhLE1BQU07QUFBQSxTQUN2QixJQUFJLFFBQVksUUFBVTtBQUFBLE1BQzlCO0FBQUEsSUFDRjtBQUlBLGFBQVMsWUFBWSxRQUFRLEtBQUssT0FBTztBQUV2QyxVQUFJLFFBQVEsYUFBYTtBQUN2QixlQUFPLGVBQWUsUUFBUSxLQUFLO0FBQUEsVUFDakMsY0FBYztBQUFBLFVBQ2QsWUFBWTtBQUFBLFVBQ1osVUFBVTtBQUFBLFVBQ1Y7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNILE9BQU87QUFDTCxlQUFPLEdBQUcsSUFBSTtBQUFBLE1BQ2hCO0FBQUEsSUFDRjtBQUVBLFFBQUksb0JBQW9CLElBQUksTUFBTSxHQUFHO0FBQ3JDLFFBQUksa0JBQWtCLElBQUksTUFBTSxHQUFHO0FBQ25DLFNBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxLQUFLO0FBQzVCLHdCQUFrQixDQUFDLElBQUkscUJBQXFCLENBQUMsSUFBSSxJQUFJO0FBQ3JELHNCQUFnQixDQUFDLElBQUkscUJBQXFCLENBQUM7QUFBQSxJQUM3QztBQUhTO0FBTVQsYUFBUyxNQUFNLE9BQU9DLFVBQVM7QUFDN0IsV0FBSyxRQUFRO0FBRWIsV0FBSyxXQUFZQSxTQUFRLFVBQVUsS0FBTTtBQUN6QyxXQUFLLFNBQVlBLFNBQVEsUUFBUSxLQUFRO0FBQ3pDLFdBQUssWUFBWUEsU0FBUSxXQUFXLEtBQUs7QUFDekMsV0FBSyxTQUFZQSxTQUFRLFFBQVEsS0FBUTtBQUN6QyxXQUFLLE9BQVlBLFNBQVEsTUFBTSxLQUFVO0FBQ3pDLFdBQUssV0FBWUEsU0FBUSxVQUFVLEtBQU07QUFFekMsV0FBSyxnQkFBZ0IsS0FBSyxPQUFPO0FBQ2pDLFdBQUssVUFBZ0IsS0FBSyxPQUFPO0FBRWpDLFdBQUssU0FBYSxNQUFNO0FBQ3hCLFdBQUssV0FBYTtBQUNsQixXQUFLLE9BQWE7QUFDbEIsV0FBSyxZQUFhO0FBQ2xCLFdBQUssYUFBYTtBQUVsQixXQUFLLFlBQVksQ0FBQztBQUFBLElBWXBCO0FBR0EsYUFBUyxjQUFjLE9BQU8sU0FBUztBQUNyQyxhQUFPLElBQUk7QUFBQSxRQUNUO0FBQUEsUUFDQSxJQUFJLEtBQUssTUFBTSxVQUFVLE1BQU0sT0FBTyxNQUFNLFVBQVUsTUFBTSxNQUFPLE1BQU0sV0FBVyxNQUFNLFNBQVU7QUFBQSxNQUFDO0FBQUEsSUFDekc7QUFFQSxhQUFTLFdBQVcsT0FBTyxTQUFTO0FBQ2xDLFlBQU0sY0FBYyxPQUFPLE9BQU87QUFBQSxJQUNwQztBQUVBLGFBQVMsYUFBYSxPQUFPLFNBQVM7QUFDcEMsVUFBSSxNQUFNLFdBQVc7QUFDbkIsY0FBTSxVQUFVLEtBQUssTUFBTSxjQUFjLE9BQU8sT0FBTyxDQUFDO0FBQUEsTUFDMUQ7QUFBQSxJQUNGO0FBR0EsUUFBSSxvQkFBb0I7QUFBQSxNQUV0QixNQUFNLFNBQVMsb0JBQW9CLE9BQU8sTUFBTSxNQUFNO0FBRXBELFlBQUksT0FBTyxPQUFPO0FBRWxCLFlBQUksTUFBTSxZQUFZLE1BQU07QUFDMUIscUJBQVcsT0FBTyxnQ0FBZ0M7QUFBQSxRQUNwRDtBQUVBLFlBQUksS0FBSyxXQUFXLEdBQUc7QUFDckIscUJBQVcsT0FBTyw2Q0FBNkM7QUFBQSxRQUNqRTtBQUVBLGdCQUFRLHVCQUF1QixLQUFLLEtBQUssQ0FBQyxDQUFDO0FBRTNDLFlBQUksVUFBVSxNQUFNO0FBQ2xCLHFCQUFXLE9BQU8sMkNBQTJDO0FBQUEsUUFDL0Q7QUFFQSxnQkFBUSxTQUFTLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDN0IsZ0JBQVEsU0FBUyxNQUFNLENBQUMsR0FBRyxFQUFFO0FBRTdCLFlBQUksVUFBVSxHQUFHO0FBQ2YscUJBQVcsT0FBTywyQ0FBMkM7QUFBQSxRQUMvRDtBQUVBLGNBQU0sVUFBVSxLQUFLLENBQUM7QUFDdEIsY0FBTSxrQkFBbUIsUUFBUTtBQUVqQyxZQUFJLFVBQVUsS0FBSyxVQUFVLEdBQUc7QUFDOUIsdUJBQWEsT0FBTywwQ0FBMEM7QUFBQSxRQUNoRTtBQUFBLE1BQ0Y7QUFBQSxNQUVBLEtBQUssU0FBUyxtQkFBbUIsT0FBTyxNQUFNLE1BQU07QUFFbEQsWUFBSSxRQUFRO0FBRVosWUFBSSxLQUFLLFdBQVcsR0FBRztBQUNyQixxQkFBVyxPQUFPLDZDQUE2QztBQUFBLFFBQ2pFO0FBRUEsaUJBQVMsS0FBSyxDQUFDO0FBQ2YsaUJBQVMsS0FBSyxDQUFDO0FBRWYsWUFBSSxDQUFDLG1CQUFtQixLQUFLLE1BQU0sR0FBRztBQUNwQyxxQkFBVyxPQUFPLDZEQUE2RDtBQUFBLFFBQ2pGO0FBRUEsWUFBSSxnQkFBZ0IsS0FBSyxNQUFNLFFBQVEsTUFBTSxHQUFHO0FBQzlDLHFCQUFXLE9BQU8sZ0RBQWdELFNBQVMsY0FBYztBQUFBLFFBQzNGO0FBRUEsWUFBSSxDQUFDLGdCQUFnQixLQUFLLE1BQU0sR0FBRztBQUNqQyxxQkFBVyxPQUFPLDhEQUE4RDtBQUFBLFFBQ2xGO0FBRUEsY0FBTSxPQUFPLE1BQU0sSUFBSTtBQUFBLE1BQ3pCO0FBQUEsSUFDRjtBQUdBLGFBQVMsZUFBZSxPQUFPLE9BQU8sS0FBSyxXQUFXO0FBQ3BELFVBQUksV0FBVyxTQUFTLFlBQVk7QUFFcEMsVUFBSSxRQUFRLEtBQUs7QUFDZixrQkFBVSxNQUFNLE1BQU0sTUFBTSxPQUFPLEdBQUc7QUFFdEMsWUFBSSxXQUFXO0FBQ2IsZUFBSyxZQUFZLEdBQUcsVUFBVSxRQUFRLFFBQVEsWUFBWSxTQUFTLGFBQWEsR0FBRztBQUNqRix5QkFBYSxRQUFRLFdBQVcsU0FBUztBQUN6QyxnQkFBSSxFQUFFLGVBQWUsS0FDZCxNQUFRLGNBQWMsY0FBYyxVQUFZO0FBQ3JELHlCQUFXLE9BQU8sK0JBQStCO0FBQUEsWUFDbkQ7QUFBQSxVQUNGO0FBQUEsUUFDRixXQUFXLHNCQUFzQixLQUFLLE9BQU8sR0FBRztBQUM5QyxxQkFBVyxPQUFPLDhDQUE4QztBQUFBLFFBQ2xFO0FBRUEsY0FBTSxVQUFVO0FBQUEsTUFDbEI7QUFBQSxJQUNGO0FBRUEsYUFBUyxjQUFjLE9BQU8sYUFBYSxRQUFRLGlCQUFpQjtBQUNsRSxVQUFJLFlBQVksS0FBSyxPQUFPO0FBRTVCLFVBQUksQ0FBQyxPQUFPLFNBQVMsTUFBTSxHQUFHO0FBQzVCLG1CQUFXLE9BQU8sbUVBQW1FO0FBQUEsTUFDdkY7QUFFQSxtQkFBYSxPQUFPLEtBQUssTUFBTTtBQUUvQixXQUFLLFFBQVEsR0FBRyxXQUFXLFdBQVcsUUFBUSxRQUFRLFVBQVUsU0FBUyxHQUFHO0FBQzFFLGNBQU0sV0FBVyxLQUFLO0FBRXRCLFlBQUksQ0FBQyxnQkFBZ0IsS0FBSyxhQUFhLEdBQUcsR0FBRztBQUMzQyxzQkFBWSxhQUFhLEtBQUssT0FBTyxHQUFHLENBQUM7QUFDekMsMEJBQWdCLEdBQUcsSUFBSTtBQUFBLFFBQ3pCO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFFQSxhQUFTLGlCQUFpQixPQUFPLFNBQVMsaUJBQWlCLFFBQVEsU0FBUyxXQUFXLFdBQVcsVUFBVTtBQUMxRyxVQUFJLE9BQU87QUFLWCxVQUFJLE1BQU0sUUFBUSxPQUFPLEdBQUc7QUFDMUIsa0JBQVUsTUFBTSxVQUFVLE1BQU0sS0FBSyxPQUFPO0FBRTVDLGFBQUssUUFBUSxHQUFHLFdBQVcsUUFBUSxRQUFRLFFBQVEsVUFBVSxTQUFTLEdBQUc7QUFDdkUsY0FBSSxNQUFNLFFBQVEsUUFBUSxLQUFLLENBQUMsR0FBRztBQUNqQyx1QkFBVyxPQUFPLDZDQUE2QztBQUFBLFVBQ2pFO0FBRUEsY0FBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsS0FBSyxDQUFDLE1BQU0sbUJBQW1CO0FBQy9FLG9CQUFRLEtBQUssSUFBSTtBQUFBLFVBQ25CO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFLQSxVQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sT0FBTyxNQUFNLG1CQUFtQjtBQUN4RSxrQkFBVTtBQUFBLE1BQ1o7QUFHQSxnQkFBVSxPQUFPLE9BQU87QUFFeEIsVUFBSSxZQUFZLE1BQU07QUFDcEIsa0JBQVUsQ0FBQztBQUFBLE1BQ2I7QUFFQSxVQUFJLFdBQVcsMkJBQTJCO0FBQ3hDLFlBQUksTUFBTSxRQUFRLFNBQVMsR0FBRztBQUM1QixlQUFLLFFBQVEsR0FBRyxXQUFXLFVBQVUsUUFBUSxRQUFRLFVBQVUsU0FBUyxHQUFHO0FBQ3pFLDBCQUFjLE9BQU8sU0FBUyxVQUFVLEtBQUssR0FBRyxlQUFlO0FBQUEsVUFDakU7QUFBQSxRQUNGLE9BQU87QUFDTCx3QkFBYyxPQUFPLFNBQVMsV0FBVyxlQUFlO0FBQUEsUUFDMUQ7QUFBQSxNQUNGLE9BQU87QUFDTCxZQUFJLENBQUMsTUFBTSxRQUNQLENBQUMsZ0JBQWdCLEtBQUssaUJBQWlCLE9BQU8sS0FDOUMsZ0JBQWdCLEtBQUssU0FBUyxPQUFPLEdBQUc7QUFDMUMsZ0JBQU0sT0FBTyxhQUFhLE1BQU07QUFDaEMsZ0JBQU0sV0FBVyxZQUFZLE1BQU07QUFDbkMscUJBQVcsT0FBTyx3QkFBd0I7QUFBQSxRQUM1QztBQUNBLG9CQUFZLFNBQVMsU0FBUyxTQUFTO0FBQ3ZDLGVBQU8sZ0JBQWdCLE9BQU87QUFBQSxNQUNoQztBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxjQUFjLE9BQU87QUFDNUIsVUFBSTtBQUVKLFdBQUssTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBRTFDLFVBQUksT0FBTyxJQUFjO0FBQ3ZCLGNBQU07QUFBQSxNQUNSLFdBQVcsT0FBTyxJQUFjO0FBQzlCLGNBQU07QUFDTixZQUFJLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUSxNQUFNLElBQWM7QUFDM0QsZ0JBQU07QUFBQSxRQUNSO0FBQUEsTUFDRixPQUFPO0FBQ0wsbUJBQVcsT0FBTywwQkFBMEI7QUFBQSxNQUM5QztBQUVBLFlBQU0sUUFBUTtBQUNkLFlBQU0sWUFBWSxNQUFNO0FBQUEsSUFDMUI7QUFFQSxhQUFTLG9CQUFvQixPQUFPLGVBQWUsYUFBYTtBQUM5RCxVQUFJLGFBQWEsR0FDYixLQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUU5QyxhQUFPLE9BQU8sR0FBRztBQUNmLGVBQU8sZUFBZSxFQUFFLEdBQUc7QUFDekIsZUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFFBQzlDO0FBRUEsWUFBSSxpQkFBaUIsT0FBTyxJQUFhO0FBQ3ZDLGFBQUc7QUFDRCxpQkFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFVBQzlDLFNBQVMsT0FBTyxNQUFnQixPQUFPLE1BQWdCLE9BQU87QUFBQSxRQUNoRTtBQUVBLFlBQUksT0FBTyxFQUFFLEdBQUc7QUFDZCx3QkFBYyxLQUFLO0FBRW5CLGVBQUssTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBQzFDO0FBQ0EsZ0JBQU0sYUFBYTtBQUVuQixpQkFBTyxPQUFPLElBQWlCO0FBQzdCLGtCQUFNO0FBQ04saUJBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxVQUM5QztBQUFBLFFBQ0YsT0FBTztBQUNMO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFFQSxVQUFJLGdCQUFnQixNQUFNLGVBQWUsS0FBSyxNQUFNLGFBQWEsYUFBYTtBQUM1RSxxQkFBYSxPQUFPLHVCQUF1QjtBQUFBLE1BQzdDO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLHNCQUFzQixPQUFPO0FBQ3BDLFVBQUksWUFBWSxNQUFNLFVBQ2xCO0FBRUosV0FBSyxNQUFNLE1BQU0sV0FBVyxTQUFTO0FBSXJDLFdBQUssT0FBTyxNQUFlLE9BQU8sT0FDOUIsT0FBTyxNQUFNLE1BQU0sV0FBVyxZQUFZLENBQUMsS0FDM0MsT0FBTyxNQUFNLE1BQU0sV0FBVyxZQUFZLENBQUMsR0FBRztBQUVoRCxxQkFBYTtBQUViLGFBQUssTUFBTSxNQUFNLFdBQVcsU0FBUztBQUVyQyxZQUFJLE9BQU8sS0FBSyxhQUFhLEVBQUUsR0FBRztBQUNoQyxpQkFBTztBQUFBLFFBQ1Q7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLGlCQUFpQixPQUFPLE9BQU87QUFDdEMsVUFBSSxVQUFVLEdBQUc7QUFDZixjQUFNLFVBQVU7QUFBQSxNQUNsQixXQUFXLFFBQVEsR0FBRztBQUNwQixjQUFNLFVBQVUsT0FBTyxPQUFPLE1BQU0sUUFBUSxDQUFDO0FBQUEsTUFDL0M7QUFBQSxJQUNGO0FBR0EsYUFBUyxnQkFBZ0IsT0FBTyxZQUFZLHNCQUFzQjtBQUNoRSxVQUFJLFdBQ0EsV0FDQSxjQUNBLFlBQ0EsbUJBQ0EsT0FDQSxZQUNBLGFBQ0EsUUFBUSxNQUFNLE1BQ2QsVUFBVSxNQUFNLFFBQ2hCO0FBRUosV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsVUFBSSxhQUFhLEVBQUUsS0FDZixrQkFBa0IsRUFBRSxLQUNwQixPQUFPLE1BQ1AsT0FBTyxNQUNQLE9BQU8sTUFDUCxPQUFPLE1BQ1AsT0FBTyxPQUNQLE9BQU8sTUFDUCxPQUFPLE1BQ1AsT0FBTyxNQUNQLE9BQU8sTUFDUCxPQUFPLE1BQ1AsT0FBTyxJQUFhO0FBQ3RCLGVBQU87QUFBQSxNQUNUO0FBRUEsVUFBSSxPQUFPLE1BQWUsT0FBTyxJQUFhO0FBQzVDLG9CQUFZLE1BQU0sTUFBTSxXQUFXLE1BQU0sV0FBVyxDQUFDO0FBRXJELFlBQUksYUFBYSxTQUFTLEtBQ3RCLHdCQUF3QixrQkFBa0IsU0FBUyxHQUFHO0FBQ3hELGlCQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ0Y7QUFFQSxZQUFNLE9BQU87QUFDYixZQUFNLFNBQVM7QUFDZixxQkFBZSxhQUFhLE1BQU07QUFDbEMsMEJBQW9CO0FBRXBCLGFBQU8sT0FBTyxHQUFHO0FBQ2YsWUFBSSxPQUFPLElBQWE7QUFDdEIsc0JBQVksTUFBTSxNQUFNLFdBQVcsTUFBTSxXQUFXLENBQUM7QUFFckQsY0FBSSxhQUFhLFNBQVMsS0FDdEIsd0JBQXdCLGtCQUFrQixTQUFTLEdBQUc7QUFDeEQ7QUFBQSxVQUNGO0FBQUEsUUFFRixXQUFXLE9BQU8sSUFBYTtBQUM3QixzQkFBWSxNQUFNLE1BQU0sV0FBVyxNQUFNLFdBQVcsQ0FBQztBQUVyRCxjQUFJLGFBQWEsU0FBUyxHQUFHO0FBQzNCO0FBQUEsVUFDRjtBQUFBLFFBRUYsV0FBWSxNQUFNLGFBQWEsTUFBTSxhQUFhLHNCQUFzQixLQUFLLEtBQ2xFLHdCQUF3QixrQkFBa0IsRUFBRSxHQUFHO0FBQ3hEO0FBQUEsUUFFRixXQUFXLE9BQU8sRUFBRSxHQUFHO0FBQ3JCLGtCQUFRLE1BQU07QUFDZCx1QkFBYSxNQUFNO0FBQ25CLHdCQUFjLE1BQU07QUFDcEIsOEJBQW9CLE9BQU8sT0FBTyxFQUFFO0FBRXBDLGNBQUksTUFBTSxjQUFjLFlBQVk7QUFDbEMsZ0NBQW9CO0FBQ3BCLGlCQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUMxQztBQUFBLFVBQ0YsT0FBTztBQUNMLGtCQUFNLFdBQVc7QUFDakIsa0JBQU0sT0FBTztBQUNiLGtCQUFNLFlBQVk7QUFDbEIsa0JBQU0sYUFBYTtBQUNuQjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBRUEsWUFBSSxtQkFBbUI7QUFDckIseUJBQWUsT0FBTyxjQUFjLFlBQVksS0FBSztBQUNyRCwyQkFBaUIsT0FBTyxNQUFNLE9BQU8sS0FBSztBQUMxQyx5QkFBZSxhQUFhLE1BQU07QUFDbEMsOEJBQW9CO0FBQUEsUUFDdEI7QUFFQSxZQUFJLENBQUMsZUFBZSxFQUFFLEdBQUc7QUFDdkIsdUJBQWEsTUFBTSxXQUFXO0FBQUEsUUFDaEM7QUFFQSxhQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBQUEsTUFDOUM7QUFFQSxxQkFBZSxPQUFPLGNBQWMsWUFBWSxLQUFLO0FBRXJELFVBQUksTUFBTSxRQUFRO0FBQ2hCLGVBQU87QUFBQSxNQUNUO0FBRUEsWUFBTSxPQUFPO0FBQ2IsWUFBTSxTQUFTO0FBQ2YsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLHVCQUF1QixPQUFPLFlBQVk7QUFDakQsVUFBSSxJQUNBLGNBQWM7QUFFbEIsV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsVUFBSSxPQUFPLElBQWE7QUFDdEIsZUFBTztBQUFBLE1BQ1Q7QUFFQSxZQUFNLE9BQU87QUFDYixZQUFNLFNBQVM7QUFDZixZQUFNO0FBQ04scUJBQWUsYUFBYSxNQUFNO0FBRWxDLGNBQVEsS0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVEsT0FBTyxHQUFHO0FBQzFELFlBQUksT0FBTyxJQUFhO0FBQ3RCLHlCQUFlLE9BQU8sY0FBYyxNQUFNLFVBQVUsSUFBSTtBQUN4RCxlQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBRTVDLGNBQUksT0FBTyxJQUFhO0FBQ3RCLDJCQUFlLE1BQU07QUFDckIsa0JBQU07QUFDTix5QkFBYSxNQUFNO0FBQUEsVUFDckIsT0FBTztBQUNMLG1CQUFPO0FBQUEsVUFDVDtBQUFBLFFBRUYsV0FBVyxPQUFPLEVBQUUsR0FBRztBQUNyQix5QkFBZSxPQUFPLGNBQWMsWUFBWSxJQUFJO0FBQ3BELDJCQUFpQixPQUFPLG9CQUFvQixPQUFPLE9BQU8sVUFBVSxDQUFDO0FBQ3JFLHlCQUFlLGFBQWEsTUFBTTtBQUFBLFFBRXBDLFdBQVcsTUFBTSxhQUFhLE1BQU0sYUFBYSxzQkFBc0IsS0FBSyxHQUFHO0FBQzdFLHFCQUFXLE9BQU8sOERBQThEO0FBQUEsUUFFbEYsT0FBTztBQUNMLGdCQUFNO0FBQ04sdUJBQWEsTUFBTTtBQUFBLFFBQ3JCO0FBQUEsTUFDRjtBQUVBLGlCQUFXLE9BQU8sNERBQTREO0FBQUEsSUFDaEY7QUFFQSxhQUFTLHVCQUF1QixPQUFPLFlBQVk7QUFDakQsVUFBSSxjQUNBLFlBQ0EsV0FDQSxXQUNBLEtBQ0E7QUFFSixXQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUUxQyxVQUFJLE9BQU8sSUFBYTtBQUN0QixlQUFPO0FBQUEsTUFDVDtBQUVBLFlBQU0sT0FBTztBQUNiLFlBQU0sU0FBUztBQUNmLFlBQU07QUFDTixxQkFBZSxhQUFhLE1BQU07QUFFbEMsY0FBUSxLQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUSxPQUFPLEdBQUc7QUFDMUQsWUFBSSxPQUFPLElBQWE7QUFDdEIseUJBQWUsT0FBTyxjQUFjLE1BQU0sVUFBVSxJQUFJO0FBQ3hELGdCQUFNO0FBQ04saUJBQU87QUFBQSxRQUVULFdBQVcsT0FBTyxJQUFhO0FBQzdCLHlCQUFlLE9BQU8sY0FBYyxNQUFNLFVBQVUsSUFBSTtBQUN4RCxlQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBRTVDLGNBQUksT0FBTyxFQUFFLEdBQUc7QUFDZCxnQ0FBb0IsT0FBTyxPQUFPLFVBQVU7QUFBQSxVQUc5QyxXQUFXLEtBQUssT0FBTyxrQkFBa0IsRUFBRSxHQUFHO0FBQzVDLGtCQUFNLFVBQVUsZ0JBQWdCLEVBQUU7QUFDbEMsa0JBQU07QUFBQSxVQUVSLFlBQVksTUFBTSxjQUFjLEVBQUUsS0FBSyxHQUFHO0FBQ3hDLHdCQUFZO0FBQ1osd0JBQVk7QUFFWixtQkFBTyxZQUFZLEdBQUcsYUFBYTtBQUNqQyxtQkFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUU1QyxtQkFBSyxNQUFNLFlBQVksRUFBRSxNQUFNLEdBQUc7QUFDaEMsNkJBQWEsYUFBYSxLQUFLO0FBQUEsY0FFakMsT0FBTztBQUNMLDJCQUFXLE9BQU8sZ0NBQWdDO0FBQUEsY0FDcEQ7QUFBQSxZQUNGO0FBRUEsa0JBQU0sVUFBVSxrQkFBa0IsU0FBUztBQUUzQyxrQkFBTTtBQUFBLFVBRVIsT0FBTztBQUNMLHVCQUFXLE9BQU8seUJBQXlCO0FBQUEsVUFDN0M7QUFFQSx5QkFBZSxhQUFhLE1BQU07QUFBQSxRQUVwQyxXQUFXLE9BQU8sRUFBRSxHQUFHO0FBQ3JCLHlCQUFlLE9BQU8sY0FBYyxZQUFZLElBQUk7QUFDcEQsMkJBQWlCLE9BQU8sb0JBQW9CLE9BQU8sT0FBTyxVQUFVLENBQUM7QUFDckUseUJBQWUsYUFBYSxNQUFNO0FBQUEsUUFFcEMsV0FBVyxNQUFNLGFBQWEsTUFBTSxhQUFhLHNCQUFzQixLQUFLLEdBQUc7QUFDN0UscUJBQVcsT0FBTyw4REFBOEQ7QUFBQSxRQUVsRixPQUFPO0FBQ0wsZ0JBQU07QUFDTix1QkFBYSxNQUFNO0FBQUEsUUFDckI7QUFBQSxNQUNGO0FBRUEsaUJBQVcsT0FBTyw0REFBNEQ7QUFBQSxJQUNoRjtBQUVBLGFBQVMsbUJBQW1CLE9BQU8sWUFBWTtBQUM3QyxVQUFJLFdBQVcsTUFDWCxPQUNBLE9BQVcsTUFBTSxLQUNqQixTQUNBLFVBQVcsTUFBTSxRQUNqQixXQUNBLFlBQ0EsUUFDQSxnQkFDQSxXQUNBLGtCQUFrQixDQUFDLEdBQ25CLFNBQ0EsUUFDQSxXQUNBO0FBRUosV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsVUFBSSxPQUFPLElBQWE7QUFDdEIscUJBQWE7QUFDYixvQkFBWTtBQUNaLGtCQUFVLENBQUM7QUFBQSxNQUNiLFdBQVcsT0FBTyxLQUFhO0FBQzdCLHFCQUFhO0FBQ2Isb0JBQVk7QUFDWixrQkFBVSxDQUFDO0FBQUEsTUFDYixPQUFPO0FBQ0wsZUFBTztBQUFBLE1BQ1Q7QUFFQSxVQUFJLE1BQU0sV0FBVyxNQUFNO0FBQ3pCLGNBQU0sVUFBVSxNQUFNLE1BQU0sSUFBSTtBQUFBLE1BQ2xDO0FBRUEsV0FBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUU1QyxhQUFPLE9BQU8sR0FBRztBQUNmLDRCQUFvQixPQUFPLE1BQU0sVUFBVTtBQUUzQyxhQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUUxQyxZQUFJLE9BQU8sWUFBWTtBQUNyQixnQkFBTTtBQUNOLGdCQUFNLE1BQU07QUFDWixnQkFBTSxTQUFTO0FBQ2YsZ0JBQU0sT0FBTyxZQUFZLFlBQVk7QUFDckMsZ0JBQU0sU0FBUztBQUNmLGlCQUFPO0FBQUEsUUFDVCxXQUFXLENBQUMsVUFBVTtBQUNwQixxQkFBVyxPQUFPLDhDQUE4QztBQUFBLFFBQ2xFO0FBRUEsaUJBQVMsVUFBVSxZQUFZO0FBQy9CLGlCQUFTLGlCQUFpQjtBQUUxQixZQUFJLE9BQU8sSUFBYTtBQUN0QixzQkFBWSxNQUFNLE1BQU0sV0FBVyxNQUFNLFdBQVcsQ0FBQztBQUVyRCxjQUFJLGFBQWEsU0FBUyxHQUFHO0FBQzNCLHFCQUFTLGlCQUFpQjtBQUMxQixrQkFBTTtBQUNOLGdDQUFvQixPQUFPLE1BQU0sVUFBVTtBQUFBLFVBQzdDO0FBQUEsUUFDRjtBQUVBLGdCQUFRLE1BQU07QUFDZCxvQkFBWSxPQUFPLFlBQVksaUJBQWlCLE9BQU8sSUFBSTtBQUMzRCxpQkFBUyxNQUFNO0FBQ2Ysa0JBQVUsTUFBTTtBQUNoQiw0QkFBb0IsT0FBTyxNQUFNLFVBQVU7QUFFM0MsYUFBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsYUFBSyxrQkFBa0IsTUFBTSxTQUFTLFVBQVUsT0FBTyxJQUFhO0FBQ2xFLG1CQUFTO0FBQ1QsZUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUM1Qyw4QkFBb0IsT0FBTyxNQUFNLFVBQVU7QUFDM0Msc0JBQVksT0FBTyxZQUFZLGlCQUFpQixPQUFPLElBQUk7QUFDM0Qsc0JBQVksTUFBTTtBQUFBLFFBQ3BCO0FBRUEsWUFBSSxXQUFXO0FBQ2IsMkJBQWlCLE9BQU8sU0FBUyxpQkFBaUIsUUFBUSxTQUFTLFNBQVM7QUFBQSxRQUM5RSxXQUFXLFFBQVE7QUFDakIsa0JBQVEsS0FBSyxpQkFBaUIsT0FBTyxNQUFNLGlCQUFpQixRQUFRLFNBQVMsU0FBUyxDQUFDO0FBQUEsUUFDekYsT0FBTztBQUNMLGtCQUFRLEtBQUssT0FBTztBQUFBLFFBQ3RCO0FBRUEsNEJBQW9CLE9BQU8sTUFBTSxVQUFVO0FBRTNDLGFBQUssTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBRTFDLFlBQUksT0FBTyxJQUFhO0FBQ3RCLHFCQUFXO0FBQ1gsZUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFFBQzlDLE9BQU87QUFDTCxxQkFBVztBQUFBLFFBQ2I7QUFBQSxNQUNGO0FBRUEsaUJBQVcsT0FBTyx1REFBdUQ7QUFBQSxJQUMzRTtBQUVBLGFBQVMsZ0JBQWdCLE9BQU8sWUFBWTtBQUMxQyxVQUFJLGNBQ0EsU0FDQSxXQUFpQixlQUNqQixpQkFBaUIsT0FDakIsaUJBQWlCLE9BQ2pCLGFBQWlCLFlBQ2pCLGFBQWlCLEdBQ2pCLGlCQUFpQixPQUNqQixLQUNBO0FBRUosV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsVUFBSSxPQUFPLEtBQWE7QUFDdEIsa0JBQVU7QUFBQSxNQUNaLFdBQVcsT0FBTyxJQUFhO0FBQzdCLGtCQUFVO0FBQUEsTUFDWixPQUFPO0FBQ0wsZUFBTztBQUFBLE1BQ1Q7QUFFQSxZQUFNLE9BQU87QUFDYixZQUFNLFNBQVM7QUFFZixhQUFPLE9BQU8sR0FBRztBQUNmLGFBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFFNUMsWUFBSSxPQUFPLE1BQWUsT0FBTyxJQUFhO0FBQzVDLGNBQUksa0JBQWtCLFVBQVU7QUFDOUIsdUJBQVksT0FBTyxLQUFlLGdCQUFnQjtBQUFBLFVBQ3BELE9BQU87QUFDTCx1QkFBVyxPQUFPLHNDQUFzQztBQUFBLFVBQzFEO0FBQUEsUUFFRixZQUFZLE1BQU0sZ0JBQWdCLEVBQUUsTUFBTSxHQUFHO0FBQzNDLGNBQUksUUFBUSxHQUFHO0FBQ2IsdUJBQVcsT0FBTyw4RUFBOEU7QUFBQSxVQUNsRyxXQUFXLENBQUMsZ0JBQWdCO0FBQzFCLHlCQUFhLGFBQWEsTUFBTTtBQUNoQyw2QkFBaUI7QUFBQSxVQUNuQixPQUFPO0FBQ0wsdUJBQVcsT0FBTywyQ0FBMkM7QUFBQSxVQUMvRDtBQUFBLFFBRUYsT0FBTztBQUNMO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFFQSxVQUFJLGVBQWUsRUFBRSxHQUFHO0FBQ3RCLFdBQUc7QUFBRSxlQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBQUEsUUFBRyxTQUM3QyxlQUFlLEVBQUU7QUFFeEIsWUFBSSxPQUFPLElBQWE7QUFDdEIsYUFBRztBQUFFLGlCQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBQUEsVUFBRyxTQUM3QyxDQUFDLE9BQU8sRUFBRSxLQUFNLE9BQU87QUFBQSxRQUNoQztBQUFBLE1BQ0Y7QUFFQSxhQUFPLE9BQU8sR0FBRztBQUNmLHNCQUFjLEtBQUs7QUFDbkIsY0FBTSxhQUFhO0FBRW5CLGFBQUssTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBRTFDLGdCQUFRLENBQUMsa0JBQWtCLE1BQU0sYUFBYSxlQUN0QyxPQUFPLElBQWtCO0FBQy9CLGdCQUFNO0FBQ04sZUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFFBQzlDO0FBRUEsWUFBSSxDQUFDLGtCQUFrQixNQUFNLGFBQWEsWUFBWTtBQUNwRCx1QkFBYSxNQUFNO0FBQUEsUUFDckI7QUFFQSxZQUFJLE9BQU8sRUFBRSxHQUFHO0FBQ2Q7QUFDQTtBQUFBLFFBQ0Y7QUFHQSxZQUFJLE1BQU0sYUFBYSxZQUFZO0FBR2pDLGNBQUksYUFBYSxlQUFlO0FBQzlCLGtCQUFNLFVBQVUsT0FBTyxPQUFPLE1BQU0saUJBQWlCLElBQUksYUFBYSxVQUFVO0FBQUEsVUFDbEYsV0FBVyxhQUFhLGVBQWU7QUFDckMsZ0JBQUksZ0JBQWdCO0FBQ2xCLG9CQUFNLFVBQVU7QUFBQSxZQUNsQjtBQUFBLFVBQ0Y7QUFHQTtBQUFBLFFBQ0Y7QUFHQSxZQUFJLFNBQVM7QUFHWCxjQUFJLGVBQWUsRUFBRSxHQUFHO0FBQ3RCLDZCQUFpQjtBQUVqQixrQkFBTSxVQUFVLE9BQU8sT0FBTyxNQUFNLGlCQUFpQixJQUFJLGFBQWEsVUFBVTtBQUFBLFVBR2xGLFdBQVcsZ0JBQWdCO0FBQ3pCLDZCQUFpQjtBQUNqQixrQkFBTSxVQUFVLE9BQU8sT0FBTyxNQUFNLGFBQWEsQ0FBQztBQUFBLFVBR3BELFdBQVcsZUFBZSxHQUFHO0FBQzNCLGdCQUFJLGdCQUFnQjtBQUNsQixvQkFBTSxVQUFVO0FBQUEsWUFDbEI7QUFBQSxVQUdGLE9BQU87QUFDTCxrQkFBTSxVQUFVLE9BQU8sT0FBTyxNQUFNLFVBQVU7QUFBQSxVQUNoRDtBQUFBLFFBR0YsT0FBTztBQUVMLGdCQUFNLFVBQVUsT0FBTyxPQUFPLE1BQU0saUJBQWlCLElBQUksYUFBYSxVQUFVO0FBQUEsUUFDbEY7QUFFQSx5QkFBaUI7QUFDakIseUJBQWlCO0FBQ2pCLHFCQUFhO0FBQ2IsdUJBQWUsTUFBTTtBQUVyQixlQUFPLENBQUMsT0FBTyxFQUFFLEtBQU0sT0FBTyxHQUFJO0FBQ2hDLGVBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxRQUM5QztBQUVBLHVCQUFlLE9BQU8sY0FBYyxNQUFNLFVBQVUsS0FBSztBQUFBLE1BQzNEO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLGtCQUFrQixPQUFPLFlBQVk7QUFDNUMsVUFBSSxPQUNBLE9BQVksTUFBTSxLQUNsQixVQUFZLE1BQU0sUUFDbEIsVUFBWSxDQUFDLEdBQ2IsV0FDQSxXQUFZLE9BQ1o7QUFFSixVQUFJLE1BQU0sV0FBVyxNQUFNO0FBQ3pCLGNBQU0sVUFBVSxNQUFNLE1BQU0sSUFBSTtBQUFBLE1BQ2xDO0FBRUEsV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsYUFBTyxPQUFPLEdBQUc7QUFFZixZQUFJLE9BQU8sSUFBYTtBQUN0QjtBQUFBLFFBQ0Y7QUFFQSxvQkFBWSxNQUFNLE1BQU0sV0FBVyxNQUFNLFdBQVcsQ0FBQztBQUVyRCxZQUFJLENBQUMsYUFBYSxTQUFTLEdBQUc7QUFDNUI7QUFBQSxRQUNGO0FBRUEsbUJBQVc7QUFDWCxjQUFNO0FBRU4sWUFBSSxvQkFBb0IsT0FBTyxNQUFNLEVBQUUsR0FBRztBQUN4QyxjQUFJLE1BQU0sY0FBYyxZQUFZO0FBQ2xDLG9CQUFRLEtBQUssSUFBSTtBQUNqQixpQkFBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFDMUM7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUVBLGdCQUFRLE1BQU07QUFDZCxvQkFBWSxPQUFPLFlBQVksa0JBQWtCLE9BQU8sSUFBSTtBQUM1RCxnQkFBUSxLQUFLLE1BQU0sTUFBTTtBQUN6Qiw0QkFBb0IsT0FBTyxNQUFNLEVBQUU7QUFFbkMsYUFBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsYUFBSyxNQUFNLFNBQVMsU0FBUyxNQUFNLGFBQWEsZUFBZ0IsT0FBTyxHQUFJO0FBQ3pFLHFCQUFXLE9BQU8scUNBQXFDO0FBQUEsUUFDekQsV0FBVyxNQUFNLGFBQWEsWUFBWTtBQUN4QztBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBRUEsVUFBSSxVQUFVO0FBQ1osY0FBTSxNQUFNO0FBQ1osY0FBTSxTQUFTO0FBQ2YsY0FBTSxPQUFPO0FBQ2IsY0FBTSxTQUFTO0FBQ2YsZUFBTztBQUFBLE1BQ1Q7QUFDQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsaUJBQWlCLE9BQU8sWUFBWSxZQUFZO0FBQ3ZELFVBQUksV0FDQSxjQUNBLE9BQ0EsTUFDQSxPQUFnQixNQUFNLEtBQ3RCLFVBQWdCLE1BQU0sUUFDdEIsVUFBZ0IsQ0FBQyxHQUNqQixrQkFBa0IsQ0FBQyxHQUNuQixTQUFnQixNQUNoQixVQUFnQixNQUNoQixZQUFnQixNQUNoQixnQkFBZ0IsT0FDaEIsV0FBZ0IsT0FDaEI7QUFFSixVQUFJLE1BQU0sV0FBVyxNQUFNO0FBQ3pCLGNBQU0sVUFBVSxNQUFNLE1BQU0sSUFBSTtBQUFBLE1BQ2xDO0FBRUEsV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsYUFBTyxPQUFPLEdBQUc7QUFDZixvQkFBWSxNQUFNLE1BQU0sV0FBVyxNQUFNLFdBQVcsQ0FBQztBQUNyRCxnQkFBUSxNQUFNO0FBQ2QsZUFBTyxNQUFNO0FBTWIsYUFBSyxPQUFPLE1BQWUsT0FBTyxPQUFnQixhQUFhLFNBQVMsR0FBRztBQUV6RSxjQUFJLE9BQU8sSUFBYTtBQUN0QixnQkFBSSxlQUFlO0FBQ2pCLCtCQUFpQixPQUFPLFNBQVMsaUJBQWlCLFFBQVEsU0FBUyxJQUFJO0FBQ3ZFLHVCQUFTLFVBQVUsWUFBWTtBQUFBLFlBQ2pDO0FBRUEsdUJBQVc7QUFDWCw0QkFBZ0I7QUFDaEIsMkJBQWU7QUFBQSxVQUVqQixXQUFXLGVBQWU7QUFFeEIsNEJBQWdCO0FBQ2hCLDJCQUFlO0FBQUEsVUFFakIsT0FBTztBQUNMLHVCQUFXLE9BQU8sbUdBQW1HO0FBQUEsVUFDdkg7QUFFQSxnQkFBTSxZQUFZO0FBQ2xCLGVBQUs7QUFBQSxRQUtQLFdBQVcsWUFBWSxPQUFPLFlBQVksa0JBQWtCLE9BQU8sSUFBSSxHQUFHO0FBRXhFLGNBQUksTUFBTSxTQUFTLE9BQU87QUFDeEIsaUJBQUssTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBRTFDLG1CQUFPLGVBQWUsRUFBRSxHQUFHO0FBQ3pCLG1CQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBQUEsWUFDOUM7QUFFQSxnQkFBSSxPQUFPLElBQWE7QUFDdEIsbUJBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFFNUMsa0JBQUksQ0FBQyxhQUFhLEVBQUUsR0FBRztBQUNyQiwyQkFBVyxPQUFPLHlGQUF5RjtBQUFBLGNBQzdHO0FBRUEsa0JBQUksZUFBZTtBQUNqQixpQ0FBaUIsT0FBTyxTQUFTLGlCQUFpQixRQUFRLFNBQVMsSUFBSTtBQUN2RSx5QkFBUyxVQUFVLFlBQVk7QUFBQSxjQUNqQztBQUVBLHlCQUFXO0FBQ1gsOEJBQWdCO0FBQ2hCLDZCQUFlO0FBQ2YsdUJBQVMsTUFBTTtBQUNmLHdCQUFVLE1BQU07QUFBQSxZQUVsQixXQUFXLFVBQVU7QUFDbkIseUJBQVcsT0FBTywwREFBMEQ7QUFBQSxZQUU5RSxPQUFPO0FBQ0wsb0JBQU0sTUFBTTtBQUNaLG9CQUFNLFNBQVM7QUFDZixxQkFBTztBQUFBLFlBQ1Q7QUFBQSxVQUVGLFdBQVcsVUFBVTtBQUNuQix1QkFBVyxPQUFPLGdGQUFnRjtBQUFBLFVBRXBHLE9BQU87QUFDTCxrQkFBTSxNQUFNO0FBQ1osa0JBQU0sU0FBUztBQUNmLG1CQUFPO0FBQUEsVUFDVDtBQUFBLFFBRUYsT0FBTztBQUNMO0FBQUEsUUFDRjtBQUtBLFlBQUksTUFBTSxTQUFTLFNBQVMsTUFBTSxhQUFhLFlBQVk7QUFDekQsY0FBSSxZQUFZLE9BQU8sWUFBWSxtQkFBbUIsTUFBTSxZQUFZLEdBQUc7QUFDekUsZ0JBQUksZUFBZTtBQUNqQix3QkFBVSxNQUFNO0FBQUEsWUFDbEIsT0FBTztBQUNMLDBCQUFZLE1BQU07QUFBQSxZQUNwQjtBQUFBLFVBQ0Y7QUFFQSxjQUFJLENBQUMsZUFBZTtBQUNsQiw2QkFBaUIsT0FBTyxTQUFTLGlCQUFpQixRQUFRLFNBQVMsV0FBVyxPQUFPLElBQUk7QUFDekYscUJBQVMsVUFBVSxZQUFZO0FBQUEsVUFDakM7QUFFQSw4QkFBb0IsT0FBTyxNQUFNLEVBQUU7QUFDbkMsZUFBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFBQSxRQUM1QztBQUVBLFlBQUksTUFBTSxhQUFhLGNBQWUsT0FBTyxHQUFJO0FBQy9DLHFCQUFXLE9BQU8sb0NBQW9DO0FBQUEsUUFDeEQsV0FBVyxNQUFNLGFBQWEsWUFBWTtBQUN4QztBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBT0EsVUFBSSxlQUFlO0FBQ2pCLHlCQUFpQixPQUFPLFNBQVMsaUJBQWlCLFFBQVEsU0FBUyxJQUFJO0FBQUEsTUFDekU7QUFHQSxVQUFJLFVBQVU7QUFDWixjQUFNLE1BQU07QUFDWixjQUFNLFNBQVM7QUFDZixjQUFNLE9BQU87QUFDYixjQUFNLFNBQVM7QUFBQSxNQUNqQjtBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxnQkFBZ0IsT0FBTztBQUM5QixVQUFJLFdBQ0EsYUFBYSxPQUNiLFVBQWEsT0FDYixXQUNBLFNBQ0E7QUFFSixXQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUUxQyxVQUFJLE9BQU8sR0FBYSxRQUFPO0FBRS9CLFVBQUksTUFBTSxRQUFRLE1BQU07QUFDdEIsbUJBQVcsT0FBTywrQkFBK0I7QUFBQSxNQUNuRDtBQUVBLFdBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFFNUMsVUFBSSxPQUFPLElBQWE7QUFDdEIscUJBQWE7QUFDYixhQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBQUEsTUFFOUMsV0FBVyxPQUFPLElBQWE7QUFDN0Isa0JBQVU7QUFDVixvQkFBWTtBQUNaLGFBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxNQUU5QyxPQUFPO0FBQ0wsb0JBQVk7QUFBQSxNQUNkO0FBRUEsa0JBQVksTUFBTTtBQUVsQixVQUFJLFlBQVk7QUFDZCxXQUFHO0FBQUUsZUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFFBQUcsU0FDN0MsT0FBTyxLQUFLLE9BQU87QUFFMUIsWUFBSSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBQ2pDLG9CQUFVLE1BQU0sTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBQ3JELGVBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxRQUM5QyxPQUFPO0FBQ0wscUJBQVcsT0FBTyxvREFBb0Q7QUFBQSxRQUN4RTtBQUFBLE1BQ0YsT0FBTztBQUNMLGVBQU8sT0FBTyxLQUFLLENBQUMsYUFBYSxFQUFFLEdBQUc7QUFFcEMsY0FBSSxPQUFPLElBQWE7QUFDdEIsZ0JBQUksQ0FBQyxTQUFTO0FBQ1osMEJBQVksTUFBTSxNQUFNLE1BQU0sWUFBWSxHQUFHLE1BQU0sV0FBVyxDQUFDO0FBRS9ELGtCQUFJLENBQUMsbUJBQW1CLEtBQUssU0FBUyxHQUFHO0FBQ3ZDLDJCQUFXLE9BQU8saURBQWlEO0FBQUEsY0FDckU7QUFFQSx3QkFBVTtBQUNWLDBCQUFZLE1BQU0sV0FBVztBQUFBLFlBQy9CLE9BQU87QUFDTCx5QkFBVyxPQUFPLDZDQUE2QztBQUFBLFlBQ2pFO0FBQUEsVUFDRjtBQUVBLGVBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxRQUM5QztBQUVBLGtCQUFVLE1BQU0sTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBRXJELFlBQUksd0JBQXdCLEtBQUssT0FBTyxHQUFHO0FBQ3pDLHFCQUFXLE9BQU8scURBQXFEO0FBQUEsUUFDekU7QUFBQSxNQUNGO0FBRUEsVUFBSSxXQUFXLENBQUMsZ0JBQWdCLEtBQUssT0FBTyxHQUFHO0FBQzdDLG1CQUFXLE9BQU8sOENBQThDLE9BQU87QUFBQSxNQUN6RTtBQUVBLFVBQUksWUFBWTtBQUNkLGNBQU0sTUFBTTtBQUFBLE1BRWQsV0FBVyxnQkFBZ0IsS0FBSyxNQUFNLFFBQVEsU0FBUyxHQUFHO0FBQ3hELGNBQU0sTUFBTSxNQUFNLE9BQU8sU0FBUyxJQUFJO0FBQUEsTUFFeEMsV0FBVyxjQUFjLEtBQUs7QUFDNUIsY0FBTSxNQUFNLE1BQU07QUFBQSxNQUVwQixXQUFXLGNBQWMsTUFBTTtBQUM3QixjQUFNLE1BQU0sdUJBQXVCO0FBQUEsTUFFckMsT0FBTztBQUNMLG1CQUFXLE9BQU8sNEJBQTRCLFlBQVksR0FBRztBQUFBLE1BQy9EO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLG1CQUFtQixPQUFPO0FBQ2pDLFVBQUksV0FDQTtBQUVKLFdBQUssTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBRTFDLFVBQUksT0FBTyxHQUFhLFFBQU87QUFFL0IsVUFBSSxNQUFNLFdBQVcsTUFBTTtBQUN6QixtQkFBVyxPQUFPLG1DQUFtQztBQUFBLE1BQ3ZEO0FBRUEsV0FBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUM1QyxrQkFBWSxNQUFNO0FBRWxCLGFBQU8sT0FBTyxLQUFLLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxHQUFHO0FBQzlELGFBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxNQUM5QztBQUVBLFVBQUksTUFBTSxhQUFhLFdBQVc7QUFDaEMsbUJBQVcsT0FBTyw0REFBNEQ7QUFBQSxNQUNoRjtBQUVBLFlBQU0sU0FBUyxNQUFNLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUMxRCxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsVUFBVSxPQUFPO0FBQ3hCLFVBQUksV0FBVyxPQUNYO0FBRUosV0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVE7QUFFMUMsVUFBSSxPQUFPLEdBQWEsUUFBTztBQUUvQixXQUFLLE1BQU0sTUFBTSxXQUFXLEVBQUUsTUFBTSxRQUFRO0FBQzVDLGtCQUFZLE1BQU07QUFFbEIsYUFBTyxPQUFPLEtBQUssQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixFQUFFLEdBQUc7QUFDOUQsYUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLE1BQzlDO0FBRUEsVUFBSSxNQUFNLGFBQWEsV0FBVztBQUNoQyxtQkFBVyxPQUFPLDJEQUEyRDtBQUFBLE1BQy9FO0FBRUEsY0FBUSxNQUFNLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUVuRCxVQUFJLENBQUMsZ0JBQWdCLEtBQUssTUFBTSxXQUFXLEtBQUssR0FBRztBQUNqRCxtQkFBVyxPQUFPLHlCQUF5QixRQUFRLEdBQUc7QUFBQSxNQUN4RDtBQUVBLFlBQU0sU0FBUyxNQUFNLFVBQVUsS0FBSztBQUNwQywwQkFBb0IsT0FBTyxNQUFNLEVBQUU7QUFDbkMsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLFlBQVksT0FBTyxjQUFjLGFBQWEsYUFBYSxjQUFjO0FBQ2hGLFVBQUksa0JBQ0EsbUJBQ0EsdUJBQ0EsZUFBZSxHQUNmLFlBQWEsT0FDYixhQUFhLE9BQ2IsV0FDQSxjQUNBLE1BQ0EsWUFDQTtBQUVKLFVBQUksTUFBTSxhQUFhLE1BQU07QUFDM0IsY0FBTSxTQUFTLFFBQVEsS0FBSztBQUFBLE1BQzlCO0FBRUEsWUFBTSxNQUFTO0FBQ2YsWUFBTSxTQUFTO0FBQ2YsWUFBTSxPQUFTO0FBQ2YsWUFBTSxTQUFTO0FBRWYseUJBQW1CLG9CQUFvQix3QkFDckMsc0JBQXNCLGVBQ3RCLHFCQUFzQjtBQUV4QixVQUFJLGFBQWE7QUFDZixZQUFJLG9CQUFvQixPQUFPLE1BQU0sRUFBRSxHQUFHO0FBQ3hDLHNCQUFZO0FBRVosY0FBSSxNQUFNLGFBQWEsY0FBYztBQUNuQywyQkFBZTtBQUFBLFVBQ2pCLFdBQVcsTUFBTSxlQUFlLGNBQWM7QUFDNUMsMkJBQWU7QUFBQSxVQUNqQixXQUFXLE1BQU0sYUFBYSxjQUFjO0FBQzFDLDJCQUFlO0FBQUEsVUFDakI7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLFVBQUksaUJBQWlCLEdBQUc7QUFDdEIsZUFBTyxnQkFBZ0IsS0FBSyxLQUFLLG1CQUFtQixLQUFLLEdBQUc7QUFDMUQsY0FBSSxvQkFBb0IsT0FBTyxNQUFNLEVBQUUsR0FBRztBQUN4Qyx3QkFBWTtBQUNaLG9DQUF3QjtBQUV4QixnQkFBSSxNQUFNLGFBQWEsY0FBYztBQUNuQyw2QkFBZTtBQUFBLFlBQ2pCLFdBQVcsTUFBTSxlQUFlLGNBQWM7QUFDNUMsNkJBQWU7QUFBQSxZQUNqQixXQUFXLE1BQU0sYUFBYSxjQUFjO0FBQzFDLDZCQUFlO0FBQUEsWUFDakI7QUFBQSxVQUNGLE9BQU87QUFDTCxvQ0FBd0I7QUFBQSxVQUMxQjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBRUEsVUFBSSx1QkFBdUI7QUFDekIsZ0NBQXdCLGFBQWE7QUFBQSxNQUN2QztBQUVBLFVBQUksaUJBQWlCLEtBQUssc0JBQXNCLGFBQWE7QUFDM0QsWUFBSSxvQkFBb0IsZUFBZSxxQkFBcUIsYUFBYTtBQUN2RSx1QkFBYTtBQUFBLFFBQ2YsT0FBTztBQUNMLHVCQUFhLGVBQWU7QUFBQSxRQUM5QjtBQUVBLHNCQUFjLE1BQU0sV0FBVyxNQUFNO0FBRXJDLFlBQUksaUJBQWlCLEdBQUc7QUFDdEIsY0FBSSwwQkFDQyxrQkFBa0IsT0FBTyxXQUFXLEtBQ3BDLGlCQUFpQixPQUFPLGFBQWEsVUFBVSxNQUNoRCxtQkFBbUIsT0FBTyxVQUFVLEdBQUc7QUFDekMseUJBQWE7QUFBQSxVQUNmLE9BQU87QUFDTCxnQkFBSyxxQkFBcUIsZ0JBQWdCLE9BQU8sVUFBVSxLQUN2RCx1QkFBdUIsT0FBTyxVQUFVLEtBQ3hDLHVCQUF1QixPQUFPLFVBQVUsR0FBRztBQUM3QywyQkFBYTtBQUFBLFlBRWYsV0FBVyxVQUFVLEtBQUssR0FBRztBQUMzQiwyQkFBYTtBQUViLGtCQUFJLE1BQU0sUUFBUSxRQUFRLE1BQU0sV0FBVyxNQUFNO0FBQy9DLDJCQUFXLE9BQU8sMkNBQTJDO0FBQUEsY0FDL0Q7QUFBQSxZQUVGLFdBQVcsZ0JBQWdCLE9BQU8sWUFBWSxvQkFBb0IsV0FBVyxHQUFHO0FBQzlFLDJCQUFhO0FBRWIsa0JBQUksTUFBTSxRQUFRLE1BQU07QUFDdEIsc0JBQU0sTUFBTTtBQUFBLGNBQ2Q7QUFBQSxZQUNGO0FBRUEsZ0JBQUksTUFBTSxXQUFXLE1BQU07QUFDekIsb0JBQU0sVUFBVSxNQUFNLE1BQU0sSUFBSSxNQUFNO0FBQUEsWUFDeEM7QUFBQSxVQUNGO0FBQUEsUUFDRixXQUFXLGlCQUFpQixHQUFHO0FBRzdCLHVCQUFhLHlCQUF5QixrQkFBa0IsT0FBTyxXQUFXO0FBQUEsUUFDNUU7QUFBQSxNQUNGO0FBRUEsVUFBSSxNQUFNLFFBQVEsUUFBUSxNQUFNLFFBQVEsS0FBSztBQUMzQyxZQUFJLE1BQU0sUUFBUSxLQUFLO0FBT3JCLGNBQUksTUFBTSxXQUFXLFFBQVEsTUFBTSxTQUFTLFVBQVU7QUFDcEQsdUJBQVcsT0FBTyxzRUFBc0UsTUFBTSxPQUFPLEdBQUc7QUFBQSxVQUMxRztBQUVBLGVBQUssWUFBWSxHQUFHLGVBQWUsTUFBTSxjQUFjLFFBQVEsWUFBWSxjQUFjLGFBQWEsR0FBRztBQUN2RyxtQkFBTyxNQUFNLGNBQWMsU0FBUztBQUVwQyxnQkFBSSxLQUFLLFFBQVEsTUFBTSxNQUFNLEdBQUc7QUFDOUIsb0JBQU0sU0FBUyxLQUFLLFVBQVUsTUFBTSxNQUFNO0FBQzFDLG9CQUFNLE1BQU0sS0FBSztBQUNqQixrQkFBSSxNQUFNLFdBQVcsTUFBTTtBQUN6QixzQkFBTSxVQUFVLE1BQU0sTUFBTSxJQUFJLE1BQU07QUFBQSxjQUN4QztBQUNBO0FBQUEsWUFDRjtBQUFBLFVBQ0Y7QUFBQSxRQUNGLFdBQVcsZ0JBQWdCLEtBQUssTUFBTSxRQUFRLE1BQU0sUUFBUSxVQUFVLEdBQUcsTUFBTSxHQUFHLEdBQUc7QUFDbkYsaUJBQU8sTUFBTSxRQUFRLE1BQU0sUUFBUSxVQUFVLEVBQUUsTUFBTSxHQUFHO0FBRXhELGNBQUksTUFBTSxXQUFXLFFBQVEsS0FBSyxTQUFTLE1BQU0sTUFBTTtBQUNyRCx1QkFBVyxPQUFPLGtDQUFrQyxNQUFNLE1BQU0sMEJBQTBCLEtBQUssT0FBTyxhQUFhLE1BQU0sT0FBTyxHQUFHO0FBQUEsVUFDckk7QUFFQSxjQUFJLENBQUMsS0FBSyxRQUFRLE1BQU0sTUFBTSxHQUFHO0FBQy9CLHVCQUFXLE9BQU8sa0NBQWtDLE1BQU0sTUFBTSxnQkFBZ0I7QUFBQSxVQUNsRixPQUFPO0FBQ0wsa0JBQU0sU0FBUyxLQUFLLFVBQVUsTUFBTSxNQUFNO0FBQzFDLGdCQUFJLE1BQU0sV0FBVyxNQUFNO0FBQ3pCLG9CQUFNLFVBQVUsTUFBTSxNQUFNLElBQUksTUFBTTtBQUFBLFlBQ3hDO0FBQUEsVUFDRjtBQUFBLFFBQ0YsT0FBTztBQUNMLHFCQUFXLE9BQU8sbUJBQW1CLE1BQU0sTUFBTSxHQUFHO0FBQUEsUUFDdEQ7QUFBQSxNQUNGO0FBRUEsVUFBSSxNQUFNLGFBQWEsTUFBTTtBQUMzQixjQUFNLFNBQVMsU0FBUyxLQUFLO0FBQUEsTUFDL0I7QUFDQSxhQUFPLE1BQU0sUUFBUSxRQUFTLE1BQU0sV0FBVyxRQUFRO0FBQUEsSUFDekQ7QUFFQSxhQUFTLGFBQWEsT0FBTztBQUMzQixVQUFJLGdCQUFnQixNQUFNLFVBQ3RCLFdBQ0EsZUFDQSxlQUNBLGdCQUFnQixPQUNoQjtBQUVKLFlBQU0sVUFBVTtBQUNoQixZQUFNLGtCQUFrQixNQUFNO0FBQzlCLFlBQU0sU0FBUyxDQUFDO0FBQ2hCLFlBQU0sWUFBWSxDQUFDO0FBRW5CLGNBQVEsS0FBSyxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVEsT0FBTyxHQUFHO0FBQzFELDRCQUFvQixPQUFPLE1BQU0sRUFBRTtBQUVuQyxhQUFLLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUUxQyxZQUFJLE1BQU0sYUFBYSxLQUFLLE9BQU8sSUFBYTtBQUM5QztBQUFBLFFBQ0Y7QUFFQSx3QkFBZ0I7QUFDaEIsYUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUM1QyxvQkFBWSxNQUFNO0FBRWxCLGVBQU8sT0FBTyxLQUFLLENBQUMsYUFBYSxFQUFFLEdBQUc7QUFDcEMsZUFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFFBQzlDO0FBRUEsd0JBQWdCLE1BQU0sTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRO0FBQzNELHdCQUFnQixDQUFDO0FBRWpCLFlBQUksY0FBYyxTQUFTLEdBQUc7QUFDNUIscUJBQVcsT0FBTyw4REFBOEQ7QUFBQSxRQUNsRjtBQUVBLGVBQU8sT0FBTyxHQUFHO0FBQ2YsaUJBQU8sZUFBZSxFQUFFLEdBQUc7QUFDekIsaUJBQUssTUFBTSxNQUFNLFdBQVcsRUFBRSxNQUFNLFFBQVE7QUFBQSxVQUM5QztBQUVBLGNBQUksT0FBTyxJQUFhO0FBQ3RCLGVBQUc7QUFBRSxtQkFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFlBQUcsU0FDN0MsT0FBTyxLQUFLLENBQUMsT0FBTyxFQUFFO0FBQzdCO0FBQUEsVUFDRjtBQUVBLGNBQUksT0FBTyxFQUFFLEVBQUc7QUFFaEIsc0JBQVksTUFBTTtBQUVsQixpQkFBTyxPQUFPLEtBQUssQ0FBQyxhQUFhLEVBQUUsR0FBRztBQUNwQyxpQkFBSyxNQUFNLE1BQU0sV0FBVyxFQUFFLE1BQU0sUUFBUTtBQUFBLFVBQzlDO0FBRUEsd0JBQWMsS0FBSyxNQUFNLE1BQU0sTUFBTSxXQUFXLE1BQU0sUUFBUSxDQUFDO0FBQUEsUUFDakU7QUFFQSxZQUFJLE9BQU8sRUFBRyxlQUFjLEtBQUs7QUFFakMsWUFBSSxnQkFBZ0IsS0FBSyxtQkFBbUIsYUFBYSxHQUFHO0FBQzFELDRCQUFrQixhQUFhLEVBQUUsT0FBTyxlQUFlLGFBQWE7QUFBQSxRQUN0RSxPQUFPO0FBQ0wsdUJBQWEsT0FBTyxpQ0FBaUMsZ0JBQWdCLEdBQUc7QUFBQSxRQUMxRTtBQUFBLE1BQ0Y7QUFFQSwwQkFBb0IsT0FBTyxNQUFNLEVBQUU7QUFFbkMsVUFBSSxNQUFNLGVBQWUsS0FDckIsTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRLE1BQVUsTUFDL0MsTUFBTSxNQUFNLFdBQVcsTUFBTSxXQUFXLENBQUMsTUFBTSxNQUMvQyxNQUFNLE1BQU0sV0FBVyxNQUFNLFdBQVcsQ0FBQyxNQUFNLElBQWE7QUFDOUQsY0FBTSxZQUFZO0FBQ2xCLDRCQUFvQixPQUFPLE1BQU0sRUFBRTtBQUFBLE1BRXJDLFdBQVcsZUFBZTtBQUN4QixtQkFBVyxPQUFPLGlDQUFpQztBQUFBLE1BQ3JEO0FBRUEsa0JBQVksT0FBTyxNQUFNLGFBQWEsR0FBRyxtQkFBbUIsT0FBTyxJQUFJO0FBQ3ZFLDBCQUFvQixPQUFPLE1BQU0sRUFBRTtBQUVuQyxVQUFJLE1BQU0sbUJBQ04sOEJBQThCLEtBQUssTUFBTSxNQUFNLE1BQU0sZUFBZSxNQUFNLFFBQVEsQ0FBQyxHQUFHO0FBQ3hGLHFCQUFhLE9BQU8sa0RBQWtEO0FBQUEsTUFDeEU7QUFFQSxZQUFNLFVBQVUsS0FBSyxNQUFNLE1BQU07QUFFakMsVUFBSSxNQUFNLGFBQWEsTUFBTSxhQUFhLHNCQUFzQixLQUFLLEdBQUc7QUFFdEUsWUFBSSxNQUFNLE1BQU0sV0FBVyxNQUFNLFFBQVEsTUFBTSxJQUFhO0FBQzFELGdCQUFNLFlBQVk7QUFDbEIsOEJBQW9CLE9BQU8sTUFBTSxFQUFFO0FBQUEsUUFDckM7QUFDQTtBQUFBLE1BQ0Y7QUFFQSxVQUFJLE1BQU0sV0FBWSxNQUFNLFNBQVMsR0FBSTtBQUN2QyxtQkFBVyxPQUFPLHVEQUF1RDtBQUFBLE1BQzNFLE9BQU87QUFDTDtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBR0EsYUFBUyxjQUFjLE9BQU9BLFVBQVM7QUFDckMsY0FBUSxPQUFPLEtBQUs7QUFDcEIsTUFBQUEsV0FBVUEsWUFBVyxDQUFDO0FBRXRCLFVBQUksTUFBTSxXQUFXLEdBQUc7QUFHdEIsWUFBSSxNQUFNLFdBQVcsTUFBTSxTQUFTLENBQUMsTUFBTSxNQUN2QyxNQUFNLFdBQVcsTUFBTSxTQUFTLENBQUMsTUFBTSxJQUFjO0FBQ3ZELG1CQUFTO0FBQUEsUUFDWDtBQUdBLFlBQUksTUFBTSxXQUFXLENBQUMsTUFBTSxPQUFRO0FBQ2xDLGtCQUFRLE1BQU0sTUFBTSxDQUFDO0FBQUEsUUFDdkI7QUFBQSxNQUNGO0FBRUEsVUFBSSxRQUFRLElBQUksTUFBTSxPQUFPQSxRQUFPO0FBRXBDLFVBQUksVUFBVSxNQUFNLFFBQVEsSUFBSTtBQUVoQyxVQUFJLFlBQVksSUFBSTtBQUNsQixjQUFNLFdBQVc7QUFDakIsbUJBQVcsT0FBTyxtQ0FBbUM7QUFBQSxNQUN2RDtBQUdBLFlBQU0sU0FBUztBQUVmLGFBQU8sTUFBTSxNQUFNLFdBQVcsTUFBTSxRQUFRLE1BQU0sSUFBaUI7QUFDakUsY0FBTSxjQUFjO0FBQ3BCLGNBQU0sWUFBWTtBQUFBLE1BQ3BCO0FBRUEsYUFBTyxNQUFNLFdBQVksTUFBTSxTQUFTLEdBQUk7QUFDMUMscUJBQWEsS0FBSztBQUFBLE1BQ3BCO0FBRUEsYUFBTyxNQUFNO0FBQUEsSUFDZjtBQUdBLGFBQVMsUUFBUSxPQUFPLFVBQVVBLFVBQVM7QUFDekMsVUFBSSxhQUFhLFFBQVEsT0FBTyxhQUFhLFlBQVksT0FBT0EsYUFBWSxhQUFhO0FBQ3ZGLFFBQUFBLFdBQVU7QUFDVixtQkFBVztBQUFBLE1BQ2I7QUFFQSxVQUFJLFlBQVksY0FBYyxPQUFPQSxRQUFPO0FBRTVDLFVBQUksT0FBTyxhQUFhLFlBQVk7QUFDbEMsZUFBTztBQUFBLE1BQ1Q7QUFFQSxlQUFTLFFBQVEsR0FBRyxTQUFTLFVBQVUsUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBQ3pFLGlCQUFTLFVBQVUsS0FBSyxDQUFDO0FBQUEsTUFDM0I7QUFBQSxJQUNGO0FBR0EsYUFBUyxLQUFLLE9BQU9BLFVBQVM7QUFDNUIsVUFBSSxZQUFZLGNBQWMsT0FBT0EsUUFBTztBQUU1QyxVQUFJLFVBQVUsV0FBVyxHQUFHO0FBRTFCLGVBQU87QUFBQSxNQUNULFdBQVcsVUFBVSxXQUFXLEdBQUc7QUFDakMsZUFBTyxVQUFVLENBQUM7QUFBQSxNQUNwQjtBQUNBLFlBQU0sSUFBSSxjQUFjLDBEQUEwRDtBQUFBLElBQ3BGO0FBR0EsYUFBUyxZQUFZLE9BQU8sVUFBVUEsVUFBUztBQUM3QyxVQUFJLE9BQU8sYUFBYSxZQUFZLGFBQWEsUUFBUSxPQUFPQSxhQUFZLGFBQWE7QUFDdkYsUUFBQUEsV0FBVTtBQUNWLG1CQUFXO0FBQUEsTUFDYjtBQUVBLGFBQU8sUUFBUSxPQUFPLFVBQVUsT0FBTyxPQUFPLEVBQUUsUUFBUSxvQkFBb0IsR0FBR0EsUUFBTyxDQUFDO0FBQUEsSUFDekY7QUFHQSxhQUFTLFNBQVMsT0FBT0EsVUFBUztBQUNoQyxhQUFPLEtBQUssT0FBTyxPQUFPLE9BQU8sRUFBRSxRQUFRLG9CQUFvQixHQUFHQSxRQUFPLENBQUM7QUFBQSxJQUM1RTtBQUdBLElBQUFELFFBQU8sUUFBUSxVQUFjO0FBQzdCLElBQUFBLFFBQU8sUUFBUSxPQUFjO0FBQzdCLElBQUFBLFFBQU8sUUFBUSxjQUFjO0FBQzdCLElBQUFBLFFBQU8sUUFBUSxXQUFjO0FBQUE7QUFBQTs7O0FDM25EN0I7QUFBQSwrQ0FBQUUsVUFBQUMsU0FBQTtBQUFBO0FBSUEsUUFBSSxTQUFzQjtBQUMxQixRQUFJLGdCQUFzQjtBQUMxQixRQUFJLHNCQUFzQjtBQUMxQixRQUFJLHNCQUFzQjtBQUUxQixRQUFJLFlBQWtCLE9BQU8sVUFBVTtBQUN2QyxRQUFJLGtCQUFrQixPQUFPLFVBQVU7QUFFdkMsUUFBSSxXQUE0QjtBQUNoQyxRQUFJLGlCQUE0QjtBQUNoQyxRQUFJLHVCQUE0QjtBQUNoQyxRQUFJLGFBQTRCO0FBQ2hDLFFBQUksbUJBQTRCO0FBQ2hDLFFBQUksb0JBQTRCO0FBQ2hDLFFBQUksYUFBNEI7QUFDaEMsUUFBSSxlQUE0QjtBQUNoQyxRQUFJLGlCQUE0QjtBQUNoQyxRQUFJLG9CQUE0QjtBQUNoQyxRQUFJLGdCQUE0QjtBQUNoQyxRQUFJLGFBQTRCO0FBQ2hDLFFBQUksYUFBNEI7QUFDaEMsUUFBSSxhQUE0QjtBQUNoQyxRQUFJLGNBQTRCO0FBQ2hDLFFBQUksb0JBQTRCO0FBQ2hDLFFBQUksZ0JBQTRCO0FBQ2hDLFFBQUkscUJBQTRCO0FBQ2hDLFFBQUksMkJBQTRCO0FBQ2hDLFFBQUksNEJBQTRCO0FBQ2hDLFFBQUksb0JBQTRCO0FBQ2hDLFFBQUksMEJBQTRCO0FBQ2hDLFFBQUkscUJBQTRCO0FBQ2hDLFFBQUksMkJBQTRCO0FBRWhDLFFBQUksbUJBQW1CLENBQUM7QUFFeEIscUJBQWlCLENBQUksSUFBTTtBQUMzQixxQkFBaUIsQ0FBSSxJQUFNO0FBQzNCLHFCQUFpQixDQUFJLElBQU07QUFDM0IscUJBQWlCLENBQUksSUFBTTtBQUMzQixxQkFBaUIsRUFBSSxJQUFNO0FBQzNCLHFCQUFpQixFQUFJLElBQU07QUFDM0IscUJBQWlCLEVBQUksSUFBTTtBQUMzQixxQkFBaUIsRUFBSSxJQUFNO0FBQzNCLHFCQUFpQixFQUFJLElBQU07QUFDM0IscUJBQWlCLEVBQUksSUFBTTtBQUMzQixxQkFBaUIsRUFBSSxJQUFNO0FBQzNCLHFCQUFpQixHQUFJLElBQU07QUFDM0IscUJBQWlCLEdBQUksSUFBTTtBQUMzQixxQkFBaUIsSUFBTSxJQUFJO0FBQzNCLHFCQUFpQixJQUFNLElBQUk7QUFFM0IsUUFBSSw2QkFBNkI7QUFBQSxNQUMvQjtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTztBQUFBLE1BQU87QUFBQSxNQUFPO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMzQztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTztBQUFBLE1BQU87QUFBQSxJQUM1QztBQUVBLGFBQVMsZ0JBQWdCLFFBQVEsS0FBSztBQUNwQyxVQUFJLFFBQVEsTUFBTSxPQUFPLFFBQVEsS0FBSyxPQUFPO0FBRTdDLFVBQUksUUFBUSxLQUFNLFFBQU8sQ0FBQztBQUUxQixlQUFTLENBQUM7QUFDVixhQUFPLE9BQU8sS0FBSyxHQUFHO0FBRXRCLFdBQUssUUFBUSxHQUFHLFNBQVMsS0FBSyxRQUFRLFFBQVEsUUFBUSxTQUFTLEdBQUc7QUFDaEUsY0FBTSxLQUFLLEtBQUs7QUFDaEIsZ0JBQVEsT0FBTyxJQUFJLEdBQUcsQ0FBQztBQUV2QixZQUFJLElBQUksTUFBTSxHQUFHLENBQUMsTUFBTSxNQUFNO0FBQzVCLGdCQUFNLHVCQUF1QixJQUFJLE1BQU0sQ0FBQztBQUFBLFFBQzFDO0FBQ0EsZUFBTyxPQUFPLGdCQUFnQixVQUFVLEVBQUUsR0FBRztBQUU3QyxZQUFJLFFBQVEsZ0JBQWdCLEtBQUssS0FBSyxjQUFjLEtBQUssR0FBRztBQUMxRCxrQkFBUSxLQUFLLGFBQWEsS0FBSztBQUFBLFFBQ2pDO0FBRUEsZUFBTyxHQUFHLElBQUk7QUFBQSxNQUNoQjtBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsYUFBUyxVQUFVLFdBQVc7QUFDNUIsVUFBSSxRQUFRLFFBQVE7QUFFcEIsZUFBUyxVQUFVLFNBQVMsRUFBRSxFQUFFLFlBQVk7QUFFNUMsVUFBSSxhQUFhLEtBQU07QUFDckIsaUJBQVM7QUFDVCxpQkFBUztBQUFBLE1BQ1gsV0FBVyxhQUFhLE9BQVE7QUFDOUIsaUJBQVM7QUFDVCxpQkFBUztBQUFBLE1BQ1gsV0FBVyxhQUFhLFlBQVk7QUFDbEMsaUJBQVM7QUFDVCxpQkFBUztBQUFBLE1BQ1gsT0FBTztBQUNMLGNBQU0sSUFBSSxjQUFjLCtEQUErRDtBQUFBLE1BQ3pGO0FBRUEsYUFBTyxPQUFPLFNBQVMsT0FBTyxPQUFPLEtBQUssU0FBUyxPQUFPLE1BQU0sSUFBSTtBQUFBLElBQ3RFO0FBRUEsYUFBUyxNQUFNQyxVQUFTO0FBQ3RCLFdBQUssU0FBZ0JBLFNBQVEsUUFBUSxLQUFLO0FBQzFDLFdBQUssU0FBZ0IsS0FBSyxJQUFJLEdBQUlBLFNBQVEsUUFBUSxLQUFLLENBQUU7QUFDekQsV0FBSyxnQkFBZ0JBLFNBQVEsZUFBZSxLQUFLO0FBQ2pELFdBQUssY0FBZ0JBLFNBQVEsYUFBYSxLQUFLO0FBQy9DLFdBQUssWUFBaUIsT0FBTyxVQUFVQSxTQUFRLFdBQVcsQ0FBQyxJQUFJLEtBQUtBLFNBQVEsV0FBVztBQUN2RixXQUFLLFdBQWdCLGdCQUFnQixLQUFLLFFBQVFBLFNBQVEsUUFBUSxLQUFLLElBQUk7QUFDM0UsV0FBSyxXQUFnQkEsU0FBUSxVQUFVLEtBQUs7QUFDNUMsV0FBSyxZQUFnQkEsU0FBUSxXQUFXLEtBQUs7QUFDN0MsV0FBSyxTQUFnQkEsU0FBUSxRQUFRLEtBQUs7QUFDMUMsV0FBSyxlQUFnQkEsU0FBUSxjQUFjLEtBQUs7QUFDaEQsV0FBSyxlQUFnQkEsU0FBUSxjQUFjLEtBQUs7QUFFaEQsV0FBSyxnQkFBZ0IsS0FBSyxPQUFPO0FBQ2pDLFdBQUssZ0JBQWdCLEtBQUssT0FBTztBQUVqQyxXQUFLLE1BQU07QUFDWCxXQUFLLFNBQVM7QUFFZCxXQUFLLGFBQWEsQ0FBQztBQUNuQixXQUFLLGlCQUFpQjtBQUFBLElBQ3hCO0FBR0EsYUFBUyxhQUFhLFFBQVEsUUFBUTtBQUNwQyxVQUFJLE1BQU0sT0FBTyxPQUFPLEtBQUssTUFBTSxHQUMvQixXQUFXLEdBQ1gsT0FBTyxJQUNQLFNBQVMsSUFDVCxNQUNBLFNBQVMsT0FBTztBQUVwQixhQUFPLFdBQVcsUUFBUTtBQUN4QixlQUFPLE9BQU8sUUFBUSxNQUFNLFFBQVE7QUFDcEMsWUFBSSxTQUFTLElBQUk7QUFDZixpQkFBTyxPQUFPLE1BQU0sUUFBUTtBQUM1QixxQkFBVztBQUFBLFFBQ2IsT0FBTztBQUNMLGlCQUFPLE9BQU8sTUFBTSxVQUFVLE9BQU8sQ0FBQztBQUN0QyxxQkFBVyxPQUFPO0FBQUEsUUFDcEI7QUFFQSxZQUFJLEtBQUssVUFBVSxTQUFTLEtBQU0sV0FBVTtBQUU1QyxrQkFBVTtBQUFBLE1BQ1o7QUFFQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsaUJBQWlCLE9BQU8sT0FBTztBQUN0QyxhQUFPLE9BQU8sT0FBTyxPQUFPLEtBQUssTUFBTSxTQUFTLEtBQUs7QUFBQSxJQUN2RDtBQUVBLGFBQVMsc0JBQXNCLE9BQU9DLE1BQUs7QUFDekMsVUFBSSxPQUFPLFFBQVE7QUFFbkIsV0FBSyxRQUFRLEdBQUcsU0FBUyxNQUFNLGNBQWMsUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBQy9FLGVBQU8sTUFBTSxjQUFjLEtBQUs7QUFFaEMsWUFBSSxLQUFLLFFBQVFBLElBQUcsR0FBRztBQUNyQixpQkFBTztBQUFBLFFBQ1Q7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFHQSxhQUFTLGFBQWEsR0FBRztBQUN2QixhQUFPLE1BQU0sY0FBYyxNQUFNO0FBQUEsSUFDbkM7QUFNQSxhQUFTLFlBQVksR0FBRztBQUN0QixhQUFTLE1BQVcsS0FBSyxLQUFLLE9BQ3JCLE9BQVcsS0FBSyxLQUFLLFNBQWEsTUFBTSxRQUFVLE1BQU0sUUFDeEQsU0FBVyxLQUFLLEtBQUssU0FBYSxNQUFNLFNBQ3hDLFNBQVcsS0FBSyxLQUFLO0FBQUEsSUFDaEM7QUFRQSxhQUFTLFNBQVMsR0FBRztBQUNuQixhQUFPLFlBQVksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBRW5DLE1BQU0sU0FFTixNQUFNLHdCQUNOLE1BQU07QUFBQSxJQUNiO0FBR0EsYUFBUyxZQUFZLEdBQUcsTUFBTTtBQUc1QixhQUFPLFlBQVksQ0FBQyxLQUFLLE1BQU0sU0FFMUIsTUFBTSxjQUNOLE1BQU0sNEJBQ04sTUFBTSw2QkFDTixNQUFNLDJCQUNOLE1BQU0sNEJBR04sTUFBTSxlQUNKLE1BQU0sY0FBZ0IsUUFBUSxTQUFTLElBQUk7QUFBQSxJQUNwRDtBQUdBLGFBQVMsaUJBQWlCLEdBQUc7QUFHM0IsYUFBTyxZQUFZLENBQUMsS0FBSyxNQUFNLFNBQzFCLENBQUMsYUFBYSxDQUFDLEtBR2YsTUFBTSxjQUNOLE1BQU0saUJBQ04sTUFBTSxjQUNOLE1BQU0sY0FDTixNQUFNLDRCQUNOLE1BQU0sNkJBQ04sTUFBTSwyQkFDTixNQUFNLDRCQUVOLE1BQU0sY0FDTixNQUFNLGtCQUNOLE1BQU0saUJBQ04sTUFBTSxvQkFDTixNQUFNLHNCQUNOLE1BQU0sZUFDTixNQUFNLHFCQUNOLE1BQU0scUJBQ04sTUFBTSxxQkFFTixNQUFNLGdCQUNOLE1BQU0sc0JBQ04sTUFBTTtBQUFBLElBQ2I7QUFHQSxhQUFTLG9CQUFvQixRQUFRO0FBQ25DLFVBQUksaUJBQWlCO0FBQ3JCLGFBQU8sZUFBZSxLQUFLLE1BQU07QUFBQSxJQUNuQztBQUVBLFFBQUksY0FBZ0I7QUFBcEIsUUFDSSxlQUFnQjtBQURwQixRQUVJLGdCQUFnQjtBQUZwQixRQUdJLGVBQWdCO0FBSHBCLFFBSUksZUFBZ0I7QUFTcEIsYUFBUyxrQkFBa0IsUUFBUSxnQkFBZ0IsZ0JBQWdCLFdBQVcsbUJBQW1CO0FBQy9GLFVBQUk7QUFDSixVQUFJLE1BQU07QUFDVixVQUFJLGVBQWU7QUFDbkIsVUFBSSxrQkFBa0I7QUFDdEIsVUFBSSxtQkFBbUIsY0FBYztBQUNyQyxVQUFJLG9CQUFvQjtBQUN4QixVQUFJLFFBQVEsaUJBQWlCLE9BQU8sV0FBVyxDQUFDLENBQUMsS0FDdEMsQ0FBQyxhQUFhLE9BQU8sV0FBVyxPQUFPLFNBQVMsQ0FBQyxDQUFDO0FBRTdELFVBQUksZ0JBQWdCO0FBR2xCLGFBQUssSUFBSSxHQUFHLElBQUksT0FBTyxRQUFRLEtBQUs7QUFDbEMsaUJBQU8sT0FBTyxXQUFXLENBQUM7QUFDMUIsY0FBSSxDQUFDLFlBQVksSUFBSSxHQUFHO0FBQ3RCLG1CQUFPO0FBQUEsVUFDVDtBQUNBLHNCQUFZLElBQUksSUFBSSxPQUFPLFdBQVcsSUFBSSxDQUFDLElBQUk7QUFDL0Msa0JBQVEsU0FBUyxZQUFZLE1BQU0sU0FBUztBQUFBLFFBQzlDO0FBQUEsTUFDRixPQUFPO0FBRUwsYUFBSyxJQUFJLEdBQUcsSUFBSSxPQUFPLFFBQVEsS0FBSztBQUNsQyxpQkFBTyxPQUFPLFdBQVcsQ0FBQztBQUMxQixjQUFJLFNBQVMsZ0JBQWdCO0FBQzNCLDJCQUFlO0FBRWYsZ0JBQUksa0JBQWtCO0FBQ3BCLGdDQUFrQjtBQUFBLGNBRWYsSUFBSSxvQkFBb0IsSUFBSSxhQUM1QixPQUFPLG9CQUFvQixDQUFDLE1BQU07QUFDckMsa0NBQW9CO0FBQUEsWUFDdEI7QUFBQSxVQUNGLFdBQVcsQ0FBQyxZQUFZLElBQUksR0FBRztBQUM3QixtQkFBTztBQUFBLFVBQ1Q7QUFDQSxzQkFBWSxJQUFJLElBQUksT0FBTyxXQUFXLElBQUksQ0FBQyxJQUFJO0FBQy9DLGtCQUFRLFNBQVMsWUFBWSxNQUFNLFNBQVM7QUFBQSxRQUM5QztBQUVBLDBCQUFrQixtQkFBb0IscUJBQ25DLElBQUksb0JBQW9CLElBQUksYUFDNUIsT0FBTyxvQkFBb0IsQ0FBQyxNQUFNO0FBQUEsTUFDdkM7QUFJQSxVQUFJLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCO0FBR3JDLGVBQU8sU0FBUyxDQUFDLGtCQUFrQixNQUFNLElBQ3JDLGNBQWM7QUFBQSxNQUNwQjtBQUVBLFVBQUksaUJBQWlCLEtBQUssb0JBQW9CLE1BQU0sR0FBRztBQUNyRCxlQUFPO0FBQUEsTUFDVDtBQUdBLGFBQU8sa0JBQWtCLGVBQWU7QUFBQSxJQUMxQztBQVFBLGFBQVMsWUFBWSxPQUFPLFFBQVEsT0FBTyxPQUFPO0FBQ2hELFlBQU0sUUFBUSxXQUFZO0FBQ3hCLFlBQUksT0FBTyxXQUFXLEdBQUc7QUFDdkIsaUJBQU87QUFBQSxRQUNUO0FBQ0EsWUFBSSxDQUFDLE1BQU0sZ0JBQ1AsMkJBQTJCLFFBQVEsTUFBTSxNQUFNLElBQUk7QUFDckQsaUJBQU8sTUFBTSxTQUFTO0FBQUEsUUFDeEI7QUFFQSxZQUFJLFNBQVMsTUFBTSxTQUFTLEtBQUssSUFBSSxHQUFHLEtBQUs7QUFRN0MsWUFBSSxZQUFZLE1BQU0sY0FBYyxLQUNoQyxLQUFLLEtBQUssSUFBSSxLQUFLLElBQUksTUFBTSxXQUFXLEVBQUUsR0FBRyxNQUFNLFlBQVksTUFBTTtBQUd6RSxZQUFJLGlCQUFpQixTQUVmLE1BQU0sWUFBWSxNQUFNLFNBQVMsTUFBTTtBQUM3QyxpQkFBUyxjQUFjQyxTQUFRO0FBQzdCLGlCQUFPLHNCQUFzQixPQUFPQSxPQUFNO0FBQUEsUUFDNUM7QUFFQSxnQkFBUSxrQkFBa0IsUUFBUSxnQkFBZ0IsTUFBTSxRQUFRLFdBQVcsYUFBYSxHQUFHO0FBQUEsVUFDekYsS0FBSztBQUNILG1CQUFPO0FBQUEsVUFDVCxLQUFLO0FBQ0gsbUJBQU8sTUFBTSxPQUFPLFFBQVEsTUFBTSxJQUFJLElBQUk7QUFBQSxVQUM1QyxLQUFLO0FBQ0gsbUJBQU8sTUFBTSxZQUFZLFFBQVEsTUFBTSxNQUFNLElBQ3pDLGtCQUFrQixhQUFhLFFBQVEsTUFBTSxDQUFDO0FBQUEsVUFDcEQsS0FBSztBQUNILG1CQUFPLE1BQU0sWUFBWSxRQUFRLE1BQU0sTUFBTSxJQUN6QyxrQkFBa0IsYUFBYSxXQUFXLFFBQVEsU0FBUyxHQUFHLE1BQU0sQ0FBQztBQUFBLFVBQzNFLEtBQUs7QUFDSCxtQkFBTyxNQUFNLGFBQWEsUUFBUSxTQUFTLElBQUk7QUFBQSxVQUNqRDtBQUNFLGtCQUFNLElBQUksY0FBYyx3Q0FBd0M7QUFBQSxRQUNwRTtBQUFBLE1BQ0YsR0FBRTtBQUFBLElBQ0o7QUFHQSxhQUFTLFlBQVksUUFBUSxnQkFBZ0I7QUFDM0MsVUFBSSxrQkFBa0Isb0JBQW9CLE1BQU0sSUFBSSxPQUFPLGNBQWMsSUFBSTtBQUc3RSxVQUFJLE9BQWdCLE9BQU8sT0FBTyxTQUFTLENBQUMsTUFBTTtBQUNsRCxVQUFJLE9BQU8sU0FBUyxPQUFPLE9BQU8sU0FBUyxDQUFDLE1BQU0sUUFBUSxXQUFXO0FBQ3JFLFVBQUksUUFBUSxPQUFPLE1BQU8sT0FBTyxLQUFLO0FBRXRDLGFBQU8sa0JBQWtCLFFBQVE7QUFBQSxJQUNuQztBQUdBLGFBQVMsa0JBQWtCLFFBQVE7QUFDakMsYUFBTyxPQUFPLE9BQU8sU0FBUyxDQUFDLE1BQU0sT0FBTyxPQUFPLE1BQU0sR0FBRyxFQUFFLElBQUk7QUFBQSxJQUNwRTtBQUlBLGFBQVMsV0FBVyxRQUFRLE9BQU87QUFLakMsVUFBSSxTQUFTO0FBR2IsVUFBSSxVQUFVLFdBQVk7QUFDeEIsWUFBSSxTQUFTLE9BQU8sUUFBUSxJQUFJO0FBQ2hDLGlCQUFTLFdBQVcsS0FBSyxTQUFTLE9BQU87QUFDekMsZUFBTyxZQUFZO0FBQ25CLGVBQU8sU0FBUyxPQUFPLE1BQU0sR0FBRyxNQUFNLEdBQUcsS0FBSztBQUFBLE1BQ2hELEdBQUU7QUFFRixVQUFJLG1CQUFtQixPQUFPLENBQUMsTUFBTSxRQUFRLE9BQU8sQ0FBQyxNQUFNO0FBQzNELFVBQUk7QUFHSixVQUFJO0FBQ0osYUFBUSxRQUFRLE9BQU8sS0FBSyxNQUFNLEdBQUk7QUFDcEMsWUFBSSxTQUFTLE1BQU0sQ0FBQyxHQUFHLE9BQU8sTUFBTSxDQUFDO0FBQ3JDLHVCQUFnQixLQUFLLENBQUMsTUFBTTtBQUM1QixrQkFBVSxVQUNMLENBQUMsb0JBQW9CLENBQUMsZ0JBQWdCLFNBQVMsS0FDOUMsT0FBTyxNQUNULFNBQVMsTUFBTSxLQUFLO0FBQ3hCLDJCQUFtQjtBQUFBLE1BQ3JCO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFNQSxhQUFTLFNBQVMsTUFBTSxPQUFPO0FBQzdCLFVBQUksU0FBUyxNQUFNLEtBQUssQ0FBQyxNQUFNLElBQUssUUFBTztBQUczQyxVQUFJLFVBQVU7QUFDZCxVQUFJO0FBRUosVUFBSSxRQUFRLEdBQUcsS0FBSyxPQUFPLEdBQUcsT0FBTztBQUNyQyxVQUFJLFNBQVM7QUFNYixhQUFRLFFBQVEsUUFBUSxLQUFLLElBQUksR0FBSTtBQUNuQyxlQUFPLE1BQU07QUFFYixZQUFJLE9BQU8sUUFBUSxPQUFPO0FBQ3hCLGdCQUFPLE9BQU8sUUFBUyxPQUFPO0FBQzlCLG9CQUFVLE9BQU8sS0FBSyxNQUFNLE9BQU8sR0FBRztBQUV0QyxrQkFBUSxNQUFNO0FBQUEsUUFDaEI7QUFDQSxlQUFPO0FBQUEsTUFDVDtBQUlBLGdCQUFVO0FBRVYsVUFBSSxLQUFLLFNBQVMsUUFBUSxTQUFTLE9BQU8sT0FBTztBQUMvQyxrQkFBVSxLQUFLLE1BQU0sT0FBTyxJQUFJLElBQUksT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQUEsTUFDaEUsT0FBTztBQUNMLGtCQUFVLEtBQUssTUFBTSxLQUFLO0FBQUEsTUFDNUI7QUFFQSxhQUFPLE9BQU8sTUFBTSxDQUFDO0FBQUEsSUFDdkI7QUFHQSxhQUFTLGFBQWEsUUFBUTtBQUM1QixVQUFJLFNBQVM7QUFDYixVQUFJLE1BQU07QUFDVixVQUFJO0FBRUosZUFBUyxJQUFJLEdBQUcsSUFBSSxPQUFPLFFBQVEsS0FBSztBQUN0QyxlQUFPLE9BQU8sV0FBVyxDQUFDO0FBRTFCLFlBQUksUUFBUSxTQUFVLFFBQVEsT0FBNEI7QUFDeEQscUJBQVcsT0FBTyxXQUFXLElBQUksQ0FBQztBQUNsQyxjQUFJLFlBQVksU0FBVSxZQUFZLE9BQTJCO0FBRS9ELHNCQUFVLFdBQVcsT0FBTyxTQUFVLE9BQVEsV0FBVyxRQUFTLEtBQU87QUFFekU7QUFBSztBQUFBLFVBQ1A7QUFBQSxRQUNGO0FBQ0Esb0JBQVksaUJBQWlCLElBQUk7QUFDakMsa0JBQVUsQ0FBQyxhQUFhLFlBQVksSUFBSSxJQUNwQyxPQUFPLENBQUMsSUFDUixhQUFhLFVBQVUsSUFBSTtBQUFBLE1BQ2pDO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLGtCQUFrQixPQUFPLE9BQU8sUUFBUTtBQUMvQyxVQUFJLFVBQVUsSUFDVixPQUFVLE1BQU0sS0FDaEIsT0FDQTtBQUVKLFdBQUssUUFBUSxHQUFHLFNBQVMsT0FBTyxRQUFRLFFBQVEsUUFBUSxTQUFTLEdBQUc7QUFFbEUsWUFBSSxVQUFVLE9BQU8sT0FBTyxPQUFPLEtBQUssR0FBRyxPQUFPLEtBQUssR0FBRztBQUN4RCxjQUFJLFVBQVUsRUFBRyxZQUFXLE9BQU8sQ0FBQyxNQUFNLGVBQWUsTUFBTTtBQUMvRCxxQkFBVyxNQUFNO0FBQUEsUUFDbkI7QUFBQSxNQUNGO0FBRUEsWUFBTSxNQUFNO0FBQ1osWUFBTSxPQUFPLE1BQU0sVUFBVTtBQUFBLElBQy9CO0FBRUEsYUFBUyxtQkFBbUIsT0FBTyxPQUFPLFFBQVEsU0FBUztBQUN6RCxVQUFJLFVBQVUsSUFDVixPQUFVLE1BQU0sS0FDaEIsT0FDQTtBQUVKLFdBQUssUUFBUSxHQUFHLFNBQVMsT0FBTyxRQUFRLFFBQVEsUUFBUSxTQUFTLEdBQUc7QUFFbEUsWUFBSSxVQUFVLE9BQU8sUUFBUSxHQUFHLE9BQU8sS0FBSyxHQUFHLE1BQU0sSUFBSSxHQUFHO0FBQzFELGNBQUksQ0FBQyxXQUFXLFVBQVUsR0FBRztBQUMzQix1QkFBVyxpQkFBaUIsT0FBTyxLQUFLO0FBQUEsVUFDMUM7QUFFQSxjQUFJLE1BQU0sUUFBUSxtQkFBbUIsTUFBTSxLQUFLLFdBQVcsQ0FBQyxHQUFHO0FBQzdELHVCQUFXO0FBQUEsVUFDYixPQUFPO0FBQ0wsdUJBQVc7QUFBQSxVQUNiO0FBRUEscUJBQVcsTUFBTTtBQUFBLFFBQ25CO0FBQUEsTUFDRjtBQUVBLFlBQU0sTUFBTTtBQUNaLFlBQU0sT0FBTyxXQUFXO0FBQUEsSUFDMUI7QUFFQSxhQUFTLGlCQUFpQixPQUFPLE9BQU8sUUFBUTtBQUM5QyxVQUFJLFVBQWdCLElBQ2hCLE9BQWdCLE1BQU0sS0FDdEIsZ0JBQWdCLE9BQU8sS0FBSyxNQUFNLEdBQ2xDLE9BQ0EsUUFDQSxXQUNBLGFBQ0E7QUFFSixXQUFLLFFBQVEsR0FBRyxTQUFTLGNBQWMsUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBRXpFLHFCQUFhO0FBQ2IsWUFBSSxVQUFVLEVBQUcsZUFBYztBQUUvQixZQUFJLE1BQU0sYUFBYyxlQUFjO0FBRXRDLG9CQUFZLGNBQWMsS0FBSztBQUMvQixzQkFBYyxPQUFPLFNBQVM7QUFFOUIsWUFBSSxDQUFDLFVBQVUsT0FBTyxPQUFPLFdBQVcsT0FBTyxLQUFLLEdBQUc7QUFDckQ7QUFBQSxRQUNGO0FBRUEsWUFBSSxNQUFNLEtBQUssU0FBUyxLQUFNLGVBQWM7QUFFNUMsc0JBQWMsTUFBTSxRQUFRLE1BQU0sZUFBZSxNQUFNLE1BQU0sT0FBTyxNQUFNLGVBQWUsS0FBSztBQUU5RixZQUFJLENBQUMsVUFBVSxPQUFPLE9BQU8sYUFBYSxPQUFPLEtBQUssR0FBRztBQUN2RDtBQUFBLFFBQ0Y7QUFFQSxzQkFBYyxNQUFNO0FBR3BCLG1CQUFXO0FBQUEsTUFDYjtBQUVBLFlBQU0sTUFBTTtBQUNaLFlBQU0sT0FBTyxNQUFNLFVBQVU7QUFBQSxJQUMvQjtBQUVBLGFBQVMsa0JBQWtCLE9BQU8sT0FBTyxRQUFRLFNBQVM7QUFDeEQsVUFBSSxVQUFnQixJQUNoQixPQUFnQixNQUFNLEtBQ3RCLGdCQUFnQixPQUFPLEtBQUssTUFBTSxHQUNsQyxPQUNBLFFBQ0EsV0FDQSxhQUNBLGNBQ0E7QUFHSixVQUFJLE1BQU0sYUFBYSxNQUFNO0FBRTNCLHNCQUFjLEtBQUs7QUFBQSxNQUNyQixXQUFXLE9BQU8sTUFBTSxhQUFhLFlBQVk7QUFFL0Msc0JBQWMsS0FBSyxNQUFNLFFBQVE7QUFBQSxNQUNuQyxXQUFXLE1BQU0sVUFBVTtBQUV6QixjQUFNLElBQUksY0FBYywwQ0FBMEM7QUFBQSxNQUNwRTtBQUVBLFdBQUssUUFBUSxHQUFHLFNBQVMsY0FBYyxRQUFRLFFBQVEsUUFBUSxTQUFTLEdBQUc7QUFDekUscUJBQWE7QUFFYixZQUFJLENBQUMsV0FBVyxVQUFVLEdBQUc7QUFDM0Isd0JBQWMsaUJBQWlCLE9BQU8sS0FBSztBQUFBLFFBQzdDO0FBRUEsb0JBQVksY0FBYyxLQUFLO0FBQy9CLHNCQUFjLE9BQU8sU0FBUztBQUU5QixZQUFJLENBQUMsVUFBVSxPQUFPLFFBQVEsR0FBRyxXQUFXLE1BQU0sTUFBTSxJQUFJLEdBQUc7QUFDN0Q7QUFBQSxRQUNGO0FBRUEsdUJBQWdCLE1BQU0sUUFBUSxRQUFRLE1BQU0sUUFBUSxPQUNwQyxNQUFNLFFBQVEsTUFBTSxLQUFLLFNBQVM7QUFFbEQsWUFBSSxjQUFjO0FBQ2hCLGNBQUksTUFBTSxRQUFRLG1CQUFtQixNQUFNLEtBQUssV0FBVyxDQUFDLEdBQUc7QUFDN0QsMEJBQWM7QUFBQSxVQUNoQixPQUFPO0FBQ0wsMEJBQWM7QUFBQSxVQUNoQjtBQUFBLFFBQ0Y7QUFFQSxzQkFBYyxNQUFNO0FBRXBCLFlBQUksY0FBYztBQUNoQix3QkFBYyxpQkFBaUIsT0FBTyxLQUFLO0FBQUEsUUFDN0M7QUFFQSxZQUFJLENBQUMsVUFBVSxPQUFPLFFBQVEsR0FBRyxhQUFhLE1BQU0sWUFBWSxHQUFHO0FBQ2pFO0FBQUEsUUFDRjtBQUVBLFlBQUksTUFBTSxRQUFRLG1CQUFtQixNQUFNLEtBQUssV0FBVyxDQUFDLEdBQUc7QUFDN0Qsd0JBQWM7QUFBQSxRQUNoQixPQUFPO0FBQ0wsd0JBQWM7QUFBQSxRQUNoQjtBQUVBLHNCQUFjLE1BQU07QUFHcEIsbUJBQVc7QUFBQSxNQUNiO0FBRUEsWUFBTSxNQUFNO0FBQ1osWUFBTSxPQUFPLFdBQVc7QUFBQSxJQUMxQjtBQUVBLGFBQVMsV0FBVyxPQUFPLFFBQVEsVUFBVTtBQUMzQyxVQUFJLFNBQVMsVUFBVSxPQUFPLFFBQVEsTUFBTTtBQUU1QyxpQkFBVyxXQUFXLE1BQU0sZ0JBQWdCLE1BQU07QUFFbEQsV0FBSyxRQUFRLEdBQUcsU0FBUyxTQUFTLFFBQVEsUUFBUSxRQUFRLFNBQVMsR0FBRztBQUNwRSxlQUFPLFNBQVMsS0FBSztBQUVyQixhQUFLLEtBQUssY0FBZSxLQUFLLGVBQ3pCLENBQUMsS0FBSyxjQUFnQixPQUFPLFdBQVcsWUFBYyxrQkFBa0IsS0FBSyxnQkFDN0UsQ0FBQyxLQUFLLGFBQWMsS0FBSyxVQUFVLE1BQU0sSUFBSTtBQUVoRCxnQkFBTSxNQUFNLFdBQVcsS0FBSyxNQUFNO0FBRWxDLGNBQUksS0FBSyxXQUFXO0FBQ2xCLG9CQUFRLE1BQU0sU0FBUyxLQUFLLEdBQUcsS0FBSyxLQUFLO0FBRXpDLGdCQUFJLFVBQVUsS0FBSyxLQUFLLFNBQVMsTUFBTSxxQkFBcUI7QUFDMUQsd0JBQVUsS0FBSyxVQUFVLFFBQVEsS0FBSztBQUFBLFlBQ3hDLFdBQVcsZ0JBQWdCLEtBQUssS0FBSyxXQUFXLEtBQUssR0FBRztBQUN0RCx3QkFBVSxLQUFLLFVBQVUsS0FBSyxFQUFFLFFBQVEsS0FBSztBQUFBLFlBQy9DLE9BQU87QUFDTCxvQkFBTSxJQUFJLGNBQWMsT0FBTyxLQUFLLE1BQU0saUNBQWlDLFFBQVEsU0FBUztBQUFBLFlBQzlGO0FBRUEsa0JBQU0sT0FBTztBQUFBLFVBQ2Y7QUFFQSxpQkFBTztBQUFBLFFBQ1Q7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFLQSxhQUFTLFVBQVUsT0FBTyxPQUFPLFFBQVEsT0FBTyxTQUFTLE9BQU87QUFDOUQsWUFBTSxNQUFNO0FBQ1osWUFBTSxPQUFPO0FBRWIsVUFBSSxDQUFDLFdBQVcsT0FBTyxRQUFRLEtBQUssR0FBRztBQUNyQyxtQkFBVyxPQUFPLFFBQVEsSUFBSTtBQUFBLE1BQ2hDO0FBRUEsVUFBSSxPQUFPLFVBQVUsS0FBSyxNQUFNLElBQUk7QUFFcEMsVUFBSSxPQUFPO0FBQ1QsZ0JBQVMsTUFBTSxZQUFZLEtBQUssTUFBTSxZQUFZO0FBQUEsTUFDcEQ7QUFFQSxVQUFJLGdCQUFnQixTQUFTLHFCQUFxQixTQUFTLGtCQUN2RCxnQkFDQTtBQUVKLFVBQUksZUFBZTtBQUNqQix5QkFBaUIsTUFBTSxXQUFXLFFBQVEsTUFBTTtBQUNoRCxvQkFBWSxtQkFBbUI7QUFBQSxNQUNqQztBQUVBLFVBQUssTUFBTSxRQUFRLFFBQVEsTUFBTSxRQUFRLE9BQVEsYUFBYyxNQUFNLFdBQVcsS0FBSyxRQUFRLEdBQUk7QUFDL0Ysa0JBQVU7QUFBQSxNQUNaO0FBRUEsVUFBSSxhQUFhLE1BQU0sZUFBZSxjQUFjLEdBQUc7QUFDckQsY0FBTSxPQUFPLFVBQVU7QUFBQSxNQUN6QixPQUFPO0FBQ0wsWUFBSSxpQkFBaUIsYUFBYSxDQUFDLE1BQU0sZUFBZSxjQUFjLEdBQUc7QUFDdkUsZ0JBQU0sZUFBZSxjQUFjLElBQUk7QUFBQSxRQUN6QztBQUNBLFlBQUksU0FBUyxtQkFBbUI7QUFDOUIsY0FBSSxTQUFVLE9BQU8sS0FBSyxNQUFNLElBQUksRUFBRSxXQUFXLEdBQUk7QUFDbkQsOEJBQWtCLE9BQU8sT0FBTyxNQUFNLE1BQU0sT0FBTztBQUNuRCxnQkFBSSxXQUFXO0FBQ2Isb0JBQU0sT0FBTyxVQUFVLGlCQUFpQixNQUFNO0FBQUEsWUFDaEQ7QUFBQSxVQUNGLE9BQU87QUFDTCw2QkFBaUIsT0FBTyxPQUFPLE1BQU0sSUFBSTtBQUN6QyxnQkFBSSxXQUFXO0FBQ2Isb0JBQU0sT0FBTyxVQUFVLGlCQUFpQixNQUFNLE1BQU07QUFBQSxZQUN0RDtBQUFBLFVBQ0Y7QUFBQSxRQUNGLFdBQVcsU0FBUyxrQkFBa0I7QUFDcEMsY0FBSSxhQUFjLE1BQU0saUJBQWtCLFFBQVEsSUFBTSxRQUFRLElBQUk7QUFDcEUsY0FBSSxTQUFVLE1BQU0sS0FBSyxXQUFXLEdBQUk7QUFDdEMsK0JBQW1CLE9BQU8sWUFBWSxNQUFNLE1BQU0sT0FBTztBQUN6RCxnQkFBSSxXQUFXO0FBQ2Isb0JBQU0sT0FBTyxVQUFVLGlCQUFpQixNQUFNO0FBQUEsWUFDaEQ7QUFBQSxVQUNGLE9BQU87QUFDTCw4QkFBa0IsT0FBTyxZQUFZLE1BQU0sSUFBSTtBQUMvQyxnQkFBSSxXQUFXO0FBQ2Isb0JBQU0sT0FBTyxVQUFVLGlCQUFpQixNQUFNLE1BQU07QUFBQSxZQUN0RDtBQUFBLFVBQ0Y7QUFBQSxRQUNGLFdBQVcsU0FBUyxtQkFBbUI7QUFDckMsY0FBSSxNQUFNLFFBQVEsS0FBSztBQUNyQix3QkFBWSxPQUFPLE1BQU0sTUFBTSxPQUFPLEtBQUs7QUFBQSxVQUM3QztBQUFBLFFBQ0YsT0FBTztBQUNMLGNBQUksTUFBTSxZQUFhLFFBQU87QUFDOUIsZ0JBQU0sSUFBSSxjQUFjLDRDQUE0QyxJQUFJO0FBQUEsUUFDMUU7QUFFQSxZQUFJLE1BQU0sUUFBUSxRQUFRLE1BQU0sUUFBUSxLQUFLO0FBQzNDLGdCQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sT0FBTyxNQUFNO0FBQUEsUUFDL0M7QUFBQSxNQUNGO0FBRUEsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLHVCQUF1QixRQUFRLE9BQU87QUFDN0MsVUFBSSxVQUFVLENBQUMsR0FDWCxvQkFBb0IsQ0FBQyxHQUNyQixPQUNBO0FBRUosa0JBQVksUUFBUSxTQUFTLGlCQUFpQjtBQUU5QyxXQUFLLFFBQVEsR0FBRyxTQUFTLGtCQUFrQixRQUFRLFFBQVEsUUFBUSxTQUFTLEdBQUc7QUFDN0UsY0FBTSxXQUFXLEtBQUssUUFBUSxrQkFBa0IsS0FBSyxDQUFDLENBQUM7QUFBQSxNQUN6RDtBQUNBLFlBQU0saUJBQWlCLElBQUksTUFBTSxNQUFNO0FBQUEsSUFDekM7QUFFQSxhQUFTLFlBQVksUUFBUSxTQUFTLG1CQUFtQjtBQUN2RCxVQUFJLGVBQ0EsT0FDQTtBQUVKLFVBQUksV0FBVyxRQUFRLE9BQU8sV0FBVyxVQUFVO0FBQ2pELGdCQUFRLFFBQVEsUUFBUSxNQUFNO0FBQzlCLFlBQUksVUFBVSxJQUFJO0FBQ2hCLGNBQUksa0JBQWtCLFFBQVEsS0FBSyxNQUFNLElBQUk7QUFDM0MsOEJBQWtCLEtBQUssS0FBSztBQUFBLFVBQzlCO0FBQUEsUUFDRixPQUFPO0FBQ0wsa0JBQVEsS0FBSyxNQUFNO0FBRW5CLGNBQUksTUFBTSxRQUFRLE1BQU0sR0FBRztBQUN6QixpQkFBSyxRQUFRLEdBQUcsU0FBUyxPQUFPLFFBQVEsUUFBUSxRQUFRLFNBQVMsR0FBRztBQUNsRSwwQkFBWSxPQUFPLEtBQUssR0FBRyxTQUFTLGlCQUFpQjtBQUFBLFlBQ3ZEO0FBQUEsVUFDRixPQUFPO0FBQ0wsNEJBQWdCLE9BQU8sS0FBSyxNQUFNO0FBRWxDLGlCQUFLLFFBQVEsR0FBRyxTQUFTLGNBQWMsUUFBUSxRQUFRLFFBQVEsU0FBUyxHQUFHO0FBQ3pFLDBCQUFZLE9BQU8sY0FBYyxLQUFLLENBQUMsR0FBRyxTQUFTLGlCQUFpQjtBQUFBLFlBQ3RFO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLGFBQVMsS0FBSyxPQUFPRixVQUFTO0FBQzVCLE1BQUFBLFdBQVVBLFlBQVcsQ0FBQztBQUV0QixVQUFJLFFBQVEsSUFBSSxNQUFNQSxRQUFPO0FBRTdCLFVBQUksQ0FBQyxNQUFNLE9BQVEsd0JBQXVCLE9BQU8sS0FBSztBQUV0RCxVQUFJLFVBQVUsT0FBTyxHQUFHLE9BQU8sTUFBTSxJQUFJLEVBQUcsUUFBTyxNQUFNLE9BQU87QUFFaEUsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLFNBQVMsT0FBT0EsVUFBUztBQUNoQyxhQUFPLEtBQUssT0FBTyxPQUFPLE9BQU8sRUFBRSxRQUFRLG9CQUFvQixHQUFHQSxRQUFPLENBQUM7QUFBQSxJQUM1RTtBQUVBLElBQUFELFFBQU8sUUFBUSxPQUFXO0FBQzFCLElBQUFBLFFBQU8sUUFBUSxXQUFXO0FBQUE7QUFBQTs7O0FDajFCMUI7QUFBQSx3Q0FBQUksVUFBQUMsU0FBQTtBQUFBO0FBR0EsUUFBSSxTQUFTO0FBQ2IsUUFBSSxTQUFTO0FBR2IsYUFBUyxXQUFXLE1BQU07QUFDeEIsYUFBTyxXQUFZO0FBQ2pCLGNBQU0sSUFBSSxNQUFNLGNBQWMsT0FBTyxvQ0FBb0M7QUFBQSxNQUMzRTtBQUFBLElBQ0Y7QUFHQSxJQUFBQSxRQUFPLFFBQVEsT0FBc0I7QUFDckMsSUFBQUEsUUFBTyxRQUFRLFNBQXNCO0FBQ3JDLElBQUFBLFFBQU8sUUFBUSxrQkFBc0I7QUFDckMsSUFBQUEsUUFBTyxRQUFRLGNBQXNCO0FBQ3JDLElBQUFBLFFBQU8sUUFBUSxjQUFzQjtBQUNyQyxJQUFBQSxRQUFPLFFBQVEsc0JBQXNCO0FBQ3JDLElBQUFBLFFBQU8sUUFBUSxzQkFBc0I7QUFDckMsSUFBQUEsUUFBTyxRQUFRLE9BQXNCLE9BQU87QUFDNUMsSUFBQUEsUUFBTyxRQUFRLFVBQXNCLE9BQU87QUFDNUMsSUFBQUEsUUFBTyxRQUFRLFdBQXNCLE9BQU87QUFDNUMsSUFBQUEsUUFBTyxRQUFRLGNBQXNCLE9BQU87QUFDNUMsSUFBQUEsUUFBTyxRQUFRLE9BQXNCLE9BQU87QUFDNUMsSUFBQUEsUUFBTyxRQUFRLFdBQXNCLE9BQU87QUFDNUMsSUFBQUEsUUFBTyxRQUFRLGdCQUFzQjtBQUdyQyxJQUFBQSxRQUFPLFFBQVEsaUJBQWlCO0FBQ2hDLElBQUFBLFFBQU8sUUFBUSxjQUFpQjtBQUNoQyxJQUFBQSxRQUFPLFFBQVEsaUJBQWlCO0FBR2hDLElBQUFBLFFBQU8sUUFBUSxPQUFpQixXQUFXLE1BQU07QUFDakQsSUFBQUEsUUFBTyxRQUFRLFFBQWlCLFdBQVcsT0FBTztBQUNsRCxJQUFBQSxRQUFPLFFBQVEsVUFBaUIsV0FBVyxTQUFTO0FBQ3BELElBQUFBLFFBQU8sUUFBUSxpQkFBaUIsV0FBVyxnQkFBZ0I7QUFBQTtBQUFBOzs7QUN0QzNELElBQUFDLG1CQUFBO0FBQUEsa0NBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUdBLFFBQUlDLFFBQU87QUFHWCxJQUFBRCxRQUFPLFVBQVVDO0FBQUE7QUFBQTs7O0FDTmpCO0FBQUE7QUFBQTtBQUVBLFFBQU0sT0FBTztBQU1iLFFBQU0sVUFBVSxVQUFVLE9BQU87QUFNakMsWUFBUSxPQUFPO0FBQUEsTUFDYixPQUFPLEtBQUssU0FBUyxLQUFLLElBQUk7QUFBQSxNQUM5QixXQUFXLEtBQUssU0FBUyxLQUFLLElBQUk7QUFBQSxJQUNwQztBQU1BLFlBQVEsT0FBTztBQUFBLE1BQ2IsT0FBTyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQUEsTUFDM0IsV0FBVyxTQUFTLEtBQUtDLFVBQVM7QUFDaEMsY0FBTSxPQUFPLE9BQU8sT0FBTyxFQUFDLFVBQVUsTUFBTSxPQUFPLEVBQUMsR0FBR0EsUUFBTztBQUM5RCxlQUFPLEtBQUssVUFBVSxLQUFLLEtBQUssVUFBVSxLQUFLLEtBQUs7QUFBQSxNQUN0RDtBQUFBLElBQ0Y7QUFNQSxZQUFRLGFBQWE7QUFBQSxNQUNuQixPQUFPLFNBQVMsTUFBTSxLQUFLLFNBQVMsTUFBTTtBQUV4QyxZQUFJO0FBQ0YsY0FBSSxTQUFTLE9BQU87QUFDbEIsa0JBQU0sMkJBQTJCLElBQUksS0FBSyxJQUFJO0FBQUEsVUFDaEQ7QUFDQSxpQkFBTyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQUEsUUFDdkIsU0FBUyxLQUFLO0FBQ1osY0FBSSxTQUFTLFNBQVMsMkJBQTJCLEtBQUssSUFBSSxPQUFPLEdBQUc7QUFDbEUsbUJBQU8sTUFBTSxLQUFLLFNBQVMsS0FBSztBQUFBLFVBQ2xDO0FBQ0EsZ0JBQU0sSUFBSSxZQUFZLEdBQUc7QUFBQSxRQUMzQjtBQUFBLE1BQ0Y7QUFBQSxNQUNBLFdBQVcsV0FBVztBQUNwQixjQUFNLElBQUksTUFBTSwwQ0FBMEM7QUFBQSxNQUM1RDtBQUFBLElBQ0Y7QUFBQTtBQUFBOzs7QUNyREE7QUFBQSwyQ0FBQUMsVUFBQUMsU0FBQTtBQUFBO0FBU0EsSUFBQUEsUUFBTyxVQUFVLFNBQVNDLE1BQUs7QUFDN0IsVUFBSSxPQUFPQSxTQUFRLFlBQVlBLEtBQUksT0FBTyxDQUFDLE1BQU0sVUFBVTtBQUN6RCxlQUFPQSxLQUFJLE1BQU0sQ0FBQztBQUFBLE1BQ3BCO0FBQ0EsYUFBT0E7QUFBQSxJQUNUO0FBQUE7QUFBQTs7O0FDZEE7QUFBQSwwQ0FBQUMsVUFBQTtBQUFBO0FBRUEsUUFBTSxXQUFXO0FBQ2pCLFFBQU0sU0FBUztBQUVmLElBQUFBLFNBQVEsU0FBUyxTQUFTLEtBQUssS0FBSyxLQUFLO0FBQ3ZDLGNBQVEsZUFBZSxLQUFLLEtBQUs7QUFBQSxRQUMvQixZQUFZO0FBQUEsUUFDWixjQUFjO0FBQUEsUUFDZCxVQUFVO0FBQUEsUUFDVixPQUFPO0FBQUEsTUFDVCxDQUFDO0FBQUEsSUFDSDtBQU1BLElBQUFBLFNBQVEsV0FBVyxTQUFTLEtBQUs7QUFDL0IsYUFBTyxPQUFPLEdBQUcsTUFBTTtBQUFBLElBQ3pCO0FBTUEsSUFBQUEsU0FBUSxXQUFXLFNBQVMsS0FBSztBQUMvQixhQUFPLE9BQU8sR0FBRyxNQUFNO0FBQUEsSUFDekI7QUFNQSxJQUFBQSxTQUFRLFdBQVcsU0FBUyxPQUFPO0FBQ2pDLGFBQU8sT0FBTyxVQUFVLFdBQVcsT0FBTyxLQUFLLEtBQUssSUFBSTtBQUFBLElBQzFEO0FBTUEsSUFBQUEsU0FBUSxXQUFXLFNBQVMsT0FBTztBQUNqQyxVQUFJQSxTQUFRLFNBQVMsS0FBSyxFQUFHLFFBQU8sU0FBUyxPQUFPLEtBQUssQ0FBQztBQUMxRCxVQUFJLE9BQU8sVUFBVSxVQUFVO0FBQzdCLGNBQU0sSUFBSSxVQUFVLHlDQUF5QztBQUFBLE1BQy9EO0FBQ0EsYUFBTyxTQUFTLEtBQUs7QUFBQSxJQUN2QjtBQU1BLElBQUFBLFNBQVEsV0FBVyxTQUFTLEtBQUs7QUFDL0IsYUFBTyxNQUFPLE1BQU0sUUFBUSxHQUFHLElBQUksTUFBTSxDQUFDLEdBQUcsSUFBSyxDQUFDO0FBQUEsSUFDckQ7QUFNQSxJQUFBQSxTQUFRLGFBQWEsU0FBU0MsTUFBSyxRQUFRLEtBQUs7QUFDOUMsVUFBSSxPQUFPLFFBQVEsU0FBVSxPQUFNLE9BQU87QUFDMUMsYUFBT0EsS0FBSSxNQUFNLEdBQUcsR0FBRyxNQUFNO0FBQUEsSUFDL0I7QUFBQTtBQUFBOzs7QUNqRUE7QUFBQSw2Q0FBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBTUMsV0FBVTtBQUNoQixRQUFNLFFBQVE7QUFFZCxJQUFBRCxRQUFPLFVBQVUsU0FBU0UsVUFBUztBQUNqQyxZQUFNLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBR0EsUUFBTztBQUd0QyxXQUFLLGFBQWEsTUFBTSxTQUFTLEtBQUssVUFBVSxLQUFLLGNBQWMsS0FBSztBQUN4RSxVQUFJLEtBQUssV0FBVyxXQUFXLEdBQUc7QUFDaEMsYUFBSyxXQUFXLEtBQUssS0FBSyxXQUFXLENBQUMsQ0FBQztBQUFBLE1BQ3pDO0FBRUEsV0FBSyxZQUFZLEtBQUssWUFBWSxLQUFLLFFBQVEsUUFBUSxZQUFZO0FBQ25FLFdBQUssVUFBVSxPQUFPLE9BQU8sQ0FBQyxHQUFHRCxVQUFTLEtBQUssU0FBUyxLQUFLLE9BQU87QUFDcEUsYUFBTztBQUFBLElBQ1Q7QUFBQTtBQUFBOzs7QUNqQkE7QUFBQSwyQ0FBQUUsVUFBQUMsU0FBQTtBQUFBO0FBRUEsSUFBQUEsUUFBTyxVQUFVLFNBQVMsTUFBTUMsVUFBUztBQUN2QyxVQUFJLFNBQVNBLFNBQVEsUUFBUSxJQUFJLEtBQUtBLFNBQVEsUUFBUSxPQUFPLElBQUksQ0FBQztBQUNsRSxVQUFJLE9BQU8sV0FBVyxhQUFhO0FBQ2pDLGNBQU0sSUFBSSxNQUFNLHlCQUF5QixPQUFPLHFCQUFxQjtBQUFBLE1BQ3ZFO0FBQ0EsVUFBSSxPQUFPLFdBQVcsWUFBWTtBQUNoQyxpQkFBUyxFQUFFLE9BQU8sT0FBTztBQUFBLE1BQzNCO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLE9BQU8sTUFBTTtBQUNwQixjQUFRLEtBQUssWUFBWSxHQUFHO0FBQUEsUUFDMUIsS0FBSztBQUFBLFFBQ0wsS0FBSztBQUNILGlCQUFPO0FBQUEsUUFDVCxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQ0gsaUJBQU87QUFBQSxRQUNULEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFDSCxpQkFBTztBQUFBLFFBQ1QsU0FBUztBQUNQLGlCQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUE7QUFBQTs7O0FDN0JBO0FBQUEsOENBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQU0sU0FBUztBQUNmLFFBQU0sWUFBWTtBQUNsQixRQUFNLFdBQVc7QUFFakIsSUFBQUEsUUFBTyxVQUFVLFNBQVMsTUFBTSxNQUFNQyxVQUFTO0FBQzdDLFVBQUksUUFBUSxRQUFRQSxZQUFXLE1BQU07QUFDbkMsZ0JBQVEsT0FBTyxJQUFJLEdBQUc7QUFBQSxVQUNwQixLQUFLO0FBQ0gsbUJBQU8sS0FBSztBQUNaLFlBQUFBLFdBQVUsQ0FBQztBQUNYO0FBQUEsVUFDRixLQUFLO0FBQ0gsbUJBQU87QUFBQSxVQUNULFNBQVM7QUFDUCxrQkFBTSxJQUFJLFVBQVUsd0NBQXdDO0FBQUEsVUFDOUQ7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLFlBQU1DLE9BQU0sS0FBSztBQUNqQixZQUFNLE9BQU8sU0FBU0QsUUFBTztBQUM3QixVQUFJLFFBQVEsTUFBTTtBQUNoQixZQUFJLENBQUMsS0FBSyxLQUFNLFFBQU87QUFDdkIsZUFBTyxLQUFLO0FBQUEsTUFDZDtBQUVBLFlBQU0sV0FBVyxLQUFLLFlBQVksS0FBSztBQUN2QyxZQUFNLFNBQVMsVUFBVSxVQUFVLElBQUk7QUFDdkMsVUFBSSxPQUFPLE9BQU8sY0FBYyxZQUFZO0FBQzFDLGNBQU0sSUFBSSxVQUFVLGVBQWUsV0FBVyw4QkFBOEI7QUFBQSxNQUM5RTtBQUVBLGFBQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxLQUFLLE1BQU0sSUFBSTtBQUN4QyxZQUFNLE9BQU8sS0FBSyxXQUFXLENBQUM7QUFDOUIsWUFBTSxRQUFRLEtBQUssV0FBVyxDQUFDO0FBQy9CLFlBQU1FLFVBQVMsT0FBTyxVQUFVLE1BQU1GLFFBQU8sRUFBRSxLQUFLO0FBQ3BELFVBQUksTUFBTTtBQUVWLFVBQUlFLFlBQVcsTUFBTTtBQUNuQixjQUFNLFFBQVEsSUFBSSxJQUFJLFFBQVFBLE9BQU0sSUFBSSxRQUFRLEtBQUs7QUFBQSxNQUN2RDtBQUVBLFVBQUksT0FBTyxLQUFLLFlBQVksWUFBWSxLQUFLLFlBQVksSUFBSTtBQUMzRCxZQUFJRCxLQUFJLFFBQVEsS0FBSyxRQUFRLEtBQUssQ0FBQyxNQUFNLElBQUk7QUFDM0MsaUJBQU8sUUFBUSxLQUFLLE9BQU8sSUFBSSxRQUFRLEtBQUs7QUFBQSxRQUM5QztBQUFBLE1BQ0Y7QUFFQSxhQUFPLE1BQU0sUUFBUUEsSUFBRztBQUFBLElBQzFCO0FBRUEsYUFBUyxRQUFRQSxNQUFLO0FBQ3BCLGFBQU9BLEtBQUksTUFBTSxFQUFFLE1BQU0sT0FBT0EsT0FBTSxPQUFPQTtBQUFBLElBQy9DO0FBQUE7QUFBQTs7O0FDdkRBO0FBQUEsNENBQUFFLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQU0sV0FBVztBQUVqQixJQUFBQSxRQUFPLFVBQVUsU0FBUyxNQUFNQyxVQUFTO0FBQ3ZDLFlBQU0sT0FBTyxTQUFTQSxRQUFPO0FBRTdCLFVBQUksS0FBSyxRQUFRLE1BQU07QUFDckIsYUFBSyxPQUFPLENBQUM7QUFBQSxNQUNmO0FBRUEsVUFBSSxPQUFPLEtBQUssWUFBWSxZQUFZO0FBQ3RDLGVBQU8sS0FBSyxRQUFRLE1BQU0sSUFBSTtBQUFBLE1BQ2hDO0FBRUEsWUFBTSxNQUFNLEtBQUssS0FBSyxxQkFBcUIsS0FBSztBQUNoRCxVQUFJLE9BQU8sU0FBUyxLQUFLLFlBQVksU0FBUyxLQUFLLFdBQVcsT0FBTztBQUNuRSxlQUFPO0FBQUEsTUFDVDtBQUVBLFlBQU0sWUFBWSxPQUFPLEtBQUssWUFBWSxXQUN0QyxLQUFLLFVBQ0osT0FBTyxLQUFLLFdBQVcsQ0FBQztBQUc3QixZQUFNLE1BQU0sS0FBSyxRQUFRLFFBQVEsU0FBUztBQUMxQyxVQUFJLFFBQVEsSUFBSTtBQUNkLGFBQUssVUFBVSxLQUFLLFFBQVEsTUFBTSxHQUFHLEdBQUc7QUFBQSxNQUMxQztBQUVBLGFBQU87QUFBQSxJQUNUO0FBQUE7QUFBQTs7O0FDL0JBO0FBQUEsNENBQUFDLFVBQUFDLFNBQUE7QUFBQTtBQUVBLFFBQU0sU0FBUztBQUNmLFFBQU0sWUFBWTtBQUNsQixRQUFNLFFBQVE7QUFPZCxJQUFBQSxRQUFPLFVBQVUsU0FBUyxNQUFNO0FBQzlCLFVBQUksT0FBTyxJQUFJLE1BQU0sVUFBVTtBQUM3QixlQUFPLEVBQUUsU0FBUyxLQUFLO0FBQUEsTUFDekI7QUFFQSxVQUFJLE9BQU8sS0FBSyxJQUFJLE1BQU0sVUFBVTtBQUNsQyxhQUFLLE9BQU8sQ0FBQztBQUFBLE1BQ2Y7QUFJQSxVQUFJLEtBQUssWUFBWSxLQUFLLFdBQVcsTUFBTTtBQUN6QyxhQUFLLFVBQVUsS0FBSztBQUFBLE1BQ3RCO0FBR0EsWUFBTSxPQUFPLE1BQU0sUUFBUSxNQUFNLFNBQVMsS0FBSyxPQUFPLENBQUM7QUFDdkQsWUFBTSxPQUFPLE1BQU0sWUFBWSxLQUFLLFlBQVksRUFBRTtBQUNsRCxZQUFNLE9BQU8sTUFBTSxVQUFVLEtBQUssVUFBVSxFQUFFO0FBQzlDLFlBQU0sT0FBTyxNQUFNLGFBQWEsU0FBUyxNQUFNQyxVQUFTO0FBQ3RELFlBQUlBLFlBQVdBLFNBQVEsVUFBVTtBQUMvQixlQUFLLFdBQVdBLFNBQVE7QUFBQSxRQUMxQjtBQUNBLGVBQU8sVUFBVSxNQUFNLE1BQU1BLFFBQU87QUFBQSxNQUN0QyxDQUFDO0FBR0QsV0FBSyxVQUFVLE1BQU0sU0FBUyxLQUFLLE9BQU87QUFDMUMsV0FBSyxVQUFVO0FBQ2YsV0FBSyxVQUFVO0FBQ2YsYUFBTztBQUFBLElBQ1Q7QUFBQTtBQUFBOzs7QUMxQ0E7QUFBQSwwQ0FBQUMsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBTSxZQUFZO0FBQ2xCLFFBQU0sV0FBVztBQUVqQixJQUFBQSxRQUFPLFVBQVUsU0FBUyxVQUFVQyxNQUFLQyxVQUFTO0FBQ2hELFlBQU0sT0FBTyxTQUFTQSxRQUFPO0FBQzdCLFlBQU0sU0FBUyxVQUFVLFVBQVUsSUFBSTtBQUN2QyxVQUFJLE9BQU8sT0FBTyxVQUFVLFlBQVk7QUFDdEMsY0FBTSxJQUFJLFVBQVUsZUFBZSxXQUFXLDBCQUEwQjtBQUFBLE1BQzFFO0FBQ0EsYUFBTyxPQUFPLE1BQU1ELE1BQUssSUFBSTtBQUFBLElBQy9CO0FBQUE7QUFBQTs7O0FDWkE7QUFBQSxzQ0FBQUUsVUFBQUMsU0FBQTtBQUFBO0FBRUEsUUFBTSxLQUFLLFFBQVEsSUFBSTtBQUN2QixRQUFNLFdBQVc7QUFDakIsUUFBTSxXQUFXO0FBQ2pCLFFBQU0sWUFBWTtBQUNsQixRQUFNLFVBQVU7QUFDaEIsUUFBTUMsV0FBVTtBQUNoQixRQUFNLFNBQVM7QUFDZixRQUFNQyxTQUFRO0FBQ2QsUUFBTSxRQUFRO0FBa0JkLGFBQVNDLFFBQU8sT0FBT0MsVUFBUztBQUM5QixVQUFJLFVBQVUsSUFBSTtBQUNoQixlQUFPLEVBQUUsTUFBTSxDQUFDLEdBQUcsU0FBUyxPQUFPLFNBQVMsSUFBSSxNQUFNLE1BQU07QUFBQSxNQUM5RDtBQUVBLFVBQUksT0FBTyxPQUFPLEtBQUs7QUFDdkIsWUFBTSxTQUFTRCxRQUFPLE1BQU0sS0FBSyxPQUFPO0FBRXhDLFVBQUksQ0FBQ0MsVUFBUztBQUNaLFlBQUksUUFBUTtBQUNWLGlCQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcsTUFBTTtBQUMvQixlQUFLLE9BQU8sT0FBTztBQUNuQixpQkFBTztBQUFBLFFBQ1Q7QUFLQSxRQUFBRCxRQUFPLE1BQU0sS0FBSyxPQUFPLElBQUk7QUFBQSxNQUMvQjtBQUVBLGFBQU8sWUFBWSxNQUFNQyxRQUFPO0FBQUEsSUFDbEM7QUFNQSxhQUFTLFlBQVksTUFBTUEsVUFBUztBQUNsQyxZQUFNLE9BQU8sU0FBU0EsUUFBTztBQUM3QixZQUFNLE9BQU8sS0FBSyxXQUFXLENBQUM7QUFDOUIsWUFBTSxRQUFRLE9BQU8sS0FBSyxXQUFXLENBQUM7QUFDdEMsVUFBSUMsT0FBTSxLQUFLO0FBRWYsVUFBSSxLQUFLLFVBQVU7QUFDakIsYUFBSyxXQUFXLEtBQUs7QUFBQSxNQUN2QjtBQUdBLFlBQU0sVUFBVSxLQUFLO0FBQ3JCLFVBQUksQ0FBQyxNQUFNLFdBQVdBLE1BQUssTUFBTSxPQUFPLEdBQUc7QUFDekMsZ0JBQVEsTUFBTSxJQUFJO0FBQ2xCLGVBQU87QUFBQSxNQUNUO0FBS0EsVUFBSUEsS0FBSSxPQUFPLE9BQU8sTUFBTSxLQUFLLE1BQU0sRUFBRSxHQUFHO0FBQzFDLGVBQU87QUFBQSxNQUNUO0FBR0EsTUFBQUEsT0FBTUEsS0FBSSxNQUFNLE9BQU87QUFDdkIsWUFBTSxNQUFNQSxLQUFJO0FBR2hCLFlBQU0sV0FBV0YsUUFBTyxTQUFTRSxNQUFLLElBQUk7QUFDMUMsVUFBSSxTQUFTLE1BQU07QUFDakIsYUFBSyxXQUFXLFNBQVM7QUFDekIsUUFBQUEsT0FBTUEsS0FBSSxNQUFNLFNBQVMsSUFBSSxNQUFNO0FBQUEsTUFDckM7QUFHQSxVQUFJLGFBQWFBLEtBQUksUUFBUSxLQUFLO0FBQ2xDLFVBQUksZUFBZSxJQUFJO0FBQ3JCLHFCQUFhO0FBQUEsTUFDZjtBQUdBLFdBQUssU0FBU0EsS0FBSSxNQUFNLEdBQUcsVUFBVTtBQUVyQyxZQUFNLFFBQVEsS0FBSyxPQUFPLFFBQVEsaUJBQWlCLEVBQUUsRUFBRSxLQUFLO0FBQzVELFVBQUksVUFBVSxJQUFJO0FBQ2hCLGFBQUssVUFBVTtBQUNmLGFBQUssUUFBUSxLQUFLO0FBQ2xCLGFBQUssT0FBTyxDQUFDO0FBQUEsTUFDZixPQUFPO0FBR0wsYUFBSyxPQUFPSCxPQUFNLEtBQUssVUFBVSxLQUFLLFFBQVEsSUFBSTtBQUFBLE1BQ3BEO0FBR0EsVUFBSSxlQUFlLEtBQUs7QUFDdEIsYUFBSyxVQUFVO0FBQUEsTUFDakIsT0FBTztBQUNMLGFBQUssVUFBVUcsS0FBSSxNQUFNLGFBQWEsTUFBTSxNQUFNO0FBQ2xELFlBQUksS0FBSyxRQUFRLENBQUMsTUFBTSxNQUFNO0FBQzVCLGVBQUssVUFBVSxLQUFLLFFBQVEsTUFBTSxDQUFDO0FBQUEsUUFDckM7QUFDQSxZQUFJLEtBQUssUUFBUSxDQUFDLE1BQU0sTUFBTTtBQUM1QixlQUFLLFVBQVUsS0FBSyxRQUFRLE1BQU0sQ0FBQztBQUFBLFFBQ3JDO0FBQUEsTUFDRjtBQUVBLGNBQVEsTUFBTSxJQUFJO0FBRWxCLFVBQUksS0FBSyxhQUFhLFFBQVEsT0FBTyxLQUFLLFlBQVksWUFBWTtBQUNoRSxpQkFBUyxNQUFNLEtBQUssT0FBTztBQUFBLE1BQzdCO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFNQSxJQUFBRixRQUFPLFVBQVVGO0FBdUJqQixJQUFBRSxRQUFPLFlBQVksU0FBUyxNQUFNLE1BQU1DLFVBQVM7QUFDL0MsVUFBSSxPQUFPLFNBQVMsU0FBVSxRQUFPRCxRQUFPLE1BQU1DLFFBQU87QUFDekQsYUFBTyxVQUFVLE1BQU0sTUFBTUEsUUFBTztBQUFBLElBQ3RDO0FBZUEsSUFBQUQsUUFBTyxPQUFPLFNBQVMsVUFBVUMsVUFBUztBQUN4QyxZQUFNQyxPQUFNLEdBQUcsYUFBYSxVQUFVLE1BQU07QUFDNUMsWUFBTSxPQUFPRixRQUFPRSxNQUFLRCxRQUFPO0FBQ2hDLFdBQUssT0FBTztBQUNaLGFBQU87QUFBQSxJQUNUO0FBVUEsSUFBQUQsUUFBTyxPQUFPLFNBQVNFLE1BQUtELFVBQVM7QUFDbkMsYUFBTyxNQUFNLFdBQVdDLE1BQUssU0FBU0QsUUFBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQUEsSUFDOUQ7QUFVQSxJQUFBRCxRQUFPLFdBQVcsU0FBU0UsTUFBS0QsVUFBUztBQUN2QyxZQUFNLE9BQU8sU0FBU0EsUUFBTztBQUM3QixZQUFNLE9BQU8sS0FBSyxXQUFXLENBQUM7QUFFOUIsVUFBSUQsUUFBTyxLQUFLRSxJQUFHLEdBQUc7QUFDcEIsUUFBQUEsT0FBTUEsS0FBSSxNQUFNLEtBQUssTUFBTTtBQUFBLE1BQzdCO0FBRUEsWUFBTSxXQUFXQSxLQUFJLE1BQU0sR0FBR0EsS0FBSSxPQUFPLE9BQU8sQ0FBQztBQUNqRCxhQUFPO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxNQUFNLFdBQVcsU0FBUyxLQUFLLElBQUk7QUFBQSxNQUNyQztBQUFBLElBQ0Y7QUFNQSxJQUFBRixRQUFPLFFBQVEsQ0FBQztBQUNoQixJQUFBQSxRQUFPLGFBQWEsV0FBVztBQUM3QixNQUFBQSxRQUFPLFFBQVEsQ0FBQztBQUFBLElBQ2xCO0FBQ0EsSUFBQUgsUUFBTyxVQUFVRztBQUFBO0FBQUE7OztBQ25PakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFHLG9CQUFxRDs7O0FDQ3JELHNCQUE4Qjs7O0FDaUJ2QixTQUFTLGtCQUFrQixjQUFvQztBQUNwRSxRQUFNLFFBQWtCLENBQUM7QUFHekIsUUFBTSxLQUFLLGlDQUFhLGFBQWEsU0FBUyxFQUFFO0FBQ2hELFFBQU0sS0FBSyxFQUFFO0FBQ2IsUUFBTSxLQUFLLHVCQUFRLGFBQWEsVUFBVSxZQUFZLENBQUMsRUFBRTtBQUN6RCxRQUFNLEtBQUssRUFBRTtBQUNiLFFBQU0sS0FBSyxLQUFLO0FBQ2hCLFFBQU0sS0FBSyxFQUFFO0FBR2IsYUFBVyxRQUFRLGFBQWEsT0FBTztBQUNyQyxVQUFNLFlBQVksS0FBSyxTQUFTLFNBQVMsaUNBQ3hCLEtBQUssU0FBUyxjQUFjLDZDQUM1QjtBQUVqQixVQUFNLEtBQUssTUFBTSxTQUFTLEVBQUU7QUFFNUIsUUFBSSxLQUFLLFdBQVc7QUFDbEIsWUFBTSxZQUFZLE9BQU8sS0FBSyxjQUFjLFdBQ3hDLEtBQUssWUFDTCxLQUFLLFVBQVUsWUFBWTtBQUMvQixZQUFNLEtBQUssSUFBSSxTQUFTLEdBQUc7QUFDM0IsWUFBTSxLQUFLLEVBQUU7QUFBQSxJQUNmO0FBRUEsVUFBTSxLQUFLLEtBQUssT0FBTztBQUN2QixVQUFNLEtBQUssRUFBRTtBQUFBLEVBQ2Y7QUFFQSxTQUFPLE1BQU0sS0FBSyxJQUFJO0FBQ3hCOzs7QUQ3Q0EsZUFBc0IsMEJBQ3BCLE9BQ0EsV0FDQSxPQUNBLGNBQ2lCO0FBQ2pCLFFBQU0sZUFBNkI7QUFBQSxJQUNqQztBQUFBLElBQ0E7QUFBQSxJQUNBLFdBQVcsb0JBQUksS0FBSztBQUFBLEVBQ3RCO0FBRUEsUUFBTSxXQUFXLGtCQUFrQixZQUFZO0FBQy9DLFFBQU0sV0FBVyxjQUFjLFlBQVk7QUFDM0MsUUFBTSxnQkFBZ0IsbUJBQWUsK0JBQWMsWUFBWSxFQUFFLFFBQVEsUUFBUSxFQUFFLElBQUk7QUFDdkYsUUFBTSxhQUFhLE1BQU07QUFBQSxJQUN2QjtBQUFBLFFBQ0EsK0JBQWMsZ0JBQWdCLEdBQUcsYUFBYSxJQUFJLFFBQVEsS0FBSyxRQUFRO0FBQUEsRUFDekU7QUFFQSxNQUFJLGVBQWU7QUFDakIsVUFBTSxtQkFBbUIsT0FBTyxhQUFhO0FBQUEsRUFDL0M7QUFFQSxRQUFNLE1BQU0sT0FBTyxZQUFZLFFBQVE7QUFDdkMsU0FBTztBQUNUO0FBRUEsU0FBUyxjQUFjLGNBQW9DO0FBQ3pELFFBQU0sWUFBWSxvQkFBb0IsYUFBYSxTQUFTO0FBQzVELFNBQU8sR0FBRyxTQUFTO0FBQ3JCO0FBRUEsU0FBUyxvQkFBb0IsT0FBdUI7QUFDbEQsUUFBTSxVQUFVLE1BQU0sS0FBSztBQUMzQixNQUFJLENBQUMsU0FBUztBQUNaLFdBQU87QUFBQSxFQUNUO0FBRUEsUUFBTSxVQUFVLFFBQ2IsUUFBUSxpQkFBaUIsR0FBRyxFQUM1QixRQUFRLFFBQVEsR0FBRyxFQUNuQixLQUFLO0FBRVIsU0FBTyxXQUFXO0FBQ3BCO0FBRUEsZUFBZSxtQkFBbUIsT0FBYyxRQUErQjtBQUM3RSxRQUFNLFNBQVMsTUFBTSxNQUFNLFFBQVEsT0FBTyxNQUFNO0FBQ2hELE1BQUksQ0FBQyxRQUFRO0FBQ1gsVUFBTSxNQUFNLGFBQWEsTUFBTTtBQUFBLEVBQ2pDO0FBQ0Y7QUFFQSxlQUFlLGlCQUFpQixPQUFjLE1BQStCO0FBQzNFLFFBQU0saUJBQWEsK0JBQWMsSUFBSTtBQUNyQyxRQUFNLGlCQUFpQixXQUFXLFlBQVksS0FBSztBQUNuRCxRQUFNLE9BQU8sbUJBQW1CLEtBQUssYUFBYSxXQUFXLE1BQU0sR0FBRyxjQUFjO0FBQ3BGLFFBQU0sWUFBWSxtQkFBbUIsS0FBSyxLQUFLO0FBRS9DLE1BQUksWUFBWTtBQUNoQixNQUFJLFFBQVE7QUFFWixTQUFPLE1BQU0sTUFBTSxRQUFRLE9BQU8sU0FBUyxHQUFHO0FBQzVDLGdCQUFZLEdBQUcsSUFBSSxJQUFJLEtBQUssR0FBRyxTQUFTO0FBQ3hDLGFBQVM7QUFBQSxFQUNYO0FBRUEsU0FBTztBQUNUOzs7QUUxRUEsSUFBQUMsbUJBQTJCOzs7QUNzQnBCLElBQU0sbUJBQTJFO0FBQUEsRUFDdEYsUUFBUTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsT0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUNBLFFBQVE7QUFBQSxJQUNOLFFBQVE7QUFBQSxJQUNSLE9BQU87QUFBQSxFQUNUO0FBQUEsRUFDQSxRQUFRO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixPQUFPO0FBQUEsRUFDVDtBQUFBLEVBQ0EsUUFBUTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsT0FBTztBQUFBLEVBQ1Q7QUFDRjtBQUVPLElBQU0sb0JBQW1GO0FBQUEsRUFDOUYsUUFBUTtBQUFBLElBQ04sT0FBTztBQUFBLElBQ1AsUUFBUTtBQUFBLEVBQ1Y7QUFBQSxFQUNBLFFBQVE7QUFBQSxJQUNOLE9BQU87QUFBQSxJQUNQLFFBQVE7QUFBQSxFQUNWO0FBQUEsRUFDQSxPQUFPO0FBQUEsSUFDTCxPQUFPO0FBQUEsRUFDVDtBQUFBLEVBQ0EsUUFBUTtBQUFBLElBQ04sT0FBTztBQUFBLEVBQ1Q7QUFDRjtBQUVPLElBQU0sbUJBQWdDO0FBQUEsRUFDM0MsVUFBVTtBQUFBLEVBQ1YsUUFBUSxpQkFBaUIsT0FBTztBQUFBLEVBQ2hDLFFBQVE7QUFBQSxFQUNSLE9BQU8saUJBQWlCLE9BQU87QUFBQSxFQUMvQixZQUFZO0FBQUEsRUFDWixjQUFjO0FBQUEsRUFDZCxxQkFBcUI7QUFBQTtBQUFBLEVBRXJCLGlCQUFpQjtBQUFBLEVBQ2pCLFdBQVc7QUFBQSxFQUNYLGNBQWM7QUFBQSxFQUNkLE1BQU07QUFBQTtBQUFBLEVBRU4sbUJBQW1CO0FBQUEsRUFDbkIsaUJBQWlCO0FBQUEsRUFDakIsZ0JBQWdCLGtCQUFrQixPQUFPO0FBQzNDOzs7QURsRU8sSUFBTSxlQUFOLE1BQW1CO0FBQUEsRUFJeEIsWUFBWSxhQUE2QixXQUF1QjtBQUM5RCxTQUFLLGNBQWM7QUFFbkIsU0FBSyxZQUFZLGlDQUFjLFlBQVk7QUFBQSxJQUFDO0FBQUEsRUFDOUM7QUFBQSxFQUVBLE1BQU0sc0JBQXNCLE9BQTRDO0FBQ3RFLFVBQU0sV0FBVyxLQUFLLFlBQVk7QUFFbEMsUUFBSSxTQUFTLGFBQWEsVUFBVTtBQUNsQyxhQUFPLEtBQUssbUJBQW1CLFVBQVUsS0FBSztBQUFBLElBQ2hEO0FBRUEsV0FBTyxLQUFLLDZCQUE2QixVQUFVLEtBQUs7QUFBQSxFQUMxRDtBQUFBLEVBRUEsTUFBTSxrQkFBa0IsUUFBaUM7QUFDdkQsVUFBTSxXQUFXLEtBQUssWUFBWTtBQUNsQyxVQUFNLGFBQWEsU0FBUyxXQUFXLEtBQUs7QUFDNUMsVUFBTSxZQUFZLGNBQWMsU0FBUyxNQUFNLEtBQUs7QUFDcEQsVUFBTSxRQUE0QjtBQUFBLE1BQ2hDO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixTQUFTO0FBQUEsUUFDVCxZQUFXLG9CQUFJLEtBQUssR0FBRSxZQUFZO0FBQUEsTUFDcEM7QUFBQSxJQUNGO0FBRUEsUUFBSSxTQUFTLGFBQWEsVUFBVTtBQUNsQyxhQUFPLEtBQUssbUJBQW1CLFVBQVUsT0FBTztBQUFBLFFBQzlDO0FBQUEsUUFDQSxjQUFjO0FBQUEsTUFDaEIsQ0FBQztBQUFBLElBQ0g7QUFFQSxXQUFPLEtBQUssNkJBQTZCLFVBQVUsT0FBTztBQUFBLE1BQ3hEO0FBQUEsTUFDQSxjQUFjO0FBQUEsSUFDaEIsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLE1BQWMsNkJBQ1osVUFDQSxPQUNBQyxVQUNpQjtBQTFEckI7QUEyREksVUFBTSxTQUFTLFNBQVMsT0FBTyxLQUFLO0FBQ3BDLFFBQUksQ0FBQyxRQUFRO0FBQ1gsWUFBTSxJQUFJLE1BQU0sc0RBQW1CO0FBQUEsSUFDckM7QUFFQSxVQUFNLGNBQVksS0FBQUEsWUFBQSxnQkFBQUEsU0FBUyxjQUFULG1CQUFvQixXQUFVLFNBQVMsTUFBTSxLQUFLLEtBQUssaUJBQWlCLE9BQU87QUFDakcsUUFBSSxDQUFDLFdBQVc7QUFDZCxZQUFNLElBQUksTUFBTSx3RUFBaUI7QUFBQSxJQUNuQztBQUVBLFVBQU0sV0FBVyxLQUFLLG9CQUFvQixVQUFVLFFBQU8sS0FBQUEsWUFBQSxnQkFBQUEsU0FBUyxpQkFBVCxZQUF5QixJQUFJO0FBQ3hGLFVBQU0sVUFBVTtBQUFBLE1BQ2QsT0FBTztBQUFBLE1BQ1A7QUFBQSxJQUNGO0FBQ0EsVUFBTSxPQUFPLEtBQUssVUFBVSxPQUFPO0FBRW5DLFVBQU0sVUFBa0M7QUFBQSxNQUN0QyxnQkFBZ0I7QUFBQSxJQUNsQjtBQUNBLFFBQUksU0FBUyxPQUFPLEtBQUssR0FBRztBQUMxQixjQUFRLGdCQUFnQixVQUFVLFNBQVMsT0FBTyxLQUFLLENBQUM7QUFBQSxJQUMxRDtBQUVBLFFBQUk7QUFDSixRQUFJO0FBQ0YsaUJBQVcsVUFBTSw2QkFBVztBQUFBLFFBQzFCLEtBQUs7QUFBQSxRQUNMLFFBQVE7QUFBQSxRQUNSO0FBQUEsUUFDQTtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0gsU0FBUyxPQUFPO0FBQ2QsWUFBTSxVQUFVLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDckUsWUFBTSxLQUFLLElBQUksb0NBQW9DO0FBQUEsUUFDakQsS0FBSztBQUFBLFFBQ0wsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLE1BQ1QsQ0FBQztBQUNELFlBQU0sSUFBSSxNQUFNLGtDQUFjLE9BQU8sRUFBRTtBQUFBLElBQ3pDO0FBRUEsVUFBTSxTQUFTLFNBQVM7QUFDeEIsUUFBSSxVQUFVLFVBQVUsS0FBSztBQUMzQixZQUFNLEtBQUssSUFBSSxvQ0FBb0M7QUFBQSxRQUNqRCxLQUFLO0FBQUEsUUFDTCxNQUFNO0FBQUEsUUFDTjtBQUFBLFFBQ0EsVUFBVSxTQUFTO0FBQUEsTUFDckIsQ0FBQztBQUNELFlBQU0sSUFBSSxNQUFNLHFCQUFXLE1BQU0sRUFBRTtBQUFBLElBQ3JDO0FBRUEsVUFBTSxPQUFPLEtBQUssa0JBQWtCLFNBQVMsTUFBTSxTQUFTLElBQUk7QUFDaEUsVUFBTSxXQUNILGdFQUFrRSxZQUFsRSxtQkFBNEUsT0FBNUUsbUJBQWdGLFlBQWhGLG1CQUNHLFlBREgsWUFFQSw2QkFBNkIsVUFGN0IsWUFHQSw2QkFBK0IsWUFIL0IsWUFJQSw2QkFBK0I7QUFFbEMsUUFBSSxDQUFDLFdBQVcsT0FBTyxZQUFZLFVBQVU7QUFDM0MsWUFBTSxLQUFLLElBQUksc0NBQXNDLEVBQUUsS0FBSyxRQUFRLFVBQVUsS0FBSyxDQUFDO0FBQ3BGLFlBQU0sSUFBSSxNQUFNLG9GQUFtQjtBQUFBLElBQ3JDO0FBRUEsV0FBTyxRQUFRLEtBQUs7QUFBQSxFQUN0QjtBQUFBLEVBRUEsTUFBYyxtQkFDWixVQUNBLE9BQ0FBLFVBQ2lCO0FBcElyQjtBQXFJSSxVQUFNLFNBQVMsU0FBUyxPQUFPLEtBQUs7QUFDcEMsUUFBSSxDQUFDLFFBQVE7QUFDWCxZQUFNLElBQUksTUFBTSxnRUFBd0I7QUFBQSxJQUMxQztBQUVBLFVBQU0sY0FBWSxLQUFBQSxZQUFBLGdCQUFBQSxTQUFTLGNBQVQsbUJBQW9CLFdBQVUsU0FBUyxNQUFNLEtBQUssS0FBSyxpQkFBaUIsT0FBTztBQUNqRyxRQUFJLENBQUMsV0FBVztBQUNkLFlBQU0sSUFBSSxNQUFNLCtFQUF3QjtBQUFBLElBQzFDO0FBRUEsVUFBTSxpQkFBZ0IsS0FBQUEsWUFBQSxnQkFBQUEsU0FBUyxpQkFBVCxZQUF5QixTQUFTLGNBQWMsS0FBSztBQUMzRSxVQUFNLFdBQVcsTUFBTSxJQUFJLENBQUMsU0FBUztBQUNuQyxZQUFNLE9BQU8sS0FBSyxTQUFTLGNBQWMsVUFBVTtBQUNuRCxZQUFNQyxRQUFPLEtBQUssU0FBUyxXQUFXLHdCQUFTLEtBQUssT0FBTyxLQUFLLEtBQUs7QUFDckUsYUFBTztBQUFBLFFBQ0w7QUFBQSxRQUNBLE9BQU8sQ0FBQyxFQUFFLE1BQUFBLE1BQUssQ0FBQztBQUFBLE1BQ2xCO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxVQUlGO0FBQUEsTUFDRjtBQUFBLE1BQ0Esa0JBQWtCO0FBQUEsUUFDaEIsa0JBQWtCO0FBQUEsTUFDcEI7QUFBQSxJQUNGO0FBRUEsUUFBSSxjQUFjO0FBQ2hCLGNBQVEsb0JBQW9CLEVBQUUsT0FBTyxDQUFDLEVBQUUsTUFBTSxhQUFhLENBQUMsRUFBRTtBQUFBLElBQ2hFO0FBR0EsVUFBTSxTQUFTLDJEQUEyRCxTQUFTLHdCQUF3QixNQUFNO0FBRWpILFVBQU0sVUFBa0M7QUFBQSxNQUN0QyxnQkFBZ0I7QUFBQSxJQUNsQjtBQUVBLFFBQUk7QUFDSixRQUFJO0FBQ0YsaUJBQVcsVUFBTSw2QkFBVztBQUFBLFFBQzFCLEtBQUs7QUFBQSxRQUNMLFFBQVE7QUFBQSxRQUNSO0FBQUEsUUFDQSxNQUFNLEtBQUssVUFBVSxPQUFPO0FBQUEsTUFDOUIsQ0FBQztBQUFBLElBQ0gsU0FBUyxPQUFPO0FBQ2QsWUFBTSxVQUFVLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDckUsWUFBTSxLQUFLLElBQUkseUJBQXlCO0FBQUEsUUFDdEMsT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLE1BQ1QsQ0FBQztBQUNELFlBQU0sSUFBSSxNQUFNLHFDQUFpQixPQUFPLEVBQUU7QUFBQSxJQUM1QztBQUVBLFVBQU0sU0FBUyxTQUFTO0FBQ3hCLFFBQUksVUFBVSxVQUFVLEtBQUs7QUFDM0IsWUFBTSxLQUFLLElBQUkseUJBQXlCO0FBQUEsUUFDdEMsT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLFFBQ047QUFBQSxRQUNBLFVBQVUsU0FBUztBQUFBLE1BQ3JCLENBQUM7QUFDRCxZQUFNLElBQUksTUFBTSw0QkFBa0IsTUFBTSxFQUFFO0FBQUEsSUFDNUM7QUFFQSxVQUFNLE9BQU8sS0FBSyxrQkFBa0IsU0FBUyxNQUFNLFNBQVMsSUFBSTtBQUNoRSxVQUFNLFFBQ0gsd0NBQTRCLFNBQTVCLGFBQ0Esb0RBQ0csZUFESCxtQkFDZ0IsT0FEaEIsbUJBQ29CLFlBRHBCLG1CQUM2QixVQUQ3QixtQkFFRyxJQUFJLENBQUMsU0FBTTtBQWpOckIsVUFBQUM7QUFpTndCLGNBQUFBLE1BQUEsS0FBSyxTQUFMLE9BQUFBLE1BQWE7QUFBQSxPQUM1QixLQUFLLElBQ0wsV0FMRixZQU1EO0FBRUYsUUFBSSxDQUFDLE1BQU07QUFDVCxZQUFNLEtBQUssSUFBSSwyQkFBMkIsRUFBRSxPQUFPLFdBQVcsVUFBVSxLQUFLLENBQUM7QUFDOUUsWUFBTSxJQUFJLE1BQU0sb0ZBQW1CO0FBQUEsSUFDckM7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRVEsb0JBQ04sVUFDQSxPQUNBLHNCQUMwQztBQUMxQyxVQUFNLFdBQVcsQ0FBQztBQUNsQixVQUFNLGVBQWUseUJBQXlCLE9BQzFDLHFCQUFxQixLQUFLLElBQzFCLFNBQVMsYUFBYSxLQUFLO0FBQy9CLFFBQUksY0FBYztBQUNoQixlQUFTLEtBQUssRUFBRSxNQUFNLFVBQVUsU0FBUyxhQUFhLENBQUM7QUFBQSxJQUN6RDtBQUNBLGVBQVcsUUFBUSxPQUFPO0FBQ3hCLGVBQVMsS0FBSyxFQUFFLE1BQU0sS0FBSyxNQUFNLFNBQVMsS0FBSyxRQUFRLENBQUM7QUFBQSxJQUMxRDtBQUNBLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFUSxrQkFBa0IsTUFBYyxNQUF5QjtBQUMvRCxRQUFJLE1BQU07QUFDUixhQUFPO0FBQUEsSUFDVDtBQUNBLFFBQUk7QUFDRixhQUFPLEtBQUssTUFBTSxJQUFJO0FBQUEsSUFDeEIsU0FBUTtBQUNOLFlBQU0sSUFBSSxNQUFNLDRFQUFxQjtBQUFBLElBQ3ZDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBYyxJQUFJLFNBQWlCLFFBQWdDO0FBQ2pFLFVBQU0sS0FBSyxVQUFVLFNBQVMsTUFBTTtBQUFBLEVBQ3RDO0FBQ0Y7OztBRTdQQSxJQUFBQyxtQkFBOEI7QUFFdkIsU0FBUyxpQkFBaUIsS0FBVSxVQUFtQztBQUg5RTtBQUlFLFFBQU0sWUFBVywwQ0FBVSxPQUFWLFlBQWdCO0FBQ2pDLGFBQU8sZ0NBQWMsR0FBRyxJQUFJLE1BQU0sU0FBUyxZQUFZLFFBQVEsVUFBVTtBQUMzRTtBQUVBLGVBQXNCLGVBQ3BCLEtBQ0EsVUFDQSxTQUNBLFFBQ2U7QUFDZixRQUFNLFVBQVUsaUJBQWlCLEtBQUssUUFBUTtBQUM5QyxRQUFNLGFBQVksb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFDekMsUUFBTSxhQUFhLGFBQWEsTUFBTTtBQUN0QyxRQUFNLFFBQVE7QUFBQSxHQUFNLFNBQVMsS0FBSyxPQUFPO0FBQUEsRUFBSyxVQUFVO0FBQUE7QUFFeEQsTUFBSTtBQUNGLFVBQU0sU0FBUyxNQUFNLElBQUksTUFBTSxRQUFRLE9BQU8sT0FBTztBQUNyRCxRQUFJLFFBQVE7QUFDVixZQUFNLFVBQVUsTUFBTSxJQUFJLE1BQU0sUUFBUSxLQUFLLE9BQU87QUFDcEQsWUFBTSxJQUFJLE1BQU0sUUFBUSxNQUFNLFNBQVMsR0FBRyxLQUFLLEdBQUcsT0FBTyxFQUFFO0FBQUEsSUFDN0QsT0FBTztBQUNMLFlBQU0sSUFBSSxNQUFNLFFBQVEsTUFBTSxTQUFTLE1BQU0sVUFBVSxDQUFDO0FBQUEsSUFDMUQ7QUFBQSxFQUNGLFNBQVMsT0FBTztBQUNkLFlBQVEsTUFBTSw4QkFBOEIsS0FBSztBQUFBLEVBQ25EO0FBQ0Y7QUFTQSxlQUFzQixtQkFDcEIsS0FDQSxVQUNBLE1BQ2U7QUFDZixRQUFNLFVBQVUsaUJBQWlCLEtBQUssUUFBUTtBQUM5QyxRQUFNLGFBQVksb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFHekMsUUFBTSxZQUFZLEtBQUssVUFBVSxRQUFRLE9BQU8sR0FBRztBQUduRCxRQUFNLGdCQUFnQiwrQkFBVyxLQUFLLFVBQVUsTUFBTTtBQUd0RCxNQUFJLGlCQUFpQjtBQUNyQixNQUFJLEtBQUssZUFBZSxRQUFXO0FBQ2pDLHFCQUFpQix1RUFBcUIsS0FBSyxhQUFhLEtBQUssUUFBUSxDQUFDLENBQUM7QUFBQSxFQUN6RTtBQUdBLE1BQUksUUFBUTtBQUFBLEdBQU0sU0FBUyx5Q0FBZ0IsU0FBUyxLQUFLLGFBQWEsR0FBRyxjQUFjO0FBQUE7QUFFdkYsTUFBSTtBQUNGLFVBQU0sU0FBUyxNQUFNLElBQUksTUFBTSxRQUFRLE9BQU8sT0FBTztBQUNyRCxRQUFJLFFBQVE7QUFDVixZQUFNLFVBQVUsTUFBTSxJQUFJLE1BQU0sUUFBUSxLQUFLLE9BQU87QUFDcEQsWUFBTSxJQUFJLE1BQU0sUUFBUSxNQUFNLFNBQVMsR0FBRyxLQUFLLEdBQUcsT0FBTyxFQUFFO0FBQUEsSUFDN0QsT0FBTztBQUNMLFlBQU0sSUFBSSxNQUFNLFFBQVEsTUFBTSxTQUFTLE1BQU0sVUFBVSxDQUFDO0FBQUEsSUFDMUQ7QUFBQSxFQUNGLFNBQVMsT0FBTztBQUNkLFlBQVEsTUFBTSw2RUFBc0IsS0FBSztBQUFBLEVBQzNDO0FBQ0Y7QUFFQSxlQUFzQixnQ0FDcEIsS0FDQSxVQUNBLFFBQ0EsU0FDZTtBQUNmLFFBQU0sVUFBVSxpQkFBaUIsS0FBSyxRQUFRO0FBQzlDLFFBQU0sYUFBWSxvQkFBSSxLQUFLLEdBQUUsWUFBWTtBQUV6QyxNQUFJLFFBQVE7QUFBQSxHQUFNLFNBQVMsNERBQW9CLE1BQU07QUFBQTtBQUVyRCxNQUFJLFNBQVM7QUFDWCxhQUFTLGlCQUFPLGFBQWEsT0FBTyxDQUFDO0FBQUE7QUFBQSxFQUN2QztBQUVBLFdBQVM7QUFFVCxNQUFJO0FBQ0YsVUFBTSxTQUFTLE1BQU0sSUFBSSxNQUFNLFFBQVEsT0FBTyxPQUFPO0FBQ3JELFFBQUksUUFBUTtBQUNWLFlBQU0sVUFBVSxNQUFNLElBQUksTUFBTSxRQUFRLEtBQUssT0FBTztBQUNwRCxZQUFNLElBQUksTUFBTSxRQUFRLE1BQU0sU0FBUyxHQUFHLEtBQUssR0FBRyxPQUFPLEVBQUU7QUFBQSxJQUM3RCxPQUFPO0FBQ0wsWUFBTSxJQUFJLE1BQU0sUUFBUSxNQUFNLFNBQVMsTUFBTSxVQUFVLENBQUM7QUFBQSxJQUMxRDtBQUFBLEVBQ0YsU0FBUyxPQUFPO0FBQ2QsWUFBUSxNQUFNLGlHQUEyQixLQUFLO0FBQUEsRUFDaEQ7QUFDRjtBQUVBLFNBQVMsYUFBYSxRQUF5QjtBQXpHL0M7QUEwR0UsTUFBSSxXQUFXLFFBQVEsV0FBVyxRQUFXO0FBQzNDLFdBQU8sT0FBTyxNQUFNO0FBQUEsRUFDdEI7QUFDQSxNQUFJLE9BQU8sV0FBVyxVQUFVO0FBQzlCLFdBQU87QUFBQSxFQUNUO0FBQ0EsTUFBSSxrQkFBa0IsT0FBTztBQUMzQixZQUFPLFlBQU8sVUFBUCxZQUFnQixPQUFPO0FBQUEsRUFDaEM7QUFDQSxNQUFJO0FBQ0YsVUFBTSxPQUFPLG9CQUFJLFFBQWdCO0FBQ2pDLFdBQU8sS0FBSztBQUFBLE1BQ1Y7QUFBQSxNQUNBLENBQUMsS0FBSyxVQUFVO0FBQ2QsWUFBSSxPQUFPLFVBQVUsWUFBWSxVQUFVLE1BQU07QUFDL0MsY0FBSSxLQUFLLElBQUksS0FBSyxHQUFHO0FBQ25CLG1CQUFPO0FBQUEsVUFDVDtBQUNBLGVBQUssSUFBSSxLQUFLO0FBQUEsUUFDaEI7QUFDQSxlQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxJQUNGO0FBQUEsRUFDRixTQUFTLE9BQU87QUFDZCxVQUFNLFVBQVUsaUJBQWlCLFFBQVEsTUFBTSxVQUFVLE9BQU8sS0FBSztBQUNyRSxXQUFPLG9DQUFXLE9BQU87QUFBQSxFQUMzQjtBQUNGOzs7QUN0SUEsSUFBQUMsbUJBQXNCO0FBU2YsSUFBTSx3QkFBTixjQUFvQyx1QkFBTTtBQUFBLEVBRy9DLFlBQVksUUFBZ0IsVUFBaUQ7QUFDM0UsVUFBTSxPQUFPLEdBQUc7QUFDaEIsU0FBSyxXQUFXO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFNBQWU7QUFDYixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUVoQixjQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU0saUNBQWEsQ0FBQztBQUUvQyxVQUFNLGNBQWMsVUFBVSxTQUFTLFNBQVMsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUNoRSxnQkFBWSxjQUFjO0FBRTFCLFVBQU0sY0FBYyxVQUFVLFNBQVMsU0FBUyxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBQ2hFLGdCQUFZLGNBQWM7QUFFMUIsVUFBTSxpQkFBaUIsVUFBVSxTQUFTLFNBQVMsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUNuRSxtQkFBZSxjQUFjO0FBRTdCLFVBQU0sZUFBZSxVQUFVLFNBQVMsVUFBVSxFQUFFLE1BQU0sZUFBSyxDQUFDO0FBQ2hFLGlCQUFhLGlCQUFpQixTQUFTLE1BQU07QUFDM0MsV0FBSyxTQUFTO0FBQUEsUUFDWixXQUFXLFlBQVksTUFBTSxLQUFLO0FBQUEsUUFDbEMsV0FBVyxZQUFZLE1BQU0sS0FBSztBQUFBLFFBQ2xDLGNBQWMsZUFBZSxNQUFNLEtBQUs7QUFBQSxNQUMxQyxDQUFDO0FBQ0QsV0FBSyxNQUFNO0FBQUEsSUFDYixDQUFDO0FBQUEsRUFDSDtBQUNGOzs7QUMxQ0EsSUFBQUMsbUJBQTJCO0FBR3BCLElBQU0sd0JBQU4sY0FBb0MsdUJBQU07QUFBQSxFQVEvQyxZQUFZLEtBQVUsVUFBdUI7QUFDM0MsVUFBTSxHQUFHO0FBUFgsU0FBUSxnQkFBb0M7QUFDNUMsU0FBUSxXQUErQjtBQUN2QyxTQUFRLFlBQWdDO0FBQ3hDLFNBQVEsZUFBeUM7QUFDakQsU0FBUSxXQUFnQztBQUl0QyxTQUFLLFdBQVc7QUFBQSxNQUNkLFlBQVk7QUFBQSxNQUNaLGdCQUFnQjtBQUFBLE1BQ2hCLFFBQVE7QUFBQSxJQUNWO0FBQ0EsU0FBSyxXQUFXLFlBQVk7QUFBQSxFQUM5QjtBQUFBLEVBRUEsU0FBZTtBQUNiLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFDdEIsY0FBVSxNQUFNO0FBQ2hCLGNBQVUsU0FBUyx5QkFBeUI7QUFHNUMsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLHNEQUFjLENBQUM7QUFHaEQsU0FBSyxXQUFXLFVBQVUsVUFBVSxFQUFFLEtBQUssa0JBQWtCLENBQUM7QUFDOUQsU0FBSyxpQkFBaUI7QUFHdEIsVUFBTSxvQkFBb0IsVUFBVSxVQUFVLEVBQUUsS0FBSyw4QkFBOEIsQ0FBQztBQUNwRixVQUFNLGdCQUFnQixrQkFBa0IsVUFBVSxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFDakYsU0FBSyxnQkFBZ0IsY0FBYyxVQUFVLEVBQUUsS0FBSyx3QkFBd0IsQ0FBQztBQUc3RSxVQUFNLGVBQWUsVUFBVSxVQUFVLEVBQUUsS0FBSyx5QkFBeUIsQ0FBQztBQUMxRSxpQkFBYSxjQUFjO0FBQzNCLFNBQUssY0FBYyxRQUFRLFNBQVMsYUFBYSxLQUFLO0FBR3RELFNBQUssWUFBWSxVQUFVLFVBQVUsRUFBRSxLQUFLLG1CQUFtQixDQUFDO0FBQ2hFLFNBQUssY0FBYztBQUduQixRQUFJLEtBQUssVUFBVTtBQUNqQixZQUFNLGtCQUFrQixVQUFVLFVBQVUsRUFBRSxLQUFLLDRCQUE0QixDQUFDO0FBQ2hGLFdBQUssZUFBZSxnQkFBZ0IsU0FBUyxVQUFVLEVBQUUsTUFBTSxlQUFLLENBQUM7QUFDckUsV0FBSyxhQUFhLGlCQUFpQixTQUFTLE1BQU07QUFDaEQsWUFBSSxLQUFLLFVBQVU7QUFDakIsZUFBSyxTQUFTO0FBQ2QsZUFBSyxNQUFNO0FBQUEsUUFDYjtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLFVBQWtDO0FBQy9DLFNBQUssV0FBVztBQUNoQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGtCQUFrQjtBQUN2QixTQUFLLGNBQWM7QUFHbkIsUUFBSSxTQUFTLFdBQVcsYUFBYTtBQUNuQyxpQkFBVyxNQUFNLEtBQUssTUFBTSxHQUFHLElBQUk7QUFBQSxJQUNyQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLG1CQUF5QjtBQUMvQixRQUFJLENBQUMsS0FBSyxTQUFVO0FBRXBCLFFBQUksYUFBYTtBQUNqQixZQUFRLEtBQUssU0FBUyxRQUFRO0FBQUEsTUFDNUIsS0FBSztBQUNILHFCQUFhO0FBQ2I7QUFBQSxNQUNGLEtBQUs7QUFDSCxxQkFBYSxpQ0FBYSxLQUFLLFNBQVMsY0FBYyxJQUFJLEtBQUssU0FBUyxVQUFVO0FBQ2xGO0FBQUEsTUFDRixLQUFLO0FBQ0gscUJBQWE7QUFDYjtBQUFBLE1BQ0YsS0FBSztBQUNILHFCQUFhLDhCQUFVLEtBQUssU0FBUyxTQUFTLHlDQUFXO0FBQ3pEO0FBQUEsTUFDRixLQUFLO0FBQ0gscUJBQWE7QUFDYjtBQUFBLElBQ0o7QUFFQSxTQUFLLFNBQVMsY0FBYztBQUFBLEVBQzlCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxvQkFBMEI7QUFDaEMsUUFBSSxDQUFDLEtBQUssY0FBZTtBQUV6QixVQUFNLGFBQ0osS0FBSyxTQUFTLGFBQWEsSUFDdkIsS0FBSyxNQUFPLEtBQUssU0FBUyxpQkFBaUIsS0FBSyxTQUFTLGFBQWMsR0FBRyxJQUMxRTtBQUVOLFNBQUssY0FBYyxNQUFNLFFBQVEsR0FBRyxVQUFVO0FBRTlDLFVBQU0sZUFBZSxTQUFTLGVBQWUsZUFBZTtBQUM1RCxRQUFJLGNBQWM7QUFDaEIsbUJBQWEsY0FBYyxHQUFHLFVBQVU7QUFBQSxJQUMxQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGdCQUFzQjtBQUM1QixRQUFJLENBQUMsS0FBSyxVQUFXO0FBRXJCLFFBQUksVUFBVTtBQUNkLFFBQUksS0FBSyxTQUFTLGFBQWE7QUFFN0IsWUFBTSxXQUFXLEtBQUssU0FBUyxZQUFZLE1BQU0sR0FBRyxFQUFFLElBQUksS0FBSyxLQUFLLFNBQVM7QUFDN0UsZ0JBQVUsOEJBQVUsUUFBUTtBQUFBLElBQzlCLFdBQVcsS0FBSyxTQUFTLFdBQVcsZ0JBQWdCO0FBQ2xELGdCQUFVO0FBQUEsSUFDWixXQUFXLEtBQUssU0FBUyxXQUFXLGFBQWE7QUFDL0MsZ0JBQVUsVUFBSyxLQUFLLFNBQVMsVUFBVTtBQUFBLElBQ3pDO0FBRUEsU0FBSyxVQUFVLGNBQWM7QUFBQSxFQUMvQjtBQUFBLEVBRUEsVUFBZ0I7QUFDZCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2xCO0FBQ0Y7OztBQ2hKTyxTQUFTLFdBQVcsU0FBcUM7QUFDOUQsTUFBSTtBQUNKLE1BQUk7QUFDRixXQUFPLEtBQUssTUFBTSxPQUFPO0FBQUEsRUFDM0IsU0FBUTtBQUNOLFVBQU0sSUFBSSxNQUFNLDRFQUFxQjtBQUFBLEVBQ3ZDO0FBRUEsTUFBSSxDQUFDLE1BQU0sUUFBUSxJQUFJLEdBQUc7QUFDeEIsVUFBTSxJQUFJLE1BQU0sK0RBQWtCO0FBQUEsRUFDcEM7QUFFQSxTQUFPLEtBQUssSUFBSSxDQUFDLE1BQU0sVUFBVTtBQUMvQixRQUFJLENBQUMsUUFBUSxPQUFPLFNBQVMsVUFBVTtBQUNyQyxZQUFNLElBQUksTUFBTSxvQ0FBVyxRQUFRLENBQUMsY0FBSTtBQUFBLElBQzFDO0FBRUEsVUFBTSxPQUFRLEtBQTJCO0FBQ3pDLFVBQU0sZUFBZ0IsS0FBOEI7QUFDcEQsVUFBTSxpQkFBa0IsS0FBZ0M7QUFFeEQsUUFBSSxTQUFTLFVBQVUsU0FBUyxlQUFlLFNBQVMsVUFBVTtBQUNoRSxZQUFNLElBQUksTUFBTSxpRUFBb0IsUUFBUSxDQUFDLGNBQUk7QUFBQSxJQUNuRDtBQUNBLFFBQUksT0FBTyxpQkFBaUIsWUFBWSxDQUFDLGFBQWEsS0FBSyxHQUFHO0FBQzVELFlBQU0sSUFBSSxNQUFNLG9FQUF1QixRQUFRLENBQUMsY0FBSTtBQUFBLElBQ3REO0FBRUEsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBLFNBQVM7QUFBQSxNQUNULFdBQVc7QUFBQSxJQUNiO0FBQUEsRUFDRixDQUFDO0FBQ0g7OztBQ3BDQSxJQUFBQyxtQkFBc0U7QUFXL0QsSUFBTSxnQkFBTixjQUE0QixrQ0FBaUI7QUFBQSxFQUlsRCxZQUFZLFFBQXNCO0FBQ2hDLFVBQU0sT0FBTyxLQUFLLE1BQU07QUFIMUIsU0FBUSxlQUF5QixDQUFDO0FBSWhDLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxVQUFnQjtBQUNkLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUVsQixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLG1CQUFTLENBQUM7QUFFN0MsUUFBSSxjQUE0RDtBQUNoRSxRQUFJLGFBQTJEO0FBRS9ELFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLHdCQUFTLEVBQ2pCLFFBQVEsdUdBQWlDLEVBQ3pDLFlBQVksQ0FBQyxhQUFhO0FBQ3pCLGVBQ0csV0FBVztBQUFBLFFBQ1YsUUFBUTtBQUFBLFFBQ1IsUUFBUTtBQUFBLFFBQ1IsUUFBUTtBQUFBLFFBQ1IsUUFBUTtBQUFBLE1BQ1YsQ0FBQyxFQUNBLFNBQVMsS0FBSyxPQUFPLFNBQVMsUUFBUSxFQUN0QyxTQUFTLE9BQU8sVUFBVTtBQUN6QixjQUFNLFdBQVc7QUFDakIsYUFBSyxPQUFPLFNBQVMsV0FBVztBQUNoQyxjQUFNLFNBQVMsaUJBQWlCLFFBQVE7QUFDeEMsYUFBSyxPQUFPLFNBQVMsU0FBUyxPQUFPO0FBQ3JDLGFBQUssT0FBTyxTQUFTLFFBQVEsT0FBTztBQUNwQyxtREFBYSxTQUFTLE9BQU87QUFDN0IsaURBQVksU0FBUyxPQUFPO0FBQzVCLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsYUFBSyxRQUFRO0FBQUEsTUFDZixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUgsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsU0FBUyxFQUNqQixRQUFRLDBFQUFtQixFQUMzQixRQUFRLENBQUMsU0FBUztBQUNqQixvQkFBYztBQUNkLFdBQ0csZUFBZSw0Q0FBNEMsRUFDM0QsU0FBUyxLQUFLLE9BQU8sU0FBUyxNQUFNLEVBQ3BDLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLFNBQVMsTUFBTSxLQUFLO0FBQ3pDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUgsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsWUFBTyxFQUNmLFFBQVEsa0lBQW1DLEVBQzNDO0FBQUEsTUFBUSxDQUFDLFNBQ1IsS0FDRyxlQUFlLGNBQUksRUFDbkIsU0FBUyxLQUFLLE9BQU8sU0FBUyxNQUFNLEVBQ3BDLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLFNBQVM7QUFDOUIsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUNMO0FBRUYsUUFBSSxLQUFLLE9BQU8sU0FBUyxhQUFhLFVBQVU7QUFDOUMsVUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsa0NBQWMsRUFDdEIsUUFBUSx1SUFBbUMsRUFDM0MsVUFBVSxDQUFDLFdBQVc7QUFDckIsZUFBTyxjQUFjLHVDQUFTLEVBQUUsUUFBUSxZQUFZO0FBQ2xELGdCQUFNLEtBQUssaUJBQWlCO0FBQzVCLGVBQUssUUFBUTtBQUFBLFFBQ2YsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUVILFVBQUksS0FBSyxhQUFhLFNBQVMsR0FBRztBQUNoQyxZQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSxrQ0FBYyxFQUN0QixRQUFRLDBIQUEyQixFQUNuQyxZQUFZLENBQUMsYUFBYTtBQUN6QixnQkFBTUMsV0FBVSxLQUFLLGFBQWE7QUFBQSxZQUNoQyxDQUFDLEtBQUssU0FBUztBQUNiLGtCQUFJLElBQUksSUFBSTtBQUNaLHFCQUFPO0FBQUEsWUFDVDtBQUFBLFlBQ0EsQ0FBQztBQUFBLFVBQ0g7QUFDQSxtQkFDRyxXQUFXQSxRQUFPLEVBQ2xCLFNBQVMsS0FBSyxPQUFPLFNBQVMsS0FBSyxFQUNuQyxTQUFTLE9BQU8sVUFBVTtBQUN6QixpQkFBSyxPQUFPLFNBQVMsUUFBUTtBQUM3QixxREFBWSxTQUFTO0FBQ3JCLGtCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsVUFDakMsQ0FBQztBQUFBLFFBQ0wsQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNGO0FBRUEsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsY0FBSSxFQUNaLFFBQVEsNkZBQXVCLEVBQy9CLFFBQVEsQ0FBQyxTQUFTO0FBQ2pCLG1CQUFhO0FBQ2IsV0FDRyxlQUFlLGFBQWEsRUFDNUIsU0FBUyxLQUFLLE9BQU8sU0FBUyxLQUFLLEVBQ25DLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLFFBQVEsTUFBTSxLQUFLO0FBQ3hDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUgsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsd0NBQVUsRUFDbEIsUUFBUSxtS0FBc0MsRUFDOUM7QUFBQSxNQUFRLENBQUMsU0FDUixLQUNHLGVBQWUsYUFBYSxFQUM1QixTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsRUFDeEMsU0FBUyxPQUFPLFVBQVU7QUFDekIsYUFBSyxPQUFPLFNBQVMsYUFBYSxNQUFNLEtBQUs7QUFDN0MsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUNMO0FBRUYsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsNkNBQVUsRUFDbEIsUUFBUSwwRkFBb0IsRUFDNUI7QUFBQSxNQUFZLENBQUMsU0FDWixLQUNHLGVBQWUsd0ZBQTRCLEVBQzNDLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFBWSxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUN6QixhQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDTDtBQUVGLFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLHdDQUFVLEVBQ2xCLFFBQVEsNkZBQXVCLEVBQy9CO0FBQUEsTUFBUSxDQUFDLFNBQ1IsS0FDRyxlQUFlLHVCQUFrQixFQUNqQyxTQUFTLEtBQUssT0FBTyxTQUFTLG1CQUFtQixFQUNqRCxTQUFTLE9BQU8sVUFBVTtBQUN6QixhQUFLLE9BQU8sU0FBUyxzQkFBc0IsTUFBTSxLQUFLO0FBQ3RELGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDO0FBQUEsSUFDTDtBQUVGLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sc0RBQWMsQ0FBQztBQUVsRCxRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSx1Q0FBUyxFQUNqQixRQUFRLHNJQUE2QixFQUNyQztBQUFBLE1BQVUsQ0FBQyxXQUNWLE9BQ0csU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLEVBQzdDLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLGtCQUFrQjtBQUN2QyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakMsQ0FBQztBQUFBLElBQ0w7QUFFRixRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSw4Q0FBVyxFQUNuQixRQUFRLDBLQUF3QyxFQUNoRCxVQUFVLENBQUMsV0FBVztBQUNyQixhQUNHLGNBQWMsOENBQVcsRUFDekIsT0FBTyxFQUNQLFFBQVEsWUFBWTtBQUNuQixlQUFPLFlBQVksSUFBSTtBQUN2QixlQUFPLGNBQWMsd0JBQVM7QUFDOUIsWUFBSTtBQUNGLGdCQUFNLEtBQUssT0FBTyxjQUFjO0FBQ2hDLGNBQUksd0JBQU8sK0NBQVk7QUFBQSxRQUN6QixTQUFTLE9BQU87QUFDZCxnQkFBTSxVQUFVLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDckUsY0FBSSx3QkFBTyxvQ0FBVyxPQUFPLEVBQUU7QUFBQSxRQUNqQyxVQUFFO0FBQ0EsaUJBQU8sWUFBWSxLQUFLO0FBQ3hCLGlCQUFPLGNBQWMsOENBQVc7QUFBQSxRQUNsQztBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUVILFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLG9EQUFZLEVBQ3BCLFFBQVEsK0pBQWtDLEVBQzFDLFVBQVUsQ0FBQyxXQUFXO0FBQ3JCLGFBQ0csY0FBYyw4Q0FBVyxFQUN6QixRQUFRLFlBQVk7QUFDbkIsZUFBTyxZQUFZLElBQUk7QUFDdkIsZUFBTyxjQUFjLHdCQUFTO0FBQzlCLFlBQUk7QUFDRixnQkFBTSxLQUFLLE9BQU8sa0JBQWtCO0FBQ3BDLGNBQUksd0JBQU8sK0NBQVk7QUFBQSxRQUN6QixTQUFTLE9BQU87QUFDZCxnQkFBTSxVQUFVLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDckUsY0FBSSx3QkFBTyxvQ0FBVyxPQUFPLEVBQUU7QUFBQSxRQUNqQyxVQUFFO0FBQ0EsaUJBQU8sWUFBWSxLQUFLO0FBQ3hCLGlCQUFPLGNBQWMsOENBQVc7QUFBQSxRQUNsQztBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUVILFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLDJCQUFPLEVBQ2YsUUFBUSxtSUFBb0MsRUFDNUM7QUFBQSxNQUFRLENBQUMsU0FDUixLQUNHLGVBQWUsS0FBSyxFQUNwQixTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMsU0FBUyxDQUFDLEVBQy9DLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGNBQU0sTUFBTSxTQUFTLEtBQUs7QUFDMUIsWUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE1BQU0sR0FBRztBQUMxQixlQUFLLE9BQU8sU0FBUyxZQUFZO0FBQ2pDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDakM7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNMO0FBRUYsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsaUNBQVEsRUFDaEIsUUFBUSx3R0FBNkIsRUFDckM7QUFBQSxNQUFRLENBQUMsU0FDUixLQUNHLGVBQWUsSUFBSSxFQUNuQixTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMsWUFBWSxDQUFDLEVBQ2xELFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGNBQU0sTUFBTSxTQUFTLEtBQUs7QUFDMUIsWUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE9BQU8sR0FBRztBQUMzQixlQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDakM7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNMO0FBRUYsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsMENBQWlCLEVBQ3pCLFFBQVEsMkZBQTBCLEVBQ2xDO0FBQUEsTUFBUSxDQUFDLFNBQ1IsS0FDRyxlQUFlLEdBQUcsRUFDbEIsU0FBUyxPQUFPLEtBQUssT0FBTyxTQUFTLElBQUksQ0FBQyxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUN6QixjQUFNLE1BQU0sU0FBUyxLQUFLO0FBQzFCLFlBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxNQUFNLEdBQUc7QUFDMUIsZUFBSyxPQUFPLFNBQVMsT0FBTztBQUM1QixnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2pDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDTDtBQUVGLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sa0NBQVMsQ0FBQztBQUU3QyxRQUFJLHNCQUFvRTtBQUV4RSxRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSx1Q0FBUyxFQUNqQixRQUFRLGtIQUF3QixFQUNoQyxZQUFZLENBQUMsYUFBYTtBQUN6QixlQUNHLFdBQVc7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxNQUNWLENBQUMsRUFDQSxTQUFTLEtBQUssT0FBTyxTQUFTLGlCQUFpQixFQUMvQyxTQUFTLE9BQU8sVUFBVTtBQUN6QixjQUFNLFdBQVc7QUFDakIsYUFBSyxPQUFPLFNBQVMsb0JBQW9CO0FBQ3pDLGNBQU0sU0FBUyxrQkFBa0IsUUFBUTtBQUN6QyxhQUFLLE9BQU8sU0FBUyxpQkFBaUIsT0FBTztBQUM3QyxtRUFBcUIsU0FBUyxPQUFPO0FBQ3JDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsYUFBSyxRQUFRO0FBQUEsTUFDZixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUgsUUFBSSxLQUFLLE9BQU8sU0FBUyxzQkFBc0IsU0FBUztBQUN0RCxVQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSwrQkFBVyxFQUNuQixRQUFRLDRGQUFnQyxFQUN4QztBQUFBLFFBQVEsQ0FBQyxTQUNSLEtBQ0csZUFBZSxjQUFJLEVBQ25CLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFBZSxFQUM3QyxTQUFTLE9BQU8sVUFBVTtBQUN6QixlQUFLLE9BQU8sU0FBUyxrQkFBa0I7QUFDdkMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNqQyxDQUFDO0FBQUEsTUFDTDtBQUFBLElBQ0o7QUFFQSxRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSxpQ0FBUSxFQUNoQixRQUFRLG9EQUFZLEVBQ3BCLFFBQVEsQ0FBQyxTQUFTO0FBQ2pCLDRCQUFzQjtBQUN0QixXQUNHLGVBQWUsb0JBQUssRUFDcEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLEVBQzVDLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLGlCQUFpQixNQUFNLEtBQUs7QUFDakQsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUNMLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFFQSxNQUFjLG1CQUFrQztBQTdVbEQ7QUE4VUksVUFBTSxTQUFTLEtBQUssT0FBTyxTQUFTLE9BQU8sS0FBSztBQUNoRCxRQUFJLENBQUMsUUFBUTtBQUNYLFVBQUksd0JBQU8sNkVBQTJCO0FBQ3RDO0FBQUEsSUFDRjtBQUVBLFFBQUk7QUFDRixZQUFNLFdBQVcsVUFBTSw2QkFBVztBQUFBLFFBQ2hDLEtBQUssK0RBQStELE1BQU07QUFBQSxNQUM1RSxDQUFDO0FBQ0QsWUFBTSxPQUFPLFNBQVM7QUFHdEIsWUFBTSxVQUFTLGtDQUFNLFdBQU4sWUFBZ0IsQ0FBQztBQUNoQyxXQUFLLGVBQWUsT0FDakIsT0FBTyxDQUFDLFVBQU87QUE3VnhCLFlBQUFDO0FBNlYyQixnQkFBQUEsTUFBQSxNQUFNLCtCQUFOLGdCQUFBQSxJQUFrQyxTQUFTO0FBQUEsT0FBa0IsRUFDL0UsSUFBSSxDQUFDLFVBQVUsTUFBTSxJQUFJLEVBQ3pCLE9BQU8sQ0FBQyxTQUF5QixRQUFRLElBQUksQ0FBQztBQUVqRCxVQUFJLEtBQUssYUFBYSxXQUFXLEdBQUc7QUFDbEMsWUFBSSx3QkFBTyx3R0FBNkI7QUFBQSxNQUMxQyxPQUFPO0FBQ0wsWUFBSSx3QkFBTyw4RUFBdUI7QUFBQSxNQUNwQztBQUFBLElBQ0YsU0FBUyxPQUFPO0FBQ2QsWUFBTSxVQUFVLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDckUsVUFBSSx3QkFBTyxrREFBb0IsT0FBTyxFQUFFO0FBQUEsSUFDMUM7QUFBQSxFQUNGO0FBQ0Y7OztBQzNXQSxJQUFBQyxtQkFBa0U7OztBQ2EzRCxTQUFTLGdCQUFnQixNQUF3QjtBQUN0RCxNQUFJLENBQUMsUUFBUSxLQUFLLEtBQUssRUFBRSxXQUFXLEdBQUc7QUFDckMsV0FBTyxDQUFDO0FBQUEsRUFDVjtBQUdBLFFBQU0sVUFBVSxLQUNiLFFBQVEscUJBQXFCLEdBQUcsRUFDaEMsWUFBWSxFQUNaLEtBQUs7QUFHUixRQUFNLFFBQVEsUUFBUSxNQUFNLEtBQUssRUFBRSxPQUFPLFVBQVEsS0FBSyxTQUFTLENBQUM7QUFHakUsUUFBTSxZQUFZLG9CQUFJLElBQUk7QUFBQSxJQUN4QjtBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQzlEO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFLO0FBQUEsSUFDakU7QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFDMUM7QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFLO0FBQUEsSUFBTTtBQUFBLElBQy9DO0FBQUEsSUFBSztBQUFBLElBQU07QUFBQSxJQUFLO0FBQUEsSUFBTztBQUFBLElBQU87QUFBQSxJQUM5QjtBQUFBLElBQU87QUFBQSxJQUFPO0FBQUEsSUFBTztBQUFBLElBQU07QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQ3JDO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFDcEM7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLEVBQzNCLENBQUM7QUFFRCxRQUFNLFdBQVcsTUFBTSxPQUFPLFVBQVEsQ0FBQyxVQUFVLElBQUksSUFBSSxLQUFLLEtBQUssVUFBVSxDQUFDO0FBRzlFLFFBQU0sWUFBWSxvQkFBSSxJQUFvQjtBQUMxQyxhQUFXLFFBQVEsVUFBVTtBQUMzQixjQUFVLElBQUksT0FBTyxVQUFVLElBQUksSUFBSSxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQ3BEO0FBR0EsUUFBTSxTQUFTLE1BQU0sS0FBSyxVQUFVLFFBQVEsQ0FBQyxFQUMxQyxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQzFCLElBQUksQ0FBQyxDQUFDLElBQUksTUFBTSxJQUFJO0FBR3ZCLFNBQU8sT0FBTyxNQUFNLEdBQUcsRUFBRTtBQUMzQjs7O0FDakRBLElBQUk7QUFBQSxDQUNILFNBQVVDLGFBQVk7QUFFbkIsRUFBQUEsWUFBVyxRQUFRLElBQUk7QUFFdkIsRUFBQUEsWUFBVyxRQUFRLElBQUk7QUFFdkIsRUFBQUEsWUFBVyxTQUFTLElBQUk7QUFFeEIsRUFBQUEsWUFBVyxTQUFTLElBQUk7QUFFeEIsRUFBQUEsWUFBVyxPQUFPLElBQUk7QUFFdEIsRUFBQUEsWUFBVyxRQUFRLElBQUk7QUFDM0IsR0FBRyxlQUFlLGFBQWEsQ0FBQyxFQUFFO0FBcUJsQyxJQUFJO0FBQUEsQ0FDSCxTQUFVQyx5QkFBd0I7QUFDL0IsRUFBQUEsd0JBQXVCLHNCQUFzQixJQUFJO0FBQ2pELEVBQUFBLHdCQUF1QixRQUFRLElBQUk7QUFDdkMsR0FBRywyQkFBMkIseUJBQXlCLENBQUMsRUFBRTtBQUsxRCxJQUFJO0FBQUEsQ0FDSCxTQUFVQyxVQUFTO0FBSWhCLEVBQUFBLFNBQVEscUJBQXFCLElBQUk7QUFJakMsRUFBQUEsU0FBUSxZQUFZLElBQUk7QUFLeEIsRUFBQUEsU0FBUSxnQkFBZ0IsSUFBSTtBQUs1QixFQUFBQSxTQUFRLDJCQUEyQixJQUFJO0FBQzNDLEdBQUcsWUFBWSxVQUFVLENBQUMsRUFBRTtBQXNCNUIsSUFBTSxpQkFBaUIsQ0FBQyxRQUFRLFNBQVMsWUFBWSxRQUFRO0FBSzdELElBQUk7QUFBQSxDQUNILFNBQVVDLGVBQWM7QUFDckIsRUFBQUEsY0FBYSwyQkFBMkIsSUFBSTtBQUM1QyxFQUFBQSxjQUFhLDJCQUEyQixJQUFJO0FBQzVDLEVBQUFBLGNBQWEsaUNBQWlDLElBQUk7QUFDbEQsRUFBQUEsY0FBYSwwQkFBMEIsSUFBSTtBQUMzQyxFQUFBQSxjQUFhLGlDQUFpQyxJQUFJO0FBQ2xELEVBQUFBLGNBQWEsK0JBQStCLElBQUk7QUFDcEQsR0FBRyxpQkFBaUIsZUFBZSxDQUFDLEVBQUU7QUFLdEMsSUFBSTtBQUFBLENBQ0gsU0FBVUMscUJBQW9CO0FBRTNCLEVBQUFBLG9CQUFtQixrQ0FBa0MsSUFBSTtBQUV6RCxFQUFBQSxvQkFBbUIscUJBQXFCLElBQUk7QUFFNUMsRUFBQUEsb0JBQW1CLHdCQUF3QixJQUFJO0FBRS9DLEVBQUFBLG9CQUFtQixpQkFBaUIsSUFBSTtBQUV4QyxFQUFBQSxvQkFBbUIsWUFBWSxJQUFJO0FBQ3ZDLEdBQUcsdUJBQXVCLHFCQUFxQixDQUFDLEVBQUU7QUFLbEQsSUFBSTtBQUFBLENBQ0gsU0FBVUMsa0JBQWlCO0FBRXhCLEVBQUFBLGlCQUFnQiw4QkFBOEIsSUFBSTtBQUVsRCxFQUFBQSxpQkFBZ0IsWUFBWSxJQUFJO0FBRWhDLEVBQUFBLGlCQUFnQixLQUFLLElBQUk7QUFFekIsRUFBQUEsaUJBQWdCLFFBQVEsSUFBSTtBQUU1QixFQUFBQSxpQkFBZ0IsTUFBTSxJQUFJO0FBQzlCLEdBQUcsb0JBQW9CLGtCQUFrQixDQUFDLEVBQUU7QUFLNUMsSUFBSTtBQUFBLENBQ0gsU0FBVUMsY0FBYTtBQUVwQixFQUFBQSxhQUFZLDRCQUE0QixJQUFJO0FBRTVDLEVBQUFBLGFBQVksUUFBUSxJQUFJO0FBRXhCLEVBQUFBLGFBQVksT0FBTyxJQUFJO0FBQzNCLEdBQUcsZ0JBQWdCLGNBQWMsQ0FBQyxFQUFFO0FBS3BDLElBQUk7QUFBQSxDQUNILFNBQVVDLGVBQWM7QUFFckIsRUFBQUEsY0FBYSwyQkFBMkIsSUFBSTtBQUU1QyxFQUFBQSxjQUFhLE1BQU0sSUFBSTtBQUV2QixFQUFBQSxjQUFhLFlBQVksSUFBSTtBQUU3QixFQUFBQSxjQUFhLFFBQVEsSUFBSTtBQUV6QixFQUFBQSxjQUFhLFlBQVksSUFBSTtBQUU3QixFQUFBQSxjQUFhLFVBQVUsSUFBSTtBQUUzQixFQUFBQSxjQUFhLFdBQVcsSUFBSTtBQUU1QixFQUFBQSxjQUFhLG9CQUFvQixJQUFJO0FBRXJDLEVBQUFBLGNBQWEsTUFBTSxJQUFJO0FBRXZCLEVBQUFBLGNBQWEseUJBQXlCLElBQUk7QUFFMUMsRUFBQUEsY0FBYSxPQUFPLElBQUk7QUFDNUIsR0FBRyxpQkFBaUIsZUFBZSxDQUFDLEVBQUU7QUFLdEMsSUFBSTtBQUFBLENBQ0gsU0FBVUMsV0FBVTtBQUNqQixFQUFBQSxVQUFTLHVCQUF1QixJQUFJO0FBQ3BDLEVBQUFBLFVBQVMsaUJBQWlCLElBQUk7QUFDOUIsRUFBQUEsVUFBUyxvQkFBb0IsSUFBSTtBQUNqQyxFQUFBQSxVQUFTLHFCQUFxQixJQUFJO0FBQ2xDLEVBQUFBLFVBQVMsZ0JBQWdCLElBQUk7QUFDN0IsRUFBQUEsVUFBUyxZQUFZLElBQUk7QUFDN0IsR0FBRyxhQUFhLFdBQVcsQ0FBQyxFQUFFO0FBSTlCLElBQUk7QUFBQSxDQUNILFNBQVVDLHNCQUFxQjtBQUU1QixFQUFBQSxxQkFBb0Isa0JBQWtCLElBQUk7QUFHMUMsRUFBQUEscUJBQW9CLE1BQU0sSUFBSTtBQUs5QixFQUFBQSxxQkFBb0IsS0FBSyxJQUFJO0FBRzdCLEVBQUFBLHFCQUFvQixNQUFNLElBQUk7QUFDbEMsR0FBRyx3QkFBd0Isc0JBQXNCLENBQUMsRUFBRTtBQUtwRCxJQUFJO0FBQUEsQ0FDSCxTQUFVQyx1QkFBc0I7QUFFN0IsRUFBQUEsc0JBQXFCLGtCQUFrQixJQUFJO0FBRTNDLEVBQUFBLHNCQUFxQixjQUFjLElBQUk7QUFDM0MsR0FBRyx5QkFBeUIsdUJBQXVCLENBQUMsRUFBRTtBQXNCdEQsSUFBTSwwQkFBTixjQUFzQyxNQUFNO0FBQUEsRUFDeEMsWUFBWSxTQUFTO0FBQ2pCLFVBQU0sK0JBQStCLE9BQU8sRUFBRTtBQUFBLEVBQ2xEO0FBQ0o7QUFNQSxJQUFNLGtDQUFOLGNBQThDLHdCQUF3QjtBQUFBLEVBQ2xFLFlBQVksU0FBUyxVQUFVO0FBQzNCLFVBQU0sT0FBTztBQUNiLFNBQUssV0FBVztBQUFBLEVBQ3BCO0FBQ0o7QUFNQSxJQUFNLCtCQUFOLGNBQTJDLHdCQUF3QjtBQUFBLEVBQy9ELFlBQVksU0FBUyxRQUFRLFlBQVksY0FBYztBQUNuRCxVQUFNLE9BQU87QUFDYixTQUFLLFNBQVM7QUFDZCxTQUFLLGFBQWE7QUFDbEIsU0FBSyxlQUFlO0FBQUEsRUFDeEI7QUFDSjtBQUtBLElBQU0sc0NBQU4sY0FBa0Qsd0JBQXdCO0FBQzFFO0FBTUEsSUFBTSwrQkFBTixjQUEyQyx3QkFBd0I7QUFDbkU7QUFrQkEsSUFBTSxtQkFBbUI7QUFDekIsSUFBTSxzQkFBc0I7QUFLNUIsSUFBTSxrQkFBa0I7QUFDeEIsSUFBTSxxQkFBcUI7QUFDM0IsSUFBSTtBQUFBLENBQ0gsU0FBVUMsT0FBTTtBQUNiLEVBQUFBLE1BQUssa0JBQWtCLElBQUk7QUFDM0IsRUFBQUEsTUFBSyx5QkFBeUIsSUFBSTtBQUNsQyxFQUFBQSxNQUFLLGNBQWMsSUFBSTtBQUN2QixFQUFBQSxNQUFLLGVBQWUsSUFBSTtBQUN4QixFQUFBQSxNQUFLLHNCQUFzQixJQUFJO0FBQ25DLEdBQUcsU0FBUyxPQUFPLENBQUMsRUFBRTtBQUN0QixJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQUNiLFlBQVksT0FBTyxNQUFNLFFBQVEsUUFBUSxnQkFBZ0I7QUFDckQsU0FBSyxRQUFRO0FBQ2IsU0FBSyxPQUFPO0FBQ1osU0FBSyxTQUFTO0FBQ2QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxpQkFBaUI7QUFBQSxFQUMxQjtBQUFBLEVBQ0EsV0FBVztBQUNQLFFBQUksSUFBSTtBQUNSLFVBQU0sZUFBZSxLQUFLLEtBQUssb0JBQW9CLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxlQUFlO0FBQ3RHLFVBQU0sWUFBWSxLQUFLLEtBQUssb0JBQW9CLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxZQUFZO0FBQ2hHLFFBQUksTUFBTSxHQUFHLE9BQU8sSUFBSSxVQUFVLElBQUksS0FBSyxLQUFLLElBQUksS0FBSyxJQUFJO0FBQzdELFFBQUksS0FBSyxRQUFRO0FBQ2IsYUFBTztBQUFBLElBQ1g7QUFDQSxXQUFPO0FBQUEsRUFDWDtBQUNKO0FBSUEsU0FBUyxpQkFBaUIsZ0JBQWdCO0FBQ3RDLFFBQU0sZ0JBQWdCLENBQUM7QUFDdkIsTUFBSSxtQkFBbUIsUUFBUSxtQkFBbUIsU0FBUyxTQUFTLGVBQWUsV0FBVztBQUMxRixrQkFBYyxLQUFLLGVBQWUsU0FBUztBQUFBLEVBQy9DO0FBQ0EsZ0JBQWMsS0FBSyxHQUFHLGtCQUFrQixJQUFJLGVBQWUsRUFBRTtBQUM3RCxTQUFPLGNBQWMsS0FBSyxHQUFHO0FBQ2pDO0FBQ0EsZUFBZSxXQUFXLEtBQUs7QUFDM0IsTUFBSTtBQUNKLFFBQU0sVUFBVSxJQUFJLFFBQVE7QUFDNUIsVUFBUSxPQUFPLGdCQUFnQixrQkFBa0I7QUFDakQsVUFBUSxPQUFPLHFCQUFxQixpQkFBaUIsSUFBSSxjQUFjLENBQUM7QUFDeEUsVUFBUSxPQUFPLGtCQUFrQixJQUFJLE1BQU07QUFDM0MsTUFBSSxpQkFBaUIsS0FBSyxJQUFJLG9CQUFvQixRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUc7QUFDdEYsTUFBSSxlQUFlO0FBQ2YsUUFBSSxFQUFFLHlCQUF5QixVQUFVO0FBQ3JDLFVBQUk7QUFDQSx3QkFBZ0IsSUFBSSxRQUFRLGFBQWE7QUFBQSxNQUM3QyxTQUNPLEdBQUc7QUFDTixjQUFNLElBQUksb0NBQW9DLHlDQUF5QyxLQUFLLFVBQVUsYUFBYSxDQUFDLGdCQUFnQixFQUFFLE9BQU8sRUFBRTtBQUFBLE1BQ25KO0FBQUEsSUFDSjtBQUNBLGVBQVcsQ0FBQyxZQUFZLFdBQVcsS0FBSyxjQUFjLFFBQVEsR0FBRztBQUM3RCxVQUFJLGVBQWUsa0JBQWtCO0FBQ2pDLGNBQU0sSUFBSSxvQ0FBb0MsbUNBQW1DLFVBQVUsRUFBRTtBQUFBLE1BQ2pHLFdBQ1MsZUFBZSxxQkFBcUI7QUFDekMsY0FBTSxJQUFJLG9DQUFvQyxlQUFlLFVBQVUsNENBQTRDO0FBQUEsTUFDdkg7QUFDQSxjQUFRLE9BQU8sWUFBWSxXQUFXO0FBQUEsSUFDMUM7QUFBQSxFQUNKO0FBQ0EsU0FBTztBQUNYO0FBQ0EsZUFBZSxzQkFBc0IsT0FBTyxNQUFNLFFBQVEsUUFBUSxNQUFNLGdCQUFnQjtBQUNwRixRQUFNLE1BQU0sSUFBSSxXQUFXLE9BQU8sTUFBTSxRQUFRLFFBQVEsY0FBYztBQUN0RSxTQUFPO0FBQUEsSUFDSCxLQUFLLElBQUksU0FBUztBQUFBLElBQ2xCLGNBQWMsT0FBTyxPQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLGNBQWMsQ0FBQyxHQUFHLEVBQUUsUUFBUSxRQUFRLFNBQVMsTUFBTSxXQUFXLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFBQSxFQUM5STtBQUNKO0FBQ0EsZUFBZSxpQkFBaUIsT0FBTyxNQUFNLFFBQVEsUUFBUSxNQUFNLGlCQUFpQixDQUFDLEdBRXJGLFVBQVUsT0FBTztBQUNiLFFBQU0sRUFBRSxLQUFLLGFBQWEsSUFBSSxNQUFNLHNCQUFzQixPQUFPLE1BQU0sUUFBUSxRQUFRLE1BQU0sY0FBYztBQUMzRyxTQUFPLFlBQVksS0FBSyxjQUFjLE9BQU87QUFDakQ7QUFDQSxlQUFlLFlBQVksS0FBSyxjQUFjLFVBQVUsT0FBTztBQUMzRCxNQUFJO0FBQ0osTUFBSTtBQUNBLGVBQVcsTUFBTSxRQUFRLEtBQUssWUFBWTtBQUFBLEVBQzlDLFNBQ08sR0FBRztBQUNOLHdCQUFvQixHQUFHLEdBQUc7QUFBQSxFQUM5QjtBQUNBLE1BQUksQ0FBQyxTQUFTLElBQUk7QUFDZCxVQUFNLG9CQUFvQixVQUFVLEdBQUc7QUFBQSxFQUMzQztBQUNBLFNBQU87QUFDWDtBQUNBLFNBQVMsb0JBQW9CLEdBQUcsS0FBSztBQUNqQyxNQUFJLE1BQU07QUFDVixNQUFJLElBQUksU0FBUyxjQUFjO0FBQzNCLFVBQU0sSUFBSSw2QkFBNkIsaUNBQWlDLElBQUksU0FBUyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUU7QUFDdEcsUUFBSSxRQUFRLEVBQUU7QUFBQSxFQUNsQixXQUNTLEVBQUUsYUFBYSxnQ0FDcEIsYUFBYSxzQ0FBc0M7QUFDbkQsVUFBTSxJQUFJLHdCQUF3Qix1QkFBdUIsSUFBSSxTQUFTLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRTtBQUN2RixRQUFJLFFBQVEsRUFBRTtBQUFBLEVBQ2xCO0FBQ0EsUUFBTTtBQUNWO0FBQ0EsZUFBZSxvQkFBb0IsVUFBVSxLQUFLO0FBQzlDLE1BQUksVUFBVTtBQUNkLE1BQUk7QUFDSixNQUFJO0FBQ0EsVUFBTSxPQUFPLE1BQU0sU0FBUyxLQUFLO0FBQ2pDLGNBQVUsS0FBSyxNQUFNO0FBQ3JCLFFBQUksS0FBSyxNQUFNLFNBQVM7QUFDcEIsaUJBQVcsSUFBSSxLQUFLLFVBQVUsS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUNqRCxxQkFBZSxLQUFLLE1BQU07QUFBQSxJQUM5QjtBQUFBLEVBQ0osU0FDTyxHQUFHO0FBQUEsRUFFVjtBQUNBLFFBQU0sSUFBSSw2QkFBNkIsdUJBQXVCLElBQUksU0FBUyxDQUFDLE1BQU0sU0FBUyxNQUFNLElBQUksU0FBUyxVQUFVLEtBQUssT0FBTyxJQUFJLFNBQVMsUUFBUSxTQUFTLFlBQVksWUFBWTtBQUM5TDtBQU1BLFNBQVMsa0JBQWtCLGdCQUFnQjtBQUN2QyxRQUFNLGVBQWUsQ0FBQztBQUN0QixPQUFLLG1CQUFtQixRQUFRLG1CQUFtQixTQUFTLFNBQVMsZUFBZSxZQUFZLFdBQWMsbUJBQW1CLFFBQVEsbUJBQW1CLFNBQVMsU0FBUyxlQUFlLFlBQVksR0FBRztBQUN4TSxVQUFNLGFBQWEsSUFBSSxnQkFBZ0I7QUFDdkMsU0FBSyxtQkFBbUIsUUFBUSxtQkFBbUIsU0FBUyxTQUFTLGVBQWUsWUFBWSxHQUFHO0FBQy9GLGlCQUFXLE1BQU0sV0FBVyxNQUFNLEdBQUcsZUFBZSxPQUFPO0FBQUEsSUFDL0Q7QUFDQSxRQUFJLG1CQUFtQixRQUFRLG1CQUFtQixTQUFTLFNBQVMsZUFBZSxRQUFRO0FBQ3ZGLHFCQUFlLE9BQU8saUJBQWlCLFNBQVMsTUFBTTtBQUNsRCxtQkFBVyxNQUFNO0FBQUEsTUFDckIsQ0FBQztBQUFBLElBQ0w7QUFDQSxpQkFBYSxTQUFTLFdBQVc7QUFBQSxFQUNyQztBQUNBLFNBQU87QUFDWDtBQXNCQSxTQUFTLFdBQVcsVUFBVTtBQUMxQixXQUFTLE9BQU8sTUFBTTtBQUNsQixRQUFJLFNBQVMsY0FBYyxTQUFTLFdBQVcsU0FBUyxHQUFHO0FBQ3ZELFVBQUksU0FBUyxXQUFXLFNBQVMsR0FBRztBQUNoQyxnQkFBUSxLQUFLLHFCQUFxQixTQUFTLFdBQVcsTUFBTSw2SEFFVTtBQUFBLE1BQzFFO0FBQ0EsVUFBSSxtQkFBbUIsU0FBUyxXQUFXLENBQUMsQ0FBQyxHQUFHO0FBQzVDLGNBQU0sSUFBSSxnQ0FBZ0MsR0FBRyx3QkFBd0IsUUFBUSxDQUFDLElBQUksUUFBUTtBQUFBLE1BQzlGO0FBQ0EsYUFBTyxRQUFRLFFBQVE7QUFBQSxJQUMzQixXQUNTLFNBQVMsZ0JBQWdCO0FBQzlCLFlBQU0sSUFBSSxnQ0FBZ0MsdUJBQXVCLHdCQUF3QixRQUFRLENBQUMsSUFBSSxRQUFRO0FBQUEsSUFDbEg7QUFDQSxXQUFPO0FBQUEsRUFDWDtBQUlBLFdBQVMsZUFBZSxNQUFNO0FBQzFCLFFBQUksU0FBUyxjQUFjLFNBQVMsV0FBVyxTQUFTLEdBQUc7QUFDdkQsVUFBSSxTQUFTLFdBQVcsU0FBUyxHQUFHO0FBQ2hDLGdCQUFRLEtBQUsscUJBQXFCLFNBQVMsV0FBVyxNQUFNLHVJQUVVO0FBQUEsTUFDMUU7QUFDQSxVQUFJLG1CQUFtQixTQUFTLFdBQVcsQ0FBQyxDQUFDLEdBQUc7QUFDNUMsY0FBTSxJQUFJLGdDQUFnQyxHQUFHLHdCQUF3QixRQUFRLENBQUMsSUFBSSxRQUFRO0FBQUEsTUFDOUY7QUFDQSxjQUFRLEtBQUssOEVBQzhCO0FBQzNDLGFBQU8saUJBQWlCLFFBQVEsRUFBRSxDQUFDO0FBQUEsSUFDdkMsV0FDUyxTQUFTLGdCQUFnQjtBQUM5QixZQUFNLElBQUksZ0NBQWdDLGdDQUFnQyx3QkFBd0IsUUFBUSxDQUFDLElBQUksUUFBUTtBQUFBLElBQzNIO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFDQSxXQUFTLGdCQUFnQixNQUFNO0FBQzNCLFFBQUksU0FBUyxjQUFjLFNBQVMsV0FBVyxTQUFTLEdBQUc7QUFDdkQsVUFBSSxTQUFTLFdBQVcsU0FBUyxHQUFHO0FBQ2hDLGdCQUFRLEtBQUsscUJBQXFCLFNBQVMsV0FBVyxNQUFNLHVJQUVVO0FBQUEsTUFDMUU7QUFDQSxVQUFJLG1CQUFtQixTQUFTLFdBQVcsQ0FBQyxDQUFDLEdBQUc7QUFDNUMsY0FBTSxJQUFJLGdDQUFnQyxHQUFHLHdCQUF3QixRQUFRLENBQUMsSUFBSSxRQUFRO0FBQUEsTUFDOUY7QUFDQSxhQUFPLGlCQUFpQixRQUFRO0FBQUEsSUFDcEMsV0FDUyxTQUFTLGdCQUFnQjtBQUM5QixZQUFNLElBQUksZ0NBQWdDLGdDQUFnQyx3QkFBd0IsUUFBUSxDQUFDLElBQUksUUFBUTtBQUFBLElBQzNIO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFDQSxTQUFPO0FBQ1g7QUFJQSxTQUFTLFFBQVEsVUFBVTtBQUN2QixNQUFJLElBQUksSUFBSSxJQUFJO0FBQ2hCLFFBQU0sY0FBYyxDQUFDO0FBQ3JCLE9BQUssTUFBTSxLQUFLLFNBQVMsZ0JBQWdCLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxDQUFDLEVBQUUsYUFBYSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsT0FBTztBQUNwSSxlQUFXLFNBQVMsTUFBTSxLQUFLLFNBQVMsZ0JBQWdCLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxDQUFDLEVBQUUsYUFBYSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsT0FBTztBQUNuSixVQUFJLEtBQUssTUFBTTtBQUNYLG9CQUFZLEtBQUssS0FBSyxJQUFJO0FBQUEsTUFDOUI7QUFDQSxVQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLG9CQUFZLEtBQUssVUFDYixLQUFLLGVBQWUsV0FDcEIsT0FDQSxLQUFLLGVBQWUsT0FDcEIsU0FBUztBQUFBLE1BQ2pCO0FBQ0EsVUFBSSxLQUFLLHFCQUFxQjtBQUMxQixvQkFBWSxLQUFLLFlBQVksS0FBSyxvQkFBb0IsU0FBUyxTQUFTO0FBQUEsTUFDNUU7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNBLE1BQUksWUFBWSxTQUFTLEdBQUc7QUFDeEIsV0FBTyxZQUFZLEtBQUssRUFBRTtBQUFBLEVBQzlCLE9BQ0s7QUFDRCxXQUFPO0FBQUEsRUFDWDtBQUNKO0FBSUEsU0FBUyxpQkFBaUIsVUFBVTtBQUNoQyxNQUFJLElBQUksSUFBSSxJQUFJO0FBQ2hCLFFBQU0sZ0JBQWdCLENBQUM7QUFDdkIsT0FBSyxNQUFNLEtBQUssU0FBUyxnQkFBZ0IsUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHLENBQUMsRUFBRSxhQUFhLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxPQUFPO0FBQ3BJLGVBQVcsU0FBUyxNQUFNLEtBQUssU0FBUyxnQkFBZ0IsUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHLENBQUMsRUFBRSxhQUFhLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxPQUFPO0FBQ25KLFVBQUksS0FBSyxjQUFjO0FBQ25CLHNCQUFjLEtBQUssS0FBSyxZQUFZO0FBQUEsTUFDeEM7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNBLE1BQUksY0FBYyxTQUFTLEdBQUc7QUFDMUIsV0FBTztBQUFBLEVBQ1gsT0FDSztBQUNELFdBQU87QUFBQSxFQUNYO0FBQ0o7QUFDQSxJQUFNLG1CQUFtQjtBQUFBLEVBQ3JCLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFDakI7QUFDQSxTQUFTLG1CQUFtQixXQUFXO0FBQ25DLFNBQVEsQ0FBQyxDQUFDLFVBQVUsZ0JBQ2hCLGlCQUFpQixTQUFTLFVBQVUsWUFBWTtBQUN4RDtBQUNBLFNBQVMsd0JBQXdCLFVBQVU7QUFDdkMsTUFBSSxJQUFJLElBQUk7QUFDWixNQUFJLFVBQVU7QUFDZCxPQUFLLENBQUMsU0FBUyxjQUFjLFNBQVMsV0FBVyxXQUFXLE1BQ3hELFNBQVMsZ0JBQWdCO0FBQ3pCLGVBQVc7QUFDWCxTQUFLLEtBQUssU0FBUyxvQkFBb0IsUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHLGFBQWE7QUFDcEYsaUJBQVcsV0FBVyxTQUFTLGVBQWUsV0FBVztBQUFBLElBQzdEO0FBQ0EsU0FBSyxLQUFLLFNBQVMsb0JBQW9CLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxvQkFBb0I7QUFDM0YsaUJBQVcsS0FBSyxTQUFTLGVBQWUsa0JBQWtCO0FBQUEsSUFDOUQ7QUFBQSxFQUNKLFlBQ1UsS0FBSyxTQUFTLGdCQUFnQixRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsQ0FBQyxHQUFHO0FBQzVFLFVBQU0saUJBQWlCLFNBQVMsV0FBVyxDQUFDO0FBQzVDLFFBQUksbUJBQW1CLGNBQWMsR0FBRztBQUNwQyxpQkFBVyxnQ0FBZ0MsZUFBZSxZQUFZO0FBQ3RFLFVBQUksZUFBZSxlQUFlO0FBQzlCLG1CQUFXLEtBQUssZUFBZSxhQUFhO0FBQUEsTUFDaEQ7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNBLFNBQU87QUFDWDtBQW1CQSxTQUFTLFFBQVEsR0FBRztBQUNoQixTQUFPLGdCQUFnQixXQUFXLEtBQUssSUFBSSxHQUFHLFFBQVEsSUFBSSxRQUFRLENBQUM7QUFDdkU7QUFFQSxTQUFTLGlCQUFpQixTQUFTLFlBQVksV0FBVztBQUN0RCxNQUFJLENBQUMsT0FBTyxjQUFlLE9BQU0sSUFBSSxVQUFVLHNDQUFzQztBQUNyRixNQUFJLElBQUksVUFBVSxNQUFNLFNBQVMsY0FBYyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztBQUM1RCxTQUFPLElBQUksQ0FBQyxHQUFHLEtBQUssTUFBTSxHQUFHLEtBQUssT0FBTyxHQUFHLEtBQUssUUFBUSxHQUFHLEVBQUUsT0FBTyxhQUFhLElBQUksV0FBWTtBQUFFLFdBQU87QUFBQSxFQUFNLEdBQUc7QUFDcEgsV0FBUyxLQUFLLEdBQUc7QUFBRSxRQUFJLEVBQUUsQ0FBQyxFQUFHLEdBQUUsQ0FBQyxJQUFJLFNBQVUsR0FBRztBQUFFLGFBQU8sSUFBSSxRQUFRLFNBQVUsR0FBRyxHQUFHO0FBQUUsVUFBRSxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxPQUFPLEdBQUcsQ0FBQztBQUFBLE1BQUcsQ0FBQztBQUFBLElBQUc7QUFBQSxFQUFHO0FBQ3pJLFdBQVMsT0FBTyxHQUFHLEdBQUc7QUFBRSxRQUFJO0FBQUUsV0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFBQSxJQUFHLFNBQVMsR0FBRztBQUFFLGFBQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUFHO0FBQUEsRUFBRTtBQUNqRixXQUFTLEtBQUssR0FBRztBQUFFLE1BQUUsaUJBQWlCLFVBQVUsUUFBUSxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUUsS0FBSyxTQUFTLE1BQU0sSUFBSSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDO0FBQUEsRUFBRztBQUN2SCxXQUFTLFFBQVEsT0FBTztBQUFFLFdBQU8sUUFBUSxLQUFLO0FBQUEsRUFBRztBQUNqRCxXQUFTLE9BQU8sT0FBTztBQUFFLFdBQU8sU0FBUyxLQUFLO0FBQUEsRUFBRztBQUNqRCxXQUFTLE9BQU8sR0FBRyxHQUFHO0FBQUUsUUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sR0FBRyxFQUFFLE9BQVEsUUFBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQUEsRUFBRztBQUNyRjtBQXVCQSxJQUFNLGlCQUFpQjtBQVN2QixTQUFTLGNBQWMsVUFBVTtBQUM3QixRQUFNLGNBQWMsU0FBUyxLQUFLLFlBQVksSUFBSSxrQkFBa0IsUUFBUSxFQUFFLE9BQU8sS0FBSyxDQUFDLENBQUM7QUFDNUYsUUFBTSxpQkFBaUIsa0JBQWtCLFdBQVc7QUFDcEQsUUFBTSxDQUFDLFNBQVMsT0FBTyxJQUFJLGVBQWUsSUFBSTtBQUM5QyxTQUFPO0FBQUEsSUFDSCxRQUFRLHlCQUF5QixPQUFPO0FBQUEsSUFDeEMsVUFBVSxtQkFBbUIsT0FBTztBQUFBLEVBQ3hDO0FBQ0o7QUFDQSxlQUFlLG1CQUFtQixRQUFRO0FBQ3RDLFFBQU0sZUFBZSxDQUFDO0FBQ3RCLFFBQU0sU0FBUyxPQUFPLFVBQVU7QUFDaEMsU0FBTyxNQUFNO0FBQ1QsVUFBTSxFQUFFLE1BQU0sTUFBTSxJQUFJLE1BQU0sT0FBTyxLQUFLO0FBQzFDLFFBQUksTUFBTTtBQUNOLGFBQU8sV0FBVyxtQkFBbUIsWUFBWSxDQUFDO0FBQUEsSUFDdEQ7QUFDQSxpQkFBYSxLQUFLLEtBQUs7QUFBQSxFQUMzQjtBQUNKO0FBQ0EsU0FBUyx5QkFBeUIsUUFBUTtBQUN0QyxTQUFPLGlCQUFpQixNQUFNLFdBQVcsVUFBVSw2QkFBNkI7QUFDNUUsVUFBTSxTQUFTLE9BQU8sVUFBVTtBQUNoQyxXQUFPLE1BQU07QUFDVCxZQUFNLEVBQUUsT0FBTyxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU8sS0FBSyxDQUFDO0FBQ25ELFVBQUksTUFBTTtBQUNOO0FBQUEsTUFDSjtBQUNBLFlBQU0sTUFBTSxRQUFRLFdBQVcsS0FBSyxDQUFDO0FBQUEsSUFDekM7QUFBQSxFQUNKLENBQUM7QUFDTDtBQU1BLFNBQVMsa0JBQWtCLGFBQWE7QUFDcEMsUUFBTSxTQUFTLFlBQVksVUFBVTtBQUNyQyxRQUFNLFNBQVMsSUFBSSxlQUFlO0FBQUEsSUFDOUIsTUFBTSxZQUFZO0FBQ2QsVUFBSSxjQUFjO0FBQ2xCLGFBQU8sS0FBSztBQUNaLGVBQVMsT0FBTztBQUNaLGVBQU8sT0FDRixLQUFLLEVBQ0wsS0FBSyxDQUFDLEVBQUUsT0FBTyxLQUFLLE1BQU07QUFDM0IsY0FBSSxNQUFNO0FBQ04sZ0JBQUksWUFBWSxLQUFLLEdBQUc7QUFDcEIseUJBQVcsTUFBTSxJQUFJLHdCQUF3Qix3QkFBd0IsQ0FBQztBQUN0RTtBQUFBLFlBQ0o7QUFDQSx1QkFBVyxNQUFNO0FBQ2pCO0FBQUEsVUFDSjtBQUNBLHlCQUFlO0FBQ2YsY0FBSSxRQUFRLFlBQVksTUFBTSxjQUFjO0FBQzVDLGNBQUk7QUFDSixpQkFBTyxPQUFPO0FBQ1YsZ0JBQUk7QUFDQSwrQkFBaUIsS0FBSyxNQUFNLE1BQU0sQ0FBQyxDQUFDO0FBQUEsWUFDeEMsU0FDTyxHQUFHO0FBQ04seUJBQVcsTUFBTSxJQUFJLHdCQUF3QixpQ0FBaUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQzFGO0FBQUEsWUFDSjtBQUNBLHVCQUFXLFFBQVEsY0FBYztBQUNqQywwQkFBYyxZQUFZLFVBQVUsTUFBTSxDQUFDLEVBQUUsTUFBTTtBQUNuRCxvQkFBUSxZQUFZLE1BQU0sY0FBYztBQUFBLFVBQzVDO0FBQ0EsaUJBQU8sS0FBSztBQUFBLFFBQ2hCLENBQUMsRUFDSSxNQUFNLENBQUMsTUFBTTtBQUNkLGNBQUksTUFBTTtBQUNWLGNBQUksUUFBUSxFQUFFO0FBQ2QsY0FBSSxJQUFJLFNBQVMsY0FBYztBQUMzQixrQkFBTSxJQUFJLDZCQUE2Qiw4Q0FBOEM7QUFBQSxVQUN6RixPQUNLO0FBQ0Qsa0JBQU0sSUFBSSx3QkFBd0IsK0JBQStCO0FBQUEsVUFDckU7QUFDQSxnQkFBTTtBQUFBLFFBQ1YsQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQUEsRUFDSixDQUFDO0FBQ0QsU0FBTztBQUNYO0FBS0EsU0FBUyxtQkFBbUIsV0FBVztBQUNuQyxRQUFNLGVBQWUsVUFBVSxVQUFVLFNBQVMsQ0FBQztBQUNuRCxRQUFNLHFCQUFxQjtBQUFBLElBQ3ZCLGdCQUFnQixpQkFBaUIsUUFBUSxpQkFBaUIsU0FBUyxTQUFTLGFBQWE7QUFBQSxFQUM3RjtBQUNBLGFBQVcsWUFBWSxXQUFXO0FBQzlCLFFBQUksU0FBUyxZQUFZO0FBQ3JCLFVBQUksaUJBQWlCO0FBQ3JCLGlCQUFXLGFBQWEsU0FBUyxZQUFZO0FBQ3pDLFlBQUksQ0FBQyxtQkFBbUIsWUFBWTtBQUNoQyw2QkFBbUIsYUFBYSxDQUFDO0FBQUEsUUFDckM7QUFDQSxZQUFJLENBQUMsbUJBQW1CLFdBQVcsY0FBYyxHQUFHO0FBQ2hELDZCQUFtQixXQUFXLGNBQWMsSUFBSTtBQUFBLFlBQzVDLE9BQU87QUFBQSxVQUNYO0FBQUEsUUFDSjtBQUVBLDJCQUFtQixXQUFXLGNBQWMsRUFBRSxtQkFDMUMsVUFBVTtBQUNkLDJCQUFtQixXQUFXLGNBQWMsRUFBRSxvQkFDMUMsVUFBVTtBQUNkLDJCQUFtQixXQUFXLGNBQWMsRUFBRSxlQUMxQyxVQUFVO0FBQ2QsMkJBQW1CLFdBQVcsY0FBYyxFQUFFLGdCQUMxQyxVQUFVO0FBQ2QsMkJBQW1CLFdBQVcsY0FBYyxFQUFFLGdCQUMxQyxVQUFVO0FBS2QsWUFBSSxVQUFVLFdBQVcsVUFBVSxRQUFRLE9BQU87QUFDOUMsY0FBSSxDQUFDLG1CQUFtQixXQUFXLGNBQWMsRUFBRSxTQUFTO0FBQ3hELCtCQUFtQixXQUFXLGNBQWMsRUFBRSxVQUFVO0FBQUEsY0FDcEQsTUFBTSxVQUFVLFFBQVEsUUFBUTtBQUFBLGNBQ2hDLE9BQU8sQ0FBQztBQUFBLFlBQ1o7QUFBQSxVQUNKO0FBQ0EsZ0JBQU0sVUFBVSxDQUFDO0FBQ2pCLHFCQUFXLFFBQVEsVUFBVSxRQUFRLE9BQU87QUFDeEMsZ0JBQUksS0FBSyxNQUFNO0FBQ1gsc0JBQVEsT0FBTyxLQUFLO0FBQUEsWUFDeEI7QUFDQSxnQkFBSSxLQUFLLGNBQWM7QUFDbkIsc0JBQVEsZUFBZSxLQUFLO0FBQUEsWUFDaEM7QUFDQSxnQkFBSSxLQUFLLGdCQUFnQjtBQUNyQixzQkFBUSxpQkFBaUIsS0FBSztBQUFBLFlBQ2xDO0FBQ0EsZ0JBQUksS0FBSyxxQkFBcUI7QUFDMUIsc0JBQVEsc0JBQXNCLEtBQUs7QUFBQSxZQUN2QztBQUNBLGdCQUFJLE9BQU8sS0FBSyxPQUFPLEVBQUUsV0FBVyxHQUFHO0FBQ25DLHNCQUFRLE9BQU87QUFBQSxZQUNuQjtBQUNBLCtCQUFtQixXQUFXLGNBQWMsRUFBRSxRQUFRLE1BQU0sS0FBSyxPQUFPO0FBQUEsVUFDNUU7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUNBO0FBQUEsSUFDSjtBQUNBLFFBQUksU0FBUyxlQUFlO0FBQ3hCLHlCQUFtQixnQkFBZ0IsU0FBUztBQUFBLElBQ2hEO0FBQUEsRUFDSjtBQUNBLFNBQU87QUFDWDtBQWtCQSxlQUFlLHNCQUFzQixRQUFRLE9BQU8sUUFBUSxnQkFBZ0I7QUFDeEUsUUFBTSxXQUFXLE1BQU07QUFBQSxJQUFpQjtBQUFBLElBQU8sS0FBSztBQUFBLElBQXlCO0FBQUE7QUFBQSxJQUNoRTtBQUFBLElBQU0sS0FBSyxVQUFVLE1BQU07QUFBQSxJQUFHO0FBQUEsRUFBYztBQUN6RCxTQUFPLGNBQWMsUUFBUTtBQUNqQztBQUNBLGVBQWUsZ0JBQWdCLFFBQVEsT0FBTyxRQUFRLGdCQUFnQjtBQUNsRSxRQUFNLFdBQVcsTUFBTTtBQUFBLElBQWlCO0FBQUEsSUFBTyxLQUFLO0FBQUEsSUFBa0I7QUFBQTtBQUFBLElBQ3pEO0FBQUEsSUFBTyxLQUFLLFVBQVUsTUFBTTtBQUFBLElBQUc7QUFBQSxFQUFjO0FBQzFELFFBQU0sZUFBZSxNQUFNLFNBQVMsS0FBSztBQUN6QyxRQUFNLG1CQUFtQixXQUFXLFlBQVk7QUFDaEQsU0FBTztBQUFBLElBQ0gsVUFBVTtBQUFBLEVBQ2Q7QUFDSjtBQWtCQSxTQUFTLHdCQUF3QixPQUFPO0FBRXBDLE1BQUksU0FBUyxNQUFNO0FBQ2YsV0FBTztBQUFBLEVBQ1gsV0FDUyxPQUFPLFVBQVUsVUFBVTtBQUNoQyxXQUFPLEVBQUUsTUFBTSxVQUFVLE9BQU8sQ0FBQyxFQUFFLE1BQU0sTUFBTSxDQUFDLEVBQUU7QUFBQSxFQUN0RCxXQUNTLE1BQU0sTUFBTTtBQUNqQixXQUFPLEVBQUUsTUFBTSxVQUFVLE9BQU8sQ0FBQyxLQUFLLEVBQUU7QUFBQSxFQUM1QyxXQUNTLE1BQU0sT0FBTztBQUNsQixRQUFJLENBQUMsTUFBTSxNQUFNO0FBQ2IsYUFBTyxFQUFFLE1BQU0sVUFBVSxPQUFPLE1BQU0sTUFBTTtBQUFBLElBQ2hELE9BQ0s7QUFDRCxhQUFPO0FBQUEsSUFDWDtBQUFBLEVBQ0o7QUFDSjtBQUNBLFNBQVMsaUJBQWlCLFNBQVM7QUFDL0IsTUFBSSxXQUFXLENBQUM7QUFDaEIsTUFBSSxPQUFPLFlBQVksVUFBVTtBQUM3QixlQUFXLENBQUMsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUFBLEVBQ2pDLE9BQ0s7QUFDRCxlQUFXLGdCQUFnQixTQUFTO0FBQ2hDLFVBQUksT0FBTyxpQkFBaUIsVUFBVTtBQUNsQyxpQkFBUyxLQUFLLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFBQSxNQUN4QyxPQUNLO0FBQ0QsaUJBQVMsS0FBSyxZQUFZO0FBQUEsTUFDOUI7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNBLFNBQU8sK0NBQStDLFFBQVE7QUFDbEU7QUFTQSxTQUFTLCtDQUErQyxPQUFPO0FBQzNELFFBQU0sY0FBYyxFQUFFLE1BQU0sUUFBUSxPQUFPLENBQUMsRUFBRTtBQUM5QyxRQUFNLGtCQUFrQixFQUFFLE1BQU0sWUFBWSxPQUFPLENBQUMsRUFBRTtBQUN0RCxNQUFJLGlCQUFpQjtBQUNyQixNQUFJLHFCQUFxQjtBQUN6QixhQUFXLFFBQVEsT0FBTztBQUN0QixRQUFJLHNCQUFzQixNQUFNO0FBQzVCLHNCQUFnQixNQUFNLEtBQUssSUFBSTtBQUMvQiwyQkFBcUI7QUFBQSxJQUN6QixPQUNLO0FBQ0Qsa0JBQVksTUFBTSxLQUFLLElBQUk7QUFDM0IsdUJBQWlCO0FBQUEsSUFDckI7QUFBQSxFQUNKO0FBQ0EsTUFBSSxrQkFBa0Isb0JBQW9CO0FBQ3RDLFVBQU0sSUFBSSx3QkFBd0IsNEhBQTRIO0FBQUEsRUFDbEs7QUFDQSxNQUFJLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CO0FBQ3hDLFVBQU0sSUFBSSx3QkFBd0Isa0RBQWtEO0FBQUEsRUFDeEY7QUFDQSxNQUFJLGdCQUFnQjtBQUNoQixXQUFPO0FBQUEsRUFDWDtBQUNBLFNBQU87QUFDWDtBQUNBLFNBQVMsdUJBQXVCLFFBQVEsYUFBYTtBQUNqRCxNQUFJO0FBQ0osTUFBSSxrQ0FBa0M7QUFBQSxJQUNsQyxPQUFPLGdCQUFnQixRQUFRLGdCQUFnQixTQUFTLFNBQVMsWUFBWTtBQUFBLElBQzdFLGtCQUFrQixnQkFBZ0IsUUFBUSxnQkFBZ0IsU0FBUyxTQUFTLFlBQVk7QUFBQSxJQUN4RixnQkFBZ0IsZ0JBQWdCLFFBQVEsZ0JBQWdCLFNBQVMsU0FBUyxZQUFZO0FBQUEsSUFDdEYsT0FBTyxnQkFBZ0IsUUFBUSxnQkFBZ0IsU0FBUyxTQUFTLFlBQVk7QUFBQSxJQUM3RSxZQUFZLGdCQUFnQixRQUFRLGdCQUFnQixTQUFTLFNBQVMsWUFBWTtBQUFBLElBQ2xGLG1CQUFtQixnQkFBZ0IsUUFBUSxnQkFBZ0IsU0FBUyxTQUFTLFlBQVk7QUFBQSxJQUN6RixnQkFBZ0IsS0FBSyxnQkFBZ0IsUUFBUSxnQkFBZ0IsU0FBUyxTQUFTLFlBQVksbUJBQW1CLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRztBQUFBLElBQ2xKLFVBQVUsQ0FBQztBQUFBLEVBQ2Y7QUFDQSxRQUFNLGlDQUFpQyxPQUFPLDBCQUEwQjtBQUN4RSxNQUFJLE9BQU8sVUFBVTtBQUNqQixRQUFJLGdDQUFnQztBQUNoQyxZQUFNLElBQUksb0NBQW9DLG1GQUFtRjtBQUFBLElBQ3JJO0FBQ0Esb0NBQWdDLFdBQVcsT0FBTztBQUFBLEVBQ3RELFdBQ1MsZ0NBQWdDO0FBQ3JDLHNDQUFrQyxPQUFPLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRywrQkFBK0IsR0FBRyxPQUFPLHNCQUFzQjtBQUFBLEVBQ3JJLE9BQ0s7QUFFRCxVQUFNLFVBQVUsaUJBQWlCLE1BQU07QUFDdkMsb0NBQWdDLFdBQVcsQ0FBQyxPQUFPO0FBQUEsRUFDdkQ7QUFDQSxTQUFPLEVBQUUsd0JBQXdCLGdDQUFnQztBQUNyRTtBQUNBLFNBQVMsMkJBQTJCLFFBQVE7QUFDeEMsTUFBSTtBQUNKLE1BQUksT0FBTyxVQUFVO0FBQ2pCLHVCQUFtQjtBQUFBLEVBQ3ZCLE9BQ0s7QUFFRCxVQUFNLFVBQVUsaUJBQWlCLE1BQU07QUFDdkMsdUJBQW1CLEVBQUUsVUFBVSxDQUFDLE9BQU8sRUFBRTtBQUFBLEVBQzdDO0FBQ0EsTUFBSSxPQUFPLG1CQUFtQjtBQUMxQixxQkFBaUIsb0JBQW9CLHdCQUF3QixPQUFPLGlCQUFpQjtBQUFBLEVBQ3pGO0FBQ0EsU0FBTztBQUNYO0FBQ0EsU0FBUyx3QkFBd0IsUUFBUTtBQUNyQyxNQUFJLE9BQU8sV0FBVyxZQUFZLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFDckQsVUFBTSxVQUFVLGlCQUFpQixNQUFNO0FBQ3ZDLFdBQU8sRUFBRSxRQUFRO0FBQUEsRUFDckI7QUFDQSxTQUFPO0FBQ1g7QUFtQkEsSUFBTSxvQkFBb0I7QUFBQSxFQUN0QjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0o7QUFDQSxJQUFNLHVCQUF1QjtBQUFBLEVBQ3pCLE1BQU0sQ0FBQyxRQUFRLFlBQVk7QUFBQSxFQUMzQixVQUFVLENBQUMsa0JBQWtCO0FBQUEsRUFDN0IsT0FBTyxDQUFDLFFBQVEsZ0JBQWdCLGtCQUFrQixxQkFBcUI7QUFBQTtBQUFBLEVBRXZFLFFBQVEsQ0FBQyxNQUFNO0FBQ25CO0FBQ0EsU0FBUyxvQkFBb0IsU0FBUztBQUNsQyxNQUFJLGNBQWM7QUFDbEIsYUFBVyxlQUFlLFNBQVM7QUFDL0IsVUFBTSxFQUFFLE1BQU0sTUFBTSxJQUFJO0FBQ3hCLFFBQUksQ0FBQyxlQUFlLFNBQVMsUUFBUTtBQUNqQyxZQUFNLElBQUksd0JBQXdCLGlEQUFpRCxJQUFJLEVBQUU7QUFBQSxJQUM3RjtBQUNBLFFBQUksQ0FBQyxlQUFlLFNBQVMsSUFBSSxHQUFHO0FBQ2hDLFlBQU0sSUFBSSx3QkFBd0IsNENBQTRDLElBQUkseUJBQXlCLEtBQUssVUFBVSxjQUFjLENBQUMsRUFBRTtBQUFBLElBQy9JO0FBQ0EsUUFBSSxDQUFDLE1BQU0sUUFBUSxLQUFLLEdBQUc7QUFDdkIsWUFBTSxJQUFJLHdCQUF3Qiw2REFBNkQ7QUFBQSxJQUNuRztBQUNBLFFBQUksTUFBTSxXQUFXLEdBQUc7QUFDcEIsWUFBTSxJQUFJLHdCQUF3Qiw0Q0FBNEM7QUFBQSxJQUNsRjtBQUNBLFVBQU0sY0FBYztBQUFBLE1BQ2hCLE1BQU07QUFBQSxNQUNOLFlBQVk7QUFBQSxNQUNaLGNBQWM7QUFBQSxNQUNkLGtCQUFrQjtBQUFBLE1BQ2xCLFVBQVU7QUFBQSxNQUNWLGdCQUFnQjtBQUFBLE1BQ2hCLHFCQUFxQjtBQUFBLElBQ3pCO0FBQ0EsZUFBVyxRQUFRLE9BQU87QUFDdEIsaUJBQVcsT0FBTyxtQkFBbUI7QUFDakMsWUFBSSxPQUFPLE1BQU07QUFDYixzQkFBWSxHQUFHLEtBQUs7QUFBQSxRQUN4QjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBQ0EsVUFBTSxhQUFhLHFCQUFxQixJQUFJO0FBQzVDLGVBQVcsT0FBTyxtQkFBbUI7QUFDakMsVUFBSSxDQUFDLFdBQVcsU0FBUyxHQUFHLEtBQUssWUFBWSxHQUFHLElBQUksR0FBRztBQUNuRCxjQUFNLElBQUksd0JBQXdCLHNCQUFzQixJQUFJLG9CQUFvQixHQUFHLFFBQVE7QUFBQSxNQUMvRjtBQUFBLElBQ0o7QUFDQSxrQkFBYztBQUFBLEVBQ2xCO0FBQ0o7QUFJQSxTQUFTLGdCQUFnQixVQUFVO0FBQy9CLE1BQUk7QUFDSixNQUFJLFNBQVMsZUFBZSxVQUFhLFNBQVMsV0FBVyxXQUFXLEdBQUc7QUFDdkUsV0FBTztBQUFBLEVBQ1g7QUFDQSxRQUFNLFdBQVcsS0FBSyxTQUFTLFdBQVcsQ0FBQyxPQUFPLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRztBQUN0RixNQUFJLFlBQVksUUFBVztBQUN2QixXQUFPO0FBQUEsRUFDWDtBQUNBLE1BQUksUUFBUSxVQUFVLFVBQWEsUUFBUSxNQUFNLFdBQVcsR0FBRztBQUMzRCxXQUFPO0FBQUEsRUFDWDtBQUNBLGFBQVcsUUFBUSxRQUFRLE9BQU87QUFDOUIsUUFBSSxTQUFTLFVBQWEsT0FBTyxLQUFLLElBQUksRUFBRSxXQUFXLEdBQUc7QUFDdEQsYUFBTztBQUFBLElBQ1g7QUFDQSxRQUFJLEtBQUssU0FBUyxVQUFhLEtBQUssU0FBUyxJQUFJO0FBQzdDLGFBQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUNBLFNBQU87QUFDWDtBQXFCQSxJQUFNLGVBQWU7QUFPckIsSUFBTSxjQUFOLE1BQWtCO0FBQUEsRUFDZCxZQUFZLFFBQVEsT0FBTyxRQUFRLGtCQUFrQixDQUFDLEdBQUc7QUFDckQsU0FBSyxRQUFRO0FBQ2IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxrQkFBa0I7QUFDdkIsU0FBSyxXQUFXLENBQUM7QUFDakIsU0FBSyxlQUFlLFFBQVEsUUFBUTtBQUNwQyxTQUFLLFVBQVU7QUFDZixRQUFJLFdBQVcsUUFBUSxXQUFXLFNBQVMsU0FBUyxPQUFPLFNBQVM7QUFDaEUsMEJBQW9CLE9BQU8sT0FBTztBQUNsQyxXQUFLLFdBQVcsT0FBTztBQUFBLElBQzNCO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sYUFBYTtBQUNmLFVBQU0sS0FBSztBQUNYLFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBU0EsTUFBTSxZQUFZLFNBQVMsaUJBQWlCLENBQUMsR0FBRztBQUM1QyxRQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSTtBQUN4QixVQUFNLEtBQUs7QUFDWCxVQUFNLGFBQWEsaUJBQWlCLE9BQU87QUFDM0MsVUFBTSx5QkFBeUI7QUFBQSxNQUMzQixpQkFBaUIsS0FBSyxLQUFLLFlBQVksUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHO0FBQUEsTUFDM0UsbUJBQW1CLEtBQUssS0FBSyxZQUFZLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRztBQUFBLE1BQzdFLFFBQVEsS0FBSyxLQUFLLFlBQVksUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHO0FBQUEsTUFDbEUsYUFBYSxLQUFLLEtBQUssWUFBWSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUc7QUFBQSxNQUN2RSxvQkFBb0IsS0FBSyxLQUFLLFlBQVksUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHO0FBQUEsTUFDOUUsZ0JBQWdCLEtBQUssS0FBSyxZQUFZLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRztBQUFBLE1BQzFFLFVBQVUsQ0FBQyxHQUFHLEtBQUssVUFBVSxVQUFVO0FBQUEsSUFDM0M7QUFDQSxVQUFNLDRCQUE0QixPQUFPLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxLQUFLLGVBQWUsR0FBRyxjQUFjO0FBQ3ZHLFFBQUk7QUFFSixTQUFLLGVBQWUsS0FBSyxhQUNwQixLQUFLLE1BQU0sZ0JBQWdCLEtBQUssU0FBUyxLQUFLLE9BQU8sd0JBQXdCLHlCQUF5QixDQUFDLEVBQ3ZHLEtBQUssQ0FBQyxXQUFXO0FBQ2xCLFVBQUlDO0FBQ0osVUFBSSxnQkFBZ0IsT0FBTyxRQUFRLEdBQUc7QUFDbEMsYUFBSyxTQUFTLEtBQUssVUFBVTtBQUM3QixjQUFNLGtCQUFrQixPQUFPLE9BQU87QUFBQSxVQUFFLE9BQU8sQ0FBQztBQUFBO0FBQUEsVUFFNUMsTUFBTTtBQUFBLFFBQVEsSUFBSUEsTUFBSyxPQUFPLFNBQVMsZ0JBQWdCLFFBQVFBLFFBQU8sU0FBUyxTQUFTQSxJQUFHLENBQUMsRUFBRSxPQUFPO0FBQ3pHLGFBQUssU0FBUyxLQUFLLGVBQWU7QUFBQSxNQUN0QyxPQUNLO0FBQ0QsY0FBTSxvQkFBb0Isd0JBQXdCLE9BQU8sUUFBUTtBQUNqRSxZQUFJLG1CQUFtQjtBQUNuQixrQkFBUSxLQUFLLG1DQUFtQyxpQkFBaUIsd0NBQXdDO0FBQUEsUUFDN0c7QUFBQSxNQUNKO0FBQ0Esb0JBQWM7QUFBQSxJQUNsQixDQUFDLEVBQ0ksTUFBTSxDQUFDLE1BQU07QUFFZCxXQUFLLGVBQWUsUUFBUSxRQUFRO0FBQ3BDLFlBQU07QUFBQSxJQUNWLENBQUM7QUFDRCxVQUFNLEtBQUs7QUFDWCxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBVUEsTUFBTSxrQkFBa0IsU0FBUyxpQkFBaUIsQ0FBQyxHQUFHO0FBQ2xELFFBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3hCLFVBQU0sS0FBSztBQUNYLFVBQU0sYUFBYSxpQkFBaUIsT0FBTztBQUMzQyxVQUFNLHlCQUF5QjtBQUFBLE1BQzNCLGlCQUFpQixLQUFLLEtBQUssWUFBWSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUc7QUFBQSxNQUMzRSxtQkFBbUIsS0FBSyxLQUFLLFlBQVksUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHO0FBQUEsTUFDN0UsUUFBUSxLQUFLLEtBQUssWUFBWSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUc7QUFBQSxNQUNsRSxhQUFhLEtBQUssS0FBSyxZQUFZLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRztBQUFBLE1BQ3ZFLG9CQUFvQixLQUFLLEtBQUssWUFBWSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUc7QUFBQSxNQUM5RSxnQkFBZ0IsS0FBSyxLQUFLLFlBQVksUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHO0FBQUEsTUFDMUUsVUFBVSxDQUFDLEdBQUcsS0FBSyxVQUFVLFVBQVU7QUFBQSxJQUMzQztBQUNBLFVBQU0sNEJBQTRCLE9BQU8sT0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLEtBQUssZUFBZSxHQUFHLGNBQWM7QUFDdkcsVUFBTSxnQkFBZ0Isc0JBQXNCLEtBQUssU0FBUyxLQUFLLE9BQU8sd0JBQXdCLHlCQUF5QjtBQUV2SCxTQUFLLGVBQWUsS0FBSyxhQUNwQixLQUFLLE1BQU0sYUFBYSxFQUd4QixNQUFNLENBQUMsYUFBYTtBQUNyQixZQUFNLElBQUksTUFBTSxZQUFZO0FBQUEsSUFDaEMsQ0FBQyxFQUNJLEtBQUssQ0FBQyxpQkFBaUIsYUFBYSxRQUFRLEVBQzVDLEtBQUssQ0FBQyxhQUFhO0FBQ3BCLFVBQUksZ0JBQWdCLFFBQVEsR0FBRztBQUMzQixhQUFLLFNBQVMsS0FBSyxVQUFVO0FBQzdCLGNBQU0sa0JBQWtCLE9BQU8sT0FBTyxDQUFDLEdBQUcsU0FBUyxXQUFXLENBQUMsRUFBRSxPQUFPO0FBRXhFLFlBQUksQ0FBQyxnQkFBZ0IsTUFBTTtBQUN2QiwwQkFBZ0IsT0FBTztBQUFBLFFBQzNCO0FBQ0EsYUFBSyxTQUFTLEtBQUssZUFBZTtBQUFBLE1BQ3RDLE9BQ0s7QUFDRCxjQUFNLG9CQUFvQix3QkFBd0IsUUFBUTtBQUMxRCxZQUFJLG1CQUFtQjtBQUNuQixrQkFBUSxLQUFLLHlDQUF5QyxpQkFBaUIsd0NBQXdDO0FBQUEsUUFDbkg7QUFBQSxNQUNKO0FBQUEsSUFDSixDQUFDLEVBQ0ksTUFBTSxDQUFDLE1BQU07QUFJZCxVQUFJLEVBQUUsWUFBWSxjQUFjO0FBRzVCLGdCQUFRLE1BQU0sQ0FBQztBQUFBLE1BQ25CO0FBQUEsSUFDSixDQUFDO0FBQ0QsV0FBTztBQUFBLEVBQ1g7QUFDSjtBQWtCQSxlQUFlLFlBQVksUUFBUSxPQUFPLFFBQVEsc0JBQXNCO0FBQ3BFLFFBQU0sV0FBVyxNQUFNLGlCQUFpQixPQUFPLEtBQUssY0FBYyxRQUFRLE9BQU8sS0FBSyxVQUFVLE1BQU0sR0FBRyxvQkFBb0I7QUFDN0gsU0FBTyxTQUFTLEtBQUs7QUFDekI7QUFrQkEsZUFBZSxhQUFhLFFBQVEsT0FBTyxRQUFRLGdCQUFnQjtBQUMvRCxRQUFNLFdBQVcsTUFBTSxpQkFBaUIsT0FBTyxLQUFLLGVBQWUsUUFBUSxPQUFPLEtBQUssVUFBVSxNQUFNLEdBQUcsY0FBYztBQUN4SCxTQUFPLFNBQVMsS0FBSztBQUN6QjtBQUNBLGVBQWUsbUJBQW1CLFFBQVEsT0FBTyxRQUFRLGdCQUFnQjtBQUNyRSxRQUFNLG9CQUFvQixPQUFPLFNBQVMsSUFBSSxDQUFDLFlBQVk7QUFDdkQsV0FBTyxPQUFPLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxPQUFPLEdBQUcsRUFBRSxNQUFNLENBQUM7QUFBQSxFQUM5RCxDQUFDO0FBQ0QsUUFBTSxXQUFXLE1BQU0saUJBQWlCLE9BQU8sS0FBSyxzQkFBc0IsUUFBUSxPQUFPLEtBQUssVUFBVSxFQUFFLFVBQVUsa0JBQWtCLENBQUMsR0FBRyxjQUFjO0FBQ3hKLFNBQU8sU0FBUyxLQUFLO0FBQ3pCO0FBc0JBLElBQU0sa0JBQU4sTUFBc0I7QUFBQSxFQUNsQixZQUFZLFFBQVEsYUFBYSxrQkFBa0IsQ0FBQyxHQUFHO0FBQ25ELFNBQUssU0FBUztBQUNkLFNBQUssa0JBQWtCO0FBQ3ZCLFFBQUksWUFBWSxNQUFNLFNBQVMsR0FBRyxHQUFHO0FBRWpDLFdBQUssUUFBUSxZQUFZO0FBQUEsSUFDN0IsT0FDSztBQUVELFdBQUssUUFBUSxVQUFVLFlBQVksS0FBSztBQUFBLElBQzVDO0FBQ0EsU0FBSyxtQkFBbUIsWUFBWSxvQkFBb0IsQ0FBQztBQUN6RCxTQUFLLGlCQUFpQixZQUFZLGtCQUFrQixDQUFDO0FBQ3JELFNBQUssUUFBUSxZQUFZO0FBQ3pCLFNBQUssYUFBYSxZQUFZO0FBQzlCLFNBQUssb0JBQW9CLHdCQUF3QixZQUFZLGlCQUFpQjtBQUM5RSxTQUFLLGdCQUFnQixZQUFZO0FBQUEsRUFDckM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFTQSxNQUFNLGdCQUFnQixTQUFTLGlCQUFpQixDQUFDLEdBQUc7QUFDaEQsUUFBSTtBQUNKLFVBQU0sa0JBQWtCLDJCQUEyQixPQUFPO0FBQzFELFVBQU0sZ0NBQWdDLE9BQU8sT0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLEtBQUssZUFBZSxHQUFHLGNBQWM7QUFDM0csV0FBTyxnQkFBZ0IsS0FBSyxRQUFRLEtBQUssT0FBTyxPQUFPLE9BQU8sRUFBRSxrQkFBa0IsS0FBSyxrQkFBa0IsZ0JBQWdCLEtBQUssZ0JBQWdCLE9BQU8sS0FBSyxPQUFPLFlBQVksS0FBSyxZQUFZLG1CQUFtQixLQUFLLG1CQUFtQixnQkFBZ0IsS0FBSyxLQUFLLG1CQUFtQixRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsS0FBSyxHQUFHLGVBQWUsR0FBRyw2QkFBNkI7QUFBQSxFQUNyWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFXQSxNQUFNLHNCQUFzQixTQUFTLGlCQUFpQixDQUFDLEdBQUc7QUFDdEQsUUFBSTtBQUNKLFVBQU0sa0JBQWtCLDJCQUEyQixPQUFPO0FBQzFELFVBQU0sZ0NBQWdDLE9BQU8sT0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLEtBQUssZUFBZSxHQUFHLGNBQWM7QUFDM0csV0FBTyxzQkFBc0IsS0FBSyxRQUFRLEtBQUssT0FBTyxPQUFPLE9BQU8sRUFBRSxrQkFBa0IsS0FBSyxrQkFBa0IsZ0JBQWdCLEtBQUssZ0JBQWdCLE9BQU8sS0FBSyxPQUFPLFlBQVksS0FBSyxZQUFZLG1CQUFtQixLQUFLLG1CQUFtQixnQkFBZ0IsS0FBSyxLQUFLLG1CQUFtQixRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsS0FBSyxHQUFHLGVBQWUsR0FBRyw2QkFBNkI7QUFBQSxFQUMzWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxVQUFVLGlCQUFpQjtBQUN2QixRQUFJO0FBQ0osV0FBTyxJQUFJLFlBQVksS0FBSyxRQUFRLEtBQUssT0FBTyxPQUFPLE9BQU8sRUFBRSxrQkFBa0IsS0FBSyxrQkFBa0IsZ0JBQWdCLEtBQUssZ0JBQWdCLE9BQU8sS0FBSyxPQUFPLFlBQVksS0FBSyxZQUFZLG1CQUFtQixLQUFLLG1CQUFtQixnQkFBZ0IsS0FBSyxLQUFLLG1CQUFtQixRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsS0FBSyxHQUFHLGVBQWUsR0FBRyxLQUFLLGVBQWU7QUFBQSxFQUM1VztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxNQUFNLFlBQVksU0FBUyxpQkFBaUIsQ0FBQyxHQUFHO0FBQzVDLFVBQU0sa0JBQWtCLHVCQUF1QixTQUFTO0FBQUEsTUFDcEQsT0FBTyxLQUFLO0FBQUEsTUFDWixrQkFBa0IsS0FBSztBQUFBLE1BQ3ZCLGdCQUFnQixLQUFLO0FBQUEsTUFDckIsT0FBTyxLQUFLO0FBQUEsTUFDWixZQUFZLEtBQUs7QUFBQSxNQUNqQixtQkFBbUIsS0FBSztBQUFBLE1BQ3hCLGVBQWUsS0FBSztBQUFBLElBQ3hCLENBQUM7QUFDRCxVQUFNLGdDQUFnQyxPQUFPLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxLQUFLLGVBQWUsR0FBRyxjQUFjO0FBQzNHLFdBQU8sWUFBWSxLQUFLLFFBQVEsS0FBSyxPQUFPLGlCQUFpQiw2QkFBNkI7QUFBQSxFQUM5RjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxNQUFNLGFBQWEsU0FBUyxpQkFBaUIsQ0FBQyxHQUFHO0FBQzdDLFVBQU0sa0JBQWtCLHdCQUF3QixPQUFPO0FBQ3ZELFVBQU0sZ0NBQWdDLE9BQU8sT0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLEtBQUssZUFBZSxHQUFHLGNBQWM7QUFDM0csV0FBTyxhQUFhLEtBQUssUUFBUSxLQUFLLE9BQU8saUJBQWlCLDZCQUE2QjtBQUFBLEVBQy9GO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVFBLE1BQU0sbUJBQW1CLDBCQUEwQixpQkFBaUIsQ0FBQyxHQUFHO0FBQ3BFLFVBQU0sZ0NBQWdDLE9BQU8sT0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLEtBQUssZUFBZSxHQUFHLGNBQWM7QUFDM0csV0FBTyxtQkFBbUIsS0FBSyxRQUFRLEtBQUssT0FBTywwQkFBMEIsNkJBQTZCO0FBQUEsRUFDOUc7QUFDSjtBQXNCQSxJQUFNLHFCQUFOLE1BQXlCO0FBQUEsRUFDckIsWUFBWSxRQUFRO0FBQ2hCLFNBQUssU0FBUztBQUFBLEVBQ2xCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxtQkFBbUIsYUFBYSxnQkFBZ0I7QUFDNUMsUUFBSSxDQUFDLFlBQVksT0FBTztBQUNwQixZQUFNLElBQUksd0JBQXdCLDBGQUNpQztBQUFBLElBQ3ZFO0FBQ0EsV0FBTyxJQUFJLGdCQUFnQixLQUFLLFFBQVEsYUFBYSxjQUFjO0FBQUEsRUFDdkU7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLG9DQUFvQyxlQUFlLGFBQWEsZ0JBQWdCO0FBQzVFLFFBQUksQ0FBQyxjQUFjLE1BQU07QUFDckIsWUFBTSxJQUFJLG9DQUFvQyw2Q0FBNkM7QUFBQSxJQUMvRjtBQUNBLFFBQUksQ0FBQyxjQUFjLE9BQU87QUFDdEIsWUFBTSxJQUFJLG9DQUFvQyw4Q0FBOEM7QUFBQSxJQUNoRztBQUtBLFVBQU0sdUJBQXVCLENBQUMsU0FBUyxtQkFBbUI7QUFDMUQsZUFBVyxPQUFPLHNCQUFzQjtBQUNwQyxXQUFLLGdCQUFnQixRQUFRLGdCQUFnQixTQUFTLFNBQVMsWUFBWSxHQUFHLE1BQzFFLGNBQWMsR0FBRyxNQUNoQixnQkFBZ0IsUUFBUSxnQkFBZ0IsU0FBUyxTQUFTLFlBQVksR0FBRyxPQUFPLGNBQWMsR0FBRyxHQUFHO0FBQ3JHLFlBQUksUUFBUSxTQUFTO0FBQ2pCLGdCQUFNLGtCQUFrQixZQUFZLE1BQU0sV0FBVyxTQUFTLElBQ3hELFlBQVksTUFBTSxRQUFRLFdBQVcsRUFBRSxJQUN2QyxZQUFZO0FBQ2xCLGdCQUFNLG9CQUFvQixjQUFjLE1BQU0sV0FBVyxTQUFTLElBQzVELGNBQWMsTUFBTSxRQUFRLFdBQVcsRUFBRSxJQUN6QyxjQUFjO0FBQ3BCLGNBQUksb0JBQW9CLG1CQUFtQjtBQUN2QztBQUFBLFVBQ0o7QUFBQSxRQUNKO0FBQ0EsY0FBTSxJQUFJLG9DQUFvQyx3QkFBd0IsR0FBRywrQkFDaEUsWUFBWSxHQUFHLENBQUMsd0JBQXdCLGNBQWMsR0FBRyxDQUFDLEdBQUc7QUFBQSxNQUMxRTtBQUFBLElBQ0o7QUFDQSxVQUFNLHVCQUF1QixPQUFPLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxXQUFXLEdBQUcsRUFBRSxPQUFPLGNBQWMsT0FBTyxPQUFPLGNBQWMsT0FBTyxZQUFZLGNBQWMsWUFBWSxtQkFBbUIsY0FBYyxtQkFBbUIsY0FBYyxDQUFDO0FBQzlPLFdBQU8sSUFBSSxnQkFBZ0IsS0FBSyxRQUFRLHNCQUFzQixjQUFjO0FBQUEsRUFDaEY7QUFDSjs7O0FDOTlDTyxTQUFTLGlCQUFpQixNQUFnQixNQUF3QjtBQUN2RSxNQUFJLEtBQUssV0FBVyxLQUFLLFFBQVE7QUFDL0IsVUFBTSxJQUFJLE1BQU0seUZBQW1CO0FBQUEsRUFDckM7QUFFQSxNQUFJLGFBQWE7QUFDakIsTUFBSSxRQUFRO0FBQ1osTUFBSSxRQUFRO0FBRVosV0FBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsS0FBSztBQUNwQyxrQkFBYyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUM7QUFDOUIsYUFBUyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUM7QUFDekIsYUFBUyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUM7QUFBQSxFQUMzQjtBQUVBLFFBQU0sY0FBYyxLQUFLLEtBQUssS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLO0FBQ3RELE1BQUksZ0JBQWdCLEdBQUc7QUFDckIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLGFBQWE7QUFDdEI7QUFLTyxJQUFNLHFCQUFOLE1BQXlCO0FBQUEsRUFPOUIsWUFDVSxRQUNBLFlBQW9CLGlCQUNwQixLQUNBLFVBQ0EsZ0JBQXlCLE9BQ2pDO0FBTFE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhWLFNBQVEsUUFBbUM7QUFDM0MsU0FBUSxRQUFhO0FBQ3JCLFNBQVEsUUFBK0Isb0JBQUksSUFBSTtBQUMvQyxTQUFRLGdCQUFpQztBQUN6QyxTQUFRLFdBQW1CO0FBU3pCLFFBQUksUUFBUTtBQUNWLFdBQUssUUFBUSxJQUFJLG1CQUFtQixNQUFNO0FBRTFDLFlBQU0saUJBQWlCLEtBQUssVUFBVSxRQUFRLGFBQWEsRUFBRTtBQUM3RCxXQUFLLFFBQVEsS0FBSyxNQUFNLG1CQUFtQixFQUFFLE9BQU8sZUFBZSxDQUFDO0FBQUEsSUFDdEU7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxNQUFNLE1BQWlDO0FBQzNDLFFBQUksQ0FBQyxLQUFLLE9BQU87QUFDZixZQUFNLElBQUksTUFBTSxnRkFBeUI7QUFBQSxJQUMzQztBQUVBLFFBQUk7QUFHSixRQUFJLEtBQUssTUFBTSxJQUFJLElBQUksR0FBRztBQUN4QixrQkFBWSxLQUFLLE1BQU0sSUFBSSxJQUFJO0FBQUEsSUFDakMsT0FBTztBQUNMLFVBQUk7QUFDRixjQUFNLFNBQVMsTUFBTSxLQUFLLE1BQU0sYUFBYSxJQUFJO0FBQ2pELG9CQUFZLE9BQU8sVUFBVTtBQUc3QixhQUFLLE1BQU0sSUFBSSxNQUFNLFNBQVM7QUFBQSxNQUNoQyxTQUFTLE9BQU87QUFDZCxnQkFBUSxNQUFNLGlEQUFjLEtBQUs7QUFDakMsY0FBTSxJQUFJLE1BQU0saURBQWMsaUJBQWlCLFFBQVEsTUFBTSxVQUFVLE9BQU8sS0FBSyxDQUFDLEVBQUU7QUFBQSxNQUN4RjtBQUFBLElBQ0Y7QUFHQSxRQUFJLEtBQUssaUJBQWlCLEtBQUssS0FBSztBQUNsQyxVQUFJO0FBQ0YsWUFBSTtBQUNKLFlBQUk7QUFFSixZQUFJLEtBQUssZUFBZTtBQUN0Qix1QkFBYSxpQkFBaUIsS0FBSyxlQUFlLFNBQVM7QUFDM0QseUJBQWUsS0FBSztBQUFBLFFBQ3RCO0FBRUEsY0FBTSxtQkFBbUIsS0FBSyxLQUFLLEtBQUssVUFBVTtBQUFBLFVBQ2hELFdBQVc7QUFBQSxVQUNYO0FBQUEsVUFDQTtBQUFBLFVBQ0EsbUJBQW1CO0FBQUEsUUFDckIsQ0FBQztBQUFBLE1BQ0gsU0FBUyxVQUFVO0FBQ2pCLGdCQUFRLE1BQU0sOERBQWlCLFFBQVE7QUFBQSxNQUN6QztBQUFBLElBQ0Y7QUFHQSxTQUFLLGdCQUFnQjtBQUNyQixTQUFLLFdBQVc7QUFFaEIsV0FBTztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxNQUFNLFdBQVcsT0FBc0M7QUFDckQsVUFBTSxhQUF5QixDQUFDO0FBRWhDLGVBQVcsUUFBUSxPQUFPO0FBQ3hCLFlBQU0sWUFBWSxNQUFNLEtBQUssTUFBTSxJQUFJO0FBQ3ZDLGlCQUFXLEtBQUssU0FBUztBQUFBLElBQzNCO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGFBQW1CO0FBQ2pCLFNBQUssTUFBTSxNQUFNO0FBQUEsRUFDbkI7QUFDRjs7O0FDcEhPLElBQU0sd0JBQU4sTUFBNEI7QUFBQSxFQUlqQyxZQUFZLFFBQStCO0FBN0I3QztBQThCSSxTQUFLLFNBQVM7QUFBQSxNQUNaLEdBQUc7QUFBQSxNQUNILHNCQUFxQixZQUFPLHdCQUFQLFlBQThCO0FBQUEsTUFDbkQsbUJBQWtCLFlBQU8scUJBQVAsWUFBMkI7QUFBQSxNQUM3QyxhQUFZLFlBQU8sZUFBUCxZQUFxQjtBQUFBLE1BQ2pDLHdCQUF1QixZQUFPLDBCQUFQLFlBQWdDO0FBQUEsTUFDdkQseUJBQXdCLFlBQU8sMkJBQVAsWUFBaUM7QUFBQSxJQUMzRDtBQUNBLFNBQUsscUJBQXFCLElBQUk7QUFBQSxNQUM1QixPQUFPO0FBQUEsT0FDUCxZQUFPLG1CQUFQLFlBQXlCO0FBQUEsTUFDekIsT0FBTztBQUFBLE1BQ1AsT0FBTztBQUFBLE9BQ1AsWUFBTywyQkFBUCxZQUFpQztBQUFBLElBQ25DO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLE1BQU0sZUFBZSxPQUEyRDtBQUM5RSxRQUFJO0FBQ0YsVUFBSSxNQUFNLFdBQVcsR0FBRztBQUN0QixlQUFPO0FBQUEsVUFDTCxVQUFVLENBQUM7QUFBQSxVQUNYLFlBQVksQ0FBQztBQUFBLFVBQ2IsT0FBTyxDQUFDO0FBQUEsUUFDVjtBQUFBLE1BQ0Y7QUFHQSxZQUFNLFlBQVksS0FBSyxpQkFBaUIsS0FBSztBQUc3QyxjQUFRLElBQUksMkNBQWE7QUFDekIsVUFBSTtBQUNKLFVBQUk7QUFDRixxQkFBYSxNQUFNLEtBQUssbUJBQW1CLFdBQVcsU0FBUztBQUFBLE1BQ2pFLFNBQVMsT0FBTztBQUNkLGNBQU0sTUFBTSxpREFBYyxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLLENBQUM7QUFDaEYsWUFBSSxLQUFLLE9BQU8sS0FBSztBQUNuQixnQkFBTSxnQ0FBZ0MsS0FBSyxPQUFPLEtBQUssS0FBSyxPQUFPLFVBQVUsS0FBSyxLQUFLO0FBQUEsUUFDekY7QUFDQSxjQUFNLElBQUksTUFBTSxHQUFHO0FBQUEsTUFDckI7QUFHQSxjQUFRLElBQUksMkNBQWE7QUFDekIsVUFBSTtBQUNKLFVBQUk7QUFDRix1QkFBZSxLQUFLLDRCQUE0QixVQUFVO0FBQUEsTUFDNUQsU0FBUyxPQUFPO0FBQ2QsY0FBTSxNQUFNLGlEQUFjLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUssQ0FBQztBQUNoRixZQUFJLEtBQUssT0FBTyxLQUFLO0FBQ25CLGdCQUFNLGdDQUFnQyxLQUFLLE9BQU8sS0FBSyxLQUFLLE9BQU8sVUFBVSxLQUFLLEtBQUs7QUFBQSxRQUN6RjtBQUNBLGNBQU0sSUFBSSxNQUFNLEdBQUc7QUFBQSxNQUNyQjtBQUdBLGNBQVEsSUFBSSxrREFBZTtBQUMzQixVQUFJO0FBQ0osVUFBSTtBQUNGLHFCQUFhLEtBQUssc0JBQXNCLFlBQVk7QUFBQSxNQUN0RCxTQUFTLE9BQU87QUFDZCxjQUFNLE1BQU0sd0RBQWdCLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUssQ0FBQztBQUNsRixZQUFJLEtBQUssT0FBTyxLQUFLO0FBQ25CLGdCQUFNLGdDQUFnQyxLQUFLLE9BQU8sS0FBSyxLQUFLLE9BQU8sVUFBVSxLQUFLLEtBQUs7QUFBQSxRQUN6RjtBQUNBLGNBQU0sSUFBSSxNQUFNLEdBQUc7QUFBQSxNQUNyQjtBQUdBLGNBQVEsSUFBSSxpREFBYztBQUMxQixVQUFJO0FBQ0osVUFBSTtBQUNGLG1CQUFXLEtBQUssZUFBZSxPQUFPLFlBQVksWUFBWTtBQUFBLE1BQ2hFLFNBQVMsT0FBTztBQUNkLGNBQU0sTUFBTSx1REFBZSxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLLENBQUM7QUFDakYsWUFBSSxLQUFLLE9BQU8sS0FBSztBQUNuQixnQkFBTSxnQ0FBZ0MsS0FBSyxPQUFPLEtBQUssS0FBSyxPQUFPLFVBQVUsS0FBSyxLQUFLO0FBQUEsUUFDekY7QUFDQSxjQUFNLElBQUksTUFBTSxHQUFHO0FBQUEsTUFDckI7QUFHQSxjQUFRLElBQUksOERBQWlCO0FBQzdCLFVBQUk7QUFDSixVQUFJO0FBQ0YsZ0JBQVEsS0FBSyxvQkFBb0IsUUFBUTtBQUFBLE1BQzNDLFNBQVMsT0FBTztBQUNkLGNBQU0sTUFBTSxvRUFBa0IsaUJBQWlCLFFBQVEsTUFBTSxVQUFVLE9BQU8sS0FBSyxDQUFDO0FBQ3BGLFlBQUksS0FBSyxPQUFPLEtBQUs7QUFDbkIsZ0JBQU0sZ0NBQWdDLEtBQUssT0FBTyxLQUFLLEtBQUssT0FBTyxVQUFVLEtBQUssS0FBSztBQUFBLFFBQ3pGO0FBQ0EsY0FBTSxJQUFJLE1BQU0sR0FBRztBQUFBLE1BQ3JCO0FBRUEsYUFBTztBQUFBLFFBQ0w7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLFNBQVMsT0FBTztBQUVkLFVBQUksaUJBQWlCLFNBQVMsTUFBTSxRQUFRLFNBQVMsZUFBSyxHQUFHO0FBQzNELGNBQU07QUFBQSxNQUNSO0FBR0EsWUFBTSxNQUFNLGtGQUFzQixpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLLENBQUM7QUFDeEYsVUFBSSxLQUFLLE9BQU8sS0FBSztBQUNuQixjQUFNLGdDQUFnQyxLQUFLLE9BQU8sS0FBSyxLQUFLLE9BQU8sVUFBVSxLQUFLLEtBQUs7QUFBQSxNQUN6RjtBQUNBLFlBQU0sSUFBSSxNQUFNLEdBQUc7QUFBQSxJQUNyQjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGtCQUFrQixNQUFjLElBQVksR0FBVztBQUU3RCxVQUFNLFlBQVksS0FBSyxNQUFNLFVBQVUsRUFBRSxPQUFPLE9BQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDO0FBR3hFLFVBQU0sZUFBeUIsQ0FBQztBQUNoQyxhQUFTLElBQUksR0FBRyxJQUFJLFVBQVUsUUFBUSxLQUFLLEdBQUc7QUFDNUMsVUFBSSxJQUFJLElBQUksVUFBVSxRQUFRO0FBQzVCLHFCQUFhLEtBQUssVUFBVSxDQUFDLElBQUksVUFBVSxJQUFJLENBQUMsQ0FBQztBQUFBLE1BQ25ELFdBQVcsSUFBSSxVQUFVLFFBQVE7QUFDL0IscUJBQWEsS0FBSyxVQUFVLENBQUMsQ0FBQztBQUFBLE1BQ2hDO0FBQUEsSUFDRjtBQUdBLFVBQU0sZ0JBQWdCLGFBQWEsTUFBTSxDQUFDLENBQUM7QUFDM0MsV0FBTyxjQUFjLEtBQUssR0FBRyxFQUFFLEtBQUs7QUFBQSxFQUN0QztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNUSxpQkFBaUIsT0FBcUM7QUFDNUQsVUFBTSxTQUFtQixDQUFDO0FBRTFCLGFBQVMsSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUs7QUFDckMsWUFBTSxPQUFPLE1BQU0sQ0FBQztBQUNwQixVQUFJLGlCQUFpQjtBQUdyQixVQUFJLEtBQUssU0FBUyxRQUFRO0FBRXhCLFlBQUksZUFBZSxLQUFLO0FBQ3hCLFlBQUksV0FBcUIsQ0FBQztBQUcxQixZQUFJLElBQUksSUFBSSxNQUFNLFVBQVUsTUFBTSxJQUFJLENBQUMsRUFBRSxTQUFTLGFBQWE7QUFDN0QsZ0JBQU0sV0FBVyxNQUFNLElBQUksQ0FBQztBQUM1QiwwQkFBZ0IsTUFBTSxTQUFTO0FBQy9CLHFCQUFXLGdCQUFnQixZQUFZO0FBQUEsUUFDekMsT0FBTztBQUNMLHFCQUFXLGdCQUFnQixLQUFLLE9BQU87QUFBQSxRQUN6QztBQUdBLFlBQUksMkJBQTJCO0FBQy9CLGlCQUFTLElBQUksSUFBSSxHQUFHLEtBQUssR0FBRyxLQUFLO0FBQy9CLGNBQUksTUFBTSxDQUFDLEVBQUUsU0FBUyxhQUFhO0FBQ2pDLHVDQUEyQixLQUFLLGtCQUFrQixNQUFNLENBQUMsRUFBRSxTQUFTLENBQUM7QUFDckU7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUdBLGNBQU0sa0JBQWtCLEtBQUs7QUFHN0IsWUFBSSwwQkFBMEI7QUFDOUIsWUFBSSxJQUFJLElBQUksTUFBTSxVQUFVLE1BQU0sSUFBSSxDQUFDLEVBQUUsU0FBUyxhQUFhO0FBQzdELG9DQUEwQixLQUFLLGtCQUFrQixNQUFNLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQztBQUFBLFFBQzFFO0FBR0EsY0FBTSxhQUFhLFNBQVMsU0FBUyxJQUFJLHdCQUFTLFNBQVMsS0FBSyxJQUFJLENBQUMsTUFBTTtBQUMzRSx5QkFBaUI7QUFBQSxVQUNmO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsUUFDRixFQUNHLE9BQU8sT0FBSyxFQUFFLFNBQVMsQ0FBQyxFQUN4QixLQUFLLEdBQUc7QUFFWCxlQUFPLEtBQUssY0FBYztBQUcxQixZQUFJLElBQUksSUFBSSxNQUFNLFVBQVUsTUFBTSxJQUFJLENBQUMsRUFBRSxTQUFTLGFBQWE7QUFDN0Q7QUFBQSxRQUNGO0FBQUEsTUFDRixXQUFXLEtBQUssU0FBUyxnQkFBZ0IsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUFDLEVBQUUsU0FBUyxTQUFTO0FBRWpGLGNBQU0sV0FBVyxnQkFBZ0IsS0FBSyxPQUFPO0FBQzdDLGNBQU0sZ0JBQWdCLEtBQUssa0JBQWtCLEtBQUssU0FBUyxDQUFDO0FBQzVELGNBQU0sYUFBYSxTQUFTLFNBQVMsSUFBSSx3QkFBUyxTQUFTLEtBQUssSUFBSSxDQUFDLE1BQU07QUFFM0UseUJBQWlCLENBQUMsWUFBWSxhQUFhLEVBQUUsT0FBTyxPQUFLLEVBQUUsU0FBUyxDQUFDLEVBQUUsS0FBSyxHQUFHO0FBQy9FLGVBQU8sS0FBSyxjQUFjO0FBQUEsTUFDNUI7QUFBQSxJQUNGO0FBRUEsV0FBTyxPQUFPLFNBQVMsSUFBSSxTQUFTLE1BQU0sSUFBSSxPQUFLLEVBQUUsT0FBTztBQUFBLEVBQzlEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSw0QkFBNEIsWUFBa0M7QUFDcEUsVUFBTSxlQUF5QixDQUFDO0FBQ2hDLFVBQU0sYUFBYSxLQUFLLE9BQU87QUFFL0IsYUFBUyxJQUFJLEdBQUcsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLO0FBRTlDLFlBQU0sZ0JBQWdCLEtBQUs7QUFBQSxRQUN6QixXQUFXLE1BQU0sS0FBSyxJQUFJLEdBQUcsSUFBSSxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUN6RDtBQUdBLFlBQU0sYUFBYSxXQUFXLElBQUksQ0FBQztBQUduQyxZQUFNLGFBQWEsaUJBQWlCLGVBQWUsVUFBVTtBQUM3RCxtQkFBYSxLQUFLLFVBQVU7QUFBQSxJQUM5QjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxrQkFBa0IsWUFBa0M7QUFFMUQsUUFBSSxXQUFXLFdBQVcsR0FBRztBQUMzQixZQUFNLElBQUksTUFBTSw0RUFBZ0I7QUFBQSxJQUNsQztBQUVBLFFBQUksV0FBVyxXQUFXLEdBQUc7QUFDM0IsYUFBTyxXQUFXLENBQUM7QUFBQSxJQUNyQjtBQUVBLFVBQU0sTUFBTSxXQUFXLENBQUMsRUFBRTtBQUMxQixVQUFNLFdBQVcsSUFBSSxNQUFNLEdBQUcsRUFBRSxLQUFLLENBQUM7QUFFdEMsZUFBVyxhQUFhLFlBQVk7QUFDbEMsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLEtBQUs7QUFDNUIsaUJBQVMsQ0FBQyxLQUFLLFVBQVUsQ0FBQztBQUFBLE1BQzVCO0FBQUEsSUFDRjtBQUdBLGFBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxLQUFLO0FBQzVCLGVBQVMsQ0FBQyxLQUFLLFdBQVc7QUFBQSxJQUM1QjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxzQkFBc0IsY0FBeUM7QUFDckUsVUFBTSxhQUE4QixDQUFDO0FBQ3JDLFVBQU0sWUFBWSxLQUFLLE9BQU87QUFFOUIsYUFBUyxJQUFJLEdBQUcsSUFBSSxhQUFhLFFBQVEsS0FBSztBQUM1QyxZQUFNLGFBQWEsYUFBYSxDQUFDO0FBR2pDLFlBQU0sb0JBQW9CLGFBQWE7QUFHdkMsVUFBSSxJQUFJLEdBQUc7QUFDVCxjQUFNLGlCQUFpQixhQUFhLElBQUksQ0FBQztBQUN6QyxjQUFNLE9BQU8saUJBQWlCO0FBRzlCLFlBQUksT0FBTyxNQUFNO0FBQ2YscUJBQVcsS0FBSztBQUFBLFlBQ2QsT0FBTyxJQUFJO0FBQUE7QUFBQSxZQUNYO0FBQUEsWUFDQSxtQkFBbUI7QUFBQSxVQUNyQixDQUFDO0FBQ0Q7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUVBLFVBQUksbUJBQW1CO0FBQ3JCLG1CQUFXLEtBQUs7QUFBQSxVQUNkLE9BQU8sSUFBSTtBQUFBLFVBQ1g7QUFBQSxVQUNBLG1CQUFtQjtBQUFBLFFBQ3JCLENBQUM7QUFBQSxNQUNIO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxlQUNOLE9BQ0EsWUFDQSxjQUN1QjtBQUN2QixVQUFNLFdBQWtDLENBQUM7QUFDekMsVUFBTSxrQkFBa0IsV0FBVyxJQUFJLE9BQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQUcsTUFBTSxJQUFJLENBQUM7QUFDekUsVUFBTSxtQkFBbUIsS0FBSyxPQUFPO0FBRXJDLFFBQUksYUFBYTtBQUNqQixlQUFXLFlBQVksaUJBQWlCO0FBQ3RDLFVBQUksV0FBVyxjQUFjLGtCQUFrQjtBQUM3QyxjQUFNLGVBQWUsTUFBTSxNQUFNLFlBQVksUUFBUTtBQUNyRCxjQUFNLFdBQVcsS0FBSyx1QkFBdUIsWUFBWTtBQUN6RCxjQUFNLGdCQUFnQixLQUFLLDJCQUEyQixjQUFjLFlBQVksUUFBUTtBQUV4RixpQkFBUyxLQUFLO0FBQUEsVUFDWjtBQUFBLFVBQ0E7QUFBQSxVQUNBLE9BQU87QUFBQSxVQUNQO0FBQUEsVUFDQTtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0g7QUFFQSxtQkFBYTtBQUFBLElBQ2Y7QUFHQSxRQUFJLGFBQWEsTUFBTSxRQUFRO0FBQzdCLFlBQU0sZUFBZSxNQUFNLE1BQU0sVUFBVTtBQUMzQyxZQUFNLFdBQVcsS0FBSyx1QkFBdUIsWUFBWTtBQUN6RCxZQUFNLGdCQUFnQixLQUFLLDJCQUEyQixjQUFjLFlBQVksTUFBTSxNQUFNO0FBRTVGLGVBQVMsS0FBSztBQUFBLFFBQ1o7QUFBQSxRQUNBLFVBQVUsTUFBTTtBQUFBLFFBQ2hCLE9BQU87QUFBQSxRQUNQO0FBQUEsUUFDQTtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0g7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsdUJBQXVCLE9BQXFDO0FBQ2xFLFVBQU0sVUFBVSxNQUFNLElBQUksT0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEdBQUc7QUFDbEQsV0FBTyxnQkFBZ0IsT0FBTztBQUFBLEVBQ2hDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSwyQkFBMkIsY0FBd0IsT0FBZSxLQUFxQjtBQUM3RixRQUFJLFNBQVMsTUFBTSxHQUFHO0FBQ3BCLGFBQU87QUFBQSxJQUNUO0FBRUEsVUFBTSx1QkFBdUIsYUFBYSxNQUFNLE9BQU8sS0FBSyxJQUFJLE1BQU0sR0FBRyxhQUFhLE1BQU0sQ0FBQztBQUM3RixRQUFJLHFCQUFxQixXQUFXLEdBQUc7QUFDckMsYUFBTztBQUFBLElBQ1Q7QUFFQSxVQUFNLE1BQU0scUJBQXFCLE9BQU8sQ0FBQyxLQUFLLFFBQVEsTUFBTSxLQUFLLENBQUM7QUFDbEUsV0FBTyxNQUFNLHFCQUFxQjtBQUFBLEVBQ3BDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxvQkFBb0IsVUFBZ0Q7QUFDMUUsVUFBTSxRQUF1QixDQUFDO0FBRTlCLGFBQVMsSUFBSSxHQUFHLElBQUksU0FBUyxRQUFRLEtBQUs7QUFDeEMsZUFBUyxJQUFJLElBQUksR0FBRyxJQUFJLFNBQVMsUUFBUSxLQUFLO0FBQzVDLGNBQU0sV0FBVyxTQUFTLENBQUM7QUFDM0IsY0FBTSxXQUFXLFNBQVMsQ0FBQztBQUczQixjQUFNLGlCQUFpQixTQUFTLFNBQVMsT0FBTyxPQUFLLFNBQVMsU0FBUyxTQUFTLENBQUMsQ0FBQztBQUVsRixZQUFJLGVBQWUsU0FBUyxHQUFHO0FBRTdCLGdCQUFNLGFBQVksb0JBQUksSUFBSSxDQUFDLEdBQUcsU0FBUyxVQUFVLEdBQUcsU0FBUyxRQUFRLENBQUMsR0FBRTtBQUN4RSxnQkFBTSxpQkFBaUIsZUFBZSxTQUFTO0FBRy9DLGNBQUksaUJBQWlCLEtBQUs7QUFDeEIsa0JBQU0sS0FBSztBQUFBLGNBQ1QsYUFBYTtBQUFBLGNBQ2IsV0FBVztBQUFBLGNBQ1g7QUFBQSxjQUNBO0FBQUEsWUFDRixDQUFDO0FBQUEsVUFDSDtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxhQUFtQjtBQUNqQixTQUFLLG1CQUFtQixXQUFXO0FBQUEsRUFDckM7QUFDRjs7O0FDbGNBLElBQUFDLG1CQUE4QjtBQW9COUIsZUFBc0Isb0JBQ3BCLE9BQ0EsVUFDQSxPQUNBLFdBQ0EsY0FDQSxLQUNBLFVBQzhCO0FBQzlCLFFBQU0sWUFBc0IsQ0FBQztBQUM3QixRQUFNLGdCQUFnQixtQkFBZSxnQ0FBYyxZQUFZLEVBQUUsUUFBUSxRQUFRLEVBQUUsSUFBSTtBQUd2RixNQUFJLGVBQWU7QUFDakIsVUFBTUMsb0JBQW1CLE9BQU8sYUFBYTtBQUFBLEVBQy9DO0FBR0EsV0FBUyxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsS0FBSztBQUN4QyxVQUFNLFVBQVUsU0FBUyxDQUFDO0FBQzFCLFVBQU0sZUFBZSxNQUFNLHFCQUFxQixTQUFTLFdBQVcsSUFBSSxDQUFDO0FBQ3pFLFVBQU0sV0FBVyx3QkFBd0IsU0FBUyxHQUFHLFNBQVMsUUFBUSxPQUFPLFNBQVM7QUFFdEYsVUFBTSxXQUFXLGlCQUFpQixZQUFZLElBQUk7QUFDbEQsVUFBTSxhQUFhLE1BQU1DO0FBQUEsTUFDdkI7QUFBQSxVQUNBLGdDQUFjLGdCQUFnQixHQUFHLGFBQWEsSUFBSSxRQUFRLEtBQUssUUFBUTtBQUFBLElBQ3pFO0FBRUEsVUFBTSxNQUFNLE9BQU8sWUFBWSxRQUFRO0FBQ3ZDLGNBQVUsS0FBSyxVQUFVO0FBQUEsRUFDM0I7QUFHQSxRQUFNLGVBQWUsTUFBTSxvQkFBb0IsT0FBTyxVQUFVLFdBQVcsV0FBVyxhQUFhO0FBRW5HLFNBQU87QUFBQSxJQUNMO0FBQUEsSUFDQTtBQUFBLEVBQ0Y7QUFDRjtBQUtBLGVBQWUscUJBQ2IsU0FDQSxXQUNBLGVBQ2lCO0FBRWpCLFFBQU0sY0FBYyxRQUFRLFNBQVMsTUFBTSxHQUFHLENBQUMsRUFBRSxLQUFLLElBQUk7QUFFMUQsTUFBSSxhQUFhO0FBQ2YsV0FBTyxHQUFHLFNBQVMsTUFBTSxhQUFhLEtBQUssV0FBVztBQUFBLEVBQ3hELE9BQU87QUFDTCxXQUFPLEdBQUcsU0FBUyxtQkFBUyxhQUFhO0FBQUEsRUFDM0M7QUFDRjtBQUtBLFNBQVMsd0JBQ1AsU0FDQSxjQUNBLGVBQ0EsT0FDQSxXQUNRO0FBaEdWO0FBaUdFLFFBQU0sUUFBa0IsQ0FBQztBQUd6QixRQUFNLEtBQUssS0FBSztBQUNoQixRQUFNLEtBQUssWUFBWSxlQUFlLENBQUMsSUFBSSxhQUFhLEVBQUU7QUFDMUQsUUFBTSxLQUFLLGNBQWMsUUFBUSxTQUFTLEtBQUssSUFBSSxDQUFDLEdBQUc7QUFDdkQsUUFBTSxLQUFLLGtCQUFrQixRQUFRLGNBQWMsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUMvRCxRQUFNLEtBQUssS0FBSztBQUNoQixRQUFNLEtBQUssRUFBRTtBQUdiLFFBQU0sS0FBSyxrQkFBUSxlQUFlLENBQUMsRUFBRTtBQUNyQyxRQUFNLEtBQUssRUFBRTtBQUdiLE1BQUksUUFBUSxTQUFTLFNBQVMsR0FBRztBQUMvQixVQUFNLEtBQUssb0NBQVc7QUFDdEIsVUFBTSxLQUFLLEVBQUU7QUFDYixVQUFNLEtBQUssUUFBUSxTQUFTLElBQUksT0FBSyxLQUFLLENBQUMsRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDO0FBQ3pELFVBQU0sS0FBSyxFQUFFO0FBQUEsRUFDZjtBQUdBLFFBQU0sZUFBZSxNQUFNO0FBQUEsSUFDekIsVUFBUSxLQUFLLGdCQUFnQixnQkFBZ0IsS0FBSyxjQUFjO0FBQUEsRUFDbEU7QUFFQSxNQUFJLGFBQWEsU0FBUyxHQUFHO0FBQzNCLFVBQU0sS0FBSyw4QkFBVTtBQUNyQixVQUFNLEtBQUssRUFBRTtBQUViLGVBQVcsUUFBUSxjQUFjO0FBQy9CLFlBQU0sY0FBYyxLQUFLLGdCQUFnQixlQUFlLEtBQUssWUFBWSxLQUFLO0FBRTlFLFVBQUksVUFBVSxXQUFXLEdBQUc7QUFDMUIsY0FBTSxhQUFhLFVBQVUsV0FBVztBQUN4QyxjQUFNLGVBQWEsZ0JBQVcsTUFBTSxHQUFHLEVBQUUsSUFBSSxNQUExQixtQkFBNkIsUUFBUSxPQUFPLFFBQU8sZ0JBQU0sY0FBYyxDQUFDO0FBQzNGLGNBQU0scUJBQXFCLEtBQUssZUFBZSxNQUFNLEdBQUcsQ0FBQyxFQUFFLEtBQUssSUFBSTtBQUVwRSxjQUFNLEtBQUssT0FBTyxXQUFXLFFBQVEsT0FBTyxFQUFFLENBQUMsSUFBSSxVQUFVLE9BQU8sa0JBQWtCLEdBQUc7QUFBQSxNQUMzRjtBQUFBLElBQ0Y7QUFDQSxVQUFNLEtBQUssRUFBRTtBQUFBLEVBQ2Y7QUFHQSxRQUFNLEtBQUssOEJBQVU7QUFDckIsUUFBTSxLQUFLLEVBQUU7QUFFYixhQUFXLFFBQVEsUUFBUSxPQUFPO0FBQ2hDLFVBQU0sWUFBWSxLQUFLLFNBQVMsU0FBUyxjQUFPO0FBQ2hELFVBQU0sWUFBWSxLQUFLLFNBQVMsU0FBUyx1QkFBUTtBQUVqRCxVQUFNLEtBQUssT0FBTyxTQUFTLElBQUksU0FBUyxFQUFFO0FBRTFDLFFBQUksS0FBSyxXQUFXO0FBQ2xCLFlBQU0sWUFBWSxPQUFPLEtBQUssY0FBYyxXQUN4QyxLQUFLLFlBQ0wsS0FBSyxVQUFVLFlBQVk7QUFDL0IsWUFBTSxLQUFLLElBQUksU0FBUyxHQUFHO0FBQzNCLFlBQU0sS0FBSyxFQUFFO0FBQUEsSUFDZjtBQUVBLFVBQU0sS0FBSyxLQUFLLE9BQU87QUFDdkIsVUFBTSxLQUFLLEVBQUU7QUFBQSxFQUNmO0FBRUEsU0FBTyxNQUFNLEtBQUssSUFBSTtBQUN4QjtBQUtBLGVBQWUsb0JBQ2IsT0FDQSxVQUNBLFdBQ0EsV0FDQSxRQUNpQjtBQWhMbkI7QUFpTEUsUUFBTSxRQUFrQixDQUFDO0FBR3pCLFFBQU0sS0FBSyxLQUFLLFNBQVMsb0NBQVc7QUFDcEMsUUFBTSxLQUFLLEVBQUU7QUFHYixRQUFNLEtBQUssS0FBSztBQUNoQixRQUFNLEtBQUssa0JBQWtCLFNBQVMsTUFBTSxFQUFFO0FBQzlDLFFBQU0sS0FBSyxlQUFjLG9CQUFJLEtBQUssR0FBRSxZQUFZLENBQUMsRUFBRTtBQUNuRCxRQUFNLEtBQUssS0FBSztBQUNoQixRQUFNLEtBQUssRUFBRTtBQUdiLFFBQU0sS0FBSyxpQkFBTztBQUNsQixRQUFNLEtBQUssRUFBRTtBQUNiLFFBQU0sS0FBSyw2QkFBUyxTQUFTLE1BQU0sNkVBQWlCO0FBQ3BELFFBQU0sS0FBSyxFQUFFO0FBR2IsUUFBTSxLQUFLLDhCQUFVO0FBQ3JCLFFBQU0sS0FBSyxFQUFFO0FBRWIsV0FBUyxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsS0FBSztBQUN4QyxVQUFNLFVBQVUsU0FBUyxDQUFDO0FBQzFCLFVBQU0sV0FBVyxVQUFVLENBQUM7QUFDNUIsVUFBTSxhQUFXLGNBQVMsTUFBTSxHQUFHLEVBQUUsSUFBSSxNQUF4QixtQkFBMkIsUUFBUSxPQUFPLFFBQU8sZ0JBQU0sSUFBSSxDQUFDO0FBQzdFLFVBQU0sV0FBVyxRQUFRLFNBQVMsTUFBTSxHQUFHLENBQUMsRUFBRSxLQUFLLElBQUk7QUFFdkQsVUFBTSxLQUFLLE9BQU8sSUFBSSxDQUFDLE9BQU8sU0FBUyxRQUFRLE9BQU8sRUFBRSxDQUFDLElBQUksUUFBUSxJQUFJO0FBQ3pFLFVBQU0sS0FBSyxFQUFFO0FBQ2IsVUFBTSxLQUFLLDJCQUFZLFFBQVEsRUFBRTtBQUNqQyxVQUFNLEtBQUssc0JBQVksUUFBUSxNQUFNLE1BQU0sRUFBRTtBQUM3QyxVQUFNLEtBQUssNEJBQWEsUUFBUSxnQkFBZ0IsS0FBSyxRQUFRLENBQUMsQ0FBQyxHQUFHO0FBQ2xFLFVBQU0sS0FBSyxFQUFFO0FBQUEsRUFDZjtBQUVBLFFBQU0sV0FBVyxNQUFNLEtBQUssSUFBSTtBQUNoQyxRQUFNLFdBQVcsaUJBQWlCLFNBQVMsSUFBSTtBQUMvQyxRQUFNLGFBQWEsTUFBTUE7QUFBQSxJQUN2QjtBQUFBLFFBQ0EsZ0NBQWMsU0FBUyxHQUFHLE1BQU0sSUFBSSxRQUFRLEtBQUssUUFBUTtBQUFBLEVBQzNEO0FBRUEsUUFBTSxNQUFNLE9BQU8sWUFBWSxRQUFRO0FBQ3ZDLFNBQU87QUFDVDtBQUtBLFNBQVMsaUJBQWlCLE9BQXVCO0FBQy9DLFFBQU0sVUFBVSxNQUFNLEtBQUs7QUFDM0IsTUFBSSxDQUFDLFNBQVM7QUFDWixXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sVUFBVSxRQUNiLFFBQVEsaUJBQWlCLEdBQUcsRUFDNUIsUUFBUSxRQUFRLEdBQUcsRUFDbkIsS0FBSztBQUVSLFNBQU8sV0FBVztBQUNwQjtBQUtBLGVBQWVELG9CQUFtQixPQUFjLFFBQStCO0FBQzdFLFFBQU0sU0FBUyxNQUFNLE1BQU0sUUFBUSxPQUFPLE1BQU07QUFDaEQsTUFBSSxDQUFDLFFBQVE7QUFDWCxVQUFNLE1BQU0sYUFBYSxNQUFNO0FBQUEsRUFDakM7QUFDRjtBQUtBLGVBQWVDLGtCQUFpQixPQUFjLE1BQStCO0FBQzNFLFFBQU0saUJBQWEsZ0NBQWMsSUFBSTtBQUNyQyxRQUFNLGlCQUFpQixXQUFXLFlBQVksS0FBSztBQUNuRCxRQUFNLE9BQU8sbUJBQW1CLEtBQUssYUFBYSxXQUFXLE1BQU0sR0FBRyxjQUFjO0FBQ3BGLFFBQU0sWUFBWSxtQkFBbUIsS0FBSyxLQUFLO0FBRS9DLE1BQUksWUFBWTtBQUNoQixNQUFJLFFBQVE7QUFFWixTQUFPLE1BQU0sTUFBTSxRQUFRLE9BQU8sU0FBUyxHQUFHO0FBQzVDLGdCQUFZLEdBQUcsSUFBSSxJQUFJLEtBQUssR0FBRyxTQUFTO0FBQ3hDLGFBQVM7QUFBQSxFQUNYO0FBRUEsU0FBTztBQUNUOzs7QUx4UU8sSUFBTSxxQkFBcUI7QUFFM0IsSUFBTSxXQUFOLGNBQXVCLDBCQUFTO0FBQUEsRUFXckMsWUFBWSxNQUFxQixRQUF1QjtBQUN0RCxVQUFNLElBQUk7QUFWWixTQUFRLFdBQStCLENBQUM7QUFDeEMsU0FBUSxhQUFvQztBQUM1QyxTQUFRLFVBQXNDO0FBQzlDLFNBQVEsZUFBeUM7QUFDakQsU0FBUSxlQUF5QztBQUNqRCxTQUFRLGNBQXVDO0FBQy9DLFNBQVEsaUJBQTBDO0FBQ2xELFNBQVEsc0JBQStDO0FBSXJELFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxjQUFzQjtBQUNwQixXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsaUJBQXlCO0FBQ3ZCLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxVQUFrQjtBQUNoQixXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsTUFBTSxTQUF3QjtBQUM1QixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUNoQixjQUFVLFNBQVMsZUFBZTtBQUVsQyxVQUFNLFdBQVcsVUFBVSxTQUFTLE9BQU8sRUFBRSxLQUFLLGtCQUFrQixDQUFDO0FBQ3JFLGFBQVMsU0FBUyxPQUFPLEVBQUUsS0FBSyxrQkFBa0IsTUFBTSxtQkFBUyxDQUFDO0FBRWxFLFVBQU0sZ0JBQWdCLFNBQVMsU0FBUyxPQUFPLEVBQUUsS0FBSyxtQkFBbUIsQ0FBQztBQUMxRSxrQkFBYyxTQUFTLFFBQVEsRUFBRSxNQUFNLGVBQUssQ0FBQztBQUM3QyxVQUFNLGlCQUFpQixjQUFjLFNBQVMsU0FBUyxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBQ3ZFLG1CQUFlLFFBQVEsS0FBSyxlQUFlO0FBQzNDLFNBQUssY0FBYztBQUVuQixVQUFNLGFBQWEsU0FBUyxTQUFTLE9BQU8sRUFBRSxLQUFLLG9CQUFvQixDQUFDO0FBR3hFLFVBQU0sWUFBWSxXQUFXLFNBQVMsT0FBTyxFQUFFLEtBQUssa0JBQWtCLENBQUM7QUFDdkUsVUFBTSxjQUFjLFVBQVUsU0FBUyxPQUFPO0FBQzlDLFVBQU0saUJBQWlCLFlBQVksU0FBUyxTQUFTLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDekUsbUJBQWUsVUFBVTtBQUN6QixnQkFBWSxXQUFXLG1CQUFTO0FBQ2hDLFNBQUssaUJBQWlCO0FBRXRCLFVBQU0sbUJBQW1CLFVBQVUsU0FBUyxPQUFPO0FBQ25ELFVBQU0sc0JBQXNCLGlCQUFpQixTQUFTLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNuRix3QkFBb0IsVUFBVTtBQUM5QixxQkFBaUIsV0FBVyxrQ0FBUztBQUNyQyxTQUFLLHNCQUFzQjtBQUUzQixVQUFNLGVBQWUsV0FBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLGdCQUFNLEtBQUssa0JBQWtCLENBQUM7QUFDekYsaUJBQWEsaUJBQWlCLFNBQVMsTUFBTTtBQUMzQyxXQUFLLEtBQUssV0FBVztBQUFBLElBQ3ZCLENBQUM7QUFDRCxTQUFLLGVBQWU7QUFFcEIsVUFBTSxhQUFhLFVBQVUsU0FBUyxPQUFPLEVBQUUsS0FBSyxvQkFBb0IsQ0FBQztBQUN6RSxTQUFLLGFBQWE7QUFFbEIsVUFBTSxjQUFjLFVBQVUsU0FBUyxPQUFPLEVBQUUsS0FBSyxpQkFBaUIsQ0FBQztBQUN2RSxVQUFNLGFBQWEsWUFBWSxTQUFTLFVBQVU7QUFDbEQsZUFBVyxjQUFjO0FBQ3pCLFNBQUssVUFBVTtBQUVmLFVBQU0sZUFBZSxZQUFZLFNBQVMsVUFBVSxFQUFFLE1BQU0sZ0JBQU0sS0FBSyxrQkFBa0IsQ0FBQztBQUMxRixpQkFBYSxpQkFBaUIsU0FBUyxNQUFNO0FBQzNDLFdBQUssS0FBSyxXQUFXO0FBQUEsSUFDdkIsQ0FBQztBQUNELFNBQUssZUFBZTtBQUVwQixlQUFXLGlCQUFpQixXQUFXLENBQUMsVUFBVTtBQUNoRCxVQUFJLE1BQU0sUUFBUSxZQUFZLE1BQU0sV0FBVyxNQUFNLFVBQVU7QUFDN0QsY0FBTSxlQUFlO0FBQ3JCLGFBQUssS0FBSyxXQUFXO0FBQUEsTUFDdkI7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFUSxpQkFBeUI7QUFDL0IsVUFBTSxTQUFRLG9CQUFJLEtBQUssR0FBRSxZQUFZLEVBQUUsUUFBUSxTQUFTLEdBQUc7QUFDM0QsV0FBTyxXQUFXLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBRVEsYUFBYSxPQUlaO0FBdkdYO0FBd0dJLFVBQU0sZUFBYyxXQUFNLGdCQUFOLFlBQXFCO0FBQ3pDLFVBQU0sZUFBYyxXQUFNLGdCQUFOLFlBQXFCO0FBRXpDLFFBQUksS0FBSyxjQUFjO0FBQ3JCLFdBQUssYUFBYSxXQUFXLE1BQU07QUFDbkMsV0FBSyxhQUFhLFVBQVUsT0FBTyxjQUFjLFdBQVc7QUFBQSxJQUM5RDtBQUNBLFFBQUksS0FBSyxjQUFjO0FBQ3JCLFdBQUssYUFBYSxXQUFXLE1BQU07QUFDbkMsV0FBSyxhQUFhLFVBQVUsT0FBTyxjQUFjLFdBQVc7QUFBQSxJQUM5RDtBQUNBLFFBQUksS0FBSyxTQUFTO0FBQ2hCLFdBQUssUUFBUSxXQUFXLE1BQU07QUFBQSxJQUNoQztBQUNBLFFBQUksTUFBTSxRQUFRO0FBQ2hCLFdBQUssVUFBVSxTQUFTLGVBQWU7QUFBQSxJQUN6QyxPQUFPO0FBQ0wsV0FBSyxVQUFVLFlBQVksZUFBZTtBQUFBLElBQzVDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBYyxjQUFjLE1BQXVDO0FBQ2pFLFNBQUssU0FBUyxLQUFLLElBQUk7QUFDdkIsUUFBSSxDQUFDLEtBQUssWUFBWTtBQUNwQjtBQUFBLElBQ0Y7QUFFQSxVQUFNLFlBQVksS0FBSyxXQUFXLFNBQVMsT0FBTztBQUFBLE1BQ2hELEtBQUssNkJBQTZCLEtBQUssSUFBSTtBQUFBLElBQzdDLENBQUM7QUFDRCxjQUFVLFNBQVMsT0FBTztBQUFBLE1BQ3hCLEtBQUs7QUFBQSxNQUNMLE1BQU0sS0FBSyxhQUFhLEtBQUssSUFBSTtBQUFBLElBQ25DLENBQUM7QUFDRCxVQUFNLFlBQVksVUFBVSxTQUFTLE9BQU87QUFBQSxNQUMxQyxLQUFLO0FBQUEsSUFDUCxDQUFDO0FBQ0QsUUFBSTtBQUNGLFlBQU0sa0NBQWlCLGVBQWUsS0FBSyxTQUFTLFdBQVcsSUFBSSxJQUFJO0FBQUEsSUFDekUsU0FBUyxPQUFPO0FBQ2QsWUFBTSxXQUFXLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDdEUsZ0JBQVUsUUFBUSxvQ0FBVyxRQUFRLEVBQUU7QUFBQSxJQUN6QztBQUNBLFFBQUksS0FBSyxXQUFXO0FBQ2xCLFlBQU0sWUFBWSxPQUFPLEtBQUssY0FBYyxXQUN4QyxLQUFLLFlBQ0wsS0FBSyxVQUFVLFlBQVk7QUFDL0IsZ0JBQVUsU0FBUyxPQUFPO0FBQUEsUUFDeEIsS0FBSztBQUFBLFFBQ0wsTUFBTTtBQUFBLE1BQ1IsQ0FBQztBQUFBLElBQ0g7QUFFQSxTQUFLLFdBQVcsWUFBWSxLQUFLLFdBQVc7QUFBQSxFQUM5QztBQUFBLEVBRVEsYUFBYSxNQUF3QztBQUMzRCxRQUFJLFNBQVMsUUFBUTtBQUNuQixhQUFPO0FBQUEsSUFDVDtBQUNBLFFBQUksU0FBUyxhQUFhO0FBQ3hCLGFBQU87QUFBQSxJQUNUO0FBQ0EsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLE1BQWMsYUFBNEI7QUExSzVDO0FBMktJLFVBQU0sU0FBUSxnQkFBSyxZQUFMLG1CQUFjLE1BQU0sV0FBcEIsWUFBOEI7QUFDNUMsUUFBSSxDQUFDLE9BQU87QUFDVixVQUFJLHdCQUFPLGlFQUFlO0FBQzFCO0FBQUEsSUFDRjtBQUVBLFVBQU0sa0JBQWtCLEtBQUssU0FBUyxXQUFXO0FBRWpELFVBQU0sS0FBSyxjQUFjO0FBQUEsTUFDdkIsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsWUFBVyxvQkFBSSxLQUFLLEdBQUUsWUFBWTtBQUFBLElBQ3BDLENBQUM7QUFDRCxRQUFJLEtBQUssU0FBUztBQUNoQixXQUFLLFFBQVEsUUFBUTtBQUFBLElBQ3ZCO0FBRUEsUUFBSSxpQkFBaUI7QUFDbkIsV0FBSyxLQUFLLGlDQUFpQyxLQUFLO0FBQUEsSUFDbEQ7QUFFQSxTQUFLLGFBQWEsRUFBRSxRQUFRLE1BQU0sYUFBYSxLQUFLLENBQUM7QUFDckQsUUFBSTtBQUNGLFlBQU0sVUFBUyxnQkFBSyxtQkFBTCxtQkFBcUIsWUFBckIsWUFBZ0M7QUFDL0MsWUFBTSxtQkFBa0IsZ0JBQUssd0JBQUwsbUJBQTBCLFlBQTFCLFlBQXFDO0FBRTdELFVBQUk7QUFFSixVQUFJLFVBQVUsS0FBSyxPQUFPLFNBQVMsaUJBQWlCO0FBRWxELFlBQUk7QUFDRixnQkFBTSxnQkFBZ0IsTUFBTSxLQUFLLE9BQU8sT0FBTyxLQUFLO0FBRXBELGNBQUksaUJBQWlCO0FBRW5CLG9CQUFRLEtBQUssb0JBQW9CLGFBQWE7QUFBQSxVQUNoRCxPQUFPO0FBRUwsa0JBQU0sVUFBVSxLQUFLLGFBQWEsYUFBYTtBQUMvQyxrQkFBTSxtQkFBbUIsS0FBSyxzQkFBc0IsT0FBTyxPQUFPO0FBQ2xFLG9CQUFRLE1BQU0sS0FBSyxPQUFPLHNCQUFzQixnQkFBZ0I7QUFBQSxVQUNsRTtBQUFBLFFBQ0YsU0FBUyxPQUFPO0FBQ2Qsa0JBQVEsTUFBTSxrQ0FBYyxLQUFLO0FBQ2pDLGNBQUksd0JBQU8sNEdBQXVCO0FBQ2xDLGtCQUFRLE1BQU0sS0FBSyxPQUFPLHNCQUFzQixLQUFLLFFBQVE7QUFBQSxRQUMvRDtBQUFBLE1BQ0YsT0FBTztBQUVMLGdCQUFRLE1BQU0sS0FBSyxPQUFPLHNCQUFzQixLQUFLLFFBQVE7QUFBQSxNQUMvRDtBQUVBLFlBQU0sS0FBSyxjQUFjO0FBQUEsUUFDdkIsTUFBTTtBQUFBLFFBQ04sU0FBUztBQUFBLFFBQ1QsWUFBVyxvQkFBSSxLQUFLLEdBQUUsWUFBWTtBQUFBLE1BQ3BDLENBQUM7QUFBQSxJQUNILFNBQVMsT0FBTztBQUNkLFlBQU0sVUFBVSxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLO0FBQ3JFLFVBQUksd0JBQU8sOEJBQVUsT0FBTyxFQUFFO0FBQUEsSUFDaEMsVUFBRTtBQUNBLFdBQUssYUFBYSxFQUFFLFFBQVEsTUFBTSxDQUFDO0FBQUEsSUFDckM7QUFBQSxFQUNGO0FBQUEsRUFFUSxhQUFhLGVBQThCO0FBQ2pELFFBQUksY0FBYyxXQUFXLEdBQUc7QUFDOUIsYUFBTztBQUFBLElBQ1Q7QUFFQSxRQUFJLFVBQVU7QUFFZCxhQUFTLElBQUksR0FBRyxJQUFJLGNBQWMsUUFBUSxLQUFLO0FBQzdDLFlBQU0sU0FBUyxjQUFjLENBQUM7QUFDOUIsWUFBTSxFQUFFLE9BQU8sTUFBTSxNQUFNLElBQUk7QUFFL0IsaUJBQVcsbUJBQVMsSUFBSSxDQUFDLEtBQUssS0FBSyxLQUFLO0FBQUE7QUFDeEMsaUJBQVcsbUJBQVMsS0FBSyxJQUFJO0FBQUE7QUFDN0IsaUJBQVcsbUJBQVMsTUFBTSxXQUFXLGNBQUk7QUFBQTtBQUN6QyxpQkFBVywwQkFBVyxRQUFRLEtBQUssUUFBUSxDQUFDLENBQUM7QUFBQTtBQUFBO0FBQzdDLGlCQUFXLEdBQUcsTUFBTSxJQUFJO0FBQUE7QUFBQTtBQUN4QixpQkFBVztBQUFBLElBQ2I7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRVEsb0JBQW9CLGVBQThCO0FBQ3hELFFBQUksY0FBYyxXQUFXLEdBQUc7QUFDOUIsYUFBTztBQUFBLElBQ1Q7QUFFQSxRQUFJLFNBQVM7QUFFYixhQUFTLElBQUksR0FBRyxJQUFJLGNBQWMsUUFBUSxLQUFLO0FBQzdDLFlBQU0sU0FBUyxjQUFjLENBQUM7QUFDOUIsWUFBTSxFQUFFLE9BQU8sTUFBTSxNQUFNLElBQUk7QUFFL0IsZ0JBQVUsTUFBTSxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUs7QUFBQTtBQUFBO0FBQ3BDLGdCQUFVLHVCQUFhLEtBQUssSUFBSTtBQUFBO0FBQ2hDLGdCQUFVLHFCQUFXLE1BQU0sV0FBVyxjQUFJO0FBQUE7QUFDMUMsZ0JBQVUsNEJBQWEsUUFBUSxLQUFLLFFBQVEsQ0FBQyxDQUFDO0FBQUE7QUFBQTtBQUM5QyxnQkFBVSxLQUFLLE1BQU0sS0FBSyxVQUFVLEdBQUcsR0FBRyxDQUFDLEdBQUcsTUFBTSxLQUFLLFNBQVMsTUFBTSxRQUFRLEVBQUU7QUFBQTtBQUFBO0FBQUEsSUFDcEY7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRVEsc0JBQXNCLE9BQWUsU0FBcUM7QUFFaEYsVUFBTSxlQUFlO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdkIsT0FBTztBQUdMLFdBQU87QUFBQSxNQUNMLEVBQUUsTUFBTSxVQUFVLFNBQVMsY0FBYyxZQUFXLG9CQUFJLEtBQUssR0FBRSxZQUFZLEVBQUU7QUFBQSxNQUM3RSxHQUFHLEtBQUs7QUFBQSxJQUNWO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBYyxhQUE0QjtBQXRTNUM7QUF1U0ksUUFBSSxLQUFLLFNBQVMsV0FBVyxHQUFHO0FBQzlCLFVBQUksd0JBQU8saUVBQWU7QUFDMUI7QUFBQSxJQUNGO0FBRUEsU0FBSyxhQUFhLEVBQUUsUUFBUSxNQUFNLGFBQWEsS0FBSyxDQUFDO0FBQ3JELFFBQUk7QUFDRixZQUFNLG9CQUFvQixNQUFNLEtBQUsscUJBQXFCO0FBQzFELFlBQU0sYUFBWSxnQkFBSyxnQkFBTCxtQkFBa0IsTUFBTSxXQUF4QixZQUFrQztBQUNwRCxZQUFNLGlCQUFpQixxQkFBcUI7QUFDNUMsVUFBSSxDQUFDLGdCQUFnQjtBQUNuQixZQUFJLHdCQUFPLDJEQUFjO0FBQ3pCO0FBQUEsTUFDRjtBQUNBLFVBQUkscUJBQXFCLEtBQUssYUFBYTtBQUN6QyxhQUFLLFlBQVksUUFBUTtBQUFBLE1BQzNCO0FBR0EsWUFBTSx3QkFBd0IsS0FBSyxTQUFTLFVBQVUsS0FBSyxLQUFLLE9BQU8sU0FBUztBQUVoRixVQUFJLHVCQUF1QjtBQUV6QixZQUFJLHdCQUFPLGdGQUFvQjtBQUUvQixZQUFJO0FBQ0YsZ0JBQU0sU0FBUyxJQUFJLHNCQUFzQjtBQUFBLFlBQ3ZDLFFBQVEsS0FBSyxPQUFPLFNBQVMsbUJBQW1CLEtBQUssT0FBTyxTQUFTO0FBQUEsWUFDckUsZ0JBQWdCLEtBQUssT0FBTyxTQUFTO0FBQUEsWUFDckMscUJBQXFCO0FBQUEsWUFDckIsa0JBQWtCO0FBQUEsWUFDbEIsWUFBWTtBQUFBLFlBQ1osdUJBQXVCO0FBQUEsWUFDdkIsS0FBSyxLQUFLO0FBQUEsWUFDVixVQUFVLEtBQUssT0FBTztBQUFBLFlBQ3RCLHdCQUF3QjtBQUFBLFVBQzFCLENBQUM7QUFFRCxnQkFBTSxTQUFTLE1BQU0sT0FBTyxlQUFlLEtBQUssUUFBUTtBQUV4RCxrQkFBUSxJQUFJLDJDQUFhLE9BQU8sU0FBUyxNQUFNLDhDQUFXO0FBRTFELGNBQUksT0FBTyxTQUFTLFNBQVMsR0FBRztBQUU5QixnQkFBSSx3QkFBTyxHQUFHLE9BQU8sU0FBUyxNQUFNLG9HQUF5QjtBQUU3RCxrQkFBTSxrQkFBa0IsTUFBTTtBQUFBLGNBQzVCLEtBQUssSUFBSTtBQUFBLGNBQ1QsT0FBTztBQUFBLGNBQ1AsT0FBTztBQUFBLGNBQ1A7QUFBQSxjQUNBLEtBQUssT0FBTyxTQUFTO0FBQUEsY0FDckIsS0FBSztBQUFBLGNBQ0wsS0FBSyxPQUFPO0FBQUEsWUFDZDtBQUVBLGdCQUFJO0FBQUEsY0FDRjtBQUFBLCtCQUE4QixnQkFBZ0IsVUFBVSxNQUFNO0FBQUEsd0JBQWEsZ0JBQWdCLFlBQVk7QUFBQSxZQUN6RztBQUVBLG1CQUFPLFdBQVc7QUFDbEIsaUJBQUssYUFBYTtBQUNsQjtBQUFBLFVBQ0YsT0FBTztBQUVMLG9CQUFRLElBQUksaUdBQXNCO0FBQUEsVUFDcEM7QUFFQSxpQkFBTyxXQUFXO0FBQUEsUUFDcEIsU0FBUyxPQUFPO0FBQ2Qsa0JBQVEsTUFBTSwrRkFBeUIsS0FBSztBQUM1QyxjQUFJLHdCQUFPLCtHQUEwQjtBQUFBLFFBQ3ZDO0FBQUEsTUFDRjtBQUdBLFlBQU0sZ0JBQWdCLEtBQUssdUJBQXVCLEtBQUssUUFBUTtBQUMvRCxVQUFJLFVBQVUsTUFBTSxLQUFLLE9BQU8sc0JBQXNCO0FBQUEsUUFDcEQ7QUFBQSxVQUNFLE1BQU07QUFBQSxVQUNOLFNBQVM7QUFBQSxVQUNULFlBQVcsb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFBQSxRQUNwQztBQUFBLE1BQ0YsQ0FBQztBQUNELGdCQUFVLEtBQUssYUFBYSxPQUFPO0FBRW5DLFlBQU0sYUFBYSxNQUFNLEtBQUssT0FBTztBQUFBLFFBQ25DO0FBQUEsUUFDQTtBQUFBLFVBQ0U7QUFBQSxZQUNFLE1BQU07QUFBQSxZQUNOLFNBQVM7QUFBQSxZQUNULFlBQVcsb0JBQUksS0FBSyxHQUFFLFlBQVk7QUFBQSxVQUNwQztBQUFBLFFBQ0Y7QUFBQSxRQUNBLEtBQUssT0FBTyxTQUFTO0FBQUEsTUFDdkI7QUFDQSxVQUFJLHdCQUFPLHdEQUFnQixVQUFVLEVBQUU7QUFDdkMsV0FBSyxhQUFhO0FBQUEsSUFDcEIsU0FBUyxPQUFPO0FBQ2QsWUFBTSxVQUFVLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUs7QUFDckUsVUFBSSx3QkFBTyw4QkFBVSxPQUFPLEVBQUU7QUFBQSxJQUNoQyxVQUFFO0FBQ0EsV0FBSyxhQUFhLEVBQUUsUUFBUSxNQUFNLENBQUM7QUFBQSxJQUNyQztBQUFBLEVBQ0Y7QUFBQSxFQUVRLGVBQXFCO0FBQzNCLFNBQUssV0FBVyxDQUFDO0FBQ2pCLFFBQUksS0FBSyxZQUFZO0FBQ25CLFdBQUssV0FBVyxNQUFNO0FBQUEsSUFDeEI7QUFDQSxRQUFJLEtBQUssU0FBUztBQUNoQixXQUFLLFFBQVEsUUFBUTtBQUFBLElBQ3ZCO0FBQ0EsUUFBSSxLQUFLLGFBQWE7QUFDcEIsV0FBSyxZQUFZLFFBQVEsS0FBSyxlQUFlO0FBQUEsSUFDL0M7QUFBQSxFQUNGO0FBQUEsRUFFUSx1QkFBdUIsT0FBbUM7QUFDaEUsVUFBTSxhQUFhLE1BQ2hCLElBQUksQ0FBQyxTQUFTO0FBQ2IsWUFBTSxZQUNKLEtBQUssU0FBUyxTQUFTLHVCQUN2QixLQUFLLFNBQVMsY0FBYyxtQ0FDNUI7QUFDRixhQUFPLElBQUksU0FBUyxLQUFLLEtBQUssT0FBTztBQUFBLElBQ3ZDLENBQUMsRUFDQSxLQUFLLE1BQU07QUFFZCxXQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWFNLFVBQVU7QUFBQSxFQUN6QjtBQUFBLEVBRVEsYUFBYSxTQUF5QjtBQUM1QyxVQUFNLFFBQVEsUUFBUSxNQUFNLElBQUk7QUFDaEMsVUFBTSxVQUFVLENBQUM7QUFDakIsUUFBSSxRQUFRO0FBRVosV0FBTyxRQUFRLE1BQU0sUUFBUTtBQUMzQixZQUFNLE9BQU8sTUFBTSxLQUFLLEVBQUUsS0FBSztBQUMvQixVQUFJLEtBQUssV0FBVyxjQUFPLEtBQUssS0FBSyxXQUFXLG1DQUFVLEdBQUc7QUFDM0QsaUJBQVM7QUFDVCxlQUFPLFFBQVEsTUFBTSxVQUFVLE1BQU0sS0FBSyxFQUFFLEtBQUssRUFBRSxXQUFXLEdBQUcsR0FBRztBQUNsRSxtQkFBUztBQUFBLFFBQ1g7QUFDQSxlQUFPLFFBQVEsTUFBTSxVQUFVLE1BQU0sS0FBSyxFQUFFLEtBQUssTUFBTSxJQUFJO0FBQ3pELG1CQUFTO0FBQUEsUUFDWDtBQUNBO0FBQUEsTUFDRjtBQUNBLFVBQUksS0FBSyxXQUFXLHFCQUFNLEtBQUssS0FBSyxTQUFTLGNBQUksR0FBRztBQUNsRCxpQkFBUztBQUNULGVBQU8sUUFBUSxNQUFNLFVBQVUsTUFBTSxLQUFLLEVBQUUsS0FBSyxNQUFNLElBQUk7QUFDekQsbUJBQVM7QUFBQSxRQUNYO0FBQ0E7QUFBQSxNQUNGO0FBQ0EsY0FBUSxLQUFLLE1BQU0sS0FBSyxDQUFDO0FBQ3pCLGVBQVM7QUFBQSxJQUNYO0FBRUEsV0FBTyxRQUFRLEtBQUssSUFBSSxFQUFFLEtBQUs7QUFBQSxFQUNqQztBQUFBLEVBRUEsTUFBYyxpQ0FBaUMsVUFBaUM7QUFDOUUsUUFBSSxDQUFDLEtBQUssYUFBYTtBQUNyQjtBQUFBLElBQ0Y7QUFFQSxVQUFNLFNBQ0o7QUFBQTtBQUFBLGdCQUVPLFFBQVE7QUFFakIsUUFBSTtBQUNGLFlBQU0sUUFBUSxNQUFNLEtBQUssT0FBTyxrQkFBa0IsTUFBTTtBQUN4RCxZQUFNLFVBQVUsS0FBSyxXQUFXLEtBQUs7QUFDckMsVUFBSSxTQUFTO0FBQ1gsYUFBSyxZQUFZLFFBQVE7QUFBQSxNQUMzQjtBQUFBLElBQ0YsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLHdEQUFnQixLQUFLO0FBQUEsSUFDckM7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFjLHVCQUF3QztBQUNwRCxVQUFNLGFBQWEsS0FBSyxTQUNyQixJQUFJLENBQUMsU0FBUztBQUNiLFlBQU0sWUFDSixLQUFLLFNBQVMsU0FBUyx1QkFDdkIsS0FBSyxTQUFTLGNBQWMsbUNBQzVCO0FBQ0YsYUFBTyxJQUFJLFNBQVMsS0FBSyxLQUFLLE9BQU87QUFBQSxJQUN2QyxDQUFDLEVBQ0EsS0FBSyxNQUFNO0FBRWQsVUFBTSxTQUNKO0FBQUE7QUFBQTtBQUFBLEVBRVEsVUFBVTtBQUVwQixRQUFJO0FBQ0YsWUFBTSxRQUFRLE1BQU0sS0FBSyxPQUFPLGtCQUFrQixNQUFNO0FBQ3hELGFBQU8sS0FBSyxXQUFXLEtBQUs7QUFBQSxJQUM5QixTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0sOERBQWlCLEtBQUs7QUFDcEMsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBQUEsRUFFUSxXQUFXLE9BQXVCO0FBQ3hDLFdBQU8sTUFDSixRQUFRLFVBQVUsRUFBRSxFQUNwQixRQUFRLFFBQVEsR0FBRyxFQUNuQixLQUFLO0FBQUEsRUFDVjtBQUNGOzs7QU0zZ0JBLDRCQUFxQjtBQUdkLElBQU0sZ0JBQU4sTUFBb0I7QUFBQSxFQUd6QixZQUFZLFFBQWdCO0FBQzFCLFNBQUssS0FBSyxJQUFJLHNCQUFBQyxRQUFTLE1BQU07QUFDN0IsU0FBSyxpQkFBaUI7QUFBQSxFQUN4QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUJBQXlCO0FBQy9CLFNBQUssR0FBRyxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEtBMkJaO0FBR0QsU0FBSyxnQkFBZ0I7QUFBQSxFQUN2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1Esa0JBQXdCO0FBQzlCLFFBQUk7QUFFRixZQUFNLFVBQVUsS0FBSyxHQUFHLE9BQU8sbUJBQW1CO0FBQ2xELFlBQU0sZ0JBQWdCLFFBQVEsS0FBSyxTQUFPLElBQUksU0FBUyxhQUFhO0FBRXBFLFVBQUksQ0FBQyxlQUFlO0FBQ2xCLGdCQUFRLElBQUksaURBQXdCO0FBQ3BDLGFBQUssR0FBRyxLQUFLLGtEQUFrRDtBQUMvRCxnQkFBUSxJQUFJLG1EQUFXO0FBQUEsTUFDekI7QUFBQSxJQUNGLFNBQVMsT0FBTztBQUNkLGNBQVEsTUFBTSx5RUFBa0IsS0FBSztBQUFBLElBQ3ZDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsV0FBVyxNQUEwQjtBQUNuQyxVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsS0FZNUI7QUFFRCxTQUFLO0FBQUEsTUFDSCxLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxLQUFLLFVBQVUsS0FBSyxJQUFJO0FBQUEsTUFDeEIsS0FBSyxVQUFVLEtBQUssS0FBSztBQUFBLE1BQ3pCLEtBQUssVUFBVSxLQUFLLFdBQVc7QUFBQSxNQUMvQixLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxLQUFLLGNBQWM7QUFBQSxJQUNyQjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGNBQWMsTUFBbUM7QUFDL0MsVUFBTSxPQUFPLEtBQUssR0FBRyxRQUFRLG9DQUFvQztBQUNqRSxVQUFNLE1BQU0sS0FBSyxJQUFJLElBQUk7QUFDekIsV0FBTyxNQUFNLEtBQUssVUFBVSxHQUFHLElBQUk7QUFBQSxFQUNyQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsWUFBWSxJQUFpQztBQUMzQyxVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVEsa0NBQWtDO0FBQy9ELFVBQU0sTUFBTSxLQUFLLElBQUksRUFBRTtBQUN2QixXQUFPLE1BQU0sS0FBSyxVQUFVLEdBQUcsSUFBSTtBQUFBLEVBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxjQUE4QjtBQUM1QixVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVEsOENBQThDO0FBQzNFLFVBQU0sT0FBTyxLQUFLLElBQUk7QUFDdEIsV0FBTyxLQUFLLElBQUksQ0FBQyxRQUFRLEtBQUssVUFBVSxHQUFHLENBQUM7QUFBQSxFQUM5QztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsV0FBVyxJQUFrQjtBQUMzQixVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVEsZ0NBQWdDO0FBQzdELFNBQUssSUFBSSxFQUFFO0FBQUEsRUFDYjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsYUFBYSxRQUF1QjtBQUNsQyxVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVE7QUFBQTtBQUFBO0FBQUEsS0FHNUI7QUFFRCxVQUFNLGNBQWMsS0FBSyxHQUFHLFlBQVksQ0FBQ0MsWUFBb0I7QUFDM0QsaUJBQVcsU0FBU0EsU0FBUTtBQUMxQixhQUFLO0FBQUEsVUFDSCxNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsUUFDUjtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFFRCxnQkFBWSxNQUFNO0FBQUEsRUFDcEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHFCQUFxQixRQUFzQjtBQUN6QyxVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVEsc0NBQXNDO0FBQ25FLFNBQUssSUFBSSxNQUFNO0FBQUEsRUFDakI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGtCQUFrQixRQUF5QjtBQUN6QyxVQUFNLE9BQU8sS0FBSyxHQUFHLFFBQVEsMERBQTBEO0FBQ3ZGLFVBQU0sT0FBTyxLQUFLLElBQUksTUFBTTtBQUM1QixXQUFPLEtBQUssSUFBSSxDQUFDLFFBQVEsS0FBSyxXQUFXLEdBQUcsQ0FBQztBQUFBLEVBQy9DO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxhQUFhLElBQTBCO0FBQ3JDLFVBQU0sT0FBTyxLQUFLLEdBQUcsUUFBUSxtQ0FBbUM7QUFDaEUsVUFBTSxNQUFNLEtBQUssSUFBSSxFQUFFO0FBQ3ZCLFdBQU8sTUFBTSxLQUFLLFdBQVcsR0FBRyxJQUFJO0FBQUEsRUFDdEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGVBQXdCO0FBQ3RCLFVBQU0sT0FBTyxLQUFLLEdBQUcsUUFBUSxzQkFBc0I7QUFDbkQsVUFBTSxPQUFPLEtBQUssSUFBSTtBQUN0QixXQUFPLEtBQUssSUFBSSxDQUFDLFFBQVEsS0FBSyxXQUFXLEdBQUcsQ0FBQztBQUFBLEVBQy9DO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxRQUFjO0FBQ1osU0FBSyxHQUFHLE1BQU07QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsVUFBVSxLQUF3QjtBQUN4QyxXQUFPO0FBQUEsTUFDTCxJQUFJLElBQUk7QUFBQSxNQUNSLE1BQU0sSUFBSTtBQUFBLE1BQ1YsT0FBTyxJQUFJO0FBQUEsTUFDWCxNQUFNLEtBQUssTUFBTSxJQUFJLFFBQVEsSUFBSTtBQUFBLE1BQ2pDLE9BQU8sS0FBSyxNQUFNLElBQUksU0FBUyxJQUFJO0FBQUEsTUFDbkMsYUFBYSxLQUFLLE1BQU0sSUFBSSxlQUFlLElBQUk7QUFBQSxNQUMvQyxXQUFXLElBQUk7QUFBQSxNQUNmLE1BQU0sSUFBSTtBQUFBLE1BQ1YsWUFBWSxJQUFJLGVBQWU7QUFBQSxJQUNqQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLFdBQVcsS0FBaUI7QUFDbEMsV0FBTztBQUFBLE1BQ0wsSUFBSSxJQUFJO0FBQUEsTUFDUixRQUFRLElBQUk7QUFBQSxNQUNaLE1BQU0sSUFBSTtBQUFBLE1BQ1YsVUFBVSxJQUFJO0FBQUEsTUFDZCxZQUFZLElBQUk7QUFBQSxNQUNoQixTQUFTLElBQUk7QUFBQSxJQUNmO0FBQUEsRUFDRjtBQUNGOzs7QUN0T0EsSUFBQUMseUJBQXFCO0FBR2QsSUFBTSxjQUFOLE1BQWtCO0FBQUEsRUFHdkIsWUFBWSxRQUFnQjtBQUMxQixTQUFLLEtBQUssSUFBSSx1QkFBQUMsUUFBUyxNQUFNO0FBQzdCLFNBQUssaUJBQWlCO0FBQUEsRUFDeEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLG1CQUF5QjtBQUMvQixTQUFLLEdBQUcsS0FBSztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEtBT1o7QUFBQSxFQUNIO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLFNBQWlCLFdBQTJCO0FBQ3pELFVBQU0sT0FBTyxLQUFLLEdBQUcsUUFBUTtBQUFBO0FBQUE7QUFBQSxLQUc1QjtBQUNELFNBQUssSUFBSSxTQUFTLEtBQUssVUFBVSxTQUFTLENBQUM7QUFBQSxFQUM3QztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsZ0JBQWdCLFlBQXlDO0FBQ3ZELFVBQU0sT0FBTyxLQUFLLEdBQUcsUUFBUTtBQUFBO0FBQUE7QUFBQSxLQUc1QjtBQUVELFVBQU0sY0FBYyxLQUFLLEdBQUcsWUFBWSxDQUFDQyxnQkFBc0M7QUFDN0UsaUJBQVcsQ0FBQyxTQUFTLFNBQVMsS0FBS0EsWUFBVyxRQUFRLEdBQUc7QUFDdkQsYUFBSyxJQUFJLFNBQVMsS0FBSyxVQUFVLFNBQVMsQ0FBQztBQUFBLE1BQzdDO0FBQUEsSUFDRixDQUFDO0FBRUQsZ0JBQVksVUFBVTtBQUFBLEVBQ3hCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxhQUFhLFNBQWtDO0FBQzdDLFVBQU0sT0FBTyxLQUFLLEdBQUcsUUFBUSxxREFBcUQ7QUFDbEYsVUFBTSxNQUFNLEtBQUssSUFBSSxPQUFPO0FBQzVCLFdBQU8sTUFBTSxLQUFLLE1BQU0sSUFBSSxTQUFTLElBQUk7QUFBQSxFQUMzQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsbUJBQTBDO0FBQ3hDLFVBQU0sT0FBTyxLQUFLLEdBQUcsUUFBUSw0Q0FBNEM7QUFDekUsVUFBTSxPQUFPLEtBQUssSUFBSTtBQUN0QixVQUFNLFNBQVMsb0JBQUksSUFBc0I7QUFFekMsZUFBVyxPQUFPLE1BQU07QUFDdEIsYUFBTyxJQUFJLElBQUksVUFBVSxLQUFLLE1BQU0sSUFBSSxTQUFTLENBQUM7QUFBQSxJQUNwRDtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxnQkFBZ0IsU0FBdUI7QUFDckMsVUFBTSxPQUFPLEtBQUssR0FBRyxRQUFRLDJDQUEyQztBQUN4RSxTQUFLLElBQUksT0FBTztBQUFBLEVBQ2xCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxpQkFBaUIsVUFBMEI7QUFDekMsVUFBTSxlQUFlLFNBQVMsSUFBSSxNQUFNLEdBQUcsRUFBRSxLQUFLLEdBQUc7QUFDckQsVUFBTSxPQUFPLEtBQUssR0FBRyxRQUFRLDZDQUE2QyxZQUFZLEdBQUc7QUFDekYsU0FBSyxJQUFJLEdBQUcsUUFBUTtBQUFBLEVBQ3RCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxpQkFBaUIsR0FBYSxHQUFxQjtBQUN6RCxRQUFJLEVBQUUsV0FBVyxFQUFFLFFBQVE7QUFDekIsWUFBTSxJQUFJLE1BQU0sbUZBQWtCO0FBQUEsSUFDcEM7QUFFQSxRQUFJLGFBQWE7QUFDakIsUUFBSSxRQUFRO0FBQ1osUUFBSSxRQUFRO0FBRVosYUFBUyxJQUFJLEdBQUcsSUFBSSxFQUFFLFFBQVEsS0FBSztBQUNqQyxvQkFBYyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDeEIsZUFBUyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsZUFBUyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFBQSxJQUNyQjtBQUVBLFdBQU8sY0FBYyxLQUFLLEtBQUssS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLO0FBQUEsRUFDekQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVdBLE9BQU8sZ0JBQTBCLElBQVksR0FBOEM7QUFDekYsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUI7QUFDNUMsVUFBTSxTQUFvRCxDQUFDO0FBRTNELGVBQVcsQ0FBQyxTQUFTLFNBQVMsS0FBSyxjQUFjLFFBQVEsR0FBRztBQUMxRCxZQUFNLFFBQVEsS0FBSyxpQkFBaUIsZ0JBQWdCLFNBQVM7QUFDN0QsYUFBTyxLQUFLLEVBQUUsU0FBUyxNQUFNLENBQUM7QUFBQSxJQUNoQztBQUdBLFdBQU8sS0FBSyxDQUFDLEdBQUcsTUFBTSxFQUFFLFFBQVEsRUFBRSxLQUFLO0FBQ3ZDLFdBQU8sT0FBTyxNQUFNLEdBQUcsQ0FBQztBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxRQUFjO0FBQ1osU0FBSyxHQUFHLE1BQU07QUFBQSxFQUNoQjtBQUNGOzs7QUNqSkEsSUFBQUMsbUJBQTJCO0FBMkJwQixJQUFNQyxzQkFBTixNQUF5QjtBQUFBLEVBSzlCLFlBQVksUUFBeUI7QUFKckMsU0FBUSxXQUFnQjtBQUN4QixTQUFRLGtCQUEwRTtBQUloRixTQUFLLFNBQVM7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxhQUE0QjtBQUNoQyxRQUFJLEtBQUssT0FBTyxhQUFhLFNBQVM7QUFDcEMsVUFBSSxLQUFLLFVBQVU7QUFDakI7QUFBQSxNQUNGO0FBRUEsY0FBUSxJQUFJLHFFQUFtQixLQUFLLE9BQU8sS0FBSyxFQUFFO0FBQ2xELGNBQVEsSUFBSSxvSUFBcUM7QUFDakQsWUFBTSxrQkFBa0IsTUFBTSxLQUFLLG9CQUFvQjtBQUN2RCxXQUFLLFdBQVcsTUFBTSxnQkFBZ0Isc0JBQXNCLEtBQUssT0FBTyxLQUFLO0FBQzdFLGNBQVEsSUFBSSwyREFBYztBQUFBLElBQzVCLE9BQU87QUFFTCxjQUFRLElBQUkscURBQWtCLEtBQUssT0FBTyxRQUFRLEVBQUU7QUFBQSxJQUN0RDtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sTUFBTSxNQUFpQztBQUMzQyxRQUFJLEtBQUssT0FBTyxhQUFhLFNBQVM7QUFDcEMsYUFBTyxLQUFLLFdBQVcsSUFBSTtBQUFBLElBQzdCLFdBQVcsS0FBSyxPQUFPLGFBQWEsVUFBVTtBQUM1QyxhQUFPLEtBQUssWUFBWSxJQUFJO0FBQUEsSUFDOUIsV0FBVyxLQUFLLE9BQU8sYUFBYSxVQUFVO0FBQzVDLGFBQU8sS0FBSyxZQUFZLElBQUk7QUFBQSxJQUM5QixXQUFXLEtBQUssT0FBTyxhQUFhLFVBQVU7QUFDNUMsYUFBTyxLQUFLLFlBQVksSUFBSTtBQUFBLElBQzlCO0FBRUEsVUFBTSxJQUFJLE1BQU0sZ0ZBQW9CLEtBQUssT0FBTyxRQUFRLEVBQUU7QUFBQSxFQUM1RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxXQUFXLE1BQWlDO0FBQ3hELFFBQUksQ0FBQyxLQUFLLFVBQVU7QUFDbEIsWUFBTSxLQUFLLFdBQVc7QUFBQSxJQUN4QjtBQUVBLFFBQUksQ0FBQyxLQUFLLFVBQVU7QUFDbEIsWUFBTSxJQUFJLE1BQU0sbUZBQWtCO0FBQUEsSUFDcEM7QUFFQSxVQUFNLFNBQVMsTUFBTSxLQUFLLFNBQVMsTUFBTTtBQUFBLE1BQ3ZDLFNBQVM7QUFBQSxNQUNULFdBQVc7QUFBQSxJQUNiLENBQUM7QUFFRCxXQUFPLE1BQU0sS0FBSyxPQUFPLElBQW9CO0FBQUEsRUFDL0M7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsc0JBQThFO0FBQzFGLFFBQUksS0FBSyxpQkFBaUI7QUFDeEIsYUFBTyxLQUFLO0FBQUEsSUFDZDtBQUVBLFVBQU1DLFVBQVMsTUFBTSxPQUFPLHNCQUFzQjtBQUNsRCxTQUFLLGtCQUFrQkEsUUFBTztBQUM5QixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLFlBQVksTUFBaUM7QUEvRzdEO0FBZ0hJLFFBQUksQ0FBQyxLQUFLLE9BQU8sUUFBUTtBQUN2QixZQUFNLElBQUksTUFBTSxpRkFBMEI7QUFBQSxJQUM1QztBQUVBLFVBQU0sTUFBTSxHQUFHLEtBQUssT0FBTyxNQUFNLElBQUksS0FBSyxPQUFPLEtBQUsscUJBQXFCLEtBQUssT0FBTyxNQUFNO0FBRTdGLFFBQUk7QUFDRixZQUFNLFdBQVcsVUFBTSw2QkFBVztBQUFBLFFBQ2hDO0FBQUEsUUFDQSxRQUFRO0FBQUEsUUFDUixTQUFTO0FBQUEsVUFDUCxnQkFBZ0I7QUFBQSxRQUNsQjtBQUFBLFFBQ0EsTUFBTSxLQUFLLFVBQVU7QUFBQSxVQUNuQixTQUFTO0FBQUEsWUFDUCxPQUFPLENBQUMsRUFBRSxLQUFLLENBQUM7QUFBQSxVQUNsQjtBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUVELFlBQU0sT0FBTyxTQUFTO0FBQ3RCLFdBQUksVUFBSyxjQUFMLG1CQUFnQixRQUFRO0FBQzFCLGVBQU8sS0FBSyxVQUFVO0FBQUEsTUFDeEI7QUFFQSxZQUFNLElBQUksTUFBTSw4RkFBNkI7QUFBQSxJQUMvQyxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0sd0RBQXFCLEtBQUs7QUFDeEMsWUFBTTtBQUFBLElBQ1I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLFlBQVksTUFBaUM7QUFuSjdEO0FBb0pJLFFBQUksQ0FBQyxLQUFLLE9BQU8sUUFBUTtBQUN2QixZQUFNLElBQUksTUFBTSxpRkFBMEI7QUFBQSxJQUM1QztBQUVBLFFBQUk7QUFDRixZQUFNLFdBQVcsVUFBTSw2QkFBVztBQUFBLFFBQ2hDLEtBQUssS0FBSyxPQUFPLFVBQVU7QUFBQSxRQUMzQixRQUFRO0FBQUEsUUFDUixTQUFTO0FBQUEsVUFDUCxnQkFBZ0I7QUFBQSxVQUNoQixpQkFBaUIsVUFBVSxLQUFLLE9BQU8sTUFBTTtBQUFBLFFBQy9DO0FBQUEsUUFDQSxNQUFNLEtBQUssVUFBVTtBQUFBLFVBQ25CLE9BQU8sS0FBSyxPQUFPO0FBQUEsVUFDbkIsT0FBTztBQUFBLFFBQ1QsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUVELFlBQU0sT0FBTyxTQUFTO0FBQ3RCLFdBQUksZ0JBQUssU0FBTCxtQkFBWSxPQUFaLG1CQUFnQixXQUFXO0FBQzdCLGVBQU8sS0FBSyxLQUFLLENBQUMsRUFBRTtBQUFBLE1BQ3RCO0FBRUEsWUFBTSxJQUFJLE1BQU0sOEZBQTZCO0FBQUEsSUFDL0MsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLHdEQUFxQixLQUFLO0FBQ3hDLFlBQU07QUFBQSxJQUNSO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxZQUFZLE1BQWlDO0FBckw3RDtBQXNMSSxRQUFJLENBQUMsS0FBSyxPQUFPLFFBQVE7QUFDdkIsWUFBTSxJQUFJLE1BQU0sMEZBQXlCO0FBQUEsSUFDM0M7QUFFQSxRQUFJO0FBQ0YsWUFBTSxVQUFrQztBQUFBLFFBQ3RDLGdCQUFnQjtBQUFBLE1BQ2xCO0FBRUEsVUFBSSxLQUFLLE9BQU8sUUFBUTtBQUN0QixnQkFBUSxlQUFlLElBQUksVUFBVSxLQUFLLE9BQU8sTUFBTTtBQUFBLE1BQ3pEO0FBRUEsWUFBTSxXQUFXLFVBQU0sNkJBQVc7QUFBQSxRQUNoQyxLQUFLLEtBQUssT0FBTztBQUFBLFFBQ2pCLFFBQVE7QUFBQSxRQUNSO0FBQUEsUUFDQSxNQUFNLEtBQUssVUFBVTtBQUFBLFVBQ25CLE9BQU8sS0FBSyxPQUFPO0FBQUEsVUFDbkIsT0FBTztBQUFBLFFBQ1QsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUVELFlBQU0sT0FBTyxTQUFTO0FBR3RCLFVBQUksQ0FBQyxNQUFNLFFBQVEsSUFBSSxPQUFLLGdCQUFLLFNBQUwsbUJBQVksT0FBWixtQkFBZ0IsWUFBVztBQUNyRCxlQUFPLEtBQUssS0FBSyxDQUFDLEVBQUU7QUFBQSxNQUN0QjtBQUdBLFVBQUksTUFBTSxRQUFRLElBQUksR0FBRztBQUN2QixlQUFPO0FBQUEsTUFDVDtBQUVBLFlBQU0sSUFBSSxNQUFNLDJHQUEyQjtBQUFBLElBQzdDLFNBQVMsT0FBTztBQUNkLGNBQVEsTUFBTSxvRUFBa0IsS0FBSztBQUNyQyxZQUFNO0FBQUEsSUFDUjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sV0FBVyxPQUFzQztBQUNyRCxVQUFNLGFBQXlCLENBQUM7QUFFaEMsZUFBVyxRQUFRLE9BQU87QUFDeEIsWUFBTSxZQUFZLE1BQU0sS0FBSyxNQUFNLElBQUk7QUFDdkMsaUJBQVcsS0FBSyxTQUFTO0FBQUEsSUFDM0I7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUNGOzs7QUMzT0EseUJBQW1CO0FBQ25CLG9CQUEyQjtBQXFCcEIsU0FBUyxjQUFjLFVBQWtCLFNBQTZCO0FBRTNFLFFBQU0sYUFBUyxtQkFBQUMsU0FBTyxPQUFPO0FBQzdCLFFBQU0sY0FBYyxPQUFPO0FBQzNCLFFBQU0sY0FBYyxPQUFPO0FBRzNCLFFBQU0sUUFBUyxZQUFZLFNBQW9CLHFCQUFxQixRQUFRO0FBRzVFLFFBQU0sT0FBTyxZQUFZLGFBQWEsV0FBVztBQUdqRCxRQUFNLFFBQVEsYUFBYSxXQUFXO0FBR3RDLFFBQU0sV0FBVyxnQkFBZ0IsV0FBVztBQUU1QyxTQUFPO0FBQUEsSUFDTCxTQUFTO0FBQUEsSUFDVDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBQ0Y7QUFLQSxTQUFTLHFCQUFxQixVQUEwQjtBQUN0RCxRQUFNLFdBQVcsU0FBUyxNQUFNLEdBQUcsRUFBRSxJQUFJLEtBQUs7QUFDOUMsU0FBTyxTQUFTLFFBQVEsU0FBUyxFQUFFO0FBQ3JDO0FBS0EsU0FBUyxZQUFZLFNBQWlCLGFBQWdEO0FBQ3BGLFFBQU0sT0FBTyxvQkFBSSxJQUFZO0FBRzdCLE1BQUksTUFBTSxRQUFRLFlBQVksSUFBSSxHQUFHO0FBQ25DLGdCQUFZLEtBQUssUUFBUSxDQUFDLFFBQVE7QUFDaEMsVUFBSSxPQUFPLFFBQVEsVUFBVTtBQUMzQixhQUFLLElBQUksSUFBSSxRQUFRLE1BQU0sRUFBRSxDQUFDO0FBQUEsTUFDaEM7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBR0EsUUFBTSxlQUFlO0FBQ3JCLE1BQUk7QUFDSixVQUFRLFFBQVEsYUFBYSxLQUFLLE9BQU8sT0FBTyxNQUFNO0FBQ3BELFNBQUssSUFBSSxNQUFNLENBQUMsQ0FBQztBQUFBLEVBQ25CO0FBRUEsU0FBTyxNQUFNLEtBQUssSUFBSTtBQUN4QjtBQUtBLFNBQVMsYUFBYSxTQUEyQjtBQUMvQyxRQUFNLFFBQVEsb0JBQUksSUFBWTtBQUM5QixRQUFNLFlBQVk7QUFDbEIsTUFBSTtBQUNKLFVBQVEsUUFBUSxVQUFVLEtBQUssT0FBTyxPQUFPLE1BQU07QUFFakQsVUFBTSxPQUFPLE1BQU0sQ0FBQyxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLO0FBQ3pDLFVBQU0sSUFBSSxJQUFJO0FBQUEsRUFDaEI7QUFDQSxTQUFPLE1BQU0sS0FBSyxLQUFLO0FBQ3pCO0FBS0EsU0FBUyxnQkFBZ0IsU0FBNEI7QUFDbkQsUUFBTSxXQUFzQixDQUFDO0FBQzdCLFFBQU0sUUFBUSxRQUFRLE1BQU0sSUFBSTtBQUVoQyxNQUFJLGlCQUFpQztBQUNyQyxNQUFJLGlCQUEyQixDQUFDO0FBQ2hDLE1BQUksV0FBVztBQUVmLGFBQVcsUUFBUSxPQUFPO0FBQ3hCLFVBQU0sY0FBYyxLQUFLLE1BQU0sbUJBQW1CO0FBRWxELFFBQUksYUFBYTtBQUVmLFVBQUksZ0JBQWdCO0FBQ2xCLHVCQUFlLFVBQVUsZUFBZSxLQUFLLElBQUksRUFBRSxLQUFLO0FBQ3hELGlCQUFTLEtBQUssY0FBYztBQUFBLE1BQzlCO0FBR0EsdUJBQWlCO0FBQUEsUUFDZixTQUFTLFlBQVksQ0FBQyxFQUFFLEtBQUs7QUFBQSxRQUM3QixTQUFTO0FBQUEsUUFDVCxPQUFPLFlBQVksQ0FBQyxFQUFFO0FBQUEsUUFDdEI7QUFBQSxNQUNGO0FBQ0EsdUJBQWlCLENBQUM7QUFBQSxJQUNwQixXQUFXLGdCQUFnQjtBQUN6QixxQkFBZSxLQUFLLElBQUk7QUFBQSxJQUMxQixPQUFPO0FBRUwsVUFBSSxTQUFTLFdBQVcsR0FBRztBQUN6Qix5QkFBaUI7QUFBQSxVQUNmLFNBQVM7QUFBQSxVQUNULFNBQVM7QUFBQSxVQUNULE9BQU87QUFBQSxVQUNQO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFDQSxxQkFBZSxLQUFLLElBQUk7QUFBQSxJQUMxQjtBQUVBLGdCQUFZLEtBQUssU0FBUztBQUFBLEVBQzVCO0FBR0EsTUFBSSxnQkFBZ0I7QUFDbEIsbUJBQWUsVUFBVSxlQUFlLEtBQUssSUFBSSxFQUFFLEtBQUs7QUFDeEQsYUFBUyxLQUFLLGNBQWM7QUFBQSxFQUM5QjtBQUVBLFNBQU87QUFDVDtBQUtPLFNBQVMsWUFBWSxTQUF5QjtBQUNuRCxhQUFPLDBCQUFXLFFBQVEsRUFBRSxPQUFPLE9BQU8sRUFBRSxPQUFPLEtBQUs7QUFDMUQ7OztBQ3hKQSxTQUFTLG1CQUFtQixNQUFzQjtBQUVoRCxRQUFNLGdCQUFnQixLQUFLLFFBQVEsVUFBVSxHQUFHO0FBQ2hELFFBQU0sUUFBUSxjQUFjLE1BQU0sS0FBSyxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEVBQUU7QUFHckUsUUFBTSxlQUFlLEtBQUssTUFBTSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBR2pELFNBQU8sS0FBSyxLQUFLLFFBQVEsTUFBTSxXQUFXO0FBQzVDO0FBS08sU0FBUyxVQUNkLFFBQ0EsVUFDQUMsV0FHSSxDQUFDLEdBQ0k7QUFDVCxRQUFNLFlBQVlBLFNBQVEsYUFBYTtBQUN2QyxRQUFNLGVBQWVBLFNBQVEsZ0JBQWdCO0FBQzdDLFFBQU0sU0FBa0IsQ0FBQztBQUV6QixhQUFXLFdBQVcsVUFBVTtBQUM5QixVQUFNLGNBQWMsUUFBUSxVQUN4QixLQUFLLFFBQVEsT0FBTztBQUFBO0FBQUEsRUFBTyxRQUFRLE9BQU8sS0FDMUMsUUFBUTtBQUVaLFFBQUksQ0FBQyxZQUFZLEtBQUssR0FBRztBQUN2QjtBQUFBLElBQ0Y7QUFFQSxVQUFNLGFBQWEsbUJBQW1CLFdBQVc7QUFHakQsUUFBSSxjQUFjLFdBQVc7QUFDM0IsYUFBTyxLQUFLO0FBQUEsUUFDVixJQUFJLEdBQUcsTUFBTSxVQUFVLE9BQU8sTUFBTTtBQUFBLFFBQ3BDO0FBQUEsUUFDQSxNQUFNO0FBQUEsUUFDTixVQUFVLFFBQVE7QUFBQSxRQUNsQjtBQUFBLFFBQ0EsU0FBUyxRQUFRO0FBQUEsTUFDbkIsQ0FBQztBQUNEO0FBQUEsSUFDRjtBQUdBLFVBQU0sWUFBWSxtQkFBbUIsV0FBVztBQUNoRCxRQUFJLGVBQXlCLENBQUM7QUFDOUIsUUFBSSxnQkFBZ0I7QUFFcEIsZUFBVyxZQUFZLFdBQVc7QUFDaEMsWUFBTSxpQkFBaUIsbUJBQW1CLFFBQVE7QUFHbEQsVUFBSSxnQkFBZ0Isa0JBQWtCLFdBQVc7QUFDL0MscUJBQWEsS0FBSyxRQUFRO0FBQzFCLHlCQUFpQjtBQUFBLE1BQ25CLE9BQU87QUFFTCxZQUFJLGFBQWEsU0FBUyxHQUFHO0FBQzNCLGdCQUFNQyxhQUFZLGFBQWEsS0FBSyxHQUFHO0FBQ3ZDLGlCQUFPLEtBQUs7QUFBQSxZQUNWLElBQUksR0FBRyxNQUFNLFVBQVUsT0FBTyxNQUFNO0FBQUEsWUFDcEM7QUFBQSxZQUNBLE1BQU1BO0FBQUEsWUFDTixVQUFVLFFBQVE7QUFBQSxZQUNsQixZQUFZO0FBQUEsWUFDWixTQUFTLFFBQVE7QUFBQSxVQUNuQixDQUFDO0FBR0QsZ0JBQU0sbUJBQW1CLG9CQUFvQixjQUFjLFlBQVk7QUFDdkUseUJBQWU7QUFDZiwwQkFBZ0IsbUJBQW1CLGFBQWEsS0FBSyxHQUFHLENBQUM7QUFBQSxRQUMzRDtBQUdBLHFCQUFhLEtBQUssUUFBUTtBQUMxQix5QkFBaUI7QUFBQSxNQUNuQjtBQUFBLElBQ0Y7QUFHQSxRQUFJLGFBQWEsU0FBUyxHQUFHO0FBQzNCLFlBQU1BLGFBQVksYUFBYSxLQUFLLEdBQUc7QUFDdkMsYUFBTyxLQUFLO0FBQUEsUUFDVixJQUFJLEdBQUcsTUFBTSxVQUFVLE9BQU8sTUFBTTtBQUFBLFFBQ3BDO0FBQUEsUUFDQSxNQUFNQTtBQUFBLFFBQ04sVUFBVSxRQUFRO0FBQUEsUUFDbEIsWUFBWTtBQUFBLFFBQ1osU0FBUyxRQUFRO0FBQUEsTUFDbkIsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBRUEsU0FBTztBQUNUO0FBTUEsU0FBUyxtQkFBbUIsTUFBd0I7QUFHbEQsUUFBTSxZQUFZLEtBQUssTUFBTSxZQUFZLEVBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7QUFDakUsUUFBTSxTQUFtQixDQUFDO0FBRTFCLFdBQVMsSUFBSSxHQUFHLElBQUksVUFBVSxRQUFRLEtBQUssR0FBRztBQUM1QyxVQUFNLFdBQVcsVUFBVSxDQUFDO0FBQzVCLFVBQU0sY0FBYyxVQUFVLElBQUksQ0FBQyxLQUFLO0FBQ3hDLFdBQU8sS0FBSyxXQUFXLFdBQVc7QUFBQSxFQUNwQztBQUVBLFNBQU8sT0FBTyxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQztBQUN0QztBQUtBLFNBQVMsb0JBQW9CLFdBQXFCLGNBQWdDO0FBQ2hGLFFBQU0sVUFBb0IsQ0FBQztBQUMzQixNQUFJLFNBQVM7QUFFYixXQUFTLElBQUksVUFBVSxTQUFTLEdBQUcsS0FBSyxHQUFHLEtBQUs7QUFDOUMsVUFBTSxXQUFXLFVBQVUsQ0FBQztBQUM1QixVQUFNLGlCQUFpQixtQkFBbUIsUUFBUTtBQUVsRCxRQUFJLFNBQVMsaUJBQWlCLGNBQWM7QUFDMUM7QUFBQSxJQUNGO0FBRUEsWUFBUSxRQUFRLFFBQVE7QUFDeEIsY0FBVTtBQUFBLEVBQ1o7QUFFQSxTQUFPO0FBQ1Q7OztBQ2pKQSxJQUFBQyxpQkFBMkI7QUFJcEIsSUFBTSxVQUFOLE1BQWM7QUFBQSxFQU9uQixZQUFZLFFBQXdCO0FBRnBDLFNBQVEsWUFBcUI7QUFHM0IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxnQkFBZ0IsSUFBSSxjQUFjLE9BQU8sVUFBVTtBQUN4RCxTQUFLLGNBQWMsSUFBSSxZQUFZLE9BQU8sWUFBWTtBQUV0RCxVQUFNLGtCQUFtQztBQUFBLE1BQ3ZDLFVBQVUsT0FBTztBQUFBLE1BQ2pCLE9BQU8sT0FBTztBQUFBLE1BQ2QsUUFBUSxPQUFPO0FBQUEsTUFDZixRQUFRLE9BQU87QUFBQSxJQUNqQjtBQUVBLFNBQUsscUJBQXFCLElBQUlDLG9CQUFtQixlQUFlO0FBQUEsRUFDbEU7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sYUFBNEI7QUFDaEMsVUFBTSxLQUFLLG1CQUFtQixXQUFXO0FBQUEsRUFDM0M7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFNBQWU7QUFDYixTQUFLLFlBQVk7QUFBQSxFQUNuQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsY0FBb0I7QUFDbEIsU0FBSyxZQUFZO0FBQUEsRUFDbkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sVUFDSixVQUNBLFNBQ0EsWUFDZTtBQUNmLFFBQUk7QUFFRixVQUFJLEtBQUssV0FBVztBQUNsQixjQUFNLElBQUksTUFBTSxxRUFBYztBQUFBLE1BQ2hDO0FBR0EsWUFBTSxPQUFPLFlBQVksT0FBTztBQUdoQyxZQUFNLGVBQWUsS0FBSyxjQUFjLGNBQWMsUUFBUTtBQUc5RCxVQUFJLGNBQWM7QUFFaEIsWUFBSSxhQUFhLFNBQVMsTUFBTTtBQUM5QixrQkFBUSxJQUFJLHdFQUFzQixRQUFRLEVBQUU7QUFDNUM7QUFBQSxRQUNGO0FBR0EsWUFDRSxjQUNBLGFBQWEsY0FDYixhQUFhLGVBQWUsWUFDNUI7QUFDQSxrQkFBUSxJQUFJLHFGQUF5QixRQUFRLEVBQUU7QUFDL0M7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUdBLFlBQU0sU0FBUyxjQUFjLFVBQVUsT0FBTztBQUc5QyxZQUFNLFNBQVMsS0FBSyxlQUFlLFFBQVE7QUFHM0MsWUFBTSxlQUE2QjtBQUFBLFFBQ2pDLElBQUk7QUFBQSxRQUNKLE1BQU07QUFBQSxRQUNOLE9BQU8sT0FBTztBQUFBLFFBQ2QsTUFBTSxPQUFPO0FBQUEsUUFDYixPQUFPLE9BQU87QUFBQSxRQUNkLGFBQWEsT0FBTztBQUFBLFFBQ3BCLFdBQVcsS0FBSyxJQUFJO0FBQUEsUUFDcEI7QUFBQSxRQUNBO0FBQUEsTUFDRjtBQUVBLFdBQUssY0FBYyxXQUFXLFlBQVk7QUFHMUMsVUFBSSxjQUFjO0FBQ2hCLGNBQU0sWUFBWSxLQUFLLGNBQWMsa0JBQWtCLE1BQU07QUFDN0QsYUFBSyxZQUFZLGlCQUFpQixVQUFVLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDO0FBQzVELGFBQUssY0FBYyxxQkFBcUIsTUFBTTtBQUFBLE1BQ2hEO0FBR0EsWUFBTSxTQUFTLFVBQVUsUUFBUSxPQUFPLFVBQVU7QUFBQSxRQUNoRCxXQUFXLEtBQUssT0FBTztBQUFBLFFBQ3ZCLGNBQWMsS0FBSyxPQUFPO0FBQUEsTUFDNUIsQ0FBQztBQUVELFVBQUksT0FBTyxXQUFXLEdBQUc7QUFDdkIsZ0JBQVEsSUFBSSw4QkFBVSxRQUFRLEVBQUU7QUFDaEM7QUFBQSxNQUNGO0FBR0EsV0FBSyxjQUFjLGFBQWEsTUFBTTtBQUd0QyxjQUFRLElBQUksMkNBQWEsUUFBUSxLQUFLLE9BQU8sTUFBTSxzQkFBTztBQUMxRCxpQkFBVyxTQUFTLFFBQVE7QUFFMUIsWUFBSSxLQUFLLFdBQVc7QUFDbEIsZ0JBQU0sSUFBSSxNQUFNLHFFQUFjO0FBQUEsUUFDaEM7QUFFQSxjQUFNLFlBQVksTUFBTSxLQUFLLG1CQUFtQixNQUFNLE1BQU0sSUFBSTtBQUNoRSxhQUFLLFlBQVksZUFBZSxNQUFNLElBQUksU0FBUztBQUFBLE1BQ3JEO0FBRUEsY0FBUSxJQUFJLG9DQUFXLFFBQVEsRUFBRTtBQUFBLElBQ25DLFNBQVMsT0FBTztBQUNkLFVBQUksS0FBSyxXQUFXO0FBQ2xCLGNBQU07QUFBQSxNQUNSO0FBQ0EsY0FBUSxNQUFNLG9DQUFXLFFBQVEsSUFBSSxLQUFLO0FBQzFDLFlBQU07QUFBQSxJQUNSO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxXQUFXLFVBQWlDO0FBQ2hELFVBQU0sT0FBTyxLQUFLLGNBQWMsY0FBYyxRQUFRO0FBQ3RELFFBQUksQ0FBQyxNQUFNO0FBQ1Q7QUFBQSxJQUNGO0FBRUEsVUFBTSxTQUFTLEtBQUssY0FBYyxrQkFBa0IsS0FBSyxFQUFFO0FBQzNELFNBQUssWUFBWSxpQkFBaUIsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQztBQUN6RCxTQUFLLGNBQWMscUJBQXFCLEtBQUssRUFBRTtBQUMvQyxTQUFLLGNBQWMsV0FBVyxLQUFLLEVBQUU7QUFFckMsWUFBUSxJQUFJLDJDQUFhLFFBQVEsRUFBRTtBQUFBLEVBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLE9BQU8sT0FBZSxHQUE2RDtBQUN2RixVQUFNLE9BQU8sS0FBSyxLQUFLLE9BQU87QUFHOUIsVUFBTSxpQkFBaUIsTUFBTSxLQUFLLG1CQUFtQixNQUFNLEtBQUs7QUFHaEUsVUFBTSxVQUFVLEtBQUssWUFBWSxPQUFPLGdCQUFnQixJQUFJO0FBRzVELFVBQU0sZ0JBQWdCLFFBQ25CLElBQUksQ0FBQyxXQUFXO0FBQ2YsWUFBTSxRQUFRLEtBQUssY0FBYyxhQUFhLE9BQU8sT0FBTztBQUM1RCxVQUFJLENBQUMsT0FBTztBQUNWLGVBQU87QUFBQSxNQUNUO0FBQ0EsYUFBTztBQUFBLFFBQ0w7QUFBQSxRQUNBLE9BQU8sT0FBTztBQUFBLE1BQ2hCO0FBQUEsSUFDRixDQUFDLEVBQ0EsT0FBTyxDQUFDLE1BQU0sTUFBTSxJQUFJO0FBRTNCLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSw2QkFDRSxlQUtDO0FBQ0QsV0FBTyxjQUNKLElBQUksQ0FBQyxXQUFXO0FBQ2YsWUFBTSxPQUFPLEtBQUssY0FBYyxZQUFZLE9BQU8sTUFBTSxNQUFNO0FBQy9ELFVBQUksQ0FBQyxNQUFNO0FBQ1QsZUFBTztBQUFBLE1BQ1Q7QUFDQSxhQUFPO0FBQUEsUUFDTCxPQUFPLE9BQU87QUFBQSxRQUNkO0FBQUEsUUFDQSxPQUFPLE9BQU87QUFBQSxNQUNoQjtBQUFBLElBQ0YsQ0FBQyxFQUNBLE9BQU8sQ0FBQyxNQUFNLE1BQU0sSUFBSTtBQUFBLEVBSzdCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxlQUFlLFVBQTBCO0FBQy9DLGVBQU8sMkJBQVcsUUFBUSxFQUFFLE9BQU8sUUFBUSxFQUFFLE9BQU8sS0FBSyxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQUEsRUFDNUU7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFFBQWM7QUFDWixTQUFLLGNBQWMsTUFBTTtBQUN6QixTQUFLLFlBQVksTUFBTTtBQUFBLEVBQ3pCO0FBQ0Y7OztBQ3JQQSxJQUFBQyxvQkFBcUM7QUFJOUIsSUFBTSxlQUFOLE1BQW1CO0FBQUE7QUFBQSxFQU94QixZQUFZLE9BQWM7QUFMMUIsU0FBUSxVQUEwQjtBQUNsQyxTQUFRLGFBQXNCO0FBQzlCLFNBQVEsYUFBMEIsb0JBQUksSUFBSTtBQUMxQyxTQUFRLHFCQUFrQyxvQkFBSSxJQUFJO0FBR2hELFNBQUssUUFBUTtBQUFBLEVBQ2Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFdBQVcsU0FBK0I7QUFDeEMsU0FBSyxVQUFVO0FBQUEsRUFDakI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sV0FBVyxrQkFBb0Q7QUEzQnZFO0FBNEJJLFFBQUksQ0FBQyxLQUFLLFNBQVM7QUFDakIsWUFBTSxJQUFJLE1BQU0sd0ZBQWtCO0FBQUEsSUFDcEM7QUFFQSxRQUFJLEtBQUssWUFBWTtBQUNuQixVQUFJLHlCQUFPLDZFQUFpQjtBQUM1QjtBQUFBLElBQ0Y7QUFFQSxTQUFLLGFBQWE7QUFDbEIsU0FBSyxRQUFRLFlBQVk7QUFFekIsUUFBSTtBQUNGLFlBQU0sVUFBVSxLQUFLLE1BQU0saUJBQWlCO0FBQzVDLGNBQVEsSUFBSSxpREFBYyxRQUFRLE1BQU0sRUFBRTtBQUcxQyxVQUFJLGtCQUFrQjtBQUNwQix5QkFBaUI7QUFBQSxVQUNmLFlBQVksUUFBUTtBQUFBLFVBQ3BCLGdCQUFnQjtBQUFBLFVBQ2hCLFFBQVE7QUFBQSxRQUNWLENBQUM7QUFBQSxNQUNIO0FBRUEsVUFBSSxVQUFVO0FBQ2QsVUFBSSxTQUFTO0FBRWIsaUJBQVcsUUFBUSxTQUFTO0FBQzFCLFlBQUk7QUFDRixnQkFBTSxVQUFVLE1BQU0sS0FBSyxNQUFNLEtBQUssSUFBSTtBQUcxQyxnQkFBTSxlQUFhLFVBQUssU0FBTCxtQkFBVyxVQUFTO0FBRXZDLGdCQUFNLEtBQUssUUFBUSxVQUFVLEtBQUssTUFBTSxTQUFTLFVBQVU7QUFDM0Q7QUFHQSxjQUFJLGtCQUFrQjtBQUNwQiw2QkFBaUI7QUFBQSxjQUNmLFlBQVksUUFBUTtBQUFBLGNBQ3BCLGdCQUFnQjtBQUFBLGNBQ2hCLGFBQWEsS0FBSztBQUFBLGNBQ2xCLFFBQVE7QUFBQSxZQUNWLENBQUM7QUFBQSxVQUNIO0FBQUEsUUFDRixTQUFTLE9BQVk7QUFDbkIsY0FBSSxNQUFNLFlBQVksdUVBQWdCO0FBQ3BDLG9CQUFRLElBQUksMkdBQXNCO0FBQ2xDLGdCQUFJLGtCQUFrQjtBQUNwQiwrQkFBaUI7QUFBQSxnQkFDZixZQUFZLFFBQVE7QUFBQSxnQkFDcEIsZ0JBQWdCO0FBQUEsZ0JBQ2hCLFFBQVE7QUFBQSxjQUNWLENBQUM7QUFBQSxZQUNIO0FBQ0E7QUFBQSxVQUNGO0FBRUEsa0JBQVEsTUFBTSxpREFBYyxLQUFLLElBQUksSUFBSSxLQUFLO0FBQzlDO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLGtCQUFrQjtBQUNwQix5QkFBaUI7QUFBQSxVQUNmLFlBQVksUUFBUTtBQUFBLFVBQ3BCLGdCQUFnQjtBQUFBLFVBQ2hCLFFBQVE7QUFBQSxRQUNWLENBQUM7QUFBQSxNQUNIO0FBRUEsVUFBSSx5QkFBTyxvQ0FBVyxPQUFPLHdCQUFTLE1BQU0scUJBQU07QUFBQSxJQUNwRCxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0sd0RBQWdCLEtBQUs7QUFFbkMsVUFBSSxrQkFBa0I7QUFDcEIseUJBQWlCO0FBQUEsVUFDZixZQUFZO0FBQUEsVUFDWixnQkFBZ0I7QUFBQSxVQUNoQixRQUFRO0FBQUEsVUFDUixPQUFPLE9BQU8sS0FBSztBQUFBLFFBQ3JCLENBQUM7QUFBQSxNQUNIO0FBRUEsVUFBSSx5QkFBTyxtRkFBa0I7QUFBQSxJQUMvQixVQUFFO0FBQ0EsV0FBSyxhQUFhO0FBQUEsSUFDcEI7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxpQkFBdUI7QUFDckIsUUFBSSxLQUFLLFNBQVM7QUFDaEIsV0FBSyxRQUFRLE9BQU87QUFBQSxJQUN0QjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sYUFBYSxNQUE0QjtBQXJJakQ7QUFzSUksUUFBSSxDQUFDLEtBQUssV0FBVyxLQUFLLGNBQWMsTUFBTTtBQUM1QztBQUFBLElBQ0Y7QUFFQSxRQUFJO0FBQ0YsWUFBTSxVQUFVLE1BQU0sS0FBSyxNQUFNLEtBQUssSUFBSTtBQUMxQyxZQUFNLGVBQWEsVUFBSyxTQUFMLG1CQUFXLFVBQVM7QUFDdkMsWUFBTSxLQUFLLFFBQVEsVUFBVSxLQUFLLE1BQU0sU0FBUyxVQUFVO0FBQzNELGNBQVEsSUFBSSxpREFBYyxLQUFLLElBQUksRUFBRTtBQUFBLElBQ3ZDLFNBQVMsT0FBTztBQUNkLGNBQVEsTUFBTSw4REFBaUIsS0FBSyxJQUFJLElBQUksS0FBSztBQUFBLElBQ25EO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxhQUFhLE1BQTRCO0FBQzdDLFFBQUksQ0FBQyxLQUFLLFdBQVcsS0FBSyxjQUFjLE1BQU07QUFDNUM7QUFBQSxJQUNGO0FBR0EsU0FBSyxXQUFXLElBQUksS0FBSyxJQUFJO0FBRzdCLGVBQVcsWUFBWTtBQWhLM0I7QUFpS00sVUFBSSxLQUFLLFdBQVcsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLEtBQUssbUJBQW1CLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDN0UsYUFBSyxXQUFXLE9BQU8sS0FBSyxJQUFJO0FBQ2hDLGFBQUssbUJBQW1CLElBQUksS0FBSyxJQUFJO0FBRXJDLFlBQUk7QUFDRixnQkFBTSxVQUFVLE1BQU0sS0FBSyxNQUFNLEtBQUssSUFBSTtBQUMxQyxnQkFBTSxlQUFhLFVBQUssU0FBTCxtQkFBVyxVQUFTO0FBRXZDLGNBQUksS0FBSyxTQUFTO0FBQ2hCLGtCQUFNLEtBQUssUUFBUSxVQUFVLEtBQUssTUFBTSxTQUFTLFVBQVU7QUFBQSxVQUM3RDtBQUNBLGtCQUFRLElBQUksaURBQWMsS0FBSyxJQUFJLEVBQUU7QUFBQSxRQUN2QyxTQUFTLE9BQU87QUFDZCxrQkFBUSxNQUFNLDhEQUFpQixLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsUUFDbkQsVUFBRTtBQUNBLGVBQUssbUJBQW1CLE9BQU8sS0FBSyxJQUFJO0FBQUEsUUFDMUM7QUFBQSxNQUNGO0FBQUEsSUFDRixHQUFHLEdBQUc7QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGFBQWEsTUFBNEI7QUFDN0MsUUFBSSxDQUFDLEtBQUssV0FBVyxLQUFLLGNBQWMsTUFBTTtBQUM1QztBQUFBLElBQ0Y7QUFFQSxRQUFJO0FBQ0YsWUFBTSxLQUFLLFFBQVEsV0FBVyxLQUFLLElBQUk7QUFDdkMsY0FBUSxJQUFJLDJDQUFhLEtBQUssSUFBSSxFQUFFO0FBQUEsSUFDdEMsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLHdEQUFnQixLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsSUFDbEQ7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGFBQWEsTUFBYSxTQUFnQztBQXpNbEU7QUEwTUksUUFBSSxDQUFDLEtBQUssV0FBVyxLQUFLLGNBQWMsTUFBTTtBQUM1QztBQUFBLElBQ0Y7QUFFQSxRQUFJO0FBRUYsWUFBTSxLQUFLLFFBQVEsV0FBVyxPQUFPO0FBR3JDLFlBQU0sVUFBVSxNQUFNLEtBQUssTUFBTSxLQUFLLElBQUk7QUFDMUMsWUFBTSxlQUFhLFVBQUssU0FBTCxtQkFBVyxVQUFTO0FBRXZDLFVBQUksS0FBSyxTQUFTO0FBQ2hCLGNBQU0sS0FBSyxRQUFRLFVBQVUsS0FBSyxNQUFNLFNBQVMsVUFBVTtBQUFBLE1BQzdEO0FBRUEsY0FBUSxJQUFJLHdEQUFnQixPQUFPLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFBQSxJQUN2RCxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0scUVBQW1CLE9BQU8sT0FBTyxLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsSUFDbkU7QUFBQSxFQUNGO0FBQ0Y7OztBdEJsTkEsa0JBQXFCO0FBRXJCLElBQXFCLFlBQXJCLGNBQXVDLHlCQUFPO0FBQUEsRUFBOUM7QUFBQTtBQUNFLFNBQU8sV0FBd0IsRUFBRSxHQUFHLGlCQUFpQjtBQUNyRCxTQUFRLFlBQWlDO0FBQ3pDLFNBQVEsVUFBMEI7QUFDbEMsU0FBUSxlQUFvQztBQUFBO0FBQUEsRUFFNUMsTUFBTSxTQUF3QjtBQUM1QixVQUFNLEtBQUssYUFBYTtBQUd4QixTQUFLLFlBQVksSUFBSTtBQUFBLE1BQ25CLE1BQU0sS0FBSztBQUFBLE1BQ1gsQ0FBQyxTQUFpQixXQUNoQixlQUFlLEtBQUssS0FBSyxLQUFLLFVBQVUsU0FBUyxNQUFNO0FBQUEsSUFDM0Q7QUFHQSxRQUFJLEtBQUssU0FBUyxpQkFBaUI7QUFDakMsWUFBTSxLQUFLLG1CQUFtQjtBQUFBLElBQ2hDO0FBR0EsU0FBSyxhQUFhLG9CQUFvQixDQUFDLFNBQVMsSUFBSSxTQUFTLE1BQU0sSUFBSSxDQUFDO0FBRXhFLFNBQUssY0FBYyxrQkFBa0IsaUNBQWEsTUFBTTtBQUN0RCxXQUFLLEtBQUssYUFBYTtBQUFBLElBQ3pCLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNkLGFBQUssS0FBSyxhQUFhO0FBQUEsTUFDekI7QUFBQSxJQUNGLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNkLFlBQUksc0JBQXNCLE1BQU0sQ0FBQyxTQUFTO0FBQ3hDLGVBQUssS0FBSyx1QkFBdUIsSUFBSTtBQUFBLFFBQ3ZDLENBQUMsRUFBRSxLQUFLO0FBQUEsTUFDVjtBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ2QsYUFBSyxLQUFLLGNBQWM7QUFBQSxNQUMxQjtBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssY0FBYyxJQUFJLGNBQWMsSUFBSSxDQUFDO0FBQUEsRUFDNUM7QUFBQSxFQUVBLFdBQWlCO0FBQ2YsU0FBSyxJQUFJLFVBQVUsZ0JBQWdCLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQ3ZFLFdBQUssT0FBTztBQUFBLElBQ2QsQ0FBQztBQUdELFFBQUksS0FBSyxTQUFTO0FBQ2hCLFdBQUssUUFBUSxNQUFNO0FBQUEsSUFDckI7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLHFCQUFvQztBQUNoRCxRQUFJO0FBRUYsWUFBTSxjQUFVO0FBQUE7QUFBQSxRQUVkLEtBQUssSUFBSSxNQUFNLFFBQVE7QUFBQSxRQUN2QjtBQUFBLFFBQ0E7QUFBQSxRQUNBLEtBQUssU0FBUztBQUFBLE1BQ2hCO0FBRUEsWUFBTSxpQkFBYSxrQkFBSyxTQUFTLFNBQVM7QUFDMUMsWUFBTSxtQkFBZSxrQkFBSyxTQUFTLFlBQVk7QUFHL0MsV0FBSyxVQUFVLElBQUksUUFBUTtBQUFBLFFBQ3pCLFdBQVcsS0FBSyxTQUFTO0FBQUEsUUFDekIsY0FBYyxLQUFLLFNBQVM7QUFBQSxRQUM1QixNQUFNLEtBQUssU0FBUztBQUFBLFFBQ3BCLG1CQUFtQixLQUFLLFNBQVM7QUFBQSxRQUNqQyxnQkFBZ0IsS0FBSyxTQUFTO0FBQUEsUUFDOUIsaUJBQWlCLEtBQUssU0FBUyxtQkFBbUIsS0FBSyxTQUFTO0FBQUEsUUFDaEUsaUJBQWlCLEtBQUssbUJBQW1CO0FBQUEsUUFDekM7QUFBQSxRQUNBO0FBQUEsTUFDRixDQUFDO0FBRUQsWUFBTSxLQUFLLFFBQVEsV0FBVztBQUc5QixXQUFLLGVBQWUsSUFBSSxhQUFhLEtBQUssSUFBSSxLQUFLO0FBQ25ELFdBQUssYUFBYSxXQUFXLEtBQUssT0FBTztBQUd6QyxXQUFLO0FBQUEsUUFDSCxLQUFLLElBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxTQUFTO0FBekg5QztBQTBIVSxjQUFJLGdCQUFnQix5QkFBTztBQUN6QixtQkFBSyxVQUFLLGlCQUFMLG1CQUFtQixhQUFhO0FBQUEsVUFDdkM7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNIO0FBRUEsV0FBSztBQUFBLFFBQ0gsS0FBSyxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsU0FBUztBQWpJOUM7QUFrSVUsY0FBSSxnQkFBZ0IseUJBQU87QUFDekIsbUJBQUssVUFBSyxpQkFBTCxtQkFBbUIsYUFBYTtBQUFBLFVBQ3ZDO0FBQUEsUUFDRixDQUFDO0FBQUEsTUFDSDtBQUVBLFdBQUs7QUFBQSxRQUNILEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLFNBQVM7QUF6STlDO0FBMElVLGNBQUksZ0JBQWdCLHlCQUFPO0FBQ3pCLHVCQUFLLGlCQUFMLG1CQUFtQixhQUFhO0FBQUEsVUFDbEM7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNIO0FBRUEsV0FBSztBQUFBLFFBQ0gsS0FBSyxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxZQUFZO0FBakp2RDtBQWtKVSxjQUFJLGdCQUFnQix5QkFBTztBQUN6QixtQkFBSyxVQUFLLGlCQUFMLG1CQUFtQixhQUFhLE1BQU07QUFBQSxVQUM3QztBQUFBLFFBQ0YsQ0FBQztBQUFBLE1BQ0g7QUFFQSxjQUFRLElBQUksdUVBQWdCO0FBQUEsSUFDOUIsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLDBFQUFtQixLQUFLO0FBQ3RDLFVBQUkseUJBQU8scUdBQXFCO0FBQUEsSUFDbEM7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLGdCQUErQjtBQUMzQyxRQUFJLENBQUMsS0FBSyxTQUFTLGlCQUFpQjtBQUNsQyxVQUFJLHlCQUFPLDRHQUF1QjtBQUNsQztBQUFBLElBQ0Y7QUFFQSxRQUFJLENBQUMsS0FBSyxTQUFTO0FBQ2pCLFlBQU0sS0FBSyxtQkFBbUI7QUFBQSxJQUNoQztBQUVBLFFBQUksQ0FBQyxLQUFLLGNBQWM7QUFDdEIsVUFBSSx5QkFBTywyR0FBc0I7QUFDakM7QUFBQSxJQUNGO0FBR0EsVUFBTSxnQkFBZ0IsSUFBSSxzQkFBc0IsS0FBSyxLQUFLLE1BQU07QUFsTHBFO0FBb0xNLGlCQUFLLGlCQUFMLG1CQUFtQjtBQUFBLElBQ3JCLENBQUM7QUFDRCxrQkFBYyxLQUFLO0FBRW5CLFFBQUk7QUFDRixZQUFNLEtBQUssYUFBYSxXQUFXLENBQUMsYUFBYTtBQUMvQyxzQkFBYyxlQUFlLFFBQVE7QUFBQSxNQUN2QyxDQUFDO0FBQUEsSUFDSCxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0saURBQWMsS0FBSztBQUNqQyxVQUFJLHlCQUFPLDRFQUFnQjtBQUMzQixvQkFBYyxNQUFNO0FBQUEsSUFDdEI7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFhLE9BQU8sT0FBeUU7QUFDM0YsUUFBSSxDQUFDLEtBQUssU0FBUztBQUNqQixZQUFNLElBQUksTUFBTSx3RkFBa0I7QUFBQSxJQUNwQztBQUVBLFVBQU0sZ0JBQWdCLE1BQU0sS0FBSyxRQUFRLE9BQU8sS0FBSztBQUNyRCxXQUFPLEtBQUssUUFBUSw2QkFBNkIsYUFBYTtBQUFBLEVBQ2hFO0FBQUEsRUFFQSxNQUFjLGVBQThCO0FBQzFDLFVBQU0sZUFBZSxLQUFLLElBQUksVUFBVSxnQkFBZ0Isa0JBQWtCLEVBQUUsQ0FBQztBQUM3RSxVQUFNLE9BQU8sc0NBQWdCLEtBQUssSUFBSSxVQUFVLGFBQWEsS0FBSztBQUNsRSxRQUFJLENBQUMsTUFBTTtBQUNULFVBQUkseUJBQU8sbUVBQWlCO0FBQzVCO0FBQUEsSUFDRjtBQUVBLFVBQU0sS0FBSyxhQUFhLEVBQUUsTUFBTSxvQkFBb0IsUUFBUSxLQUFLLENBQUM7QUFDbEUsU0FBSyxJQUFJLFVBQVUsV0FBVyxJQUFJO0FBQUEsRUFDcEM7QUFBQSxFQUVBLE1BQWEsc0JBQXNCLE9BQTRDO0FBQzdFLFFBQUksQ0FBQyxLQUFLLFdBQVc7QUFDbkIsWUFBTSxJQUFJLE1BQU0sb0dBQXlCO0FBQUEsSUFDM0M7QUFDQSxXQUFPLEtBQUssVUFBVSxzQkFBc0IsS0FBSztBQUFBLEVBQ25EO0FBQUEsRUFFQSxNQUFhLGtCQUFrQixRQUFpQztBQUM5RCxRQUFJLENBQUMsS0FBSyxXQUFXO0FBQ25CLFlBQU0sSUFBSSxNQUFNLG9HQUF5QjtBQUFBLElBQzNDO0FBQ0EsV0FBTyxLQUFLLFVBQVUsa0JBQWtCLE1BQU07QUFBQSxFQUNoRDtBQUFBLEVBRUEsTUFBYSwwQkFDWCxXQUNBLE9BQ0EsY0FDaUI7QUFDakIsV0FBTywwQkFBMEIsS0FBSyxJQUFJLE9BQU8sV0FBVyxPQUFPLFlBQVk7QUFBQSxFQUNqRjtBQUFBLEVBRUEsTUFBYyxlQUE4QjtBQUMxQyxTQUFLLFdBQVcsRUFBRSxHQUFHLGtCQUFrQixHQUFJLE1BQU0sS0FBSyxTQUFTLEVBQUc7QUFFbEUsUUFBSSxVQUFVO0FBQ2QsUUFBSSxLQUFLLFNBQVMsc0JBQXNCLFNBQVM7QUFDL0MsV0FBSyxTQUFTLG9CQUFvQjtBQUNsQyxXQUFLLFNBQVMsaUJBQWlCLGtCQUFrQixPQUFPO0FBQ3hELGdCQUFVO0FBQUEsSUFDWjtBQUVBLFFBQUksU0FBUztBQUNYLFlBQU0sS0FBSyxhQUFhO0FBQUEsSUFDMUI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFhLGVBQThCO0FBQ3pDLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ25DO0FBQUEsRUFFQSxNQUFjLHVCQUF1QixNQUEyQztBQUM5RSxRQUFJO0FBQ0YsVUFBSSxDQUFDLEtBQUssV0FBVztBQUNuQixZQUFJLHlCQUFPLDZFQUFzQjtBQUNqQztBQUFBLE1BQ0Y7QUFDQSxVQUFJLENBQUMsS0FBSyxXQUFXO0FBQ25CLFlBQUkseUJBQU8sOERBQWlCO0FBQzVCO0FBQUEsTUFDRjtBQUVBLFlBQU0sZUFBVyxpQ0FBYyxLQUFLLFNBQVMsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUNqRSxZQUFNLGFBQWEsTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU8sUUFBUTtBQUMvRCxVQUFJLENBQUMsWUFBWTtBQUNmLFlBQUkseUJBQU8sdUVBQXFCO0FBQ2hDO0FBQUEsTUFDRjtBQUNBLFlBQU0sY0FBYyxNQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsS0FBSyxRQUFRO0FBQzlELFlBQU0sUUFBUSxXQUFXLFdBQVc7QUFFcEMsWUFBTSxlQUFlLEtBQUssbUJBQ3RCLGlDQUFjLEtBQUssWUFBWSxFQUFFLFFBQVEsUUFBUSxFQUFFLElBQ25EO0FBQ0osWUFBTSxhQUFhLE1BQU07QUFBQSxRQUN2QixLQUFLLElBQUk7QUFBQSxRQUNULEtBQUs7QUFBQSxRQUNMO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFDQSxVQUFJLHlCQUFPLDJDQUFhLFVBQVUsRUFBRTtBQUFBLElBQ3RDLFNBQVMsT0FBTztBQUNkLFlBQU0sVUFBVSxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLO0FBQ3JFLFVBQUkseUJBQU8sOEJBQVUsT0FBTyxFQUFFO0FBQUEsSUFDaEM7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFhLGdCQUErQjtBQUMxQyxRQUFJLENBQUMsS0FBSyxTQUFTLGlCQUFpQjtBQUNsQyxZQUFNLElBQUksTUFBTSx3RkFBa0I7QUFBQSxJQUNwQztBQUVBLFFBQUksQ0FBQyxLQUFLLFNBQVM7QUFDakIsWUFBTSxLQUFLLG1CQUFtQjtBQUFBLElBQ2hDO0FBRUEsUUFBSSxDQUFDLEtBQUssY0FBYztBQUN0QixZQUFNLElBQUksTUFBTSwyR0FBc0I7QUFBQSxJQUN4QztBQUVBLFFBQUk7QUFDRixjQUFRLElBQUksOERBQWlCO0FBQzdCLFlBQU0sS0FBSyxhQUFhLFdBQVc7QUFDbkMsY0FBUSxJQUFJLDJEQUFjO0FBQUEsSUFDNUIsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLGlEQUFjLEtBQUs7QUFDakMsWUFBTTtBQUFBLElBQ1I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFhLG9CQUFtQztBQUM5QyxRQUFJLENBQUMsS0FBSyxTQUFTLGlCQUFpQjtBQUNsQyxZQUFNLElBQUksTUFBTSx3RkFBa0I7QUFBQSxJQUNwQztBQUVBLFFBQUksQ0FBQyxLQUFLLFNBQVM7QUFDakIsWUFBTSxLQUFLLG1CQUFtQjtBQUFBLElBQ2hDO0FBRUEsUUFBSSxDQUFDLEtBQUssY0FBYztBQUN0QixZQUFNLElBQUksTUFBTSwyR0FBc0I7QUFBQSxJQUN4QztBQUVBLFFBQUk7QUFDRixjQUFRLElBQUksOERBQWlCO0FBRzdCLFlBQU0sV0FBVyxLQUFLLElBQUksTUFBTSxpQkFBaUI7QUFDakQsVUFBSSxVQUFVO0FBRWQsaUJBQVcsUUFBUSxVQUFVO0FBQzNCLFlBQUk7QUFDRixnQkFBTSxVQUFVLE1BQU0sS0FBSyxJQUFJLE1BQU0sV0FBVyxJQUFJO0FBRXBELGNBQUksS0FBSyxTQUFTO0FBQ2hCLGtCQUFNLEtBQUssUUFBUSxVQUFVLEtBQUssTUFBTSxPQUFPO0FBQUEsVUFDakQ7QUFDQTtBQUFBLFFBQ0YsU0FBUyxPQUFPO0FBQ2Qsa0JBQVEsS0FBSyxpREFBYyxLQUFLLElBQUksSUFBSSxLQUFLO0FBQUEsUUFDL0M7QUFBQSxNQUNGO0FBRUEsY0FBUSxJQUFJLDhEQUFpQixPQUFPLGtDQUFTO0FBQUEsSUFDL0MsU0FBUyxPQUFPO0FBQ2QsY0FBUSxNQUFNLGlEQUFjLEtBQUs7QUFDakMsWUFBTTtBQUFBLElBQ1I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxxQkFBeUM7QUFDL0MsVUFBTSxTQUFTLGtCQUFrQixLQUFLLFNBQVMsaUJBQWlCO0FBQ2hFLFdBQU8saUNBQVE7QUFBQSxFQUNqQjtBQUNGOyIsCiAgIm5hbWVzIjogWyJleHBvcnRzIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiam9pbiIsICJwYXRoIiwgImkiLCAiZXhwb3J0cyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAic3RyIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIkRhdGFiYXNlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIkRhdGFiYXNlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInJlcXVpcmVfZnVuY3Rpb24iLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgInN0ciIsICJzdHJpbmciLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicmVxdWlyZV9qc195YW1sIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInlhbWwiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJzdHIiLCAiZXhwb3J0cyIsICJzdHIiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZW5naW5lcyIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJzdHIiLCAibWF0dGVyIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJzdHIiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJlbmdpbmVzIiwgInBhcnNlIiwgIm1hdHRlciIsICJvcHRpb25zIiwgInN0ciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm9wdGlvbnMiLCAidGV4dCIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAib3B0aW9ucyIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2NoZW1hVHlwZSIsICJFeGVjdXRhYmxlQ29kZUxhbmd1YWdlIiwgIk91dGNvbWUiLCAiSGFybUNhdGVnb3J5IiwgIkhhcm1CbG9ja1RocmVzaG9sZCIsICJIYXJtUHJvYmFiaWxpdHkiLCAiQmxvY2tSZWFzb24iLCAiRmluaXNoUmVhc29uIiwgIlRhc2tUeXBlIiwgIkZ1bmN0aW9uQ2FsbGluZ01vZGUiLCAiRHluYW1pY1JldHJpZXZhbE1vZGUiLCAiVGFzayIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZW5zdXJlRm9sZGVyRXhpc3RzIiwgImVuc3VyZVVuaXF1ZVBhdGgiLCAiRGF0YWJhc2UiLCAiY2h1bmtzIiwgImltcG9ydF9iZXR0ZXJfc3FsaXRlMyIsICJEYXRhYmFzZSIsICJlbWJlZGRpbmdzIiwgImltcG9ydF9vYnNpZGlhbiIsICJFbWJlZGRpbmdHZW5lcmF0b3IiLCAibW9kdWxlIiwgIm1hdHRlciIsICJvcHRpb25zIiwgImNodW5rVGV4dCIsICJpbXBvcnRfY3J5cHRvIiwgIkVtYmVkZGluZ0dlbmVyYXRvciIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
