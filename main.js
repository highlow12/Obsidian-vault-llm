"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/logging.ts
var logging_exports = {};
__export(logging_exports, {
  appendEmbeddingLog: () => appendEmbeddingLog,
  appendErrorLog: () => appendErrorLog,
  appendTopicSeparationFailureLog: () => appendTopicSeparationFailureLog,
  getPluginLogPath: () => getPluginLogPath
});
function getPluginLogPath(app, manifest) {
  var _a;
  const pluginId = (_a = manifest == null ? void 0 : manifest.id) != null ? _a : "obsidian-vault-llm";
  return (0, import_obsidian3.normalizePath)(`${app.vault.configDir}/plugins/${pluginId}/log.txt`);
}
async function appendErrorLog(app, manifest, context, detail) {
  const logPath = getPluginLogPath(app, manifest);
  const timestamp = (/* @__PURE__ */ new Date()).toISOString();
  const detailText = toSafeString(detail);
  const entry = `
[${timestamp}] ${context}
${detailText}
`;
  try {
    const exists = await app.vault.adapter.exists(logPath);
    if (exists) {
      const current = await app.vault.adapter.read(logPath);
      await app.vault.adapter.write(logPath, `${entry}${current}`);
    } else {
      await app.vault.adapter.write(logPath, entry.trimStart());
    }
  } catch (error) {
    console.error("Failed to write plugin log", error);
  }
}
async function appendEmbeddingLog(app, manifest, data) {
  const logPath = getPluginLogPath(app, manifest);
  const timestamp = (/* @__PURE__ */ new Date()).toISOString();
  const inputText = data.inputText.replace(/\n/g, " ");
  const embeddingInfo = `[\uBCA1\uD130 \uCC28\uC6D0: ${data.embedding.length}]`;
  let similarityInfo = "";
  if (data.similarity !== void 0) {
    similarityInfo = ` | \uC774\uC804 \uC784\uBCA0\uB529\uACFC\uC758 \uC720\uC0AC\uB3C4: ${(data.similarity * 100).toFixed(2)}%`;
  }
  let entry = `
[${timestamp}] [\uC784\uBCA0\uB529] \uC785\uB825: "${inputText}" ${embeddingInfo}${similarityInfo}
`;
  try {
    const exists = await app.vault.adapter.exists(logPath);
    if (exists) {
      const current = await app.vault.adapter.read(logPath);
      await app.vault.adapter.write(logPath, `${entry}${current}`);
    } else {
      await app.vault.adapter.write(logPath, entry.trimStart());
    }
  } catch (error) {
    console.error("[\uC784\uBCA0\uB529 \uB85C\uADF8] \uD30C\uC77C \uC4F0\uAE30 \uC2E4\uD328:", error);
  }
}
async function appendTopicSeparationFailureLog(app, manifest, reason, details) {
  const logPath = getPluginLogPath(app, manifest);
  const timestamp = (/* @__PURE__ */ new Date()).toISOString();
  let entry = `
[${timestamp}] [\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328] \uC774\uC720: ${reason}
`;
  if (details) {
    entry += `\uC0C1\uC138: ${toSafeString(details)}
`;
  }
  entry += "---\n";
  try {
    const exists = await app.vault.adapter.exists(logPath);
    if (exists) {
      const current = await app.vault.adapter.read(logPath);
      await app.vault.adapter.write(logPath, `${entry}${current}`);
    } else {
      await app.vault.adapter.write(logPath, entry.trimStart());
    }
  } catch (error) {
    console.error("[\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328 \uB85C\uADF8] \uD30C\uC77C \uC4F0\uAE30 \uC2E4\uD328:", error);
  }
}
function toSafeString(detail) {
  var _a;
  if (detail === null || detail === void 0) {
    return String(detail);
  }
  if (typeof detail === "string") {
    return detail;
  }
  if (detail instanceof Error) {
    return (_a = detail.stack) != null ? _a : detail.message;
  }
  try {
    const seen = /* @__PURE__ */ new WeakSet();
    return JSON.stringify(
      detail,
      (key, value) => {
        if (typeof value === "object" && value !== null) {
          if (seen.has(value)) {
            return "[\uC21C\uD658 \uCC38\uC870]";
          }
          seen.add(value);
        }
        return value;
      },
      2
    );
  } catch (error) {
    const message = error instanceof Error ? error.message : String(error);
    return `\uC9C1\uB82C\uD654 \uC2E4\uD328: ${message}`;
  }
}
var import_obsidian3;
var init_logging = __esm({
  "src/logging.ts"() {
    "use strict";
    import_obsidian3 = require("obsidian");
  }
});

// node_modules/kind-of/index.js
var require_kind_of = __commonJS({
  "node_modules/kind-of/index.js"(exports2, module2) {
    var toString = Object.prototype.toString;
    module2.exports = function kindOf(val) {
      if (val === void 0) return "undefined";
      if (val === null) return "null";
      var type = typeof val;
      if (type === "boolean") return "boolean";
      if (type === "string") return "string";
      if (type === "number") return "number";
      if (type === "symbol") return "symbol";
      if (type === "function") {
        return isGeneratorFn(val) ? "generatorfunction" : "function";
      }
      if (isArray(val)) return "array";
      if (isBuffer(val)) return "buffer";
      if (isArguments(val)) return "arguments";
      if (isDate(val)) return "date";
      if (isError(val)) return "error";
      if (isRegexp(val)) return "regexp";
      switch (ctorName(val)) {
        case "Symbol":
          return "symbol";
        case "Promise":
          return "promise";
        // Set, Map, WeakSet, WeakMap
        case "WeakMap":
          return "weakmap";
        case "WeakSet":
          return "weakset";
        case "Map":
          return "map";
        case "Set":
          return "set";
        // 8-bit typed arrays
        case "Int8Array":
          return "int8array";
        case "Uint8Array":
          return "uint8array";
        case "Uint8ClampedArray":
          return "uint8clampedarray";
        // 16-bit typed arrays
        case "Int16Array":
          return "int16array";
        case "Uint16Array":
          return "uint16array";
        // 32-bit typed arrays
        case "Int32Array":
          return "int32array";
        case "Uint32Array":
          return "uint32array";
        case "Float32Array":
          return "float32array";
        case "Float64Array":
          return "float64array";
      }
      if (isGeneratorObj(val)) {
        return "generator";
      }
      type = toString.call(val);
      switch (type) {
        case "[object Object]":
          return "object";
        // iterators
        case "[object Map Iterator]":
          return "mapiterator";
        case "[object Set Iterator]":
          return "setiterator";
        case "[object String Iterator]":
          return "stringiterator";
        case "[object Array Iterator]":
          return "arrayiterator";
      }
      return type.slice(8, -1).toLowerCase().replace(/\s/g, "");
    };
    function ctorName(val) {
      return typeof val.constructor === "function" ? val.constructor.name : null;
    }
    function isArray(val) {
      if (Array.isArray) return Array.isArray(val);
      return val instanceof Array;
    }
    function isError(val) {
      return val instanceof Error || typeof val.message === "string" && val.constructor && typeof val.constructor.stackTraceLimit === "number";
    }
    function isDate(val) {
      if (val instanceof Date) return true;
      return typeof val.toDateString === "function" && typeof val.getDate === "function" && typeof val.setDate === "function";
    }
    function isRegexp(val) {
      if (val instanceof RegExp) return true;
      return typeof val.flags === "string" && typeof val.ignoreCase === "boolean" && typeof val.multiline === "boolean" && typeof val.global === "boolean";
    }
    function isGeneratorFn(name, val) {
      return ctorName(name) === "GeneratorFunction";
    }
    function isGeneratorObj(val) {
      return typeof val.throw === "function" && typeof val.return === "function" && typeof val.next === "function";
    }
    function isArguments(val) {
      try {
        if (typeof val.length === "number" && typeof val.callee === "function") {
          return true;
        }
      } catch (err) {
        if (err.message.indexOf("callee") !== -1) {
          return true;
        }
      }
      return false;
    }
    function isBuffer(val) {
      if (val.constructor && typeof val.constructor.isBuffer === "function") {
        return val.constructor.isBuffer(val);
      }
      return false;
    }
  }
});

// node_modules/is-extendable/index.js
var require_is_extendable = __commonJS({
  "node_modules/is-extendable/index.js"(exports2, module2) {
    "use strict";
    module2.exports = function isExtendable(val) {
      return typeof val !== "undefined" && val !== null && (typeof val === "object" || typeof val === "function");
    };
  }
});

// node_modules/extend-shallow/index.js
var require_extend_shallow = __commonJS({
  "node_modules/extend-shallow/index.js"(exports2, module2) {
    "use strict";
    var isObject = require_is_extendable();
    module2.exports = function extend(o) {
      if (!isObject(o)) {
        o = {};
      }
      var len = arguments.length;
      for (var i = 1; i < len; i++) {
        var obj = arguments[i];
        if (isObject(obj)) {
          assign(o, obj);
        }
      }
      return o;
    };
    function assign(a, b) {
      for (var key in b) {
        if (hasOwn(b, key)) {
          a[key] = b[key];
        }
      }
    }
    function hasOwn(obj, key) {
      return Object.prototype.hasOwnProperty.call(obj, key);
    }
  }
});

// node_modules/section-matter/index.js
var require_section_matter = __commonJS({
  "node_modules/section-matter/index.js"(exports2, module2) {
    "use strict";
    var typeOf = require_kind_of();
    var extend = require_extend_shallow();
    module2.exports = function(input, options2) {
      if (typeof options2 === "function") {
        options2 = { parse: options2 };
      }
      var file = toObject(input);
      var defaults = { section_delimiter: "---", parse: identity };
      var opts = extend({}, defaults, options2);
      var delim = opts.section_delimiter;
      var lines = file.content.split(/\r?\n/);
      var sections = null;
      var section = createSection();
      var content = [];
      var stack = [];
      function initSections(val) {
        file.content = val;
        sections = [];
        content = [];
      }
      function closeSection(val) {
        if (stack.length) {
          section.key = getKey(stack[0], delim);
          section.content = val;
          opts.parse(section, sections);
          sections.push(section);
          section = createSection();
          content = [];
          stack = [];
        }
      }
      for (var i = 0; i < lines.length; i++) {
        var line = lines[i];
        var len = stack.length;
        var ln = line.trim();
        if (isDelimiter(ln, delim)) {
          if (ln.length === 3 && i !== 0) {
            if (len === 0 || len === 2) {
              content.push(line);
              continue;
            }
            stack.push(ln);
            section.data = content.join("\n");
            content = [];
            continue;
          }
          if (sections === null) {
            initSections(content.join("\n"));
          }
          if (len === 2) {
            closeSection(content.join("\n"));
          }
          stack.push(ln);
          continue;
        }
        content.push(line);
      }
      if (sections === null) {
        initSections(content.join("\n"));
      } else {
        closeSection(content.join("\n"));
      }
      file.sections = sections;
      return file;
    };
    function isDelimiter(line, delim) {
      if (line.slice(0, delim.length) !== delim) {
        return false;
      }
      if (line.charAt(delim.length + 1) === delim.slice(-1)) {
        return false;
      }
      return true;
    }
    function toObject(input) {
      if (typeOf(input) !== "object") {
        input = { content: input };
      }
      if (typeof input.content !== "string" && !isBuffer(input.content)) {
        throw new TypeError("expected a buffer or string");
      }
      input.content = input.content.toString();
      input.sections = [];
      return input;
    }
    function getKey(val, delim) {
      return val ? val.slice(delim.length).trim() : "";
    }
    function createSection() {
      return { key: "", data: "", content: "" };
    }
    function identity(val) {
      return val;
    }
    function isBuffer(val) {
      if (val && val.constructor && typeof val.constructor.isBuffer === "function") {
        return val.constructor.isBuffer(val);
      }
      return false;
    }
  }
});

// node_modules/js-yaml/lib/js-yaml/common.js
var require_common = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/common.js"(exports2, module2) {
    "use strict";
    function isNothing(subject) {
      return typeof subject === "undefined" || subject === null;
    }
    function isObject(subject) {
      return typeof subject === "object" && subject !== null;
    }
    function toArray(sequence) {
      if (Array.isArray(sequence)) return sequence;
      else if (isNothing(sequence)) return [];
      return [sequence];
    }
    function extend(target, source) {
      var index, length, key, sourceKeys;
      if (source) {
        sourceKeys = Object.keys(source);
        for (index = 0, length = sourceKeys.length; index < length; index += 1) {
          key = sourceKeys[index];
          target[key] = source[key];
        }
      }
      return target;
    }
    function repeat(string, count) {
      var result = "", cycle;
      for (cycle = 0; cycle < count; cycle += 1) {
        result += string;
      }
      return result;
    }
    function isNegativeZero(number) {
      return number === 0 && Number.NEGATIVE_INFINITY === 1 / number;
    }
    module2.exports.isNothing = isNothing;
    module2.exports.isObject = isObject;
    module2.exports.toArray = toArray;
    module2.exports.repeat = repeat;
    module2.exports.isNegativeZero = isNegativeZero;
    module2.exports.extend = extend;
  }
});

// node_modules/js-yaml/lib/js-yaml/exception.js
var require_exception = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/exception.js"(exports2, module2) {
    "use strict";
    function YAMLException(reason, mark) {
      Error.call(this);
      this.name = "YAMLException";
      this.reason = reason;
      this.mark = mark;
      this.message = (this.reason || "(unknown reason)") + (this.mark ? " " + this.mark.toString() : "");
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, this.constructor);
      } else {
        this.stack = new Error().stack || "";
      }
    }
    YAMLException.prototype = Object.create(Error.prototype);
    YAMLException.prototype.constructor = YAMLException;
    YAMLException.prototype.toString = function toString(compact) {
      var result = this.name + ": ";
      result += this.reason || "(unknown reason)";
      if (!compact && this.mark) {
        result += " " + this.mark.toString();
      }
      return result;
    };
    module2.exports = YAMLException;
  }
});

// node_modules/js-yaml/lib/js-yaml/mark.js
var require_mark = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/mark.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    function Mark(name, buffer, position, line, column) {
      this.name = name;
      this.buffer = buffer;
      this.position = position;
      this.line = line;
      this.column = column;
    }
    Mark.prototype.getSnippet = function getSnippet(indent, maxLength) {
      var head, start, tail, end, snippet;
      if (!this.buffer) return null;
      indent = indent || 4;
      maxLength = maxLength || 75;
      head = "";
      start = this.position;
      while (start > 0 && "\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(start - 1)) === -1) {
        start -= 1;
        if (this.position - start > maxLength / 2 - 1) {
          head = " ... ";
          start += 5;
          break;
        }
      }
      tail = "";
      end = this.position;
      while (end < this.buffer.length && "\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(end)) === -1) {
        end += 1;
        if (end - this.position > maxLength / 2 - 1) {
          tail = " ... ";
          end -= 5;
          break;
        }
      }
      snippet = this.buffer.slice(start, end);
      return common.repeat(" ", indent) + head + snippet + tail + "\n" + common.repeat(" ", indent + this.position - start + head.length) + "^";
    };
    Mark.prototype.toString = function toString(compact) {
      var snippet, where = "";
      if (this.name) {
        where += 'in "' + this.name + '" ';
      }
      where += "at line " + (this.line + 1) + ", column " + (this.column + 1);
      if (!compact) {
        snippet = this.getSnippet();
        if (snippet) {
          where += ":\n" + snippet;
        }
      }
      return where;
    };
    module2.exports = Mark;
  }
});

// node_modules/js-yaml/lib/js-yaml/type.js
var require_type = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type.js"(exports2, module2) {
    "use strict";
    var YAMLException = require_exception();
    var TYPE_CONSTRUCTOR_OPTIONS = [
      "kind",
      "resolve",
      "construct",
      "instanceOf",
      "predicate",
      "represent",
      "defaultStyle",
      "styleAliases"
    ];
    var YAML_NODE_KINDS = [
      "scalar",
      "sequence",
      "mapping"
    ];
    function compileStyleAliases(map) {
      var result = {};
      if (map !== null) {
        Object.keys(map).forEach(function(style) {
          map[style].forEach(function(alias) {
            result[String(alias)] = style;
          });
        });
      }
      return result;
    }
    function Type(tag, options2) {
      options2 = options2 || {};
      Object.keys(options2).forEach(function(name) {
        if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {
          throw new YAMLException('Unknown option "' + name + '" is met in definition of "' + tag + '" YAML type.');
        }
      });
      this.tag = tag;
      this.kind = options2["kind"] || null;
      this.resolve = options2["resolve"] || function() {
        return true;
      };
      this.construct = options2["construct"] || function(data) {
        return data;
      };
      this.instanceOf = options2["instanceOf"] || null;
      this.predicate = options2["predicate"] || null;
      this.represent = options2["represent"] || null;
      this.defaultStyle = options2["defaultStyle"] || null;
      this.styleAliases = compileStyleAliases(options2["styleAliases"] || null);
      if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {
        throw new YAMLException('Unknown kind "' + this.kind + '" is specified for "' + tag + '" YAML type.');
      }
    }
    module2.exports = Type;
  }
});

// node_modules/js-yaml/lib/js-yaml/schema.js
var require_schema = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var YAMLException = require_exception();
    var Type = require_type();
    function compileList(schema, name, result) {
      var exclude = [];
      schema.include.forEach(function(includedSchema) {
        result = compileList(includedSchema, name, result);
      });
      schema[name].forEach(function(currentType) {
        result.forEach(function(previousType, previousIndex) {
          if (previousType.tag === currentType.tag && previousType.kind === currentType.kind) {
            exclude.push(previousIndex);
          }
        });
        result.push(currentType);
      });
      return result.filter(function(type, index) {
        return exclude.indexOf(index) === -1;
      });
    }
    function compileMap() {
      var result = {
        scalar: {},
        sequence: {},
        mapping: {},
        fallback: {}
      }, index, length;
      function collectType(type) {
        result[type.kind][type.tag] = result["fallback"][type.tag] = type;
      }
      for (index = 0, length = arguments.length; index < length; index += 1) {
        arguments[index].forEach(collectType);
      }
      return result;
    }
    function Schema(definition) {
      this.include = definition.include || [];
      this.implicit = definition.implicit || [];
      this.explicit = definition.explicit || [];
      this.implicit.forEach(function(type) {
        if (type.loadKind && type.loadKind !== "scalar") {
          throw new YAMLException("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");
        }
      });
      this.compiledImplicit = compileList(this, "implicit", []);
      this.compiledExplicit = compileList(this, "explicit", []);
      this.compiledTypeMap = compileMap(this.compiledImplicit, this.compiledExplicit);
    }
    Schema.DEFAULT = null;
    Schema.create = function createSchema() {
      var schemas, types;
      switch (arguments.length) {
        case 1:
          schemas = Schema.DEFAULT;
          types = arguments[0];
          break;
        case 2:
          schemas = arguments[0];
          types = arguments[1];
          break;
        default:
          throw new YAMLException("Wrong number of arguments for Schema.create function");
      }
      schemas = common.toArray(schemas);
      types = common.toArray(types);
      if (!schemas.every(function(schema) {
        return schema instanceof Schema;
      })) {
        throw new YAMLException("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");
      }
      if (!types.every(function(type) {
        return type instanceof Type;
      })) {
        throw new YAMLException("Specified list of YAML types (or a single Type object) contains a non-Type object.");
      }
      return new Schema({
        include: schemas,
        explicit: types
      });
    };
    module2.exports = Schema;
  }
});

// node_modules/js-yaml/lib/js-yaml/type/str.js
var require_str = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/str.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    module2.exports = new Type("tag:yaml.org,2002:str", {
      kind: "scalar",
      construct: function(data) {
        return data !== null ? data : "";
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/seq.js
var require_seq = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/seq.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    module2.exports = new Type("tag:yaml.org,2002:seq", {
      kind: "sequence",
      construct: function(data) {
        return data !== null ? data : [];
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/map.js
var require_map = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/map.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    module2.exports = new Type("tag:yaml.org,2002:map", {
      kind: "mapping",
      construct: function(data) {
        return data !== null ? data : {};
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/failsafe.js
var require_failsafe = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/failsafe.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      explicit: [
        require_str(),
        require_seq(),
        require_map()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/null.js
var require_null = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/null.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveYamlNull(data) {
      if (data === null) return true;
      var max = data.length;
      return max === 1 && data === "~" || max === 4 && (data === "null" || data === "Null" || data === "NULL");
    }
    function constructYamlNull() {
      return null;
    }
    function isNull(object) {
      return object === null;
    }
    module2.exports = new Type("tag:yaml.org,2002:null", {
      kind: "scalar",
      resolve: resolveYamlNull,
      construct: constructYamlNull,
      predicate: isNull,
      represent: {
        canonical: function() {
          return "~";
        },
        lowercase: function() {
          return "null";
        },
        uppercase: function() {
          return "NULL";
        },
        camelcase: function() {
          return "Null";
        }
      },
      defaultStyle: "lowercase"
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/bool.js
var require_bool = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/bool.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveYamlBoolean(data) {
      if (data === null) return false;
      var max = data.length;
      return max === 4 && (data === "true" || data === "True" || data === "TRUE") || max === 5 && (data === "false" || data === "False" || data === "FALSE");
    }
    function constructYamlBoolean(data) {
      return data === "true" || data === "True" || data === "TRUE";
    }
    function isBoolean(object) {
      return Object.prototype.toString.call(object) === "[object Boolean]";
    }
    module2.exports = new Type("tag:yaml.org,2002:bool", {
      kind: "scalar",
      resolve: resolveYamlBoolean,
      construct: constructYamlBoolean,
      predicate: isBoolean,
      represent: {
        lowercase: function(object) {
          return object ? "true" : "false";
        },
        uppercase: function(object) {
          return object ? "TRUE" : "FALSE";
        },
        camelcase: function(object) {
          return object ? "True" : "False";
        }
      },
      defaultStyle: "lowercase"
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/int.js
var require_int = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/int.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var Type = require_type();
    function isHexCode(c) {
      return 48 <= c && c <= 57 || 65 <= c && c <= 70 || 97 <= c && c <= 102;
    }
    function isOctCode(c) {
      return 48 <= c && c <= 55;
    }
    function isDecCode(c) {
      return 48 <= c && c <= 57;
    }
    function resolveYamlInteger(data) {
      if (data === null) return false;
      var max = data.length, index = 0, hasDigits = false, ch;
      if (!max) return false;
      ch = data[index];
      if (ch === "-" || ch === "+") {
        ch = data[++index];
      }
      if (ch === "0") {
        if (index + 1 === max) return true;
        ch = data[++index];
        if (ch === "b") {
          index++;
          for (; index < max; index++) {
            ch = data[index];
            if (ch === "_") continue;
            if (ch !== "0" && ch !== "1") return false;
            hasDigits = true;
          }
          return hasDigits && ch !== "_";
        }
        if (ch === "x") {
          index++;
          for (; index < max; index++) {
            ch = data[index];
            if (ch === "_") continue;
            if (!isHexCode(data.charCodeAt(index))) return false;
            hasDigits = true;
          }
          return hasDigits && ch !== "_";
        }
        for (; index < max; index++) {
          ch = data[index];
          if (ch === "_") continue;
          if (!isOctCode(data.charCodeAt(index))) return false;
          hasDigits = true;
        }
        return hasDigits && ch !== "_";
      }
      if (ch === "_") return false;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (ch === ":") break;
        if (!isDecCode(data.charCodeAt(index))) {
          return false;
        }
        hasDigits = true;
      }
      if (!hasDigits || ch === "_") return false;
      if (ch !== ":") return true;
      return /^(:[0-5]?[0-9])+$/.test(data.slice(index));
    }
    function constructYamlInteger(data) {
      var value = data, sign = 1, ch, base, digits = [];
      if (value.indexOf("_") !== -1) {
        value = value.replace(/_/g, "");
      }
      ch = value[0];
      if (ch === "-" || ch === "+") {
        if (ch === "-") sign = -1;
        value = value.slice(1);
        ch = value[0];
      }
      if (value === "0") return 0;
      if (ch === "0") {
        if (value[1] === "b") return sign * parseInt(value.slice(2), 2);
        if (value[1] === "x") return sign * parseInt(value, 16);
        return sign * parseInt(value, 8);
      }
      if (value.indexOf(":") !== -1) {
        value.split(":").forEach(function(v) {
          digits.unshift(parseInt(v, 10));
        });
        value = 0;
        base = 1;
        digits.forEach(function(d) {
          value += d * base;
          base *= 60;
        });
        return sign * value;
      }
      return sign * parseInt(value, 10);
    }
    function isInteger(object) {
      return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 === 0 && !common.isNegativeZero(object));
    }
    module2.exports = new Type("tag:yaml.org,2002:int", {
      kind: "scalar",
      resolve: resolveYamlInteger,
      construct: constructYamlInteger,
      predicate: isInteger,
      represent: {
        binary: function(obj) {
          return obj >= 0 ? "0b" + obj.toString(2) : "-0b" + obj.toString(2).slice(1);
        },
        octal: function(obj) {
          return obj >= 0 ? "0" + obj.toString(8) : "-0" + obj.toString(8).slice(1);
        },
        decimal: function(obj) {
          return obj.toString(10);
        },
        /* eslint-disable max-len */
        hexadecimal: function(obj) {
          return obj >= 0 ? "0x" + obj.toString(16).toUpperCase() : "-0x" + obj.toString(16).toUpperCase().slice(1);
        }
      },
      defaultStyle: "decimal",
      styleAliases: {
        binary: [2, "bin"],
        octal: [8, "oct"],
        decimal: [10, "dec"],
        hexadecimal: [16, "hex"]
      }
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/float.js
var require_float = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/float.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var Type = require_type();
    var YAML_FLOAT_PATTERN = new RegExp(
      // 2.5e4, 2.5 and integers
      "^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"
    );
    function resolveYamlFloat(data) {
      if (data === null) return false;
      if (!YAML_FLOAT_PATTERN.test(data) || // Quick hack to not allow integers end with `_`
      // Probably should update regexp & check speed
      data[data.length - 1] === "_") {
        return false;
      }
      return true;
    }
    function constructYamlFloat(data) {
      var value, sign, base, digits;
      value = data.replace(/_/g, "").toLowerCase();
      sign = value[0] === "-" ? -1 : 1;
      digits = [];
      if ("+-".indexOf(value[0]) >= 0) {
        value = value.slice(1);
      }
      if (value === ".inf") {
        return sign === 1 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;
      } else if (value === ".nan") {
        return NaN;
      } else if (value.indexOf(":") >= 0) {
        value.split(":").forEach(function(v) {
          digits.unshift(parseFloat(v, 10));
        });
        value = 0;
        base = 1;
        digits.forEach(function(d) {
          value += d * base;
          base *= 60;
        });
        return sign * value;
      }
      return sign * parseFloat(value, 10);
    }
    var SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;
    function representYamlFloat(object, style) {
      var res;
      if (isNaN(object)) {
        switch (style) {
          case "lowercase":
            return ".nan";
          case "uppercase":
            return ".NAN";
          case "camelcase":
            return ".NaN";
        }
      } else if (Number.POSITIVE_INFINITY === object) {
        switch (style) {
          case "lowercase":
            return ".inf";
          case "uppercase":
            return ".INF";
          case "camelcase":
            return ".Inf";
        }
      } else if (Number.NEGATIVE_INFINITY === object) {
        switch (style) {
          case "lowercase":
            return "-.inf";
          case "uppercase":
            return "-.INF";
          case "camelcase":
            return "-.Inf";
        }
      } else if (common.isNegativeZero(object)) {
        return "-0.0";
      }
      res = object.toString(10);
      return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace("e", ".e") : res;
    }
    function isFloat(object) {
      return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 !== 0 || common.isNegativeZero(object));
    }
    module2.exports = new Type("tag:yaml.org,2002:float", {
      kind: "scalar",
      resolve: resolveYamlFloat,
      construct: constructYamlFloat,
      predicate: isFloat,
      represent: representYamlFloat,
      defaultStyle: "lowercase"
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/json.js
var require_json = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/json.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      include: [
        require_failsafe()
      ],
      implicit: [
        require_null(),
        require_bool(),
        require_int(),
        require_float()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/core.js
var require_core = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/core.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      include: [
        require_json()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/timestamp.js
var require_timestamp = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/timestamp.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var YAML_DATE_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"
    );
    var YAML_TIMESTAMP_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"
    );
    function resolveYamlTimestamp(data) {
      if (data === null) return false;
      if (YAML_DATE_REGEXP.exec(data) !== null) return true;
      if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;
      return false;
    }
    function constructYamlTimestamp(data) {
      var match, year, month, day, hour, minute, second, fraction = 0, delta = null, tz_hour, tz_minute, date;
      match = YAML_DATE_REGEXP.exec(data);
      if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);
      if (match === null) throw new Error("Date resolve error");
      year = +match[1];
      month = +match[2] - 1;
      day = +match[3];
      if (!match[4]) {
        return new Date(Date.UTC(year, month, day));
      }
      hour = +match[4];
      minute = +match[5];
      second = +match[6];
      if (match[7]) {
        fraction = match[7].slice(0, 3);
        while (fraction.length < 3) {
          fraction += "0";
        }
        fraction = +fraction;
      }
      if (match[9]) {
        tz_hour = +match[10];
        tz_minute = +(match[11] || 0);
        delta = (tz_hour * 60 + tz_minute) * 6e4;
        if (match[9] === "-") delta = -delta;
      }
      date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));
      if (delta) date.setTime(date.getTime() - delta);
      return date;
    }
    function representYamlTimestamp(object) {
      return object.toISOString();
    }
    module2.exports = new Type("tag:yaml.org,2002:timestamp", {
      kind: "scalar",
      resolve: resolveYamlTimestamp,
      construct: constructYamlTimestamp,
      instanceOf: Date,
      represent: representYamlTimestamp
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/merge.js
var require_merge = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/merge.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveYamlMerge(data) {
      return data === "<<" || data === null;
    }
    module2.exports = new Type("tag:yaml.org,2002:merge", {
      kind: "scalar",
      resolve: resolveYamlMerge
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/binary.js
var require_binary = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/binary.js"(exports2, module2) {
    "use strict";
    var NodeBuffer;
    try {
      _require = require;
      NodeBuffer = _require("buffer").Buffer;
    } catch (__) {
    }
    var _require;
    var Type = require_type();
    var BASE64_MAP = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";
    function resolveYamlBinary(data) {
      if (data === null) return false;
      var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;
      for (idx = 0; idx < max; idx++) {
        code = map.indexOf(data.charAt(idx));
        if (code > 64) continue;
        if (code < 0) return false;
        bitlen += 6;
      }
      return bitlen % 8 === 0;
    }
    function constructYamlBinary(data) {
      var idx, tailbits, input = data.replace(/[\r\n=]/g, ""), max = input.length, map = BASE64_MAP, bits = 0, result = [];
      for (idx = 0; idx < max; idx++) {
        if (idx % 4 === 0 && idx) {
          result.push(bits >> 16 & 255);
          result.push(bits >> 8 & 255);
          result.push(bits & 255);
        }
        bits = bits << 6 | map.indexOf(input.charAt(idx));
      }
      tailbits = max % 4 * 6;
      if (tailbits === 0) {
        result.push(bits >> 16 & 255);
        result.push(bits >> 8 & 255);
        result.push(bits & 255);
      } else if (tailbits === 18) {
        result.push(bits >> 10 & 255);
        result.push(bits >> 2 & 255);
      } else if (tailbits === 12) {
        result.push(bits >> 4 & 255);
      }
      if (NodeBuffer) {
        return NodeBuffer.from ? NodeBuffer.from(result) : new NodeBuffer(result);
      }
      return result;
    }
    function representYamlBinary(object) {
      var result = "", bits = 0, idx, tail, max = object.length, map = BASE64_MAP;
      for (idx = 0; idx < max; idx++) {
        if (idx % 3 === 0 && idx) {
          result += map[bits >> 18 & 63];
          result += map[bits >> 12 & 63];
          result += map[bits >> 6 & 63];
          result += map[bits & 63];
        }
        bits = (bits << 8) + object[idx];
      }
      tail = max % 3;
      if (tail === 0) {
        result += map[bits >> 18 & 63];
        result += map[bits >> 12 & 63];
        result += map[bits >> 6 & 63];
        result += map[bits & 63];
      } else if (tail === 2) {
        result += map[bits >> 10 & 63];
        result += map[bits >> 4 & 63];
        result += map[bits << 2 & 63];
        result += map[64];
      } else if (tail === 1) {
        result += map[bits >> 2 & 63];
        result += map[bits << 4 & 63];
        result += map[64];
        result += map[64];
      }
      return result;
    }
    function isBinary(object) {
      return NodeBuffer && NodeBuffer.isBuffer(object);
    }
    module2.exports = new Type("tag:yaml.org,2002:binary", {
      kind: "scalar",
      resolve: resolveYamlBinary,
      construct: constructYamlBinary,
      predicate: isBinary,
      represent: representYamlBinary
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/omap.js
var require_omap = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/omap.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    var _toString = Object.prototype.toString;
    function resolveYamlOmap(data) {
      if (data === null) return true;
      var objectKeys = [], index, length, pair, pairKey, pairHasKey, object = data;
      for (index = 0, length = object.length; index < length; index += 1) {
        pair = object[index];
        pairHasKey = false;
        if (_toString.call(pair) !== "[object Object]") return false;
        for (pairKey in pair) {
          if (_hasOwnProperty.call(pair, pairKey)) {
            if (!pairHasKey) pairHasKey = true;
            else return false;
          }
        }
        if (!pairHasKey) return false;
        if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);
        else return false;
      }
      return true;
    }
    function constructYamlOmap(data) {
      return data !== null ? data : [];
    }
    module2.exports = new Type("tag:yaml.org,2002:omap", {
      kind: "sequence",
      resolve: resolveYamlOmap,
      construct: constructYamlOmap
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/pairs.js
var require_pairs = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/pairs.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var _toString = Object.prototype.toString;
    function resolveYamlPairs(data) {
      if (data === null) return true;
      var index, length, pair, keys, result, object = data;
      result = new Array(object.length);
      for (index = 0, length = object.length; index < length; index += 1) {
        pair = object[index];
        if (_toString.call(pair) !== "[object Object]") return false;
        keys = Object.keys(pair);
        if (keys.length !== 1) return false;
        result[index] = [keys[0], pair[keys[0]]];
      }
      return true;
    }
    function constructYamlPairs(data) {
      if (data === null) return [];
      var index, length, pair, keys, result, object = data;
      result = new Array(object.length);
      for (index = 0, length = object.length; index < length; index += 1) {
        pair = object[index];
        keys = Object.keys(pair);
        result[index] = [keys[0], pair[keys[0]]];
      }
      return result;
    }
    module2.exports = new Type("tag:yaml.org,2002:pairs", {
      kind: "sequence",
      resolve: resolveYamlPairs,
      construct: constructYamlPairs
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/set.js
var require_set = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/set.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    function resolveYamlSet(data) {
      if (data === null) return true;
      var key, object = data;
      for (key in object) {
        if (_hasOwnProperty.call(object, key)) {
          if (object[key] !== null) return false;
        }
      }
      return true;
    }
    function constructYamlSet(data) {
      return data !== null ? data : {};
    }
    module2.exports = new Type("tag:yaml.org,2002:set", {
      kind: "mapping",
      resolve: resolveYamlSet,
      construct: constructYamlSet
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/default_safe.js
var require_default_safe = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/default_safe.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = new Schema({
      include: [
        require_core()
      ],
      implicit: [
        require_timestamp(),
        require_merge()
      ],
      explicit: [
        require_binary(),
        require_omap(),
        require_pairs(),
        require_set()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/js/undefined.js
var require_undefined = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/js/undefined.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveJavascriptUndefined() {
      return true;
    }
    function constructJavascriptUndefined() {
      return void 0;
    }
    function representJavascriptUndefined() {
      return "";
    }
    function isUndefined(object) {
      return typeof object === "undefined";
    }
    module2.exports = new Type("tag:yaml.org,2002:js/undefined", {
      kind: "scalar",
      resolve: resolveJavascriptUndefined,
      construct: constructJavascriptUndefined,
      predicate: isUndefined,
      represent: representJavascriptUndefined
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/js/regexp.js
var require_regexp = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/js/regexp.js"(exports2, module2) {
    "use strict";
    var Type = require_type();
    function resolveJavascriptRegExp(data) {
      if (data === null) return false;
      if (data.length === 0) return false;
      var regexp = data, tail = /\/([gim]*)$/.exec(data), modifiers = "";
      if (regexp[0] === "/") {
        if (tail) modifiers = tail[1];
        if (modifiers.length > 3) return false;
        if (regexp[regexp.length - modifiers.length - 1] !== "/") return false;
      }
      return true;
    }
    function constructJavascriptRegExp(data) {
      var regexp = data, tail = /\/([gim]*)$/.exec(data), modifiers = "";
      if (regexp[0] === "/") {
        if (tail) modifiers = tail[1];
        regexp = regexp.slice(1, regexp.length - modifiers.length - 1);
      }
      return new RegExp(regexp, modifiers);
    }
    function representJavascriptRegExp(object) {
      var result = "/" + object.source + "/";
      if (object.global) result += "g";
      if (object.multiline) result += "m";
      if (object.ignoreCase) result += "i";
      return result;
    }
    function isRegExp(object) {
      return Object.prototype.toString.call(object) === "[object RegExp]";
    }
    module2.exports = new Type("tag:yaml.org,2002:js/regexp", {
      kind: "scalar",
      resolve: resolveJavascriptRegExp,
      construct: constructJavascriptRegExp,
      predicate: isRegExp,
      represent: representJavascriptRegExp
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/type/js/function.js
var require_function = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/type/js/function.js"(exports2, module2) {
    "use strict";
    var esprima;
    try {
      _require = require;
      esprima = _require("esprima");
    } catch (_) {
      if (typeof window !== "undefined") esprima = window.esprima;
    }
    var _require;
    var Type = require_type();
    function resolveJavascriptFunction(data) {
      if (data === null) return false;
      try {
        var source = "(" + data + ")", ast = esprima.parse(source, { range: true });
        if (ast.type !== "Program" || ast.body.length !== 1 || ast.body[0].type !== "ExpressionStatement" || ast.body[0].expression.type !== "ArrowFunctionExpression" && ast.body[0].expression.type !== "FunctionExpression") {
          return false;
        }
        return true;
      } catch (err) {
        return false;
      }
    }
    function constructJavascriptFunction(data) {
      var source = "(" + data + ")", ast = esprima.parse(source, { range: true }), params = [], body;
      if (ast.type !== "Program" || ast.body.length !== 1 || ast.body[0].type !== "ExpressionStatement" || ast.body[0].expression.type !== "ArrowFunctionExpression" && ast.body[0].expression.type !== "FunctionExpression") {
        throw new Error("Failed to resolve function");
      }
      ast.body[0].expression.params.forEach(function(param) {
        params.push(param.name);
      });
      body = ast.body[0].expression.body.range;
      if (ast.body[0].expression.body.type === "BlockStatement") {
        return new Function(params, source.slice(body[0] + 1, body[1] - 1));
      }
      return new Function(params, "return " + source.slice(body[0], body[1]));
    }
    function representJavascriptFunction(object) {
      return object.toString();
    }
    function isFunction(object) {
      return Object.prototype.toString.call(object) === "[object Function]";
    }
    module2.exports = new Type("tag:yaml.org,2002:js/function", {
      kind: "scalar",
      resolve: resolveJavascriptFunction,
      construct: constructJavascriptFunction,
      predicate: isFunction,
      represent: representJavascriptFunction
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/schema/default_full.js
var require_default_full = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/schema/default_full.js"(exports2, module2) {
    "use strict";
    var Schema = require_schema();
    module2.exports = Schema.DEFAULT = new Schema({
      include: [
        require_default_safe()
      ],
      explicit: [
        require_undefined(),
        require_regexp(),
        require_function()
      ]
    });
  }
});

// node_modules/js-yaml/lib/js-yaml/loader.js
var require_loader = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/loader.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var YAMLException = require_exception();
    var Mark = require_mark();
    var DEFAULT_SAFE_SCHEMA = require_default_safe();
    var DEFAULT_FULL_SCHEMA = require_default_full();
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    var CONTEXT_FLOW_IN = 1;
    var CONTEXT_FLOW_OUT = 2;
    var CONTEXT_BLOCK_IN = 3;
    var CONTEXT_BLOCK_OUT = 4;
    var CHOMPING_CLIP = 1;
    var CHOMPING_STRIP = 2;
    var CHOMPING_KEEP = 3;
    var PATTERN_NON_PRINTABLE = /[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
    var PATTERN_NON_ASCII_LINE_BREAKS = /[\x85\u2028\u2029]/;
    var PATTERN_FLOW_INDICATORS = /[,\[\]\{\}]/;
    var PATTERN_TAG_HANDLE = /^(?:!|!!|![a-z\-]+!)$/i;
    var PATTERN_TAG_URI = /^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;
    function _class(obj) {
      return Object.prototype.toString.call(obj);
    }
    function is_EOL(c) {
      return c === 10 || c === 13;
    }
    function is_WHITE_SPACE(c) {
      return c === 9 || c === 32;
    }
    function is_WS_OR_EOL(c) {
      return c === 9 || c === 32 || c === 10 || c === 13;
    }
    function is_FLOW_INDICATOR(c) {
      return c === 44 || c === 91 || c === 93 || c === 123 || c === 125;
    }
    function fromHexCode(c) {
      var lc;
      if (48 <= c && c <= 57) {
        return c - 48;
      }
      lc = c | 32;
      if (97 <= lc && lc <= 102) {
        return lc - 97 + 10;
      }
      return -1;
    }
    function escapedHexLen(c) {
      if (c === 120) {
        return 2;
      }
      if (c === 117) {
        return 4;
      }
      if (c === 85) {
        return 8;
      }
      return 0;
    }
    function fromDecimalCode(c) {
      if (48 <= c && c <= 57) {
        return c - 48;
      }
      return -1;
    }
    function simpleEscapeSequence(c) {
      return c === 48 ? "\0" : c === 97 ? "\x07" : c === 98 ? "\b" : c === 116 ? "	" : c === 9 ? "	" : c === 110 ? "\n" : c === 118 ? "\v" : c === 102 ? "\f" : c === 114 ? "\r" : c === 101 ? "\x1B" : c === 32 ? " " : c === 34 ? '"' : c === 47 ? "/" : c === 92 ? "\\" : c === 78 ? "\x85" : c === 95 ? "\xA0" : c === 76 ? "\u2028" : c === 80 ? "\u2029" : "";
    }
    function charFromCodepoint(c) {
      if (c <= 65535) {
        return String.fromCharCode(c);
      }
      return String.fromCharCode(
        (c - 65536 >> 10) + 55296,
        (c - 65536 & 1023) + 56320
      );
    }
    function setProperty(object, key, value) {
      if (key === "__proto__") {
        Object.defineProperty(object, key, {
          configurable: true,
          enumerable: true,
          writable: true,
          value
        });
      } else {
        object[key] = value;
      }
    }
    var simpleEscapeCheck = new Array(256);
    var simpleEscapeMap = new Array(256);
    for (i = 0; i < 256; i++) {
      simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;
      simpleEscapeMap[i] = simpleEscapeSequence(i);
    }
    var i;
    function State(input, options2) {
      this.input = input;
      this.filename = options2["filename"] || null;
      this.schema = options2["schema"] || DEFAULT_FULL_SCHEMA;
      this.onWarning = options2["onWarning"] || null;
      this.legacy = options2["legacy"] || false;
      this.json = options2["json"] || false;
      this.listener = options2["listener"] || null;
      this.implicitTypes = this.schema.compiledImplicit;
      this.typeMap = this.schema.compiledTypeMap;
      this.length = input.length;
      this.position = 0;
      this.line = 0;
      this.lineStart = 0;
      this.lineIndent = 0;
      this.documents = [];
    }
    function generateError(state, message) {
      return new YAMLException(
        message,
        new Mark(state.filename, state.input, state.position, state.line, state.position - state.lineStart)
      );
    }
    function throwError(state, message) {
      throw generateError(state, message);
    }
    function throwWarning(state, message) {
      if (state.onWarning) {
        state.onWarning.call(null, generateError(state, message));
      }
    }
    var directiveHandlers = {
      YAML: function handleYamlDirective(state, name, args) {
        var match, major, minor;
        if (state.version !== null) {
          throwError(state, "duplication of %YAML directive");
        }
        if (args.length !== 1) {
          throwError(state, "YAML directive accepts exactly one argument");
        }
        match = /^([0-9]+)\.([0-9]+)$/.exec(args[0]);
        if (match === null) {
          throwError(state, "ill-formed argument of the YAML directive");
        }
        major = parseInt(match[1], 10);
        minor = parseInt(match[2], 10);
        if (major !== 1) {
          throwError(state, "unacceptable YAML version of the document");
        }
        state.version = args[0];
        state.checkLineBreaks = minor < 2;
        if (minor !== 1 && minor !== 2) {
          throwWarning(state, "unsupported YAML version of the document");
        }
      },
      TAG: function handleTagDirective(state, name, args) {
        var handle, prefix;
        if (args.length !== 2) {
          throwError(state, "TAG directive accepts exactly two arguments");
        }
        handle = args[0];
        prefix = args[1];
        if (!PATTERN_TAG_HANDLE.test(handle)) {
          throwError(state, "ill-formed tag handle (first argument) of the TAG directive");
        }
        if (_hasOwnProperty.call(state.tagMap, handle)) {
          throwError(state, 'there is a previously declared suffix for "' + handle + '" tag handle');
        }
        if (!PATTERN_TAG_URI.test(prefix)) {
          throwError(state, "ill-formed tag prefix (second argument) of the TAG directive");
        }
        state.tagMap[handle] = prefix;
      }
    };
    function captureSegment(state, start, end, checkJson) {
      var _position, _length, _character, _result;
      if (start < end) {
        _result = state.input.slice(start, end);
        if (checkJson) {
          for (_position = 0, _length = _result.length; _position < _length; _position += 1) {
            _character = _result.charCodeAt(_position);
            if (!(_character === 9 || 32 <= _character && _character <= 1114111)) {
              throwError(state, "expected valid JSON character");
            }
          }
        } else if (PATTERN_NON_PRINTABLE.test(_result)) {
          throwError(state, "the stream contains non-printable characters");
        }
        state.result += _result;
      }
    }
    function mergeMappings(state, destination, source, overridableKeys) {
      var sourceKeys, key, index, quantity;
      if (!common.isObject(source)) {
        throwError(state, "cannot merge mappings; the provided source object is unacceptable");
      }
      sourceKeys = Object.keys(source);
      for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {
        key = sourceKeys[index];
        if (!_hasOwnProperty.call(destination, key)) {
          setProperty(destination, key, source[key]);
          overridableKeys[key] = true;
        }
      }
    }
    function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startPos) {
      var index, quantity;
      if (Array.isArray(keyNode)) {
        keyNode = Array.prototype.slice.call(keyNode);
        for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {
          if (Array.isArray(keyNode[index])) {
            throwError(state, "nested arrays are not supported inside keys");
          }
          if (typeof keyNode === "object" && _class(keyNode[index]) === "[object Object]") {
            keyNode[index] = "[object Object]";
          }
        }
      }
      if (typeof keyNode === "object" && _class(keyNode) === "[object Object]") {
        keyNode = "[object Object]";
      }
      keyNode = String(keyNode);
      if (_result === null) {
        _result = {};
      }
      if (keyTag === "tag:yaml.org,2002:merge") {
        if (Array.isArray(valueNode)) {
          for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {
            mergeMappings(state, _result, valueNode[index], overridableKeys);
          }
        } else {
          mergeMappings(state, _result, valueNode, overridableKeys);
        }
      } else {
        if (!state.json && !_hasOwnProperty.call(overridableKeys, keyNode) && _hasOwnProperty.call(_result, keyNode)) {
          state.line = startLine || state.line;
          state.position = startPos || state.position;
          throwError(state, "duplicated mapping key");
        }
        setProperty(_result, keyNode, valueNode);
        delete overridableKeys[keyNode];
      }
      return _result;
    }
    function readLineBreak(state) {
      var ch;
      ch = state.input.charCodeAt(state.position);
      if (ch === 10) {
        state.position++;
      } else if (ch === 13) {
        state.position++;
        if (state.input.charCodeAt(state.position) === 10) {
          state.position++;
        }
      } else {
        throwError(state, "a line break is expected");
      }
      state.line += 1;
      state.lineStart = state.position;
    }
    function skipSeparationSpace(state, allowComments, checkIndent) {
      var lineBreaks = 0, ch = state.input.charCodeAt(state.position);
      while (ch !== 0) {
        while (is_WHITE_SPACE(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        if (allowComments && ch === 35) {
          do {
            ch = state.input.charCodeAt(++state.position);
          } while (ch !== 10 && ch !== 13 && ch !== 0);
        }
        if (is_EOL(ch)) {
          readLineBreak(state);
          ch = state.input.charCodeAt(state.position);
          lineBreaks++;
          state.lineIndent = 0;
          while (ch === 32) {
            state.lineIndent++;
            ch = state.input.charCodeAt(++state.position);
          }
        } else {
          break;
        }
      }
      if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {
        throwWarning(state, "deficient indentation");
      }
      return lineBreaks;
    }
    function testDocumentSeparator(state) {
      var _position = state.position, ch;
      ch = state.input.charCodeAt(_position);
      if ((ch === 45 || ch === 46) && ch === state.input.charCodeAt(_position + 1) && ch === state.input.charCodeAt(_position + 2)) {
        _position += 3;
        ch = state.input.charCodeAt(_position);
        if (ch === 0 || is_WS_OR_EOL(ch)) {
          return true;
        }
      }
      return false;
    }
    function writeFoldedLines(state, count) {
      if (count === 1) {
        state.result += " ";
      } else if (count > 1) {
        state.result += common.repeat("\n", count - 1);
      }
    }
    function readPlainScalar(state, nodeIndent, withinFlowCollection) {
      var preceding, following, captureStart, captureEnd, hasPendingContent, _line, _lineStart, _lineIndent, _kind = state.kind, _result = state.result, ch;
      ch = state.input.charCodeAt(state.position);
      if (is_WS_OR_EOL(ch) || is_FLOW_INDICATOR(ch) || ch === 35 || ch === 38 || ch === 42 || ch === 33 || ch === 124 || ch === 62 || ch === 39 || ch === 34 || ch === 37 || ch === 64 || ch === 96) {
        return false;
      }
      if (ch === 63 || ch === 45) {
        following = state.input.charCodeAt(state.position + 1);
        if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
          return false;
        }
      }
      state.kind = "scalar";
      state.result = "";
      captureStart = captureEnd = state.position;
      hasPendingContent = false;
      while (ch !== 0) {
        if (ch === 58) {
          following = state.input.charCodeAt(state.position + 1);
          if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
            break;
          }
        } else if (ch === 35) {
          preceding = state.input.charCodeAt(state.position - 1);
          if (is_WS_OR_EOL(preceding)) {
            break;
          }
        } else if (state.position === state.lineStart && testDocumentSeparator(state) || withinFlowCollection && is_FLOW_INDICATOR(ch)) {
          break;
        } else if (is_EOL(ch)) {
          _line = state.line;
          _lineStart = state.lineStart;
          _lineIndent = state.lineIndent;
          skipSeparationSpace(state, false, -1);
          if (state.lineIndent >= nodeIndent) {
            hasPendingContent = true;
            ch = state.input.charCodeAt(state.position);
            continue;
          } else {
            state.position = captureEnd;
            state.line = _line;
            state.lineStart = _lineStart;
            state.lineIndent = _lineIndent;
            break;
          }
        }
        if (hasPendingContent) {
          captureSegment(state, captureStart, captureEnd, false);
          writeFoldedLines(state, state.line - _line);
          captureStart = captureEnd = state.position;
          hasPendingContent = false;
        }
        if (!is_WHITE_SPACE(ch)) {
          captureEnd = state.position + 1;
        }
        ch = state.input.charCodeAt(++state.position);
      }
      captureSegment(state, captureStart, captureEnd, false);
      if (state.result) {
        return true;
      }
      state.kind = _kind;
      state.result = _result;
      return false;
    }
    function readSingleQuotedScalar(state, nodeIndent) {
      var ch, captureStart, captureEnd;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 39) {
        return false;
      }
      state.kind = "scalar";
      state.result = "";
      state.position++;
      captureStart = captureEnd = state.position;
      while ((ch = state.input.charCodeAt(state.position)) !== 0) {
        if (ch === 39) {
          captureSegment(state, captureStart, state.position, true);
          ch = state.input.charCodeAt(++state.position);
          if (ch === 39) {
            captureStart = state.position;
            state.position++;
            captureEnd = state.position;
          } else {
            return true;
          }
        } else if (is_EOL(ch)) {
          captureSegment(state, captureStart, captureEnd, true);
          writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
          captureStart = captureEnd = state.position;
        } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
          throwError(state, "unexpected end of the document within a single quoted scalar");
        } else {
          state.position++;
          captureEnd = state.position;
        }
      }
      throwError(state, "unexpected end of the stream within a single quoted scalar");
    }
    function readDoubleQuotedScalar(state, nodeIndent) {
      var captureStart, captureEnd, hexLength, hexResult, tmp, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 34) {
        return false;
      }
      state.kind = "scalar";
      state.result = "";
      state.position++;
      captureStart = captureEnd = state.position;
      while ((ch = state.input.charCodeAt(state.position)) !== 0) {
        if (ch === 34) {
          captureSegment(state, captureStart, state.position, true);
          state.position++;
          return true;
        } else if (ch === 92) {
          captureSegment(state, captureStart, state.position, true);
          ch = state.input.charCodeAt(++state.position);
          if (is_EOL(ch)) {
            skipSeparationSpace(state, false, nodeIndent);
          } else if (ch < 256 && simpleEscapeCheck[ch]) {
            state.result += simpleEscapeMap[ch];
            state.position++;
          } else if ((tmp = escapedHexLen(ch)) > 0) {
            hexLength = tmp;
            hexResult = 0;
            for (; hexLength > 0; hexLength--) {
              ch = state.input.charCodeAt(++state.position);
              if ((tmp = fromHexCode(ch)) >= 0) {
                hexResult = (hexResult << 4) + tmp;
              } else {
                throwError(state, "expected hexadecimal character");
              }
            }
            state.result += charFromCodepoint(hexResult);
            state.position++;
          } else {
            throwError(state, "unknown escape sequence");
          }
          captureStart = captureEnd = state.position;
        } else if (is_EOL(ch)) {
          captureSegment(state, captureStart, captureEnd, true);
          writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
          captureStart = captureEnd = state.position;
        } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
          throwError(state, "unexpected end of the document within a double quoted scalar");
        } else {
          state.position++;
          captureEnd = state.position;
        }
      }
      throwError(state, "unexpected end of the stream within a double quoted scalar");
    }
    function readFlowCollection(state, nodeIndent) {
      var readNext = true, _line, _tag = state.tag, _result, _anchor = state.anchor, following, terminator, isPair, isExplicitPair, isMapping, overridableKeys = {}, keyNode, keyTag, valueNode, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch === 91) {
        terminator = 93;
        isMapping = false;
        _result = [];
      } else if (ch === 123) {
        terminator = 125;
        isMapping = true;
        _result = {};
      } else {
        return false;
      }
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = _result;
      }
      ch = state.input.charCodeAt(++state.position);
      while (ch !== 0) {
        skipSeparationSpace(state, true, nodeIndent);
        ch = state.input.charCodeAt(state.position);
        if (ch === terminator) {
          state.position++;
          state.tag = _tag;
          state.anchor = _anchor;
          state.kind = isMapping ? "mapping" : "sequence";
          state.result = _result;
          return true;
        } else if (!readNext) {
          throwError(state, "missed comma between flow collection entries");
        }
        keyTag = keyNode = valueNode = null;
        isPair = isExplicitPair = false;
        if (ch === 63) {
          following = state.input.charCodeAt(state.position + 1);
          if (is_WS_OR_EOL(following)) {
            isPair = isExplicitPair = true;
            state.position++;
            skipSeparationSpace(state, true, nodeIndent);
          }
        }
        _line = state.line;
        composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
        keyTag = state.tag;
        keyNode = state.result;
        skipSeparationSpace(state, true, nodeIndent);
        ch = state.input.charCodeAt(state.position);
        if ((isExplicitPair || state.line === _line) && ch === 58) {
          isPair = true;
          ch = state.input.charCodeAt(++state.position);
          skipSeparationSpace(state, true, nodeIndent);
          composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
          valueNode = state.result;
        }
        if (isMapping) {
          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode);
        } else if (isPair) {
          _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode));
        } else {
          _result.push(keyNode);
        }
        skipSeparationSpace(state, true, nodeIndent);
        ch = state.input.charCodeAt(state.position);
        if (ch === 44) {
          readNext = true;
          ch = state.input.charCodeAt(++state.position);
        } else {
          readNext = false;
        }
      }
      throwError(state, "unexpected end of the stream within a flow collection");
    }
    function readBlockScalar(state, nodeIndent) {
      var captureStart, folding, chomping = CHOMPING_CLIP, didReadContent = false, detectedIndent = false, textIndent = nodeIndent, emptyLines = 0, atMoreIndented = false, tmp, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch === 124) {
        folding = false;
      } else if (ch === 62) {
        folding = true;
      } else {
        return false;
      }
      state.kind = "scalar";
      state.result = "";
      while (ch !== 0) {
        ch = state.input.charCodeAt(++state.position);
        if (ch === 43 || ch === 45) {
          if (CHOMPING_CLIP === chomping) {
            chomping = ch === 43 ? CHOMPING_KEEP : CHOMPING_STRIP;
          } else {
            throwError(state, "repeat of a chomping mode identifier");
          }
        } else if ((tmp = fromDecimalCode(ch)) >= 0) {
          if (tmp === 0) {
            throwError(state, "bad explicit indentation width of a block scalar; it cannot be less than one");
          } else if (!detectedIndent) {
            textIndent = nodeIndent + tmp - 1;
            detectedIndent = true;
          } else {
            throwError(state, "repeat of an indentation width identifier");
          }
        } else {
          break;
        }
      }
      if (is_WHITE_SPACE(ch)) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (is_WHITE_SPACE(ch));
        if (ch === 35) {
          do {
            ch = state.input.charCodeAt(++state.position);
          } while (!is_EOL(ch) && ch !== 0);
        }
      }
      while (ch !== 0) {
        readLineBreak(state);
        state.lineIndent = 0;
        ch = state.input.charCodeAt(state.position);
        while ((!detectedIndent || state.lineIndent < textIndent) && ch === 32) {
          state.lineIndent++;
          ch = state.input.charCodeAt(++state.position);
        }
        if (!detectedIndent && state.lineIndent > textIndent) {
          textIndent = state.lineIndent;
        }
        if (is_EOL(ch)) {
          emptyLines++;
          continue;
        }
        if (state.lineIndent < textIndent) {
          if (chomping === CHOMPING_KEEP) {
            state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
          } else if (chomping === CHOMPING_CLIP) {
            if (didReadContent) {
              state.result += "\n";
            }
          }
          break;
        }
        if (folding) {
          if (is_WHITE_SPACE(ch)) {
            atMoreIndented = true;
            state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
          } else if (atMoreIndented) {
            atMoreIndented = false;
            state.result += common.repeat("\n", emptyLines + 1);
          } else if (emptyLines === 0) {
            if (didReadContent) {
              state.result += " ";
            }
          } else {
            state.result += common.repeat("\n", emptyLines);
          }
        } else {
          state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
        }
        didReadContent = true;
        detectedIndent = true;
        emptyLines = 0;
        captureStart = state.position;
        while (!is_EOL(ch) && ch !== 0) {
          ch = state.input.charCodeAt(++state.position);
        }
        captureSegment(state, captureStart, state.position, false);
      }
      return true;
    }
    function readBlockSequence(state, nodeIndent) {
      var _line, _tag = state.tag, _anchor = state.anchor, _result = [], following, detected = false, ch;
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = _result;
      }
      ch = state.input.charCodeAt(state.position);
      while (ch !== 0) {
        if (ch !== 45) {
          break;
        }
        following = state.input.charCodeAt(state.position + 1);
        if (!is_WS_OR_EOL(following)) {
          break;
        }
        detected = true;
        state.position++;
        if (skipSeparationSpace(state, true, -1)) {
          if (state.lineIndent <= nodeIndent) {
            _result.push(null);
            ch = state.input.charCodeAt(state.position);
            continue;
          }
        }
        _line = state.line;
        composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);
        _result.push(state.result);
        skipSeparationSpace(state, true, -1);
        ch = state.input.charCodeAt(state.position);
        if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
          throwError(state, "bad indentation of a sequence entry");
        } else if (state.lineIndent < nodeIndent) {
          break;
        }
      }
      if (detected) {
        state.tag = _tag;
        state.anchor = _anchor;
        state.kind = "sequence";
        state.result = _result;
        return true;
      }
      return false;
    }
    function readBlockMapping(state, nodeIndent, flowIndent) {
      var following, allowCompact, _line, _pos, _tag = state.tag, _anchor = state.anchor, _result = {}, overridableKeys = {}, keyTag = null, keyNode = null, valueNode = null, atExplicitKey = false, detected = false, ch;
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = _result;
      }
      ch = state.input.charCodeAt(state.position);
      while (ch !== 0) {
        following = state.input.charCodeAt(state.position + 1);
        _line = state.line;
        _pos = state.position;
        if ((ch === 63 || ch === 58) && is_WS_OR_EOL(following)) {
          if (ch === 63) {
            if (atExplicitKey) {
              storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);
              keyTag = keyNode = valueNode = null;
            }
            detected = true;
            atExplicitKey = true;
            allowCompact = true;
          } else if (atExplicitKey) {
            atExplicitKey = false;
            allowCompact = true;
          } else {
            throwError(state, "incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");
          }
          state.position += 1;
          ch = following;
        } else if (composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {
          if (state.line === _line) {
            ch = state.input.charCodeAt(state.position);
            while (is_WHITE_SPACE(ch)) {
              ch = state.input.charCodeAt(++state.position);
            }
            if (ch === 58) {
              ch = state.input.charCodeAt(++state.position);
              if (!is_WS_OR_EOL(ch)) {
                throwError(state, "a whitespace character is expected after the key-value separator within a block mapping");
              }
              if (atExplicitKey) {
                storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);
                keyTag = keyNode = valueNode = null;
              }
              detected = true;
              atExplicitKey = false;
              allowCompact = false;
              keyTag = state.tag;
              keyNode = state.result;
            } else if (detected) {
              throwError(state, "can not read an implicit mapping pair; a colon is missed");
            } else {
              state.tag = _tag;
              state.anchor = _anchor;
              return true;
            }
          } else if (detected) {
            throwError(state, "can not read a block mapping entry; a multiline key may not be an implicit key");
          } else {
            state.tag = _tag;
            state.anchor = _anchor;
            return true;
          }
        } else {
          break;
        }
        if (state.line === _line || state.lineIndent > nodeIndent) {
          if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {
            if (atExplicitKey) {
              keyNode = state.result;
            } else {
              valueNode = state.result;
            }
          }
          if (!atExplicitKey) {
            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _pos);
            keyTag = keyNode = valueNode = null;
          }
          skipSeparationSpace(state, true, -1);
          ch = state.input.charCodeAt(state.position);
        }
        if (state.lineIndent > nodeIndent && ch !== 0) {
          throwError(state, "bad indentation of a mapping entry");
        } else if (state.lineIndent < nodeIndent) {
          break;
        }
      }
      if (atExplicitKey) {
        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null);
      }
      if (detected) {
        state.tag = _tag;
        state.anchor = _anchor;
        state.kind = "mapping";
        state.result = _result;
      }
      return detected;
    }
    function readTagProperty(state) {
      var _position, isVerbatim = false, isNamed = false, tagHandle, tagName, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 33) return false;
      if (state.tag !== null) {
        throwError(state, "duplication of a tag property");
      }
      ch = state.input.charCodeAt(++state.position);
      if (ch === 60) {
        isVerbatim = true;
        ch = state.input.charCodeAt(++state.position);
      } else if (ch === 33) {
        isNamed = true;
        tagHandle = "!!";
        ch = state.input.charCodeAt(++state.position);
      } else {
        tagHandle = "!";
      }
      _position = state.position;
      if (isVerbatim) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (ch !== 0 && ch !== 62);
        if (state.position < state.length) {
          tagName = state.input.slice(_position, state.position);
          ch = state.input.charCodeAt(++state.position);
        } else {
          throwError(state, "unexpected end of the stream within a verbatim tag");
        }
      } else {
        while (ch !== 0 && !is_WS_OR_EOL(ch)) {
          if (ch === 33) {
            if (!isNamed) {
              tagHandle = state.input.slice(_position - 1, state.position + 1);
              if (!PATTERN_TAG_HANDLE.test(tagHandle)) {
                throwError(state, "named tag handle cannot contain such characters");
              }
              isNamed = true;
              _position = state.position + 1;
            } else {
              throwError(state, "tag suffix cannot contain exclamation marks");
            }
          }
          ch = state.input.charCodeAt(++state.position);
        }
        tagName = state.input.slice(_position, state.position);
        if (PATTERN_FLOW_INDICATORS.test(tagName)) {
          throwError(state, "tag suffix cannot contain flow indicator characters");
        }
      }
      if (tagName && !PATTERN_TAG_URI.test(tagName)) {
        throwError(state, "tag name cannot contain such characters: " + tagName);
      }
      if (isVerbatim) {
        state.tag = tagName;
      } else if (_hasOwnProperty.call(state.tagMap, tagHandle)) {
        state.tag = state.tagMap[tagHandle] + tagName;
      } else if (tagHandle === "!") {
        state.tag = "!" + tagName;
      } else if (tagHandle === "!!") {
        state.tag = "tag:yaml.org,2002:" + tagName;
      } else {
        throwError(state, 'undeclared tag handle "' + tagHandle + '"');
      }
      return true;
    }
    function readAnchorProperty(state) {
      var _position, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 38) return false;
      if (state.anchor !== null) {
        throwError(state, "duplication of an anchor property");
      }
      ch = state.input.charCodeAt(++state.position);
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (state.position === _position) {
        throwError(state, "name of an anchor node must contain at least one character");
      }
      state.anchor = state.input.slice(_position, state.position);
      return true;
    }
    function readAlias(state) {
      var _position, alias, ch;
      ch = state.input.charCodeAt(state.position);
      if (ch !== 42) return false;
      ch = state.input.charCodeAt(++state.position);
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (state.position === _position) {
        throwError(state, "name of an alias node must contain at least one character");
      }
      alias = state.input.slice(_position, state.position);
      if (!_hasOwnProperty.call(state.anchorMap, alias)) {
        throwError(state, 'unidentified alias "' + alias + '"');
      }
      state.result = state.anchorMap[alias];
      skipSeparationSpace(state, true, -1);
      return true;
    }
    function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {
      var allowBlockStyles, allowBlockScalars, allowBlockCollections, indentStatus = 1, atNewLine = false, hasContent = false, typeIndex, typeQuantity, type, flowIndent, blockIndent;
      if (state.listener !== null) {
        state.listener("open", state);
      }
      state.tag = null;
      state.anchor = null;
      state.kind = null;
      state.result = null;
      allowBlockStyles = allowBlockScalars = allowBlockCollections = CONTEXT_BLOCK_OUT === nodeContext || CONTEXT_BLOCK_IN === nodeContext;
      if (allowToSeek) {
        if (skipSeparationSpace(state, true, -1)) {
          atNewLine = true;
          if (state.lineIndent > parentIndent) {
            indentStatus = 1;
          } else if (state.lineIndent === parentIndent) {
            indentStatus = 0;
          } else if (state.lineIndent < parentIndent) {
            indentStatus = -1;
          }
        }
      }
      if (indentStatus === 1) {
        while (readTagProperty(state) || readAnchorProperty(state)) {
          if (skipSeparationSpace(state, true, -1)) {
            atNewLine = true;
            allowBlockCollections = allowBlockStyles;
            if (state.lineIndent > parentIndent) {
              indentStatus = 1;
            } else if (state.lineIndent === parentIndent) {
              indentStatus = 0;
            } else if (state.lineIndent < parentIndent) {
              indentStatus = -1;
            }
          } else {
            allowBlockCollections = false;
          }
        }
      }
      if (allowBlockCollections) {
        allowBlockCollections = atNewLine || allowCompact;
      }
      if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {
        if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {
          flowIndent = parentIndent;
        } else {
          flowIndent = parentIndent + 1;
        }
        blockIndent = state.position - state.lineStart;
        if (indentStatus === 1) {
          if (allowBlockCollections && (readBlockSequence(state, blockIndent) || readBlockMapping(state, blockIndent, flowIndent)) || readFlowCollection(state, flowIndent)) {
            hasContent = true;
          } else {
            if (allowBlockScalars && readBlockScalar(state, flowIndent) || readSingleQuotedScalar(state, flowIndent) || readDoubleQuotedScalar(state, flowIndent)) {
              hasContent = true;
            } else if (readAlias(state)) {
              hasContent = true;
              if (state.tag !== null || state.anchor !== null) {
                throwError(state, "alias node should not have any properties");
              }
            } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {
              hasContent = true;
              if (state.tag === null) {
                state.tag = "?";
              }
            }
            if (state.anchor !== null) {
              state.anchorMap[state.anchor] = state.result;
            }
          }
        } else if (indentStatus === 0) {
          hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);
        }
      }
      if (state.tag !== null && state.tag !== "!") {
        if (state.tag === "?") {
          if (state.result !== null && state.kind !== "scalar") {
            throwError(state, 'unacceptable node kind for !<?> tag; it should be "scalar", not "' + state.kind + '"');
          }
          for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {
            type = state.implicitTypes[typeIndex];
            if (type.resolve(state.result)) {
              state.result = type.construct(state.result);
              state.tag = type.tag;
              if (state.anchor !== null) {
                state.anchorMap[state.anchor] = state.result;
              }
              break;
            }
          }
        } else if (_hasOwnProperty.call(state.typeMap[state.kind || "fallback"], state.tag)) {
          type = state.typeMap[state.kind || "fallback"][state.tag];
          if (state.result !== null && type.kind !== state.kind) {
            throwError(state, "unacceptable node kind for !<" + state.tag + '> tag; it should be "' + type.kind + '", not "' + state.kind + '"');
          }
          if (!type.resolve(state.result)) {
            throwError(state, "cannot resolve a node with !<" + state.tag + "> explicit tag");
          } else {
            state.result = type.construct(state.result);
            if (state.anchor !== null) {
              state.anchorMap[state.anchor] = state.result;
            }
          }
        } else {
          throwError(state, "unknown tag !<" + state.tag + ">");
        }
      }
      if (state.listener !== null) {
        state.listener("close", state);
      }
      return state.tag !== null || state.anchor !== null || hasContent;
    }
    function readDocument(state) {
      var documentStart = state.position, _position, directiveName, directiveArgs, hasDirectives = false, ch;
      state.version = null;
      state.checkLineBreaks = state.legacy;
      state.tagMap = {};
      state.anchorMap = {};
      while ((ch = state.input.charCodeAt(state.position)) !== 0) {
        skipSeparationSpace(state, true, -1);
        ch = state.input.charCodeAt(state.position);
        if (state.lineIndent > 0 || ch !== 37) {
          break;
        }
        hasDirectives = true;
        ch = state.input.charCodeAt(++state.position);
        _position = state.position;
        while (ch !== 0 && !is_WS_OR_EOL(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        directiveName = state.input.slice(_position, state.position);
        directiveArgs = [];
        if (directiveName.length < 1) {
          throwError(state, "directive name must not be less than one character in length");
        }
        while (ch !== 0) {
          while (is_WHITE_SPACE(ch)) {
            ch = state.input.charCodeAt(++state.position);
          }
          if (ch === 35) {
            do {
              ch = state.input.charCodeAt(++state.position);
            } while (ch !== 0 && !is_EOL(ch));
            break;
          }
          if (is_EOL(ch)) break;
          _position = state.position;
          while (ch !== 0 && !is_WS_OR_EOL(ch)) {
            ch = state.input.charCodeAt(++state.position);
          }
          directiveArgs.push(state.input.slice(_position, state.position));
        }
        if (ch !== 0) readLineBreak(state);
        if (_hasOwnProperty.call(directiveHandlers, directiveName)) {
          directiveHandlers[directiveName](state, directiveName, directiveArgs);
        } else {
          throwWarning(state, 'unknown document directive "' + directiveName + '"');
        }
      }
      skipSeparationSpace(state, true, -1);
      if (state.lineIndent === 0 && state.input.charCodeAt(state.position) === 45 && state.input.charCodeAt(state.position + 1) === 45 && state.input.charCodeAt(state.position + 2) === 45) {
        state.position += 3;
        skipSeparationSpace(state, true, -1);
      } else if (hasDirectives) {
        throwError(state, "directives end mark is expected");
      }
      composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);
      skipSeparationSpace(state, true, -1);
      if (state.checkLineBreaks && PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {
        throwWarning(state, "non-ASCII line breaks are interpreted as content");
      }
      state.documents.push(state.result);
      if (state.position === state.lineStart && testDocumentSeparator(state)) {
        if (state.input.charCodeAt(state.position) === 46) {
          state.position += 3;
          skipSeparationSpace(state, true, -1);
        }
        return;
      }
      if (state.position < state.length - 1) {
        throwError(state, "end of the stream or a document separator is expected");
      } else {
        return;
      }
    }
    function loadDocuments(input, options2) {
      input = String(input);
      options2 = options2 || {};
      if (input.length !== 0) {
        if (input.charCodeAt(input.length - 1) !== 10 && input.charCodeAt(input.length - 1) !== 13) {
          input += "\n";
        }
        if (input.charCodeAt(0) === 65279) {
          input = input.slice(1);
        }
      }
      var state = new State(input, options2);
      var nullpos = input.indexOf("\0");
      if (nullpos !== -1) {
        state.position = nullpos;
        throwError(state, "null byte is not allowed in input");
      }
      state.input += "\0";
      while (state.input.charCodeAt(state.position) === 32) {
        state.lineIndent += 1;
        state.position += 1;
      }
      while (state.position < state.length - 1) {
        readDocument(state);
      }
      return state.documents;
    }
    function loadAll(input, iterator, options2) {
      if (iterator !== null && typeof iterator === "object" && typeof options2 === "undefined") {
        options2 = iterator;
        iterator = null;
      }
      var documents = loadDocuments(input, options2);
      if (typeof iterator !== "function") {
        return documents;
      }
      for (var index = 0, length = documents.length; index < length; index += 1) {
        iterator(documents[index]);
      }
    }
    function load(input, options2) {
      var documents = loadDocuments(input, options2);
      if (documents.length === 0) {
        return void 0;
      } else if (documents.length === 1) {
        return documents[0];
      }
      throw new YAMLException("expected a single document in the stream, but found more");
    }
    function safeLoadAll(input, iterator, options2) {
      if (typeof iterator === "object" && iterator !== null && typeof options2 === "undefined") {
        options2 = iterator;
        iterator = null;
      }
      return loadAll(input, iterator, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options2));
    }
    function safeLoad(input, options2) {
      return load(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options2));
    }
    module2.exports.loadAll = loadAll;
    module2.exports.load = load;
    module2.exports.safeLoadAll = safeLoadAll;
    module2.exports.safeLoad = safeLoad;
  }
});

// node_modules/js-yaml/lib/js-yaml/dumper.js
var require_dumper = __commonJS({
  "node_modules/js-yaml/lib/js-yaml/dumper.js"(exports2, module2) {
    "use strict";
    var common = require_common();
    var YAMLException = require_exception();
    var DEFAULT_FULL_SCHEMA = require_default_full();
    var DEFAULT_SAFE_SCHEMA = require_default_safe();
    var _toString = Object.prototype.toString;
    var _hasOwnProperty = Object.prototype.hasOwnProperty;
    var CHAR_TAB = 9;
    var CHAR_LINE_FEED = 10;
    var CHAR_CARRIAGE_RETURN = 13;
    var CHAR_SPACE = 32;
    var CHAR_EXCLAMATION = 33;
    var CHAR_DOUBLE_QUOTE = 34;
    var CHAR_SHARP = 35;
    var CHAR_PERCENT = 37;
    var CHAR_AMPERSAND = 38;
    var CHAR_SINGLE_QUOTE = 39;
    var CHAR_ASTERISK = 42;
    var CHAR_COMMA = 44;
    var CHAR_MINUS = 45;
    var CHAR_COLON = 58;
    var CHAR_EQUALS = 61;
    var CHAR_GREATER_THAN = 62;
    var CHAR_QUESTION = 63;
    var CHAR_COMMERCIAL_AT = 64;
    var CHAR_LEFT_SQUARE_BRACKET = 91;
    var CHAR_RIGHT_SQUARE_BRACKET = 93;
    var CHAR_GRAVE_ACCENT = 96;
    var CHAR_LEFT_CURLY_BRACKET = 123;
    var CHAR_VERTICAL_LINE = 124;
    var CHAR_RIGHT_CURLY_BRACKET = 125;
    var ESCAPE_SEQUENCES = {};
    ESCAPE_SEQUENCES[0] = "\\0";
    ESCAPE_SEQUENCES[7] = "\\a";
    ESCAPE_SEQUENCES[8] = "\\b";
    ESCAPE_SEQUENCES[9] = "\\t";
    ESCAPE_SEQUENCES[10] = "\\n";
    ESCAPE_SEQUENCES[11] = "\\v";
    ESCAPE_SEQUENCES[12] = "\\f";
    ESCAPE_SEQUENCES[13] = "\\r";
    ESCAPE_SEQUENCES[27] = "\\e";
    ESCAPE_SEQUENCES[34] = '\\"';
    ESCAPE_SEQUENCES[92] = "\\\\";
    ESCAPE_SEQUENCES[133] = "\\N";
    ESCAPE_SEQUENCES[160] = "\\_";
    ESCAPE_SEQUENCES[8232] = "\\L";
    ESCAPE_SEQUENCES[8233] = "\\P";
    var DEPRECATED_BOOLEANS_SYNTAX = [
      "y",
      "Y",
      "yes",
      "Yes",
      "YES",
      "on",
      "On",
      "ON",
      "n",
      "N",
      "no",
      "No",
      "NO",
      "off",
      "Off",
      "OFF"
    ];
    function compileStyleMap(schema, map) {
      var result, keys, index, length, tag, style, type;
      if (map === null) return {};
      result = {};
      keys = Object.keys(map);
      for (index = 0, length = keys.length; index < length; index += 1) {
        tag = keys[index];
        style = String(map[tag]);
        if (tag.slice(0, 2) === "!!") {
          tag = "tag:yaml.org,2002:" + tag.slice(2);
        }
        type = schema.compiledTypeMap["fallback"][tag];
        if (type && _hasOwnProperty.call(type.styleAliases, style)) {
          style = type.styleAliases[style];
        }
        result[tag] = style;
      }
      return result;
    }
    function encodeHex(character) {
      var string, handle, length;
      string = character.toString(16).toUpperCase();
      if (character <= 255) {
        handle = "x";
        length = 2;
      } else if (character <= 65535) {
        handle = "u";
        length = 4;
      } else if (character <= 4294967295) {
        handle = "U";
        length = 8;
      } else {
        throw new YAMLException("code point within a string may not be greater than 0xFFFFFFFF");
      }
      return "\\" + handle + common.repeat("0", length - string.length) + string;
    }
    function State(options2) {
      this.schema = options2["schema"] || DEFAULT_FULL_SCHEMA;
      this.indent = Math.max(1, options2["indent"] || 2);
      this.noArrayIndent = options2["noArrayIndent"] || false;
      this.skipInvalid = options2["skipInvalid"] || false;
      this.flowLevel = common.isNothing(options2["flowLevel"]) ? -1 : options2["flowLevel"];
      this.styleMap = compileStyleMap(this.schema, options2["styles"] || null);
      this.sortKeys = options2["sortKeys"] || false;
      this.lineWidth = options2["lineWidth"] || 80;
      this.noRefs = options2["noRefs"] || false;
      this.noCompatMode = options2["noCompatMode"] || false;
      this.condenseFlow = options2["condenseFlow"] || false;
      this.implicitTypes = this.schema.compiledImplicit;
      this.explicitTypes = this.schema.compiledExplicit;
      this.tag = null;
      this.result = "";
      this.duplicates = [];
      this.usedDuplicates = null;
    }
    function indentString(string, spaces) {
      var ind = common.repeat(" ", spaces), position = 0, next = -1, result = "", line, length = string.length;
      while (position < length) {
        next = string.indexOf("\n", position);
        if (next === -1) {
          line = string.slice(position);
          position = length;
        } else {
          line = string.slice(position, next + 1);
          position = next + 1;
        }
        if (line.length && line !== "\n") result += ind;
        result += line;
      }
      return result;
    }
    function generateNextLine(state, level) {
      return "\n" + common.repeat(" ", state.indent * level);
    }
    function testImplicitResolving(state, str2) {
      var index, length, type;
      for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {
        type = state.implicitTypes[index];
        if (type.resolve(str2)) {
          return true;
        }
      }
      return false;
    }
    function isWhitespace(c) {
      return c === CHAR_SPACE || c === CHAR_TAB;
    }
    function isPrintable(c) {
      return 32 <= c && c <= 126 || 161 <= c && c <= 55295 && c !== 8232 && c !== 8233 || 57344 <= c && c <= 65533 && c !== 65279 || 65536 <= c && c <= 1114111;
    }
    function isNsChar(c) {
      return isPrintable(c) && !isWhitespace(c) && c !== 65279 && c !== CHAR_CARRIAGE_RETURN && c !== CHAR_LINE_FEED;
    }
    function isPlainSafe(c, prev) {
      return isPrintable(c) && c !== 65279 && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_COLON && (c !== CHAR_SHARP || prev && isNsChar(prev));
    }
    function isPlainSafeFirst(c) {
      return isPrintable(c) && c !== 65279 && !isWhitespace(c) && c !== CHAR_MINUS && c !== CHAR_QUESTION && c !== CHAR_COLON && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_SHARP && c !== CHAR_AMPERSAND && c !== CHAR_ASTERISK && c !== CHAR_EXCLAMATION && c !== CHAR_VERTICAL_LINE && c !== CHAR_EQUALS && c !== CHAR_GREATER_THAN && c !== CHAR_SINGLE_QUOTE && c !== CHAR_DOUBLE_QUOTE && c !== CHAR_PERCENT && c !== CHAR_COMMERCIAL_AT && c !== CHAR_GRAVE_ACCENT;
    }
    function needIndentIndicator(string) {
      var leadingSpaceRe = /^\n* /;
      return leadingSpaceRe.test(string);
    }
    var STYLE_PLAIN = 1;
    var STYLE_SINGLE = 2;
    var STYLE_LITERAL = 3;
    var STYLE_FOLDED = 4;
    var STYLE_DOUBLE = 5;
    function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType) {
      var i;
      var char, prev_char;
      var hasLineBreak = false;
      var hasFoldableLine = false;
      var shouldTrackWidth = lineWidth !== -1;
      var previousLineBreak = -1;
      var plain = isPlainSafeFirst(string.charCodeAt(0)) && !isWhitespace(string.charCodeAt(string.length - 1));
      if (singleLineOnly) {
        for (i = 0; i < string.length; i++) {
          char = string.charCodeAt(i);
          if (!isPrintable(char)) {
            return STYLE_DOUBLE;
          }
          prev_char = i > 0 ? string.charCodeAt(i - 1) : null;
          plain = plain && isPlainSafe(char, prev_char);
        }
      } else {
        for (i = 0; i < string.length; i++) {
          char = string.charCodeAt(i);
          if (char === CHAR_LINE_FEED) {
            hasLineBreak = true;
            if (shouldTrackWidth) {
              hasFoldableLine = hasFoldableLine || // Foldable line = too long, and not more-indented.
              i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ";
              previousLineBreak = i;
            }
          } else if (!isPrintable(char)) {
            return STYLE_DOUBLE;
          }
          prev_char = i > 0 ? string.charCodeAt(i - 1) : null;
          plain = plain && isPlainSafe(char, prev_char);
        }
        hasFoldableLine = hasFoldableLine || shouldTrackWidth && (i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ");
      }
      if (!hasLineBreak && !hasFoldableLine) {
        return plain && !testAmbiguousType(string) ? STYLE_PLAIN : STYLE_SINGLE;
      }
      if (indentPerLevel > 9 && needIndentIndicator(string)) {
        return STYLE_DOUBLE;
      }
      return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;
    }
    function writeScalar(state, string, level, iskey) {
      state.dump = (function() {
        if (string.length === 0) {
          return "''";
        }
        if (!state.noCompatMode && DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1) {
          return "'" + string + "'";
        }
        var indent = state.indent * Math.max(1, level);
        var lineWidth = state.lineWidth === -1 ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);
        var singleLineOnly = iskey || state.flowLevel > -1 && level >= state.flowLevel;
        function testAmbiguity(string2) {
          return testImplicitResolving(state, string2);
        }
        switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth, testAmbiguity)) {
          case STYLE_PLAIN:
            return string;
          case STYLE_SINGLE:
            return "'" + string.replace(/'/g, "''") + "'";
          case STYLE_LITERAL:
            return "|" + blockHeader(string, state.indent) + dropEndingNewline(indentString(string, indent));
          case STYLE_FOLDED:
            return ">" + blockHeader(string, state.indent) + dropEndingNewline(indentString(foldString(string, lineWidth), indent));
          case STYLE_DOUBLE:
            return '"' + escapeString(string, lineWidth) + '"';
          default:
            throw new YAMLException("impossible error: invalid scalar style");
        }
      })();
    }
    function blockHeader(string, indentPerLevel) {
      var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : "";
      var clip = string[string.length - 1] === "\n";
      var keep = clip && (string[string.length - 2] === "\n" || string === "\n");
      var chomp = keep ? "+" : clip ? "" : "-";
      return indentIndicator + chomp + "\n";
    }
    function dropEndingNewline(string) {
      return string[string.length - 1] === "\n" ? string.slice(0, -1) : string;
    }
    function foldString(string, width) {
      var lineRe = /(\n+)([^\n]*)/g;
      var result = (function() {
        var nextLF = string.indexOf("\n");
        nextLF = nextLF !== -1 ? nextLF : string.length;
        lineRe.lastIndex = nextLF;
        return foldLine(string.slice(0, nextLF), width);
      })();
      var prevMoreIndented = string[0] === "\n" || string[0] === " ";
      var moreIndented;
      var match;
      while (match = lineRe.exec(string)) {
        var prefix = match[1], line = match[2];
        moreIndented = line[0] === " ";
        result += prefix + (!prevMoreIndented && !moreIndented && line !== "" ? "\n" : "") + foldLine(line, width);
        prevMoreIndented = moreIndented;
      }
      return result;
    }
    function foldLine(line, width) {
      if (line === "" || line[0] === " ") return line;
      var breakRe = / [^ ]/g;
      var match;
      var start = 0, end, curr = 0, next = 0;
      var result = "";
      while (match = breakRe.exec(line)) {
        next = match.index;
        if (next - start > width) {
          end = curr > start ? curr : next;
          result += "\n" + line.slice(start, end);
          start = end + 1;
        }
        curr = next;
      }
      result += "\n";
      if (line.length - start > width && curr > start) {
        result += line.slice(start, curr) + "\n" + line.slice(curr + 1);
      } else {
        result += line.slice(start);
      }
      return result.slice(1);
    }
    function escapeString(string) {
      var result = "";
      var char, nextChar;
      var escapeSeq;
      for (var i = 0; i < string.length; i++) {
        char = string.charCodeAt(i);
        if (char >= 55296 && char <= 56319) {
          nextChar = string.charCodeAt(i + 1);
          if (nextChar >= 56320 && nextChar <= 57343) {
            result += encodeHex((char - 55296) * 1024 + nextChar - 56320 + 65536);
            i++;
            continue;
          }
        }
        escapeSeq = ESCAPE_SEQUENCES[char];
        result += !escapeSeq && isPrintable(char) ? string[i] : escapeSeq || encodeHex(char);
      }
      return result;
    }
    function writeFlowSequence(state, level, object) {
      var _result = "", _tag = state.tag, index, length;
      for (index = 0, length = object.length; index < length; index += 1) {
        if (writeNode(state, level, object[index], false, false)) {
          if (index !== 0) _result += "," + (!state.condenseFlow ? " " : "");
          _result += state.dump;
        }
      }
      state.tag = _tag;
      state.dump = "[" + _result + "]";
    }
    function writeBlockSequence(state, level, object, compact) {
      var _result = "", _tag = state.tag, index, length;
      for (index = 0, length = object.length; index < length; index += 1) {
        if (writeNode(state, level + 1, object[index], true, true)) {
          if (!compact || index !== 0) {
            _result += generateNextLine(state, level);
          }
          if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
            _result += "-";
          } else {
            _result += "- ";
          }
          _result += state.dump;
        }
      }
      state.tag = _tag;
      state.dump = _result || "[]";
    }
    function writeFlowMapping(state, level, object) {
      var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, pairBuffer;
      for (index = 0, length = objectKeyList.length; index < length; index += 1) {
        pairBuffer = "";
        if (index !== 0) pairBuffer += ", ";
        if (state.condenseFlow) pairBuffer += '"';
        objectKey = objectKeyList[index];
        objectValue = object[objectKey];
        if (!writeNode(state, level, objectKey, false, false)) {
          continue;
        }
        if (state.dump.length > 1024) pairBuffer += "? ";
        pairBuffer += state.dump + (state.condenseFlow ? '"' : "") + ":" + (state.condenseFlow ? "" : " ");
        if (!writeNode(state, level, objectValue, false, false)) {
          continue;
        }
        pairBuffer += state.dump;
        _result += pairBuffer;
      }
      state.tag = _tag;
      state.dump = "{" + _result + "}";
    }
    function writeBlockMapping(state, level, object, compact) {
      var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, explicitPair, pairBuffer;
      if (state.sortKeys === true) {
        objectKeyList.sort();
      } else if (typeof state.sortKeys === "function") {
        objectKeyList.sort(state.sortKeys);
      } else if (state.sortKeys) {
        throw new YAMLException("sortKeys must be a boolean or a function");
      }
      for (index = 0, length = objectKeyList.length; index < length; index += 1) {
        pairBuffer = "";
        if (!compact || index !== 0) {
          pairBuffer += generateNextLine(state, level);
        }
        objectKey = objectKeyList[index];
        objectValue = object[objectKey];
        if (!writeNode(state, level + 1, objectKey, true, true, true)) {
          continue;
        }
        explicitPair = state.tag !== null && state.tag !== "?" || state.dump && state.dump.length > 1024;
        if (explicitPair) {
          if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
            pairBuffer += "?";
          } else {
            pairBuffer += "? ";
          }
        }
        pairBuffer += state.dump;
        if (explicitPair) {
          pairBuffer += generateNextLine(state, level);
        }
        if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {
          continue;
        }
        if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
          pairBuffer += ":";
        } else {
          pairBuffer += ": ";
        }
        pairBuffer += state.dump;
        _result += pairBuffer;
      }
      state.tag = _tag;
      state.dump = _result || "{}";
    }
    function detectType(state, object, explicit) {
      var _result, typeList, index, length, type, style;
      typeList = explicit ? state.explicitTypes : state.implicitTypes;
      for (index = 0, length = typeList.length; index < length; index += 1) {
        type = typeList[index];
        if ((type.instanceOf || type.predicate) && (!type.instanceOf || typeof object === "object" && object instanceof type.instanceOf) && (!type.predicate || type.predicate(object))) {
          state.tag = explicit ? type.tag : "?";
          if (type.represent) {
            style = state.styleMap[type.tag] || type.defaultStyle;
            if (_toString.call(type.represent) === "[object Function]") {
              _result = type.represent(object, style);
            } else if (_hasOwnProperty.call(type.represent, style)) {
              _result = type.represent[style](object, style);
            } else {
              throw new YAMLException("!<" + type.tag + '> tag resolver accepts not "' + style + '" style');
            }
            state.dump = _result;
          }
          return true;
        }
      }
      return false;
    }
    function writeNode(state, level, object, block, compact, iskey) {
      state.tag = null;
      state.dump = object;
      if (!detectType(state, object, false)) {
        detectType(state, object, true);
      }
      var type = _toString.call(state.dump);
      if (block) {
        block = state.flowLevel < 0 || state.flowLevel > level;
      }
      var objectOrArray = type === "[object Object]" || type === "[object Array]", duplicateIndex, duplicate;
      if (objectOrArray) {
        duplicateIndex = state.duplicates.indexOf(object);
        duplicate = duplicateIndex !== -1;
      }
      if (state.tag !== null && state.tag !== "?" || duplicate || state.indent !== 2 && level > 0) {
        compact = false;
      }
      if (duplicate && state.usedDuplicates[duplicateIndex]) {
        state.dump = "*ref_" + duplicateIndex;
      } else {
        if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {
          state.usedDuplicates[duplicateIndex] = true;
        }
        if (type === "[object Object]") {
          if (block && Object.keys(state.dump).length !== 0) {
            writeBlockMapping(state, level, state.dump, compact);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + state.dump;
            }
          } else {
            writeFlowMapping(state, level, state.dump);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + " " + state.dump;
            }
          }
        } else if (type === "[object Array]") {
          var arrayLevel = state.noArrayIndent && level > 0 ? level - 1 : level;
          if (block && state.dump.length !== 0) {
            writeBlockSequence(state, arrayLevel, state.dump, compact);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + state.dump;
            }
          } else {
            writeFlowSequence(state, arrayLevel, state.dump);
            if (duplicate) {
              state.dump = "&ref_" + duplicateIndex + " " + state.dump;
            }
          }
        } else if (type === "[object String]") {
          if (state.tag !== "?") {
            writeScalar(state, state.dump, level, iskey);
          }
        } else {
          if (state.skipInvalid) return false;
          throw new YAMLException("unacceptable kind of an object to dump " + type);
        }
        if (state.tag !== null && state.tag !== "?") {
          state.dump = "!<" + state.tag + "> " + state.dump;
        }
      }
      return true;
    }
    function getDuplicateReferences(object, state) {
      var objects = [], duplicatesIndexes = [], index, length;
      inspectNode(object, objects, duplicatesIndexes);
      for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {
        state.duplicates.push(objects[duplicatesIndexes[index]]);
      }
      state.usedDuplicates = new Array(length);
    }
    function inspectNode(object, objects, duplicatesIndexes) {
      var objectKeyList, index, length;
      if (object !== null && typeof object === "object") {
        index = objects.indexOf(object);
        if (index !== -1) {
          if (duplicatesIndexes.indexOf(index) === -1) {
            duplicatesIndexes.push(index);
          }
        } else {
          objects.push(object);
          if (Array.isArray(object)) {
            for (index = 0, length = object.length; index < length; index += 1) {
              inspectNode(object[index], objects, duplicatesIndexes);
            }
          } else {
            objectKeyList = Object.keys(object);
            for (index = 0, length = objectKeyList.length; index < length; index += 1) {
              inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);
            }
          }
        }
      }
    }
    function dump(input, options2) {
      options2 = options2 || {};
      var state = new State(options2);
      if (!state.noRefs) getDuplicateReferences(input, state);
      if (writeNode(state, 0, input, true, true)) return state.dump + "\n";
      return "";
    }
    function safeDump(input, options2) {
      return dump(input, common.extend({ schema: DEFAULT_SAFE_SCHEMA }, options2));
    }
    module2.exports.dump = dump;
    module2.exports.safeDump = safeDump;
  }
});

// node_modules/js-yaml/lib/js-yaml.js
var require_js_yaml = __commonJS({
  "node_modules/js-yaml/lib/js-yaml.js"(exports2, module2) {
    "use strict";
    var loader = require_loader();
    var dumper = require_dumper();
    function deprecated(name) {
      return function() {
        throw new Error("Function " + name + " is deprecated and cannot be used.");
      };
    }
    module2.exports.Type = require_type();
    module2.exports.Schema = require_schema();
    module2.exports.FAILSAFE_SCHEMA = require_failsafe();
    module2.exports.JSON_SCHEMA = require_json();
    module2.exports.CORE_SCHEMA = require_core();
    module2.exports.DEFAULT_SAFE_SCHEMA = require_default_safe();
    module2.exports.DEFAULT_FULL_SCHEMA = require_default_full();
    module2.exports.load = loader.load;
    module2.exports.loadAll = loader.loadAll;
    module2.exports.safeLoad = loader.safeLoad;
    module2.exports.safeLoadAll = loader.safeLoadAll;
    module2.exports.dump = dumper.dump;
    module2.exports.safeDump = dumper.safeDump;
    module2.exports.YAMLException = require_exception();
    module2.exports.MINIMAL_SCHEMA = require_failsafe();
    module2.exports.SAFE_SCHEMA = require_default_safe();
    module2.exports.DEFAULT_SCHEMA = require_default_full();
    module2.exports.scan = deprecated("scan");
    module2.exports.parse = deprecated("parse");
    module2.exports.compose = deprecated("compose");
    module2.exports.addConstructor = deprecated("addConstructor");
  }
});

// node_modules/js-yaml/index.js
var require_js_yaml2 = __commonJS({
  "node_modules/js-yaml/index.js"(exports2, module2) {
    "use strict";
    var yaml2 = require_js_yaml();
    module2.exports = yaml2;
  }
});

// node_modules/gray-matter/lib/engines.js
var require_engines = __commonJS({
  "node_modules/gray-matter/lib/engines.js"(exports, module) {
    "use strict";
    var yaml = require_js_yaml2();
    var engines = exports = module.exports;
    engines.yaml = {
      parse: yaml.safeLoad.bind(yaml),
      stringify: yaml.safeDump.bind(yaml)
    };
    engines.json = {
      parse: JSON.parse.bind(JSON),
      stringify: function(obj, options2) {
        const opts = Object.assign({ replacer: null, space: 2 }, options2);
        return JSON.stringify(obj, opts.replacer, opts.space);
      }
    };
    engines.javascript = {
      parse: function parse(str, options, wrap) {
        try {
          if (wrap !== false) {
            str = "(function() {\nreturn " + str.trim() + ";\n}());";
          }
          return eval(str) || {};
        } catch (err) {
          if (wrap !== false && /(unexpected|identifier)/i.test(err.message)) {
            return parse(str, options, false);
          }
          throw new SyntaxError(err);
        }
      },
      stringify: function() {
        throw new Error("stringifying JavaScript is not supported");
      }
    };
  }
});

// node_modules/strip-bom-string/index.js
var require_strip_bom_string = __commonJS({
  "node_modules/strip-bom-string/index.js"(exports2, module2) {
    "use strict";
    module2.exports = function(str2) {
      if (typeof str2 === "string" && str2.charAt(0) === "\uFEFF") {
        return str2.slice(1);
      }
      return str2;
    };
  }
});

// node_modules/gray-matter/lib/utils.js
var require_utils = __commonJS({
  "node_modules/gray-matter/lib/utils.js"(exports2) {
    "use strict";
    var stripBom = require_strip_bom_string();
    var typeOf = require_kind_of();
    exports2.define = function(obj, key, val) {
      Reflect.defineProperty(obj, key, {
        enumerable: false,
        configurable: true,
        writable: true,
        value: val
      });
    };
    exports2.isBuffer = function(val) {
      return typeOf(val) === "buffer";
    };
    exports2.isObject = function(val) {
      return typeOf(val) === "object";
    };
    exports2.toBuffer = function(input) {
      return typeof input === "string" ? Buffer.from(input) : input;
    };
    exports2.toString = function(input) {
      if (exports2.isBuffer(input)) return stripBom(String(input));
      if (typeof input !== "string") {
        throw new TypeError("expected input to be a string or buffer");
      }
      return stripBom(input);
    };
    exports2.arrayify = function(val) {
      return val ? Array.isArray(val) ? val : [val] : [];
    };
    exports2.startsWith = function(str2, substr, len) {
      if (typeof len !== "number") len = substr.length;
      return str2.slice(0, len) === substr;
    };
  }
});

// node_modules/gray-matter/lib/defaults.js
var require_defaults = __commonJS({
  "node_modules/gray-matter/lib/defaults.js"(exports2, module2) {
    "use strict";
    var engines2 = require_engines();
    var utils = require_utils();
    module2.exports = function(options2) {
      const opts = Object.assign({}, options2);
      opts.delimiters = utils.arrayify(opts.delims || opts.delimiters || "---");
      if (opts.delimiters.length === 1) {
        opts.delimiters.push(opts.delimiters[0]);
      }
      opts.language = (opts.language || opts.lang || "yaml").toLowerCase();
      opts.engines = Object.assign({}, engines2, opts.parsers, opts.engines);
      return opts;
    };
  }
});

// node_modules/gray-matter/lib/engine.js
var require_engine = __commonJS({
  "node_modules/gray-matter/lib/engine.js"(exports2, module2) {
    "use strict";
    module2.exports = function(name, options2) {
      let engine = options2.engines[name] || options2.engines[aliase(name)];
      if (typeof engine === "undefined") {
        throw new Error('gray-matter engine "' + name + '" is not registered');
      }
      if (typeof engine === "function") {
        engine = { parse: engine };
      }
      return engine;
    };
    function aliase(name) {
      switch (name.toLowerCase()) {
        case "js":
        case "javascript":
          return "javascript";
        case "coffee":
        case "coffeescript":
        case "cson":
          return "coffee";
        case "yaml":
        case "yml":
          return "yaml";
        default: {
          return name;
        }
      }
    }
  }
});

// node_modules/gray-matter/lib/stringify.js
var require_stringify = __commonJS({
  "node_modules/gray-matter/lib/stringify.js"(exports2, module2) {
    "use strict";
    var typeOf = require_kind_of();
    var getEngine = require_engine();
    var defaults = require_defaults();
    module2.exports = function(file, data, options2) {
      if (data == null && options2 == null) {
        switch (typeOf(file)) {
          case "object":
            data = file.data;
            options2 = {};
            break;
          case "string":
            return file;
          default: {
            throw new TypeError("expected file to be a string or object");
          }
        }
      }
      const str2 = file.content;
      const opts = defaults(options2);
      if (data == null) {
        if (!opts.data) return file;
        data = opts.data;
      }
      const language = file.language || opts.language;
      const engine = getEngine(language, opts);
      if (typeof engine.stringify !== "function") {
        throw new TypeError('expected "' + language + '.stringify" to be a function');
      }
      data = Object.assign({}, file.data, data);
      const open = opts.delimiters[0];
      const close = opts.delimiters[1];
      const matter2 = engine.stringify(data, options2).trim();
      let buf = "";
      if (matter2 !== "{}") {
        buf = newline(open) + newline(matter2) + newline(close);
      }
      if (typeof file.excerpt === "string" && file.excerpt !== "") {
        if (str2.indexOf(file.excerpt.trim()) === -1) {
          buf += newline(file.excerpt) + newline(close);
        }
      }
      return buf + newline(str2);
    };
    function newline(str2) {
      return str2.slice(-1) !== "\n" ? str2 + "\n" : str2;
    }
  }
});

// node_modules/gray-matter/lib/excerpt.js
var require_excerpt = __commonJS({
  "node_modules/gray-matter/lib/excerpt.js"(exports2, module2) {
    "use strict";
    var defaults = require_defaults();
    module2.exports = function(file, options2) {
      const opts = defaults(options2);
      if (file.data == null) {
        file.data = {};
      }
      if (typeof opts.excerpt === "function") {
        return opts.excerpt(file, opts);
      }
      const sep = file.data.excerpt_separator || opts.excerpt_separator;
      if (sep == null && (opts.excerpt === false || opts.excerpt == null)) {
        return file;
      }
      const delimiter = typeof opts.excerpt === "string" ? opts.excerpt : sep || opts.delimiters[0];
      const idx = file.content.indexOf(delimiter);
      if (idx !== -1) {
        file.excerpt = file.content.slice(0, idx);
      }
      return file;
    };
  }
});

// node_modules/gray-matter/lib/to-file.js
var require_to_file = __commonJS({
  "node_modules/gray-matter/lib/to-file.js"(exports2, module2) {
    "use strict";
    var typeOf = require_kind_of();
    var stringify = require_stringify();
    var utils = require_utils();
    module2.exports = function(file) {
      if (typeOf(file) !== "object") {
        file = { content: file };
      }
      if (typeOf(file.data) !== "object") {
        file.data = {};
      }
      if (file.contents && file.content == null) {
        file.content = file.contents;
      }
      utils.define(file, "orig", utils.toBuffer(file.content));
      utils.define(file, "language", file.language || "");
      utils.define(file, "matter", file.matter || "");
      utils.define(file, "stringify", function(data, options2) {
        if (options2 && options2.language) {
          file.language = options2.language;
        }
        return stringify(file, data, options2);
      });
      file.content = utils.toString(file.content);
      file.isEmpty = false;
      file.excerpt = "";
      return file;
    };
  }
});

// node_modules/gray-matter/lib/parse.js
var require_parse = __commonJS({
  "node_modules/gray-matter/lib/parse.js"(exports2, module2) {
    "use strict";
    var getEngine = require_engine();
    var defaults = require_defaults();
    module2.exports = function(language, str2, options2) {
      const opts = defaults(options2);
      const engine = getEngine(language, opts);
      if (typeof engine.parse !== "function") {
        throw new TypeError('expected "' + language + '.parse" to be a function');
      }
      return engine.parse(str2, opts);
    };
  }
});

// node_modules/gray-matter/index.js
var require_gray_matter = __commonJS({
  "node_modules/gray-matter/index.js"(exports2, module2) {
    "use strict";
    var fs = require("fs");
    var sections = require_section_matter();
    var defaults = require_defaults();
    var stringify = require_stringify();
    var excerpt = require_excerpt();
    var engines2 = require_engines();
    var toFile = require_to_file();
    var parse2 = require_parse();
    var utils = require_utils();
    function matter2(input, options2) {
      if (input === "") {
        return { data: {}, content: input, excerpt: "", orig: input };
      }
      let file = toFile(input);
      const cached = matter2.cache[file.content];
      if (!options2) {
        if (cached) {
          file = Object.assign({}, cached);
          file.orig = cached.orig;
          return file;
        }
        matter2.cache[file.content] = file;
      }
      return parseMatter(file, options2);
    }
    function parseMatter(file, options2) {
      const opts = defaults(options2);
      const open = opts.delimiters[0];
      const close = "\n" + opts.delimiters[1];
      let str2 = file.content;
      if (opts.language) {
        file.language = opts.language;
      }
      const openLen = open.length;
      if (!utils.startsWith(str2, open, openLen)) {
        excerpt(file, opts);
        return file;
      }
      if (str2.charAt(openLen) === open.slice(-1)) {
        return file;
      }
      str2 = str2.slice(openLen);
      const len = str2.length;
      const language = matter2.language(str2, opts);
      if (language.name) {
        file.language = language.name;
        str2 = str2.slice(language.raw.length);
      }
      let closeIndex = str2.indexOf(close);
      if (closeIndex === -1) {
        closeIndex = len;
      }
      file.matter = str2.slice(0, closeIndex);
      const block = file.matter.replace(/^\s*#[^\n]+/gm, "").trim();
      if (block === "") {
        file.isEmpty = true;
        file.empty = file.content;
        file.data = {};
      } else {
        file.data = parse2(file.language, file.matter, opts);
      }
      if (closeIndex === len) {
        file.content = "";
      } else {
        file.content = str2.slice(closeIndex + close.length);
        if (file.content[0] === "\r") {
          file.content = file.content.slice(1);
        }
        if (file.content[0] === "\n") {
          file.content = file.content.slice(1);
        }
      }
      excerpt(file, opts);
      if (opts.sections === true || typeof opts.section === "function") {
        sections(file, opts.section);
      }
      return file;
    }
    matter2.engines = engines2;
    matter2.stringify = function(file, data, options2) {
      if (typeof file === "string") file = matter2(file, options2);
      return stringify(file, data, options2);
    };
    matter2.read = function(filepath, options2) {
      const str2 = fs.readFileSync(filepath, "utf8");
      const file = matter2(str2, options2);
      file.path = filepath;
      return file;
    };
    matter2.test = function(str2, options2) {
      return utils.startsWith(str2, defaults(options2).delimiters[0]);
    };
    matter2.language = function(str2, options2) {
      const opts = defaults(options2);
      const open = opts.delimiters[0];
      if (matter2.test(str2)) {
        str2 = str2.slice(open.length);
      }
      const language = str2.slice(0, str2.search(/\r?\n/));
      return {
        raw: language,
        name: language ? language.trim() : ""
      };
    };
    matter2.cache = {};
    matter2.clearCache = function() {
      matter2.cache = {};
    };
    module2.exports = matter2;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => OvlPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/conversationStore.ts
var import_obsidian = require("obsidian");

// src/conversation.ts
function yamlQuote(value) {
  return JSON.stringify(value);
}
function convertToMarkdown(conversation) {
  const lines = [];
  const roleList = Array.from(new Set(conversation.turns.map((turn) => turn.role))).join(", ");
  lines.push("---");
  lines.push(`sessionId: ${yamlQuote(conversation.sessionId)}`);
  lines.push(`createdAt: ${yamlQuote(conversation.createdAt.toISOString())}`);
  lines.push(`turnCount: ${conversation.turns.length}`);
  lines.push(`roles: [${roleList}]`);
  lines.push("---");
  lines.push("");
  if (conversation.turns.length === 1 && conversation.turns[0].role === "assistant") {
    lines.push(conversation.turns[0].content.trim());
    lines.push("");
    return lines.join("\n");
  }
  for (const turn of conversation.turns) {
    const roleLabel = turn.role === "user" ? "\u{1F464} \uC0AC\uC6A9\uC790" : turn.role === "assistant" ? "\u{1F916} \uC5B4\uC2DC\uC2A4\uD134\uD2B8" : "\u2699\uFE0F \uC2DC\uC2A4\uD15C";
    lines.push(`## ${roleLabel}`);
    if (turn.timestamp) {
      const timestamp = typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString();
      lines.push(`*${timestamp}*`);
      lines.push("");
    }
    lines.push(turn.content);
    lines.push("");
  }
  return lines.join("\n");
}

// src/conversationStore.ts
async function saveConversationFromTurns(vault, sessionId, turns, outputFolder) {
  const conversation = {
    sessionId,
    turns,
    createdAt: /* @__PURE__ */ new Date()
  };
  const markdown = convertToMarkdown(conversation);
  const filename = buildFileName(conversation);
  const cleanedFolder = outputFolder ? (0, import_obsidian.normalizePath)(outputFolder).replace(/^\/+/, "") : "";
  const targetPath = await ensureUniquePath(
    vault,
    (0, import_obsidian.normalizePath)(cleanedFolder ? `${cleanedFolder}/${filename}` : filename)
  );
  if (cleanedFolder) {
    await ensureFolderExists(vault, cleanedFolder);
  }
  await vault.create(targetPath, markdown);
  return targetPath;
}
function buildFileName(conversation) {
  const safeTitle = sanitizeFileSegment(conversation.sessionId);
  return `${safeTitle}.md`;
}
function sanitizeFileSegment(value) {
  const trimmed = value.trim();
  if (!trimmed) {
    return "untitled";
  }
  const cleaned = trimmed.replace(/[\\/:*?"<>|]/g, " ").replace(/\s+/g, " ").trim();
  return cleaned || "untitled";
}
async function ensureFolderExists(vault, folder) {
  const exists = await vault.adapter.exists(folder);
  if (!exists) {
    await vault.createFolder(folder);
  }
}
async function ensureUniquePath(vault, path) {
  const normalized = (0, import_obsidian.normalizePath)(path);
  const extensionIndex = normalized.lastIndexOf(".md");
  const base = extensionIndex === -1 ? normalized : normalized.slice(0, extensionIndex);
  const extension = extensionIndex === -1 ? "" : ".md";
  let candidate = normalized;
  let count = 1;
  while (await vault.adapter.exists(candidate)) {
    candidate = `${base}-${count}${extension}`;
    count += 1;
  }
  return candidate;
}

// src/api.ts
var import_obsidian2 = require("obsidian");

// src/types.ts
var PROVIDER_PRESETS = {
  gemini: {
    apiUrl: "https://generativelanguage.googleapis.com/v1beta/models/gemini-3.0-preview:generateContent",
    model: "gemini-3.0-preview"
  },
  openai: {
    apiUrl: "https://api.openai.com/v1/chat/completions",
    model: "gpt-4o-mini"
  },
  ollama: {
    apiUrl: "http://localhost:11434/v1/chat/completions",
    model: "llama3.1"
  },
  custom: {
    apiUrl: "",
    model: ""
  }
};
var EMBEDDING_PRESETS = {
  gemini: {
    model: "text-embedding-004",
    apiUrl: "https://generativelanguage.googleapis.com/v1beta/models"
  },
  openai: {
    model: "text-embedding-3-small",
    apiUrl: "https://api.openai.com/v1/embeddings"
  },
  local: {
    model: "Xenova/all-MiniLM-L6-v2"
  },
  custom: {
    model: ""
  }
};
var DEFAULT_SETTINGS = {
  provider: "gemini",
  apiUrl: PROVIDER_PRESETS.gemini.apiUrl,
  apiKey: "",
  model: PROVIDER_PRESETS.gemini.model,
  titleModel: "",
  systemPrompt: "",
  defaultOutputFolder: "",
  //   
  indexingEnabled: false,
  chunkSize: 400,
  chunkOverlap: 50,
  topK: 8,
  searchSimilarityThreshold: 0.35,
  saveSimilarityThreshold: 0.75,
  //    (Gemini)
  embeddingProvider: "gemini",
  embeddingApiKey: "",
  embeddingModel: EMBEDDING_PRESETS.gemini.model,
  embeddingApiUrl: EMBEDDING_PRESETS.gemini.apiUrl || ""
};

// src/api.ts
var OvlApiClient = class {
  constructor(getSettings, logWriter) {
    this.getSettings = getSettings;
    this.logWriter = logWriter != null ? logWriter : (async () => {
    });
  }
  async requestAssistantReply(turns) {
    const settings = this.getSettings();
    if (settings.provider === "gemini") {
      return this.requestGeminiReply(settings, turns);
    }
    return this.requestOpenAiCompatibleReply(settings, turns);
  }
  async requestAssistantReplyStream(turns, options2) {
    const settings = this.getSettings();
    if (settings.provider === "gemini") {
      return this.requestGeminiReplyStream(settings, turns, options2);
    }
    return this.requestOpenAiCompatibleReplyStream(settings, turns, options2);
  }
  async requestTitleReply(prompt) {
    const settings = this.getSettings();
    const titleModel = settings.titleModel.trim();
    const modelName = titleModel || settings.model.trim();
    const turns = [
      {
        role: "user",
        content: prompt,
        timestamp: (/* @__PURE__ */ new Date()).toISOString()
      }
    ];
    if (settings.provider === "gemini") {
      return this.requestGeminiReply(settings, turns, {
        modelName,
        systemPrompt: ""
      });
    }
    return this.requestOpenAiCompatibleReply(settings, turns, {
      modelName,
      systemPrompt: ""
    });
  }
  async requestOpenAiCompatibleReply(settings, turns, options2) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const apiUrl = settings.apiUrl.trim();
    if (!apiUrl) {
      throw new Error("API URL\uC744 \uC124\uC815\uD574 \uC8FC\uC138\uC694.");
    }
    const modelName = ((_a = options2 == null ? void 0 : options2.modelName) == null ? void 0 : _a.trim()) || settings.model.trim() || PROVIDER_PRESETS.openai.model;
    if (!modelName) {
      throw new Error("\uBAA8\uB378 \uC774\uB984\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const messages = this.buildOpenAiMessages(settings, turns, (_b = options2 == null ? void 0 : options2.systemPrompt) != null ? _b : null);
    const payload = {
      model: modelName,
      messages
    };
    const body = JSON.stringify(payload);
    const headers = {
      "Content-Type": "application/json"
    };
    if (settings.apiKey.trim()) {
      headers.Authorization = `Bearer ${settings.apiKey.trim()}`;
    }
    let response;
    try {
      response = await (0, import_obsidian2.requestUrl)({
        url: apiUrl,
        method: "POST",
        headers,
        body
      });
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      await this.log("openai-compatible request failed", {
        url: apiUrl,
        body: payload,
        error: message
      });
      throw new Error(`API \uC694\uCCAD \uC2E4\uD328: ${message}`);
    }
    const status = response.status;
    if (status && status >= 400) {
      await this.log("openai-compatible response error", {
        url: apiUrl,
        body: payload,
        status,
        response: response.text
      });
      throw new Error(`API \uC624\uB958: ${status}`);
    }
    const data = this.parseJsonResponse(response.text, response.json);
    const content = (_h = (_g = (_f = (_e = (_d = (_c = data == null ? void 0 : data.choices) == null ? void 0 : _c[0]) == null ? void 0 : _d.message) == null ? void 0 : _e.content) != null ? _f : data == null ? void 0 : data.reply) != null ? _g : data == null ? void 0 : data.content) != null ? _h : data == null ? void 0 : data.message;
    if (!content || typeof content !== "string") {
      await this.log("openai-compatible response invalid", { url: apiUrl, response: data });
      throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
    }
    return content.trim();
  }
  async requestOpenAiCompatibleReplyStream(settings, turns, streamOptions, options2) {
    var _a, _b, _c, _d, _e;
    const apiUrl = settings.apiUrl.trim();
    if (!apiUrl) {
      throw new Error("API URL\uC744 \uC124\uC815\uD574 \uC8FC\uC138\uC694.");
    }
    const modelName = ((_a = options2 == null ? void 0 : options2.modelName) == null ? void 0 : _a.trim()) || settings.model.trim() || PROVIDER_PRESETS.openai.model;
    if (!modelName) {
      throw new Error("\uBAA8\uB378 \uC774\uB984\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const messages = this.buildOpenAiMessages(settings, turns, (_b = options2 == null ? void 0 : options2.systemPrompt) != null ? _b : null);
    const payload = {
      model: modelName,
      messages,
      stream: true,
      stream_options: {
        include_usage: true
      }
    };
    const headers = {
      "Content-Type": "application/json"
    };
    if (settings.apiKey.trim()) {
      headers.Authorization = `Bearer ${settings.apiKey.trim()}`;
    }
    let response;
    try {
      response = await fetch(apiUrl, {
        method: "POST",
        headers,
        body: JSON.stringify(payload),
        signal: streamOptions.signal
      });
    } catch (error) {
      if (this.isAbortError(error)) {
        throw this.createAbortError();
      }
      const message = error instanceof Error ? error.message : String(error);
      await this.log("openai-compatible stream request failed", {
        url: apiUrl,
        body: payload,
        error: message
      });
      throw new Error(`API \uC2A4\uD2B8\uB9AC\uBC0D \uC694\uCCAD \uC2E4\uD328: ${message}`);
    }
    if (!response.ok) {
      const responseText = await response.text();
      await this.log("openai-compatible stream response error", {
        url: apiUrl,
        body: payload,
        status: response.status,
        response: responseText
      });
      throw new Error(`API \uC624\uB958: ${response.status}`);
    }
    if (!response.body) {
      const fallback = await this.requestOpenAiCompatibleReply(settings, turns, options2);
      streamOptions.onToken(fallback);
      return fallback;
    }
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let buffer = "";
    let fullText = "";
    try {
      while (true) {
        const { done, value } = await reader.read();
        if (done) {
          break;
        }
        buffer += decoder.decode(value, { stream: true });
        const chunks = buffer.split("\n\n");
        buffer = (_c = chunks.pop()) != null ? _c : "";
        for (const chunk of chunks) {
          const parsedChunk = this.parseOpenAiSseChunk(chunk);
          if (parsedChunk.usage) {
            (_d = streamOptions.onUsage) == null ? void 0 : _d.call(streamOptions, parsedChunk.usage);
          }
          for (const token of parsedChunk.tokens) {
            fullText += token;
            streamOptions.onToken(token);
          }
        }
      }
      if (buffer.trim()) {
        const parsedChunk = this.parseOpenAiSseChunk(buffer);
        if (parsedChunk.usage) {
          (_e = streamOptions.onUsage) == null ? void 0 : _e.call(streamOptions, parsedChunk.usage);
        }
        for (const token of parsedChunk.tokens) {
          fullText += token;
          streamOptions.onToken(token);
        }
      }
    } catch (error) {
      if (this.isAbortError(error)) {
        throw this.createAbortError();
      }
      const message = error instanceof Error ? error.message : String(error);
      await this.log("openai-compatible stream read failed", {
        url: apiUrl,
        body: payload,
        error: message
      });
      throw new Error(`\uC2A4\uD2B8\uB9AC\uBC0D \uC751\uB2F5 \uCC98\uB9AC \uC2E4\uD328: ${message}`);
    }
    return fullText.trim();
  }
  async requestGeminiReply(settings, turns, options2) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const apiKey = settings.apiKey.trim();
    if (!apiKey) {
      throw new Error("Gemini API \uD0A4\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const modelName = ((_a = options2 == null ? void 0 : options2.modelName) == null ? void 0 : _a.trim()) || settings.model.trim() || PROVIDER_PRESETS.gemini.model;
    if (!modelName) {
      throw new Error("Gemini \uBAA8\uB378 \uC774\uB984\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const systemPrompt = ((_b = options2 == null ? void 0 : options2.systemPrompt) != null ? _b : settings.systemPrompt).trim();
    const contents = turns.map((turn) => {
      const role = turn.role === "assistant" ? "model" : "user";
      const text2 = turn.role === "system" ? `[\uC2DC\uC2A4\uD15C] ${turn.content}` : turn.content;
      return {
        role,
        parts: [{ text: text2 }]
      };
    });
    const payload = {
      contents,
      generationConfig: {
        responseMimeType: "text/plain"
      }
    };
    if (systemPrompt) {
      payload.systemInstruction = { parts: [{ text: systemPrompt }] };
    }
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
    const headers = {
      "Content-Type": "application/json"
    };
    let response;
    try {
      response = await (0, import_obsidian2.requestUrl)({
        url: apiUrl,
        method: "POST",
        headers,
        body: JSON.stringify(payload)
      });
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      await this.log("gemini request failed", {
        model: modelName,
        body: payload,
        error: message
      });
      throw new Error(`Gemini \uC694\uCCAD \uC2E4\uD328: ${message}`);
    }
    const status = response.status;
    if (status && status >= 400) {
      await this.log("gemini response error", {
        model: modelName,
        body: payload,
        status,
        response: response.text
      });
      throw new Error(`Gemini API \uC624\uB958: ${status}`);
    }
    const data = this.parseJsonResponse(response.text, response.json);
    const text = (_h = (_g = data == null ? void 0 : data.text) != null ? _g : (_f = (_e = (_d = (_c = data == null ? void 0 : data.candidates) == null ? void 0 : _c[0]) == null ? void 0 : _d.content) == null ? void 0 : _e.parts) == null ? void 0 : _f.map((part) => {
      var _a2;
      return (_a2 = part.text) != null ? _a2 : "";
    }).join("")) != null ? _h : "";
    if (!text) {
      await this.log("gemini response invalid", { model: modelName, response: data });
      throw new Error("\uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
    }
    return text;
  }
  async requestGeminiReplyStream(settings, turns, streamOptions, options2) {
    var _a, _b, _c, _d, _e;
    const apiKey = settings.apiKey.trim();
    if (!apiKey) {
      throw new Error("Gemini API \uD0A4\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const modelName = ((_a = options2 == null ? void 0 : options2.modelName) == null ? void 0 : _a.trim()) || settings.model.trim() || PROVIDER_PRESETS.gemini.model;
    if (!modelName) {
      throw new Error("Gemini \uBAA8\uB378 \uC774\uB984\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
    }
    const systemPrompt = ((_b = options2 == null ? void 0 : options2.systemPrompt) != null ? _b : settings.systemPrompt).trim();
    const contents = turns.map((turn) => {
      const role = turn.role === "assistant" ? "model" : "user";
      const text = turn.role === "system" ? `[\uC2DC\uC2A4\uD15C] ${turn.content}` : turn.content;
      return {
        role,
        parts: [{ text }]
      };
    });
    const payload = {
      contents,
      generationConfig: {
        responseMimeType: "text/plain"
      }
    };
    if (systemPrompt) {
      payload.systemInstruction = { parts: [{ text: systemPrompt }] };
    }
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:streamGenerateContent?alt=sse&key=${apiKey}`;
    let response;
    try {
      response = await fetch(apiUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload),
        signal: streamOptions.signal
      });
    } catch (error) {
      if (this.isAbortError(error)) {
        throw this.createAbortError();
      }
      const message = error instanceof Error ? error.message : String(error);
      await this.log("gemini stream request failed", {
        model: modelName,
        body: payload,
        error: message
      });
      throw new Error(`Gemini \uC2A4\uD2B8\uB9AC\uBC0D \uC694\uCCAD \uC2E4\uD328: ${message}`);
    }
    if (!response.ok) {
      const responseText = await response.text();
      await this.log("gemini stream response error", {
        model: modelName,
        body: payload,
        status: response.status,
        response: responseText
      });
      throw new Error(`Gemini API \uC624\uB958: ${response.status}`);
    }
    if (!response.body) {
      const fallback = await this.requestGeminiReply(settings, turns, options2);
      streamOptions.onToken(fallback);
      return fallback;
    }
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let buffer = "";
    let fullText = "";
    let snapshotText = "";
    try {
      while (true) {
        const { done, value } = await reader.read();
        if (done) {
          break;
        }
        buffer += decoder.decode(value, { stream: true });
        const chunks = buffer.split("\n\n");
        buffer = (_c = chunks.pop()) != null ? _c : "";
        for (const chunk of chunks) {
          const result = this.parseGeminiSseChunk(chunk, snapshotText);
          snapshotText = result.snapshot;
          if (result.usage) {
            (_d = streamOptions.onUsage) == null ? void 0 : _d.call(streamOptions, result.usage);
          }
          if (result.delta) {
            fullText += result.delta;
            streamOptions.onToken(result.delta);
          }
        }
      }
      if (buffer.trim()) {
        const result = this.parseGeminiSseChunk(buffer, snapshotText);
        snapshotText = result.snapshot;
        if (result.usage) {
          (_e = streamOptions.onUsage) == null ? void 0 : _e.call(streamOptions, result.usage);
        }
        if (result.delta) {
          fullText += result.delta;
          streamOptions.onToken(result.delta);
        }
      }
    } catch (error) {
      if (this.isAbortError(error)) {
        throw this.createAbortError();
      }
      const message = error instanceof Error ? error.message : String(error);
      await this.log("gemini stream read failed", {
        model: modelName,
        body: payload,
        error: message
      });
      throw new Error(`Gemini \uC2A4\uD2B8\uB9AC\uBC0D \uC751\uB2F5 \uCC98\uB9AC \uC2E4\uD328: ${message}`);
    }
    return fullText;
  }
  buildOpenAiMessages(settings, turns, systemPromptOverride) {
    const messages = [];
    const systemPrompt = systemPromptOverride !== null ? systemPromptOverride.trim() : settings.systemPrompt.trim();
    if (systemPrompt) {
      messages.push({ role: "system", content: systemPrompt });
    }
    for (const turn of turns) {
      messages.push({ role: turn.role, content: turn.content });
    }
    return messages;
  }
  parseJsonResponse(text, json) {
    if (json) {
      return json;
    }
    try {
      return JSON.parse(text);
    } catch (e) {
      throw new Error("API \uC751\uB2F5\uC744 \uD574\uC11D\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  parseOpenAiSseChunk(chunk) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;
    const tokens = [];
    let usage;
    const lines = chunk.split("\n").map((line) => line.trim()).filter((line) => line.startsWith("data:"));
    for (const line of lines) {
      const payload = line.slice("data:".length).trim();
      if (!payload || payload === "[DONE]") {
        continue;
      }
      let data;
      try {
        data = JSON.parse(payload);
      } catch (e) {
        continue;
      }
      const openAiUsage = this.extractOpenAiUsage(data);
      if (openAiUsage) {
        usage = openAiUsage;
      }
      const token = (_j = (_i = (_g = (_c = (_b = (_a = data == null ? void 0 : data.choices) == null ? void 0 : _a[0]) == null ? void 0 : _b.delta) == null ? void 0 : _c.content) != null ? _g : (_f = (_e = (_d = data == null ? void 0 : data.choices) == null ? void 0 : _d[0]) == null ? void 0 : _e.message) == null ? void 0 : _f.content) != null ? _i : (_h = data == null ? void 0 : data.message) == null ? void 0 : _h.content) != null ? _j : "";
      if (token) {
        tokens.push(token);
      }
    }
    return { tokens, usage };
  }
  parseGeminiSseChunk(chunk, snapshotText) {
    var _a, _b, _c, _d, _e, _f;
    const lines = chunk.split("\n").map((line) => line.trim()).filter((line) => line.startsWith("data:"));
    let delta = "";
    let snapshot = snapshotText;
    let usage;
    for (const line of lines) {
      const payload = line.slice("data:".length).trim();
      if (!payload || payload === "[DONE]") {
        continue;
      }
      let data;
      try {
        data = JSON.parse(payload);
      } catch (e) {
        continue;
      }
      const geminiUsage = this.extractGeminiUsage(data);
      if (geminiUsage) {
        usage = geminiUsage;
      }
      const nextText = (_f = (_e = data == null ? void 0 : data.text) != null ? _e : (_d = (_c = (_b = (_a = data == null ? void 0 : data.candidates) == null ? void 0 : _a[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts) == null ? void 0 : _d.map((part) => {
        var _a2;
        return (_a2 = part.text) != null ? _a2 : "";
      }).join("")) != null ? _f : "";
      if (!nextText) {
        continue;
      }
      if (nextText.startsWith(snapshot)) {
        const appended = nextText.slice(snapshot.length);
        if (appended) {
          delta += appended;
        }
        snapshot = nextText;
      } else {
        delta += nextText;
        snapshot += nextText;
      }
    }
    return { delta, snapshot, usage };
  }
  extractOpenAiUsage(data) {
    const usage = data == null ? void 0 : data.usage;
    if (!usage) {
      return null;
    }
    const inputTokens = Number(usage.prompt_tokens);
    const outputTokens = Number(usage.completion_tokens);
    const totalTokens = Number(usage.total_tokens);
    const hasAnyToken = Number.isFinite(inputTokens) || Number.isFinite(outputTokens) || Number.isFinite(totalTokens);
    if (!hasAnyToken) {
      return null;
    }
    const result = {};
    if (Number.isFinite(inputTokens)) {
      result.inputTokens = inputTokens;
    }
    if (Number.isFinite(outputTokens)) {
      result.outputTokens = outputTokens;
    }
    if (Number.isFinite(totalTokens)) {
      result.totalTokens = totalTokens;
    }
    return result;
  }
  extractGeminiUsage(data) {
    const usage = data == null ? void 0 : data.usageMetadata;
    if (!usage) {
      return null;
    }
    const inputTokens = Number(usage.promptTokenCount);
    const outputTokens = Number(usage.candidatesTokenCount);
    const totalTokens = Number(usage.totalTokenCount);
    const hasAnyToken = Number.isFinite(inputTokens) || Number.isFinite(outputTokens) || Number.isFinite(totalTokens);
    if (!hasAnyToken) {
      return null;
    }
    const result = {};
    if (Number.isFinite(inputTokens)) {
      result.inputTokens = inputTokens;
    }
    if (Number.isFinite(outputTokens)) {
      result.outputTokens = outputTokens;
    }
    if (Number.isFinite(totalTokens)) {
      result.totalTokens = totalTokens;
    }
    return result;
  }
  isAbortError(error) {
    return error instanceof Error && (error.name === "AbortError" || /abort|/i.test(error.message));
  }
  createAbortError() {
    const error = new Error("\uC694\uCCAD\uC774 \uC911\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
    error.name = "AbortError";
    return error;
  }
  async log(context, detail) {
    await this.logWriter(context, detail);
  }
};

// src/main.ts
init_logging();

// src/modals/saveConversationModal.ts
var import_obsidian4 = require("obsidian");
var SaveConversationModal = class extends import_obsidian4.Modal {
  constructor(plugin, onSubmit) {
    super(plugin.app);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\uB300\uD654 JSON \uC800\uC7A5" });
    const inputPathEl = contentEl.createEl("input", { type: "text" });
    inputPathEl.placeholder = "JSON \uD30C\uC77C \uACBD\uB85C (\uBCFC\uD2B8 \uAE30\uC900)";
    const sessionIdEl = contentEl.createEl("input", { type: "text" });
    sessionIdEl.placeholder = "\uC138\uC158 ID";
    const outputFolderEl = contentEl.createEl("input", { type: "text" });
    outputFolderEl.placeholder = "\uC800\uC7A5 \uD3F4\uB354 (\uC120\uD0DD, \uBCFC\uD2B8 \uAE30\uC900)";
    const submitButton = contentEl.createEl("button", { text: "\uC800\uC7A5" });
    submitButton.addEventListener("click", () => {
      this.onSubmit({
        inputPath: inputPathEl.value.trim(),
        sessionId: sessionIdEl.value.trim(),
        outputFolder: outputFolderEl.value.trim()
      });
      this.close();
    });
  }
};

// src/parseTurns.ts
function parseTurns(content) {
  let data;
  try {
    data = JSON.parse(content);
  } catch (e) {
    throw new Error("JSON \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
  }
  if (!Array.isArray(data)) {
    throw new Error("JSON\uC740 \uBC30\uC5F4\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.");
  }
  return data.map((item, index) => {
    if (!item || typeof item !== "object") {
      throw new Error(`\uC798\uBABB\uB41C \uD56D\uBAA9: ${index + 1}\uBC88\uC9F8`);
    }
    const role = item.role;
    const contentValue = item.content;
    const timestampValue = item.timestamp;
    if (role !== "user" && role !== "assistant" && role !== "system") {
      throw new Error(`role\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4: ${index + 1}\uBC88\uC9F8`);
    }
    if (typeof contentValue !== "string" || !contentValue.trim()) {
      throw new Error(`content\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4: ${index + 1}\uBC88\uC9F8`);
    }
    return {
      role,
      content: contentValue,
      timestamp: timestampValue
    };
  });
}

// src/settings.ts
var import_obsidian5 = require("obsidian");
var OvlSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.geminiModels = [];
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "OVL \uC124\uC815" });
    let apiUrlInput = null;
    let modelInput = null;
    new import_obsidian5.Setting(containerEl).setName("API \uC81C\uACF5\uC0AC").setDesc("\uC0AC\uC6A9\uD560 API \uC81C\uACF5\uC0AC\uB97C \uC120\uD0DD\uD558\uC138\uC694. (Ollama \uD3EC\uD568)").addDropdown((dropdown) => {
      dropdown.addOptions({
        gemini: "Google Gemini",
        openai: "OpenAI \uD638\uD658",
        ollama: "Ollama (\uB85C\uCEEC)",
        custom: "\uC0AC\uC6A9\uC790 \uC9C0\uC815"
      }).setValue(this.plugin.settings.provider).onChange(async (value) => {
        const provider = value;
        this.plugin.settings.provider = provider;
        const preset = PROVIDER_PRESETS[provider];
        this.plugin.settings.apiUrl = preset.apiUrl;
        this.plugin.settings.model = preset.model;
        apiUrlInput == null ? void 0 : apiUrlInput.setValue(preset.apiUrl);
        modelInput == null ? void 0 : modelInput.setValue(preset.model);
        await this.plugin.saveSettings();
        this.display();
      });
    });
    new import_obsidian5.Setting(containerEl).setName("API URL").setDesc("\uC81C\uACF5\uC0AC\uBCC4 \uCC44\uD305 \uC5D4\uB4DC\uD3EC\uC778\uD2B8 URL").addText((text) => {
      apiUrlInput = text;
      text.setPlaceholder("http://localhost:11434/v1/chat/completions").setValue(this.plugin.settings.apiUrl).onChange(async (value) => {
        this.plugin.settings.apiUrl = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian5.Setting(containerEl).setName("API \uD0A4").setDesc("\uD544\uC694\uD55C \uACBD\uC6B0 Bearer \uD1A0\uD070 \uB610\uB294 \uC81C\uACF5\uC0AC \uD0A4\uB97C \uC785\uB825\uD558\uC138\uC694.").addText(
      (text) => text.setPlaceholder("\uC120\uD0DD").setValue(this.plugin.settings.apiKey).onChange(async (value) => {
        this.plugin.settings.apiKey = value;
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.provider === "gemini") {
      new import_obsidian5.Setting(containerEl).setName("Gemini \uBAA8\uB378 \uBAA9\uB85D").setDesc("Google\uC5D0\uC11C \uC81C\uACF5\uD558\uB294 \uBAA8\uB378\uC744 \uBD88\uB7EC\uC640 \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.").addButton((button) => {
        button.setButtonText("\uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30").onClick(async () => {
          await this.loadGeminiModels();
          this.display();
        });
      });
      if (this.geminiModels.length > 0) {
        new import_obsidian5.Setting(containerEl).setName("Gemini \uBAA8\uB378 \uC120\uD0DD").setDesc("\uBAA9\uB85D\uC5D0 \uC5C6\uB294 \uBAA8\uB378\uC740 \uC544\uB798\uC5D0\uC11C \uC9C1\uC811 \uC785\uB825\uD558\uC138\uC694.").addDropdown((dropdown) => {
          const options2 = this.geminiModels.reduce(
            (acc, name) => {
              acc[name] = name;
              return acc;
            },
            {}
          );
          dropdown.addOptions(options2).setValue(this.plugin.settings.model).onChange(async (value) => {
            this.plugin.settings.model = value;
            modelInput == null ? void 0 : modelInput.setValue(value);
            await this.plugin.saveSettings();
          });
        });
      }
    }
    new import_obsidian5.Setting(containerEl).setName("\uBAA8\uB378").setDesc("\uC81C\uACF5\uC0AC\uBCC4 \uBAA8\uB378 \uC774\uB984 (\uC9C1\uC811 \uC785\uB825 \uAC00\uB2A5)").addText((text) => {
      modelInput = text;
      text.setPlaceholder("gpt-4o-mini").setValue(this.plugin.settings.model).onChange(async (value) => {
        this.plugin.settings.model = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian5.Setting(containerEl).setName("\uC81C\uBAA9 \uC0DD\uC131 \uBAA8\uB378").setDesc("\uC138\uC158/\uC800\uC7A5 \uC81C\uBAA9 \uC0DD\uC131\uC5D0 \uC0AC\uC6A9\uD560 \uBAA8\uB378 (\uBE44\uC5B4\uC788\uC73C\uBA74 \uAE30\uBCF8 \uBAA8\uB378 \uC0AC\uC6A9)").addText(
      (text) => text.setPlaceholder("gpt-4o-mini").setValue(this.plugin.settings.titleModel).onChange(async (value) => {
        this.plugin.settings.titleModel = value.trim();
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uC2DC\uC2A4\uD15C \uD504\uB86C\uD504\uD2B8").setDesc("\uBAA8\uB4E0 \uC694\uCCAD\uC5D0 \uD3EC\uD568\uB420 \uC2DC\uC2A4\uD15C \uBA54\uC2DC\uC9C0").addTextArea(
      (text) => text.setPlaceholder("\uC608: \uB108\uB294 Obsidian \uB9AC\uC11C\uCE58 \uC5B4\uC2DC\uC2A4\uD134\uD2B8\uB2E4.").setValue(this.plugin.settings.systemPrompt).onChange(async (value) => {
        this.plugin.settings.systemPrompt = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uAE30\uBCF8 \uC800\uC7A5 \uD3F4\uB354").setDesc("\uB300\uD654\uB97C \uC800\uC7A5\uD560 \uAE30\uBCF8 \uD3F4\uB354 (\uBCFC\uD2B8 \uAE30\uC900)").addText(
      (text) => text.setPlaceholder("\uC608: Conversations").setValue(this.plugin.settings.defaultOutputFolder).onChange(async (value) => {
        this.plugin.settings.defaultOutputFolder = value.trim();
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "\uC778\uB371\uC2F1 \uBC0F \uAC80\uC0C9 \uC124\uC815" });
    new import_obsidian5.Setting(containerEl).setName("\uC778\uB371\uC2F1 \uD65C\uC131\uD654").setDesc("\uBCFC\uD2B8 \uD30C\uC77C\uC744 \uC778\uB371\uC2F1\uD558\uC5EC \uBCA1\uD130 \uAC80\uC0C9\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.indexingEnabled).onChange(async (value) => {
        this.plugin.settings.indexingEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uC804\uCCB4 \uBCFC\uD2B8 \uC784\uBCA0\uB529").setDesc("\uBCFC\uD2B8\uC758 \uBAA8\uB4E0 \uB178\uD2B8\uB97C \uC784\uBCA0\uB529 \uBC0F \uC778\uB371\uC2F1\uD569\uB2C8\uB2E4. (\uC2DC\uAC04\uC774 \uAC78\uB9B4 \uC218 \uC788\uC74C)").addButton((button) => {
      button.setButtonText("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC2DC\uC791").setCta().onClick(async () => {
        button.setDisabled(true);
        button.setButtonText("\uC9C4\uD589 \uC911...");
        try {
          await this.plugin.indexVaultAll();
          new import_obsidian5.Notice("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC644\uB8CC!");
        } catch (error) {
          const message = error instanceof Error ? error.message : String(error);
          new import_obsidian5.Notice(`\uC784\uBCA0\uB529 \uC2E4\uD328: ${message}`);
        } finally {
          button.setDisabled(false);
          button.setButtonText("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC2DC\uC791");
        }
      });
    });
    new import_obsidian5.Setting(containerEl).setName("\uC2E0\uADDC \uB178\uD2B8\uB9CC \uC784\uBCA0\uB529").setDesc("\uB9C8\uC9C0\uB9C9 \uC778\uB371\uC2F1 \uC774\uD6C4 \uC0DD\uC131\uB418\uAC70\uB098 \uC218\uC815\uB41C \uB178\uD2B8\uB9CC \uC784\uBCA0\uB529\uD569\uB2C8\uB2E4.").addButton((button) => {
      button.setButtonText("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC2DC\uC791").onClick(async () => {
        button.setDisabled(true);
        button.setButtonText("\uC9C4\uD589 \uC911...");
        try {
          await this.plugin.indexNewFilesOnly();
          new import_obsidian5.Notice("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC644\uB8CC!");
        } catch (error) {
          const message = error instanceof Error ? error.message : String(error);
          new import_obsidian5.Notice(`\uC784\uBCA0\uB529 \uC2E4\uD328: ${message}`);
        } finally {
          button.setDisabled(false);
          button.setButtonText("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC2DC\uC791");
        }
      });
    });
    new import_obsidian5.Setting(containerEl).setName("\uCCAD\uD06C \uD06C\uAE30").setDesc("\uD14D\uC2A4\uD2B8\uB97C \uBD84\uD560\uD560 \uB54C \uAC01 \uCCAD\uD06C\uC758 \uCD5C\uB300 \uD1A0\uD070 \uC218 (\uAE30\uBCF8: 400)").addText(
      (text) => text.setPlaceholder("400").setValue(String(this.plugin.settings.chunkSize)).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num > 0) {
          this.plugin.settings.chunkSize = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uCCAD\uD06C \uC624\uBC84\uB7A9").setDesc("\uC778\uC811\uD55C \uCCAD\uD06C \uAC04 \uC911\uBCF5\uB418\uB294 \uD1A0\uD070 \uC218 (\uAE30\uBCF8: 50)").addText(
      (text) => text.setPlaceholder("50").setValue(String(this.plugin.settings.chunkOverlap)).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num >= 0) {
          this.plugin.settings.chunkOverlap = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uAC80\uC0C9 \uACB0\uACFC \uC218 (Top-K)").setDesc("\uAC80\uC0C9 \uC2DC \uBC18\uD658\uD560 \uCD5C\uB300 \uACB0\uACFC \uC218 (\uAE30\uBCF8: 8)").addText(
      (text) => text.setPlaceholder("8").setValue(String(this.plugin.settings.topK)).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num > 0) {
          this.plugin.settings.topK = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uAC80\uC0C9 \uC720\uC0AC\uB3C4 \uC784\uACC4\uAC12").setDesc("RAG \uAC80\uC0C9 \uACB0\uACFC\uB85C \uCC44\uD0DD\uD560 \uCD5C\uC18C \uC720\uC0AC\uB3C4 (0~1, \uAE30\uBCF8: 0.35)").addText(
      (text) => text.setPlaceholder("0.35").setValue(String(this.plugin.settings.searchSimilarityThreshold)).onChange(async (value) => {
        const num = Number.parseFloat(value);
        if (!Number.isNaN(num) && num >= 0 && num <= 1) {
          this.plugin.settings.searchSimilarityThreshold = num;
          await this.plugin.saveSettings();
        }
      })
    );
    new import_obsidian5.Setting(containerEl).setName("\uC800\uC7A5 \uC720\uC0AC\uB3C4 \uC784\uACC4\uAC12").setDesc("\uB300\uD654 \uC800\uC7A5 \uC2DC \uC8FC\uC81C \uBD84\uB9AC \uAE30\uC900 \uC720\uC0AC\uB3C4 (0~1, \uAE30\uBCF8: 0.75)").addText(
      (text) => text.setPlaceholder("0.75").setValue(String(this.plugin.settings.saveSimilarityThreshold)).onChange(async (value) => {
        const num = Number.parseFloat(value);
        if (!Number.isNaN(num) && num >= 0 && num <= 1) {
          this.plugin.settings.saveSimilarityThreshold = num;
          await this.plugin.saveSettings();
        }
      })
    );
    containerEl.createEl("h3", { text: "\uC784\uBCA0\uB529 \uC124\uC815" });
    let embeddingModelInput = null;
    let embeddingApiUrlInput = null;
    new import_obsidian5.Setting(containerEl).setName("\uC784\uBCA0\uB529 \uC81C\uACF5\uC790").setDesc("\uC784\uBCA0\uB529 \uC0DD\uC131\uC5D0 \uC0AC\uC6A9\uD560 \uC81C\uACF5\uC790\uB97C \uC120\uD0DD\uD558\uC138\uC694").addDropdown((dropdown) => {
      dropdown.addOptions({
        gemini: "Google Gemini (API)",
        openai: "OpenAI (API)",
        local: "\uB85C\uCEEC \uBAA8\uB378 (HuggingFace)",
        custom: "\uCEE4\uC2A4\uD140 API"
      }).setValue(this.plugin.settings.embeddingProvider).onChange(async (value) => {
        const provider = value;
        this.plugin.settings.embeddingProvider = provider;
        const preset = EMBEDDING_PRESETS[provider];
        this.plugin.settings.embeddingModel = preset.model;
        this.plugin.settings.embeddingApiUrl = preset.apiUrl || "";
        embeddingModelInput == null ? void 0 : embeddingModelInput.setValue(preset.model);
        embeddingApiUrlInput == null ? void 0 : embeddingApiUrlInput.setValue(preset.apiUrl || "");
        await this.plugin.saveSettings();
        this.display();
      });
    });
    if (this.plugin.settings.embeddingProvider !== "local") {
      new import_obsidian5.Setting(containerEl).setName("\uC784\uBCA0\uB529 API URL").setDesc("\uC784\uBCA0\uB529 \uC694\uCCAD \uC5D4\uB4DC\uD3EC\uC778\uD2B8 URL (\uBE44\uC5B4\uC788\uC73C\uBA74 \uC81C\uACF5\uC790 \uAE30\uBCF8\uAC12 \uC0AC\uC6A9)").addText((text) => {
        embeddingApiUrlInput = text;
        text.setPlaceholder("https://api.openai.com/v1/embeddings").setValue(this.plugin.settings.embeddingApiUrl).onChange(async (value) => {
          this.plugin.settings.embeddingApiUrl = value.trim();
          await this.plugin.saveSettings();
        });
      });
    }
    if (this.plugin.settings.embeddingProvider !== "local") {
      new import_obsidian5.Setting(containerEl).setName("\uC784\uBCA0\uB529 API \uD0A4").setDesc("\uC784\uBCA0\uB529 API \uD0A4 (\uBE44\uC5B4\uC788\uC73C\uBA74 LLM API \uD0A4 \uC0AC\uC6A9)").addText(
        (text) => text.setPlaceholder("\uC120\uD0DD").setValue(this.plugin.settings.embeddingApiKey).onChange(async (value) => {
          this.plugin.settings.embeddingApiKey = value;
          await this.plugin.saveSettings();
        })
      );
    }
    new import_obsidian5.Setting(containerEl).setName("\uC784\uBCA0\uB529 \uBAA8\uB378").setDesc("\uC0AC\uC6A9\uD560 \uC784\uBCA0\uB529 \uBAA8\uB378").addText((text) => {
      embeddingModelInput = text;
      text.setPlaceholder("\uBAA8\uB378\uBA85").setValue(this.plugin.settings.embeddingModel).onChange(async (value) => {
        this.plugin.settings.embeddingModel = value.trim();
        await this.plugin.saveSettings();
      });
    });
  }
  async loadGeminiModels() {
    var _a;
    const apiKey = this.plugin.settings.apiKey.trim();
    if (!apiKey) {
      new import_obsidian5.Notice("Gemini API \uD0A4\uB97C \uBA3C\uC800 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
      return;
    }
    try {
      const response = await (0, import_obsidian5.requestUrl)({
        url: `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`
      });
      const data = response.json;
      const models = (_a = data == null ? void 0 : data.models) != null ? _a : [];
      this.geminiModels = models.filter((model) => {
        var _a2;
        return (_a2 = model.supportedGenerationMethods) == null ? void 0 : _a2.includes("generateContent");
      }).map((model) => model.name).filter((name) => Boolean(name));
      if (this.geminiModels.length === 0) {
        new import_obsidian5.Notice("\uC0AC\uC6A9 \uAC00\uB2A5\uD55C Gemini \uBAA8\uB378\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");
      } else {
        new import_obsidian5.Notice("Gemini \uBAA8\uB378 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4.");
      }
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian5.Notice(`Gemini \uBAA8\uB378 \uBAA9\uB85D \uC2E4\uD328: ${message}`);
    }
  }
};

// src/views/chatView.ts
var import_obsidian7 = require("obsidian");

// src/topicSeparation/keywordExtractor.ts
function extractKeywords(text) {
  if (!text || text.trim().length === 0) {
    return [];
  }
  const cleaned = text.replace(/[^\w\s---]/g, " ").toLowerCase().trim();
  const words = cleaned.split(/\s+/).filter((word) => word.length > 1);
  const stopWords = /* @__PURE__ */ new Set([
    "\uC774",
    "\uADF8",
    "\uC800",
    "\uAC83",
    "\uC218",
    "\uB4F1",
    "\uB4E4",
    "\uBC0F",
    "\uC744",
    "\uB97C",
    "\uC774\uB97C",
    "\uADF8\uB97C",
    "\uC800\uB97C",
    "\uC740",
    "\uB294",
    "\uC774\uB294",
    "\uADF8\uB294",
    "\uC800\uB294",
    "\uAC00",
    "\uC5D0",
    "\uC758",
    "\uB85C",
    "\uC73C\uB85C",
    "\uC5D0\uC11C",
    "\uC640",
    "\uACFC",
    "\uD558\uB2E4",
    "\uC788\uB2E4",
    "\uB418\uB2E4",
    "\uC54A\uB2E4",
    "\uC5C6\uB2E4",
    "\uAC19\uB2E4",
    "\uC774\uB2E4",
    "\uC544\uB2C8\uB2E4",
    "\uD558\uB294",
    "\uC788\uB294",
    "\uB418\uB294",
    "\uD558\uACE0",
    "\uC788\uACE0",
    "\uB418\uACE0",
    "\uD55C",
    "\uD558\uBA70",
    "\uC788\uC73C\uBA70",
    "\uD560",
    "\uC788\uC744",
    "\uB420",
    "\uD569\uB2C8\uB2E4",
    "\uC785\uB2C8\uB2E4",
    "\uC2B5\uB2C8\uB2E4",
    "\uADF8\uB9AC\uACE0",
    "\uADF8\uB7EC\uB098",
    "\uD558\uC9C0\uB9CC",
    "\uB610\uD55C",
    "\uB610",
    "\uBC0F",
    "\uB4F1",
    "\uB54C\uBB38",
    "\uACBD\uC6B0",
    "\uD1B5\uD574",
    "\uB300\uD55C",
    "\uC704\uD55C",
    "\uAD00\uD55C",
    "\uB530\uB978",
    "\uAC83",
    "\uC810",
    "\uB54C",
    "\uC911",
    "\uB0B4",
    "\uC678"
  ]);
  const filtered = words.filter((word) => !stopWords.has(word) && word.length >= 2);
  const frequency = /* @__PURE__ */ new Map();
  for (const word of filtered) {
    frequency.set(word, (frequency.get(word) || 0) + 1);
  }
  const sorted = Array.from(frequency.entries()).sort((a, b) => b[1] - a[1]).map(([word]) => word);
  return sorted.slice(0, 10);
}

// node_modules/@google/generative-ai/dist/index.mjs
var SchemaType;
(function(SchemaType2) {
  SchemaType2["STRING"] = "string";
  SchemaType2["NUMBER"] = "number";
  SchemaType2["INTEGER"] = "integer";
  SchemaType2["BOOLEAN"] = "boolean";
  SchemaType2["ARRAY"] = "array";
  SchemaType2["OBJECT"] = "object";
})(SchemaType || (SchemaType = {}));
var ExecutableCodeLanguage;
(function(ExecutableCodeLanguage2) {
  ExecutableCodeLanguage2["LANGUAGE_UNSPECIFIED"] = "language_unspecified";
  ExecutableCodeLanguage2["PYTHON"] = "python";
})(ExecutableCodeLanguage || (ExecutableCodeLanguage = {}));
var Outcome;
(function(Outcome2) {
  Outcome2["OUTCOME_UNSPECIFIED"] = "outcome_unspecified";
  Outcome2["OUTCOME_OK"] = "outcome_ok";
  Outcome2["OUTCOME_FAILED"] = "outcome_failed";
  Outcome2["OUTCOME_DEADLINE_EXCEEDED"] = "outcome_deadline_exceeded";
})(Outcome || (Outcome = {}));
var POSSIBLE_ROLES = ["user", "model", "function", "system"];
var HarmCategory;
(function(HarmCategory2) {
  HarmCategory2["HARM_CATEGORY_UNSPECIFIED"] = "HARM_CATEGORY_UNSPECIFIED";
  HarmCategory2["HARM_CATEGORY_HATE_SPEECH"] = "HARM_CATEGORY_HATE_SPEECH";
  HarmCategory2["HARM_CATEGORY_SEXUALLY_EXPLICIT"] = "HARM_CATEGORY_SEXUALLY_EXPLICIT";
  HarmCategory2["HARM_CATEGORY_HARASSMENT"] = "HARM_CATEGORY_HARASSMENT";
  HarmCategory2["HARM_CATEGORY_DANGEROUS_CONTENT"] = "HARM_CATEGORY_DANGEROUS_CONTENT";
  HarmCategory2["HARM_CATEGORY_CIVIC_INTEGRITY"] = "HARM_CATEGORY_CIVIC_INTEGRITY";
})(HarmCategory || (HarmCategory = {}));
var HarmBlockThreshold;
(function(HarmBlockThreshold2) {
  HarmBlockThreshold2["HARM_BLOCK_THRESHOLD_UNSPECIFIED"] = "HARM_BLOCK_THRESHOLD_UNSPECIFIED";
  HarmBlockThreshold2["BLOCK_LOW_AND_ABOVE"] = "BLOCK_LOW_AND_ABOVE";
  HarmBlockThreshold2["BLOCK_MEDIUM_AND_ABOVE"] = "BLOCK_MEDIUM_AND_ABOVE";
  HarmBlockThreshold2["BLOCK_ONLY_HIGH"] = "BLOCK_ONLY_HIGH";
  HarmBlockThreshold2["BLOCK_NONE"] = "BLOCK_NONE";
})(HarmBlockThreshold || (HarmBlockThreshold = {}));
var HarmProbability;
(function(HarmProbability2) {
  HarmProbability2["HARM_PROBABILITY_UNSPECIFIED"] = "HARM_PROBABILITY_UNSPECIFIED";
  HarmProbability2["NEGLIGIBLE"] = "NEGLIGIBLE";
  HarmProbability2["LOW"] = "LOW";
  HarmProbability2["MEDIUM"] = "MEDIUM";
  HarmProbability2["HIGH"] = "HIGH";
})(HarmProbability || (HarmProbability = {}));
var BlockReason;
(function(BlockReason2) {
  BlockReason2["BLOCKED_REASON_UNSPECIFIED"] = "BLOCKED_REASON_UNSPECIFIED";
  BlockReason2["SAFETY"] = "SAFETY";
  BlockReason2["OTHER"] = "OTHER";
})(BlockReason || (BlockReason = {}));
var FinishReason;
(function(FinishReason2) {
  FinishReason2["FINISH_REASON_UNSPECIFIED"] = "FINISH_REASON_UNSPECIFIED";
  FinishReason2["STOP"] = "STOP";
  FinishReason2["MAX_TOKENS"] = "MAX_TOKENS";
  FinishReason2["SAFETY"] = "SAFETY";
  FinishReason2["RECITATION"] = "RECITATION";
  FinishReason2["LANGUAGE"] = "LANGUAGE";
  FinishReason2["BLOCKLIST"] = "BLOCKLIST";
  FinishReason2["PROHIBITED_CONTENT"] = "PROHIBITED_CONTENT";
  FinishReason2["SPII"] = "SPII";
  FinishReason2["MALFORMED_FUNCTION_CALL"] = "MALFORMED_FUNCTION_CALL";
  FinishReason2["OTHER"] = "OTHER";
})(FinishReason || (FinishReason = {}));
var TaskType;
(function(TaskType2) {
  TaskType2["TASK_TYPE_UNSPECIFIED"] = "TASK_TYPE_UNSPECIFIED";
  TaskType2["RETRIEVAL_QUERY"] = "RETRIEVAL_QUERY";
  TaskType2["RETRIEVAL_DOCUMENT"] = "RETRIEVAL_DOCUMENT";
  TaskType2["SEMANTIC_SIMILARITY"] = "SEMANTIC_SIMILARITY";
  TaskType2["CLASSIFICATION"] = "CLASSIFICATION";
  TaskType2["CLUSTERING"] = "CLUSTERING";
})(TaskType || (TaskType = {}));
var FunctionCallingMode;
(function(FunctionCallingMode2) {
  FunctionCallingMode2["MODE_UNSPECIFIED"] = "MODE_UNSPECIFIED";
  FunctionCallingMode2["AUTO"] = "AUTO";
  FunctionCallingMode2["ANY"] = "ANY";
  FunctionCallingMode2["NONE"] = "NONE";
})(FunctionCallingMode || (FunctionCallingMode = {}));
var DynamicRetrievalMode;
(function(DynamicRetrievalMode2) {
  DynamicRetrievalMode2["MODE_UNSPECIFIED"] = "MODE_UNSPECIFIED";
  DynamicRetrievalMode2["MODE_DYNAMIC"] = "MODE_DYNAMIC";
})(DynamicRetrievalMode || (DynamicRetrievalMode = {}));
var GoogleGenerativeAIError = class extends Error {
  constructor(message) {
    super(`[GoogleGenerativeAI Error]: ${message}`);
  }
};
var GoogleGenerativeAIResponseError = class extends GoogleGenerativeAIError {
  constructor(message, response) {
    super(message);
    this.response = response;
  }
};
var GoogleGenerativeAIFetchError = class extends GoogleGenerativeAIError {
  constructor(message, status, statusText, errorDetails) {
    super(message);
    this.status = status;
    this.statusText = statusText;
    this.errorDetails = errorDetails;
  }
};
var GoogleGenerativeAIRequestInputError = class extends GoogleGenerativeAIError {
};
var GoogleGenerativeAIAbortError = class extends GoogleGenerativeAIError {
};
var DEFAULT_BASE_URL = "https://generativelanguage.googleapis.com";
var DEFAULT_API_VERSION = "v1beta";
var PACKAGE_VERSION = "0.24.1";
var PACKAGE_LOG_HEADER = "genai-js";
var Task;
(function(Task2) {
  Task2["GENERATE_CONTENT"] = "generateContent";
  Task2["STREAM_GENERATE_CONTENT"] = "streamGenerateContent";
  Task2["COUNT_TOKENS"] = "countTokens";
  Task2["EMBED_CONTENT"] = "embedContent";
  Task2["BATCH_EMBED_CONTENTS"] = "batchEmbedContents";
})(Task || (Task = {}));
var RequestUrl = class {
  constructor(model, task, apiKey, stream, requestOptions) {
    this.model = model;
    this.task = task;
    this.apiKey = apiKey;
    this.stream = stream;
    this.requestOptions = requestOptions;
  }
  toString() {
    var _a, _b;
    const apiVersion = ((_a = this.requestOptions) === null || _a === void 0 ? void 0 : _a.apiVersion) || DEFAULT_API_VERSION;
    const baseUrl = ((_b = this.requestOptions) === null || _b === void 0 ? void 0 : _b.baseUrl) || DEFAULT_BASE_URL;
    let url = `${baseUrl}/${apiVersion}/${this.model}:${this.task}`;
    if (this.stream) {
      url += "?alt=sse";
    }
    return url;
  }
};
function getClientHeaders(requestOptions) {
  const clientHeaders = [];
  if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.apiClient) {
    clientHeaders.push(requestOptions.apiClient);
  }
  clientHeaders.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`);
  return clientHeaders.join(" ");
}
async function getHeaders(url) {
  var _a;
  const headers = new Headers();
  headers.append("Content-Type", "application/json");
  headers.append("x-goog-api-client", getClientHeaders(url.requestOptions));
  headers.append("x-goog-api-key", url.apiKey);
  let customHeaders = (_a = url.requestOptions) === null || _a === void 0 ? void 0 : _a.customHeaders;
  if (customHeaders) {
    if (!(customHeaders instanceof Headers)) {
      try {
        customHeaders = new Headers(customHeaders);
      } catch (e) {
        throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(customHeaders)} to Headers: ${e.message}`);
      }
    }
    for (const [headerName, headerValue] of customHeaders.entries()) {
      if (headerName === "x-goog-api-key") {
        throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${headerName}`);
      } else if (headerName === "x-goog-api-client") {
        throw new GoogleGenerativeAIRequestInputError(`Header name ${headerName} can only be set using the apiClient field`);
      }
      headers.append(headerName, headerValue);
    }
  }
  return headers;
}
async function constructModelRequest(model, task, apiKey, stream, body, requestOptions) {
  const url = new RequestUrl(model, task, apiKey, stream, requestOptions);
  return {
    url: url.toString(),
    fetchOptions: Object.assign(Object.assign({}, buildFetchOptions(requestOptions)), { method: "POST", headers: await getHeaders(url), body })
  };
}
async function makeModelRequest(model, task, apiKey, stream, body, requestOptions = {}, fetchFn = fetch) {
  const { url, fetchOptions } = await constructModelRequest(model, task, apiKey, stream, body, requestOptions);
  return makeRequest(url, fetchOptions, fetchFn);
}
async function makeRequest(url, fetchOptions, fetchFn = fetch) {
  let response;
  try {
    response = await fetchFn(url, fetchOptions);
  } catch (e) {
    handleResponseError(e, url);
  }
  if (!response.ok) {
    await handleResponseNotOk(response, url);
  }
  return response;
}
function handleResponseError(e, url) {
  let err = e;
  if (err.name === "AbortError") {
    err = new GoogleGenerativeAIAbortError(`Request aborted when fetching ${url.toString()}: ${e.message}`);
    err.stack = e.stack;
  } else if (!(e instanceof GoogleGenerativeAIFetchError || e instanceof GoogleGenerativeAIRequestInputError)) {
    err = new GoogleGenerativeAIError(`Error fetching from ${url.toString()}: ${e.message}`);
    err.stack = e.stack;
  }
  throw err;
}
async function handleResponseNotOk(response, url) {
  let message = "";
  let errorDetails;
  try {
    const json = await response.json();
    message = json.error.message;
    if (json.error.details) {
      message += ` ${JSON.stringify(json.error.details)}`;
      errorDetails = json.error.details;
    }
  } catch (e) {
  }
  throw new GoogleGenerativeAIFetchError(`Error fetching from ${url.toString()}: [${response.status} ${response.statusText}] ${message}`, response.status, response.statusText, errorDetails);
}
function buildFetchOptions(requestOptions) {
  const fetchOptions = {};
  if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) !== void 0 || (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {
    const controller = new AbortController();
    if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {
      setTimeout(() => controller.abort(), requestOptions.timeout);
    }
    if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) {
      requestOptions.signal.addEventListener("abort", () => {
        controller.abort();
      });
    }
    fetchOptions.signal = controller.signal;
  }
  return fetchOptions;
}
function addHelpers(response) {
  response.text = () => {
    if (response.candidates && response.candidates.length > 0) {
      if (response.candidates.length > 1) {
        console.warn(`This response had ${response.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`);
      }
      if (hadBadFinishReason(response.candidates[0])) {
        throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);
      }
      return getText(response);
    } else if (response.promptFeedback) {
      throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(response)}`, response);
    }
    return "";
  };
  response.functionCall = () => {
    if (response.candidates && response.candidates.length > 0) {
      if (response.candidates.length > 1) {
        console.warn(`This response had ${response.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`);
      }
      if (hadBadFinishReason(response.candidates[0])) {
        throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);
      }
      console.warn(`response.functionCall() is deprecated. Use response.functionCalls() instead.`);
      return getFunctionCalls(response)[0];
    } else if (response.promptFeedback) {
      throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);
    }
    return void 0;
  };
  response.functionCalls = () => {
    if (response.candidates && response.candidates.length > 0) {
      if (response.candidates.length > 1) {
        console.warn(`This response had ${response.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`);
      }
      if (hadBadFinishReason(response.candidates[0])) {
        throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);
      }
      return getFunctionCalls(response);
    } else if (response.promptFeedback) {
      throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);
    }
    return void 0;
  };
  return response;
}
function getText(response) {
  var _a, _b, _c, _d;
  const textStrings = [];
  if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {
    for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {
      if (part.text) {
        textStrings.push(part.text);
      }
      if (part.executableCode) {
        textStrings.push("\n```" + part.executableCode.language + "\n" + part.executableCode.code + "\n```\n");
      }
      if (part.codeExecutionResult) {
        textStrings.push("\n```\n" + part.codeExecutionResult.output + "\n```\n");
      }
    }
  }
  if (textStrings.length > 0) {
    return textStrings.join("");
  } else {
    return "";
  }
}
function getFunctionCalls(response) {
  var _a, _b, _c, _d;
  const functionCalls = [];
  if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {
    for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {
      if (part.functionCall) {
        functionCalls.push(part.functionCall);
      }
    }
  }
  if (functionCalls.length > 0) {
    return functionCalls;
  } else {
    return void 0;
  }
}
var badFinishReasons = [
  FinishReason.RECITATION,
  FinishReason.SAFETY,
  FinishReason.LANGUAGE
];
function hadBadFinishReason(candidate) {
  return !!candidate.finishReason && badFinishReasons.includes(candidate.finishReason);
}
function formatBlockErrorMessage(response) {
  var _a, _b, _c;
  let message = "";
  if ((!response.candidates || response.candidates.length === 0) && response.promptFeedback) {
    message += "Response was blocked";
    if ((_a = response.promptFeedback) === null || _a === void 0 ? void 0 : _a.blockReason) {
      message += ` due to ${response.promptFeedback.blockReason}`;
    }
    if ((_b = response.promptFeedback) === null || _b === void 0 ? void 0 : _b.blockReasonMessage) {
      message += `: ${response.promptFeedback.blockReasonMessage}`;
    }
  } else if ((_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0]) {
    const firstCandidate = response.candidates[0];
    if (hadBadFinishReason(firstCandidate)) {
      message += `Candidate was blocked due to ${firstCandidate.finishReason}`;
      if (firstCandidate.finishMessage) {
        message += `: ${firstCandidate.finishMessage}`;
      }
    }
  }
  return message;
}
function __await(v) {
  return this instanceof __await ? (this.v = v, this) : new __await(v);
}
function __asyncGenerator(thisArg, _arguments, generator) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var g = generator.apply(thisArg, _arguments || []), i, q = [];
  return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function() {
    return this;
  }, i;
  function verb(n) {
    if (g[n]) i[n] = function(v) {
      return new Promise(function(a, b) {
        q.push([n, v, a, b]) > 1 || resume(n, v);
      });
    };
  }
  function resume(n, v) {
    try {
      step(g[n](v));
    } catch (e) {
      settle(q[0][3], e);
    }
  }
  function step(r) {
    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
  }
  function fulfill(value) {
    resume("next", value);
  }
  function reject(value) {
    resume("throw", value);
  }
  function settle(f, v) {
    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);
  }
}
var responseLineRE = /^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;
function processStream(response) {
  const inputStream = response.body.pipeThrough(new TextDecoderStream("utf8", { fatal: true }));
  const responseStream = getResponseStream(inputStream);
  const [stream1, stream2] = responseStream.tee();
  return {
    stream: generateResponseSequence(stream1),
    response: getResponsePromise(stream2)
  };
}
async function getResponsePromise(stream) {
  const allResponses = [];
  const reader = stream.getReader();
  while (true) {
    const { done, value } = await reader.read();
    if (done) {
      return addHelpers(aggregateResponses(allResponses));
    }
    allResponses.push(value);
  }
}
function generateResponseSequence(stream) {
  return __asyncGenerator(this, arguments, function* generateResponseSequence_1() {
    const reader = stream.getReader();
    while (true) {
      const { value, done } = yield __await(reader.read());
      if (done) {
        break;
      }
      yield yield __await(addHelpers(value));
    }
  });
}
function getResponseStream(inputStream) {
  const reader = inputStream.getReader();
  const stream = new ReadableStream({
    start(controller) {
      let currentText = "";
      return pump();
      function pump() {
        return reader.read().then(({ value, done }) => {
          if (done) {
            if (currentText.trim()) {
              controller.error(new GoogleGenerativeAIError("Failed to parse stream"));
              return;
            }
            controller.close();
            return;
          }
          currentText += value;
          let match = currentText.match(responseLineRE);
          let parsedResponse;
          while (match) {
            try {
              parsedResponse = JSON.parse(match[1]);
            } catch (e) {
              controller.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${match[1]}"`));
              return;
            }
            controller.enqueue(parsedResponse);
            currentText = currentText.substring(match[0].length);
            match = currentText.match(responseLineRE);
          }
          return pump();
        }).catch((e) => {
          let err = e;
          err.stack = e.stack;
          if (err.name === "AbortError") {
            err = new GoogleGenerativeAIAbortError("Request aborted when reading from the stream");
          } else {
            err = new GoogleGenerativeAIError("Error reading from the stream");
          }
          throw err;
        });
      }
    }
  });
  return stream;
}
function aggregateResponses(responses) {
  const lastResponse = responses[responses.length - 1];
  const aggregatedResponse = {
    promptFeedback: lastResponse === null || lastResponse === void 0 ? void 0 : lastResponse.promptFeedback
  };
  for (const response of responses) {
    if (response.candidates) {
      let candidateIndex = 0;
      for (const candidate of response.candidates) {
        if (!aggregatedResponse.candidates) {
          aggregatedResponse.candidates = [];
        }
        if (!aggregatedResponse.candidates[candidateIndex]) {
          aggregatedResponse.candidates[candidateIndex] = {
            index: candidateIndex
          };
        }
        aggregatedResponse.candidates[candidateIndex].citationMetadata = candidate.citationMetadata;
        aggregatedResponse.candidates[candidateIndex].groundingMetadata = candidate.groundingMetadata;
        aggregatedResponse.candidates[candidateIndex].finishReason = candidate.finishReason;
        aggregatedResponse.candidates[candidateIndex].finishMessage = candidate.finishMessage;
        aggregatedResponse.candidates[candidateIndex].safetyRatings = candidate.safetyRatings;
        if (candidate.content && candidate.content.parts) {
          if (!aggregatedResponse.candidates[candidateIndex].content) {
            aggregatedResponse.candidates[candidateIndex].content = {
              role: candidate.content.role || "user",
              parts: []
            };
          }
          const newPart = {};
          for (const part of candidate.content.parts) {
            if (part.text) {
              newPart.text = part.text;
            }
            if (part.functionCall) {
              newPart.functionCall = part.functionCall;
            }
            if (part.executableCode) {
              newPart.executableCode = part.executableCode;
            }
            if (part.codeExecutionResult) {
              newPart.codeExecutionResult = part.codeExecutionResult;
            }
            if (Object.keys(newPart).length === 0) {
              newPart.text = "";
            }
            aggregatedResponse.candidates[candidateIndex].content.parts.push(newPart);
          }
        }
      }
      candidateIndex++;
    }
    if (response.usageMetadata) {
      aggregatedResponse.usageMetadata = response.usageMetadata;
    }
  }
  return aggregatedResponse;
}
async function generateContentStream(apiKey, model, params, requestOptions) {
  const response = await makeModelRequest(
    model,
    Task.STREAM_GENERATE_CONTENT,
    apiKey,
    /* stream */
    true,
    JSON.stringify(params),
    requestOptions
  );
  return processStream(response);
}
async function generateContent(apiKey, model, params, requestOptions) {
  const response = await makeModelRequest(
    model,
    Task.GENERATE_CONTENT,
    apiKey,
    /* stream */
    false,
    JSON.stringify(params),
    requestOptions
  );
  const responseJson = await response.json();
  const enhancedResponse = addHelpers(responseJson);
  return {
    response: enhancedResponse
  };
}
function formatSystemInstruction(input) {
  if (input == null) {
    return void 0;
  } else if (typeof input === "string") {
    return { role: "system", parts: [{ text: input }] };
  } else if (input.text) {
    return { role: "system", parts: [input] };
  } else if (input.parts) {
    if (!input.role) {
      return { role: "system", parts: input.parts };
    } else {
      return input;
    }
  }
}
function formatNewContent(request) {
  let newParts = [];
  if (typeof request === "string") {
    newParts = [{ text: request }];
  } else {
    for (const partOrString of request) {
      if (typeof partOrString === "string") {
        newParts.push({ text: partOrString });
      } else {
        newParts.push(partOrString);
      }
    }
  }
  return assignRoleToPartsAndValidateSendMessageRequest(newParts);
}
function assignRoleToPartsAndValidateSendMessageRequest(parts) {
  const userContent = { role: "user", parts: [] };
  const functionContent = { role: "function", parts: [] };
  let hasUserContent = false;
  let hasFunctionContent = false;
  for (const part of parts) {
    if ("functionResponse" in part) {
      functionContent.parts.push(part);
      hasFunctionContent = true;
    } else {
      userContent.parts.push(part);
      hasUserContent = true;
    }
  }
  if (hasUserContent && hasFunctionContent) {
    throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");
  }
  if (!hasUserContent && !hasFunctionContent) {
    throw new GoogleGenerativeAIError("No content is provided for sending chat message.");
  }
  if (hasUserContent) {
    return userContent;
  }
  return functionContent;
}
function formatCountTokensInput(params, modelParams) {
  var _a;
  let formattedGenerateContentRequest = {
    model: modelParams === null || modelParams === void 0 ? void 0 : modelParams.model,
    generationConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.generationConfig,
    safetySettings: modelParams === null || modelParams === void 0 ? void 0 : modelParams.safetySettings,
    tools: modelParams === null || modelParams === void 0 ? void 0 : modelParams.tools,
    toolConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.toolConfig,
    systemInstruction: modelParams === null || modelParams === void 0 ? void 0 : modelParams.systemInstruction,
    cachedContent: (_a = modelParams === null || modelParams === void 0 ? void 0 : modelParams.cachedContent) === null || _a === void 0 ? void 0 : _a.name,
    contents: []
  };
  const containsGenerateContentRequest = params.generateContentRequest != null;
  if (params.contents) {
    if (containsGenerateContentRequest) {
      throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");
    }
    formattedGenerateContentRequest.contents = params.contents;
  } else if (containsGenerateContentRequest) {
    formattedGenerateContentRequest = Object.assign(Object.assign({}, formattedGenerateContentRequest), params.generateContentRequest);
  } else {
    const content = formatNewContent(params);
    formattedGenerateContentRequest.contents = [content];
  }
  return { generateContentRequest: formattedGenerateContentRequest };
}
function formatGenerateContentInput(params) {
  let formattedRequest;
  if (params.contents) {
    formattedRequest = params;
  } else {
    const content = formatNewContent(params);
    formattedRequest = { contents: [content] };
  }
  if (params.systemInstruction) {
    formattedRequest.systemInstruction = formatSystemInstruction(params.systemInstruction);
  }
  return formattedRequest;
}
function formatEmbedContentInput(params) {
  if (typeof params === "string" || Array.isArray(params)) {
    const content = formatNewContent(params);
    return { content };
  }
  return params;
}
var VALID_PART_FIELDS = [
  "text",
  "inlineData",
  "functionCall",
  "functionResponse",
  "executableCode",
  "codeExecutionResult"
];
var VALID_PARTS_PER_ROLE = {
  user: ["text", "inlineData"],
  function: ["functionResponse"],
  model: ["text", "functionCall", "executableCode", "codeExecutionResult"],
  // System instructions shouldn't be in history anyway.
  system: ["text"]
};
function validateChatHistory(history) {
  let prevContent = false;
  for (const currContent of history) {
    const { role, parts } = currContent;
    if (!prevContent && role !== "user") {
      throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${role}`);
    }
    if (!POSSIBLE_ROLES.includes(role)) {
      throw new GoogleGenerativeAIError(`Each item should include role field. Got ${role} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);
    }
    if (!Array.isArray(parts)) {
      throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");
    }
    if (parts.length === 0) {
      throw new GoogleGenerativeAIError("Each Content should have at least one part");
    }
    const countFields = {
      text: 0,
      inlineData: 0,
      functionCall: 0,
      functionResponse: 0,
      fileData: 0,
      executableCode: 0,
      codeExecutionResult: 0
    };
    for (const part of parts) {
      for (const key of VALID_PART_FIELDS) {
        if (key in part) {
          countFields[key] += 1;
        }
      }
    }
    const validParts = VALID_PARTS_PER_ROLE[role];
    for (const key of VALID_PART_FIELDS) {
      if (!validParts.includes(key) && countFields[key] > 0) {
        throw new GoogleGenerativeAIError(`Content with role '${role}' can't contain '${key}' part`);
      }
    }
    prevContent = true;
  }
}
function isValidResponse(response) {
  var _a;
  if (response.candidates === void 0 || response.candidates.length === 0) {
    return false;
  }
  const content = (_a = response.candidates[0]) === null || _a === void 0 ? void 0 : _a.content;
  if (content === void 0) {
    return false;
  }
  if (content.parts === void 0 || content.parts.length === 0) {
    return false;
  }
  for (const part of content.parts) {
    if (part === void 0 || Object.keys(part).length === 0) {
      return false;
    }
    if (part.text !== void 0 && part.text === "") {
      return false;
    }
  }
  return true;
}
var SILENT_ERROR = "SILENT_ERROR";
var ChatSession = class {
  constructor(apiKey, model, params, _requestOptions = {}) {
    this.model = model;
    this.params = params;
    this._requestOptions = _requestOptions;
    this._history = [];
    this._sendPromise = Promise.resolve();
    this._apiKey = apiKey;
    if (params === null || params === void 0 ? void 0 : params.history) {
      validateChatHistory(params.history);
      this._history = params.history;
    }
  }
  /**
   * Gets the chat history so far. Blocked prompts are not added to history.
   * Blocked candidates are not added to history, nor are the prompts that
   * generated them.
   */
  async getHistory() {
    await this._sendPromise;
    return this._history;
  }
  /**
   * Sends a chat message and receives a non-streaming
   * {@link GenerateContentResult}.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async sendMessage(request, requestOptions = {}) {
    var _a, _b, _c, _d, _e, _f;
    await this._sendPromise;
    const newContent = formatNewContent(request);
    const generateContentRequest = {
      safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,
      generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,
      tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,
      toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,
      systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,
      cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,
      contents: [...this._history, newContent]
    };
    const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    let finalResult;
    this._sendPromise = this._sendPromise.then(() => generateContent(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions)).then((result) => {
      var _a2;
      if (isValidResponse(result.response)) {
        this._history.push(newContent);
        const responseContent = Object.assign({
          parts: [],
          // Response seems to come back without a role set.
          role: "model"
        }, (_a2 = result.response.candidates) === null || _a2 === void 0 ? void 0 : _a2[0].content);
        this._history.push(responseContent);
      } else {
        const blockErrorMessage = formatBlockErrorMessage(result.response);
        if (blockErrorMessage) {
          console.warn(`sendMessage() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);
        }
      }
      finalResult = result;
    }).catch((e) => {
      this._sendPromise = Promise.resolve();
      throw e;
    });
    await this._sendPromise;
    return finalResult;
  }
  /**
   * Sends a chat message and receives the response as a
   * {@link GenerateContentStreamResult} containing an iterable stream
   * and a response promise.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async sendMessageStream(request, requestOptions = {}) {
    var _a, _b, _c, _d, _e, _f;
    await this._sendPromise;
    const newContent = formatNewContent(request);
    const generateContentRequest = {
      safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,
      generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,
      tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,
      toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,
      systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,
      cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,
      contents: [...this._history, newContent]
    };
    const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    const streamPromise = generateContentStream(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions);
    this._sendPromise = this._sendPromise.then(() => streamPromise).catch((_ignored) => {
      throw new Error(SILENT_ERROR);
    }).then((streamResult) => streamResult.response).then((response) => {
      if (isValidResponse(response)) {
        this._history.push(newContent);
        const responseContent = Object.assign({}, response.candidates[0].content);
        if (!responseContent.role) {
          responseContent.role = "model";
        }
        this._history.push(responseContent);
      } else {
        const blockErrorMessage = formatBlockErrorMessage(response);
        if (blockErrorMessage) {
          console.warn(`sendMessageStream() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);
        }
      }
    }).catch((e) => {
      if (e.message !== SILENT_ERROR) {
        console.error(e);
      }
    });
    return streamPromise;
  }
};
async function countTokens(apiKey, model, params, singleRequestOptions) {
  const response = await makeModelRequest(model, Task.COUNT_TOKENS, apiKey, false, JSON.stringify(params), singleRequestOptions);
  return response.json();
}
async function embedContent(apiKey, model, params, requestOptions) {
  const response = await makeModelRequest(model, Task.EMBED_CONTENT, apiKey, false, JSON.stringify(params), requestOptions);
  return response.json();
}
async function batchEmbedContents(apiKey, model, params, requestOptions) {
  const requestsWithModel = params.requests.map((request) => {
    return Object.assign(Object.assign({}, request), { model });
  });
  const response = await makeModelRequest(model, Task.BATCH_EMBED_CONTENTS, apiKey, false, JSON.stringify({ requests: requestsWithModel }), requestOptions);
  return response.json();
}
var GenerativeModel = class {
  constructor(apiKey, modelParams, _requestOptions = {}) {
    this.apiKey = apiKey;
    this._requestOptions = _requestOptions;
    if (modelParams.model.includes("/")) {
      this.model = modelParams.model;
    } else {
      this.model = `models/${modelParams.model}`;
    }
    this.generationConfig = modelParams.generationConfig || {};
    this.safetySettings = modelParams.safetySettings || [];
    this.tools = modelParams.tools;
    this.toolConfig = modelParams.toolConfig;
    this.systemInstruction = formatSystemInstruction(modelParams.systemInstruction);
    this.cachedContent = modelParams.cachedContent;
  }
  /**
   * Makes a single non-streaming call to the model
   * and returns an object containing a single {@link GenerateContentResponse}.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async generateContent(request, requestOptions = {}) {
    var _a;
    const formattedParams = formatGenerateContentInput(request);
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return generateContent(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);
  }
  /**
   * Makes a single streaming call to the model and returns an object
   * containing an iterable stream that iterates over all chunks in the
   * streaming response as well as a promise that returns the final
   * aggregated response.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async generateContentStream(request, requestOptions = {}) {
    var _a;
    const formattedParams = formatGenerateContentInput(request);
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return generateContentStream(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);
  }
  /**
   * Gets a new {@link ChatSession} instance which can be used for
   * multi-turn chats.
   */
  startChat(startChatParams) {
    var _a;
    return new ChatSession(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, startChatParams), this._requestOptions);
  }
  /**
   * Counts the tokens in the provided request.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async countTokens(request, requestOptions = {}) {
    const formattedParams = formatCountTokensInput(request, {
      model: this.model,
      generationConfig: this.generationConfig,
      safetySettings: this.safetySettings,
      tools: this.tools,
      toolConfig: this.toolConfig,
      systemInstruction: this.systemInstruction,
      cachedContent: this.cachedContent
    });
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return countTokens(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);
  }
  /**
   * Embeds the provided content.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async embedContent(request, requestOptions = {}) {
    const formattedParams = formatEmbedContentInput(request);
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return embedContent(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);
  }
  /**
   * Embeds an array of {@link EmbedContentRequest}s.
   *
   * Fields set in the optional {@link SingleRequestOptions} parameter will
   * take precedence over the {@link RequestOptions} values provided to
   * {@link GoogleGenerativeAI.getGenerativeModel }.
   */
  async batchEmbedContents(batchEmbedContentRequest, requestOptions = {}) {
    const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);
    return batchEmbedContents(this.apiKey, this.model, batchEmbedContentRequest, generativeModelRequestOptions);
  }
};
var GoogleGenerativeAI = class {
  constructor(apiKey) {
    this.apiKey = apiKey;
  }
  /**
   * Gets a {@link GenerativeModel} instance for the provided model name.
   */
  getGenerativeModel(modelParams, requestOptions) {
    if (!modelParams.model) {
      throw new GoogleGenerativeAIError(`Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })`);
    }
    return new GenerativeModel(this.apiKey, modelParams, requestOptions);
  }
  /**
   * Creates a {@link GenerativeModel} instance from provided content cache.
   */
  getGenerativeModelFromCachedContent(cachedContent, modelParams, requestOptions) {
    if (!cachedContent.name) {
      throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");
    }
    if (!cachedContent.model) {
      throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");
    }
    const disallowedDuplicates = ["model", "systemInstruction"];
    for (const key of disallowedDuplicates) {
      if ((modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) && cachedContent[key] && (modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) !== cachedContent[key]) {
        if (key === "model") {
          const modelParamsComp = modelParams.model.startsWith("models/") ? modelParams.model.replace("models/", "") : modelParams.model;
          const cachedContentComp = cachedContent.model.startsWith("models/") ? cachedContent.model.replace("models/", "") : cachedContent.model;
          if (modelParamsComp === cachedContentComp) {
            continue;
          }
        }
        throw new GoogleGenerativeAIRequestInputError(`Different value for "${key}" specified in modelParams (${modelParams[key]}) and cachedContent (${cachedContent[key]})`);
      }
    }
    const modelParamsFromCache = Object.assign(Object.assign({}, modelParams), { model: cachedContent.model, tools: cachedContent.tools, toolConfig: cachedContent.toolConfig, systemInstruction: cachedContent.systemInstruction, cachedContent });
    return new GenerativeModel(this.apiKey, modelParamsFromCache, requestOptions);
  }
};

// src/topicSeparation/embeddingService.ts
function cosineSimilarity(vecA, vecB) {
  if (vecA.length !== vecB.length) {
    throw new Error("\uBCA1\uD130\uC758 \uCC28\uC6D0\uC774 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
  }
  let dotProduct = 0;
  let normA = 0;
  let normB = 0;
  for (let i = 0; i < vecA.length; i++) {
    dotProduct += vecA[i] * vecB[i];
    normA += vecA[i] * vecA[i];
    normB += vecB[i] * vecB[i];
  }
  const denominator = Math.sqrt(normA) * Math.sqrt(normB);
  if (denominator === 0) {
    return 0;
  }
  return dotProduct / denominator;
}
var EmbeddingGenerator = class {
  constructor(apiKey, modelName = "embedding-001", app, manifest, enableLogging = false) {
    this.apiKey = apiKey;
    this.modelName = modelName;
    this.app = app;
    this.manifest = manifest;
    this.enableLogging = enableLogging;
    this.genAI = null;
    this.model = null;
    this.cache = /* @__PURE__ */ new Map();
    this.lastEmbedding = null;
    this.lastText = "";
    if (apiKey) {
      this.genAI = new GoogleGenerativeAI(apiKey);
      const cleanModelName = this.modelName.replace(/^models\//, "");
      this.model = this.genAI.getGenerativeModel({ model: cleanModelName });
    }
  }
  /**
   *   
   * @param text  
   * @returns  
   */
  async embed(text) {
    var _a;
    if (!this.model) {
      throw new Error("Gemini API\uAC00 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    let embedding;
    if (this.cache.has(text)) {
      embedding = this.cache.get(text);
    } else {
      try {
        const result = await this.model.embedContent(text);
        const values = (_a = result == null ? void 0 : result.embedding) == null ? void 0 : _a.values;
        if (!Array.isArray(values) || values.length === 0) {
          throw new Error("\uC784\uBCA0\uB529 \uC751\uB2F5\uC774 \uBE44\uC5B4 \uC788\uC2B5\uB2C8\uB2E4");
        }
        embedding = values;
        this.cache.set(text, embedding);
      } catch (error) {
        console.error("\uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
        throw new Error(`\uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`);
      }
    }
    if (!embedding) {
      throw new Error("\uC784\uBCA0\uB529 \uC0DD\uC131 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");
    }
    if (this.enableLogging && this.app) {
      try {
        const { appendEmbeddingLog: appendEmbeddingLog2 } = await Promise.resolve().then(() => (init_logging(), logging_exports));
        let similarity;
        let previousText;
        if (this.lastEmbedding) {
          similarity = cosineSimilarity(this.lastEmbedding, embedding);
          previousText = this.lastText;
        }
        await appendEmbeddingLog2(this.app, this.manifest, {
          inputText: text,
          embedding,
          similarity,
          previousInputText: previousText
        });
      } catch (logError) {
        console.error("\uC784\uBCA0\uB529 \uB85C\uADF8 \uC791\uC131 \uC2E4\uD328:", logError);
      }
    }
    this.lastEmbedding = embedding;
    this.lastText = text;
    return embedding;
  }
  /**
   *      
   * @param texts   
   * @returns   
   */
  async embedBatch(texts) {
    const embeddings = [];
    for (const text of texts) {
      const embedding = await this.embed(text);
      embeddings.push(embedding);
    }
    return embeddings;
  }
  /**
   *  
   */
  clearCache() {
    this.cache.clear();
  }
};

// src/topicSeparation/topicSeparationEngine.ts
init_logging();
var TopicSeparationEngine = class {
  constructor(config) {
    var _a, _b, _c, _d, _e, _f, _g;
    this.config = {
      ...config,
      similarityThreshold: (_a = config.similarityThreshold) != null ? _a : 0.75,
      minSegmentLength: (_b = config.minSegmentLength) != null ? _b : 2,
      windowSize: (_c = config.windowSize) != null ? _c : 2,
      enableKeywordMetadata: (_d = config.enableKeywordMetadata) != null ? _d : true,
      enableEmbeddingLogging: (_e = config.enableEmbeddingLogging) != null ? _e : false
    };
    this.embeddingGenerator = new EmbeddingGenerator(
      config.apiKey,
      (_f = config.embeddingModel) != null ? _f : "embedding-001",
      config.app,
      config.manifest,
      (_g = config.enableEmbeddingLogging) != null ? _g : false
    );
  }
  /**
   *   
   * @param turns   
   * @returns   
   */
  async separateTopics(turns) {
    try {
      if (turns.length === 0) {
        return {
          segments: [],
          boundaries: [],
          links: []
        };
      }
      const turnTexts = this.prepareTurnTexts(turns);
      console.log("\uC784\uBCA0\uB529 \uC0DD\uC131 \uC911...");
      let embeddings;
      try {
        embeddings = await this.embeddingGenerator.embedBatch(turnTexts);
      } catch (error) {
        const msg = `\uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC720\uC0AC\uB3C4 \uACC4\uC0B0 \uC911...");
      let similarities;
      try {
        similarities = this.calculateWindowSimilarities(embeddings);
      } catch (error) {
        const msg = `\uC720\uC0AC\uB3C4 \uACC4\uC0B0 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC8FC\uC81C \uACBD\uACC4 \uD0D0\uC9C0 \uC911...");
      let boundaries;
      try {
        boundaries = this.detectTopicBoundaries(similarities);
      } catch (error) {
        const msg = `\uC8FC\uC81C \uACBD\uACC4 \uD0D0\uC9C0 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC138\uADF8\uBA3C\uD2B8 \uC0DD\uC131 \uC911...");
      let segments;
      try {
        segments = this.createSegments(turns, boundaries, similarities);
      } catch (error) {
        const msg = `\uC138\uADF8\uBA3C\uD2B8 \uC0DD\uC131 \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      console.log("\uC138\uADF8\uBA3C\uD2B8 \uB9C1\uD06C \uBD84\uC11D \uC911...");
      let links;
      try {
        links = this.analyzeSegmentLinks(segments);
      } catch (error) {
        const msg = `\uC138\uADF8\uBA3C\uD2B8 \uB9C1\uD06C \uBD84\uC11D \uC2E4\uD328: ${error instanceof Error ? error.message : String(error)}`;
        if (this.config.app) {
          await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
        }
        throw new Error(msg);
      }
      return {
        segments,
        boundaries,
        links
      };
    } catch (error) {
      if (error instanceof Error && error.message.includes("\uC2E4\uD328:")) {
        throw error;
      }
      const msg = `\uC8FC\uC81C \uBD84\uB9AC \uC911 \uC608\uC0C1\uCE58 \uBABB\uD55C \uC624\uB958: ${error instanceof Error ? error.message : String(error)}`;
      if (this.config.app) {
        await appendTopicSeparationFailureLog(this.config.app, this.config.manifest, msg, error);
      }
      throw new Error(msg);
    }
  }
  /**
   *   N  
   */
  getLastNSentences(text, n = 3) {
    const sentences = text.split(/([.!?]+)/).filter((s) => s.trim().length > 0);
    const sentenceList = [];
    for (let i = 0; i < sentences.length; i += 2) {
      if (i + 1 < sentences.length) {
        sentenceList.push(sentences[i] + sentences[i + 1]);
      } else if (i < sentences.length) {
        sentenceList.push(sentences[i]);
      }
    }
    const lastSentences = sentenceList.slice(-n);
    return lastSentences.join(" ").trim();
  }
  /**
   *    (  )
   *   = [    ] +  assistant  2~3 +   +  assistant  2~3
   */
  prepareTurnTexts(turns) {
    const result = [];
    for (let i = 0; i < turns.length; i++) {
      const turn = turns[i];
      let embeddingInput = "";
      if (turn.role === "user") {
        let combinedText = turn.content;
        let keywords = [];
        if (i + 1 < turns.length && turns[i + 1].role === "assistant") {
          const nextTurn = turns[i + 1];
          combinedText += " " + nextTurn.content;
          keywords = extractKeywords(combinedText);
        } else {
          keywords = extractKeywords(turn.content);
        }
        let previousAssistantOverlap = "";
        for (let j = i - 1; j >= 0; j--) {
          if (turns[j].role === "assistant") {
            previousAssistantOverlap = this.getLastNSentences(turns[j].content, 3);
            break;
          }
        }
        const currentQuestion = turn.content;
        let currentAssistantOverlap = "";
        if (i + 1 < turns.length && turns[i + 1].role === "assistant") {
          currentAssistantOverlap = this.getLastNSentences(turns[i + 1].content, 3);
        }
        const keywordStr = keywords.length > 0 ? `[\uD0A4\uC6CC\uB4DC: ${keywords.join(", ")}]` : "";
        embeddingInput = [
          keywordStr,
          previousAssistantOverlap,
          currentQuestion,
          currentAssistantOverlap
        ].filter((s) => s.length > 0).join(" ");
        result.push(embeddingInput);
        if (i + 1 < turns.length && turns[i + 1].role === "assistant") {
          i++;
        }
      } else if (turn.role === "assistant" && (i === 0 || turns[i - 1].role !== "user")) {
        const keywords = extractKeywords(turn.content);
        const lastSentences = this.getLastNSentences(turn.content, 3);
        const keywordStr = keywords.length > 0 ? `[\uD0A4\uC6CC\uB4DC: ${keywords.join(", ")}]` : "";
        embeddingInput = [keywordStr, lastSentences].filter((s) => s.length > 0).join(" ");
        result.push(embeddingInput);
      }
    }
    return result.length > 0 ? result : turns.map((t) => t.content);
  }
  /**
   *     
   */
  calculateWindowSimilarities(embeddings) {
    const similarities = [];
    const windowSize = this.config.windowSize;
    for (let i = 0; i < embeddings.length - 1; i++) {
      const currentWindow = this.combineEmbeddings(
        embeddings.slice(Math.max(0, i - windowSize + 1), i + 1)
      );
      const nextWindow = embeddings[i + 1];
      const similarity = cosineSimilarity(currentWindow, nextWindow);
      similarities.push(similarity);
    }
    return similarities;
  }
  /**
   *     
   */
  combineEmbeddings(embeddings) {
    if (embeddings.length === 0) {
      throw new Error("\uC784\uBCA0\uB529 \uBC30\uC5F4\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4");
    }
    if (embeddings.length === 1) {
      return embeddings[0];
    }
    const dim = embeddings[0].length;
    const combined = new Array(dim).fill(0);
    for (const embedding of embeddings) {
      for (let i = 0; i < dim; i++) {
        combined[i] += embedding[i];
      }
    }
    for (let i = 0; i < dim; i++) {
      combined[i] /= embeddings.length;
    }
    return combined;
  }
  /**
   *   
   */
  detectTopicBoundaries(similarities) {
    const boundaries = [];
    const threshold = this.config.similarityThreshold;
    for (let i = 0; i < similarities.length; i++) {
      const similarity = similarities[i];
      const isPrimaryBoundary = similarity < threshold;
      if (i > 0) {
        const prevSimilarity = similarities[i - 1];
        const drop = prevSimilarity - similarity;
        if (drop > 0.15) {
          boundaries.push({
            index: i + 1,
            //    
            similarity,
            isPrimaryBoundary: true
          });
          continue;
        }
      }
      if (isPrimaryBoundary) {
        boundaries.push({
          index: i + 1,
          similarity,
          isPrimaryBoundary: true
        });
      }
    }
    return boundaries;
  }
  /**
   *  
   */
  createSegments(turns, boundaries, similarities) {
    const segments = [];
    const boundaryIndices = boundaries.map((b) => b.index).sort((a, b) => a - b);
    const minSegmentLength = this.config.minSegmentLength;
    let startIndex = 0;
    for (const endIndex of boundaryIndices) {
      if (endIndex - startIndex >= minSegmentLength) {
        const segmentTurns = turns.slice(startIndex, endIndex);
        const keywords = this.extractSegmentKeywords(segmentTurns);
        const avgSimilarity = this.calculateAverageSimilarity(similarities, startIndex, endIndex);
        segments.push({
          startIndex,
          endIndex,
          turns: segmentTurns,
          keywords,
          avgSimilarity
        });
      }
      startIndex = endIndex;
    }
    if (startIndex < turns.length) {
      const segmentTurns = turns.slice(startIndex);
      const keywords = this.extractSegmentKeywords(segmentTurns);
      const avgSimilarity = this.calculateAverageSimilarity(similarities, startIndex, turns.length);
      segments.push({
        startIndex,
        endIndex: turns.length,
        turns: segmentTurns,
        keywords,
        avgSimilarity
      });
    }
    return segments;
  }
  /**
   *   
   */
  extractSegmentKeywords(turns) {
    const allText = turns.map((t) => t.content).join(" ");
    return extractKeywords(allText);
  }
  /**
   *    
   */
  calculateAverageSimilarity(similarities, start, end) {
    if (start >= end - 1) {
      return 1;
    }
    const relevantSimilarities = similarities.slice(start, Math.min(end - 1, similarities.length));
    if (relevantSimilarities.length === 0) {
      return 1;
    }
    const sum = relevantSimilarities.reduce((acc, val) => acc + val, 0);
    return sum / relevantSimilarities.length;
  }
  /**
   *    
   */
  analyzeSegmentLinks(segments) {
    const links = [];
    for (let i = 0; i < segments.length; i++) {
      for (let j = i + 1; j < segments.length; j++) {
        const segmentA = segments[i];
        const segmentB = segments[j];
        const commonKeywords = segmentA.keywords.filter((k) => segmentB.keywords.includes(k));
        if (commonKeywords.length > 0) {
          const unionSize = (/* @__PURE__ */ new Set([...segmentA.keywords, ...segmentB.keywords])).size;
          const relevanceScore = commonKeywords.length / unionSize;
          if (relevanceScore > 0.1) {
            links.push({
              fromSegment: i,
              toSegment: j,
              commonKeywords,
              relevanceScore
            });
          }
        }
      }
    }
    return links;
  }
  /**
   *  
   */
  clearCache() {
    this.embeddingGenerator.clearCache();
  }
};

// src/topicSeparation/multiNoteSaver.ts
var import_obsidian6 = require("obsidian");
async function saveSegmentsAsNotes(vault, segments, links, baseTitle, outputFolder, app, manifest) {
  const notePaths = [];
  const cleanedFolder = outputFolder ? (0, import_obsidian6.normalizePath)(outputFolder).replace(/^\/+/, "") : "";
  if (cleanedFolder) {
    await ensureFolderExists2(vault, cleanedFolder);
  }
  for (let i = 0; i < segments.length; i++) {
    const segment = segments[i];
    const segmentTitle = await generateSegmentTitle(segment, baseTitle, i + 1);
    const markdown = generateSegmentMarkdown(segment, i, segments.length, links, notePaths);
    const filename = sanitizeFilename(segmentTitle) + ".md";
    const targetPath = await ensureUniquePath2(
      vault,
      (0, import_obsidian6.normalizePath)(cleanedFolder ? `${cleanedFolder}/${filename}` : filename)
    );
    await vault.create(targetPath, markdown);
    notePaths.push(targetPath);
  }
  const mainNotePath = await createMainIndexNote(vault, segments, notePaths, baseTitle, cleanedFolder);
  return {
    notePaths,
    mainNotePath
  };
}
async function generateSegmentTitle(segment, baseTitle, segmentNumber) {
  const topKeywords = segment.keywords.slice(0, 3).join(", ");
  if (topKeywords) {
    return `${baseTitle} - ${segmentNumber}. ${topKeywords}`;
  } else {
    return `${baseTitle} - \uC8FC\uC81C ${segmentNumber}`;
  }
}
function generateSegmentMarkdown(segment, segmentIndex, totalSegments, links, notePaths) {
  var _a;
  const lines = [];
  lines.push("---");
  lines.push(`segment: ${segmentIndex + 1}/${totalSegments}`);
  lines.push(`keywords: [${segment.keywords.join(", ")}]`);
  lines.push(`avgSimilarity: ${segment.avgSimilarity.toFixed(3)}`);
  lines.push("---");
  lines.push("");
  lines.push(`# \uC8FC\uC81C ${segmentIndex + 1}`);
  lines.push("");
  if (segment.keywords.length > 0) {
    lines.push("## \uC8FC\uC694 \uD0A4\uC6CC\uB4DC");
    lines.push("");
    lines.push(segment.keywords.map((k) => `- ${k}`).join("\n"));
    lines.push("");
  }
  const relatedLinks = links.filter(
    (link) => link.fromSegment === segmentIndex || link.toSegment === segmentIndex
  );
  if (relatedLinks.length > 0) {
    lines.push("## \uC5F0\uAD00 \uC8FC\uC81C");
    lines.push("");
    for (const link of relatedLinks) {
      const targetIndex = link.fromSegment === segmentIndex ? link.toSegment : link.fromSegment;
      if (notePaths[targetIndex]) {
        const targetPath = notePaths[targetIndex];
        const targetName = ((_a = targetPath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || `\uC8FC\uC81C ${targetIndex + 1}`;
        const commonKeywordsText = link.commonKeywords.slice(0, 3).join(", ");
        lines.push(`- [[${targetPath.replace(".md", "")}|${targetName}]] (${commonKeywordsText})`);
      }
    }
    lines.push("");
  }
  lines.push("## \uB300\uD654 \uB0B4\uC6A9");
  lines.push("");
  for (const turn of segment.turns) {
    const roleEmoji = turn.role === "user" ? "\u{1F464}" : "\u{1F916}";
    const roleLabel = turn.role === "user" ? "\uC0AC\uC6A9\uC790" : "\uC5B4\uC2DC\uC2A4\uD134\uD2B8";
    lines.push(`### ${roleEmoji} ${roleLabel}`);
    if (turn.timestamp) {
      const timestamp = typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString();
      lines.push(`*${timestamp}*`);
      lines.push("");
    }
    lines.push(turn.content);
    lines.push("");
  }
  return lines.join("\n");
}
async function createMainIndexNote(vault, segments, notePaths, baseTitle, folder) {
  var _a;
  const lines = [];
  lines.push(`# ${baseTitle} - \uC804\uCCB4 \uC778\uB371\uC2A4`);
  lines.push("");
  lines.push("---");
  lines.push(`totalSegments: ${segments.length}`);
  lines.push(`createdAt: ${(/* @__PURE__ */ new Date()).toISOString()}`);
  lines.push("---");
  lines.push("");
  lines.push("## \uAC1C\uC694");
  lines.push("");
  lines.push(`\uC774 \uB300\uD654\uB294 ${segments.length}\uAC1C\uC758 \uC8FC\uC81C\uB85C \uBD84\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
  lines.push("");
  lines.push("## \uC8FC\uC81C \uBAA9\uB85D");
  lines.push("");
  for (let i = 0; i < segments.length; i++) {
    const segment = segments[i];
    const notePath = notePaths[i];
    const noteName = ((_a = notePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || `\uC8FC\uC81C ${i + 1}`;
    const keywords = segment.keywords.slice(0, 3).join(", ");
    lines.push(`### ${i + 1}. [[${notePath.replace(".md", "")}|${noteName}]]`);
    lines.push("");
    lines.push(`**\uD0A4\uC6CC\uB4DC**: ${keywords}`);
    lines.push(`**\uD134 \uC218**: ${segment.turns.length}`);
    lines.push(`**\uC720\uC0AC\uB3C4**: ${(segment.avgSimilarity * 100).toFixed(1)}%`);
    lines.push("");
  }
  const markdown = lines.join("\n");
  const filename = sanitizeFilename(baseTitle) + "-\uC778\uB371\uC2A4.md";
  const targetPath = await ensureUniquePath2(
    vault,
    (0, import_obsidian6.normalizePath)(folder ? `${folder}/${filename}` : filename)
  );
  await vault.create(targetPath, markdown);
  return targetPath;
}
function sanitizeFilename(value) {
  const trimmed = value.trim();
  if (!trimmed) {
    return "untitled";
  }
  const cleaned = trimmed.replace(/[\\/:*?"<>|]/g, " ").replace(/\s+/g, " ").trim();
  return cleaned || "untitled";
}
async function ensureFolderExists2(vault, folder) {
  const exists = await vault.adapter.exists(folder);
  if (!exists) {
    await vault.createFolder(folder);
  }
}
async function ensureUniquePath2(vault, path) {
  const normalized = (0, import_obsidian6.normalizePath)(path);
  const extensionIndex = normalized.lastIndexOf(".md");
  const base = extensionIndex === -1 ? normalized : normalized.slice(0, extensionIndex);
  const extension = extensionIndex === -1 ? "" : ".md";
  let candidate = normalized;
  let count = 1;
  while (await vault.adapter.exists(candidate)) {
    candidate = `${base}-${count}${extension}`;
    count += 1;
  }
  return candidate;
}

// src/views/chatView.ts
var VIEW_TYPE_OVL_CHAT = "ovl-chat-view";
var ChatView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.messages = [];
    this.messagesEl = null;
    this.inputEl = null;
    this.sendButtonEl = null;
    this.stopButtonEl = null;
    this.vaultSearchButtonEl = null;
    this.historySelectEl = null;
    this.deleteSessionButtonEl = null;
    this.saveButtonEl = null;
    this.newSessionButtonEl = null;
    this.sessionIdEl = null;
    this.showSourcesCheckbox = null;
    this.activeAbortController = null;
    this.streamingMessageEl = null;
    this.streamingContentEl = null;
    this.streamingTurn = null;
    this.isApplyingLoadedSession = false;
    this.suppressHistorySelectionChange = false;
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_OVL_CHAT;
  }
  getDisplayText() {
    return "OVL \uB300\uD654";
  }
  getIcon() {
    return "message-circle";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ovl-chat-view");
    const headerEl = contentEl.createEl("div", { cls: "ovl-chat-header" });
    headerEl.createEl("div", { cls: "ovl-chat-title", text: "OVL \uB300\uD654" });
    const sessionWrapEl = headerEl.createEl("div", { cls: "ovl-chat-session" });
    sessionWrapEl.createEl("span", { text: "\uC81C\uBAA9" });
    const sessionInputEl = sessionWrapEl.createEl("input", { type: "text" });
    sessionInputEl.value = this.buildSessionId();
    this.sessionIdEl = sessionInputEl;
    const controlsEl = headerEl.createEl("div", { cls: "ovl-chat-controls" });
    const showSourcesLabel = controlsEl.createEl("label", { cls: "ovl-source-option" });
    const showSourcesCheckbox = showSourcesLabel.createEl("input", { type: "checkbox" });
    showSourcesCheckbox.checked = false;
    showSourcesLabel.appendText(" \uC18C\uC2A4\uB9CC \uBCF4\uAE30");
    this.showSourcesCheckbox = showSourcesCheckbox;
    const saveButtonEl = controlsEl.createEl("button", { text: "\uC800\uC7A5", cls: "ovl-chat-button" });
    saveButtonEl.addEventListener("click", () => {
      void this.handleSave();
    });
    this.saveButtonEl = saveButtonEl;
    const newSessionButtonEl = controlsEl.createEl("button", { text: "\uC0C8 \uC138\uC158", cls: "ovl-chat-button" });
    newSessionButtonEl.addEventListener("click", () => {
      void this.handleStartNewSession();
    });
    this.newSessionButtonEl = newSessionButtonEl;
    const historySelectEl = controlsEl.createEl("select", { cls: "ovl-session-select" });
    historySelectEl.addEventListener("change", () => {
      void this.handleHistorySelectionChange();
    });
    this.historySelectEl = historySelectEl;
    const deleteSessionButtonEl = controlsEl.createEl("button", { text: "x", cls: "ovl-chat-button" });
    deleteSessionButtonEl.addEventListener("click", () => {
      void this.handleDeleteSelectedSession();
    });
    this.deleteSessionButtonEl = deleteSessionButtonEl;
    const messagesEl = contentEl.createEl("div", { cls: "ovl-chat-messages" });
    this.messagesEl = messagesEl;
    const inputWrapEl = contentEl.createEl("div", { cls: "ovl-chat-input" });
    const textareaEl = inputWrapEl.createEl("textarea");
    textareaEl.placeholder = "\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694. (Ctrl+Enter \uC804\uC1A1)";
    this.inputEl = textareaEl;
    const actionWrapEl = inputWrapEl.createEl("div", { cls: "ovl-chat-actions" });
    const vaultSearchButtonEl = actionWrapEl.createEl("button", {
      text: "\uBCFC\uD2B8 \uAC80\uC0C9 \uB2F5\uBCC0",
      cls: "ovl-chat-button"
    });
    vaultSearchButtonEl.addEventListener("click", () => {
      void this.handleSend(true);
    });
    this.vaultSearchButtonEl = vaultSearchButtonEl;
    const sendButtonEl = actionWrapEl.createEl("button", { text: "\uC804\uC1A1", cls: "ovl-chat-button" });
    sendButtonEl.addEventListener("click", () => {
      void this.handleSend(false);
    });
    this.sendButtonEl = sendButtonEl;
    const stopButtonEl = actionWrapEl.createEl("button", { text: "\uC911\uB2E8", cls: "ovl-chat-button" });
    stopButtonEl.disabled = true;
    stopButtonEl.addEventListener("click", () => {
      this.handleStopStreaming();
    });
    this.stopButtonEl = stopButtonEl;
    textareaEl.addEventListener("keydown", (event) => {
      if (event.key === "Enter" && (event.ctrlKey || event.metaKey)) {
        event.preventDefault();
        void this.handleSend(false);
      }
    });
    await this.refreshHistoryDropdown();
  }
  buildSessionId() {
    const stamp = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    return `session-${stamp}`;
  }
  setBusyState(state) {
    var _a, _b, _c, _d, _e;
    const sendLoading = (_a = state.sendLoading) != null ? _a : false;
    const vaultSearchLoading = (_b = state.vaultSearchLoading) != null ? _b : false;
    const saveLoading = (_c = state.saveLoading) != null ? _c : false;
    const stopEnabled = (_d = state.stopEnabled) != null ? _d : false;
    const disableHistoryActions = (_e = state.disableHistoryActions) != null ? _e : false;
    if (this.sendButtonEl) {
      this.sendButtonEl.disabled = state.isBusy;
      this.sendButtonEl.classList.toggle("is-loading", sendLoading);
    }
    if (this.vaultSearchButtonEl) {
      this.vaultSearchButtonEl.disabled = state.isBusy;
      this.vaultSearchButtonEl.classList.toggle("is-loading", vaultSearchLoading);
    }
    if (this.saveButtonEl) {
      this.saveButtonEl.disabled = state.isBusy;
      this.saveButtonEl.classList.toggle("is-loading", saveLoading);
    }
    if (this.newSessionButtonEl) {
      this.newSessionButtonEl.disabled = state.isBusy;
    }
    if (this.historySelectEl) {
      this.historySelectEl.disabled = state.isBusy || disableHistoryActions;
    }
    if (this.deleteSessionButtonEl) {
      this.deleteSessionButtonEl.disabled = state.isBusy || disableHistoryActions;
    }
    if (this.stopButtonEl) {
      this.stopButtonEl.disabled = !stopEnabled;
    }
    if (this.inputEl) {
      this.inputEl.disabled = state.isBusy;
    }
    if (state.isBusy) {
      this.contentEl.addClass("ovl-chat-busy");
    } else {
      this.contentEl.removeClass("ovl-chat-busy");
    }
  }
  async appendMessage(turn) {
    this.messages.push(turn);
    if (!this.messagesEl) {
      return;
    }
    const messageEl = this.messagesEl.createEl("div", {
      cls: `ovl-chat-message ovl-chat-${turn.role}`
    });
    messageEl.createEl("div", {
      cls: "ovl-chat-role",
      text: this.getRoleLabel(turn.role)
    });
    const contentEl = messageEl.createEl("div", {
      cls: "ovl-chat-content markdown-preview-view markdown-rendered"
    });
    try {
      await import_obsidian7.MarkdownRenderer.renderMarkdown(turn.content, contentEl, "", this);
    } catch (error) {
      const fallback = error instanceof Error ? error.message : String(error);
      contentEl.setText(`\uB80C\uB354\uB9C1 \uC2E4\uD328: ${fallback}`);
    }
    if (turn.timestamp) {
      const timestamp = typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString();
      messageEl.createEl("div", {
        cls: "ovl-chat-timestamp",
        text: timestamp
      });
    }
    if (turn.role === "assistant" && turn.generationLog) {
      this.renderGenerationLogControls(messageEl, turn.generationLog);
    }
    this.messagesEl.scrollTop = this.messagesEl.scrollHeight;
    await this.persistCurrentSession();
  }
  createStreamingAssistantMessage() {
    const turn = {
      role: "assistant",
      content: "",
      timestamp: (/* @__PURE__ */ new Date()).toISOString()
    };
    this.messages.push(turn);
    this.streamingTurn = turn;
    if (!this.messagesEl) {
      return;
    }
    const messageEl = this.messagesEl.createEl("div", {
      cls: "ovl-chat-message ovl-chat-assistant"
    });
    messageEl.createEl("div", {
      cls: "ovl-chat-role",
      text: this.getRoleLabel("assistant")
    });
    const contentEl = messageEl.createEl("div", {
      cls: "ovl-chat-content markdown-preview-view markdown-rendered"
    });
    contentEl.setText("");
    const timestamp = turn.timestamp ? typeof turn.timestamp === "string" ? turn.timestamp : turn.timestamp.toISOString() : (/* @__PURE__ */ new Date()).toISOString();
    messageEl.createEl("div", {
      cls: "ovl-chat-timestamp",
      text: timestamp
    });
    this.streamingMessageEl = messageEl;
    this.streamingContentEl = contentEl;
    this.messagesEl.scrollTop = this.messagesEl.scrollHeight;
  }
  updateStreamingAssistantMessage(token) {
    if (!this.streamingTurn || !this.streamingContentEl || !token) {
      return;
    }
    this.streamingTurn.content += token;
    this.streamingContentEl.setText(this.streamingTurn.content);
    if (this.messagesEl) {
      this.messagesEl.scrollTop = this.messagesEl.scrollHeight;
    }
  }
  async finalizeStreamingAssistantMessage(finalContent) {
    if (!this.streamingTurn || !this.streamingContentEl) {
      this.clearStreamingMessageState();
      return;
    }
    if (typeof finalContent === "string") {
      this.streamingTurn.content = finalContent;
    }
    this.streamingContentEl.empty();
    try {
      await import_obsidian7.MarkdownRenderer.renderMarkdown(this.streamingTurn.content, this.streamingContentEl, "", this);
    } catch (error) {
      const fallback = error instanceof Error ? error.message : String(error);
      this.streamingContentEl.setText(`\uB80C\uB354\uB9C1 \uC2E4\uD328: ${fallback}`);
    }
    if (this.streamingMessageEl && this.streamingTurn.generationLog) {
      this.renderGenerationLogControls(this.streamingMessageEl, this.streamingTurn.generationLog);
    }
    if (this.messagesEl) {
      this.messagesEl.scrollTop = this.messagesEl.scrollHeight;
    }
    await this.persistCurrentSession();
    this.clearStreamingMessageState();
  }
  removeStreamingAssistantMessage() {
    var _a;
    if (this.streamingTurn) {
      const index = this.messages.indexOf(this.streamingTurn);
      if (index >= 0) {
        this.messages.splice(index, 1);
      }
    }
    (_a = this.streamingMessageEl) == null ? void 0 : _a.remove();
    this.clearStreamingMessageState();
  }
  clearStreamingMessageState() {
    this.streamingTurn = null;
    this.streamingMessageEl = null;
    this.streamingContentEl = null;
  }
  handleStopStreaming() {
    var _a;
    (_a = this.activeAbortController) == null ? void 0 : _a.abort();
  }
  isAbortError(error) {
    return error instanceof Error && (error.name === "AbortError" || /|abort/i.test(error.message));
  }
  getRoleLabel(role) {
    if (role === "user") {
      return "\uC0AC\uC6A9\uC790";
    }
    if (role === "assistant") {
      return "\uC5B4\uC2DC\uC2A4\uD134\uD2B8";
    }
    return "\uC2DC\uC2A4\uD15C";
  }
  async handleSend(useRag) {
    var _a, _b, _c, _d, _e;
    const input = (_b = (_a = this.inputEl) == null ? void 0 : _a.value.trim()) != null ? _b : "";
    if (!input) {
      new import_obsidian7.Notice("\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
      return;
    }
    const isFirstQuestion = this.messages.length === 0;
    await this.appendMessage({
      role: "user",
      content: input,
      timestamp: (/* @__PURE__ */ new Date()).toISOString()
    });
    if (this.inputEl) {
      this.inputEl.value = "";
    }
    if (isFirstQuestion) {
      void this.generateSessionTitleFromQuestion(input);
    }
    const abortController = new AbortController();
    this.activeAbortController = abortController;
    this.setBusyState({
      isBusy: true,
      sendLoading: !useRag,
      vaultSearchLoading: useRag,
      stopEnabled: true
    });
    try {
      const showSourcesOnly = (_d = (_c = this.showSourcesCheckbox) == null ? void 0 : _c.checked) != null ? _d : false;
      let reply;
      let requestTurns = null;
      if (useRag && this.plugin.settings.indexingEnabled) {
        try {
          const searchResults = await this.plugin.search(input);
          const relevantResults = this.filterRelevantSearchResults(searchResults);
          if (relevantResults.length === 0) {
            if (showSourcesOnly) {
              reply = "\uC9C8\uBB38\uACFC \uC720\uC0AC\uD55C \uB178\uD2B8\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.";
            } else {
              requestTurns = this.messages;
              reply = "";
            }
          } else if (showSourcesOnly) {
            reply = this.formatSearchResults(relevantResults);
          } else {
            const context = this.buildContext(relevantResults);
            const enhancedMessages = this.buildEnhancedMessages(input, context);
            requestTurns = enhancedMessages;
            reply = "";
          }
        } catch (error) {
          console.error("RAG \uAC80\uC0C9 \uC2E4\uD328:", error);
          new import_obsidian7.Notice("\uAC80\uC0C9\uC5D0 \uC2E4\uD328\uD558\uC5EC \uC77C\uBC18 \uBAA8\uB4DC\uB85C \uC804\uD658\uD569\uB2C8\uB2E4");
          requestTurns = this.messages;
          reply = "";
        }
      } else {
        requestTurns = this.messages;
        reply = "";
      }
      if (requestTurns) {
        this.createStreamingAssistantMessage();
        const startedAtMs = Date.now();
        let latestUsage;
        let streamedReply = "";
        try {
          reply = await this.plugin.requestAssistantReplyStream(requestTurns, {
            signal: abortController.signal,
            onToken: (token) => {
              streamedReply += token;
              this.updateStreamingAssistantMessage(token);
            },
            onUsage: (usage) => {
              latestUsage = usage;
            }
          });
          if (!reply) {
            reply = streamedReply;
          }
          if (this.streamingTurn) {
            this.streamingTurn.generationLog = this.buildAssistantGenerationLog({
              requestTurns,
              reply,
              startedAtMs,
              completedAtMs: Date.now(),
              usage: latestUsage
            });
          }
          await this.finalizeStreamingAssistantMessage(reply);
        } catch (error) {
          const partialReply = streamedReply || ((_e = this.streamingTurn) == null ? void 0 : _e.content) || "";
          if (partialReply) {
            if (this.streamingTurn) {
              this.streamingTurn.generationLog = this.buildAssistantGenerationLog({
                requestTurns,
                reply: partialReply,
                startedAtMs,
                completedAtMs: Date.now(),
                usage: latestUsage
              });
            }
            await this.finalizeStreamingAssistantMessage(partialReply);
          } else {
            this.removeStreamingAssistantMessage();
          }
          if (this.isAbortError(error)) {
            new import_obsidian7.Notice("\uC751\uB2F5 \uC0DD\uC131\uC744 \uC911\uB2E8\uD588\uC2B5\uB2C8\uB2E4.");
            return;
          }
          throw error;
        }
      } else {
        await this.appendMessage({
          role: "assistant",
          content: reply,
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        });
      }
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian7.Notice(`\uB300\uD654 \uC2E4\uD328: ${message}`);
    } finally {
      this.activeAbortController = null;
      this.setBusyState({ isBusy: false });
    }
  }
  filterRelevantSearchResults(searchResults) {
    const threshold = this.plugin.settings.searchSimilarityThreshold;
    return searchResults.filter((result) => {
      const score = Number(result == null ? void 0 : result.score);
      if (!Number.isFinite(score)) {
        return false;
      }
      return score >= threshold;
    });
  }
  buildContext(searchResults) {
    if (searchResults.length === 0) {
      return "\uAD00\uB828 \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.";
    }
    let context = "\uB2E4\uC74C\uC740 \uAC80\uC0C9\uB41C \uAD00\uB828 \uBB38\uC11C\uB4E4\uC785\uB2C8\uB2E4:\n\n";
    for (let i = 0; i < searchResults.length; i++) {
      const result = searchResults[i];
      const { chunk, note, score } = result;
      context += `## \uBB38\uC11C ${i + 1}: ${note.title}
`;
      context += `- \uD30C\uC77C: ${note.path}
`;
      context += `- \uC139\uC158: ${chunk.section || "\uBCF8\uBB38"}
`;
      context += `- \uC720\uC0AC\uB3C4: ${(score * 100).toFixed(1)}%

`;
      context += `${chunk.text}

`;
      context += "---\n\n";
    }
    return context;
  }
  formatSearchResults(searchResults) {
    if (searchResults.length === 0) {
      return "\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.";
    }
    let output = "# \uAC80\uC0C9 \uACB0\uACFC\n\n";
    for (let i = 0; i < searchResults.length; i++) {
      const result = searchResults[i];
      const { chunk, note, score } = result;
      output += `## ${i + 1}. ${note.title}

`;
      output += `**\uD30C\uC77C**: [[${note.path}]]
`;
      output += `**\uC139\uC158**: ${chunk.section || "\uBCF8\uBB38"}
`;
      output += `**\uC720\uC0AC\uB3C4**: ${(score * 100).toFixed(1)}%

`;
      output += `> ${chunk.text.substring(0, 200)}${chunk.text.length > 200 ? "..." : ""}

`;
    }
    return output;
  }
  buildEnhancedMessages(query, context) {
    const systemPrompt = `\uB108\uB294 Obsidian \uBCFC\uD2B8\uC758 \uC804\uBB38 \uB9AC\uC11C\uCE58 \uC5B4\uC2DC\uC2A4\uD134\uD2B8\uB2E4. 
\uC81C\uACF5\uB41C \uBB38\uC11C\uB4E4\uC744 \uCC38\uACE0\uD558\uC5EC \uC0AC\uC6A9\uC790\uC758 \uC9C8\uBB38\uC5D0 \uB2F5\uBCC0\uD558\uB418, \uD56D\uC0C1 \uCD9C\uCC98\uB97C \uBA85\uC2DC\uD558\uB77C.
\uBAA8\uB974\uB294 \uB0B4\uC6A9\uC740 \uCD94\uCE21\uD558\uC9C0 \uB9D0\uACE0 \uC194\uC9C1\uD558\uAC8C \uBAA8\uB978\uB2E4\uACE0 \uB2F5\uBCC0\uD558\uB77C.

${context}`;
    return [
      { role: "system", content: systemPrompt, timestamp: (/* @__PURE__ */ new Date()).toISOString() },
      ...this.messages
    ];
  }
  buildAssistantGenerationLog(params) {
    var _a, _b, _c, _d, _e, _f;
    const durationMs = Math.max(1, params.completedAtMs - params.startedAtMs);
    const estimatedInputTokens = this.estimateTokenCount(
      params.requestTurns.map((turn) => turn.content).join("\n")
    );
    const estimatedOutputTokens = this.estimateTokenCount(params.reply);
    const inputTokens = (_b = (_a = params.usage) == null ? void 0 : _a.inputTokens) != null ? _b : estimatedInputTokens;
    const outputTokens = (_d = (_c = params.usage) == null ? void 0 : _c.outputTokens) != null ? _d : estimatedOutputTokens;
    const totalTokens = (_f = (_e = params.usage) == null ? void 0 : _e.totalTokens) != null ? _f : inputTokens + outputTokens;
    const tokensPerSecond = outputTokens / (durationMs / 1e3);
    return {
      provider: this.plugin.settings.provider,
      model: this.plugin.settings.model,
      inputTokens,
      outputTokens,
      totalTokens,
      durationMs,
      tokensPerSecond,
      startedAt: new Date(params.startedAtMs).toISOString(),
      completedAt: new Date(params.completedAtMs).toISOString(),
      estimated: !params.usage
    };
  }
  estimateTokenCount(text) {
    const compact = text.replace(/\s+/g, " ").trim();
    if (!compact) {
      return 0;
    }
    const charBased = Math.ceil(compact.length / 4);
    const wordBased = compact.split(" ").filter(Boolean).length;
    return Math.max(1, Math.max(charBased, wordBased));
  }
  renderGenerationLogControls(messageEl, log) {
    const controlsEl = messageEl.createEl("div", { cls: "ovl-chat-log-controls" });
    const buttonEl = controlsEl.createEl("button", {
      cls: "ovl-chat-log-button",
      text: "!"
    });
    buttonEl.type = "button";
    buttonEl.setAttribute("aria-label", "\uC0DD\uC131 \uB85C\uADF8 \uBCF4\uAE30");
    const panelEl = messageEl.createEl("div", { cls: "ovl-chat-log-panel" });
    panelEl.addClass("is-hidden");
    const items = [
      { label: "\uC81C\uACF5\uC790", value: log.provider || "-" },
      { label: "\uBAA8\uB378", value: log.model || "-" },
      { label: "\uC785\uB825 \uD1A0\uD070", value: this.formatTokenValue(log.inputTokens) },
      { label: "\uCD9C\uB825 \uD1A0\uD070", value: this.formatTokenValue(log.outputTokens) },
      { label: "\uCD1D \uD1A0\uD070", value: this.formatTokenValue(log.totalTokens) },
      { label: "\uC0DD\uC131 \uC2DC\uAC04", value: `${log.durationMs.toLocaleString()} ms` },
      { label: "\uCD08\uB2F9 \uD1A0\uD070", value: this.formatTokensPerSecond(log.tokensPerSecond) },
      {
        label: "\uD1A0\uD070 \uCD9C\uCC98",
        value: log.estimated ? "\uCD94\uC815\uCE58(\uC751\uB2F5 \uAE30\uBC18 \uACC4\uC0B0)" : "API \uC0AC\uC6A9\uB7C9 \uBA54\uD0C0\uB370\uC774\uD130"
      }
    ];
    for (const item of items) {
      const rowEl = panelEl.createEl("div", { cls: "ovl-chat-log-row" });
      rowEl.createEl("span", { cls: "ovl-chat-log-label", text: item.label });
      rowEl.createEl("span", { cls: "ovl-chat-log-value", text: item.value });
    }
    buttonEl.addEventListener("click", () => {
      const nextHidden = !panelEl.hasClass("is-hidden");
      panelEl.toggleClass("is-hidden", nextHidden);
      buttonEl.toggleClass("is-open", !nextHidden);
    });
  }
  formatTokenValue(value) {
    if (!Number.isFinite(value)) {
      return "-";
    }
    return Number(value).toLocaleString();
  }
  formatTokensPerSecond(value) {
    if (!Number.isFinite(value) || value === void 0) {
      return "-";
    }
    return `${value.toFixed(2)} tps`;
  }
  async handleSave() {
    var _a, _b;
    if (this.messages.length === 0) {
      new import_obsidian7.Notice("\uC800\uC7A5\uD560 \uB300\uD654\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    this.setBusyState({ isBusy: true, saveLoading: true });
    try {
      const conversationTitle = await this.generateTitleForSave();
      const sessionId = (_b = (_a = this.sessionIdEl) == null ? void 0 : _a.value.trim()) != null ? _b : "";
      const finalSessionId = conversationTitle || sessionId;
      if (!finalSessionId) {
        new import_obsidian7.Notice("\uC81C\uBAA9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
        return;
      }
      if (conversationTitle && this.sessionIdEl) {
        this.sessionIdEl.value = conversationTitle;
      }
      const enableTopicSeparation = this.messages.length >= 4 && this.plugin.settings.apiKey;
      if (enableTopicSeparation) {
        new import_obsidian7.Notice("\uB300\uD654\uB97C \uC8FC\uC81C\uBCC4\uB85C \uBD84\uC11D\uD558\uB294 \uC911...");
        try {
          const engine = new TopicSeparationEngine({
            apiKey: this.plugin.settings.embeddingApiKey || this.plugin.settings.apiKey,
            embeddingModel: this.plugin.settings.embeddingModel,
            similarityThreshold: this.plugin.settings.saveSimilarityThreshold,
            minSegmentLength: 2,
            windowSize: 2,
            enableKeywordMetadata: true,
            app: this.app,
            manifest: this.plugin.manifest,
            enableEmbeddingLogging: true
          });
          const result = await engine.separateTopics(this.messages);
          console.log(`\uC8FC\uC81C \uBD84\uB9AC \uC644\uB8CC: ${result.segments.length}\uAC1C \uC138\uADF8\uBA3C\uD2B8 \uAC10\uC9C0`);
          if (result.segments.length > 1) {
            new import_obsidian7.Notice(`${result.segments.length}\uAC1C\uC758 \uC8FC\uC81C\uB85C \uBD84\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC800\uC7A5 \uC911...`);
            const multiNoteResult = await saveSegmentsAsNotes(
              this.app.vault,
              result.segments,
              result.links,
              finalSessionId,
              this.plugin.settings.defaultOutputFolder,
              this.app,
              this.plugin.manifest
            );
            new import_obsidian7.Notice(
              `\uC8FC\uC81C\uBCC4\uB85C \uBD84\uB9AC\uD558\uC5EC \uC800\uC7A5 \uC644\uB8CC!
- \uC8FC\uC81C \uB178\uD2B8: ${multiNoteResult.notePaths.length}\uAC1C
- \uC778\uB371\uC2A4: ${multiNoteResult.mainNotePath}`
            );
            engine.clearCache();
            this.resetSession();
            return;
          } else {
            console.log("\uB2E8\uC77C \uC8FC\uC81C\uB85C \uD310\uB2E8\uB418\uC5B4 \uC77C\uBC18 \uC800\uC7A5 \uC218\uD589");
          }
          engine.clearCache();
        } catch (error) {
          console.error("\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328, \uC77C\uBC18 \uC800\uC7A5\uC73C\uB85C \uC804\uD658:", error);
          new import_obsidian7.Notice("\uC8FC\uC81C \uBD84\uB9AC \uC2E4\uD328. \uC77C\uBC18 \uBC29\uC2DD\uC73C\uB85C \uC800\uC7A5\uD569\uB2C8\uB2E4.");
        }
      }
      const summaryPrompt = this.buildWikiSummaryPrompt(this.messages);
      let summary = await this.plugin.requestAssistantReply([
        {
          role: "user",
          content: summaryPrompt,
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        }
      ]);
      summary = this.cleanSummary(summary);
      if (this.isSummaryTooShort(summary)) {
        const retryPrompt = this.buildWikiSummaryPrompt(this.messages, true);
        summary = await this.plugin.requestAssistantReply([
          {
            role: "user",
            content: retryPrompt,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          }
        ]);
        summary = this.cleanSummary(summary);
      }
      const targetPath = await this.plugin.saveConversationFromTurns(
        finalSessionId,
        [
          {
            role: "assistant",
            content: summary,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          }
        ],
        this.plugin.settings.defaultOutputFolder
      );
      new import_obsidian7.Notice(`\uC704\uD0A4 \uC694\uC57D \uC800\uC7A5 \uC644\uB8CC: ${targetPath}`);
      this.resetSession();
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian7.Notice(`\uC800\uC7A5 \uC2E4\uD328: ${message}`);
    } finally {
      this.setBusyState({ isBusy: false });
    }
  }
  resetSession() {
    this.messages = [];
    if (this.messagesEl) {
      this.messagesEl.empty();
    }
    if (this.inputEl) {
      this.inputEl.value = "";
    }
    if (this.sessionIdEl) {
      this.sessionIdEl.value = this.buildSessionId();
    }
    void this.refreshHistoryDropdown();
  }
  async handleStartNewSession() {
    var _a, _b, _c;
    this.setBusyState({ isBusy: true, disableHistoryActions: true });
    try {
      (_a = this.activeAbortController) == null ? void 0 : _a.abort();
      this.clearStreamingMessageState();
      const sessionId = (_c = (_b = this.sessionIdEl) == null ? void 0 : _b.value.trim()) != null ? _c : "";
      if (this.messages.length > 0 && sessionId) {
        await this.plugin.saveChatSession(sessionId, this.messages);
      }
      this.resetSession();
      new import_obsidian7.Notice("\uC0C8 \uC138\uC158\uC744 \uC2DC\uC791\uD588\uC2B5\uB2C8\uB2E4.");
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian7.Notice(`\uC0C8 \uC138\uC158 \uC2DC\uC791 \uC2E4\uD328: ${message}`);
    } finally {
      this.setBusyState({ isBusy: false });
    }
  }
  async handleHistorySelectionChange() {
    if (!this.historySelectEl || this.suppressHistorySelectionChange) {
      return;
    }
    const sessionId = this.historySelectEl.value;
    if (!sessionId) {
      return;
    }
    await this.loadHistorySessionById(sessionId);
  }
  async handleDeleteSelectedSession() {
    if (!this.historySelectEl) {
      return;
    }
    const sessionId = this.historySelectEl.value;
    if (!sessionId) {
      new import_obsidian7.Notice("\uC0AD\uC81C\uD560 \uC138\uC158\uC744 \uBA3C\uC800 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");
      return;
    }
    this.setBusyState({ isBusy: true, disableHistoryActions: true });
    try {
      await this.plugin.deleteChatSession(sessionId);
      await this.refreshHistoryDropdown();
      new import_obsidian7.Notice(`\uC138\uC158\uC744 \uC0AD\uC81C\uD588\uC2B5\uB2C8\uB2E4: ${sessionId}`);
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian7.Notice(`\uC138\uC158 \uC0AD\uC81C \uC2E4\uD328: ${message}`);
    } finally {
      this.setBusyState({ isBusy: false });
    }
  }
  async loadHistorySessionById(sessionId) {
    var _a;
    this.setBusyState({ isBusy: true, disableHistoryActions: true });
    try {
      const turns = await this.plugin.loadChatSession(sessionId);
      (_a = this.activeAbortController) == null ? void 0 : _a.abort();
      this.clearStreamingMessageState();
      this.isApplyingLoadedSession = true;
      this.messages = [];
      if (this.messagesEl) {
        this.messagesEl.empty();
      }
      for (const turn of turns) {
        await this.appendMessage(turn);
      }
      this.isApplyingLoadedSession = false;
      if (this.sessionIdEl) {
        this.sessionIdEl.value = sessionId;
      }
      await this.persistCurrentSession();
      await this.refreshHistoryDropdown(sessionId);
      new import_obsidian7.Notice(`\uB300\uD654 \uAE30\uB85D\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4: ${sessionId}`);
    } catch (error) {
      this.isApplyingLoadedSession = false;
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian7.Notice(`\uB300\uD654 \uAE30\uB85D \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328: ${message}`);
    } finally {
      this.setBusyState({ isBusy: false });
    }
  }
  async refreshHistoryDropdown(selectedSessionId) {
    if (!this.historySelectEl) {
      return;
    }
    const sessions = await this.plugin.listChatSessions();
    this.suppressHistorySelectionChange = true;
    this.historySelectEl.empty();
    const placeholder = this.historySelectEl.createEl("option", {
      text: "\uAE30\uB85D \uBD88\uB7EC\uC624\uAE30",
      value: ""
    });
    placeholder.selected = true;
    for (const session of sessions) {
      const option = this.historySelectEl.createEl("option", {
        text: `${session.sessionId} (${session.turnCount})`,
        value: session.sessionId
      });
      if (selectedSessionId && session.sessionId === selectedSessionId) {
        option.selected = true;
      }
    }
    this.suppressHistorySelectionChange = false;
  }
  async persistCurrentSession() {
    var _a, _b;
    if (this.isApplyingLoadedSession) {
      return;
    }
    const sessionId = (_b = (_a = this.sessionIdEl) == null ? void 0 : _a.value.trim()) != null ? _b : "";
    if (!sessionId || this.messages.length === 0) {
      return;
    }
    try {
      await this.plugin.saveChatSession(sessionId, this.messages);
      await this.refreshHistoryDropdown(sessionId);
    } catch (error) {
      console.error("\uB300\uD654 \uAE30\uB85D \uC790\uB3D9 \uC800\uC7A5 \uC2E4\uD328:", error);
    }
  }
  buildWikiSummaryPrompt(turns, enforceLongForm = false) {
    const transcript = turns.map((turn) => {
      const roleLabel = turn.role === "user" ? "\uC0AC\uC6A9\uC790" : turn.role === "assistant" ? "\uC5B4\uC2DC\uC2A4\uD134\uD2B8" : "\uC2DC\uC2A4\uD15C";
      return `[${roleLabel}] ${turn.content}`;
    }).join("\n\n");
    const minLength = enforceLongForm ? 1800 : 1200;
    return `\uB2E4\uC74C \uB300\uD654\uB97C \uC790\uC138\uD55C \uC704\uD0A4 \uC694\uC57D\uBB38\uC73C\uB85C \uC791\uC131\uD574 \uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uCD9C\uB825\uC740 YAML frontmatter \uC640 \uBCF8\uBB38\uB9CC \uC791\uC131
- # \uC81C\uBAA9\uC740 \uC4F0\uC9C0 \uB9D0\uACE0 \uBC14\uB85C \uBCF8\uBB38\uBD80\uD130 \uC2DC\uC791
- \uD615\uC2DD(\uD5E4\uB354/\uBAA9\uB85D/\uD45C)\uC740 \uC790\uC720\uB86D\uAC8C \uC120\uD0DD\uD558\uB418, \uAC00\uB3C5\uC131\uC740 \uC720\uC9C0
- \uB2E8\uC21C \uC555\uCD95 \uC694\uC57D\uC774 \uC544\uB2C8\uB77C \uB9E5\uB77D, \uADFC\uAC70, \uACB0\uB860, \uD6C4\uC18D \uACFC\uC81C\uB97C \uCDA9\uBD84\uD788 \uC124\uBA85
- \uB300\uD654 \uD750\uB984(\uBB38\uC81C \uC81C\uAE30 -> \uAC80\uD1A0 -> \uD310\uB2E8/\uACB0\uC815 -> \uC2E4\uD589 \uACC4\uD68D)\uC774 \uBCF4\uC774\uAC8C \uC815\uB9AC
- \uB4F1\uC7A5\uD55C \uC8FC\uC694 \uAC1C\uB150, \uC870\uAC74, \uC81C\uC57D, \uB300\uC548, \uD2B8\uB808\uC774\uB4DC\uC624\uD504\uB97C \uBE60\uC9D0\uC5C6\uC774 \uD3EC\uD568
- \uC2E4\uD589 \uAC00\uB2A5\uD55C \uD56D\uBAA9\uC740 \uAD6C\uCCB4\uC801 \uD589\uB3D9 \uB2E8\uC704\uB85C \uC791\uC131(\uB204\uAC00/\uBB34\uC5C7\uC744/\uC5B4\uB5BB\uAC8C)
- \uBD88\uD655\uC2E4\uD55C \uB0B4\uC6A9\uACFC \uCD94\uAC00 \uD655\uC778\uC774 \uD544\uC694\uD55C \uD56D\uBAA9\uC744 \uBD84\uB9AC\uD574\uC11C \uBA85\uC2DC
- \uD55C\uAD6D\uC5B4\uB85C \uC791\uC131
- \uCD5C\uC18C ${minLength}\uC790 \uC774\uC0C1\uC73C\uB85C \uCDA9\uBD84\uD788 \uC790\uC138\uD788 \uC791\uC131
- "\uC5B4\uC2DC\uC2A4\uD134\uD2B8", \uD0C0\uC784\uC2A4\uD0EC\uD504, \uC11C\uBB38\uC131 \uBA58\uD2B8, \uC0AC\uC871 \uC5C6\uC774 \uBCF8\uBB38\uB9CC \uCD9C\uB825

\uB300\uD654 \uAE30\uB85D:
${transcript}`;
  }
  isSummaryTooShort(summary) {
    const compact = summary.replace(/```[\s\S]*?```/g, "").replace(/\s+/g, "").trim();
    return compact.length < 900;
  }
  cleanSummary(summary) {
    const lines = summary.split("\n");
    const cleaned = [];
    let index = 0;
    while (index < lines.length) {
      const line = lines[index].trim();
      if (line.startsWith("## \u{1F916}") || line.startsWith("## \uC5B4\uC2DC\uC2A4\uD134\uD2B8")) {
        index += 1;
        while (index < lines.length && lines[index].trim().startsWith("*")) {
          index += 1;
        }
        while (index < lines.length && lines[index].trim() === "") {
          index += 1;
        }
        continue;
      }
      if (line.startsWith("\uB2E4\uC74C\uC740 ") && line.includes("\uC694\uC57D")) {
        index += 1;
        while (index < lines.length && lines[index].trim() === "") {
          index += 1;
        }
        continue;
      }
      cleaned.push(lines[index]);
      index += 1;
    }
    return cleaned.join("\n").trim();
  }
  async generateSessionTitleFromQuestion(question) {
    if (!this.sessionIdEl) {
      return;
    }
    const prompt = `\uB2E4\uC74C \uC9C8\uBB38\uC744 \uBCF4\uACE0 \uC138\uC158 \uC81C\uBAA9\uC744 \uB9CC\uB4E4\uC5B4 \uC8FC\uC138\uC694. \uC870\uAC74: 12~20\uC790 \uB0B4\uC678\uC758 \uAC04\uACB0\uD55C \uC81C\uBAA9, \uC774\uBAA8\uC9C0/\uB530\uC634\uD45C \uAE08\uC9C0, \uC81C\uBAA9\uB9CC \uCD9C\uB825.

\uC9C8\uBB38: ${question}`;
    try {
      const title = await this.plugin.requestTitleReply(prompt);
      const cleaned = this.cleanTitle(title);
      if (cleaned) {
        this.sessionIdEl.value = cleaned;
      }
    } catch (error) {
      console.error("\uC138\uC158 \uC81C\uBAA9 \uC0DD\uC131 \uC2E4\uD328:", error);
    }
  }
  async generateTitleForSave() {
    const transcript = this.messages.map((turn) => {
      const roleLabel = turn.role === "user" ? "\uC0AC\uC6A9\uC790" : turn.role === "assistant" ? "\uC5B4\uC2DC\uC2A4\uD134\uD2B8" : "\uC2DC\uC2A4\uD15C";
      return `[${roleLabel}] ${turn.content}`;
    }).join("\n\n");
    const prompt = `\uB2E4\uC74C \uB300\uD654 \uB0B4\uC6A9\uC744 \uBCF4\uACE0 \uBB38\uC7A5\uD615 \uC81C\uBAA9\uC744 \uB9CC\uB4E4\uC5B4 \uC8FC\uC138\uC694. \uC870\uAC74: 20~40\uC790 \uB0B4\uC678, \uC774\uBAA8\uC9C0/\uB530\uC634\uD45C \uAE08\uC9C0, \uC81C\uBAA9\uB9CC \uCD9C\uB825.

\uB300\uD654:
${transcript}`;
    try {
      const title = await this.plugin.requestTitleReply(prompt);
      return this.cleanTitle(title);
    } catch (error) {
      console.error("\uC800\uC7A5\uC6A9 \uC81C\uBAA9 \uC0DD\uC131 \uC2E4\uD328:", error);
      return "";
    }
  }
  cleanTitle(title) {
    return title.replace(/["'`]/g, "").replace(/\s+/g, " ").trim();
  }
};

// src/indexing/metadataStore.ts
var import_fs = require("fs");
var import_path = require("path");
var MetadataStore = class {
  constructor(storePath, indexSignature) {
    this.storePath = storePath;
    this.data = this.loadData(indexSignature);
  }
  /**
   *   
   */
  loadData(indexSignature) {
    if (!(0, import_fs.existsSync)(this.storePath)) {
      return {
        indexSignature,
        updatedAt: Date.now(),
        notes: {},
        chunks: {}
      };
    }
    try {
      const raw = (0, import_fs.readFileSync)(this.storePath, "utf-8");
      const parsed = JSON.parse(raw);
      return {
        indexSignature: parsed.indexSignature || indexSignature,
        updatedAt: typeof parsed.updatedAt === "number" ? parsed.updatedAt : Date.now(),
        notes: parsed.notes || {},
        chunks: parsed.chunks || {}
      };
    } catch (error) {
      console.warn("\uBA54\uD0C0\uB370\uC774\uD130 \uC800\uC7A5\uC18C \uB85C\uB4DC \uC2E4\uD328, \uC0C8\uB85C \uCD08\uAE30\uD654\uD569\uB2C8\uB2E4:", error);
      return {
        indexSignature,
        updatedAt: Date.now(),
        notes: {},
        chunks: {}
      };
    }
  }
  /**
   *    ( )
   */
  persist() {
    (0, import_fs.mkdirSync)((0, import_path.dirname)(this.storePath), { recursive: true });
    this.data.updatedAt = Date.now();
    const tempPath = `${this.storePath}.tmp`;
    (0, import_fs.writeFileSync)(tempPath, JSON.stringify(this.data), "utf-8");
    (0, import_fs.renameSync)(tempPath, this.storePath);
  }
  /**
   *   
   */
  getIndexSignature() {
    return this.data.indexSignature;
  }
  /**
   *  
   */
  reset(indexSignature) {
    this.data = {
      indexSignature,
      updatedAt: Date.now(),
      notes: {},
      chunks: {}
    };
    this.persist();
  }
  /**
   *    
   */
  upsertNote(note) {
    this.data.notes[note.id] = { ...note };
    this.persist();
  }
  /**
   *   
   */
  getNoteByPath(path) {
    const note = Object.values(this.data.notes).find((item) => item.path === path);
    return note ? { ...note } : null;
  }
  /**
   * ID  
   */
  getNoteById(id) {
    const note = this.data.notes[id];
    return note ? { ...note } : null;
  }
  /**
   *   
   */
  getAllNotes() {
    return Object.values(this.data.notes).sort((a, b) => b.updatedAt - a.updatedAt).map((note) => ({ ...note }));
  }
  /**
   *  
   */
  deleteNote(id) {
    delete this.data.notes[id];
    this.persist();
  }
  /**
   *  
   */
  insertChunks(chunks) {
    for (const chunk of chunks) {
      this.data.chunks[chunk.id] = { ...chunk };
    }
    this.persist();
  }
  /**
   *   
   */
  deleteChunksByNoteId(noteId) {
    for (const [chunkId, chunk] of Object.entries(this.data.chunks)) {
      if (chunk.noteId === noteId) {
        delete this.data.chunks[chunkId];
      }
    }
    this.persist();
  }
  /**
   *   
   */
  getChunksByNoteId(noteId) {
    return Object.values(this.data.chunks).filter((chunk) => chunk.noteId === noteId).sort((a, b) => a.position - b.position).map((chunk) => ({ ...chunk }));
  }
  /**
   * ID  
   */
  getChunkById(id) {
    const chunk = this.data.chunks[id];
    return chunk ? { ...chunk } : null;
  }
  /**
   *   
   */
  getAllChunks() {
    return Object.values(this.data.chunks).map((chunk) => ({ ...chunk }));
  }
  /**
   *  
   */
  close() {
  }
};

// src/indexing/embeddings.ts
var import_obsidian8 = require("obsidian");
var EmbeddingGenerator2 = class {
  constructor(config) {
    this.pipeline = null;
    this.pipelineFactory = null;
    this.config = config;
  }
  /**
   *  
   */
  async initialize() {
    if (this.config.provider === "local") {
      if (this.pipeline) {
        return;
      }
      console.log(`\uB85C\uCEEC \uC784\uBCA0\uB529 \uBAA8\uB378 \uB85C\uB529 \uC911: ${this.config.model}`);
      console.log(`\uBAA8\uB378\uC740 HuggingFace\uC5D0\uC11C \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5B4 \uB85C\uCEEC\uC5D0 \uCE90\uC2DC\uB429\uB2C8\uB2E4.`);
      const pipelineFactory = await this.loadPipelineFactory();
      this.pipeline = await pipelineFactory("feature-extraction", this.config.model);
      console.log("\uC784\uBCA0\uB529 \uBAA8\uB378 \uB85C\uB529 \uC644\uB8CC");
    } else {
      console.log(`API \uAE30\uBC18 \uC784\uBCA0\uB529 \uC0AC\uC6A9: ${this.config.provider}`);
    }
  }
  /**
   *    
   */
  async embed(text) {
    if (this.config.provider === "local") {
      return this.embedLocal(text);
    } else if (this.config.provider === "gemini") {
      return this.embedGemini(text);
    } else if (this.config.provider === "openai") {
      return this.embedOpenAI(text);
    } else if (this.config.provider === "custom") {
      return this.embedCustom(text);
    }
    throw new Error(`\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uC784\uBCA0\uB529 \uC81C\uACF5\uC790: ${this.config.provider}`);
  }
  /**
   *    
   */
  async embedLocal(text) {
    if (!this.pipeline) {
      await this.initialize();
    }
    if (!this.pipeline) {
      throw new Error("\uC784\uBCA0\uB529 \uD30C\uC774\uD504\uB77C\uC778 \uCD08\uAE30\uD654 \uC2E4\uD328");
    }
    const output = await this.pipeline(text, {
      pooling: "mean",
      normalize: true
    });
    return Array.from(output.data);
  }
  /**
   *     (  )
   */
  async loadPipelineFactory() {
    if (this.pipelineFactory) {
      return this.pipelineFactory;
    }
    const module2 = await import("@xenova/transformers");
    this.pipelineFactory = module2.pipeline;
    return this.pipelineFactory;
  }
  /**
   * Gemini API  
   */
  async embedGemini(text) {
    var _a;
    if (!this.config.apiKey) {
      throw new Error("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    const url = `${this.config.apiUrl}/${this.config.model}:embedContent?key=${this.config.apiKey}`;
    try {
      const response = await (0, import_obsidian8.requestUrl)({
        url,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          content: {
            parts: [{ text }]
          }
        })
      });
      const data = response.json;
      if ((_a = data.embedding) == null ? void 0 : _a.values) {
        return data.embedding.values;
      }
      throw new Error("Gemini API \uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
    } catch (error) {
      console.error("Gemini \uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   * OpenAI API  
   */
  async embedOpenAI(text) {
    var _a, _b;
    if (!this.config.apiKey) {
      throw new Error("OpenAI API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      const response = await (0, import_obsidian8.requestUrl)({
        url: this.config.apiUrl || "https://api.openai.com/v1/embeddings",
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.apiKey}`
        },
        body: JSON.stringify({
          model: this.config.model,
          input: text
        })
      });
      const data = response.json;
      if ((_b = (_a = data.data) == null ? void 0 : _a[0]) == null ? void 0 : _b.embedding) {
        return data.data[0].embedding;
      }
      throw new Error("OpenAI API \uC751\uB2F5 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
    } catch (error) {
      console.error("OpenAI \uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *  API  
   */
  async embedCustom(text) {
    var _a, _b;
    if (!this.config.apiUrl) {
      throw new Error("\uCEE4\uC2A4\uD140 API URL\uC774 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      const headers = {
        "Content-Type": "application/json"
      };
      if (this.config.apiKey) {
        headers["Authorization"] = `Bearer ${this.config.apiKey}`;
      }
      const response = await (0, import_obsidian8.requestUrl)({
        url: this.config.apiUrl,
        method: "POST",
        headers,
        body: JSON.stringify({
          model: this.config.model,
          input: text
        })
      });
      const data = response.json;
      if (!Array.isArray(data) && ((_b = (_a = data.data) == null ? void 0 : _a[0]) == null ? void 0 : _b.embedding)) {
        return data.data[0].embedding;
      }
      if (Array.isArray(data)) {
        return data;
      }
      throw new Error("\uCEE4\uC2A4\uD140 API \uC751\uB2F5 \uD615\uC2DD\uC744 \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4");
    } catch (error) {
      console.error("\uCEE4\uC2A4\uD140 \uC784\uBCA0\uB529 \uC0DD\uC131 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *     
   */
  async embedBatch(texts) {
    const embeddings = [];
    for (const text of texts) {
      const embedding = await this.embed(text);
      embeddings.push(embedding);
    }
    return embeddings;
  }
};

// src/indexing/parser.ts
var import_gray_matter = __toESM(require_gray_matter());
var import_crypto = require("crypto");
function parseMarkdown(filePath, content) {
  const parsed = (0, import_gray_matter.default)(content);
  const frontmatter = parsed.data;
  const bodyContent = parsed.content;
  const title = frontmatter.title || extractTitleFromPath(filePath);
  const tags = extractTags(bodyContent, frontmatter);
  const links = extractLinks(bodyContent);
  const sections = extractSections(bodyContent);
  return {
    content: bodyContent,
    frontmatter,
    tags,
    links,
    title,
    sections
  };
}
function extractTitleFromPath(filePath) {
  const fileName = filePath.split("/").pop() || "";
  return fileName.replace(/\.md$/, "");
}
function extractTags(content, frontmatter) {
  const tags = /* @__PURE__ */ new Set();
  if (Array.isArray(frontmatter.tags)) {
    frontmatter.tags.forEach((tag) => {
      if (typeof tag === "string") {
        tags.add(tag.replace(/^#/, ""));
      }
    });
  }
  const hashtagRegex = /#([a-zA-Z0-9-_-]+)/g;
  let match;
  while ((match = hashtagRegex.exec(content)) !== null) {
    tags.add(match[1]);
  }
  return Array.from(tags);
}
function extractLinks(content) {
  const links = /* @__PURE__ */ new Set();
  const linkRegex = /\[\[([^\]]+)\]\]/g;
  let match;
  while ((match = linkRegex.exec(content)) !== null) {
    const link = match[1].split("|")[0].trim();
    links.add(link);
  }
  return Array.from(links);
}
function extractSections(content) {
  const sections = [];
  const lines = content.split("\n");
  let currentSection = null;
  let currentContent = [];
  let position = 0;
  for (const line of lines) {
    const headerMatch = line.match(/^(#{1,6})\s+(.+)$/);
    if (headerMatch) {
      if (currentSection) {
        currentSection.content = currentContent.join("\n").trim();
        sections.push(currentSection);
      }
      currentSection = {
        heading: headerMatch[2].trim(),
        content: "",
        level: headerMatch[1].length,
        position
      };
      currentContent = [];
    } else if (currentSection) {
      currentContent.push(line);
    } else {
      if (sections.length === 0) {
        currentSection = {
          heading: "",
          content: "",
          level: 0,
          position
        };
      }
      currentContent.push(line);
    }
    position += line.length + 1;
  }
  if (currentSection) {
    currentSection.content = currentContent.join("\n").trim();
    sections.push(currentSection);
  }
  return sections;
}
function computeHash(content) {
  return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
}

// src/indexing/chunker.ts
function estimateTokenCount(text) {
  const nonKoreanText = text.replace(/[-]/g, " ");
  const words = nonKoreanText.split(/\s+/).filter((w) => w.length > 0).length;
  const koreanChars = (text.match(/[-]/g) || []).length;
  return Math.ceil(words * 1.3 + koreanChars);
}
function chunkText(noteId, sections, options2 = {}) {
  const chunkSize = options2.chunkSize || 400;
  const chunkOverlap = options2.chunkOverlap || 50;
  const chunks = [];
  for (const section of sections) {
    const sectionText = section.heading ? `# ${section.heading}

${section.content}` : section.content;
    if (!sectionText.trim()) {
      continue;
    }
    const tokenCount = estimateTokenCount(sectionText);
    if (tokenCount <= chunkSize) {
      chunks.push({
        id: `${noteId}-chunk-${chunks.length}`,
        noteId,
        text: sectionText,
        position: section.position,
        tokenCount,
        section: section.heading
      });
      continue;
    }
    const sentences = splitIntoSentences(sectionText);
    let currentChunk = [];
    let currentTokens = 0;
    for (const sentence of sentences) {
      const sentenceTokens = estimateTokenCount(sentence);
      if (currentTokens + sentenceTokens <= chunkSize) {
        currentChunk.push(sentence);
        currentTokens += sentenceTokens;
      } else {
        if (currentChunk.length > 0) {
          const chunkText2 = currentChunk.join(" ");
          chunks.push({
            id: `${noteId}-chunk-${chunks.length}`,
            noteId,
            text: chunkText2,
            position: section.position,
            tokenCount: currentTokens,
            section: section.heading
          });
          const overlapSentences = getOverlapSentences(currentChunk, chunkOverlap);
          currentChunk = overlapSentences;
          currentTokens = estimateTokenCount(currentChunk.join(" "));
        }
        currentChunk.push(sentence);
        currentTokens += sentenceTokens;
      }
    }
    if (currentChunk.length > 0) {
      const chunkText2 = currentChunk.join(" ");
      chunks.push({
        id: `${noteId}-chunk-${chunks.length}`,
        noteId,
        text: chunkText2,
        position: section.position,
        tokenCount: currentTokens,
        section: section.heading
      });
    }
  }
  return chunks;
}
function splitIntoSentences(text) {
  const sentences = text.split(/([.!?]\s+)/).filter((s) => s.trim());
  const result = [];
  for (let i = 0; i < sentences.length; i += 2) {
    const sentence = sentences[i];
    const punctuation = sentences[i + 1] || "";
    result.push(sentence + punctuation);
  }
  return result.filter((s) => s.trim());
}
function getOverlapSentences(sentences, targetTokens) {
  const overlap = [];
  let tokens = 0;
  for (let i = sentences.length - 1; i >= 0; i--) {
    const sentence = sentences[i];
    const sentenceTokens = estimateTokenCount(sentence);
    if (tokens + sentenceTokens > targetTokens) {
      break;
    }
    overlap.unshift(sentence);
    tokens += sentenceTokens;
  }
  return overlap;
}

// src/indexing/indexer.ts
var import_crypto2 = require("crypto");

// src/indexing/vectorStore.ts
var import_fs2 = require("fs");
var import_path2 = require("path");
var VectorStore = class {
  constructor(storePath, indexSignature) {
    this.storePath = storePath;
    this.data = this.loadData(indexSignature);
  }
  /**
   *   
   */
  loadData(indexSignature) {
    if (!(0, import_fs2.existsSync)(this.storePath)) {
      return {
        indexSignature,
        dimension: null,
        updatedAt: Date.now(),
        embeddings: {}
      };
    }
    try {
      const raw = (0, import_fs2.readFileSync)(this.storePath, "utf-8");
      const parsed = JSON.parse(raw);
      return {
        indexSignature: parsed.indexSignature || indexSignature,
        dimension: typeof parsed.dimension === "number" ? parsed.dimension : null,
        updatedAt: typeof parsed.updatedAt === "number" ? parsed.updatedAt : Date.now(),
        embeddings: parsed.embeddings || {}
      };
    } catch (error) {
      console.warn("\uBCA1\uD130 \uC800\uC7A5\uC18C \uB85C\uB4DC \uC2E4\uD328, \uC0C8\uB85C \uCD08\uAE30\uD654\uD569\uB2C8\uB2E4:", error);
      return {
        indexSignature,
        dimension: null,
        updatedAt: Date.now(),
        embeddings: {}
      };
    }
  }
  /**
   *    ( )
   */
  persist() {
    (0, import_fs2.mkdirSync)((0, import_path2.dirname)(this.storePath), { recursive: true });
    this.data.updatedAt = Date.now();
    const tempPath = `${this.storePath}.tmp`;
    (0, import_fs2.writeFileSync)(tempPath, JSON.stringify(this.data), "utf-8");
    (0, import_fs2.renameSync)(tempPath, this.storePath);
  }
  /**
   *   
   */
  getIndexSignature() {
    return this.data.indexSignature;
  }
  /**
   *   
   */
  getDimension() {
    return this.data.dimension;
  }
  /**
   *  
   */
  reset(indexSignature) {
    this.data = {
      indexSignature,
      dimension: null,
      updatedAt: Date.now(),
      embeddings: {}
    };
    this.persist();
  }
  /**
   *  
   */
  storeEmbedding(chunkId, embedding) {
    if (this.data.dimension === null) {
      this.data.dimension = embedding.length;
    }
    if (embedding.length !== this.data.dimension) {
      throw new Error(
        `\uC784\uBCA0\uB529 \uCC28\uC6D0 \uBD88\uC77C\uCE58: expected=${this.data.dimension}, actual=${embedding.length}`
      );
    }
    this.data.embeddings[chunkId] = embedding;
    this.persist();
  }
  /**
   *    
   */
  storeEmbeddings(embeddings) {
    for (const [chunkId, embedding] of embeddings.entries()) {
      if (this.data.dimension === null) {
        this.data.dimension = embedding.length;
      }
      if (embedding.length !== this.data.dimension) {
        throw new Error(
          `\uC784\uBCA0\uB529 \uCC28\uC6D0 \uBD88\uC77C\uCE58: expected=${this.data.dimension}, actual=${embedding.length}`
        );
      }
      this.data.embeddings[chunkId] = embedding;
    }
    this.persist();
  }
  /**
   *  
   */
  getEmbedding(chunkId) {
    return this.data.embeddings[chunkId] || null;
  }
  /**
   *   
   */
  getAllEmbeddings() {
    const result = /* @__PURE__ */ new Map();
    for (const [chunkId, embedding] of Object.entries(this.data.embeddings)) {
      result.set(chunkId, embedding);
    }
    return result;
  }
  /**
   *   
   */
  deleteEmbedding(chunkId) {
    delete this.data.embeddings[chunkId];
    if (Object.keys(this.data.embeddings).length === 0) {
      this.data.dimension = null;
    }
    this.persist();
  }
  /**
   *    
   */
  deleteEmbeddings(chunkIds) {
    if (chunkIds.length === 0) {
      return;
    }
    for (const chunkId of chunkIds) {
      delete this.data.embeddings[chunkId];
    }
    if (Object.keys(this.data.embeddings).length === 0) {
      this.data.dimension = null;
    }
    this.persist();
  }
  /**
   *   
   */
  cosineSimilarity(a, b) {
    if (a.length !== b.length) {
      throw new Error("\uBCA1\uD130 \uAE38\uC774\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4");
    }
    let dotProduct = 0;
    let normA = 0;
    let normB = 0;
    for (let i = 0; i < a.length; i++) {
      dotProduct += a[i] * b[i];
      normA += a[i] * a[i];
      normB += b[i] * b[i];
    }
    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
  }
  /**
   *   - Top-K   
   * 
   * :         .
   *       ,    :
   * - ANN(Approximate Nearest Neighbor)   (FAISS, HNSW )
   * -     (Chroma, Qdrant )
   * -     
   */
  search(queryEmbedding, k = 8) {
    const allEmbeddings = this.getAllEmbeddings();
    const scores = [];
    for (const [chunkId, embedding] of allEmbeddings.entries()) {
      const score = this.cosineSimilarity(queryEmbedding, embedding);
      scores.push({ chunkId, score });
    }
    scores.sort((a, b) => b.score - a.score);
    return scores.slice(0, k);
  }
  /**
   *  
   */
  close() {
  }
};

// src/indexing/vectorIndexFactory.ts
function createVectorIndex(config, indexSignature) {
  const engine = config.vectorIndexEngine || "json";
  if (engine === "json") {
    return new VectorStore(config.vectorStorePath, indexSignature);
  }
  throw new Error(`\uC544\uC9C1 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uBCA1\uD130 \uC778\uB371\uC2A4 \uC5D4\uC9C4\uC785\uB2C8\uB2E4: ${engine}`);
}

// src/indexing/queryKeywordEmbedding.ts
function buildQueryEmbeddingText(query) {
  const normalizedQuery = query.trim();
  if (!normalizedQuery) {
    return "";
  }
  try {
    const keywords = extractKeywords(normalizedQuery).map((keyword) => keyword.trim()).filter((keyword) => keyword.length > 0);
    if (keywords.length === 0) {
      return normalizedQuery;
    }
    return keywords.join(" ");
  } catch (error) {
    console.warn("\uC9C8\uC758 \uD0A4\uC6CC\uB4DC \uCD94\uCD9C \uC2E4\uD328, \uC6D0\uBB38 \uC9C8\uC758\uB97C \uC0AC\uC6A9\uD569\uB2C8\uB2E4:", error);
    return normalizedQuery;
  }
}

// src/indexing/indexer.ts
var Indexer = class {
  constructor(config) {
    this.config = config;
    this.indexSignature = this.generateIndexSignature();
    this.metadataStore = new MetadataStore(config.metaStorePath, this.indexSignature);
    this.vectorStore = createVectorIndex(config, this.indexSignature);
    const embeddingConfig = {
      provider: config.embeddingProvider,
      model: config.embeddingModel,
      apiKey: config.embeddingApiKey,
      apiUrl: config.embeddingApiUrl
    };
    this.embeddingGenerator = new EmbeddingGenerator2(embeddingConfig);
  }
  /**
   *  -   
   */
  async initialize() {
    await this.embeddingGenerator.initialize();
    const metadataSignature = this.metadataStore.getIndexSignature();
    const vectorSignature = this.vectorStore.getIndexSignature();
    if (metadataSignature !== this.indexSignature || vectorSignature !== this.indexSignature) {
      console.log("\uC784\uBCA0\uB529 \uBAA8\uB378 \uBCC0\uACBD \uAC10\uC9C0: \uAE30\uC874 \uC778\uB371\uC2A4\uB97C \uCD08\uAE30\uD654\uD569\uB2C8\uB2E4.");
      this.metadataStore.reset(this.indexSignature);
      this.vectorStore.reset(this.indexSignature);
    }
  }
  /**
   *   
   */
  async indexFile(filePath, content) {
    try {
      const hash = computeHash(content);
      const existingNote = this.metadataStore.getNoteByPath(filePath);
      if (existingNote && existingNote.hash === hash) {
        console.log(`\uD30C\uC77C \uBCC0\uACBD \uC5C6\uC74C, \uC2A4\uD0B5: ${filePath}`);
        return;
      }
      const parsed = parseMarkdown(filePath, content);
      const noteId = this.generateNoteId(filePath);
      const noteMetadata = {
        id: noteId,
        path: filePath,
        title: parsed.title,
        tags: parsed.tags,
        links: parsed.links,
        frontmatter: parsed.frontmatter,
        updatedAt: Date.now(),
        hash
      };
      this.metadataStore.upsertNote(noteMetadata);
      if (existingNote) {
        const oldChunks = this.metadataStore.getChunksByNoteId(noteId);
        this.vectorStore.deleteEmbeddings(oldChunks.map((c) => c.id));
        this.metadataStore.deleteChunksByNoteId(noteId);
      }
      const chunks = chunkText(noteId, parsed.sections, {
        chunkSize: this.config.chunkSize,
        chunkOverlap: this.config.chunkOverlap
      });
      if (chunks.length === 0) {
        console.log(`\uCCAD\uD06C \uC5C6\uC74C: ${filePath}`);
        return;
      }
      this.metadataStore.insertChunks(chunks);
      console.log(`\uC784\uBCA0\uB529 \uC0DD\uC131 \uC911: ${filePath} (${chunks.length}\uAC1C \uCCAD\uD06C)`);
      for (const chunk of chunks) {
        const embedding = await this.embeddingGenerator.embed(chunk.text);
        this.vectorStore.storeEmbedding(chunk.id, embedding);
      }
      console.log(`\uC778\uB371\uC2F1 \uC644\uB8CC: ${filePath}`);
    } catch (error) {
      console.error(`\uC778\uB371\uC2F1 \uC2E4\uD328: ${filePath}`, error);
      throw error;
    }
  }
  /**
   *   
   */
  deleteFile(filePath) {
    const note = this.metadataStore.getNoteByPath(filePath);
    if (!note) {
      return;
    }
    const chunks = this.metadataStore.getChunksByNoteId(note.id);
    this.vectorStore.deleteEmbeddings(chunks.map((c) => c.id));
    this.metadataStore.deleteChunksByNoteId(note.id);
    this.metadataStore.deleteNote(note.id);
    console.log(`\uD30C\uC77C \uC0AD\uC81C \uC644\uB8CC: ${filePath}`);
  }
  /**
   * 
   */
  async search(query, k) {
    const topK = k || this.config.topK;
    const queryTextForEmbedding = buildQueryEmbeddingText(query);
    const queryEmbedding = await this.embeddingGenerator.embed(queryTextForEmbedding || query);
    const currentDimension = this.vectorStore.getDimension();
    if (currentDimension !== null && queryEmbedding.length !== currentDimension) {
      console.warn(
        `\uCFFC\uB9AC \uCC28\uC6D0(${queryEmbedding.length})\uACFC \uC778\uB371\uC2A4 \uCC28\uC6D0(${currentDimension})\uC774 \uB2EC\uB77C \uAC80\uC0C9\uC744 \uAC74\uB108\uB701\uB2C8\uB2E4.`
      );
      return [];
    }
    const results = this.vectorStore.search(queryEmbedding, topK);
    const searchResults = results.map((result) => {
      const chunk = this.metadataStore.getChunkById(result.chunkId);
      if (!chunk) {
        return null;
      }
      return {
        chunk,
        score: result.score
      };
    }).filter((r) => r !== null);
    return searchResults;
  }
  /**
   *     
   */
  getSearchResultsWithMetadata(searchResults) {
    return searchResults.map((result) => {
      const note = this.metadataStore.getNoteById(result.chunk.noteId);
      if (!note) {
        return null;
      }
      return {
        chunk: result.chunk,
        note,
        score: result.score
      };
    }).filter((r) => r !== null);
  }
  /**
   *  ID 
   */
  generateNoteId(filePath) {
    return (0, import_crypto2.createHash)("sha256").update(filePath).digest("hex").substring(0, 16);
  }
  /**
   *   
   */
  generateIndexSignature() {
    const source = [
      this.config.embeddingProvider,
      this.config.embeddingModel,
      this.config.embeddingApiUrl || ""
    ].join("::");
    return (0, import_crypto2.createHash)("sha256").update(source).digest("hex").substring(0, 16);
  }
  /**
   *  
   */
  close() {
    this.metadataStore.close();
    this.vectorStore.close();
  }
};

// src/vaultWatcher.ts
var import_obsidian9 = require("obsidian");
var VaultWatcher = class {
  //    
  constructor(vault) {
    this.indexer = null;
    this.isIndexing = false;
    this.indexQueue = /* @__PURE__ */ new Set();
    this.indexingInProgress = /* @__PURE__ */ new Set();
    this.vault = vault;
  }
  /**
   *  
   */
  setIndexer(indexer) {
    this.indexer = indexer;
  }
  /**
   *   
   */
  async indexVault() {
    if (!this.indexer) {
      throw new Error("\uC778\uB371\uC11C\uAC00 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    if (this.isIndexing) {
      new import_obsidian9.Notice("\uC774\uBBF8 \uC778\uB371\uC2F1\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4");
      return;
    }
    this.isIndexing = true;
    new import_obsidian9.Notice("\uBCFC\uD2B8 \uC778\uB371\uC2F1\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4...");
    try {
      const mdFiles = this.vault.getMarkdownFiles();
      console.log(`\uC778\uB371\uC2F1\uD560 \uD30C\uC77C \uC218: ${mdFiles.length}`);
      let indexed = 0;
      let failed = 0;
      for (const file of mdFiles) {
        try {
          const content = await this.vault.read(file);
          await this.indexer.indexFile(file.path, content);
          indexed++;
          if (indexed % 10 === 0) {
            new import_obsidian9.Notice(`\uC778\uB371\uC2F1 \uC9C4\uD589 \uC911: ${indexed}/${mdFiles.length}`);
          }
        } catch (error) {
          console.error(`\uD30C\uC77C \uC778\uB371\uC2F1 \uC2E4\uD328: ${file.path}`, error);
          failed++;
        }
      }
      new import_obsidian9.Notice(`\uC778\uB371\uC2F1 \uC644\uB8CC: ${indexed}\uAC1C \uC131\uACF5, ${failed}\uAC1C \uC2E4\uD328`);
    } catch (error) {
      console.error("\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC911 \uC624\uB958:", error);
      new import_obsidian9.Notice("\uC778\uB371\uC2F1 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
    } finally {
      this.isIndexing = false;
    }
  }
  /**
   *    
   */
  async onFileCreate(file) {
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    try {
      const content = await this.vault.read(file);
      await this.indexer.indexFile(file.path, content);
      console.log(`\uD30C\uC77C \uC0DD\uC131 \uC778\uB371\uC2F1: ${file.path}`);
    } catch (error) {
      console.error(`\uD30C\uC77C \uC0DD\uC131 \uC778\uB371\uC2F1 \uC2E4\uD328: ${file.path}`, error);
    }
  }
  /**
   *    
   */
  async onFileModify(file) {
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    this.indexQueue.add(file.path);
    setTimeout(async () => {
      if (this.indexQueue.has(file.path) && !this.indexingInProgress.has(file.path)) {
        this.indexQueue.delete(file.path);
        this.indexingInProgress.add(file.path);
        try {
          const content = await this.vault.read(file);
          if (this.indexer) {
            await this.indexer.indexFile(file.path, content);
          }
          console.log(`\uD30C\uC77C \uC218\uC815 \uC778\uB371\uC2F1: ${file.path}`);
        } catch (error) {
          console.error(`\uD30C\uC77C \uC218\uC815 \uC778\uB371\uC2F1 \uC2E4\uD328: ${file.path}`, error);
        } finally {
          this.indexingInProgress.delete(file.path);
        }
      }
    }, 100);
  }
  /**
   *    
   */
  onFileDelete(file) {
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    try {
      this.indexer.deleteFile(file.path);
      console.log(`\uD30C\uC77C \uC0AD\uC81C \uCC98\uB9AC: ${file.path}`);
    } catch (error) {
      console.error(`\uD30C\uC77C \uC0AD\uC81C \uCC98\uB9AC \uC2E4\uD328: ${file.path}`, error);
    }
  }
  /**
   *     
   */
  async onFileRename(file, oldPath) {
    if (!this.indexer || file.extension !== "md") {
      return;
    }
    try {
      this.indexer.deleteFile(oldPath);
      const content = await this.vault.read(file);
      if (this.indexer) {
        await this.indexer.indexFile(file.path, content);
      }
      console.log(`\uD30C\uC77C \uC774\uB984 \uBCC0\uACBD \uCC98\uB9AC: ${oldPath} -> ${file.path}`);
    } catch (error) {
      console.error(`\uD30C\uC77C \uC774\uB984 \uBCC0\uACBD \uCC98\uB9AC \uC2E4\uD328: ${oldPath} -> ${file.path}`, error);
    }
  }
};

// src/main.ts
var import_path3 = require("path");

// src/chatSessionStore.ts
var SESSION_FOLDER = ".ovl/chat-sessions";
async function saveChatSession(vault, sessionId, turns) {
  const normalizedSessionId = sessionId.trim();
  if (!normalizedSessionId) {
    throw new Error("\uC138\uC158 \uC81C\uBAA9\uC774 \uBE44\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
  }
  await ensureFolderExists3(vault, SESSION_FOLDER);
  const path = normalizePathSafe(`${SESSION_FOLDER}/${buildSessionFileName(normalizedSessionId)}`);
  const payload = {
    sessionId: normalizedSessionId,
    turns,
    updatedAt: (/* @__PURE__ */ new Date()).toISOString()
  };
  const exists = await vault.adapter.exists(path);
  if (exists) {
    await vault.adapter.write(path, JSON.stringify(payload, null, 2));
  } else {
    await vault.create(path, JSON.stringify(payload, null, 2));
  }
  return path;
}
async function listChatSessions(vault) {
  const files = await listSessionFiles(vault);
  const summaries = [];
  for (const file of files) {
    try {
      const raw = await vault.adapter.read(file);
      const parsed = JSON.parse(raw);
      const sessionId = typeof parsed.sessionId === "string" ? parsed.sessionId.trim() : "";
      if (!sessionId) {
        continue;
      }
      const turns = Array.isArray(parsed.turns) ? parsed.turns : [];
      const updatedAt = typeof parsed.updatedAt === "string" && parsed.updatedAt.trim() ? parsed.updatedAt : (/* @__PURE__ */ new Date(0)).toISOString();
      summaries.push({
        sessionId,
        turnCount: turns.length,
        updatedAt
      });
    } catch (e) {
      continue;
    }
  }
  return summaries.sort((left, right) => right.updatedAt.localeCompare(left.updatedAt));
}
async function loadChatSession(vault, sessionId) {
  const normalizedSessionId = sessionId.trim();
  if (!normalizedSessionId) {
    throw new Error("\uBD88\uB7EC\uC62C \uC138\uC158 \uC81C\uBAA9\uC774 \uBE44\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
  }
  const session = await findSessionFileById(vault, normalizedSessionId);
  if (!session) {
    throw new Error("\uC800\uC7A5\uB41C \uB300\uD654 \uAE30\uB85D\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");
  }
  return sanitizeTurns(session.parsed.turns);
}
async function deleteChatSession(vault, sessionId) {
  const normalizedSessionId = sessionId.trim();
  if (!normalizedSessionId) {
    throw new Error("\uC0AD\uC81C\uD560 \uC138\uC158 \uC81C\uBAA9\uC774 \uBE44\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.");
  }
  const session = await findSessionFileById(vault, normalizedSessionId);
  if (!session) {
    throw new Error("\uC0AD\uC81C\uD560 \uB300\uD654 \uAE30\uB85D\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");
  }
  await vault.adapter.remove(session.path);
}
function sanitizeTurns(turns) {
  if (!Array.isArray(turns)) {
    return [];
  }
  const sanitized = [];
  for (const turn of turns) {
    if (!turn || typeof turn !== "object") {
      continue;
    }
    const role = turn.role;
    const content = turn.content;
    const timestamp = turn.timestamp;
    const generationLog = turn.generationLog;
    if (!isConversationRole(role) || typeof content !== "string") {
      continue;
    }
    const nextTurn = {
      role,
      content
    };
    if (typeof timestamp === "string") {
      nextTurn.timestamp = timestamp;
    }
    const sanitizedGenerationLog = sanitizeGenerationLog(generationLog);
    if (sanitizedGenerationLog) {
      nextTurn.generationLog = sanitizedGenerationLog;
    }
    sanitized.push(nextTurn);
  }
  return sanitized;
}
function isConversationRole(value) {
  return value === "user" || value === "assistant" || value === "system";
}
function sanitizeGenerationLog(value) {
  if (!value || typeof value !== "object") {
    return null;
  }
  const raw = value;
  const durationMs = Number(raw.durationMs);
  const startedAt = typeof raw.startedAt === "string" ? raw.startedAt : "";
  const completedAt = typeof raw.completedAt === "string" ? raw.completedAt : "";
  const estimated = typeof raw.estimated === "boolean" ? raw.estimated : false;
  if (!Number.isFinite(durationMs) || !startedAt || !completedAt) {
    return null;
  }
  const log = {
    durationMs,
    startedAt,
    completedAt,
    estimated
  };
  const provider = typeof raw.provider === "string" ? raw.provider.trim() : "";
  if (provider) {
    log.provider = provider;
  }
  const model = typeof raw.model === "string" ? raw.model.trim() : "";
  if (model) {
    log.model = model;
  }
  const inputTokens = Number(raw.inputTokens);
  if (Number.isFinite(inputTokens)) {
    log.inputTokens = inputTokens;
  }
  const outputTokens = Number(raw.outputTokens);
  if (Number.isFinite(outputTokens)) {
    log.outputTokens = outputTokens;
  }
  const totalTokens = Number(raw.totalTokens);
  if (Number.isFinite(totalTokens)) {
    log.totalTokens = totalTokens;
  }
  const tokensPerSecond = Number(raw.tokensPerSecond);
  if (Number.isFinite(tokensPerSecond)) {
    log.tokensPerSecond = tokensPerSecond;
  }
  return log;
}
async function listSessionFiles(vault) {
  const exists = await vault.adapter.exists(SESSION_FOLDER);
  if (!exists) {
    return [];
  }
  const listed = await vault.adapter.list(SESSION_FOLDER);
  return listed.files.filter((path) => path.endsWith(".json"));
}
async function findSessionFileById(vault, sessionId) {
  const files = await listSessionFiles(vault);
  for (const file of files) {
    try {
      const raw = await vault.adapter.read(file);
      const parsed = JSON.parse(raw);
      if (parsed.sessionId !== sessionId) {
        continue;
      }
      return { path: file, parsed };
    } catch (e) {
      continue;
    }
  }
  return null;
}
async function ensureFolderExists3(vault, folder) {
  const normalized = normalizePathSafe(folder).replace(/^\/+/, "");
  if (!normalized) {
    return;
  }
  const segments = normalized.split("/");
  let current = "";
  for (const segment of segments) {
    current = current ? `${current}/${segment}` : segment;
    const exists = await vault.adapter.exists(current);
    if (!exists) {
      await vault.createFolder(current);
    }
  }
}
function buildSessionFileName(sessionId) {
  const safeName = sessionId.replace(/[\\/:*?"<>|]/g, " ").replace(/\s+/g, " ").trim() || "session";
  return `${safeName}-${hashSessionId(sessionId)}.json`;
}
function normalizePathSafe(path) {
  return path.replace(/\\/g, "/").replace(/\/+/g, "/").replace(/^\.\//, "").replace(/\/$/, "");
}
function hashSessionId(sessionId) {
  let hash = 5381;
  for (let index = 0; index < sessionId.length; index += 1) {
    hash = hash * 33 ^ sessionId.charCodeAt(index);
  }
  return Math.abs(hash >>> 0).toString(16);
}

// src/main.ts
var OvlPlugin = class extends import_obsidian10.Plugin {
  constructor() {
    super(...arguments);
    this.settings = { ...DEFAULT_SETTINGS };
    this.lastSavedSettings = { ...DEFAULT_SETTINGS };
    this.apiClient = null;
    this.indexer = null;
    this.vaultWatcher = null;
    this.indexingEventsRegistered = false;
  }
  async onload() {
    await this.loadSettings();
    this.apiClient = new OvlApiClient(
      () => this.settings,
      (context, detail) => appendErrorLog(this.app, this.manifest, context, detail)
    );
    if (this.settings.indexingEnabled) {
      await this.initializeIndexing();
    }
    this.registerView(VIEW_TYPE_OVL_CHAT, (leaf) => new ChatView(leaf, this));
    this.addRibbonIcon("message-circle", "OVL \uB300\uD654 \uC5F4\uAE30", () => {
      void this.openChatView();
    });
    this.addCommand({
      id: "ovl-open-chat",
      name: "OVL \uB300\uD654 \uCC3D \uC5F4\uAE30",
      callback: () => {
        void this.openChatView();
      }
    });
    this.addCommand({
      id: "ovl-save-conversation",
      name: "\uB300\uD654 JSON\uC5D0\uC11C \uB9C8\uD06C\uB2E4\uC6B4 \uC800\uC7A5",
      callback: () => {
        new SaveConversationModal(this, (form) => {
          void this.handleSaveConversation(form);
        }).open();
      }
    });
    this.addCommand({
      id: "ovl-index-vault",
      name: "\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC2DC\uC791",
      callback: () => {
        void this.startIndexing();
      }
    });
    this.addSettingTab(new OvlSettingTab(this));
  }
  onunload() {
    this.app.workspace.getLeavesOfType(VIEW_TYPE_OVL_CHAT).forEach((leaf) => {
      leaf.detach();
    });
    if (this.indexer) {
      this.indexer.close();
    }
  }
  /**
   *   
   */
  async initializeIndexing() {
    try {
      if (this.indexer) {
        this.indexer.close();
        this.indexer = null;
      }
      const dataDir = (0, import_path3.join)(
        // @ts-ignore - Obsidian API   
        this.app.vault.adapter.basePath,
        ".obsidian",
        "plugins",
        this.manifest.id
      );
      const metaStorePath = (0, import_path3.join)(dataDir, "meta.json");
      const vectorStorePath = (0, import_path3.join)(dataDir, "vectors.json");
      this.indexer = new Indexer({
        chunkSize: this.settings.chunkSize,
        chunkOverlap: this.settings.chunkOverlap,
        topK: this.settings.topK,
        vectorIndexEngine: "json",
        embeddingProvider: this.settings.embeddingProvider,
        embeddingModel: this.settings.embeddingModel,
        embeddingApiKey: this.settings.embeddingApiKey || this.settings.apiKey,
        embeddingApiUrl: this.getEmbeddingApiUrl(),
        metaStorePath,
        vectorStorePath
      });
      await this.indexer.initialize();
      this.vaultWatcher = new VaultWatcher(this.app.vault);
      this.vaultWatcher.setIndexer(this.indexer);
      if (!this.indexingEventsRegistered) {
        this.registerEvent(
          this.app.vault.on("create", (file) => {
            var _a;
            if (file instanceof import_obsidian10.TFile) {
              void ((_a = this.vaultWatcher) == null ? void 0 : _a.onFileCreate(file));
            }
          })
        );
        this.registerEvent(
          this.app.vault.on("modify", (file) => {
            var _a;
            if (file instanceof import_obsidian10.TFile) {
              void ((_a = this.vaultWatcher) == null ? void 0 : _a.onFileModify(file));
            }
          })
        );
        this.registerEvent(
          this.app.vault.on("delete", (file) => {
            var _a;
            if (file instanceof import_obsidian10.TFile) {
              (_a = this.vaultWatcher) == null ? void 0 : _a.onFileDelete(file);
            }
          })
        );
        this.registerEvent(
          this.app.vault.on("rename", (file, oldPath) => {
            var _a;
            if (file instanceof import_obsidian10.TFile) {
              void ((_a = this.vaultWatcher) == null ? void 0 : _a.onFileRename(file, oldPath));
            }
          })
        );
        this.indexingEventsRegistered = true;
      }
      console.log("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654 \uC644\uB8CC");
    } catch (error) {
      console.error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654 \uC2E4\uD328:", error);
      new import_obsidian10.Notice("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4");
    }
  }
  /**
   *   
   */
  async startIndexing() {
    if (!this.settings.indexingEnabled) {
      new import_obsidian10.Notice("\uBA3C\uC800 \uC124\uC815\uC5D0\uC11C \uC778\uB371\uC2F1\uC744 \uD65C\uC131\uD654\uD574 \uC8FC\uC138\uC694");
      return;
    }
    if (!this.indexer) {
      await this.initializeIndexing();
    }
    if (!this.vaultWatcher) {
      new import_obsidian10.Notice("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
      return;
    }
    try {
      await this.vaultWatcher.indexVault();
    } catch (error) {
      console.error("\uBCFC\uD2B8 \uC778\uB371\uC2F1 \uC2E4\uD328:", error);
      new import_obsidian10.Notice("\uBCFC\uD2B8 \uC778\uB371\uC2F1\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4");
    }
  }
  /**
   *   
   */
  async search(query) {
    if (!this.indexer) {
      throw new Error("\uC778\uB371\uC2F1\uC774 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    const searchResults = await this.indexer.search(query);
    return this.indexer.getSearchResultsWithMetadata(searchResults);
  }
  async openChatView() {
    const existingLeaf = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVL_CHAT)[0];
    const leaf = existingLeaf != null ? existingLeaf : this.app.workspace.getRightLeaf(false);
    if (!leaf) {
      new import_obsidian10.Notice("\uB300\uD654 \uCC3D\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    await leaf.setViewState({ type: VIEW_TYPE_OVL_CHAT, active: true });
    this.app.workspace.revealLeaf(leaf);
  }
  async requestAssistantReply(turns) {
    if (!this.apiClient) {
      throw new Error("API \uD074\uB77C\uC774\uC5B8\uD2B8\uB97C \uCD08\uAE30\uD654\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    return this.apiClient.requestAssistantReply(turns);
  }
  async requestAssistantReplyStream(turns, options2) {
    if (!this.apiClient) {
      throw new Error("API \uD074\uB77C\uC774\uC5B8\uD2B8\uB97C \uCD08\uAE30\uD654\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    return this.apiClient.requestAssistantReplyStream(turns, options2);
  }
  async requestTitleReply(prompt) {
    if (!this.apiClient) {
      throw new Error("API \uD074\uB77C\uC774\uC5B8\uD2B8\uB97C \uCD08\uAE30\uD654\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
    return this.apiClient.requestTitleReply(prompt);
  }
  async saveConversationFromTurns(sessionId, turns, outputFolder) {
    return saveConversationFromTurns(this.app.vault, sessionId, turns, outputFolder);
  }
  async saveChatSession(sessionId, turns) {
    return saveChatSession(this.app.vault, sessionId, turns);
  }
  async listChatSessions() {
    return listChatSessions(this.app.vault);
  }
  async loadChatSession(sessionId) {
    return loadChatSession(this.app.vault, sessionId);
  }
  async deleteChatSession(sessionId) {
    await deleteChatSession(this.app.vault, sessionId);
  }
  async loadSettings() {
    this.settings = { ...DEFAULT_SETTINGS, ...await this.loadData() };
    let changed = false;
    if (this.settings.embeddingProvider === "local") {
      this.settings.embeddingProvider = "gemini";
      this.settings.embeddingModel = EMBEDDING_PRESETS.gemini.model;
      this.settings.embeddingApiUrl = EMBEDDING_PRESETS.gemini.apiUrl || "";
      changed = true;
    }
    if (changed) {
      await this.saveSettings();
    }
    this.lastSavedSettings = { ...this.settings };
  }
  async saveSettings() {
    var _a, _b;
    const previousSettings = { ...this.lastSavedSettings };
    await this.saveData(this.settings);
    this.lastSavedSettings = { ...this.settings };
    if (previousSettings.indexingEnabled !== this.settings.indexingEnabled) {
      if (!this.settings.indexingEnabled) {
        (_a = this.indexer) == null ? void 0 : _a.close();
        this.indexer = null;
        (_b = this.vaultWatcher) == null ? void 0 : _b.setIndexer(null);
        this.vaultWatcher = null;
      } else {
        await this.initializeIndexing();
      }
      return;
    }
    if (!this.settings.indexingEnabled || !this.indexer) {
      return;
    }
    if (this.shouldReinitializeIndexing(previousSettings, this.settings)) {
      await this.initializeIndexing();
      new import_obsidian10.Notice("\uC784\uBCA0\uB529 \uC124\uC815\uC774 \uBCC0\uACBD\uB418\uC5B4 \uC7AC\uC778\uB371\uC2F1\uC774 \uD544\uC694\uD569\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C \uC804\uCCB4 \uC784\uBCA0\uB529\uC744 \uC2E4\uD589\uD574 \uC8FC\uC138\uC694.");
    }
  }
  async handleSaveConversation(form) {
    try {
      if (!form.inputPath) {
        new import_obsidian10.Notice("JSON \uD30C\uC77C \uACBD\uB85C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
        return;
      }
      if (!form.sessionId) {
        new import_obsidian10.Notice("\uC138\uC158 ID\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");
        return;
      }
      const jsonPath = (0, import_obsidian10.normalizePath)(form.inputPath).replace(/^\/+/, "");
      const jsonExists = await this.app.vault.adapter.exists(jsonPath);
      if (!jsonExists) {
        new import_obsidian10.Notice("JSON \uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      const jsonContent = await this.app.vault.adapter.read(jsonPath);
      const turns = parseTurns(jsonContent);
      const outputFolder = form.outputFolder ? (0, import_obsidian10.normalizePath)(form.outputFolder).replace(/^\/+/, "") : "";
      const targetPath = await saveConversationFromTurns(
        this.app.vault,
        form.sessionId,
        turns,
        outputFolder
      );
      new import_obsidian10.Notice(`\uB300\uD654 \uC800\uC7A5 \uC644\uB8CC: ${targetPath}`);
    } catch (error) {
      const message = error instanceof Error ? error.message : String(error);
      new import_obsidian10.Notice(`\uC800\uC7A5 \uC2E4\uD328: ${message}`);
    }
  }
  /**
   *    (  )
   */
  async indexVaultAll() {
    if (!this.settings.indexingEnabled) {
      throw new Error("\uC778\uB371\uC2F1\uC774 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    if (!this.indexer) {
      await this.initializeIndexing();
    }
    if (!this.vaultWatcher) {
      throw new Error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      console.log("\uC804\uCCB4 \uBCFC\uD2B8 \uC784\uBCA0\uB529 \uC2DC\uC791...");
      await this.vaultWatcher.indexVault();
      console.log("\uC804\uCCB4 \uBCFC\uD2B8 \uC784\uBCA0\uB529 \uC644\uB8CC");
    } catch (error) {
      console.error("\uC804\uCCB4 \uC784\uBCA0\uB529 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *    ( )
   */
  async indexNewFilesOnly() {
    if (!this.settings.indexingEnabled) {
      throw new Error("\uC778\uB371\uC2F1\uC774 \uD65C\uC131\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    if (!this.indexer) {
      await this.initializeIndexing();
    }
    if (!this.vaultWatcher) {
      throw new Error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    const indexer = this.indexer;
    if (!indexer) {
      throw new Error("\uC778\uB371\uC2F1 \uC2DC\uC2A4\uD15C\uC774 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
    }
    try {
      console.log("\uC2E0\uADDC \uD30C\uC77C \uC784\uBCA0\uB529 \uC2DC\uC791...");
      const allFiles = this.app.vault.getMarkdownFiles();
      let indexed = 0;
      for (const file of allFiles) {
        try {
          const content = await this.app.vault.cachedRead(file);
          await indexer.indexFile(file.path, content);
          indexed++;
        } catch (error) {
          console.warn(`\uD30C\uC77C \uC784\uBCA0\uB529 \uC2E4\uD328: ${file.path}`, error);
        }
      }
      console.log(`\uC2E0\uADDC \uD30C\uC77C \uC784\uBCA0\uB529 \uC644\uB8CC: ${indexed}\uAC1C \uD30C\uC77C \uCC98\uB9AC`);
    } catch (error) {
      console.error("\uC2E0\uADDC \uC784\uBCA0\uB529 \uC2E4\uD328:", error);
      throw error;
    }
  }
  /**
   *  API URL 
   */
  getEmbeddingApiUrl() {
    var _a;
    if ((_a = this.settings.embeddingApiUrl) == null ? void 0 : _a.trim()) {
      return this.settings.embeddingApiUrl.trim();
    }
    const preset = EMBEDDING_PRESETS[this.settings.embeddingProvider];
    return preset == null ? void 0 : preset.apiUrl;
  }
  /**
   *      
   */
  shouldReinitializeIndexing(previous, current) {
    return previous.embeddingProvider !== current.embeddingProvider || previous.embeddingModel !== current.embeddingModel || previous.embeddingApiUrl !== current.embeddingApiUrl;
  }
};
/*! Bundled license information:

is-extendable/index.js:
  (*!
   * is-extendable <https://github.com/jonschlinkert/is-extendable>
   *
   * Copyright (c) 2015, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

strip-bom-string/index.js:
  (*!
   * strip-bom-string <https://github.com/jonschlinkert/strip-bom-string>
   *
   * Copyright (c) 2015, 2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

@google/generative-ai/dist/index.mjs:
@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2xvZ2dpbmcudHMiLCAibm9kZV9tb2R1bGVzL2tpbmQtb2YvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2lzLWV4dGVuZGFibGUvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2V4dGVuZC1zaGFsbG93L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9zZWN0aW9uLW1hdHRlci9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9jb21tb24uanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvZXhjZXB0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL21hcmsuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9zdHIuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9zZXEuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9tYXAuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvc2NoZW1hL2ZhaWxzYWZlLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvbnVsbC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL2Jvb2wuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9pbnQuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9mbG9hdC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEvanNvbi5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEvY29yZS5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL3RpbWVzdGFtcC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL21lcmdlLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvYmluYXJ5LmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvb21hcC5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC90eXBlL3BhaXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3R5cGUvc2V0LmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL3NjaGVtYS9kZWZhdWx0X3NhZmUuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9qcy91bmRlZmluZWQuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9qcy9yZWdleHAuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwvdHlwZS9qcy9mdW5jdGlvbi5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9zY2hlbWEvZGVmYXVsdF9mdWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2xpYi9qcy15YW1sL2xvYWRlci5qcyIsICJub2RlX21vZHVsZXMvanMteWFtbC9saWIvanMteWFtbC9kdW1wZXIuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvbGliL2pzLXlhbWwuanMiLCAibm9kZV9tb2R1bGVzL2pzLXlhbWwvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2xpYi9lbmdpbmVzLmpzIiwgIm5vZGVfbW9kdWxlcy9zdHJpcC1ib20tc3RyaW5nL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9ncmF5LW1hdHRlci9saWIvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2xpYi9kZWZhdWx0cy5qcyIsICJub2RlX21vZHVsZXMvZ3JheS1tYXR0ZXIvbGliL2VuZ2luZS5qcyIsICJub2RlX21vZHVsZXMvZ3JheS1tYXR0ZXIvbGliL3N0cmluZ2lmeS5qcyIsICJub2RlX21vZHVsZXMvZ3JheS1tYXR0ZXIvbGliL2V4Y2VycHQuanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2xpYi90by1maWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9ncmF5LW1hdHRlci9saWIvcGFyc2UuanMiLCAibm9kZV9tb2R1bGVzL2dyYXktbWF0dGVyL2luZGV4LmpzIiwgInNyYy9tYWluLnRzIiwgInNyYy9jb252ZXJzYXRpb25TdG9yZS50cyIsICJzcmMvY29udmVyc2F0aW9uLnRzIiwgInNyYy9hcGkudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9tb2RhbHMvc2F2ZUNvbnZlcnNhdGlvbk1vZGFsLnRzIiwgInNyYy9wYXJzZVR1cm5zLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvdmlld3MvY2hhdFZpZXcudHMiLCAic3JjL3RvcGljU2VwYXJhdGlvbi9rZXl3b3JkRXh0cmFjdG9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AZ29vZ2xlL2dlbmVyYXRpdmUtYWkvZGlzdC9pbmRleC5tanMiLCAic3JjL3RvcGljU2VwYXJhdGlvbi9lbWJlZGRpbmdTZXJ2aWNlLnRzIiwgInNyYy90b3BpY1NlcGFyYXRpb24vdG9waWNTZXBhcmF0aW9uRW5naW5lLnRzIiwgInNyYy90b3BpY1NlcGFyYXRpb24vbXVsdGlOb3RlU2F2ZXIudHMiLCAic3JjL2luZGV4aW5nL21ldGFkYXRhU3RvcmUudHMiLCAic3JjL2luZGV4aW5nL2VtYmVkZGluZ3MudHMiLCAic3JjL2luZGV4aW5nL3BhcnNlci50cyIsICJzcmMvaW5kZXhpbmcvY2h1bmtlci50cyIsICJzcmMvaW5kZXhpbmcvaW5kZXhlci50cyIsICJzcmMvaW5kZXhpbmcvdmVjdG9yU3RvcmUudHMiLCAic3JjL2luZGV4aW5nL3ZlY3RvckluZGV4RmFjdG9yeS50cyIsICJzcmMvaW5kZXhpbmcvcXVlcnlLZXl3b3JkRW1iZWRkaW5nLnRzIiwgInNyYy92YXVsdFdhdGNoZXIudHMiLCAic3JjL2NoYXRTZXNzaW9uU3RvcmUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgQXBwLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGx1Z2luTG9nUGF0aChhcHA6IEFwcCwgbWFuaWZlc3Q/OiBQbHVnaW5NYW5pZmVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IHBsdWdpbklkID0gbWFuaWZlc3Q/LmlkID8/IFwib2JzaWRpYW4tdmF1bHQtbGxtXCI7XG4gIHJldHVybiBub3JtYWxpemVQYXRoKGAke2FwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvJHtwbHVnaW5JZH0vbG9nLnR4dGApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kRXJyb3JMb2coXG4gIGFwcDogQXBwLFxuICBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QgfCB1bmRlZmluZWQsXG4gIGNvbnRleHQ6IHN0cmluZyxcbiAgZGV0YWlsOiB1bmtub3duXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgbG9nUGF0aCA9IGdldFBsdWdpbkxvZ1BhdGgoYXBwLCBtYW5pZmVzdCk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgY29uc3QgZGV0YWlsVGV4dCA9IHRvU2FmZVN0cmluZyhkZXRhaWwpO1xuICBjb25zdCBlbnRyeSA9IGBcXG5bJHt0aW1lc3RhbXB9XSAke2NvbnRleHR9XFxuJHtkZXRhaWxUZXh0fVxcbmA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5leGlzdHMobG9nUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQobG9nUGF0aCk7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShsb2dQYXRoLCBgJHtlbnRyeX0ke2N1cnJlbnR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGxvZ1BhdGgsIGVudHJ5LnRyaW1TdGFydCgpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB3cml0ZSBwbHVnaW4gbG9nXCIsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtYmVkZGluZ0xvZ0RhdGEge1xuICBpbnB1dFRleHQ6IHN0cmluZztcbiAgZW1iZWRkaW5nOiBudW1iZXJbXTtcbiAgc2ltaWxhcml0eT86IG51bWJlcjsgLy8gXHVDNzc0XHVDODA0IFx1Qzc4NFx1QkNBMFx1QjUyOVx1QUNGQ1x1Qzc1OCBcdUM3MjBcdUMwQUNcdUIzQzRcbiAgcHJldmlvdXNJbnB1dFRleHQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBlbmRFbWJlZGRpbmdMb2coXG4gIGFwcDogQXBwLFxuICBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QgfCB1bmRlZmluZWQsXG4gIGRhdGE6IEVtYmVkZGluZ0xvZ0RhdGFcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBsb2dQYXRoID0gZ2V0UGx1Z2luTG9nUGF0aChhcHAsIG1hbmlmZXN0KTtcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBcbiAgLy8gXHVDNzg1XHVCODI1IFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM4MDRcdUNDQjQgKFx1QUMxQ1x1RDU4OSBcdUM4MUNcdUFDNzApXG4gIGNvbnN0IGlucHV0VGV4dCA9IGRhdGEuaW5wdXRUZXh0LnJlcGxhY2UoL1xcbi9nLCAnICcpO1xuICBcbiAgLy8gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QkNBMVx1RDEzMFx1Qjk3QyBcdUFDMDRcdUIyRThcdUQ3ODggXHVENDVDXHVENjA0XG4gIGNvbnN0IGVtYmVkZGluZ0luZm8gPSBgW1x1QkNBMVx1RDEzMCBcdUNDMjhcdUM2RDA6ICR7ZGF0YS5lbWJlZGRpbmcubGVuZ3RofV1gO1xuICBcbiAgLy8gXHVDNzIwXHVDMEFDXHVCM0M0IFx1QzgxNVx1QkNGNFxuICBsZXQgc2ltaWxhcml0eUluZm8gPSAnJztcbiAgaWYgKGRhdGEuc2ltaWxhcml0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc2ltaWxhcml0eUluZm8gPSBgIHwgXHVDNzc0XHVDODA0IFx1Qzc4NFx1QkNBMFx1QjUyOVx1QUNGQ1x1Qzc1OCBcdUM3MjBcdUMwQUNcdUIzQzQ6ICR7KGRhdGEuc2ltaWxhcml0eSAqIDEwMCkudG9GaXhlZCgyKX0lYDtcbiAgfVxuICBcbiAgLy8gXHVCODVDXHVBREY4IFx1QzVENFx1RDJCOFx1QjlBQ1xuICBsZXQgZW50cnkgPSBgXFxuWyR7dGltZXN0YW1wfV0gW1x1Qzc4NFx1QkNBMFx1QjUyOV0gXHVDNzg1XHVCODI1OiBcIiR7aW5wdXRUZXh0fVwiICR7ZW1iZWRkaW5nSW5mb30ke3NpbWlsYXJpdHlJbmZvfVxcbmA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5leGlzdHMobG9nUGF0aCk7XG4gICAgaWYgKGV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQobG9nUGF0aCk7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShsb2dQYXRoLCBgJHtlbnRyeX0ke2N1cnJlbnR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGxvZ1BhdGgsIGVudHJ5LnRyaW1TdGFydCgpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1x1Qzc4NFx1QkNBMFx1QjUyOSBcdUI4NUNcdUFERjhdIFx1RDMwQ1x1Qzc3QyBcdUM0RjBcdUFFMzAgXHVDMkU0XHVEMzI4OicsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyhcbiAgYXBwOiBBcHAsXG4gIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCB8IHVuZGVmaW5lZCxcbiAgcmVhc29uOiBzdHJpbmcsXG4gIGRldGFpbHM/OiB1bmtub3duXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgbG9nUGF0aCA9IGdldFBsdWdpbkxvZ1BhdGgoYXBwLCBtYW5pZmVzdCk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgXG4gIGxldCBlbnRyeSA9IGBcXG5bJHt0aW1lc3RhbXB9XSBbXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUMyRTRcdUQzMjhdIFx1Qzc3NFx1QzcyMDogJHtyZWFzb259XFxuYDtcbiAgXG4gIGlmIChkZXRhaWxzKSB7XG4gICAgZW50cnkgKz0gYFx1QzBDMVx1QzEzODogJHt0b1NhZmVTdHJpbmcoZGV0YWlscyl9XFxuYDtcbiAgfVxuICBcbiAgZW50cnkgKz0gXCItLS1cXG5cIjtcblxuICB0cnkge1xuICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhsb2dQYXRoKTtcbiAgICBpZiAoZXhpc3RzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChsb2dQYXRoKTtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGxvZ1BhdGgsIGAke2VudHJ5fSR7Y3VycmVudH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUobG9nUGF0aCwgZW50cnkudHJpbVN0YXJ0KCkpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUMyRTRcdUQzMjggXHVCODVDXHVBREY4XSBcdUQzMENcdUM3N0MgXHVDNEYwXHVBRTMwIFx1QzJFNFx1RDMyODonLCBlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG9TYWZlU3RyaW5nKGRldGFpbDogdW5rbm93bik6IHN0cmluZyB7XG4gIGlmIChkZXRhaWwgPT09IG51bGwgfHwgZGV0YWlsID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gU3RyaW5nKGRldGFpbCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXRhaWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZGV0YWlsO1xuICB9XG4gIGlmIChkZXRhaWwgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBkZXRhaWwuc3RhY2sgPz8gZGV0YWlsLm1lc3NhZ2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBzZWVuID0gbmV3IFdlYWtTZXQ8b2JqZWN0PigpO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShcbiAgICAgIGRldGFpbCxcbiAgICAgIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoc2Vlbi5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJbXHVDMjFDXHVENjU4IFx1Q0MzOFx1Qzg3MF1cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2Vlbi5hZGQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICAyXG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgXHVDOUMxXHVCODJDXHVENjU0IFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWA7XG4gIH1cbn1cbiIsICJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGtpbmRPZih2YWwpIHtcbiAgaWYgKHZhbCA9PT0gdm9pZCAwKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIGlmICh2YWwgPT09IG51bGwpIHJldHVybiAnbnVsbCc7XG5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gJ2Jvb2xlYW4nO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHJldHVybiAnc3RyaW5nJztcbiAgaWYgKHR5cGUgPT09ICdudW1iZXInKSByZXR1cm4gJ251bWJlcic7XG4gIGlmICh0eXBlID09PSAnc3ltYm9sJykgcmV0dXJuICdzeW1ib2wnO1xuICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpc0dlbmVyYXRvckZuKHZhbCkgPyAnZ2VuZXJhdG9yZnVuY3Rpb24nIDogJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGlmIChpc0FycmF5KHZhbCkpIHJldHVybiAnYXJyYXknO1xuICBpZiAoaXNCdWZmZXIodmFsKSkgcmV0dXJuICdidWZmZXInO1xuICBpZiAoaXNBcmd1bWVudHModmFsKSkgcmV0dXJuICdhcmd1bWVudHMnO1xuICBpZiAoaXNEYXRlKHZhbCkpIHJldHVybiAnZGF0ZSc7XG4gIGlmIChpc0Vycm9yKHZhbCkpIHJldHVybiAnZXJyb3InO1xuICBpZiAoaXNSZWdleHAodmFsKSkgcmV0dXJuICdyZWdleHAnO1xuXG4gIHN3aXRjaCAoY3Rvck5hbWUodmFsKSkge1xuICAgIGNhc2UgJ1N5bWJvbCc6IHJldHVybiAnc3ltYm9sJztcbiAgICBjYXNlICdQcm9taXNlJzogcmV0dXJuICdwcm9taXNlJztcblxuICAgIC8vIFNldCwgTWFwLCBXZWFrU2V0LCBXZWFrTWFwXG4gICAgY2FzZSAnV2Vha01hcCc6IHJldHVybiAnd2Vha21hcCc7XG4gICAgY2FzZSAnV2Vha1NldCc6IHJldHVybiAnd2Vha3NldCc7XG4gICAgY2FzZSAnTWFwJzogcmV0dXJuICdtYXAnO1xuICAgIGNhc2UgJ1NldCc6IHJldHVybiAnc2V0JztcblxuICAgIC8vIDgtYml0IHR5cGVkIGFycmF5c1xuICAgIGNhc2UgJ0ludDhBcnJheSc6IHJldHVybiAnaW50OGFycmF5JztcbiAgICBjYXNlICdVaW50OEFycmF5JzogcmV0dXJuICd1aW50OGFycmF5JztcbiAgICBjYXNlICdVaW50OENsYW1wZWRBcnJheSc6IHJldHVybiAndWludDhjbGFtcGVkYXJyYXknO1xuXG4gICAgLy8gMTYtYml0IHR5cGVkIGFycmF5c1xuICAgIGNhc2UgJ0ludDE2QXJyYXknOiByZXR1cm4gJ2ludDE2YXJyYXknO1xuICAgIGNhc2UgJ1VpbnQxNkFycmF5JzogcmV0dXJuICd1aW50MTZhcnJheSc7XG5cbiAgICAvLyAzMi1iaXQgdHlwZWQgYXJyYXlzXG4gICAgY2FzZSAnSW50MzJBcnJheSc6IHJldHVybiAnaW50MzJhcnJheSc7XG4gICAgY2FzZSAnVWludDMyQXJyYXknOiByZXR1cm4gJ3VpbnQzMmFycmF5JztcbiAgICBjYXNlICdGbG9hdDMyQXJyYXknOiByZXR1cm4gJ2Zsb2F0MzJhcnJheSc7XG4gICAgY2FzZSAnRmxvYXQ2NEFycmF5JzogcmV0dXJuICdmbG9hdDY0YXJyYXknO1xuICB9XG5cbiAgaWYgKGlzR2VuZXJhdG9yT2JqKHZhbCkpIHtcbiAgICByZXR1cm4gJ2dlbmVyYXRvcic7XG4gIH1cblxuICAvLyBOb24tcGxhaW4gb2JqZWN0c1xuICB0eXBlID0gdG9TdHJpbmcuY2FsbCh2YWwpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOiByZXR1cm4gJ29iamVjdCc7XG4gICAgLy8gaXRlcmF0b3JzXG4gICAgY2FzZSAnW29iamVjdCBNYXAgSXRlcmF0b3JdJzogcmV0dXJuICdtYXBpdGVyYXRvcic7XG4gICAgY2FzZSAnW29iamVjdCBTZXQgSXRlcmF0b3JdJzogcmV0dXJuICdzZXRpdGVyYXRvcic7XG4gICAgY2FzZSAnW29iamVjdCBTdHJpbmcgSXRlcmF0b3JdJzogcmV0dXJuICdzdHJpbmdpdGVyYXRvcic7XG4gICAgY2FzZSAnW29iamVjdCBBcnJheSBJdGVyYXRvcl0nOiByZXR1cm4gJ2FycmF5aXRlcmF0b3InO1xuICB9XG5cbiAgLy8gb3RoZXJcbiAgcmV0dXJuIHR5cGUuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKTtcbn07XG5cbmZ1bmN0aW9uIGN0b3JOYW1lKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbC5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyA/IHZhbC5jb25zdHJ1Y3Rvci5uYW1lIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHJldHVybiBBcnJheS5pc0FycmF5KHZhbCk7XG4gIHJldHVybiB2YWwgaW5zdGFuY2VvZiBBcnJheTtcbn1cblxuZnVuY3Rpb24gaXNFcnJvcih2YWwpIHtcbiAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIEVycm9yIHx8ICh0eXBlb2YgdmFsLm1lc3NhZ2UgPT09ICdzdHJpbmcnICYmIHZhbC5jb25zdHJ1Y3RvciAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gJ251bWJlcicpO1xufVxuXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIHR5cGVvZiB2YWwudG9EYXRlU3RyaW5nID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIHZhbC5nZXREYXRlID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIHZhbC5zZXREYXRlID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc1JlZ2V4cCh2YWwpIHtcbiAgaWYgKHZhbCBpbnN0YW5jZW9mIFJlZ0V4cCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiB0eXBlb2YgdmFsLmZsYWdzID09PSAnc3RyaW5nJ1xuICAgICYmIHR5cGVvZiB2YWwuaWdub3JlQ2FzZSA9PT0gJ2Jvb2xlYW4nXG4gICAgJiYgdHlwZW9mIHZhbC5tdWx0aWxpbmUgPT09ICdib29sZWFuJ1xuICAgICYmIHR5cGVvZiB2YWwuZ2xvYmFsID09PSAnYm9vbGVhbic7XG59XG5cbmZ1bmN0aW9uIGlzR2VuZXJhdG9yRm4obmFtZSwgdmFsKSB7XG4gIHJldHVybiBjdG9yTmFtZShuYW1lKSA9PT0gJ0dlbmVyYXRvckZ1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNHZW5lcmF0b3JPYmoodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsLnRocm93ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIHZhbC5yZXR1cm4gPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgdmFsLm5leHQgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbCkge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2YgdmFsLmxlbmd0aCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHZhbC5jYWxsZWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyci5tZXNzYWdlLmluZGV4T2YoJ2NhbGxlZScpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBJZiB5b3UgbmVlZCB0byBzdXBwb3J0IFNhZmFyaSA1LTcgKDgtMTAgeXItb2xkIGJyb3dzZXIpLFxuICogdGFrZSBhIGxvb2sgYXQgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9pcy1idWZmZXJcbiAqL1xuXG5mdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHtcbiAgaWYgKHZhbC5jb25zdHJ1Y3RvciAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsICIvKiFcbiAqIGlzLWV4dGVuZGFibGUgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L2lzLWV4dGVuZGFibGU+XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCBKb24gU2NobGlua2VydC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNFeHRlbmRhYmxlKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsICE9PSBudWxsXG4gICAgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJ2lzLWV4dGVuZGFibGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBleHRlbmQoby8qLCBvYmplY3RzKi8pIHtcbiAgaWYgKCFpc09iamVjdChvKSkgeyBvID0ge307IH1cblxuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBvYmogPSBhcmd1bWVudHNbaV07XG5cbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgYXNzaWduKG8sIG9iaik7XG4gICAgfVxuICB9XG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gYXNzaWduKGEsIGIpIHtcbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoaGFzT3duKGIsIGtleSkpIHtcbiAgICAgIGFba2V5XSA9IGJba2V5XTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGBrZXlgIGlzIGFuIG93biBwcm9wZXJ0eSBvZiBgb2JqYC5cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHlwZU9mID0gcmVxdWlyZSgna2luZC1vZicpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ2V4dGVuZC1zaGFsbG93Jyk7XG5cbi8qKlxuICogUGFyc2Ugc2VjdGlvbnMgaW4gYGlucHV0YCB3aXRoIHRoZSBnaXZlbiBgb3B0aW9uc2AuXG4gKlxuICogYGBganNcbiAqIHZhciBzZWN0aW9ucyA9IHJlcXVpcmUoJ3slPSBuYW1lICV9Jyk7XG4gKiB2YXIgcmVzdWx0ID0gc2VjdGlvbnMoaW5wdXQsIG9wdGlvbnMpO1xuICogLy8geyBjb250ZW50OiAnQ29udGVudCBiZWZvcmUgc2VjdGlvbnMnLCBzZWN0aW9uczogW10gfVxuICogYGBgXG4gKiBAcGFyYW0ge1N0cmluZ3xCdWZmZXJ8T2JqZWN0fSBgaW5wdXRgIElmIGlucHV0IGlzIGFuIG9iamVjdCwgaXQncyBgY29udGVudGAgcHJvcGVydHkgbXVzdCBiZSBhIHN0cmluZyBvciBidWZmZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgYGNvbnRlbnRgIHN0cmluZyBhbmQgYW4gYXJyYXkgb2YgYHNlY3Rpb25zYCBvYmplY3RzLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGlucHV0LCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMgPSB7IHBhcnNlOiBvcHRpb25zIH07XG4gIH1cblxuICB2YXIgZmlsZSA9IHRvT2JqZWN0KGlucHV0KTtcbiAgdmFyIGRlZmF1bHRzID0ge3NlY3Rpb25fZGVsaW1pdGVyOiAnLS0tJywgcGFyc2U6IGlkZW50aXR5fTtcbiAgdmFyIG9wdHMgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcbiAgdmFyIGRlbGltID0gb3B0cy5zZWN0aW9uX2RlbGltaXRlcjtcbiAgdmFyIGxpbmVzID0gZmlsZS5jb250ZW50LnNwbGl0KC9cXHI/XFxuLyk7XG4gIHZhciBzZWN0aW9ucyA9IG51bGw7XG4gIHZhciBzZWN0aW9uID0gY3JlYXRlU2VjdGlvbigpO1xuICB2YXIgY29udGVudCA9IFtdO1xuICB2YXIgc3RhY2sgPSBbXTtcblxuICBmdW5jdGlvbiBpbml0U2VjdGlvbnModmFsKSB7XG4gICAgZmlsZS5jb250ZW50ID0gdmFsO1xuICAgIHNlY3Rpb25zID0gW107XG4gICAgY29udGVudCA9IFtdO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VTZWN0aW9uKHZhbCkge1xuICAgIGlmIChzdGFjay5sZW5ndGgpIHtcbiAgICAgIHNlY3Rpb24ua2V5ID0gZ2V0S2V5KHN0YWNrWzBdLCBkZWxpbSk7XG4gICAgICBzZWN0aW9uLmNvbnRlbnQgPSB2YWw7XG4gICAgICBvcHRzLnBhcnNlKHNlY3Rpb24sIHNlY3Rpb25zKTtcbiAgICAgIHNlY3Rpb25zLnB1c2goc2VjdGlvbik7XG4gICAgICBzZWN0aW9uID0gY3JlYXRlU2VjdGlvbigpO1xuICAgICAgY29udGVudCA9IFtdO1xuICAgICAgc3RhY2sgPSBbXTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGxpbmUgPSBsaW5lc1tpXTtcbiAgICB2YXIgbGVuID0gc3RhY2subGVuZ3RoO1xuICAgIHZhciBsbiA9IGxpbmUudHJpbSgpO1xuXG4gICAgaWYgKGlzRGVsaW1pdGVyKGxuLCBkZWxpbSkpIHtcbiAgICAgIGlmIChsbi5sZW5ndGggPT09IDMgJiYgaSAhPT0gMCkge1xuICAgICAgICBpZiAobGVuID09PSAwIHx8IGxlbiA9PT0gMikge1xuICAgICAgICAgIGNvbnRlbnQucHVzaChsaW5lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzdGFjay5wdXNoKGxuKTtcbiAgICAgICAgc2VjdGlvbi5kYXRhID0gY29udGVudC5qb2luKCdcXG4nKTtcbiAgICAgICAgY29udGVudCA9IFtdO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlY3Rpb25zID09PSBudWxsKSB7XG4gICAgICAgIGluaXRTZWN0aW9ucyhjb250ZW50LmpvaW4oJ1xcbicpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICBjbG9zZVNlY3Rpb24oY29udGVudC5qb2luKCdcXG4nKSk7XG4gICAgICB9XG5cbiAgICAgIHN0YWNrLnB1c2gobG4pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29udGVudC5wdXNoKGxpbmUpO1xuICB9XG5cbiAgaWYgKHNlY3Rpb25zID09PSBudWxsKSB7XG4gICAgaW5pdFNlY3Rpb25zKGNvbnRlbnQuam9pbignXFxuJykpO1xuICB9IGVsc2Uge1xuICAgIGNsb3NlU2VjdGlvbihjb250ZW50LmpvaW4oJ1xcbicpKTtcbiAgfVxuXG4gIGZpbGUuc2VjdGlvbnMgPSBzZWN0aW9ucztcbiAgcmV0dXJuIGZpbGU7XG59O1xuXG5mdW5jdGlvbiBpc0RlbGltaXRlcihsaW5lLCBkZWxpbSkge1xuICBpZiAobGluZS5zbGljZSgwLCBkZWxpbS5sZW5ndGgpICE9PSBkZWxpbSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAobGluZS5jaGFyQXQoZGVsaW0ubGVuZ3RoICsgMSkgPT09IGRlbGltLnNsaWNlKC0xKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdG9PYmplY3QoaW5wdXQpIHtcbiAgaWYgKHR5cGVPZihpbnB1dCkgIT09ICdvYmplY3QnKSB7XG4gICAgaW5wdXQgPSB7IGNvbnRlbnQ6IGlucHV0IH07XG4gIH1cblxuICBpZiAodHlwZW9mIGlucHV0LmNvbnRlbnQgIT09ICdzdHJpbmcnICYmICFpc0J1ZmZlcihpbnB1dC5jb250ZW50KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGEgYnVmZmVyIG9yIHN0cmluZycpO1xuICB9XG5cbiAgaW5wdXQuY29udGVudCA9IGlucHV0LmNvbnRlbnQudG9TdHJpbmcoKTtcbiAgaW5wdXQuc2VjdGlvbnMgPSBbXTtcbiAgcmV0dXJuIGlucHV0O1xufVxuXG5mdW5jdGlvbiBnZXRLZXkodmFsLCBkZWxpbSkge1xuICByZXR1cm4gdmFsID8gdmFsLnNsaWNlKGRlbGltLmxlbmd0aCkudHJpbSgpIDogJyc7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlY3Rpb24oKSB7XG4gIHJldHVybiB7IGtleTogJycsIGRhdGE6ICcnLCBjb250ZW50OiAnJyB9O1xufVxuXG5mdW5jdGlvbiBpZGVudGl0eSh2YWwpIHtcbiAgcmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIGlmICh2YWwgJiYgdmFsLmNvbnN0cnVjdG9yICYmIHR5cGVvZiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHZhbCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwgIid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBpc05vdGhpbmcoc3ViamVjdCkge1xuICByZXR1cm4gKHR5cGVvZiBzdWJqZWN0ID09PSAndW5kZWZpbmVkJykgfHwgKHN1YmplY3QgPT09IG51bGwpO1xufVxuXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHN1YmplY3QpIHtcbiAgcmV0dXJuICh0eXBlb2Ygc3ViamVjdCA9PT0gJ29iamVjdCcpICYmIChzdWJqZWN0ICE9PSBudWxsKTtcbn1cblxuXG5mdW5jdGlvbiB0b0FycmF5KHNlcXVlbmNlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkgcmV0dXJuIHNlcXVlbmNlO1xuICBlbHNlIGlmIChpc05vdGhpbmcoc2VxdWVuY2UpKSByZXR1cm4gW107XG5cbiAgcmV0dXJuIFsgc2VxdWVuY2UgXTtcbn1cblxuXG5mdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgdmFyIGluZGV4LCBsZW5ndGgsIGtleSwgc291cmNlS2V5cztcblxuICBpZiAoc291cmNlKSB7XG4gICAgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gc291cmNlS2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICBrZXkgPSBzb3VyY2VLZXlzW2luZGV4XTtcbiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuXG5mdW5jdGlvbiByZXBlYXQoc3RyaW5nLCBjb3VudCkge1xuICB2YXIgcmVzdWx0ID0gJycsIGN5Y2xlO1xuXG4gIGZvciAoY3ljbGUgPSAwOyBjeWNsZSA8IGNvdW50OyBjeWNsZSArPSAxKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gaXNOZWdhdGl2ZVplcm8obnVtYmVyKSB7XG4gIHJldHVybiAobnVtYmVyID09PSAwKSAmJiAoTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZID09PSAxIC8gbnVtYmVyKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cy5pc05vdGhpbmcgICAgICA9IGlzTm90aGluZztcbm1vZHVsZS5leHBvcnRzLmlzT2JqZWN0ICAgICAgID0gaXNPYmplY3Q7XG5tb2R1bGUuZXhwb3J0cy50b0FycmF5ICAgICAgICA9IHRvQXJyYXk7XG5tb2R1bGUuZXhwb3J0cy5yZXBlYXQgICAgICAgICA9IHJlcGVhdDtcbm1vZHVsZS5leHBvcnRzLmlzTmVnYXRpdmVaZXJvID0gaXNOZWdhdGl2ZVplcm87XG5tb2R1bGUuZXhwb3J0cy5leHRlbmQgICAgICAgICA9IGV4dGVuZDtcbiIsICIvLyBZQU1MIGVycm9yIGNsYXNzLiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg0NTg5ODRcbi8vXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFlBTUxFeGNlcHRpb24ocmVhc29uLCBtYXJrKSB7XG4gIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5uYW1lID0gJ1lBTUxFeGNlcHRpb24nO1xuICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgdGhpcy5tYXJrID0gbWFyaztcbiAgdGhpcy5tZXNzYWdlID0gKHRoaXMucmVhc29uIHx8ICcodW5rbm93biByZWFzb24pJykgKyAodGhpcy5tYXJrID8gJyAnICsgdGhpcy5tYXJrLnRvU3RyaW5nKCkgOiAnJyk7XG5cbiAgLy8gSW5jbHVkZSBzdGFjayB0cmFjZSBpbiBlcnJvciBvYmplY3RcbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgLy8gQ2hyb21lIGFuZCBOb2RlSlNcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGRiwgSUUgMTArIGFuZCBTYWZhcmkgNisuIEZhbGxiYWNrIGZvciBvdGhlcnNcbiAgICB0aGlzLnN0YWNrID0gKG5ldyBFcnJvcigpKS5zdGFjayB8fCAnJztcbiAgfVxufVxuXG5cbi8vIEluaGVyaXQgZnJvbSBFcnJvclxuWUFNTEV4Y2VwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5ZQU1MRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFlBTUxFeGNlcHRpb247XG5cblxuWUFNTEV4Y2VwdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhjb21wYWN0KSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLm5hbWUgKyAnOiAnO1xuXG4gIHJlc3VsdCArPSB0aGlzLnJlYXNvbiB8fCAnKHVua25vd24gcmVhc29uKSc7XG5cbiAgaWYgKCFjb21wYWN0ICYmIHRoaXMubWFyaykge1xuICAgIHJlc3VsdCArPSAnICcgKyB0aGlzLm1hcmsudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gWUFNTEV4Y2VwdGlvbjtcbiIsICIndXNlIHN0cmljdCc7XG5cblxudmFyIGNvbW1vbiA9IHJlcXVpcmUoJy4vY29tbW9uJyk7XG5cblxuZnVuY3Rpb24gTWFyayhuYW1lLCBidWZmZXIsIHBvc2l0aW9uLCBsaW5lLCBjb2x1bW4pIHtcbiAgdGhpcy5uYW1lICAgICA9IG5hbWU7XG4gIHRoaXMuYnVmZmVyICAgPSBidWZmZXI7XG4gIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgdGhpcy5saW5lICAgICA9IGxpbmU7XG4gIHRoaXMuY29sdW1uICAgPSBjb2x1bW47XG59XG5cblxuTWFyay5wcm90b3R5cGUuZ2V0U25pcHBldCA9IGZ1bmN0aW9uIGdldFNuaXBwZXQoaW5kZW50LCBtYXhMZW5ndGgpIHtcbiAgdmFyIGhlYWQsIHN0YXJ0LCB0YWlsLCBlbmQsIHNuaXBwZXQ7XG5cbiAgaWYgKCF0aGlzLmJ1ZmZlcikgcmV0dXJuIG51bGw7XG5cbiAgaW5kZW50ID0gaW5kZW50IHx8IDQ7XG4gIG1heExlbmd0aCA9IG1heExlbmd0aCB8fCA3NTtcblxuICBoZWFkID0gJyc7XG4gIHN0YXJ0ID0gdGhpcy5wb3NpdGlvbjtcblxuICB3aGlsZSAoc3RhcnQgPiAwICYmICdcXHgwMFxcclxcblxceDg1XFx1MjAyOFxcdTIwMjknLmluZGV4T2YodGhpcy5idWZmZXIuY2hhckF0KHN0YXJ0IC0gMSkpID09PSAtMSkge1xuICAgIHN0YXJ0IC09IDE7XG4gICAgaWYgKHRoaXMucG9zaXRpb24gLSBzdGFydCA+IChtYXhMZW5ndGggLyAyIC0gMSkpIHtcbiAgICAgIGhlYWQgPSAnIC4uLiAnO1xuICAgICAgc3RhcnQgKz0gNTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHRhaWwgPSAnJztcbiAgZW5kID0gdGhpcy5wb3NpdGlvbjtcblxuICB3aGlsZSAoZW5kIDwgdGhpcy5idWZmZXIubGVuZ3RoICYmICdcXHgwMFxcclxcblxceDg1XFx1MjAyOFxcdTIwMjknLmluZGV4T2YodGhpcy5idWZmZXIuY2hhckF0KGVuZCkpID09PSAtMSkge1xuICAgIGVuZCArPSAxO1xuICAgIGlmIChlbmQgLSB0aGlzLnBvc2l0aW9uID4gKG1heExlbmd0aCAvIDIgLSAxKSkge1xuICAgICAgdGFpbCA9ICcgLi4uICc7XG4gICAgICBlbmQgLT0gNTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHNuaXBwZXQgPSB0aGlzLmJ1ZmZlci5zbGljZShzdGFydCwgZW5kKTtcblxuICByZXR1cm4gY29tbW9uLnJlcGVhdCgnICcsIGluZGVudCkgKyBoZWFkICsgc25pcHBldCArIHRhaWwgKyAnXFxuJyArXG4gICAgICAgICBjb21tb24ucmVwZWF0KCcgJywgaW5kZW50ICsgdGhpcy5wb3NpdGlvbiAtIHN0YXJ0ICsgaGVhZC5sZW5ndGgpICsgJ14nO1xufTtcblxuXG5NYXJrLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKGNvbXBhY3QpIHtcbiAgdmFyIHNuaXBwZXQsIHdoZXJlID0gJyc7XG5cbiAgaWYgKHRoaXMubmFtZSkge1xuICAgIHdoZXJlICs9ICdpbiBcIicgKyB0aGlzLm5hbWUgKyAnXCIgJztcbiAgfVxuXG4gIHdoZXJlICs9ICdhdCBsaW5lICcgKyAodGhpcy5saW5lICsgMSkgKyAnLCBjb2x1bW4gJyArICh0aGlzLmNvbHVtbiArIDEpO1xuXG4gIGlmICghY29tcGFjdCkge1xuICAgIHNuaXBwZXQgPSB0aGlzLmdldFNuaXBwZXQoKTtcblxuICAgIGlmIChzbmlwcGV0KSB7XG4gICAgICB3aGVyZSArPSAnOlxcbicgKyBzbmlwcGV0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3aGVyZTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBNYXJrO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFlBTUxFeGNlcHRpb24gPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpO1xuXG52YXIgVFlQRV9DT05TVFJVQ1RPUl9PUFRJT05TID0gW1xuICAna2luZCcsXG4gICdyZXNvbHZlJyxcbiAgJ2NvbnN0cnVjdCcsXG4gICdpbnN0YW5jZU9mJyxcbiAgJ3ByZWRpY2F0ZScsXG4gICdyZXByZXNlbnQnLFxuICAnZGVmYXVsdFN0eWxlJyxcbiAgJ3N0eWxlQWxpYXNlcydcbl07XG5cbnZhciBZQU1MX05PREVfS0lORFMgPSBbXG4gICdzY2FsYXInLFxuICAnc2VxdWVuY2UnLFxuICAnbWFwcGluZydcbl07XG5cbmZ1bmN0aW9uIGNvbXBpbGVTdHlsZUFsaWFzZXMobWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgbWFwW3N0eWxlXS5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhcykge1xuICAgICAgICByZXN1bHRbU3RyaW5nKGFsaWFzKV0gPSBzdHlsZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gVHlwZSh0YWcsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmIChUWVBFX0NPTlNUUlVDVE9SX09QVElPTlMuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdVbmtub3duIG9wdGlvbiBcIicgKyBuYW1lICsgJ1wiIGlzIG1ldCBpbiBkZWZpbml0aW9uIG9mIFwiJyArIHRhZyArICdcIiBZQU1MIHR5cGUuJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBUT0RPOiBBZGQgdGFnIGZvcm1hdCBjaGVjay5cbiAgdGhpcy50YWcgICAgICAgICAgPSB0YWc7XG4gIHRoaXMua2luZCAgICAgICAgID0gb3B0aW9uc1sna2luZCddICAgICAgICAgfHwgbnVsbDtcbiAgdGhpcy5yZXNvbHZlICAgICAgPSBvcHRpb25zWydyZXNvbHZlJ10gICAgICB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuICB0aGlzLmNvbnN0cnVjdCAgICA9IG9wdGlvbnNbJ2NvbnN0cnVjdCddICAgIHx8IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhOyB9O1xuICB0aGlzLmluc3RhbmNlT2YgICA9IG9wdGlvbnNbJ2luc3RhbmNlT2YnXSAgIHx8IG51bGw7XG4gIHRoaXMucHJlZGljYXRlICAgID0gb3B0aW9uc1sncHJlZGljYXRlJ10gICAgfHwgbnVsbDtcbiAgdGhpcy5yZXByZXNlbnQgICAgPSBvcHRpb25zWydyZXByZXNlbnQnXSAgICB8fCBudWxsO1xuICB0aGlzLmRlZmF1bHRTdHlsZSA9IG9wdGlvbnNbJ2RlZmF1bHRTdHlsZSddIHx8IG51bGw7XG4gIHRoaXMuc3R5bGVBbGlhc2VzID0gY29tcGlsZVN0eWxlQWxpYXNlcyhvcHRpb25zWydzdHlsZUFsaWFzZXMnXSB8fCBudWxsKTtcblxuICBpZiAoWUFNTF9OT0RFX0tJTkRTLmluZGV4T2YodGhpcy5raW5kKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbignVW5rbm93biBraW5kIFwiJyArIHRoaXMua2luZCArICdcIiBpcyBzcGVjaWZpZWQgZm9yIFwiJyArIHRhZyArICdcIiBZQU1MIHR5cGUuJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUeXBlO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuKi9cblxudmFyIGNvbW1vbiAgICAgICAgPSByZXF1aXJlKCcuL2NvbW1vbicpO1xudmFyIFlBTUxFeGNlcHRpb24gPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpO1xudmFyIFR5cGUgICAgICAgICAgPSByZXF1aXJlKCcuL3R5cGUnKTtcblxuXG5mdW5jdGlvbiBjb21waWxlTGlzdChzY2hlbWEsIG5hbWUsIHJlc3VsdCkge1xuICB2YXIgZXhjbHVkZSA9IFtdO1xuXG4gIHNjaGVtYS5pbmNsdWRlLmZvckVhY2goZnVuY3Rpb24gKGluY2x1ZGVkU2NoZW1hKSB7XG4gICAgcmVzdWx0ID0gY29tcGlsZUxpc3QoaW5jbHVkZWRTY2hlbWEsIG5hbWUsIHJlc3VsdCk7XG4gIH0pO1xuXG4gIHNjaGVtYVtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChjdXJyZW50VHlwZSkge1xuICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChwcmV2aW91c1R5cGUsIHByZXZpb3VzSW5kZXgpIHtcbiAgICAgIGlmIChwcmV2aW91c1R5cGUudGFnID09PSBjdXJyZW50VHlwZS50YWcgJiYgcHJldmlvdXNUeXBlLmtpbmQgPT09IGN1cnJlbnRUeXBlLmtpbmQpIHtcbiAgICAgICAgZXhjbHVkZS5wdXNoKHByZXZpb3VzSW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzdWx0LnB1c2goY3VycmVudFR5cGUpO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodHlwZSwgaW5kZXgpIHtcbiAgICByZXR1cm4gZXhjbHVkZS5pbmRleE9mKGluZGV4KSA9PT0gLTE7XG4gIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBpbGVNYXAoLyogbGlzdHMuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgc2NhbGFyOiB7fSxcbiAgICAgICAgc2VxdWVuY2U6IHt9LFxuICAgICAgICBtYXBwaW5nOiB7fSxcbiAgICAgICAgZmFsbGJhY2s6IHt9XG4gICAgICB9LCBpbmRleCwgbGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3RUeXBlKHR5cGUpIHtcbiAgICByZXN1bHRbdHlwZS5raW5kXVt0eXBlLnRhZ10gPSByZXN1bHRbJ2ZhbGxiYWNrJ11bdHlwZS50YWddID0gdHlwZTtcbiAgfVxuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGFyZ3VtZW50c1tpbmRleF0uZm9yRWFjaChjb2xsZWN0VHlwZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBTY2hlbWEoZGVmaW5pdGlvbikge1xuICB0aGlzLmluY2x1ZGUgID0gZGVmaW5pdGlvbi5pbmNsdWRlICB8fCBbXTtcbiAgdGhpcy5pbXBsaWNpdCA9IGRlZmluaXRpb24uaW1wbGljaXQgfHwgW107XG4gIHRoaXMuZXhwbGljaXQgPSBkZWZpbml0aW9uLmV4cGxpY2l0IHx8IFtdO1xuXG4gIHRoaXMuaW1wbGljaXQuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIGlmICh0eXBlLmxvYWRLaW5kICYmIHR5cGUubG9hZEtpbmQgIT09ICdzY2FsYXInKSB7XG4gICAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbignVGhlcmUgaXMgYSBub24tc2NhbGFyIHR5cGUgaW4gdGhlIGltcGxpY2l0IGxpc3Qgb2YgYSBzY2hlbWEuIEltcGxpY2l0IHJlc29sdmluZyBvZiBzdWNoIHR5cGVzIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuICB9KTtcblxuICB0aGlzLmNvbXBpbGVkSW1wbGljaXQgPSBjb21waWxlTGlzdCh0aGlzLCAnaW1wbGljaXQnLCBbXSk7XG4gIHRoaXMuY29tcGlsZWRFeHBsaWNpdCA9IGNvbXBpbGVMaXN0KHRoaXMsICdleHBsaWNpdCcsIFtdKTtcbiAgdGhpcy5jb21waWxlZFR5cGVNYXAgID0gY29tcGlsZU1hcCh0aGlzLmNvbXBpbGVkSW1wbGljaXQsIHRoaXMuY29tcGlsZWRFeHBsaWNpdCk7XG59XG5cblxuU2NoZW1hLkRFRkFVTFQgPSBudWxsO1xuXG5cblNjaGVtYS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGVTY2hlbWEoKSB7XG4gIHZhciBzY2hlbWFzLCB0eXBlcztcblxuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDE6XG4gICAgICBzY2hlbWFzID0gU2NoZW1hLkRFRkFVTFQ7XG4gICAgICB0eXBlcyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOlxuICAgICAgc2NoZW1hcyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIHR5cGVzID0gYXJndW1lbnRzWzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJ1dyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIFNjaGVtYS5jcmVhdGUgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHNjaGVtYXMgPSBjb21tb24udG9BcnJheShzY2hlbWFzKTtcbiAgdHlwZXMgPSBjb21tb24udG9BcnJheSh0eXBlcyk7XG5cbiAgaWYgKCFzY2hlbWFzLmV2ZXJ5KGZ1bmN0aW9uIChzY2hlbWEpIHsgcmV0dXJuIHNjaGVtYSBpbnN0YW5jZW9mIFNjaGVtYTsgfSkpIHtcbiAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbignU3BlY2lmaWVkIGxpc3Qgb2Ygc3VwZXIgc2NoZW1hcyAob3IgYSBzaW5nbGUgU2NoZW1hIG9iamVjdCkgY29udGFpbnMgYSBub24tU2NoZW1hIG9iamVjdC4nKTtcbiAgfVxuXG4gIGlmICghdHlwZXMuZXZlcnkoZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHR5cGUgaW5zdGFuY2VvZiBUeXBlOyB9KSkge1xuICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdTcGVjaWZpZWQgbGlzdCBvZiBZQU1MIHR5cGVzIChvciBhIHNpbmdsZSBUeXBlIG9iamVjdCkgY29udGFpbnMgYSBub24tVHlwZSBvYmplY3QuJyk7XG4gIH1cblxuICByZXR1cm4gbmV3IFNjaGVtYSh7XG4gICAgaW5jbHVkZTogc2NoZW1hcyxcbiAgICBleHBsaWNpdDogdHlwZXNcbiAgfSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gU2NoZW1hO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnN0cicsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogJyc7IH1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNlcScsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiBbXTsgfVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgVHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bWFwJywge1xuICBraW5kOiAnbWFwcGluZycsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307IH1cbn0pO1xuIiwgIi8vIFN0YW5kYXJkIFlBTUwncyBGYWlsc2FmZSBzY2hlbWEuXG4vLyBodHRwOi8vd3d3LnlhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNpZDI4MDIzNDZcblxuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIFNjaGVtYSA9IHJlcXVpcmUoJy4uL3NjaGVtYScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFNjaGVtYSh7XG4gIGV4cGxpY2l0OiBbXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9zdHInKSxcbiAgICByZXF1aXJlKCcuLi90eXBlL3NlcScpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvbWFwJylcbiAgXVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxOdWxsKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBtYXggPSBkYXRhLmxlbmd0aDtcblxuICByZXR1cm4gKG1heCA9PT0gMSAmJiBkYXRhID09PSAnficpIHx8XG4gICAgICAgICAobWF4ID09PSA0ICYmIChkYXRhID09PSAnbnVsbCcgfHwgZGF0YSA9PT0gJ051bGwnIHx8IGRhdGEgPT09ICdOVUxMJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sTnVsbCgpIHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdCA9PT0gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgVHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bnVsbCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sTnVsbCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sTnVsbCxcbiAgcHJlZGljYXRlOiBpc051bGwsXG4gIHJlcHJlc2VudDoge1xuICAgIGNhbm9uaWNhbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ34nOyAgICB9LFxuICAgIGxvd2VyY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ251bGwnOyB9LFxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ05VTEwnOyB9LFxuICAgIGNhbWVsY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ051bGwnOyB9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQm9vbGVhbihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoO1xuXG4gIHJldHVybiAobWF4ID09PSA0ICYmIChkYXRhID09PSAndHJ1ZScgfHwgZGF0YSA9PT0gJ1RydWUnIHx8IGRhdGEgPT09ICdUUlVFJykpIHx8XG4gICAgICAgICAobWF4ID09PSA1ICYmIChkYXRhID09PSAnZmFsc2UnIHx8IGRhdGEgPT09ICdGYWxzZScgfHwgZGF0YSA9PT0gJ0ZBTFNFJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQm9vbGVhbihkYXRhKSB7XG4gIHJldHVybiBkYXRhID09PSAndHJ1ZScgfHxcbiAgICAgICAgIGRhdGEgPT09ICdUcnVlJyB8fFxuICAgICAgICAgZGF0YSA9PT0gJ1RSVUUnO1xufVxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4ob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpib29sJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxCb29sZWFuLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxCb29sZWFuLFxuICBwcmVkaWNhdGU6IGlzQm9vbGVhbixcbiAgcmVwcmVzZW50OiB7XG4gICAgbG93ZXJjYXNlOiBmdW5jdGlvbiAob2JqZWN0KSB7IHJldHVybiBvYmplY3QgPyAndHJ1ZScgOiAnZmFsc2UnOyB9LFxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gKG9iamVjdCkgeyByZXR1cm4gb2JqZWN0ID8gJ1RSVUUnIDogJ0ZBTFNFJzsgfSxcbiAgICBjYW1lbGNhc2U6IGZ1bmN0aW9uIChvYmplY3QpIHsgcmV0dXJuIG9iamVjdCA/ICdUcnVlJyA6ICdGYWxzZSc7IH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnbG93ZXJjYXNlJ1xufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29tbW9uID0gcmVxdWlyZSgnLi4vY29tbW9uJyk7XG52YXIgVHlwZSAgID0gcmVxdWlyZSgnLi4vdHlwZScpO1xuXG5mdW5jdGlvbiBpc0hleENvZGUoYykge1xuICByZXR1cm4gKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM5LyogOSAqLykpIHx8XG4gICAgICAgICAoKDB4NDEvKiBBICovIDw9IGMpICYmIChjIDw9IDB4NDYvKiBGICovKSkgfHxcbiAgICAgICAgICgoMHg2MS8qIGEgKi8gPD0gYykgJiYgKGMgPD0gMHg2Ni8qIGYgKi8pKTtcbn1cblxuZnVuY3Rpb24gaXNPY3RDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzNy8qIDcgKi8pKTtcbn1cblxuZnVuY3Rpb24gaXNEZWNDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxJbnRlZ2VyKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgbWF4ID0gZGF0YS5sZW5ndGgsXG4gICAgICBpbmRleCA9IDAsXG4gICAgICBoYXNEaWdpdHMgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIGlmICghbWF4KSByZXR1cm4gZmFsc2U7XG5cbiAgY2ggPSBkYXRhW2luZGV4XTtcblxuICAvLyBzaWduXG4gIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycpIHtcbiAgICBjaCA9IGRhdGFbKytpbmRleF07XG4gIH1cblxuICBpZiAoY2ggPT09ICcwJykge1xuICAgIC8vIDBcbiAgICBpZiAoaW5kZXggKyAxID09PSBtYXgpIHJldHVybiB0cnVlO1xuICAgIGNoID0gZGF0YVsrK2luZGV4XTtcblxuICAgIC8vIGJhc2UgMiwgYmFzZSA4LCBiYXNlIDE2XG5cbiAgICBpZiAoY2ggPT09ICdiJykge1xuICAgICAgLy8gYmFzZSAyXG4gICAgICBpbmRleCsrO1xuXG4gICAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoY2ggIT09ICcwJyAmJiBjaCAhPT0gJzEnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzRGlnaXRzICYmIGNoICE9PSAnXyc7XG4gICAgfVxuXG5cbiAgICBpZiAoY2ggPT09ICd4Jykge1xuICAgICAgLy8gYmFzZSAxNlxuICAgICAgaW5kZXgrKztcblxuICAgICAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFpc0hleENvZGUoZGF0YS5jaGFyQ29kZUF0KGluZGV4KSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNEaWdpdHMgJiYgY2ggIT09ICdfJztcbiAgICB9XG5cbiAgICAvLyBiYXNlIDhcbiAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgICBpZiAoIWlzT2N0Q29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICB9XG5cbiAgLy8gYmFzZSAxMCAoZXhjZXB0IDApIG9yIGJhc2UgNjBcblxuICAvLyB2YWx1ZSBzaG91bGQgbm90IHN0YXJ0IHdpdGggYF9gO1xuICBpZiAoY2ggPT09ICdfJykgcmV0dXJuIGZhbHNlO1xuXG4gIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgIGlmIChjaCA9PT0gJzonKSBicmVhaztcbiAgICBpZiAoIWlzRGVjQ29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICB9XG5cbiAgLy8gU2hvdWxkIGhhdmUgZGlnaXRzIGFuZCBzaG91bGQgbm90IGVuZCB3aXRoIGBfYFxuICBpZiAoIWhhc0RpZ2l0cyB8fCBjaCA9PT0gJ18nKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gaWYgIWJhc2U2MCAtIGRvbmU7XG4gIGlmIChjaCAhPT0gJzonKSByZXR1cm4gdHJ1ZTtcblxuICAvLyBiYXNlNjAgYWxtb3N0IG5vdCB1c2VkLCBubyBuZWVkcyB0byBvcHRpbWl6ZVxuICByZXR1cm4gL14oOlswLTVdP1swLTldKSskLy50ZXN0KGRhdGEuc2xpY2UoaW5kZXgpKTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbEludGVnZXIoZGF0YSkge1xuICB2YXIgdmFsdWUgPSBkYXRhLCBzaWduID0gMSwgY2gsIGJhc2UsIGRpZ2l0cyA9IFtdO1xuXG4gIGlmICh2YWx1ZS5pbmRleE9mKCdfJykgIT09IC0xKSB7XG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9fL2csICcnKTtcbiAgfVxuXG4gIGNoID0gdmFsdWVbMF07XG5cbiAgaWYgKGNoID09PSAnLScgfHwgY2ggPT09ICcrJykge1xuICAgIGlmIChjaCA9PT0gJy0nKSBzaWduID0gLTE7XG4gICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxKTtcbiAgICBjaCA9IHZhbHVlWzBdO1xuICB9XG5cbiAgaWYgKHZhbHVlID09PSAnMCcpIHJldHVybiAwO1xuXG4gIGlmIChjaCA9PT0gJzAnKSB7XG4gICAgaWYgKHZhbHVlWzFdID09PSAnYicpIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIDIpO1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ3gnKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLCAxNik7XG4gICAgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZSwgOCk7XG4gIH1cblxuICBpZiAodmFsdWUuaW5kZXhPZignOicpICE9PSAtMSkge1xuICAgIHZhbHVlLnNwbGl0KCc6JykuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgZGlnaXRzLnVuc2hpZnQocGFyc2VJbnQodiwgMTApKTtcbiAgICB9KTtcblxuICAgIHZhbHVlID0gMDtcbiAgICBiYXNlID0gMTtcblxuICAgIGRpZ2l0cy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YWx1ZSArPSAoZCAqIGJhc2UpO1xuICAgICAgYmFzZSAqPSA2MDtcbiAgICB9KTtcblxuICAgIHJldHVybiBzaWduICogdmFsdWU7XG5cbiAgfVxuXG4gIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUsIDEwKTtcbn1cblxuZnVuY3Rpb24gaXNJbnRlZ2VyKG9iamVjdCkge1xuICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpKSA9PT0gJ1tvYmplY3QgTnVtYmVyXScgJiZcbiAgICAgICAgIChvYmplY3QgJSAxID09PSAwICYmICFjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmludCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sSW50ZWdlcixcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sSW50ZWdlcixcbiAgcHJlZGljYXRlOiBpc0ludGVnZXIsXG4gIHJlcHJlc2VudDoge1xuICAgIGJpbmFyeTogICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcwYicgKyBvYmoudG9TdHJpbmcoMikgOiAnLTBiJyArIG9iai50b1N0cmluZygyKS5zbGljZSgxKTsgfSxcbiAgICBvY3RhbDogICAgICAgZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqID49IDAgPyAnMCcgICsgb2JqLnRvU3RyaW5nKDgpIDogJy0wJyAgKyBvYmoudG9TdHJpbmcoOCkuc2xpY2UoMSk7IH0sXG4gICAgZGVjaW1hbDogICAgIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai50b1N0cmluZygxMCk7IH0sXG4gICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgIGhleGFkZWNpbWFsOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcweCcgKyBvYmoudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkgOiAgJy0weCcgKyBvYmoudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkuc2xpY2UoMSk7IH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnZGVjaW1hbCcsXG4gIHN0eWxlQWxpYXNlczoge1xuICAgIGJpbmFyeTogICAgICBbIDIsICAnYmluJyBdLFxuICAgIG9jdGFsOiAgICAgICBbIDgsICAnb2N0JyBdLFxuICAgIGRlY2ltYWw6ICAgICBbIDEwLCAnZGVjJyBdLFxuICAgIGhleGFkZWNpbWFsOiBbIDE2LCAnaGV4JyBdXG4gIH1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGNvbW1vbiA9IHJlcXVpcmUoJy4uL2NvbW1vbicpO1xudmFyIFR5cGUgICA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxudmFyIFlBTUxfRkxPQVRfUEFUVEVSTiA9IG5ldyBSZWdFeHAoXG4gIC8vIDIuNWU0LCAyLjUgYW5kIGludGVnZXJzXG4gICdeKD86Wy0rXT8oPzowfFsxLTldWzAtOV9dKikoPzpcXFxcLlswLTlfXSopPyg/OltlRV1bLStdP1swLTldKyk/JyArXG4gIC8vIC4yZTQsIC4yXG4gIC8vIHNwZWNpYWwgY2FzZSwgc2VlbXMgbm90IGZyb20gc3BlY1xuICAnfFxcXFwuWzAtOV9dKyg/OltlRV1bLStdP1swLTldKyk/JyArXG4gIC8vIDIwOjU5XG4gICd8Wy0rXT9bMC05XVswLTlfXSooPzo6WzAtNV0/WzAtOV0pK1xcXFwuWzAtOV9dKicgK1xuICAvLyAuaW5mXG4gICd8Wy0rXT9cXFxcLig/OmluZnxJbmZ8SU5GKScgK1xuICAvLyAubmFuXG4gICd8XFxcXC4oPzpuYW58TmFOfE5BTikpJCcpO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEZsb2F0KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICBpZiAoIVlBTUxfRkxPQVRfUEFUVEVSTi50ZXN0KGRhdGEpIHx8XG4gICAgICAvLyBRdWljayBoYWNrIHRvIG5vdCBhbGxvdyBpbnRlZ2VycyBlbmQgd2l0aCBgX2BcbiAgICAgIC8vIFByb2JhYmx5IHNob3VsZCB1cGRhdGUgcmVnZXhwICYgY2hlY2sgc3BlZWRcbiAgICAgIGRhdGFbZGF0YS5sZW5ndGggLSAxXSA9PT0gJ18nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxGbG9hdChkYXRhKSB7XG4gIHZhciB2YWx1ZSwgc2lnbiwgYmFzZSwgZGlnaXRzO1xuXG4gIHZhbHVlICA9IGRhdGEucmVwbGFjZSgvXy9nLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgc2lnbiAgID0gdmFsdWVbMF0gPT09ICctJyA/IC0xIDogMTtcbiAgZGlnaXRzID0gW107XG5cbiAgaWYgKCcrLScuaW5kZXhPZih2YWx1ZVswXSkgPj0gMCkge1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICBpZiAodmFsdWUgPT09ICcuaW5mJykge1xuICAgIHJldHVybiAoc2lnbiA9PT0gMSkgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJy5uYW4nKSB7XG4gICAgcmV0dXJuIE5hTjtcblxuICB9IGVsc2UgaWYgKHZhbHVlLmluZGV4T2YoJzonKSA+PSAwKSB7XG4gICAgdmFsdWUuc3BsaXQoJzonKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICBkaWdpdHMudW5zaGlmdChwYXJzZUZsb2F0KHYsIDEwKSk7XG4gICAgfSk7XG5cbiAgICB2YWx1ZSA9IDAuMDtcbiAgICBiYXNlID0gMTtcblxuICAgIGRpZ2l0cy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YWx1ZSArPSBkICogYmFzZTtcbiAgICAgIGJhc2UgKj0gNjA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2lnbiAqIHZhbHVlO1xuXG4gIH1cbiAgcmV0dXJuIHNpZ24gKiBwYXJzZUZsb2F0KHZhbHVlLCAxMCk7XG59XG5cblxudmFyIFNDSUVOVElGSUNfV0lUSE9VVF9ET1QgPSAvXlstK10/WzAtOV0rZS87XG5cbmZ1bmN0aW9uIHJlcHJlc2VudFlhbWxGbG9hdChvYmplY3QsIHN0eWxlKSB7XG4gIHZhciByZXM7XG5cbiAgaWYgKGlzTmFOKG9iamVjdCkpIHtcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICBjYXNlICdsb3dlcmNhc2UnOiByZXR1cm4gJy5uYW4nO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICcuTkFOJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLk5hTic7XG4gICAgfVxuICB9IGVsc2UgaWYgKE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA9PT0gb2JqZWN0KSB7XG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbG93ZXJjYXNlJzogcmV0dXJuICcuaW5mJztcbiAgICAgIGNhc2UgJ3VwcGVyY2FzZSc6IHJldHVybiAnLklORic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy5JbmYnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgPT09IG9iamVjdCkge1xuICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6IHJldHVybiAnLS5pbmYnO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICctLklORic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy0uSW5mJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoY29tbW9uLmlzTmVnYXRpdmVaZXJvKG9iamVjdCkpIHtcbiAgICByZXR1cm4gJy0wLjAnO1xuICB9XG5cbiAgcmVzID0gb2JqZWN0LnRvU3RyaW5nKDEwKTtcblxuICAvLyBKUyBzdHJpbmdpZmllciBjYW4gYnVpbGQgc2NpZW50aWZpYyBmb3JtYXQgd2l0aG91dCBkb3RzOiA1ZS0xMDAsXG4gIC8vIHdoaWxlIFlBTUwgcmVxdXJlcyBkb3Q6IDUuZS0xMDAuIEZpeCBpdCB3aXRoIHNpbXBsZSBoYWNrXG5cbiAgcmV0dXJuIFNDSUVOVElGSUNfV0lUSE9VVF9ET1QudGVzdChyZXMpID8gcmVzLnJlcGxhY2UoJ2UnLCAnLmUnKSA6IHJlcztcbn1cblxuZnVuY3Rpb24gaXNGbG9hdChvYmplY3QpIHtcbiAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgTnVtYmVyXScpICYmXG4gICAgICAgICAob2JqZWN0ICUgMSAhPT0gMCB8fCBjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmZsb2F0Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxGbG9hdCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sRmxvYXQsXG4gIHByZWRpY2F0ZTogaXNGbG9hdCxcbiAgcmVwcmVzZW50OiByZXByZXNlbnRZYW1sRmxvYXQsXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuIiwgIi8vIFN0YW5kYXJkIFlBTUwncyBKU09OIHNjaGVtYS5cbi8vIGh0dHA6Ly93d3cueWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2lkMjgwMzIzMVxuLy9cbi8vIE5PVEU6IEpTLVlBTUwgZG9lcyBub3Qgc3VwcG9ydCBzY2hlbWEtc3BlY2lmaWMgdGFnIHJlc29sdXRpb24gcmVzdHJpY3Rpb25zLlxuLy8gU28sIHRoaXMgc2NoZW1hIGlzIG5vdCBzdWNoIHN0cmljdCBhcyBkZWZpbmVkIGluIHRoZSBZQU1MIHNwZWNpZmljYXRpb24uXG4vLyBJdCBhbGxvd3MgbnVtYmVycyBpbiBiaW5hcnkgbm90YWlvbiwgdXNlIGBOdWxsYCBhbmQgYE5VTExgIGFzIGBudWxsYCwgZXRjLlxuXG5cbid1c2Ugc3RyaWN0JztcblxuXG52YXIgU2NoZW1hID0gcmVxdWlyZSgnLi4vc2NoZW1hJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgU2NoZW1hKHtcbiAgaW5jbHVkZTogW1xuICAgIHJlcXVpcmUoJy4vZmFpbHNhZmUnKVxuICBdLFxuICBpbXBsaWNpdDogW1xuICAgIHJlcXVpcmUoJy4uL3R5cGUvbnVsbCcpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvYm9vbCcpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvaW50JyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9mbG9hdCcpXG4gIF1cbn0pO1xuIiwgIi8vIFN0YW5kYXJkIFlBTUwncyBDb3JlIHNjaGVtYS5cbi8vIGh0dHA6Ly93d3cueWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2lkMjgwNDkyM1xuLy9cbi8vIE5PVEU6IEpTLVlBTUwgZG9lcyBub3Qgc3VwcG9ydCBzY2hlbWEtc3BlY2lmaWMgdGFnIHJlc29sdXRpb24gcmVzdHJpY3Rpb25zLlxuLy8gU28sIENvcmUgc2NoZW1hIGhhcyBubyBkaXN0aW5jdGlvbnMgZnJvbSBKU09OIHNjaGVtYSBpcyBKUy1ZQU1MLlxuXG5cbid1c2Ugc3RyaWN0JztcblxuXG52YXIgU2NoZW1hID0gcmVxdWlyZSgnLi4vc2NoZW1hJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgU2NoZW1hKHtcbiAgaW5jbHVkZTogW1xuICAgIHJlcXVpcmUoJy4vanNvbicpXG4gIF1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbnZhciBZQU1MX0RBVEVfUkVHRVhQID0gbmV3IFJlZ0V4cChcbiAgJ14oWzAtOV1bMC05XVswLTldWzAtOV0pJyAgICAgICAgICArIC8vIFsxXSB5ZWFyXG4gICctKFswLTldWzAtOV0pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbMl0gbW9udGhcbiAgJy0oWzAtOV1bMC05XSkkJyk7ICAgICAgICAgICAgICAgICAgIC8vIFszXSBkYXlcblxudmFyIFlBTUxfVElNRVNUQU1QX1JFR0VYUCA9IG5ldyBSZWdFeHAoXG4gICdeKFswLTldWzAtOV1bMC05XVswLTldKScgICAgICAgICAgKyAvLyBbMV0geWVhclxuICAnLShbMC05XVswLTldPyknICAgICAgICAgICAgICAgICAgICsgLy8gWzJdIG1vbnRoXG4gICctKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgKyAvLyBbM10gZGF5XG4gICcoPzpbVHRdfFsgXFxcXHRdKyknICAgICAgICAgICAgICAgICArIC8vIC4uLlxuICAnKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgICsgLy8gWzRdIGhvdXJcbiAgJzooWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFs1XSBtaW51dGVcbiAgJzooWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFs2XSBzZWNvbmRcbiAgJyg/OlxcXFwuKFswLTldKikpPycgICAgICAgICAgICAgICAgICsgLy8gWzddIGZyYWN0aW9uXG4gICcoPzpbIFxcXFx0XSooWnwoWy0rXSkoWzAtOV1bMC05XT8pJyArIC8vIFs4XSB0eiBbOV0gdHpfc2lnbiBbMTBdIHR6X2hvdXJcbiAgJyg/OjooWzAtOV1bMC05XSkpPykpPyQnKTsgICAgICAgICAgIC8vIFsxMV0gdHpfbWludXRlXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sVGltZXN0YW1wKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKFlBTUxfREFURV9SRUdFWFAuZXhlYyhkYXRhKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIGlmIChZQU1MX1RJTUVTVEFNUF9SRUdFWFAuZXhlYyhkYXRhKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFRpbWVzdGFtcChkYXRhKSB7XG4gIHZhciBtYXRjaCwgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uID0gMCxcbiAgICAgIGRlbHRhID0gbnVsbCwgdHpfaG91ciwgdHpfbWludXRlLCBkYXRlO1xuXG4gIG1hdGNoID0gWUFNTF9EQVRFX1JFR0VYUC5leGVjKGRhdGEpO1xuICBpZiAobWF0Y2ggPT09IG51bGwpIG1hdGNoID0gWUFNTF9USU1FU1RBTVBfUkVHRVhQLmV4ZWMoZGF0YSk7XG5cbiAgaWYgKG1hdGNoID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ0RhdGUgcmVzb2x2ZSBlcnJvcicpO1xuXG4gIC8vIG1hdGNoOiBbMV0geWVhciBbMl0gbW9udGggWzNdIGRheVxuXG4gIHllYXIgPSArKG1hdGNoWzFdKTtcbiAgbW9udGggPSArKG1hdGNoWzJdKSAtIDE7IC8vIEpTIG1vbnRoIHN0YXJ0cyB3aXRoIDBcbiAgZGF5ID0gKyhtYXRjaFszXSk7XG5cbiAgaWYgKCFtYXRjaFs0XSkgeyAvLyBubyBob3VyXG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXkpKTtcbiAgfVxuXG4gIC8vIG1hdGNoOiBbNF0gaG91ciBbNV0gbWludXRlIFs2XSBzZWNvbmQgWzddIGZyYWN0aW9uXG5cbiAgaG91ciA9ICsobWF0Y2hbNF0pO1xuICBtaW51dGUgPSArKG1hdGNoWzVdKTtcbiAgc2Vjb25kID0gKyhtYXRjaFs2XSk7XG5cbiAgaWYgKG1hdGNoWzddKSB7XG4gICAgZnJhY3Rpb24gPSBtYXRjaFs3XS5zbGljZSgwLCAzKTtcbiAgICB3aGlsZSAoZnJhY3Rpb24ubGVuZ3RoIDwgMykgeyAvLyBtaWxsaS1zZWNvbmRzXG4gICAgICBmcmFjdGlvbiArPSAnMCc7XG4gICAgfVxuICAgIGZyYWN0aW9uID0gK2ZyYWN0aW9uO1xuICB9XG5cbiAgLy8gbWF0Y2g6IFs4XSB0eiBbOV0gdHpfc2lnbiBbMTBdIHR6X2hvdXIgWzExXSB0el9taW51dGVcblxuICBpZiAobWF0Y2hbOV0pIHtcbiAgICB0el9ob3VyID0gKyhtYXRjaFsxMF0pO1xuICAgIHR6X21pbnV0ZSA9ICsobWF0Y2hbMTFdIHx8IDApO1xuICAgIGRlbHRhID0gKHR6X2hvdXIgKiA2MCArIHR6X21pbnV0ZSkgKiA2MDAwMDsgLy8gZGVsdGEgaW4gbWlsaS1zZWNvbmRzXG4gICAgaWYgKG1hdGNoWzldID09PSAnLScpIGRlbHRhID0gLWRlbHRhO1xuICB9XG5cbiAgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBmcmFjdGlvbikpO1xuXG4gIGlmIChkZWx0YSkgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gZGVsdGEpO1xuXG4gIHJldHVybiBkYXRlO1xufVxuXG5mdW5jdGlvbiByZXByZXNlbnRZYW1sVGltZXN0YW1wKG9iamVjdCAvKiwgc3R5bGUqLykge1xuICByZXR1cm4gb2JqZWN0LnRvSVNPU3RyaW5nKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnRpbWVzdGFtcCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sVGltZXN0YW1wLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxUaW1lc3RhbXAsXG4gIGluc3RhbmNlT2Y6IERhdGUsXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbFRpbWVzdGFtcFxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxNZXJnZShkYXRhKSB7XG4gIHJldHVybiBkYXRhID09PSAnPDwnIHx8IGRhdGEgPT09IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm1lcmdlJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxNZXJnZVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UqL1xuXG52YXIgTm9kZUJ1ZmZlcjtcblxudHJ5IHtcbiAgLy8gQSB0cmljayBmb3IgYnJvd3NlcmlmaWVkIHZlcnNpb24sIHRvIG5vdCBpbmNsdWRlIGBCdWZmZXJgIHNoaW1cbiAgdmFyIF9yZXF1aXJlID0gcmVxdWlyZTtcbiAgTm9kZUJ1ZmZlciA9IF9yZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG59IGNhdGNoIChfXykge31cblxudmFyIFR5cGUgICAgICAgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cblxuLy8gWyA2NCwgNjUsIDY2IF0gLT4gWyBwYWRkaW5nLCBDUiwgTEYgXVxudmFyIEJBU0U2NF9NQVAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cXG5cXHInO1xuXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQmluYXJ5KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgY29kZSwgaWR4LCBiaXRsZW4gPSAwLCBtYXggPSBkYXRhLmxlbmd0aCwgbWFwID0gQkFTRTY0X01BUDtcblxuICAvLyBDb252ZXJ0IG9uZSBieSBvbmUuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGNvZGUgPSBtYXAuaW5kZXhPZihkYXRhLmNoYXJBdChpZHgpKTtcblxuICAgIC8vIFNraXAgQ1IvTEZcbiAgICBpZiAoY29kZSA+IDY0KSBjb250aW51ZTtcblxuICAgIC8vIEZhaWwgb24gaWxsZWdhbCBjaGFyYWN0ZXJzXG4gICAgaWYgKGNvZGUgPCAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICBiaXRsZW4gKz0gNjtcbiAgfVxuXG4gIC8vIElmIHRoZXJlIGFyZSBhbnkgYml0cyBsZWZ0LCBzb3VyY2Ugd2FzIGNvcnJ1cHRlZFxuICByZXR1cm4gKGJpdGxlbiAlIDgpID09PSAwO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQmluYXJ5KGRhdGEpIHtcbiAgdmFyIGlkeCwgdGFpbGJpdHMsXG4gICAgICBpbnB1dCA9IGRhdGEucmVwbGFjZSgvW1xcclxcbj1dL2csICcnKSwgLy8gcmVtb3ZlIENSL0xGICYgcGFkZGluZyB0byBzaW1wbGlmeSBzY2FuXG4gICAgICBtYXggPSBpbnB1dC5sZW5ndGgsXG4gICAgICBtYXAgPSBCQVNFNjRfTUFQLFxuICAgICAgYml0cyA9IDAsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICAvLyBDb2xsZWN0IGJ5IDYqNCBiaXRzICgzIGJ5dGVzKVxuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGlmICgoaWR4ICUgNCA9PT0gMCkgJiYgaWR4KSB7XG4gICAgICByZXN1bHQucHVzaCgoYml0cyA+PiAxNikgJiAweEZGKTtcbiAgICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgICByZXN1bHQucHVzaChiaXRzICYgMHhGRik7XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDYpIHwgbWFwLmluZGV4T2YoaW5wdXQuY2hhckF0KGlkeCkpO1xuICB9XG5cbiAgLy8gRHVtcCB0YWlsXG5cbiAgdGFpbGJpdHMgPSAobWF4ICUgNCkgKiA2O1xuXG4gIGlmICh0YWlsYml0cyA9PT0gMCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDE2KSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgcmVzdWx0LnB1c2goYml0cyAmIDB4RkYpO1xuICB9IGVsc2UgaWYgKHRhaWxiaXRzID09PSAxOCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDEwKSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDIpICYgMHhGRik7XG4gIH0gZWxzZSBpZiAodGFpbGJpdHMgPT09IDEyKSB7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gNCkgJiAweEZGKTtcbiAgfVxuXG4gIC8vIFdyYXAgaW50byBCdWZmZXIgZm9yIE5vZGVKUyBhbmQgbGVhdmUgQXJyYXkgZm9yIGJyb3dzZXJcbiAgaWYgKE5vZGVCdWZmZXIpIHtcbiAgICAvLyBTdXBwb3J0IG5vZGUgNi4rIEJ1ZmZlciBBUEkgd2hlbiBhdmFpbGFibGVcbiAgICByZXR1cm4gTm9kZUJ1ZmZlci5mcm9tID8gTm9kZUJ1ZmZlci5mcm9tKHJlc3VsdCkgOiBuZXcgTm9kZUJ1ZmZlcihyZXN1bHQpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcmVwcmVzZW50WWFtbEJpbmFyeShvYmplY3QgLyosIHN0eWxlKi8pIHtcbiAgdmFyIHJlc3VsdCA9ICcnLCBiaXRzID0gMCwgaWR4LCB0YWlsLFxuICAgICAgbWF4ID0gb2JqZWN0Lmxlbmd0aCxcbiAgICAgIG1hcCA9IEJBU0U2NF9NQVA7XG5cbiAgLy8gQ29udmVydCBldmVyeSB0aHJlZSBieXRlcyB0byA0IEFTQ0lJIGNoYXJhY3RlcnMuXG5cbiAgZm9yIChpZHggPSAwOyBpZHggPCBtYXg7IGlkeCsrKSB7XG4gICAgaWYgKChpZHggJSAzID09PSAwKSAmJiBpZHgpIHtcbiAgICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTgpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDEyKSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA2KSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFtiaXRzICYgMHgzRl07XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDgpICsgb2JqZWN0W2lkeF07XG4gIH1cblxuICAvLyBEdW1wIHRhaWxcblxuICB0YWlsID0gbWF4ICUgMztcblxuICBpZiAodGFpbCA9PT0gMCkge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTgpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDYpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFtiaXRzICYgMHgzRl07XG4gIH0gZWxzZSBpZiAodGFpbCA9PT0gMikge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTApICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA0KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPDwgMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgfSBlbHNlIGlmICh0YWlsID09PSAxKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPDwgNCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgICByZXN1bHQgKz0gbWFwWzY0XTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGlzQmluYXJ5KG9iamVjdCkge1xuICByZXR1cm4gTm9kZUJ1ZmZlciAmJiBOb2RlQnVmZmVyLmlzQnVmZmVyKG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmJpbmFyeScsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sQmluYXJ5LFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxCaW5hcnksXG4gIHByZWRpY2F0ZTogaXNCaW5hcnksXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbEJpbmFyeVxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxudmFyIF9oYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX3RvU3RyaW5nICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxPbWFwKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBvYmplY3RLZXlzID0gW10sIGluZGV4LCBsZW5ndGgsIHBhaXIsIHBhaXJLZXksIHBhaXJIYXNLZXksXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuICAgIHBhaXJIYXNLZXkgPSBmYWxzZTtcblxuICAgIGlmIChfdG9TdHJpbmcuY2FsbChwYWlyKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAocGFpcktleSBpbiBwYWlyKSB7XG4gICAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwocGFpciwgcGFpcktleSkpIHtcbiAgICAgICAgaWYgKCFwYWlySGFzS2V5KSBwYWlySGFzS2V5ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFwYWlySGFzS2V5KSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAob2JqZWN0S2V5cy5pbmRleE9mKHBhaXJLZXkpID09PSAtMSkgb2JqZWN0S2V5cy5wdXNoKHBhaXJLZXkpO1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxPbWFwKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogW107XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm9tYXAnLCB7XG4gIGtpbmQ6ICdzZXF1ZW5jZScsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sT21hcCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sT21hcFxufSk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uL3R5cGUnKTtcblxudmFyIF90b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sUGFpcnMoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIGluZGV4LCBsZW5ndGgsIHBhaXIsIGtleXMsIHJlc3VsdCxcbiAgICAgIG9iamVjdCA9IGRhdGE7XG5cbiAgcmVzdWx0ID0gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAgaWYgKF90b1N0cmluZy5jYWxsKHBhaXIpICE9PSAnW29iamVjdCBPYmplY3RdJykgcmV0dXJuIGZhbHNlO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHBhaXIpO1xuXG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSAxKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFBhaXJzKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBbXTtcblxuICB2YXIgaW5kZXgsIGxlbmd0aCwgcGFpciwga2V5cywgcmVzdWx0LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICByZXN1bHQgPSBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpciA9IG9iamVjdFtpbmRleF07XG5cbiAgICBrZXlzID0gT2JqZWN0LmtleXMocGFpcik7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpwYWlycycsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxQYWlycyxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sUGFpcnNcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi90eXBlJyk7XG5cbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbFNldChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIga2V5LCBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoa2V5IGluIG9iamVjdCkge1xuICAgIGlmIChfaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIGlmIChvYmplY3Rba2V5XSAhPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sU2V0KGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNldCcsIHtcbiAga2luZDogJ21hcHBpbmcnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbFNldCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sU2V0XG59KTtcbiIsICIvLyBKUy1ZQU1MJ3MgZGVmYXVsdCBzY2hlbWEgZm9yIGBzYWZlTG9hZGAgZnVuY3Rpb24uXG4vLyBJdCBpcyBub3QgZGVzY3JpYmVkIGluIHRoZSBZQU1MIHNwZWNpZmljYXRpb24uXG4vL1xuLy8gVGhpcyBzY2hlbWEgaXMgYmFzZWQgb24gc3RhbmRhcmQgWUFNTCdzIENvcmUgc2NoZW1hIGFuZCBpbmNsdWRlcyBtb3N0IG9mXG4vLyBleHRyYSB0eXBlcyBkZXNjcmliZWQgYXQgWUFNTCB0YWcgcmVwb3NpdG9yeS4gKGh0dHA6Ly95YW1sLm9yZy90eXBlLylcblxuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIFNjaGVtYSA9IHJlcXVpcmUoJy4uL3NjaGVtYScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFNjaGVtYSh7XG4gIGluY2x1ZGU6IFtcbiAgICByZXF1aXJlKCcuL2NvcmUnKVxuICBdLFxuICBpbXBsaWNpdDogW1xuICAgIHJlcXVpcmUoJy4uL3R5cGUvdGltZXN0YW1wJyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9tZXJnZScpXG4gIF0sXG4gIGV4cGxpY2l0OiBbXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9iaW5hcnknKSxcbiAgICByZXF1aXJlKCcuLi90eXBlL29tYXAnKSxcbiAgICByZXF1aXJlKCcuLi90eXBlL3BhaXJzJyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9zZXQnKVxuICBdXG59KTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBUeXBlID0gcmVxdWlyZSgnLi4vLi4vdHlwZScpO1xuXG5mdW5jdGlvbiByZXNvbHZlSmF2YXNjcmlwdFVuZGVmaW5lZCgpIHtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdEphdmFzY3JpcHRVbmRlZmluZWQoKSB7XG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkKi9cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcmVwcmVzZW50SmF2YXNjcmlwdFVuZGVmaW5lZCgpIHtcbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICd1bmRlZmluZWQnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpqcy91bmRlZmluZWQnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlSmF2YXNjcmlwdFVuZGVmaW5lZCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RKYXZhc2NyaXB0VW5kZWZpbmVkLFxuICBwcmVkaWNhdGU6IGlzVW5kZWZpbmVkLFxuICByZXByZXNlbnQ6IHJlcHJlc2VudEphdmFzY3JpcHRVbmRlZmluZWRcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIFR5cGUgPSByZXF1aXJlKCcuLi8uLi90eXBlJyk7XG5cbmZ1bmN0aW9uIHJlc29sdmVKYXZhc2NyaXB0UmVnRXhwKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIHJlZ2V4cCA9IGRhdGEsXG4gICAgICB0YWlsICAgPSAvXFwvKFtnaW1dKikkLy5leGVjKGRhdGEpLFxuICAgICAgbW9kaWZpZXJzID0gJyc7XG5cbiAgLy8gaWYgcmVnZXhwIHN0YXJ0cyB3aXRoICcvJyBpdCBjYW4gaGF2ZSBtb2RpZmllcnMgYW5kIG11c3QgYmUgcHJvcGVybHkgY2xvc2VkXG4gIC8vIGAvZm9vL2dpbWAgLSBtb2RpZmllcnMgdGFpbCBjYW4gYmUgbWF4aW11bSAzIGNoYXJzXG4gIGlmIChyZWdleHBbMF0gPT09ICcvJykge1xuICAgIGlmICh0YWlsKSBtb2RpZmllcnMgPSB0YWlsWzFdO1xuXG4gICAgaWYgKG1vZGlmaWVycy5sZW5ndGggPiAzKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gaWYgZXhwcmVzc2lvbiBzdGFydHMgd2l0aCAvLCBpcyBzaG91bGQgYmUgcHJvcGVybHkgdGVybWluYXRlZFxuICAgIGlmIChyZWdleHBbcmVnZXhwLmxlbmd0aCAtIG1vZGlmaWVycy5sZW5ndGggLSAxXSAhPT0gJy8nKSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0SmF2YXNjcmlwdFJlZ0V4cChkYXRhKSB7XG4gIHZhciByZWdleHAgPSBkYXRhLFxuICAgICAgdGFpbCAgID0gL1xcLyhbZ2ltXSopJC8uZXhlYyhkYXRhKSxcbiAgICAgIG1vZGlmaWVycyA9ICcnO1xuXG4gIC8vIGAvZm9vL2dpbWAgLSB0YWlsIGNhbiBiZSBtYXhpbXVtIDQgY2hhcnNcbiAgaWYgKHJlZ2V4cFswXSA9PT0gJy8nKSB7XG4gICAgaWYgKHRhaWwpIG1vZGlmaWVycyA9IHRhaWxbMV07XG4gICAgcmVnZXhwID0gcmVnZXhwLnNsaWNlKDEsIHJlZ2V4cC5sZW5ndGggLSBtb2RpZmllcnMubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleHAsIG1vZGlmaWVycyk7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudEphdmFzY3JpcHRSZWdFeHAob2JqZWN0IC8qLCBzdHlsZSovKSB7XG4gIHZhciByZXN1bHQgPSAnLycgKyBvYmplY3Quc291cmNlICsgJy8nO1xuXG4gIGlmIChvYmplY3QuZ2xvYmFsKSByZXN1bHQgKz0gJ2cnO1xuICBpZiAob2JqZWN0Lm11bHRpbGluZSkgcmVzdWx0ICs9ICdtJztcbiAgaWYgKG9iamVjdC5pZ25vcmVDYXNlKSByZXN1bHQgKz0gJ2knO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpqcy9yZWdleHAnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlSmF2YXNjcmlwdFJlZ0V4cCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RKYXZhc2NyaXB0UmVnRXhwLFxuICBwcmVkaWNhdGU6IGlzUmVnRXhwLFxuICByZXByZXNlbnQ6IHJlcHJlc2VudEphdmFzY3JpcHRSZWdFeHBcbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGVzcHJpbWE7XG5cbi8vIEJyb3dzZXJpZmllZCB2ZXJzaW9uIGRvZXMgbm90IGhhdmUgZXNwcmltYVxuLy9cbi8vIDEuIEZvciBub2RlLmpzIGp1c3QgcmVxdWlyZSBtb2R1bGUgYXMgZGVwc1xuLy8gMi4gRm9yIGJyb3dzZXIgdHJ5IHRvIHJlcXVpcmUgbXVkdWxlIHZpYSBleHRlcm5hbCBBTUQgc3lzdGVtLlxuLy8gICAgSWYgbm90IGZvdW5kIC0gdHJ5IHRvIGZhbGxiYWNrIHRvIHdpbmRvdy5lc3ByaW1hLiBJZiBub3Rcbi8vICAgIGZvdW5kIHRvbyAtIHRoZW4gZmFpbCB0byBwYXJzZS5cbi8vXG50cnkge1xuICAvLyB3b3JrYXJvdW5kIHRvIGV4Y2x1ZGUgcGFja2FnZSBmcm9tIGJyb3dzZXJpZnkgbGlzdC5cbiAgdmFyIF9yZXF1aXJlID0gcmVxdWlyZTtcbiAgZXNwcmltYSA9IF9yZXF1aXJlKCdlc3ByaW1hJyk7XG59IGNhdGNoIChfKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXJlZGVjbGFyZSAqL1xuICAvKiBnbG9iYWwgd2luZG93ICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgZXNwcmltYSA9IHdpbmRvdy5lc3ByaW1hO1xufVxuXG52YXIgVHlwZSA9IHJlcXVpcmUoJy4uLy4uL3R5cGUnKTtcblxuZnVuY3Rpb24gcmVzb2x2ZUphdmFzY3JpcHRGdW5jdGlvbihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdHJ5IHtcbiAgICB2YXIgc291cmNlID0gJygnICsgZGF0YSArICcpJyxcbiAgICAgICAgYXN0ICAgID0gZXNwcmltYS5wYXJzZShzb3VyY2UsIHsgcmFuZ2U6IHRydWUgfSk7XG5cbiAgICBpZiAoYXN0LnR5cGUgICAgICAgICAgICAgICAgICAgICE9PSAnUHJvZ3JhbScgICAgICAgICAgICAgfHxcbiAgICAgICAgYXN0LmJvZHkubGVuZ3RoICAgICAgICAgICAgICE9PSAxICAgICAgICAgICAgICAgICAgICAgfHxcbiAgICAgICAgYXN0LmJvZHlbMF0udHlwZSAgICAgICAgICAgICE9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcgfHxcbiAgICAgICAgKGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSAhPT0gJ0Fycm93RnVuY3Rpb25FeHByZXNzaW9uJyAmJlxuICAgICAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSAhPT0gJ0Z1bmN0aW9uRXhwcmVzc2lvbicpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RKYXZhc2NyaXB0RnVuY3Rpb24oZGF0YSkge1xuICAvKmpzbGludCBldmlsOnRydWUqL1xuXG4gIHZhciBzb3VyY2UgPSAnKCcgKyBkYXRhICsgJyknLFxuICAgICAgYXN0ICAgID0gZXNwcmltYS5wYXJzZShzb3VyY2UsIHsgcmFuZ2U6IHRydWUgfSksXG4gICAgICBwYXJhbXMgPSBbXSxcbiAgICAgIGJvZHk7XG5cbiAgaWYgKGFzdC50eXBlICAgICAgICAgICAgICAgICAgICAhPT0gJ1Byb2dyYW0nICAgICAgICAgICAgIHx8XG4gICAgICBhc3QuYm9keS5sZW5ndGggICAgICAgICAgICAgIT09IDEgICAgICAgICAgICAgICAgICAgICB8fFxuICAgICAgYXN0LmJvZHlbMF0udHlwZSAgICAgICAgICAgICE9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcgfHxcbiAgICAgIChhc3QuYm9keVswXS5leHByZXNzaW9uLnR5cGUgIT09ICdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicgJiZcbiAgICAgICAgYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlICE9PSAnRnVuY3Rpb25FeHByZXNzaW9uJykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZXNvbHZlIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBhc3QuYm9keVswXS5leHByZXNzaW9uLnBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgIHBhcmFtcy5wdXNoKHBhcmFtLm5hbWUpO1xuICB9KTtcblxuICBib2R5ID0gYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi5ib2R5LnJhbmdlO1xuXG4gIC8vIEVzcHJpbWEncyByYW5nZXMgaW5jbHVkZSB0aGUgZmlyc3QgJ3snIGFuZCB0aGUgbGFzdCAnfScgY2hhcmFjdGVycyBvblxuICAvLyBmdW5jdGlvbiBleHByZXNzaW9ucy4gU28gY3V0IHRoZW0gb3V0LlxuICBpZiAoYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi5ib2R5LnR5cGUgPT09ICdCbG9ja1N0YXRlbWVudCcpIHtcbiAgICAvKmVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKHBhcmFtcywgc291cmNlLnNsaWNlKGJvZHlbMF0gKyAxLCBib2R5WzFdIC0gMSkpO1xuICB9XG4gIC8vIEVTNiBhcnJvdyBmdW5jdGlvbnMgY2FuIG9taXQgdGhlIEJsb2NrU3RhdGVtZW50LiBJbiB0aGF0IGNhc2UsIGp1c3QgcmV0dXJuXG4gIC8vIHRoZSBib2R5LlxuICAvKmVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jKi9cbiAgcmV0dXJuIG5ldyBGdW5jdGlvbihwYXJhbXMsICdyZXR1cm4gJyArIHNvdXJjZS5zbGljZShib2R5WzBdLCBib2R5WzFdKSk7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudEphdmFzY3JpcHRGdW5jdGlvbihvYmplY3QgLyosIHN0eWxlKi8pIHtcbiAgcmV0dXJuIG9iamVjdC50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmpzL2Z1bmN0aW9uJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZUphdmFzY3JpcHRGdW5jdGlvbixcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RKYXZhc2NyaXB0RnVuY3Rpb24sXG4gIHByZWRpY2F0ZTogaXNGdW5jdGlvbixcbiAgcmVwcmVzZW50OiByZXByZXNlbnRKYXZhc2NyaXB0RnVuY3Rpb25cbn0pO1xuIiwgIi8vIEpTLVlBTUwncyBkZWZhdWx0IHNjaGVtYSBmb3IgYGxvYWRgIGZ1bmN0aW9uLlxuLy8gSXQgaXMgbm90IGRlc2NyaWJlZCBpbiB0aGUgWUFNTCBzcGVjaWZpY2F0aW9uLlxuLy9cbi8vIFRoaXMgc2NoZW1hIGlzIGJhc2VkIG9uIEpTLVlBTUwncyBkZWZhdWx0IHNhZmUgc2NoZW1hIGFuZCBpbmNsdWRlc1xuLy8gSmF2YVNjcmlwdC1zcGVjaWZpYyB0eXBlczogISFqcy91bmRlZmluZWQsICEhanMvcmVnZXhwIGFuZCAhIWpzL2Z1bmN0aW9uLlxuLy9cbi8vIEFsc28gdGhpcyBzY2hlbWEgaXMgdXNlZCBhcyBkZWZhdWx0IGJhc2Ugc2NoZW1hIGF0IGBTY2hlbWEuY3JlYXRlYCBmdW5jdGlvbi5cblxuXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIFNjaGVtYSA9IHJlcXVpcmUoJy4uL3NjaGVtYScpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gU2NoZW1hLkRFRkFVTFQgPSBuZXcgU2NoZW1hKHtcbiAgaW5jbHVkZTogW1xuICAgIHJlcXVpcmUoJy4vZGVmYXVsdF9zYWZlJylcbiAgXSxcbiAgZXhwbGljaXQ6IFtcbiAgICByZXF1aXJlKCcuLi90eXBlL2pzL3VuZGVmaW5lZCcpLFxuICAgIHJlcXVpcmUoJy4uL3R5cGUvanMvcmVnZXhwJyksXG4gICAgcmVxdWlyZSgnLi4vdHlwZS9qcy9mdW5jdGlvbicpXG4gIF1cbn0pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuLG5vLXVzZS1iZWZvcmUtZGVmaW5lKi9cblxudmFyIGNvbW1vbiAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL2NvbW1vbicpO1xudmFyIFlBTUxFeGNlcHRpb24gICAgICAgPSByZXF1aXJlKCcuL2V4Y2VwdGlvbicpO1xudmFyIE1hcmsgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL21hcmsnKTtcbnZhciBERUZBVUxUX1NBRkVfU0NIRU1BID0gcmVxdWlyZSgnLi9zY2hlbWEvZGVmYXVsdF9zYWZlJyk7XG52YXIgREVGQVVMVF9GVUxMX1NDSEVNQSA9IHJlcXVpcmUoJy4vc2NoZW1hL2RlZmF1bHRfZnVsbCcpO1xuXG5cbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5cbnZhciBDT05URVhUX0ZMT1dfSU4gICA9IDE7XG52YXIgQ09OVEVYVF9GTE9XX09VVCAgPSAyO1xudmFyIENPTlRFWFRfQkxPQ0tfSU4gID0gMztcbnZhciBDT05URVhUX0JMT0NLX09VVCA9IDQ7XG5cblxudmFyIENIT01QSU5HX0NMSVAgID0gMTtcbnZhciBDSE9NUElOR19TVFJJUCA9IDI7XG52YXIgQ0hPTVBJTkdfS0VFUCAgPSAzO1xuXG5cbnZhciBQQVRURVJOX05PTl9QUklOVEFCTEUgICAgICAgICA9IC9bXFx4MDAtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHg3Ri1cXHg4NFxceDg2LVxceDlGXFx1RkZGRVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdKD8hW1xcdURDMDAtXFx1REZGRl0pfCg/OlteXFx1RDgwMC1cXHVEQkZGXXxeKVtcXHVEQzAwLVxcdURGRkZdLztcbnZhciBQQVRURVJOX05PTl9BU0NJSV9MSU5FX0JSRUFLUyA9IC9bXFx4ODVcXHUyMDI4XFx1MjAyOV0vO1xudmFyIFBBVFRFUk5fRkxPV19JTkRJQ0FUT1JTICAgICAgID0gL1ssXFxbXFxdXFx7XFx9XS87XG52YXIgUEFUVEVSTl9UQUdfSEFORExFICAgICAgICAgICAgPSAvXig/OiF8ISF8IVthLXpcXC1dKyEpJC9pO1xudmFyIFBBVFRFUk5fVEFHX1VSSSAgICAgICAgICAgICAgID0gL14oPzohfFteLFxcW1xcXVxce1xcfV0pKD86JVswLTlhLWZdezJ9fFswLTlhLXpcXC0jO1xcL1xcPzpAJj1cXCtcXCQsX1xcLiF+XFwqJ1xcKFxcKVxcW1xcXV0pKiQvaTtcblxuXG5mdW5jdGlvbiBfY2xhc3Mob2JqKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTsgfVxuXG5mdW5jdGlvbiBpc19FT0woYykge1xuICByZXR1cm4gKGMgPT09IDB4MEEvKiBMRiAqLykgfHwgKGMgPT09IDB4MEQvKiBDUiAqLyk7XG59XG5cbmZ1bmN0aW9uIGlzX1dISVRFX1NQQUNFKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fCAoYyA9PT0gMHgyMC8qIFNwYWNlICovKTtcbn1cblxuZnVuY3Rpb24gaXNfV1NfT1JfRU9MKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fFxuICAgICAgICAgKGMgPT09IDB4MjAvKiBTcGFjZSAqLykgfHxcbiAgICAgICAgIChjID09PSAweDBBLyogTEYgKi8pIHx8XG4gICAgICAgICAoYyA9PT0gMHgwRC8qIENSICovKTtcbn1cblxuZnVuY3Rpb24gaXNfRkxPV19JTkRJQ0FUT1IoYykge1xuICByZXR1cm4gYyA9PT0gMHgyQy8qICwgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4NUIvKiBbICovIHx8XG4gICAgICAgICBjID09PSAweDVELyogXSAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg3Qi8qIHsgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4N0QvKiB9ICovO1xufVxuXG5mdW5jdGlvbiBmcm9tSGV4Q29kZShjKSB7XG4gIHZhciBsYztcblxuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSovXG4gIGxjID0gYyB8IDB4MjA7XG5cbiAgaWYgKCgweDYxLyogYSAqLyA8PSBsYykgJiYgKGxjIDw9IDB4NjYvKiBmICovKSkge1xuICAgIHJldHVybiBsYyAtIDB4NjEgKyAxMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlZEhleExlbihjKSB7XG4gIGlmIChjID09PSAweDc4LyogeCAqLykgeyByZXR1cm4gMjsgfVxuICBpZiAoYyA9PT0gMHg3NS8qIHUgKi8pIHsgcmV0dXJuIDQ7IH1cbiAgaWYgKGMgPT09IDB4NTUvKiBVICovKSB7IHJldHVybiA4OyB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBmcm9tRGVjaW1hbENvZGUoYykge1xuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlRXNjYXBlU2VxdWVuY2UoYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBpbmRlbnQgKi9cbiAgcmV0dXJuIChjID09PSAweDMwLyogMCAqLykgPyAnXFx4MDAnIDpcbiAgICAgICAgKGMgPT09IDB4NjEvKiBhICovKSA/ICdcXHgwNycgOlxuICAgICAgICAoYyA9PT0gMHg2Mi8qIGIgKi8pID8gJ1xceDA4JyA6XG4gICAgICAgIChjID09PSAweDc0LyogdCAqLykgPyAnXFx4MDknIDpcbiAgICAgICAgKGMgPT09IDB4MDkvKiBUYWIgKi8pID8gJ1xceDA5JyA6XG4gICAgICAgIChjID09PSAweDZFLyogbiAqLykgPyAnXFx4MEEnIDpcbiAgICAgICAgKGMgPT09IDB4NzYvKiB2ICovKSA/ICdcXHgwQicgOlxuICAgICAgICAoYyA9PT0gMHg2Ni8qIGYgKi8pID8gJ1xceDBDJyA6XG4gICAgICAgIChjID09PSAweDcyLyogciAqLykgPyAnXFx4MEQnIDpcbiAgICAgICAgKGMgPT09IDB4NjUvKiBlICovKSA/ICdcXHgxQicgOlxuICAgICAgICAoYyA9PT0gMHgyMC8qIFNwYWNlICovKSA/ICcgJyA6XG4gICAgICAgIChjID09PSAweDIyLyogXCIgKi8pID8gJ1xceDIyJyA6XG4gICAgICAgIChjID09PSAweDJGLyogLyAqLykgPyAnLycgOlxuICAgICAgICAoYyA9PT0gMHg1Qy8qIFxcICovKSA/ICdcXHg1QycgOlxuICAgICAgICAoYyA9PT0gMHg0RS8qIE4gKi8pID8gJ1xceDg1JyA6XG4gICAgICAgIChjID09PSAweDVGLyogXyAqLykgPyAnXFx4QTAnIDpcbiAgICAgICAgKGMgPT09IDB4NEMvKiBMICovKSA/ICdcXHUyMDI4JyA6XG4gICAgICAgIChjID09PSAweDUwLyogUCAqLykgPyAnXFx1MjAyOScgOiAnJztcbn1cblxuZnVuY3Rpb24gY2hhckZyb21Db2RlcG9pbnQoYykge1xuICBpZiAoYyA8PSAweEZGRkYpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbiAgfVxuICAvLyBFbmNvZGUgVVRGLTE2IHN1cnJvZ2F0ZSBwYWlyXG4gIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi0xNiNDb2RlX3BvaW50c19VLjJCMDEwMDAwX3RvX1UuMkIxMEZGRkZcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgKChjIC0gMHgwMTAwMDApID4+IDEwKSArIDB4RDgwMCxcbiAgICAoKGMgLSAweDAxMDAwMCkgJiAweDAzRkYpICsgMHhEQzAwXG4gICk7XG59XG5cbi8vIHNldCBhIHByb3BlcnR5IG9mIGEgbGl0ZXJhbCBvYmplY3QsIHdoaWxlIHByb3RlY3RpbmcgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLFxuLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvanMteWFtbC9pc3N1ZXMvMTY0IGZvciBtb3JlIGRldGFpbHNcbmZ1bmN0aW9uIHNldFByb3BlcnR5KG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICAvLyB1c2VkIGZvciB0aGlzIHNwZWNpZmljIGtleSBvbmx5IGJlY2F1c2UgT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIHNsb3dcbiAgaWYgKGtleSA9PT0gJ19fcHJvdG9fXycpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIH1cbn1cblxudmFyIHNpbXBsZUVzY2FwZUNoZWNrID0gbmV3IEFycmF5KDI1Nik7IC8vIGludGVnZXIsIGZvciBmYXN0IGFjY2Vzc1xudmFyIHNpbXBsZUVzY2FwZU1hcCA9IG5ldyBBcnJheSgyNTYpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICBzaW1wbGVFc2NhcGVDaGVja1tpXSA9IHNpbXBsZUVzY2FwZVNlcXVlbmNlKGkpID8gMSA6IDA7XG4gIHNpbXBsZUVzY2FwZU1hcFtpXSA9IHNpbXBsZUVzY2FwZVNlcXVlbmNlKGkpO1xufVxuXG5cbmZ1bmN0aW9uIFN0YXRlKGlucHV0LCBvcHRpb25zKSB7XG4gIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICB0aGlzLmZpbGVuYW1lICA9IG9wdGlvbnNbJ2ZpbGVuYW1lJ10gIHx8IG51bGw7XG4gIHRoaXMuc2NoZW1hICAgID0gb3B0aW9uc1snc2NoZW1hJ10gICAgfHwgREVGQVVMVF9GVUxMX1NDSEVNQTtcbiAgdGhpcy5vbldhcm5pbmcgPSBvcHRpb25zWydvbldhcm5pbmcnXSB8fCBudWxsO1xuICB0aGlzLmxlZ2FjeSAgICA9IG9wdGlvbnNbJ2xlZ2FjeSddICAgIHx8IGZhbHNlO1xuICB0aGlzLmpzb24gICAgICA9IG9wdGlvbnNbJ2pzb24nXSAgICAgIHx8IGZhbHNlO1xuICB0aGlzLmxpc3RlbmVyICA9IG9wdGlvbnNbJ2xpc3RlbmVyJ10gIHx8IG51bGw7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy50eXBlTWFwICAgICAgID0gdGhpcy5zY2hlbWEuY29tcGlsZWRUeXBlTWFwO1xuXG4gIHRoaXMubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgdGhpcy5wb3NpdGlvbiAgID0gMDtcbiAgdGhpcy5saW5lICAgICAgID0gMDtcbiAgdGhpcy5saW5lU3RhcnQgID0gMDtcbiAgdGhpcy5saW5lSW5kZW50ID0gMDtcblxuICB0aGlzLmRvY3VtZW50cyA9IFtdO1xuXG4gIC8qXG4gIHRoaXMudmVyc2lvbjtcbiAgdGhpcy5jaGVja0xpbmVCcmVha3M7XG4gIHRoaXMudGFnTWFwO1xuICB0aGlzLmFuY2hvck1hcDtcbiAgdGhpcy50YWc7XG4gIHRoaXMuYW5jaG9yO1xuICB0aGlzLmtpbmQ7XG4gIHRoaXMucmVzdWx0OyovXG5cbn1cblxuXG5mdW5jdGlvbiBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKSB7XG4gIHJldHVybiBuZXcgWUFNTEV4Y2VwdGlvbihcbiAgICBtZXNzYWdlLFxuICAgIG5ldyBNYXJrKHN0YXRlLmZpbGVuYW1lLCBzdGF0ZS5pbnB1dCwgc3RhdGUucG9zaXRpb24sIHN0YXRlLmxpbmUsIChzdGF0ZS5wb3NpdGlvbiAtIHN0YXRlLmxpbmVTdGFydCkpKTtcbn1cblxuZnVuY3Rpb24gdGhyb3dFcnJvcihzdGF0ZSwgbWVzc2FnZSkge1xuICB0aHJvdyBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKTtcbn1cblxuZnVuY3Rpb24gdGhyb3dXYXJuaW5nKHN0YXRlLCBtZXNzYWdlKSB7XG4gIGlmIChzdGF0ZS5vbldhcm5pbmcpIHtcbiAgICBzdGF0ZS5vbldhcm5pbmcuY2FsbChudWxsLCBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKSk7XG4gIH1cbn1cblxuXG52YXIgZGlyZWN0aXZlSGFuZGxlcnMgPSB7XG5cbiAgWUFNTDogZnVuY3Rpb24gaGFuZGxlWWFtbERpcmVjdGl2ZShzdGF0ZSwgbmFtZSwgYXJncykge1xuXG4gICAgdmFyIG1hdGNoLCBtYWpvciwgbWlub3I7XG5cbiAgICBpZiAoc3RhdGUudmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0aW9uIG9mICVZQU1MIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ1lBTUwgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSBvbmUgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBtYXRjaCA9IC9eKFswLTldKylcXC4oWzAtOV0rKSQvLmV4ZWMoYXJnc1swXSk7XG5cbiAgICBpZiAobWF0Y2ggPT09IG51bGwpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIGFyZ3VtZW50IG9mIHRoZSBZQU1MIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIG1ham9yID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICBtaW5vciA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG5cbiAgICBpZiAobWFqb3IgIT09IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCcpO1xuICAgIH1cblxuICAgIHN0YXRlLnZlcnNpb24gPSBhcmdzWzBdO1xuICAgIHN0YXRlLmNoZWNrTGluZUJyZWFrcyA9IChtaW5vciA8IDIpO1xuXG4gICAgaWYgKG1pbm9yICE9PSAxICYmIG1pbm9yICE9PSAyKSB7XG4gICAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICd1bnN1cHBvcnRlZCBZQU1MIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50Jyk7XG4gICAgfVxuICB9LFxuXG4gIFRBRzogZnVuY3Rpb24gaGFuZGxlVGFnRGlyZWN0aXZlKHN0YXRlLCBuYW1lLCBhcmdzKSB7XG5cbiAgICB2YXIgaGFuZGxlLCBwcmVmaXg7XG5cbiAgICBpZiAoYXJncy5sZW5ndGggIT09IDIpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdUQUcgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSB0d28gYXJndW1lbnRzJyk7XG4gICAgfVxuXG4gICAgaGFuZGxlID0gYXJnc1swXTtcbiAgICBwcmVmaXggPSBhcmdzWzFdO1xuXG4gICAgaWYgKCFQQVRURVJOX1RBR19IQU5ETEUudGVzdChoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaWxsLWZvcm1lZCB0YWcgaGFuZGxlIChmaXJzdCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwoc3RhdGUudGFnTWFwLCBoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGhlcmUgaXMgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHN1ZmZpeCBmb3IgXCInICsgaGFuZGxlICsgJ1wiIHRhZyBoYW5kbGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHByZWZpeCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIHRhZyBwcmVmaXggKHNlY29uZCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBzdGF0ZS50YWdNYXBbaGFuZGxlXSA9IHByZWZpeDtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBjYXB0dXJlU2VnbWVudChzdGF0ZSwgc3RhcnQsIGVuZCwgY2hlY2tKc29uKSB7XG4gIHZhciBfcG9zaXRpb24sIF9sZW5ndGgsIF9jaGFyYWN0ZXIsIF9yZXN1bHQ7XG5cbiAgaWYgKHN0YXJ0IDwgZW5kKSB7XG4gICAgX3Jlc3VsdCA9IHN0YXRlLmlucHV0LnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gICAgaWYgKGNoZWNrSnNvbikge1xuICAgICAgZm9yIChfcG9zaXRpb24gPSAwLCBfbGVuZ3RoID0gX3Jlc3VsdC5sZW5ndGg7IF9wb3NpdGlvbiA8IF9sZW5ndGg7IF9wb3NpdGlvbiArPSAxKSB7XG4gICAgICAgIF9jaGFyYWN0ZXIgPSBfcmVzdWx0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcbiAgICAgICAgaWYgKCEoX2NoYXJhY3RlciA9PT0gMHgwOSB8fFxuICAgICAgICAgICAgICAoMHgyMCA8PSBfY2hhcmFjdGVyICYmIF9jaGFyYWN0ZXIgPD0gMHgxMEZGRkYpKSkge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdleHBlY3RlZCB2YWxpZCBKU09OIGNoYXJhY3RlcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChQQVRURVJOX05PTl9QUklOVEFCTEUudGVzdChfcmVzdWx0KSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RoZSBzdHJlYW0gY29udGFpbnMgbm9uLXByaW50YWJsZSBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuXG4gICAgc3RhdGUucmVzdWx0ICs9IF9yZXN1bHQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWVyZ2VNYXBwaW5ncyhzdGF0ZSwgZGVzdGluYXRpb24sIHNvdXJjZSwgb3ZlcnJpZGFibGVLZXlzKSB7XG4gIHZhciBzb3VyY2VLZXlzLCBrZXksIGluZGV4LCBxdWFudGl0eTtcblxuICBpZiAoIWNvbW1vbi5pc09iamVjdChzb3VyY2UpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Nhbm5vdCBtZXJnZSBtYXBwaW5nczsgdGhlIHByb3ZpZGVkIHNvdXJjZSBvYmplY3QgaXMgdW5hY2NlcHRhYmxlJyk7XG4gIH1cblxuICBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcblxuICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSBzb3VyY2VLZXlzLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaW5kZXhdO1xuXG4gICAgaWYgKCFfaGFzT3duUHJvcGVydHkuY2FsbChkZXN0aW5hdGlvbiwga2V5KSkge1xuICAgICAgc2V0UHJvcGVydHkoZGVzdGluYXRpb24sIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgb3ZlcnJpZGFibGVLZXlzW2tleV0gPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBzdGFydExpbmUsIHN0YXJ0UG9zKSB7XG4gIHZhciBpbmRleCwgcXVhbnRpdHk7XG5cbiAgLy8gVGhlIG91dHB1dCBpcyBhIHBsYWluIG9iamVjdCBoZXJlLCBzbyBrZXlzIGNhbiBvbmx5IGJlIHN0cmluZ3MuXG4gIC8vIFdlIG5lZWQgdG8gY29udmVydCBrZXlOb2RlIHRvIGEgc3RyaW5nLCBidXQgZG9pbmcgc28gY2FuIGhhbmcgdGhlIHByb2Nlc3NcbiAgLy8gKGRlZXBseSBuZXN0ZWQgYXJyYXlzIHRoYXQgZXhwbG9kZSBleHBvbmVudGlhbGx5IHVzaW5nIGFsaWFzZXMpLlxuICBpZiAoQXJyYXkuaXNBcnJheShrZXlOb2RlKSkge1xuICAgIGtleU5vZGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChrZXlOb2RlKTtcblxuICAgIGZvciAoaW5kZXggPSAwLCBxdWFudGl0eSA9IGtleU5vZGUubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXlOb2RlW2luZGV4XSkpIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW5zaWRlIGtleXMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBrZXlOb2RlID09PSAnb2JqZWN0JyAmJiBfY2xhc3Moa2V5Tm9kZVtpbmRleF0pID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICBrZXlOb2RlW2luZGV4XSA9ICdbb2JqZWN0IE9iamVjdF0nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEF2b2lkIGNvZGUgZXhlY3V0aW9uIGluIGxvYWQoKSB2aWEgdG9TdHJpbmcgcHJvcGVydHlcbiAgLy8gKHN0aWxsIHVzZSBpdHMgb3duIHRvU3RyaW5nIGZvciBhcnJheXMsIHRpbWVzdGFtcHMsXG4gIC8vIGFuZCB3aGF0ZXZlciB1c2VyIHNjaGVtYSBleHRlbnNpb25zIGhhcHBlbiB0byBoYXZlIEBAdG9TdHJpbmdUYWcpXG4gIGlmICh0eXBlb2Yga2V5Tm9kZSA9PT0gJ29iamVjdCcgJiYgX2NsYXNzKGtleU5vZGUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgIGtleU5vZGUgPSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG5cbiAga2V5Tm9kZSA9IFN0cmluZyhrZXlOb2RlKTtcblxuICBpZiAoX3Jlc3VsdCA9PT0gbnVsbCkge1xuICAgIF9yZXN1bHQgPSB7fTtcbiAgfVxuXG4gIGlmIChrZXlUYWcgPT09ICd0YWc6eWFtbC5vcmcsMjAwMjptZXJnZScpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZU5vZGUpKSB7XG4gICAgICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSB2YWx1ZU5vZGUubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAgICAgIG1lcmdlTWFwcGluZ3Moc3RhdGUsIF9yZXN1bHQsIHZhbHVlTm9kZVtpbmRleF0sIG92ZXJyaWRhYmxlS2V5cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lcmdlTWFwcGluZ3Moc3RhdGUsIF9yZXN1bHQsIHZhbHVlTm9kZSwgb3ZlcnJpZGFibGVLZXlzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFzdGF0ZS5qc29uICYmXG4gICAgICAgICFfaGFzT3duUHJvcGVydHkuY2FsbChvdmVycmlkYWJsZUtleXMsIGtleU5vZGUpICYmXG4gICAgICAgIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKF9yZXN1bHQsIGtleU5vZGUpKSB7XG4gICAgICBzdGF0ZS5saW5lID0gc3RhcnRMaW5lIHx8IHN0YXRlLmxpbmU7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiA9IHN0YXJ0UG9zIHx8IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0ZWQgbWFwcGluZyBrZXknKTtcbiAgICB9XG4gICAgc2V0UHJvcGVydHkoX3Jlc3VsdCwga2V5Tm9kZSwgdmFsdWVOb2RlKTtcbiAgICBkZWxldGUgb3ZlcnJpZGFibGVLZXlzW2tleU5vZGVdO1xuICB9XG5cbiAgcmV0dXJuIF9yZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRMaW5lQnJlYWsoc3RhdGUpIHtcbiAgdmFyIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDBBLyogTEYgKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICB9IGVsc2UgaWYgKGNoID09PSAweDBELyogQ1IgKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgwQS8qIExGICovKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYSBsaW5lIGJyZWFrIGlzIGV4cGVjdGVkJyk7XG4gIH1cblxuICBzdGF0ZS5saW5lICs9IDE7XG4gIHN0YXRlLmxpbmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xufVxuXG5mdW5jdGlvbiBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBhbGxvd0NvbW1lbnRzLCBjaGVja0luZGVudCkge1xuICB2YXIgbGluZUJyZWFrcyA9IDAsXG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoYWxsb3dDb21tZW50cyAmJiBjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgIGRvIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfSB3aGlsZSAoY2ggIT09IDB4MEEvKiBMRiAqLyAmJiBjaCAhPT0gMHgwRC8qIENSICovICYmIGNoICE9PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG5cbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICBsaW5lQnJlYWtzKys7XG4gICAgICBzdGF0ZS5saW5lSW5kZW50ID0gMDtcblxuICAgICAgd2hpbGUgKGNoID09PSAweDIwLyogU3BhY2UgKi8pIHtcbiAgICAgICAgc3RhdGUubGluZUluZGVudCsrO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjaGVja0luZGVudCAhPT0gLTEgJiYgbGluZUJyZWFrcyAhPT0gMCAmJiBzdGF0ZS5saW5lSW5kZW50IDwgY2hlY2tJbmRlbnQpIHtcbiAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICdkZWZpY2llbnQgaW5kZW50YXRpb24nKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lQnJlYWtzO1xufVxuXG5mdW5jdGlvbiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbik7XG5cbiAgLy8gQ29uZGl0aW9uIHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgaXMgdGVzdGVkXG4gIC8vIGluIHBhcmVudCBvbiBlYWNoIGNhbGwsIGZvciBlZmZpY2llbmN5LiBObyBuZWVkcyB0byB0ZXN0IGhlcmUgYWdhaW4uXG4gIGlmICgoY2ggPT09IDB4MkQvKiAtICovIHx8IGNoID09PSAweDJFLyogLiAqLykgJiZcbiAgICAgIGNoID09PSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbiArIDEpICYmXG4gICAgICBjaCA9PT0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24gKyAyKSkge1xuXG4gICAgX3Bvc2l0aW9uICs9IDM7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gMCB8fCBpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIGNvdW50KSB7XG4gIGlmIChjb3VudCA9PT0gMSkge1xuICAgIHN0YXRlLnJlc3VsdCArPSAnICc7XG4gIH0gZWxzZSBpZiAoY291bnQgPiAxKSB7XG4gICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGNvdW50IC0gMSk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiByZWFkUGxhaW5TY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQsIHdpdGhpbkZsb3dDb2xsZWN0aW9uKSB7XG4gIHZhciBwcmVjZWRpbmcsXG4gICAgICBmb2xsb3dpbmcsXG4gICAgICBjYXB0dXJlU3RhcnQsXG4gICAgICBjYXB0dXJlRW5kLFxuICAgICAgaGFzUGVuZGluZ0NvbnRlbnQsXG4gICAgICBfbGluZSxcbiAgICAgIF9saW5lU3RhcnQsXG4gICAgICBfbGluZUluZGVudCxcbiAgICAgIF9raW5kID0gc3RhdGUua2luZCxcbiAgICAgIF9yZXN1bHQgPSBzdGF0ZS5yZXN1bHQsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChpc19XU19PUl9FT0woY2gpICAgICAgfHxcbiAgICAgIGlzX0ZMT1dfSU5ESUNBVE9SKGNoKSB8fFxuICAgICAgY2ggPT09IDB4MjMvKiAjICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNi8qICYgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDJBLyogKiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjEvKiAhICovICAgIHx8XG4gICAgICBjaCA9PT0gMHg3Qy8qIHwgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDNFLyogPiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjcvKiAnICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyMi8qIFwiICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNS8qICUgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDQwLyogQCAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4NjAvKiBgICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGNoID09PSAweDNGLyogPyAqLyB8fCBjaCA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykgfHxcbiAgICAgICAgd2l0aGluRmxvd0NvbGxlY3Rpb24gJiYgaXNfRkxPV19JTkRJQ0FUT1IoZm9sbG93aW5nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgaGFzUGVuZGluZ0NvbnRlbnQgPSBmYWxzZTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGlmIChpc19XU19PUl9FT0woZm9sbG93aW5nKSB8fFxuICAgICAgICAgIHdpdGhpbkZsb3dDb2xsZWN0aW9uICYmIGlzX0ZMT1dfSU5ESUNBVE9SKGZvbGxvd2luZykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgcHJlY2VkaW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiAtIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKHByZWNlZGluZykpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHx8XG4gICAgICAgICAgICAgICB3aXRoaW5GbG93Q29sbGVjdGlvbiAmJiBpc19GTE9XX0lORElDQVRPUihjaCkpIHtcbiAgICAgIGJyZWFrO1xuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgICBfbGluZVN0YXJ0ID0gc3RhdGUubGluZVN0YXJ0O1xuICAgICAgX2xpbmVJbmRlbnQgPSBzdGF0ZS5saW5lSW5kZW50O1xuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIC0xKTtcblxuICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPj0gbm9kZUluZGVudCkge1xuICAgICAgICBoYXNQZW5kaW5nQ29udGVudCA9IHRydWU7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucG9zaXRpb24gPSBjYXB0dXJlRW5kO1xuICAgICAgICBzdGF0ZS5saW5lID0gX2xpbmU7XG4gICAgICAgIHN0YXRlLmxpbmVTdGFydCA9IF9saW5lU3RhcnQ7XG4gICAgICAgIHN0YXRlLmxpbmVJbmRlbnQgPSBfbGluZUluZGVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc1BlbmRpbmdDb250ZW50KSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCBmYWxzZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBzdGF0ZS5saW5lIC0gX2xpbmUpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgaGFzUGVuZGluZ0NvbnRlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uICsgMTtcbiAgICB9XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIH1cblxuICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCBmYWxzZSk7XG5cbiAgaWYgKHN0YXRlLnJlc3VsdCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9IF9raW5kO1xuICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlYWRTaW5nbGVRdW90ZWRTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNoLFxuICAgICAgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI3LyogJyAqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIHN0YXRlLnBvc2l0aW9uKys7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICB3aGlsZSAoKGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikpICE9PSAwKSB7XG4gICAgaWYgKGNoID09PSAweDI3LyogJyAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICBpZiAoY2ggPT09IDB4MjcvKiAnICovKSB7XG4gICAgICAgIGNhcHR1cmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZCwgdHJ1ZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgbm9kZUluZGVudCkpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgZG9jdW1lbnQgd2l0aGluIGEgc2luZ2xlIHF1b3RlZCBzY2FsYXInKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIHNpbmdsZSBxdW90ZWQgc2NhbGFyJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWREb3VibGVRdW90ZWRTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNhcHR1cmVTdGFydCxcbiAgICAgIGNhcHR1cmVFbmQsXG4gICAgICBoZXhMZW5ndGgsXG4gICAgICBoZXhSZXN1bHQsXG4gICAgICB0bXAsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyMi8qIFwiICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgc3RhdGUucG9zaXRpb24rKztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4MjIvKiBcIiAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgfSBlbHNlIGlmIChjaCA9PT0gMHg1Qy8qIFxcICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgIGlmIChpc19FT0woY2gpKSB7XG4gICAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KTtcblxuICAgICAgICAvLyBUT0RPOiByZXdvcmsgdG8gaW5saW5lIGZuIHdpdGggbm8gdHlwZSBjYXN0P1xuICAgICAgfSBlbHNlIGlmIChjaCA8IDI1NiAmJiBzaW1wbGVFc2NhcGVDaGVja1tjaF0pIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IHNpbXBsZUVzY2FwZU1hcFtjaF07XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG5cbiAgICAgIH0gZWxzZSBpZiAoKHRtcCA9IGVzY2FwZWRIZXhMZW4oY2gpKSA+IDApIHtcbiAgICAgICAgaGV4TGVuZ3RoID0gdG1wO1xuICAgICAgICBoZXhSZXN1bHQgPSAwO1xuXG4gICAgICAgIGZvciAoOyBoZXhMZW5ndGggPiAwOyBoZXhMZW5ndGgtLSkge1xuICAgICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICAgIGlmICgodG1wID0gZnJvbUhleENvZGUoY2gpKSA+PSAwKSB7XG4gICAgICAgICAgICBoZXhSZXN1bHQgPSAoaGV4UmVzdWx0IDw8IDQpICsgdG1wO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdleHBlY3RlZCBoZXhhZGVjaW1hbCBjaGFyYWN0ZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY2hhckZyb21Db2RlcG9pbnQoaGV4UmVzdWx0KTtcblxuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5rbm93biBlc2NhcGUgc2VxdWVuY2UnKTtcbiAgICAgIH1cblxuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCB0cnVlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBkb2N1bWVudCB3aXRoaW4gYSBkb3VibGUgcXVvdGVkIHNjYWxhcicpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgZG91YmxlIHF1b3RlZCBzY2FsYXInKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZsb3dDb2xsZWN0aW9uKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciByZWFkTmV4dCA9IHRydWUsXG4gICAgICBfbGluZSxcbiAgICAgIF90YWcgICAgID0gc3RhdGUudGFnLFxuICAgICAgX3Jlc3VsdCxcbiAgICAgIF9hbmNob3IgID0gc3RhdGUuYW5jaG9yLFxuICAgICAgZm9sbG93aW5nLFxuICAgICAgdGVybWluYXRvcixcbiAgICAgIGlzUGFpcixcbiAgICAgIGlzRXhwbGljaXRQYWlyLFxuICAgICAgaXNNYXBwaW5nLFxuICAgICAgb3ZlcnJpZGFibGVLZXlzID0ge30sXG4gICAgICBrZXlOb2RlLFxuICAgICAga2V5VGFnLFxuICAgICAgdmFsdWVOb2RlLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4NUIvKiBbICovKSB7XG4gICAgdGVybWluYXRvciA9IDB4NUQ7LyogXSAqL1xuICAgIGlzTWFwcGluZyA9IGZhbHNlO1xuICAgIF9yZXN1bHQgPSBbXTtcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHg3Qi8qIHsgKi8pIHtcbiAgICB0ZXJtaW5hdG9yID0gMHg3RDsvKiB9ICovXG4gICAgaXNNYXBwaW5nID0gdHJ1ZTtcbiAgICBfcmVzdWx0ID0ge307XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IHRlcm1pbmF0b3IpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgIHN0YXRlLmtpbmQgPSBpc01hcHBpbmcgPyAnbWFwcGluZycgOiAnc2VxdWVuY2UnO1xuICAgICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXJlYWROZXh0KSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbWlzc2VkIGNvbW1hIGJldHdlZW4gZmxvdyBjb2xsZWN0aW9uIGVudHJpZXMnKTtcbiAgICB9XG5cbiAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICBpc1BhaXIgPSBpc0V4cGxpY2l0UGFpciA9IGZhbHNlO1xuXG4gICAgaWYgKGNoID09PSAweDNGLyogPyAqLykge1xuICAgICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcbiAgICAgICAgaXNQYWlyID0gaXNFeHBsaWNpdFBhaXIgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgIGtleVRhZyA9IHN0YXRlLnRhZztcbiAgICBrZXlOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmICgoaXNFeHBsaWNpdFBhaXIgfHwgc3RhdGUubGluZSA9PT0gX2xpbmUpICYmIGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgaXNQYWlyID0gdHJ1ZTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuICAgICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIH1cblxuICAgIGlmIChpc01hcHBpbmcpIHtcbiAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUpO1xuICAgIH0gZWxzZSBpZiAoaXNQYWlyKSB7XG4gICAgICBfcmVzdWx0LnB1c2goc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgbnVsbCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcmVzdWx0LnB1c2goa2V5Tm9kZSk7XG4gICAgfVxuXG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSAweDJDLyogLCAqLykge1xuICAgICAgcmVhZE5leHQgPSB0cnVlO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFkTmV4dCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIGZsb3cgY29sbGVjdGlvbicpO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tTY2FsYXIoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIGNhcHR1cmVTdGFydCxcbiAgICAgIGZvbGRpbmcsXG4gICAgICBjaG9tcGluZyAgICAgICA9IENIT01QSU5HX0NMSVAsXG4gICAgICBkaWRSZWFkQ29udGVudCA9IGZhbHNlLFxuICAgICAgZGV0ZWN0ZWRJbmRlbnQgPSBmYWxzZSxcbiAgICAgIHRleHRJbmRlbnQgICAgID0gbm9kZUluZGVudCxcbiAgICAgIGVtcHR5TGluZXMgICAgID0gMCxcbiAgICAgIGF0TW9yZUluZGVudGVkID0gZmFsc2UsXG4gICAgICB0bXAsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHg3Qy8qIHwgKi8pIHtcbiAgICBmb2xkaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4M0UvKiA+ICovKSB7XG4gICAgZm9sZGluZyA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IDB4MkIvKiArICovIHx8IGNoID09PSAweDJELyogLSAqLykge1xuICAgICAgaWYgKENIT01QSU5HX0NMSVAgPT09IGNob21waW5nKSB7XG4gICAgICAgIGNob21waW5nID0gKGNoID09PSAweDJCLyogKyAqLykgPyBDSE9NUElOR19LRUVQIDogQ0hPTVBJTkdfU1RSSVA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAncmVwZWF0IG9mIGEgY2hvbXBpbmcgbW9kZSBpZGVudGlmaWVyJyk7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKCh0bXAgPSBmcm9tRGVjaW1hbENvZGUoY2gpKSA+PSAwKSB7XG4gICAgICBpZiAodG1wID09PSAwKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdiYWQgZXhwbGljaXQgaW5kZW50YXRpb24gd2lkdGggb2YgYSBibG9jayBzY2FsYXI7IGl0IGNhbm5vdCBiZSBsZXNzIHRoYW4gb25lJyk7XG4gICAgICB9IGVsc2UgaWYgKCFkZXRlY3RlZEluZGVudCkge1xuICAgICAgICB0ZXh0SW5kZW50ID0gbm9kZUluZGVudCArIHRtcCAtIDE7XG4gICAgICAgIGRldGVjdGVkSW5kZW50ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdyZXBlYXQgb2YgYW4gaW5kZW50YXRpb24gd2lkdGggaWRlbnRpZmllcicpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpO1xuXG4gICAgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICAgIHdoaWxlICghaXNfRU9MKGNoKSAmJiAoY2ggIT09IDApKTtcbiAgICB9XG4gIH1cblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICByZWFkTGluZUJyZWFrKHN0YXRlKTtcbiAgICBzdGF0ZS5saW5lSW5kZW50ID0gMDtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICB3aGlsZSAoKCFkZXRlY3RlZEluZGVudCB8fCBzdGF0ZS5saW5lSW5kZW50IDwgdGV4dEluZGVudCkgJiZcbiAgICAgICAgICAgKGNoID09PSAweDIwLyogU3BhY2UgKi8pKSB7XG4gICAgICBzdGF0ZS5saW5lSW5kZW50Kys7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCFkZXRlY3RlZEluZGVudCAmJiBzdGF0ZS5saW5lSW5kZW50ID4gdGV4dEluZGVudCkge1xuICAgICAgdGV4dEluZGVudCA9IHN0YXRlLmxpbmVJbmRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIGVtcHR5TGluZXMrKztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIEVuZCBvZiB0aGUgc2NhbGFyLlxuICAgIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgdGV4dEluZGVudCkge1xuXG4gICAgICAvLyBQZXJmb3JtIHRoZSBjaG9tcGluZy5cbiAgICAgIGlmIChjaG9tcGluZyA9PT0gQ0hPTVBJTkdfS0VFUCkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZGlkUmVhZENvbnRlbnQgPyAxICsgZW1wdHlMaW5lcyA6IGVtcHR5TGluZXMpO1xuICAgICAgfSBlbHNlIGlmIChjaG9tcGluZyA9PT0gQ0hPTVBJTkdfQ0xJUCkge1xuICAgICAgICBpZiAoZGlkUmVhZENvbnRlbnQpIHsgLy8gaS5lLiBvbmx5IGlmIHRoZSBzY2FsYXIgaXMgbm90IGVtcHR5LlxuICAgICAgICAgIHN0YXRlLnJlc3VsdCArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBCcmVhayB0aGlzIGB3aGlsZWAgY3ljbGUgYW5kIGdvIHRvIHRoZSBmdW5jaXRvbidzIGVwaWxvZ3VlLlxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gRm9sZGVkIHN0eWxlOiB1c2UgZmFuY3kgcnVsZXMgdG8gaGFuZGxlIGxpbmUgYnJlYWtzLlxuICAgIGlmIChmb2xkaW5nKSB7XG5cbiAgICAgIC8vIExpbmVzIHN0YXJ0aW5nIHdpdGggd2hpdGUgc3BhY2UgY2hhcmFjdGVycyAobW9yZS1pbmRlbnRlZCBsaW5lcykgYXJlIG5vdCBmb2xkZWQuXG4gICAgICBpZiAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICAgIGF0TW9yZUluZGVudGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZXhjZXB0IGZvciB0aGUgZmlyc3QgY29udGVudCBsaW5lIChjZi4gRXhhbXBsZSA4LjEpXG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG5cbiAgICAgIC8vIEVuZCBvZiBtb3JlLWluZGVudGVkIGJsb2NrLlxuICAgICAgfSBlbHNlIGlmIChhdE1vcmVJbmRlbnRlZCkge1xuICAgICAgICBhdE1vcmVJbmRlbnRlZCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZW1wdHlMaW5lcyArIDEpO1xuXG4gICAgICAvLyBKdXN0IG9uZSBsaW5lIGJyZWFrIC0gcGVyY2VpdmUgYXMgdGhlIHNhbWUgbGluZS5cbiAgICAgIH0gZWxzZSBpZiAoZW1wdHlMaW5lcyA9PT0gMCkge1xuICAgICAgICBpZiAoZGlkUmVhZENvbnRlbnQpIHsgLy8gaS5lLiBvbmx5IGlmIHdlIGhhdmUgYWxyZWFkeSByZWFkIHNvbWUgc2NhbGFyIGNvbnRlbnQuXG4gICAgICAgICAgc3RhdGUucmVzdWx0ICs9ICcgJztcbiAgICAgICAgfVxuXG4gICAgICAvLyBTZXZlcmFsIGxpbmUgYnJlYWtzIC0gcGVyY2VpdmUgYXMgZGlmZmVyZW50IGxpbmVzLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGVtcHR5TGluZXMpO1xuICAgICAgfVxuXG4gICAgLy8gTGl0ZXJhbCBzdHlsZToganVzdCBhZGQgZXhhY3QgbnVtYmVyIG9mIGxpbmUgYnJlYWtzIGJldHdlZW4gY29udGVudCBsaW5lcy5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gS2VlcCBhbGwgbGluZSBicmVha3MgZXhjZXB0IHRoZSBoZWFkZXIgbGluZSBicmVhay5cbiAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG4gICAgfVxuXG4gICAgZGlkUmVhZENvbnRlbnQgPSB0cnVlO1xuICAgIGRldGVjdGVkSW5kZW50ID0gdHJ1ZTtcbiAgICBlbXB0eUxpbmVzID0gMDtcbiAgICBjYXB0dXJlU3RhcnQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIHdoaWxlICghaXNfRU9MKGNoKSAmJiAoY2ggIT09IDApKSB7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIGZhbHNlKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgX2xpbmUsXG4gICAgICBfdGFnICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBfYW5jaG9yICAgPSBzdGF0ZS5hbmNob3IsXG4gICAgICBfcmVzdWx0ICAgPSBbXSxcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIGRldGVjdGVkICA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG5cbiAgICBpZiAoY2ggIT09IDB4MkQvKiAtICovKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICBpZiAoIWlzX1dTX09SX0VPTChmb2xsb3dpbmcpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgc3RhdGUucG9zaXRpb24rKztcblxuICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50IDw9IG5vZGVJbmRlbnQpIHtcbiAgICAgICAgX3Jlc3VsdC5wdXNoKG51bGwpO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfQkxPQ0tfSU4sIGZhbHNlLCB0cnVlKTtcbiAgICBfcmVzdWx0LnB1c2goc3RhdGUucmVzdWx0KTtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkgJiYgKGNoICE9PSAwKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBpbmRlbnRhdGlvbiBvZiBhIHNlcXVlbmNlIGVudHJ5Jyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgbm9kZUluZGVudCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRldGVjdGVkKSB7XG4gICAgc3RhdGUudGFnID0gX3RhZztcbiAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgIHN0YXRlLmtpbmQgPSAnc2VxdWVuY2UnO1xuICAgIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiByZWFkQmxvY2tNYXBwaW5nKHN0YXRlLCBub2RlSW5kZW50LCBmbG93SW5kZW50KSB7XG4gIHZhciBmb2xsb3dpbmcsXG4gICAgICBhbGxvd0NvbXBhY3QsXG4gICAgICBfbGluZSxcbiAgICAgIF9wb3MsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgX2FuY2hvciAgICAgICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIF9yZXN1bHQgICAgICAgPSB7fSxcbiAgICAgIG92ZXJyaWRhYmxlS2V5cyA9IHt9LFxuICAgICAga2V5VGFnICAgICAgICA9IG51bGwsXG4gICAgICBrZXlOb2RlICAgICAgID0gbnVsbCxcbiAgICAgIHZhbHVlTm9kZSAgICAgPSBudWxsLFxuICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlLFxuICAgICAgZGV0ZWN0ZWQgICAgICA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuICAgIF9saW5lID0gc3RhdGUubGluZTsgLy8gU2F2ZSB0aGUgY3VycmVudCBsaW5lLlxuICAgIF9wb3MgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIC8vXG4gICAgLy8gRXhwbGljaXQgbm90YXRpb24gY2FzZS4gVGhlcmUgYXJlIHR3byBzZXBhcmF0ZSBibG9ja3M6XG4gICAgLy8gZmlyc3QgZm9yIHRoZSBrZXkgKGRlbm90ZWQgYnkgXCI/XCIpIGFuZCBzZWNvbmQgZm9yIHRoZSB2YWx1ZSAoZGVub3RlZCBieSBcIjpcIilcbiAgICAvL1xuICAgIGlmICgoY2ggPT09IDB4M0YvKiA/ICovIHx8IGNoID09PSAweDNBLyogOiAqLykgJiYgaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcblxuICAgICAgaWYgKGNoID09PSAweDNGLyogPyAqLykge1xuICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsKTtcbiAgICAgICAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IHRydWU7XG4gICAgICAgIGFsbG93Q29tcGFjdCA9IHRydWU7XG5cbiAgICAgIH0gZWxzZSBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAvLyBpLmUuIDB4M0EvKiA6ICovID09PSBjaGFyYWN0ZXIgYWZ0ZXIgdGhlIGV4cGxpY2l0IGtleS5cbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlO1xuICAgICAgICBhbGxvd0NvbXBhY3QgPSB0cnVlO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaW5jb21wbGV0ZSBleHBsaWNpdCBtYXBwaW5nIHBhaXI7IGEga2V5IG5vZGUgaXMgbWlzc2VkOyBvciBmb2xsb3dlZCBieSBhIG5vbi10YWJ1bGF0ZWQgZW1wdHkgbGluZScpO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICAgICAgY2ggPSBmb2xsb3dpbmc7XG5cbiAgICAvL1xuICAgIC8vIEltcGxpY2l0IG5vdGF0aW9uIGNhc2UuIEZsb3ctc3R5bGUgbm9kZSBhcyB0aGUga2V5IGZpcnN0LCB0aGVuIFwiOlwiLCBhbmQgdGhlIHZhbHVlLlxuICAgIC8vXG4gICAgfSBlbHNlIGlmIChjb21wb3NlTm9kZShzdGF0ZSwgZmxvd0luZGVudCwgQ09OVEVYVF9GTE9XX09VVCwgZmFsc2UsIHRydWUpKSB7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lID09PSBfbGluZSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgICAgaWYgKCFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYSB3aGl0ZXNwYWNlIGNoYXJhY3RlciBpcyBleHBlY3RlZCBhZnRlciB0aGUga2V5LXZhbHVlIHNlcGFyYXRvciB3aXRoaW4gYSBibG9jayBtYXBwaW5nJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsKTtcbiAgICAgICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBhdEV4cGxpY2l0S2V5ID0gZmFsc2U7XG4gICAgICAgICAgYWxsb3dDb21wYWN0ID0gZmFsc2U7XG4gICAgICAgICAga2V5VGFnID0gc3RhdGUudGFnO1xuICAgICAgICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG5cbiAgICAgICAgfSBlbHNlIGlmIChkZXRlY3RlZCkge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW4gbm90IHJlYWQgYW4gaW1wbGljaXQgbWFwcGluZyBwYWlyOyBhIGNvbG9uIGlzIG1pc3NlZCcpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgICAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBLZWVwIHRoZSByZXN1bHQgb2YgYGNvbXBvc2VOb2RlYC5cbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2UgaWYgKGRldGVjdGVkKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW4gbm90IHJlYWQgYSBibG9jayBtYXBwaW5nIGVudHJ5OyBhIG11bHRpbGluZSBrZXkgbWF5IG5vdCBiZSBhbiBpbXBsaWNpdCBrZXknKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUudGFnID0gX3RhZztcbiAgICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEtlZXAgdGhlIHJlc3VsdCBvZiBgY29tcG9zZU5vZGVgLlxuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrOyAvLyBSZWFkaW5nIGlzIGRvbmUuIEdvIHRvIHRoZSBlcGlsb2d1ZS5cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIENvbW1vbiByZWFkaW5nIGNvZGUgZm9yIGJvdGggZXhwbGljaXQgYW5kIGltcGxpY2l0IG5vdGF0aW9ucy5cbiAgICAvL1xuICAgIGlmIChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkge1xuICAgICAgaWYgKGNvbXBvc2VOb2RlKHN0YXRlLCBub2RlSW5kZW50LCBDT05URVhUX0JMT0NLX09VVCwgdHJ1ZSwgYWxsb3dDb21wYWN0KSkge1xuICAgICAgICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghYXRFeHBsaWNpdEtleSkge1xuICAgICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLCBfbGluZSwgX3Bvcyk7XG4gICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCAmJiAoY2ggIT09IDApKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYmFkIGluZGVudGF0aW9uIG9mIGEgbWFwcGluZyBlbnRyeScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IG5vZGVJbmRlbnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIEVwaWxvZ3VlLlxuICAvL1xuXG4gIC8vIFNwZWNpYWwgY2FzZTogbGFzdCBtYXBwaW5nJ3Mgbm9kZSBjb250YWlucyBvbmx5IHRoZSBrZXkgaW4gZXhwbGljaXQgbm90YXRpb24uXG4gIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIG51bGwpO1xuICB9XG5cbiAgLy8gRXhwb3NlIHRoZSByZXN1bHRpbmcgbWFwcGluZy5cbiAgaWYgKGRldGVjdGVkKSB7XG4gICAgc3RhdGUudGFnID0gX3RhZztcbiAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgIHN0YXRlLmtpbmQgPSAnbWFwcGluZyc7XG4gICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBkZXRlY3RlZDtcbn1cblxuZnVuY3Rpb24gcmVhZFRhZ1Byb3BlcnR5KHN0YXRlKSB7XG4gIHZhciBfcG9zaXRpb24sXG4gICAgICBpc1ZlcmJhdGltID0gZmFsc2UsXG4gICAgICBpc05hbWVkICAgID0gZmFsc2UsXG4gICAgICB0YWdIYW5kbGUsXG4gICAgICB0YWdOYW1lLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjEvKiAhICovKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGlvbiBvZiBhIHRhZyBwcm9wZXJ0eScpO1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHgzQy8qIDwgKi8pIHtcbiAgICBpc1ZlcmJhdGltID0gdHJ1ZTtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgfSBlbHNlIGlmIChjaCA9PT0gMHgyMS8qICEgKi8pIHtcbiAgICBpc05hbWVkID0gdHJ1ZTtcbiAgICB0YWdIYW5kbGUgPSAnISEnO1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB9IGVsc2Uge1xuICAgIHRhZ0hhbmRsZSA9ICchJztcbiAgfVxuXG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIGlmIChpc1ZlcmJhdGltKSB7XG4gICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgY2ggIT09IDB4M0UvKiA+ICovKTtcblxuICAgIGlmIChzdGF0ZS5wb3NpdGlvbiA8IHN0YXRlLmxlbmd0aCkge1xuICAgICAgdGFnTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSB2ZXJiYXRpbSB0YWcnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyMS8qICEgKi8pIHtcbiAgICAgICAgaWYgKCFpc05hbWVkKSB7XG4gICAgICAgICAgdGFnSGFuZGxlID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uIC0gMSwgc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgICAgIGlmICghUEFUVEVSTl9UQUdfSEFORExFLnRlc3QodGFnSGFuZGxlKSkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25hbWVkIHRhZyBoYW5kbGUgY2Fubm90IGNvbnRhaW4gc3VjaCBjaGFyYWN0ZXJzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNOYW1lZCA9IHRydWU7XG4gICAgICAgICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb24gKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgc3VmZml4IGNhbm5vdCBjb250YWluIGV4Y2xhbWF0aW9uIG1hcmtzJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRhZ05hbWUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChQQVRURVJOX0ZMT1dfSU5ESUNBVE9SUy50ZXN0KHRhZ05hbWUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIHN1ZmZpeCBjYW5ub3QgY29udGFpbiBmbG93IGluZGljYXRvciBjaGFyYWN0ZXJzJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRhZ05hbWUgJiYgIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHRhZ05hbWUpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBuYW1lIGNhbm5vdCBjb250YWluIHN1Y2ggY2hhcmFjdGVyczogJyArIHRhZ05hbWUpO1xuICB9XG5cbiAgaWYgKGlzVmVyYmF0aW0pIHtcbiAgICBzdGF0ZS50YWcgPSB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAoX2hhc093blByb3BlcnR5LmNhbGwoc3RhdGUudGFnTWFwLCB0YWdIYW5kbGUpKSB7XG4gICAgc3RhdGUudGFnID0gc3RhdGUudGFnTWFwW3RhZ0hhbmRsZV0gKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnIScpIHtcbiAgICBzdGF0ZS50YWcgPSAnIScgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnISEnKSB7XG4gICAgc3RhdGUudGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZGVjbGFyZWQgdGFnIGhhbmRsZSBcIicgKyB0YWdIYW5kbGUgKyAnXCInKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbixcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI2LyogJiAqLykgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRpb24gb2YgYW4gYW5jaG9yIHByb3BlcnR5Jyk7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbmNob3Igbm9kZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGNoYXJhY3RlcicpO1xuICB9XG5cbiAgc3RhdGUuYW5jaG9yID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQWxpYXMoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiwgYWxpYXMsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyQS8qICogKi8pIHJldHVybiBmYWxzZTtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbGlhcyBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyJyk7XG4gIH1cblxuICBhbGlhcyA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmICghX2hhc093blByb3BlcnR5LmNhbGwoc3RhdGUuYW5jaG9yTWFwLCBhbGlhcykpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5pZGVudGlmaWVkIGFsaWFzIFwiJyArIGFsaWFzICsgJ1wiJyk7XG4gIH1cblxuICBzdGF0ZS5yZXN1bHQgPSBzdGF0ZS5hbmNob3JNYXBbYWxpYXNdO1xuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb21wb3NlTm9kZShzdGF0ZSwgcGFyZW50SW5kZW50LCBub2RlQ29udGV4dCwgYWxsb3dUb1NlZWssIGFsbG93Q29tcGFjdCkge1xuICB2YXIgYWxsb3dCbG9ja1N0eWxlcyxcbiAgICAgIGFsbG93QmxvY2tTY2FsYXJzLFxuICAgICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zLFxuICAgICAgaW5kZW50U3RhdHVzID0gMSwgLy8gMTogdGhpcz5wYXJlbnQsIDA6IHRoaXM9cGFyZW50LCAtMTogdGhpczxwYXJlbnRcbiAgICAgIGF0TmV3TGluZSAgPSBmYWxzZSxcbiAgICAgIGhhc0NvbnRlbnQgPSBmYWxzZSxcbiAgICAgIHR5cGVJbmRleCxcbiAgICAgIHR5cGVRdWFudGl0eSxcbiAgICAgIHR5cGUsXG4gICAgICBmbG93SW5kZW50LFxuICAgICAgYmxvY2tJbmRlbnQ7XG5cbiAgaWYgKHN0YXRlLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgc3RhdGUubGlzdGVuZXIoJ29wZW4nLCBzdGF0ZSk7XG4gIH1cblxuICBzdGF0ZS50YWcgICAgPSBudWxsO1xuICBzdGF0ZS5hbmNob3IgPSBudWxsO1xuICBzdGF0ZS5raW5kICAgPSBudWxsO1xuICBzdGF0ZS5yZXN1bHQgPSBudWxsO1xuXG4gIGFsbG93QmxvY2tTdHlsZXMgPSBhbGxvd0Jsb2NrU2NhbGFycyA9IGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9XG4gICAgQ09OVEVYVF9CTE9DS19PVVQgPT09IG5vZGVDb250ZXh0IHx8XG4gICAgQ09OVEVYVF9CTE9DS19JTiAgPT09IG5vZGVDb250ZXh0O1xuXG4gIGlmIChhbGxvd1RvU2Vlaykge1xuICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgIGF0TmV3TGluZSA9IHRydWU7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAwO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IC0xO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpbmRlbnRTdGF0dXMgPT09IDEpIHtcbiAgICB3aGlsZSAocmVhZFRhZ1Byb3BlcnR5KHN0YXRlKSB8fCByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpKSB7XG4gICAgICBpZiAoc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpKSB7XG4gICAgICAgIGF0TmV3TGluZSA9IHRydWU7XG4gICAgICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9IGFsbG93QmxvY2tTdHlsZXM7XG5cbiAgICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IC0xO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoYWxsb3dCbG9ja0NvbGxlY3Rpb25zKSB7XG4gICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zID0gYXROZXdMaW5lIHx8IGFsbG93Q29tcGFjdDtcbiAgfVxuXG4gIGlmIChpbmRlbnRTdGF0dXMgPT09IDEgfHwgQ09OVEVYVF9CTE9DS19PVVQgPT09IG5vZGVDb250ZXh0KSB7XG4gICAgaWYgKENPTlRFWFRfRkxPV19JTiA9PT0gbm9kZUNvbnRleHQgfHwgQ09OVEVYVF9GTE9XX09VVCA9PT0gbm9kZUNvbnRleHQpIHtcbiAgICAgIGZsb3dJbmRlbnQgPSBwYXJlbnRJbmRlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsb3dJbmRlbnQgPSBwYXJlbnRJbmRlbnQgKyAxO1xuICAgIH1cblxuICAgIGJsb2NrSW5kZW50ID0gc3RhdGUucG9zaXRpb24gLSBzdGF0ZS5saW5lU3RhcnQ7XG5cbiAgICBpZiAoaW5kZW50U3RhdHVzID09PSAxKSB7XG4gICAgICBpZiAoYWxsb3dCbG9ja0NvbGxlY3Rpb25zICYmXG4gICAgICAgICAgKHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBibG9ja0luZGVudCkgfHxcbiAgICAgICAgICAgcmVhZEJsb2NrTWFwcGluZyhzdGF0ZSwgYmxvY2tJbmRlbnQsIGZsb3dJbmRlbnQpKSB8fFxuICAgICAgICAgIHJlYWRGbG93Q29sbGVjdGlvbihzdGF0ZSwgZmxvd0luZGVudCkpIHtcbiAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoKGFsbG93QmxvY2tTY2FsYXJzICYmIHJlYWRCbG9ja1NjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkpIHx8XG4gICAgICAgICAgICByZWFkU2luZ2xlUXVvdGVkU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50KSB8fFxuICAgICAgICAgICAgcmVhZERvdWJsZVF1b3RlZFNjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlYWRBbGlhcyhzdGF0ZSkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICAgIGlmIChzdGF0ZS50YWcgIT09IG51bGwgfHwgc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYWxpYXMgbm9kZSBzaG91bGQgbm90IGhhdmUgYW55IHByb3BlcnRpZXMnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWFkUGxhaW5TY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQsIENPTlRFWFRfRkxPV19JTiA9PT0gbm9kZUNvbnRleHQpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAoc3RhdGUudGFnID09PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0ZS50YWcgPSAnPyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpbmRlbnRTdGF0dXMgPT09IDApIHtcbiAgICAgIC8vIFNwZWNpYWwgY2FzZTogYmxvY2sgc2VxdWVuY2VzIGFyZSBhbGxvd2VkIHRvIGhhdmUgc2FtZSBpbmRlbnRhdGlvbiBsZXZlbCBhcyB0aGUgcGFyZW50LlxuICAgICAgLy8gaHR0cDovL3d3dy55YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjaWQyNzk5Nzg0XG4gICAgICBoYXNDb250ZW50ID0gYWxsb3dCbG9ja0NvbGxlY3Rpb25zICYmIHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBibG9ja0luZGVudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICchJykge1xuICAgIGlmIChzdGF0ZS50YWcgPT09ICc/Jykge1xuICAgICAgLy8gSW1wbGljaXQgcmVzb2x2aW5nIGlzIG5vdCBhbGxvd2VkIGZvciBub24tc2NhbGFyIHR5cGVzLCBhbmQgJz8nXG4gICAgICAvLyBub24tc3BlY2lmaWMgdGFnIGlzIG9ubHkgYXV0b21hdGljYWxseSBhc3NpZ25lZCB0byBwbGFpbiBzY2FsYXJzLlxuICAgICAgLy9cbiAgICAgIC8vIFdlIG9ubHkgbmVlZCB0byBjaGVjayBraW5kIGNvbmZvcm1pdHkgaW4gY2FzZSB1c2VyIGV4cGxpY2l0bHkgYXNzaWducyAnPydcbiAgICAgIC8vIHRhZywgZm9yIGV4YW1wbGUgbGlrZSB0aGlzOiBcIiE8Pz4gWzBdXCJcbiAgICAgIC8vXG4gICAgICBpZiAoc3RhdGUucmVzdWx0ICE9PSBudWxsICYmIHN0YXRlLmtpbmQgIT09ICdzY2FsYXInKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgbm9kZSBraW5kIGZvciAhPD8+IHRhZzsgaXQgc2hvdWxkIGJlIFwic2NhbGFyXCIsIG5vdCBcIicgKyBzdGF0ZS5raW5kICsgJ1wiJyk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodHlwZUluZGV4ID0gMCwgdHlwZVF1YW50aXR5ID0gc3RhdGUuaW1wbGljaXRUeXBlcy5sZW5ndGg7IHR5cGVJbmRleCA8IHR5cGVRdWFudGl0eTsgdHlwZUluZGV4ICs9IDEpIHtcbiAgICAgICAgdHlwZSA9IHN0YXRlLmltcGxpY2l0VHlwZXNbdHlwZUluZGV4XTtcblxuICAgICAgICBpZiAodHlwZS5yZXNvbHZlKHN0YXRlLnJlc3VsdCkpIHsgLy8gYHN0YXRlLnJlc3VsdGAgdXBkYXRlZCBpbiByZXNvbHZlciBpZiBtYXRjaGVkXG4gICAgICAgICAgc3RhdGUucmVzdWx0ID0gdHlwZS5jb25zdHJ1Y3Qoc3RhdGUucmVzdWx0KTtcbiAgICAgICAgICBzdGF0ZS50YWcgPSB0eXBlLnRhZztcbiAgICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKF9oYXNPd25Qcm9wZXJ0eS5jYWxsKHN0YXRlLnR5cGVNYXBbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXSwgc3RhdGUudGFnKSkge1xuICAgICAgdHlwZSA9IHN0YXRlLnR5cGVNYXBbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXVtzdGF0ZS50YWddO1xuXG4gICAgICBpZiAoc3RhdGUucmVzdWx0ICE9PSBudWxsICYmIHR5cGUua2luZCAhPT0gc3RhdGUua2luZCkge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5hY2NlcHRhYmxlIG5vZGUga2luZCBmb3IgITwnICsgc3RhdGUudGFnICsgJz4gdGFnOyBpdCBzaG91bGQgYmUgXCInICsgdHlwZS5raW5kICsgJ1wiLCBub3QgXCInICsgc3RhdGUua2luZCArICdcIicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXR5cGUucmVzb2x2ZShzdGF0ZS5yZXN1bHQpKSB7IC8vIGBzdGF0ZS5yZXN1bHRgIHVwZGF0ZWQgaW4gcmVzb2x2ZXIgaWYgbWF0Y2hlZFxuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2Fubm90IHJlc29sdmUgYSBub2RlIHdpdGggITwnICsgc3RhdGUudGFnICsgJz4gZXhwbGljaXQgdGFnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgPSB0eXBlLmNvbnN0cnVjdChzdGF0ZS5yZXN1bHQpO1xuICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3Vua25vd24gdGFnICE8JyArIHN0YXRlLnRhZyArICc+Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgc3RhdGUubGlzdGVuZXIoJ2Nsb3NlJywgc3RhdGUpO1xuICB9XG4gIHJldHVybiBzdGF0ZS50YWcgIT09IG51bGwgfHwgIHN0YXRlLmFuY2hvciAhPT0gbnVsbCB8fCBoYXNDb250ZW50O1xufVxuXG5mdW5jdGlvbiByZWFkRG9jdW1lbnQoc3RhdGUpIHtcbiAgdmFyIGRvY3VtZW50U3RhcnQgPSBzdGF0ZS5wb3NpdGlvbixcbiAgICAgIF9wb3NpdGlvbixcbiAgICAgIGRpcmVjdGl2ZU5hbWUsXG4gICAgICBkaXJlY3RpdmVBcmdzLFxuICAgICAgaGFzRGlyZWN0aXZlcyA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgc3RhdGUudmVyc2lvbiA9IG51bGw7XG4gIHN0YXRlLmNoZWNrTGluZUJyZWFrcyA9IHN0YXRlLmxlZ2FjeTtcbiAgc3RhdGUudGFnTWFwID0ge307XG4gIHN0YXRlLmFuY2hvck1hcCA9IHt9O1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiAwIHx8IGNoICE9PSAweDI1LyogJSAqLykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaGFzRGlyZWN0aXZlcyA9IHRydWU7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgZGlyZWN0aXZlTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuICAgIGRpcmVjdGl2ZUFyZ3MgPSBbXTtcblxuICAgIGlmIChkaXJlY3RpdmVOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdkaXJlY3RpdmUgbmFtZSBtdXN0IG5vdCBiZSBsZXNzIHRoYW4gb25lIGNoYXJhY3RlciBpbiBsZW5ndGgnKTtcbiAgICB9XG5cbiAgICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfRU9MKGNoKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNfRU9MKGNoKSkgYnJlYWs7XG5cbiAgICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVBcmdzLnB1c2goc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbikpO1xuICAgIH1cblxuICAgIGlmIChjaCAhPT0gMCkgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG5cbiAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwoZGlyZWN0aXZlSGFuZGxlcnMsIGRpcmVjdGl2ZU5hbWUpKSB7XG4gICAgICBkaXJlY3RpdmVIYW5kbGVyc1tkaXJlY3RpdmVOYW1lXShzdGF0ZSwgZGlyZWN0aXZlTmFtZSwgZGlyZWN0aXZlQXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ3Vua25vd24gZG9jdW1lbnQgZGlyZWN0aXZlIFwiJyArIGRpcmVjdGl2ZU5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH1cblxuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IDAgJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pICAgICA9PT0gMHgyRC8qIC0gKi8gJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKSA9PT0gMHgyRC8qIC0gKi8gJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAyKSA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAzO1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICB9IGVsc2UgaWYgKGhhc0RpcmVjdGl2ZXMpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZGlyZWN0aXZlcyBlbmQgbWFyayBpcyBleHBlY3RlZCcpO1xuICB9XG5cbiAgY29tcG9zZU5vZGUoc3RhdGUsIHN0YXRlLmxpbmVJbmRlbnQgLSAxLCBDT05URVhUX0JMT0NLX09VVCwgZmFsc2UsIHRydWUpO1xuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgaWYgKHN0YXRlLmNoZWNrTGluZUJyZWFrcyAmJlxuICAgICAgUEFUVEVSTl9OT05fQVNDSUlfTElORV9CUkVBS1MudGVzdChzdGF0ZS5pbnB1dC5zbGljZShkb2N1bWVudFN0YXJ0LCBzdGF0ZS5wb3NpdGlvbikpKSB7XG4gICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAnbm9uLUFTQ0lJIGxpbmUgYnJlYWtzIGFyZSBpbnRlcnByZXRlZCBhcyBjb250ZW50Jyk7XG4gIH1cblxuICBzdGF0ZS5kb2N1bWVudHMucHVzaChzdGF0ZS5yZXN1bHQpO1xuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcblxuICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgyRS8qIC4gKi8pIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uICs9IDM7XG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA8IChzdGF0ZS5sZW5ndGggLSAxKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdlbmQgb2YgdGhlIHN0cmVhbSBvciBhIGRvY3VtZW50IHNlcGFyYXRvciBpcyBleHBlY3RlZCcpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpIHtcbiAgaW5wdXQgPSBTdHJpbmcoaW5wdXQpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBpZiAoaW5wdXQubGVuZ3RoICE9PSAwKSB7XG5cbiAgICAvLyBBZGQgdGFpbGluZyBgXFxuYCBpZiBub3QgZXhpc3RzXG4gICAgaWYgKGlucHV0LmNoYXJDb2RlQXQoaW5wdXQubGVuZ3RoIC0gMSkgIT09IDB4MEEvKiBMRiAqLyAmJlxuICAgICAgICBpbnB1dC5jaGFyQ29kZUF0KGlucHV0Lmxlbmd0aCAtIDEpICE9PSAweDBELyogQ1IgKi8pIHtcbiAgICAgIGlucHV0ICs9ICdcXG4nO1xuICAgIH1cblxuICAgIC8vIFN0cmlwIEJPTVxuICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KDApID09PSAweEZFRkYpIHtcbiAgICAgIGlucHV0ID0gaW5wdXQuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHN0YXRlID0gbmV3IFN0YXRlKGlucHV0LCBvcHRpb25zKTtcblxuICB2YXIgbnVsbHBvcyA9IGlucHV0LmluZGV4T2YoJ1xcMCcpO1xuXG4gIGlmIChudWxscG9zICE9PSAtMSkge1xuICAgIHN0YXRlLnBvc2l0aW9uID0gbnVsbHBvcztcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbnVsbCBieXRlIGlzIG5vdCBhbGxvd2VkIGluIGlucHV0Jyk7XG4gIH1cblxuICAvLyBVc2UgMCBhcyBzdHJpbmcgdGVybWluYXRvci4gVGhhdCBzaWduaWZpY2FudGx5IHNpbXBsaWZpZXMgYm91bmRzIGNoZWNrLlxuICBzdGF0ZS5pbnB1dCArPSAnXFwwJztcblxuICB3aGlsZSAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MjAvKiBTcGFjZSAqLykge1xuICAgIHN0YXRlLmxpbmVJbmRlbnQgKz0gMTtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICB9XG5cbiAgd2hpbGUgKHN0YXRlLnBvc2l0aW9uIDwgKHN0YXRlLmxlbmd0aCAtIDEpKSB7XG4gICAgcmVhZERvY3VtZW50KHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZS5kb2N1bWVudHM7XG59XG5cblxuZnVuY3Rpb24gbG9hZEFsbChpbnB1dCwgaXRlcmF0b3IsIG9wdGlvbnMpIHtcbiAgaWYgKGl0ZXJhdG9yICE9PSBudWxsICYmIHR5cGVvZiBpdGVyYXRvciA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgb3B0aW9ucyA9IGl0ZXJhdG9yO1xuICAgIGl0ZXJhdG9yID0gbnVsbDtcbiAgfVxuXG4gIHZhciBkb2N1bWVudHMgPSBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKTtcblxuICBpZiAodHlwZW9mIGl0ZXJhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50cztcbiAgfVxuXG4gIGZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZG9jdW1lbnRzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBpdGVyYXRvcihkb2N1bWVudHNbaW5kZXhdKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGxvYWQoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIGRvY3VtZW50cyA9IGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpO1xuXG4gIGlmIChkb2N1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgLyplc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQqL1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBkb2N1bWVudHNbMF07XG4gIH1cbiAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJ2V4cGVjdGVkIGEgc2luZ2xlIGRvY3VtZW50IGluIHRoZSBzdHJlYW0sIGJ1dCBmb3VuZCBtb3JlJyk7XG59XG5cblxuZnVuY3Rpb24gc2FmZUxvYWRBbGwoaW5wdXQsIGl0ZXJhdG9yLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgaXRlcmF0b3IgPT09ICdvYmplY3QnICYmIGl0ZXJhdG9yICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJykge1xuICAgIG9wdGlvbnMgPSBpdGVyYXRvcjtcbiAgICBpdGVyYXRvciA9IG51bGw7XG4gIH1cblxuICByZXR1cm4gbG9hZEFsbChpbnB1dCwgaXRlcmF0b3IsIGNvbW1vbi5leHRlbmQoeyBzY2hlbWE6IERFRkFVTFRfU0FGRV9TQ0hFTUEgfSwgb3B0aW9ucykpO1xufVxuXG5cbmZ1bmN0aW9uIHNhZmVMb2FkKGlucHV0LCBvcHRpb25zKSB7XG4gIHJldHVybiBsb2FkKGlucHV0LCBjb21tb24uZXh0ZW5kKHsgc2NoZW1hOiBERUZBVUxUX1NBRkVfU0NIRU1BIH0sIG9wdGlvbnMpKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cy5sb2FkQWxsICAgICA9IGxvYWRBbGw7XG5tb2R1bGUuZXhwb3J0cy5sb2FkICAgICAgICA9IGxvYWQ7XG5tb2R1bGUuZXhwb3J0cy5zYWZlTG9hZEFsbCA9IHNhZmVMb2FkQWxsO1xubW9kdWxlLmV4cG9ydHMuc2FmZUxvYWQgICAgPSBzYWZlTG9hZDtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUqL1xuXG52YXIgY29tbW9uICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vY29tbW9uJyk7XG52YXIgWUFNTEV4Y2VwdGlvbiAgICAgICA9IHJlcXVpcmUoJy4vZXhjZXB0aW9uJyk7XG52YXIgREVGQVVMVF9GVUxMX1NDSEVNQSA9IHJlcXVpcmUoJy4vc2NoZW1hL2RlZmF1bHRfZnVsbCcpO1xudmFyIERFRkFVTFRfU0FGRV9TQ0hFTUEgPSByZXF1aXJlKCcuL3NjaGVtYS9kZWZhdWx0X3NhZmUnKTtcblxudmFyIF90b1N0cmluZyAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIENIQVJfVEFCICAgICAgICAgICAgICAgICAgPSAweDA5OyAvKiBUYWIgKi9cbnZhciBDSEFSX0xJTkVfRkVFRCAgICAgICAgICAgID0gMHgwQTsgLyogTEYgKi9cbnZhciBDSEFSX0NBUlJJQUdFX1JFVFVSTiAgICAgID0gMHgwRDsgLyogQ1IgKi9cbnZhciBDSEFSX1NQQUNFICAgICAgICAgICAgICAgID0gMHgyMDsgLyogU3BhY2UgKi9cbnZhciBDSEFSX0VYQ0xBTUFUSU9OICAgICAgICAgID0gMHgyMTsgLyogISAqL1xudmFyIENIQVJfRE9VQkxFX1FVT1RFICAgICAgICAgPSAweDIyOyAvKiBcIiAqL1xudmFyIENIQVJfU0hBUlAgICAgICAgICAgICAgICAgPSAweDIzOyAvKiAjICovXG52YXIgQ0hBUl9QRVJDRU5UICAgICAgICAgICAgICA9IDB4MjU7IC8qICUgKi9cbnZhciBDSEFSX0FNUEVSU0FORCAgICAgICAgICAgID0gMHgyNjsgLyogJiAqL1xudmFyIENIQVJfU0lOR0xFX1FVT1RFICAgICAgICAgPSAweDI3OyAvKiAnICovXG52YXIgQ0hBUl9BU1RFUklTSyAgICAgICAgICAgICA9IDB4MkE7IC8qICogKi9cbnZhciBDSEFSX0NPTU1BICAgICAgICAgICAgICAgID0gMHgyQzsgLyogLCAqL1xudmFyIENIQVJfTUlOVVMgICAgICAgICAgICAgICAgPSAweDJEOyAvKiAtICovXG52YXIgQ0hBUl9DT0xPTiAgICAgICAgICAgICAgICA9IDB4M0E7IC8qIDogKi9cbnZhciBDSEFSX0VRVUFMUyAgICAgICAgICAgICAgID0gMHgzRDsgLyogPSAqL1xudmFyIENIQVJfR1JFQVRFUl9USEFOICAgICAgICAgPSAweDNFOyAvKiA+ICovXG52YXIgQ0hBUl9RVUVTVElPTiAgICAgICAgICAgICA9IDB4M0Y7IC8qID8gKi9cbnZhciBDSEFSX0NPTU1FUkNJQUxfQVQgICAgICAgID0gMHg0MDsgLyogQCAqL1xudmFyIENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVCAgPSAweDVCOyAvKiBbICovXG52YXIgQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVCA9IDB4NUQ7IC8qIF0gKi9cbnZhciBDSEFSX0dSQVZFX0FDQ0VOVCAgICAgICAgID0gMHg2MDsgLyogYCAqL1xudmFyIENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUICAgPSAweDdCOyAvKiB7ICovXG52YXIgQ0hBUl9WRVJUSUNBTF9MSU5FICAgICAgICA9IDB4N0M7IC8qIHwgKi9cbnZhciBDSEFSX1JJR0hUX0NVUkxZX0JSQUNLRVQgID0gMHg3RDsgLyogfSAqL1xuXG52YXIgRVNDQVBFX1NFUVVFTkNFUyA9IHt9O1xuXG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDBdICAgPSAnXFxcXDAnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDA3XSAgID0gJ1xcXFxhJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwOF0gICA9ICdcXFxcYic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDldICAgPSAnXFxcXHQnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBBXSAgID0gJ1xcXFxuJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwQl0gICA9ICdcXFxcdic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MENdICAgPSAnXFxcXGYnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBEXSAgID0gJ1xcXFxyJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgxQl0gICA9ICdcXFxcZSc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjJdICAgPSAnXFxcXFwiJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHg1Q10gICA9ICdcXFxcXFxcXCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4ODVdICAgPSAnXFxcXE4nO1xuRVNDQVBFX1NFUVVFTkNFU1sweEEwXSAgID0gJ1xcXFxfJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgyMDI4XSA9ICdcXFxcTCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjAyOV0gPSAnXFxcXFAnO1xuXG52YXIgREVQUkVDQVRFRF9CT09MRUFOU19TWU5UQVggPSBbXG4gICd5JywgJ1knLCAneWVzJywgJ1llcycsICdZRVMnLCAnb24nLCAnT24nLCAnT04nLFxuICAnbicsICdOJywgJ25vJywgJ05vJywgJ05PJywgJ29mZicsICdPZmYnLCAnT0ZGJ1xuXTtcblxuZnVuY3Rpb24gY29tcGlsZVN0eWxlTWFwKHNjaGVtYSwgbWFwKSB7XG4gIHZhciByZXN1bHQsIGtleXMsIGluZGV4LCBsZW5ndGgsIHRhZywgc3R5bGUsIHR5cGU7XG5cbiAgaWYgKG1hcCA9PT0gbnVsbCkgcmV0dXJuIHt9O1xuXG4gIHJlc3VsdCA9IHt9O1xuICBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdGFnID0ga2V5c1tpbmRleF07XG4gICAgc3R5bGUgPSBTdHJpbmcobWFwW3RhZ10pO1xuXG4gICAgaWYgKHRhZy5zbGljZSgwLCAyKSA9PT0gJyEhJykge1xuICAgICAgdGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWcuc2xpY2UoMik7XG4gICAgfVxuICAgIHR5cGUgPSBzY2hlbWEuY29tcGlsZWRUeXBlTWFwWydmYWxsYmFjayddW3RhZ107XG5cbiAgICBpZiAodHlwZSAmJiBfaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlLnN0eWxlQWxpYXNlcywgc3R5bGUpKSB7XG4gICAgICBzdHlsZSA9IHR5cGUuc3R5bGVBbGlhc2VzW3N0eWxlXTtcbiAgICB9XG5cbiAgICByZXN1bHRbdGFnXSA9IHN0eWxlO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZW5jb2RlSGV4KGNoYXJhY3Rlcikge1xuICB2YXIgc3RyaW5nLCBoYW5kbGUsIGxlbmd0aDtcblxuICBzdHJpbmcgPSBjaGFyYWN0ZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cbiAgaWYgKGNoYXJhY3RlciA8PSAweEZGKSB7XG4gICAgaGFuZGxlID0gJ3gnO1xuICAgIGxlbmd0aCA9IDI7XG4gIH0gZWxzZSBpZiAoY2hhcmFjdGVyIDw9IDB4RkZGRikge1xuICAgIGhhbmRsZSA9ICd1JztcbiAgICBsZW5ndGggPSA0O1xuICB9IGVsc2UgaWYgKGNoYXJhY3RlciA8PSAweEZGRkZGRkZGKSB7XG4gICAgaGFuZGxlID0gJ1UnO1xuICAgIGxlbmd0aCA9IDg7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJ2NvZGUgcG9pbnQgd2l0aGluIGEgc3RyaW5nIG1heSBub3QgYmUgZ3JlYXRlciB0aGFuIDB4RkZGRkZGRkYnKTtcbiAgfVxuXG4gIHJldHVybiAnXFxcXCcgKyBoYW5kbGUgKyBjb21tb24ucmVwZWF0KCcwJywgbGVuZ3RoIC0gc3RyaW5nLmxlbmd0aCkgKyBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIFN0YXRlKG9wdGlvbnMpIHtcbiAgdGhpcy5zY2hlbWEgICAgICAgID0gb3B0aW9uc1snc2NoZW1hJ10gfHwgREVGQVVMVF9GVUxMX1NDSEVNQTtcbiAgdGhpcy5pbmRlbnQgICAgICAgID0gTWF0aC5tYXgoMSwgKG9wdGlvbnNbJ2luZGVudCddIHx8IDIpKTtcbiAgdGhpcy5ub0FycmF5SW5kZW50ID0gb3B0aW9uc1snbm9BcnJheUluZGVudCddIHx8IGZhbHNlO1xuICB0aGlzLnNraXBJbnZhbGlkICAgPSBvcHRpb25zWydza2lwSW52YWxpZCddIHx8IGZhbHNlO1xuICB0aGlzLmZsb3dMZXZlbCAgICAgPSAoY29tbW9uLmlzTm90aGluZyhvcHRpb25zWydmbG93TGV2ZWwnXSkgPyAtMSA6IG9wdGlvbnNbJ2Zsb3dMZXZlbCddKTtcbiAgdGhpcy5zdHlsZU1hcCAgICAgID0gY29tcGlsZVN0eWxlTWFwKHRoaXMuc2NoZW1hLCBvcHRpb25zWydzdHlsZXMnXSB8fCBudWxsKTtcbiAgdGhpcy5zb3J0S2V5cyAgICAgID0gb3B0aW9uc1snc29ydEtleXMnXSB8fCBmYWxzZTtcbiAgdGhpcy5saW5lV2lkdGggICAgID0gb3B0aW9uc1snbGluZVdpZHRoJ10gfHwgODA7XG4gIHRoaXMubm9SZWZzICAgICAgICA9IG9wdGlvbnNbJ25vUmVmcyddIHx8IGZhbHNlO1xuICB0aGlzLm5vQ29tcGF0TW9kZSAgPSBvcHRpb25zWydub0NvbXBhdE1vZGUnXSB8fCBmYWxzZTtcbiAgdGhpcy5jb25kZW5zZUZsb3cgID0gb3B0aW9uc1snY29uZGVuc2VGbG93J10gfHwgZmFsc2U7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy5leHBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRFeHBsaWNpdDtcblxuICB0aGlzLnRhZyA9IG51bGw7XG4gIHRoaXMucmVzdWx0ID0gJyc7XG5cbiAgdGhpcy5kdXBsaWNhdGVzID0gW107XG4gIHRoaXMudXNlZER1cGxpY2F0ZXMgPSBudWxsO1xufVxuXG4vLyBJbmRlbnRzIGV2ZXJ5IGxpbmUgaW4gYSBzdHJpbmcuIEVtcHR5IGxpbmVzIChcXG4gb25seSkgYXJlIG5vdCBpbmRlbnRlZC5cbmZ1bmN0aW9uIGluZGVudFN0cmluZyhzdHJpbmcsIHNwYWNlcykge1xuICB2YXIgaW5kID0gY29tbW9uLnJlcGVhdCgnICcsIHNwYWNlcyksXG4gICAgICBwb3NpdGlvbiA9IDAsXG4gICAgICBuZXh0ID0gLTEsXG4gICAgICByZXN1bHQgPSAnJyxcbiAgICAgIGxpbmUsXG4gICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgIG5leHQgPSBzdHJpbmcuaW5kZXhPZignXFxuJywgcG9zaXRpb24pO1xuICAgIGlmIChuZXh0ID09PSAtMSkge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbik7XG4gICAgICBwb3NpdGlvbiA9IGxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbiwgbmV4dCArIDEpO1xuICAgICAgcG9zaXRpb24gPSBuZXh0ICsgMTtcbiAgICB9XG5cbiAgICBpZiAobGluZS5sZW5ndGggJiYgbGluZSAhPT0gJ1xcbicpIHJlc3VsdCArPSBpbmQ7XG5cbiAgICByZXN1bHQgKz0gbGluZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKSB7XG4gIHJldHVybiAnXFxuJyArIGNvbW1vbi5yZXBlYXQoJyAnLCBzdGF0ZS5pbmRlbnQgKiBsZXZlbCk7XG59XG5cbmZ1bmN0aW9uIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyKSB7XG4gIHZhciBpbmRleCwgbGVuZ3RoLCB0eXBlO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBzdGF0ZS5pbXBsaWNpdFR5cGVzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB0eXBlID0gc3RhdGUuaW1wbGljaXRUeXBlc1tpbmRleF07XG5cbiAgICBpZiAodHlwZS5yZXNvbHZlKHN0cikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gWzMzXSBzLXdoaXRlIDo6PSBzLXNwYWNlIHwgcy10YWJcbmZ1bmN0aW9uIGlzV2hpdGVzcGFjZShjKSB7XG4gIHJldHVybiBjID09PSBDSEFSX1NQQUNFIHx8IGMgPT09IENIQVJfVEFCO1xufVxuXG4vLyBSZXR1cm5zIHRydWUgaWYgdGhlIGNoYXJhY3RlciBjYW4gYmUgcHJpbnRlZCB3aXRob3V0IGVzY2FwaW5nLlxuLy8gRnJvbSBZQU1MIDEuMjogXCJhbnkgYWxsb3dlZCBjaGFyYWN0ZXJzIGtub3duIHRvIGJlIG5vbi1wcmludGFibGVcbi8vIHNob3VsZCBhbHNvIGJlIGVzY2FwZWQuIFtIb3dldmVyLF0gVGhpcyBpc25cdTIwMTl0IG1hbmRhdG9yeVwiXG4vLyBEZXJpdmVkIGZyb20gbmItY2hhciAtIFxcdCAtICN4ODUgLSAjeEEwIC0gI3gyMDI4IC0gI3gyMDI5LlxuZnVuY3Rpb24gaXNQcmludGFibGUoYykge1xuICByZXR1cm4gICgweDAwMDIwIDw9IGMgJiYgYyA8PSAweDAwMDA3RSlcbiAgICAgIHx8ICgoMHgwMDBBMSA8PSBjICYmIGMgPD0gMHgwMEQ3RkYpICYmIGMgIT09IDB4MjAyOCAmJiBjICE9PSAweDIwMjkpXG4gICAgICB8fCAoKDB4MEUwMDAgPD0gYyAmJiBjIDw9IDB4MDBGRkZEKSAmJiBjICE9PSAweEZFRkYgLyogQk9NICovKVxuICAgICAgfHwgICgweDEwMDAwIDw9IGMgJiYgYyA8PSAweDEwRkZGRik7XG59XG5cbi8vIFszNF0gbnMtY2hhciA6Oj0gbmItY2hhciAtIHMtd2hpdGVcbi8vIFsyN10gbmItY2hhciA6Oj0gYy1wcmludGFibGUgLSBiLWNoYXIgLSBjLWJ5dGUtb3JkZXItbWFya1xuLy8gWzI2XSBiLWNoYXIgIDo6PSBiLWxpbmUtZmVlZCB8IGItY2FycmlhZ2UtcmV0dXJuXG4vLyBbMjRdIGItbGluZS1mZWVkICAgICAgIDo6PSAgICAgI3hBICAgIC8qIExGICovXG4vLyBbMjVdIGItY2FycmlhZ2UtcmV0dXJuIDo6PSAgICAgI3hEICAgIC8qIENSICovXG4vLyBbM10gIGMtYnl0ZS1vcmRlci1tYXJrIDo6PSAgICAgI3hGRUZGXG5mdW5jdGlvbiBpc05zQ2hhcihjKSB7XG4gIHJldHVybiBpc1ByaW50YWJsZShjKSAmJiAhaXNXaGl0ZXNwYWNlKGMpXG4gICAgLy8gYnl0ZS1vcmRlci1tYXJrXG4gICAgJiYgYyAhPT0gMHhGRUZGXG4gICAgLy8gYi1jaGFyXG4gICAgJiYgYyAhPT0gQ0hBUl9DQVJSSUFHRV9SRVRVUk5cbiAgICAmJiBjICE9PSBDSEFSX0xJTkVfRkVFRDtcbn1cblxuLy8gU2ltcGxpZmllZCB0ZXN0IGZvciB2YWx1ZXMgYWxsb3dlZCBhZnRlciB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmUoYywgcHJldikge1xuICAvLyBVc2VzIGEgc3Vic2V0IG9mIG5iLWNoYXIgLSBjLWZsb3ctaW5kaWNhdG9yIC0gXCI6XCIgLSBcIiNcIlxuICAvLyB3aGVyZSBuYi1jaGFyIDo6PSBjLXByaW50YWJsZSAtIGItY2hhciAtIGMtYnl0ZS1vcmRlci1tYXJrLlxuICByZXR1cm4gaXNQcmludGFibGUoYykgJiYgYyAhPT0gMHhGRUZGXG4gICAgLy8gLSBjLWZsb3ctaW5kaWNhdG9yXG4gICAgJiYgYyAhPT0gQ0hBUl9DT01NQVxuICAgICYmIGMgIT09IENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX0xFRlRfQ1VSTFlfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfUklHSFRfQ1VSTFlfQlJBQ0tFVFxuICAgIC8vIC0gXCI6XCIgLSBcIiNcIlxuICAgIC8vIC8qIEFuIG5zLWNoYXIgcHJlY2VkaW5nICovIFwiI1wiXG4gICAgJiYgYyAhPT0gQ0hBUl9DT0xPTlxuICAgICYmICgoYyAhPT0gQ0hBUl9TSEFSUCkgfHwgKHByZXYgJiYgaXNOc0NoYXIocHJldikpKTtcbn1cblxuLy8gU2ltcGxpZmllZCB0ZXN0IGZvciB2YWx1ZXMgYWxsb3dlZCBhcyB0aGUgZmlyc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmVGaXJzdChjKSB7XG4gIC8vIFVzZXMgYSBzdWJzZXQgb2YgbnMtY2hhciAtIGMtaW5kaWNhdG9yXG4gIC8vIHdoZXJlIG5zLWNoYXIgPSBuYi1jaGFyIC0gcy13aGl0ZS5cbiAgcmV0dXJuIGlzUHJpbnRhYmxlKGMpICYmIGMgIT09IDB4RkVGRlxuICAgICYmICFpc1doaXRlc3BhY2UoYykgLy8gLSBzLXdoaXRlXG4gICAgLy8gLSAoYy1pbmRpY2F0b3IgOjo9XG4gICAgLy8gXHUyMDFDLVx1MjAxRCB8IFx1MjAxQz9cdTIwMUQgfCBcdTIwMUM6XHUyMDFEIHwgXHUyMDFDLFx1MjAxRCB8IFx1MjAxQ1tcdTIwMUQgfCBcdTIwMUNdXHUyMDFEIHwgXHUyMDFDe1x1MjAxRCB8IFx1MjAxQ31cdTIwMURcbiAgICAmJiBjICE9PSBDSEFSX01JTlVTXG4gICAgJiYgYyAhPT0gQ0hBUl9RVUVTVElPTlxuICAgICYmIGMgIT09IENIQVJfQ09MT05cbiAgICAmJiBjICE9PSBDSEFSX0NPTU1BXG4gICAgJiYgYyAhPT0gQ0hBUl9MRUZUX1NRVUFSRV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUXG4gICAgLy8gfCBcdTIwMUMjXHUyMDFEIHwgXHUyMDFDJlx1MjAxRCB8IFx1MjAxQypcdTIwMUQgfCBcdTIwMUMhXHUyMDFEIHwgXHUyMDFDfFx1MjAxRCB8IFx1MjAxQz1cdTIwMUQgfCBcdTIwMUM+XHUyMDFEIHwgXHUyMDFDJ1x1MjAxRCB8IFx1MjAxQ1wiXHUyMDFEXG4gICAgJiYgYyAhPT0gQ0hBUl9TSEFSUFxuICAgICYmIGMgIT09IENIQVJfQU1QRVJTQU5EXG4gICAgJiYgYyAhPT0gQ0hBUl9BU1RFUklTS1xuICAgICYmIGMgIT09IENIQVJfRVhDTEFNQVRJT05cbiAgICAmJiBjICE9PSBDSEFSX1ZFUlRJQ0FMX0xJTkVcbiAgICAmJiBjICE9PSBDSEFSX0VRVUFMU1xuICAgICYmIGMgIT09IENIQVJfR1JFQVRFUl9USEFOXG4gICAgJiYgYyAhPT0gQ0hBUl9TSU5HTEVfUVVPVEVcbiAgICAmJiBjICE9PSBDSEFSX0RPVUJMRV9RVU9URVxuICAgIC8vIHwgXHUyMDFDJVx1MjAxRCB8IFx1MjAxQ0BcdTIwMUQgfCBcdTIwMUNgXHUyMDFEKVxuICAgICYmIGMgIT09IENIQVJfUEVSQ0VOVFxuICAgICYmIGMgIT09IENIQVJfQ09NTUVSQ0lBTF9BVFxuICAgICYmIGMgIT09IENIQVJfR1JBVkVfQUNDRU5UO1xufVxuXG4vLyBEZXRlcm1pbmVzIHdoZXRoZXIgYmxvY2sgaW5kZW50YXRpb24gaW5kaWNhdG9yIGlzIHJlcXVpcmVkLlxuZnVuY3Rpb24gbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpIHtcbiAgdmFyIGxlYWRpbmdTcGFjZVJlID0gL15cXG4qIC87XG4gIHJldHVybiBsZWFkaW5nU3BhY2VSZS50ZXN0KHN0cmluZyk7XG59XG5cbnZhciBTVFlMRV9QTEFJTiAgID0gMSxcbiAgICBTVFlMRV9TSU5HTEUgID0gMixcbiAgICBTVFlMRV9MSVRFUkFMID0gMyxcbiAgICBTVFlMRV9GT0xERUQgID0gNCxcbiAgICBTVFlMRV9ET1VCTEUgID0gNTtcblxuLy8gRGV0ZXJtaW5lcyB3aGljaCBzY2FsYXIgc3R5bGVzIGFyZSBwb3NzaWJsZSBhbmQgcmV0dXJucyB0aGUgcHJlZmVycmVkIHN0eWxlLlxuLy8gbGluZVdpZHRoID0gLTEgPT4gbm8gbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogc3RyLmxlbmd0aCA+IDAuXG4vLyBQb3N0LWNvbmRpdGlvbnM6XG4vLyAgICBTVFlMRV9QTEFJTiBvciBTVFlMRV9TSU5HTEUgPT4gbm8gXFxuIGFyZSBpbiB0aGUgc3RyaW5nLlxuLy8gICAgU1RZTEVfTElURVJBTCA9PiBubyBsaW5lcyBhcmUgc3VpdGFibGUgZm9yIGZvbGRpbmcgKG9yIGxpbmVXaWR0aCBpcyAtMSkuXG4vLyAgICBTVFlMRV9GT0xERUQgPT4gYSBsaW5lID4gbGluZVdpZHRoIGFuZCBjYW4gYmUgZm9sZGVkIChhbmQgbGluZVdpZHRoICE9IC0xKS5cbmZ1bmN0aW9uIGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIGluZGVudFBlckxldmVsLCBsaW5lV2lkdGgsIHRlc3RBbWJpZ3VvdXNUeXBlKSB7XG4gIHZhciBpO1xuICB2YXIgY2hhciwgcHJldl9jaGFyO1xuICB2YXIgaGFzTGluZUJyZWFrID0gZmFsc2U7XG4gIHZhciBoYXNGb2xkYWJsZUxpbmUgPSBmYWxzZTsgLy8gb25seSBjaGVja2VkIGlmIHNob3VsZFRyYWNrV2lkdGhcbiAgdmFyIHNob3VsZFRyYWNrV2lkdGggPSBsaW5lV2lkdGggIT09IC0xO1xuICB2YXIgcHJldmlvdXNMaW5lQnJlYWsgPSAtMTsgLy8gY291bnQgdGhlIGZpcnN0IGxpbmUgY29ycmVjdGx5XG4gIHZhciBwbGFpbiA9IGlzUGxhaW5TYWZlRmlyc3Qoc3RyaW5nLmNoYXJDb2RlQXQoMCkpXG4gICAgICAgICAgJiYgIWlzV2hpdGVzcGFjZShzdHJpbmcuY2hhckNvZGVBdChzdHJpbmcubGVuZ3RoIC0gMSkpO1xuXG4gIGlmIChzaW5nbGVMaW5lT25seSkge1xuICAgIC8vIENhc2U6IG5vIGJsb2NrIHN0eWxlcy5cbiAgICAvLyBDaGVjayBmb3IgZGlzYWxsb3dlZCBjaGFyYWN0ZXJzIHRvIHJ1bGUgb3V0IHBsYWluIGFuZCBzaW5nbGUuXG4gICAgZm9yIChpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgY2hhciA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgICAgaWYgKCFpc1ByaW50YWJsZShjaGFyKSkge1xuICAgICAgICByZXR1cm4gU1RZTEVfRE9VQkxFO1xuICAgICAgfVxuICAgICAgcHJldl9jaGFyID0gaSA+IDAgPyBzdHJpbmcuY2hhckNvZGVBdChpIC0gMSkgOiBudWxsO1xuICAgICAgcGxhaW4gPSBwbGFpbiAmJiBpc1BsYWluU2FmZShjaGFyLCBwcmV2X2NoYXIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBDYXNlOiBibG9jayBzdHlsZXMgcGVybWl0dGVkLlxuICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXIgPSBzdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICAgIGlmIChjaGFyID09PSBDSEFSX0xJTkVfRkVFRCkge1xuICAgICAgICBoYXNMaW5lQnJlYWsgPSB0cnVlO1xuICAgICAgICAvLyBDaGVjayBpZiBhbnkgbGluZSBjYW4gYmUgZm9sZGVkLlxuICAgICAgICBpZiAoc2hvdWxkVHJhY2tXaWR0aCkge1xuICAgICAgICAgIGhhc0ZvbGRhYmxlTGluZSA9IGhhc0ZvbGRhYmxlTGluZSB8fFxuICAgICAgICAgICAgLy8gRm9sZGFibGUgbGluZSA9IHRvbyBsb25nLCBhbmQgbm90IG1vcmUtaW5kZW50ZWQuXG4gICAgICAgICAgICAoaSAtIHByZXZpb3VzTGluZUJyZWFrIC0gMSA+IGxpbmVXaWR0aCAmJlxuICAgICAgICAgICAgIHN0cmluZ1twcmV2aW91c0xpbmVCcmVhayArIDFdICE9PSAnICcpO1xuICAgICAgICAgIHByZXZpb3VzTGluZUJyZWFrID0gaTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNQcmludGFibGUoY2hhcikpIHtcbiAgICAgICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgICAgIH1cbiAgICAgIHByZXZfY2hhciA9IGkgPiAwID8gc3RyaW5nLmNoYXJDb2RlQXQoaSAtIDEpIDogbnVsbDtcbiAgICAgIHBsYWluID0gcGxhaW4gJiYgaXNQbGFpblNhZmUoY2hhciwgcHJldl9jaGFyKTtcbiAgICB9XG4gICAgLy8gaW4gY2FzZSB0aGUgZW5kIGlzIG1pc3NpbmcgYSBcXG5cbiAgICBoYXNGb2xkYWJsZUxpbmUgPSBoYXNGb2xkYWJsZUxpbmUgfHwgKHNob3VsZFRyYWNrV2lkdGggJiZcbiAgICAgIChpIC0gcHJldmlvdXNMaW5lQnJlYWsgLSAxID4gbGluZVdpZHRoICYmXG4gICAgICAgc3RyaW5nW3ByZXZpb3VzTGluZUJyZWFrICsgMV0gIT09ICcgJykpO1xuICB9XG4gIC8vIEFsdGhvdWdoIGV2ZXJ5IHN0eWxlIGNhbiByZXByZXNlbnQgXFxuIHdpdGhvdXQgZXNjYXBpbmcsIHByZWZlciBibG9jayBzdHlsZXNcbiAgLy8gZm9yIG11bHRpbGluZSwgc2luY2UgdGhleSdyZSBtb3JlIHJlYWRhYmxlIGFuZCB0aGV5IGRvbid0IGFkZCBlbXB0eSBsaW5lcy5cbiAgLy8gQWxzbyBwcmVmZXIgZm9sZGluZyBhIHN1cGVyLWxvbmcgbGluZS5cbiAgaWYgKCFoYXNMaW5lQnJlYWsgJiYgIWhhc0ZvbGRhYmxlTGluZSkge1xuICAgIC8vIFN0cmluZ3MgaW50ZXJwcmV0YWJsZSBhcyBhbm90aGVyIHR5cGUgaGF2ZSB0byBiZSBxdW90ZWQ7XG4gICAgLy8gZS5nLiB0aGUgc3RyaW5nICd0cnVlJyB2cy4gdGhlIGJvb2xlYW4gdHJ1ZS5cbiAgICByZXR1cm4gcGxhaW4gJiYgIXRlc3RBbWJpZ3VvdXNUeXBlKHN0cmluZylcbiAgICAgID8gU1RZTEVfUExBSU4gOiBTVFlMRV9TSU5HTEU7XG4gIH1cbiAgLy8gRWRnZSBjYXNlOiBibG9jayBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgY2FuIG9ubHkgaGF2ZSBvbmUgZGlnaXQuXG4gIGlmIChpbmRlbnRQZXJMZXZlbCA+IDkgJiYgbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgfVxuICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgYmxvY2sgc3R5bGVzIGFyZSB2YWxpZC5cbiAgLy8gUHJlZmVyIGxpdGVyYWwgc3R5bGUgdW5sZXNzIHdlIHdhbnQgdG8gZm9sZC5cbiAgcmV0dXJuIGhhc0ZvbGRhYmxlTGluZSA/IFNUWUxFX0ZPTERFRCA6IFNUWUxFX0xJVEVSQUw7XG59XG5cbi8vIE5vdGU6IGxpbmUgYnJlYWtpbmcvZm9sZGluZyBpcyBpbXBsZW1lbnRlZCBmb3Igb25seSB0aGUgZm9sZGVkIHN0eWxlLlxuLy8gTkIuIFdlIGRyb3AgdGhlIGxhc3QgdHJhaWxpbmcgbmV3bGluZSAoaWYgYW55KSBvZiBhIHJldHVybmVkIGJsb2NrIHNjYWxhclxuLy8gIHNpbmNlIHRoZSBkdW1wZXIgYWRkcyBpdHMgb3duIG5ld2xpbmUuIFRoaXMgYWx3YXlzIHdvcmtzOlxuLy8gICAgXHUyMDIyIE5vIGVuZGluZyBuZXdsaW5lID0+IHVuYWZmZWN0ZWQ7IGFscmVhZHkgdXNpbmcgc3RyaXAgXCItXCIgY2hvbXBpbmcuXG4vLyAgICBcdTIwMjIgRW5kaW5nIG5ld2xpbmUgICAgPT4gcmVtb3ZlZCB0aGVuIHJlc3RvcmVkLlxuLy8gIEltcG9ydGFudGx5LCB0aGlzIGtlZXBzIHRoZSBcIitcIiBjaG9tcCBpbmRpY2F0b3IgZnJvbSBnYWluaW5nIGFuIGV4dHJhIGxpbmUuXG5mdW5jdGlvbiB3cml0ZVNjYWxhcihzdGF0ZSwgc3RyaW5nLCBsZXZlbCwgaXNrZXkpIHtcbiAgc3RhdGUuZHVtcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBcIicnXCI7XG4gICAgfVxuICAgIGlmICghc3RhdGUubm9Db21wYXRNb2RlICYmXG4gICAgICAgIERFUFJFQ0FURURfQk9PTEVBTlNfU1lOVEFYLmluZGV4T2Yoc3RyaW5nKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiBcIidcIiArIHN0cmluZyArIFwiJ1wiO1xuICAgIH1cblxuICAgIHZhciBpbmRlbnQgPSBzdGF0ZS5pbmRlbnQgKiBNYXRoLm1heCgxLCBsZXZlbCk7IC8vIG5vIDAtaW5kZW50IHNjYWxhcnNcbiAgICAvLyBBcyBpbmRlbnRhdGlvbiBnZXRzIGRlZXBlciwgbGV0IHRoZSB3aWR0aCBkZWNyZWFzZSBtb25vdG9uaWNhbGx5XG4gICAgLy8gdG8gdGhlIGxvd2VyIGJvdW5kIG1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKS5cbiAgICAvLyBOb3RlIHRoYXQgdGhpcyBpbXBsaWVzXG4gICAgLy8gIHN0YXRlLmxpbmVXaWR0aCBcdTIyNjQgNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGlzIGZpeGVkIGF0IHRoZSBsb3dlciBib3VuZC5cbiAgICAvLyAgc3RhdGUubGluZVdpZHRoID4gNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGRlY3JlYXNlcyB1bnRpbCB0aGUgbG93ZXIgYm91bmQuXG4gICAgLy8gVGhpcyBiZWhhdmVzIGJldHRlciB0aGFuIGEgY29uc3RhbnQgbWluaW11bSB3aWR0aCB3aGljaCBkaXNhbGxvd3MgbmFycm93ZXIgb3B0aW9ucyxcbiAgICAvLyBvciBhbiBpbmRlbnQgdGhyZXNob2xkIHdoaWNoIGNhdXNlcyB0aGUgd2lkdGggdG8gc3VkZGVubHkgaW5jcmVhc2UuXG4gICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aCA9PT0gLTFcbiAgICAgID8gLTEgOiBNYXRoLm1heChNYXRoLm1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKSwgc3RhdGUubGluZVdpZHRoIC0gaW5kZW50KTtcblxuICAgIC8vIFdpdGhvdXQga25vd2luZyBpZiBrZXlzIGFyZSBpbXBsaWNpdC9leHBsaWNpdCwgYXNzdW1lIGltcGxpY2l0IGZvciBzYWZldHkuXG4gICAgdmFyIHNpbmdsZUxpbmVPbmx5ID0gaXNrZXlcbiAgICAgIC8vIE5vIGJsb2NrIHN0eWxlcyBpbiBmbG93IG1vZGUuXG4gICAgICB8fCAoc3RhdGUuZmxvd0xldmVsID4gLTEgJiYgbGV2ZWwgPj0gc3RhdGUuZmxvd0xldmVsKTtcbiAgICBmdW5jdGlvbiB0ZXN0QW1iaWd1aXR5KHN0cmluZykge1xuICAgICAgcmV0dXJuIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyaW5nKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIHN0YXRlLmluZGVudCwgbGluZVdpZHRoLCB0ZXN0QW1iaWd1aXR5KSkge1xuICAgICAgY2FzZSBTVFlMRV9QTEFJTjpcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIGNhc2UgU1RZTEVfU0lOR0xFOlxuICAgICAgICByZXR1cm4gXCInXCIgKyBzdHJpbmcucmVwbGFjZSgvJy9nLCBcIicnXCIpICsgXCInXCI7XG4gICAgICBjYXNlIFNUWUxFX0xJVEVSQUw6XG4gICAgICAgIHJldHVybiAnfCcgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhzdHJpbmcsIGluZGVudCkpO1xuICAgICAgY2FzZSBTVFlMRV9GT0xERUQ6XG4gICAgICAgIHJldHVybiAnPicgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhmb2xkU3RyaW5nKHN0cmluZywgbGluZVdpZHRoKSwgaW5kZW50KSk7XG4gICAgICBjYXNlIFNUWUxFX0RPVUJMRTpcbiAgICAgICAgcmV0dXJuICdcIicgKyBlc2NhcGVTdHJpbmcoc3RyaW5nLCBsaW5lV2lkdGgpICsgJ1wiJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdpbXBvc3NpYmxlIGVycm9yOiBpbnZhbGlkIHNjYWxhciBzdHlsZScpO1xuICAgIH1cbiAgfSgpKTtcbn1cblxuLy8gUHJlLWNvbmRpdGlvbnM6IHN0cmluZyBpcyB2YWxpZCBmb3IgYSBibG9jayBzY2FsYXIsIDEgPD0gaW5kZW50UGVyTGV2ZWwgPD0gOS5cbmZ1bmN0aW9uIGJsb2NrSGVhZGVyKHN0cmluZywgaW5kZW50UGVyTGV2ZWwpIHtcbiAgdmFyIGluZGVudEluZGljYXRvciA9IG5lZWRJbmRlbnRJbmRpY2F0b3Ioc3RyaW5nKSA/IFN0cmluZyhpbmRlbnRQZXJMZXZlbCkgOiAnJztcblxuICAvLyBub3RlIHRoZSBzcGVjaWFsIGNhc2U6IHRoZSBzdHJpbmcgJ1xcbicgY291bnRzIGFzIGEgXCJ0cmFpbGluZ1wiIGVtcHR5IGxpbmUuXG4gIHZhciBjbGlwID0gICAgICAgICAgc3RyaW5nW3N0cmluZy5sZW5ndGggLSAxXSA9PT0gJ1xcbic7XG4gIHZhciBrZWVwID0gY2xpcCAmJiAoc3RyaW5nW3N0cmluZy5sZW5ndGggLSAyXSA9PT0gJ1xcbicgfHwgc3RyaW5nID09PSAnXFxuJyk7XG4gIHZhciBjaG9tcCA9IGtlZXAgPyAnKycgOiAoY2xpcCA/ICcnIDogJy0nKTtcblxuICByZXR1cm4gaW5kZW50SW5kaWNhdG9yICsgY2hvbXAgKyAnXFxuJztcbn1cblxuLy8gKFNlZSB0aGUgbm90ZSBmb3Igd3JpdGVTY2FsYXIuKVxuZnVuY3Rpb24gZHJvcEVuZGluZ05ld2xpbmUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmdbc3RyaW5nLmxlbmd0aCAtIDFdID09PSAnXFxuJyA/IHN0cmluZy5zbGljZSgwLCAtMSkgOiBzdHJpbmc7XG59XG5cbi8vIE5vdGU6IGEgbG9uZyBsaW5lIHdpdGhvdXQgYSBzdWl0YWJsZSBicmVhayBwb2ludCB3aWxsIGV4Y2VlZCB0aGUgd2lkdGggbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogZXZlcnkgY2hhciBpbiBzdHIgaXNQcmludGFibGUsIHN0ci5sZW5ndGggPiAwLCB3aWR0aCA+IDAuXG5mdW5jdGlvbiBmb2xkU3RyaW5nKHN0cmluZywgd2lkdGgpIHtcbiAgLy8gSW4gZm9sZGVkIHN0eWxlLCAkayQgY29uc2VjdXRpdmUgbmV3bGluZXMgb3V0cHV0IGFzICRrKzEkIG5ld2xpbmVzXHUyMDE0XG4gIC8vIHVubGVzcyB0aGV5J3JlIGJlZm9yZSBvciBhZnRlciBhIG1vcmUtaW5kZW50ZWQgbGluZSwgb3IgYXQgdGhlIHZlcnlcbiAgLy8gYmVnaW5uaW5nIG9yIGVuZCwgaW4gd2hpY2ggY2FzZSAkayQgbWFwcyB0byAkayQuXG4gIC8vIFRoZXJlZm9yZSwgcGFyc2UgZWFjaCBjaHVuayBhcyBuZXdsaW5lKHMpIGZvbGxvd2VkIGJ5IGEgY29udGVudCBsaW5lLlxuICB2YXIgbGluZVJlID0gLyhcXG4rKShbXlxcbl0qKS9nO1xuXG4gIC8vIGZpcnN0IGxpbmUgKHBvc3NpYmx5IGFuIGVtcHR5IGxpbmUpXG4gIHZhciByZXN1bHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXh0TEYgPSBzdHJpbmcuaW5kZXhPZignXFxuJyk7XG4gICAgbmV4dExGID0gbmV4dExGICE9PSAtMSA/IG5leHRMRiA6IHN0cmluZy5sZW5ndGg7XG4gICAgbGluZVJlLmxhc3RJbmRleCA9IG5leHRMRjtcbiAgICByZXR1cm4gZm9sZExpbmUoc3RyaW5nLnNsaWNlKDAsIG5leHRMRiksIHdpZHRoKTtcbiAgfSgpKTtcbiAgLy8gSWYgd2UgaGF2ZW4ndCByZWFjaGVkIHRoZSBmaXJzdCBjb250ZW50IGxpbmUgeWV0LCBkb24ndCBhZGQgYW4gZXh0cmEgXFxuLlxuICB2YXIgcHJldk1vcmVJbmRlbnRlZCA9IHN0cmluZ1swXSA9PT0gJ1xcbicgfHwgc3RyaW5nWzBdID09PSAnICc7XG4gIHZhciBtb3JlSW5kZW50ZWQ7XG5cbiAgLy8gcmVzdCBvZiB0aGUgbGluZXNcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gbGluZVJlLmV4ZWMoc3RyaW5nKSkpIHtcbiAgICB2YXIgcHJlZml4ID0gbWF0Y2hbMV0sIGxpbmUgPSBtYXRjaFsyXTtcbiAgICBtb3JlSW5kZW50ZWQgPSAobGluZVswXSA9PT0gJyAnKTtcbiAgICByZXN1bHQgKz0gcHJlZml4XG4gICAgICArICghcHJldk1vcmVJbmRlbnRlZCAmJiAhbW9yZUluZGVudGVkICYmIGxpbmUgIT09ICcnXG4gICAgICAgID8gJ1xcbicgOiAnJylcbiAgICAgICsgZm9sZExpbmUobGluZSwgd2lkdGgpO1xuICAgIHByZXZNb3JlSW5kZW50ZWQgPSBtb3JlSW5kZW50ZWQ7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBHcmVlZHkgbGluZSBicmVha2luZy5cbi8vIFBpY2tzIHRoZSBsb25nZXN0IGxpbmUgdW5kZXIgdGhlIGxpbWl0IGVhY2ggdGltZSxcbi8vIG90aGVyd2lzZSBzZXR0bGVzIGZvciB0aGUgc2hvcnRlc3QgbGluZSBvdmVyIHRoZSBsaW1pdC5cbi8vIE5CLiBNb3JlLWluZGVudGVkIGxpbmVzICpjYW5ub3QqIGJlIGZvbGRlZCwgYXMgdGhhdCB3b3VsZCBhZGQgYW4gZXh0cmEgXFxuLlxuZnVuY3Rpb24gZm9sZExpbmUobGluZSwgd2lkdGgpIHtcbiAgaWYgKGxpbmUgPT09ICcnIHx8IGxpbmVbMF0gPT09ICcgJykgcmV0dXJuIGxpbmU7XG5cbiAgLy8gU2luY2UgYSBtb3JlLWluZGVudGVkIGxpbmUgYWRkcyBhIFxcbiwgYnJlYWtzIGNhbid0IGJlIGZvbGxvd2VkIGJ5IGEgc3BhY2UuXG4gIHZhciBicmVha1JlID0gLyBbXiBdL2c7IC8vIG5vdGU6IHRoZSBtYXRjaCBpbmRleCB3aWxsIGFsd2F5cyBiZSA8PSBsZW5ndGgtMi5cbiAgdmFyIG1hdGNoO1xuICAvLyBzdGFydCBpcyBhbiBpbmNsdXNpdmUgaW5kZXguIGVuZCwgY3VyciwgYW5kIG5leHQgYXJlIGV4Y2x1c2l2ZS5cbiAgdmFyIHN0YXJ0ID0gMCwgZW5kLCBjdXJyID0gMCwgbmV4dCA9IDA7XG4gIHZhciByZXN1bHQgPSAnJztcblxuICAvLyBJbnZhcmlhbnRzOiAwIDw9IHN0YXJ0IDw9IGxlbmd0aC0xLlxuICAvLyAgIDAgPD0gY3VyciA8PSBuZXh0IDw9IG1heCgwLCBsZW5ndGgtMikuIGN1cnIgLSBzdGFydCA8PSB3aWR0aC5cbiAgLy8gSW5zaWRlIHRoZSBsb29wOlxuICAvLyAgIEEgbWF0Y2ggaW1wbGllcyBsZW5ndGggPj0gMiwgc28gY3VyciBhbmQgbmV4dCBhcmUgPD0gbGVuZ3RoLTIuXG4gIHdoaWxlICgobWF0Y2ggPSBicmVha1JlLmV4ZWMobGluZSkpKSB7XG4gICAgbmV4dCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIG1haW50YWluIGludmFyaWFudDogY3VyciAtIHN0YXJ0IDw9IHdpZHRoXG4gICAgaWYgKG5leHQgLSBzdGFydCA+IHdpZHRoKSB7XG4gICAgICBlbmQgPSAoY3VyciA+IHN0YXJ0KSA/IGN1cnIgOiBuZXh0OyAvLyBkZXJpdmUgZW5kIDw9IGxlbmd0aC0yXG4gICAgICByZXN1bHQgKz0gJ1xcbicgKyBsaW5lLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgLy8gc2tpcCB0aGUgc3BhY2UgdGhhdCB3YXMgb3V0cHV0IGFzIFxcblxuICAgICAgc3RhcnQgPSBlbmQgKyAxOyAgICAgICAgICAgICAgICAgICAgLy8gZGVyaXZlIHN0YXJ0IDw9IGxlbmd0aC0xXG4gICAgfVxuICAgIGN1cnIgPSBuZXh0O1xuICB9XG5cbiAgLy8gQnkgdGhlIGludmFyaWFudHMsIHN0YXJ0IDw9IGxlbmd0aC0xLCBzbyB0aGVyZSBpcyBzb21ldGhpbmcgbGVmdCBvdmVyLlxuICAvLyBJdCBpcyBlaXRoZXIgdGhlIHdob2xlIHN0cmluZyBvciBhIHBhcnQgc3RhcnRpbmcgZnJvbSBub24td2hpdGVzcGFjZS5cbiAgcmVzdWx0ICs9ICdcXG4nO1xuICAvLyBJbnNlcnQgYSBicmVhayBpZiB0aGUgcmVtYWluZGVyIGlzIHRvbyBsb25nIGFuZCB0aGVyZSBpcyBhIGJyZWFrIGF2YWlsYWJsZS5cbiAgaWYgKGxpbmUubGVuZ3RoIC0gc3RhcnQgPiB3aWR0aCAmJiBjdXJyID4gc3RhcnQpIHtcbiAgICByZXN1bHQgKz0gbGluZS5zbGljZShzdGFydCwgY3VycikgKyAnXFxuJyArIGxpbmUuc2xpY2UoY3VyciArIDEpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKHN0YXJ0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuc2xpY2UoMSk7IC8vIGRyb3AgZXh0cmEgXFxuIGpvaW5lclxufVxuXG4vLyBFc2NhcGVzIGEgZG91YmxlLXF1b3RlZCBzdHJpbmcuXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcoc3RyaW5nKSB7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGNoYXIsIG5leHRDaGFyO1xuICB2YXIgZXNjYXBlU2VxO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgY2hhciA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIC8vIENoZWNrIGZvciBzdXJyb2dhdGUgcGFpcnMgKHJlZmVyZW5jZSBVbmljb2RlIDMuMCBzZWN0aW9uIFwiMy43IFN1cnJvZ2F0ZXNcIikuXG4gICAgaWYgKGNoYXIgPj0gMHhEODAwICYmIGNoYXIgPD0gMHhEQkZGLyogaGlnaCBzdXJyb2dhdGUgKi8pIHtcbiAgICAgIG5leHRDaGFyID0gc3RyaW5nLmNoYXJDb2RlQXQoaSArIDEpO1xuICAgICAgaWYgKG5leHRDaGFyID49IDB4REMwMCAmJiBuZXh0Q2hhciA8PSAweERGRkYvKiBsb3cgc3Vycm9nYXRlICovKSB7XG4gICAgICAgIC8vIENvbWJpbmUgdGhlIHN1cnJvZ2F0ZSBwYWlyIGFuZCBzdG9yZSBpdCBlc2NhcGVkLlxuICAgICAgICByZXN1bHQgKz0gZW5jb2RlSGV4KChjaGFyIC0gMHhEODAwKSAqIDB4NDAwICsgbmV4dENoYXIgLSAweERDMDAgKyAweDEwMDAwKTtcbiAgICAgICAgLy8gQWR2YW5jZSBpbmRleCBvbmUgZXh0cmEgc2luY2Ugd2UgYWxyZWFkeSB1c2VkIHRoYXQgY2hhciBoZXJlLlxuICAgICAgICBpKys7IGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBlc2NhcGVTZXEgPSBFU0NBUEVfU0VRVUVOQ0VTW2NoYXJdO1xuICAgIHJlc3VsdCArPSAhZXNjYXBlU2VxICYmIGlzUHJpbnRhYmxlKGNoYXIpXG4gICAgICA/IHN0cmluZ1tpXVxuICAgICAgOiBlc2NhcGVTZXEgfHwgZW5jb2RlSGV4KGNoYXIpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG93U2VxdWVuY2Uoc3RhdGUsIGxldmVsLCBvYmplY3QpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJyxcbiAgICAgIF90YWcgICAgPSBzdGF0ZS50YWcsXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aDtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAvLyBXcml0ZSBvbmx5IHZhbGlkIGVsZW1lbnRzLlxuICAgIGlmICh3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RbaW5kZXhdLCBmYWxzZSwgZmFsc2UpKSB7XG4gICAgICBpZiAoaW5kZXggIT09IDApIF9yZXN1bHQgKz0gJywnICsgKCFzdGF0ZS5jb25kZW5zZUZsb3cgPyAnICcgOiAnJyk7XG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9ICdbJyArIF9yZXN1bHQgKyAnXSc7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgY29tcGFjdCkge1xuICB2YXIgX3Jlc3VsdCA9ICcnLFxuICAgICAgX3RhZyAgICA9IHN0YXRlLnRhZyxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIC8vIFdyaXRlIG9ubHkgdmFsaWQgZWxlbWVudHMuXG4gICAgaWYgKHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RbaW5kZXhdLCB0cnVlLCB0cnVlKSkge1xuICAgICAgaWYgKCFjb21wYWN0IHx8IGluZGV4ICE9PSAwKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gJy0nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3Jlc3VsdCArPSAnLSAnO1xuICAgICAgfVxuXG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ1tdJzsgLy8gRW1wdHkgc2VxdWVuY2UgaWYgbm8gdmFsaWQgdmFsdWVzLlxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb3dNYXBwaW5nKHN0YXRlLCBsZXZlbCwgb2JqZWN0KSB7XG4gIHZhciBfcmVzdWx0ICAgICAgID0gJycsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCksXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIG9iamVjdEtleSxcbiAgICAgIG9iamVjdFZhbHVlLFxuICAgICAgcGFpckJ1ZmZlcjtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG5cbiAgICBwYWlyQnVmZmVyID0gJyc7XG4gICAgaWYgKGluZGV4ICE9PSAwKSBwYWlyQnVmZmVyICs9ICcsICc7XG5cbiAgICBpZiAoc3RhdGUuY29uZGVuc2VGbG93KSBwYWlyQnVmZmVyICs9ICdcIic7XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RLZXksIGZhbHNlLCBmYWxzZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQga2V5O1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpIHBhaXJCdWZmZXIgKz0gJz8gJztcblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcCArIChzdGF0ZS5jb25kZW5zZUZsb3cgPyAnXCInIDogJycpICsgJzonICsgKHN0YXRlLmNvbmRlbnNlRmxvdyA/ICcnIDogJyAnKTtcblxuICAgIGlmICghd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgb2JqZWN0VmFsdWUsIGZhbHNlLCBmYWxzZSkpIHtcbiAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgcGFpciBiZWNhdXNlIG9mIGludmFsaWQgdmFsdWUuXG4gICAgfVxuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wO1xuXG4gICAgLy8gQm90aCBrZXkgYW5kIHZhbHVlIGFyZSB2YWxpZC5cbiAgICBfcmVzdWx0ICs9IHBhaXJCdWZmZXI7XG4gIH1cblxuICBzdGF0ZS50YWcgPSBfdGFnO1xuICBzdGF0ZS5kdW1wID0gJ3snICsgX3Jlc3VsdCArICd9Jztcbn1cblxuZnVuY3Rpb24gd3JpdGVCbG9ja01hcHBpbmcoc3RhdGUsIGxldmVsLCBvYmplY3QsIGNvbXBhY3QpIHtcbiAgdmFyIF9yZXN1bHQgICAgICAgPSAnJyxcbiAgICAgIF90YWcgICAgICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBvYmplY3RLZXlMaXN0ID0gT2JqZWN0LmtleXMob2JqZWN0KSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgb2JqZWN0S2V5LFxuICAgICAgb2JqZWN0VmFsdWUsXG4gICAgICBleHBsaWNpdFBhaXIsXG4gICAgICBwYWlyQnVmZmVyO1xuXG4gIC8vIEFsbG93IHNvcnRpbmcga2V5cyBzbyB0aGF0IHRoZSBvdXRwdXQgZmlsZSBpcyBkZXRlcm1pbmlzdGljXG4gIGlmIChzdGF0ZS5zb3J0S2V5cyA9PT0gdHJ1ZSkge1xuICAgIC8vIERlZmF1bHQgc29ydGluZ1xuICAgIG9iamVjdEtleUxpc3Quc29ydCgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzdGF0ZS5zb3J0S2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIEN1c3RvbSBzb3J0IGZ1bmN0aW9uXG4gICAgb2JqZWN0S2V5TGlzdC5zb3J0KHN0YXRlLnNvcnRLZXlzKTtcbiAgfSBlbHNlIGlmIChzdGF0ZS5zb3J0S2V5cykge1xuICAgIC8vIFNvbWV0aGluZyBpcyB3cm9uZ1xuICAgIHRocm93IG5ldyBZQU1MRXhjZXB0aW9uKCdzb3J0S2V5cyBtdXN0IGJlIGEgYm9vbGVhbiBvciBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpckJ1ZmZlciA9ICcnO1xuXG4gICAgaWYgKCFjb21wYWN0IHx8IGluZGV4ICE9PSAwKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgb2JqZWN0S2V5LCB0cnVlLCB0cnVlLCB0cnVlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCBrZXkuXG4gICAgfVxuXG4gICAgZXhwbGljaXRQYWlyID0gKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICc/JykgfHxcbiAgICAgICAgICAgICAgICAgICAoc3RhdGUuZHVtcCAmJiBzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpO1xuXG4gICAgaWYgKGV4cGxpY2l0UGFpcikge1xuICAgICAgaWYgKHN0YXRlLmR1bXAgJiYgQ0hBUl9MSU5FX0ZFRUQgPT09IHN0YXRlLmR1bXAuY2hhckNvZGVBdCgwKSkge1xuICAgICAgICBwYWlyQnVmZmVyICs9ICc/JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhaXJCdWZmZXIgKz0gJz8gJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICBpZiAoZXhwbGljaXRQYWlyKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RWYWx1ZSwgdHJ1ZSwgZXhwbGljaXRQYWlyKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCB2YWx1ZS5cbiAgICB9XG5cbiAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICBwYWlyQnVmZmVyICs9ICc6JztcbiAgICB9IGVsc2Uge1xuICAgICAgcGFpckJ1ZmZlciArPSAnOiAnO1xuICAgIH1cblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcDtcblxuICAgIC8vIEJvdGgga2V5IGFuZCB2YWx1ZSBhcmUgdmFsaWQuXG4gICAgX3Jlc3VsdCArPSBwYWlyQnVmZmVyO1xuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ3t9JzsgLy8gRW1wdHkgbWFwcGluZyBpZiBubyB2YWxpZCBwYWlycy5cbn1cblxuZnVuY3Rpb24gZGV0ZWN0VHlwZShzdGF0ZSwgb2JqZWN0LCBleHBsaWNpdCkge1xuICB2YXIgX3Jlc3VsdCwgdHlwZUxpc3QsIGluZGV4LCBsZW5ndGgsIHR5cGUsIHN0eWxlO1xuXG4gIHR5cGVMaXN0ID0gZXhwbGljaXQgPyBzdGF0ZS5leHBsaWNpdFR5cGVzIDogc3RhdGUuaW1wbGljaXRUeXBlcztcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdHlwZUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHR5cGUgPSB0eXBlTGlzdFtpbmRleF07XG5cbiAgICBpZiAoKHR5cGUuaW5zdGFuY2VPZiAgfHwgdHlwZS5wcmVkaWNhdGUpICYmXG4gICAgICAgICghdHlwZS5pbnN0YW5jZU9mIHx8ICgodHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpICYmIChvYmplY3QgaW5zdGFuY2VvZiB0eXBlLmluc3RhbmNlT2YpKSkgJiZcbiAgICAgICAgKCF0eXBlLnByZWRpY2F0ZSAgfHwgdHlwZS5wcmVkaWNhdGUob2JqZWN0KSkpIHtcblxuICAgICAgc3RhdGUudGFnID0gZXhwbGljaXQgPyB0eXBlLnRhZyA6ICc/JztcblxuICAgICAgaWYgKHR5cGUucmVwcmVzZW50KSB7XG4gICAgICAgIHN0eWxlID0gc3RhdGUuc3R5bGVNYXBbdHlwZS50YWddIHx8IHR5cGUuZGVmYXVsdFN0eWxlO1xuXG4gICAgICAgIGlmIChfdG9TdHJpbmcuY2FsbCh0eXBlLnJlcHJlc2VudCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcbiAgICAgICAgICBfcmVzdWx0ID0gdHlwZS5yZXByZXNlbnQob2JqZWN0LCBzdHlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2hhc093blByb3BlcnR5LmNhbGwodHlwZS5yZXByZXNlbnQsIHN0eWxlKSkge1xuICAgICAgICAgIF9yZXN1bHQgPSB0eXBlLnJlcHJlc2VudFtzdHlsZV0ob2JqZWN0LCBzdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFlBTUxFeGNlcHRpb24oJyE8JyArIHR5cGUudGFnICsgJz4gdGFnIHJlc29sdmVyIGFjY2VwdHMgbm90IFwiJyArIHN0eWxlICsgJ1wiIHN0eWxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5kdW1wID0gX3Jlc3VsdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTZXJpYWxpemVzIGBvYmplY3RgIGFuZCB3cml0ZXMgaXQgdG8gZ2xvYmFsIGByZXN1bHRgLlxuLy8gUmV0dXJucyB0cnVlIG9uIHN1Y2Nlc3MsIG9yIGZhbHNlIG9uIGludmFsaWQgb2JqZWN0LlxuLy9cbmZ1bmN0aW9uIHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgYmxvY2ssIGNvbXBhY3QsIGlza2V5KSB7XG4gIHN0YXRlLnRhZyA9IG51bGw7XG4gIHN0YXRlLmR1bXAgPSBvYmplY3Q7XG5cbiAgaWYgKCFkZXRlY3RUeXBlKHN0YXRlLCBvYmplY3QsIGZhbHNlKSkge1xuICAgIGRldGVjdFR5cGUoc3RhdGUsIG9iamVjdCwgdHJ1ZSk7XG4gIH1cblxuICB2YXIgdHlwZSA9IF90b1N0cmluZy5jYWxsKHN0YXRlLmR1bXApO1xuXG4gIGlmIChibG9jaykge1xuICAgIGJsb2NrID0gKHN0YXRlLmZsb3dMZXZlbCA8IDAgfHwgc3RhdGUuZmxvd0xldmVsID4gbGV2ZWwpO1xuICB9XG5cbiAgdmFyIG9iamVjdE9yQXJyYXkgPSB0eXBlID09PSAnW29iamVjdCBPYmplY3RdJyB8fCB0eXBlID09PSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgZHVwbGljYXRlSW5kZXgsXG4gICAgICBkdXBsaWNhdGU7XG5cbiAgaWYgKG9iamVjdE9yQXJyYXkpIHtcbiAgICBkdXBsaWNhdGVJbmRleCA9IHN0YXRlLmR1cGxpY2F0ZXMuaW5kZXhPZihvYmplY3QpO1xuICAgIGR1cGxpY2F0ZSA9IGR1cGxpY2F0ZUluZGV4ICE9PSAtMTtcbiAgfVxuXG4gIGlmICgoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB8fCBkdXBsaWNhdGUgfHwgKHN0YXRlLmluZGVudCAhPT0gMiAmJiBsZXZlbCA+IDApKSB7XG4gICAgY29tcGFjdCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGR1cGxpY2F0ZSAmJiBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0pIHtcbiAgICBzdGF0ZS5kdW1wID0gJypyZWZfJyArIGR1cGxpY2F0ZUluZGV4O1xuICB9IGVsc2Uge1xuICAgIGlmIChvYmplY3RPckFycmF5ICYmIGR1cGxpY2F0ZSAmJiAhc3RhdGUudXNlZER1cGxpY2F0ZXNbZHVwbGljYXRlSW5kZXhdKSB7XG4gICAgICBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0gPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIGlmIChibG9jayAmJiAoT2JqZWN0LmtleXMoc3RhdGUuZHVtcCkubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICB3cml0ZUJsb2NrTWFwcGluZyhzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXAsIGNvbXBhY3QpO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlRmxvd01hcHBpbmcoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wKTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyAnICcgKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICB2YXIgYXJyYXlMZXZlbCA9IChzdGF0ZS5ub0FycmF5SW5kZW50ICYmIChsZXZlbCA+IDApKSA/IGxldmVsIC0gMSA6IGxldmVsO1xuICAgICAgaWYgKGJsb2NrICYmIChzdGF0ZS5kdW1wLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgd3JpdGVCbG9ja1NlcXVlbmNlKHN0YXRlLCBhcnJheUxldmVsLCBzdGF0ZS5kdW1wLCBjb21wYWN0KTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0ZUZsb3dTZXF1ZW5jZShzdGF0ZSwgYXJyYXlMZXZlbCwgc3RhdGUuZHVtcCk7XG4gICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5kdW1wID0gJyZyZWZfJyArIGR1cGxpY2F0ZUluZGV4ICsgJyAnICsgc3RhdGUuZHVtcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgU3RyaW5nXScpIHtcbiAgICAgIGlmIChzdGF0ZS50YWcgIT09ICc/Jykge1xuICAgICAgICB3cml0ZVNjYWxhcihzdGF0ZSwgc3RhdGUuZHVtcCwgbGV2ZWwsIGlza2V5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlLnNraXBJbnZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgICB0aHJvdyBuZXcgWUFNTEV4Y2VwdGlvbigndW5hY2NlcHRhYmxlIGtpbmQgb2YgYW4gb2JqZWN0IHRvIGR1bXAgJyArIHR5cGUpO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS50YWcgIT09IG51bGwgJiYgc3RhdGUudGFnICE9PSAnPycpIHtcbiAgICAgIHN0YXRlLmR1bXAgPSAnITwnICsgc3RhdGUudGFnICsgJz4gJyArIHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldER1cGxpY2F0ZVJlZmVyZW5jZXMob2JqZWN0LCBzdGF0ZSkge1xuICB2YXIgb2JqZWN0cyA9IFtdLFxuICAgICAgZHVwbGljYXRlc0luZGV4ZXMgPSBbXSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGluc3BlY3ROb2RlKG9iamVjdCwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBkdXBsaWNhdGVzSW5kZXhlcy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgc3RhdGUuZHVwbGljYXRlcy5wdXNoKG9iamVjdHNbZHVwbGljYXRlc0luZGV4ZXNbaW5kZXhdXSk7XG4gIH1cbiAgc3RhdGUudXNlZER1cGxpY2F0ZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gaW5zcGVjdE5vZGUob2JqZWN0LCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcykge1xuICB2YXIgb2JqZWN0S2V5TGlzdCxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoO1xuXG4gIGlmIChvYmplY3QgIT09IG51bGwgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpIHtcbiAgICBpbmRleCA9IG9iamVjdHMuaW5kZXhPZihvYmplY3QpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChkdXBsaWNhdGVzSW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PT0gLTEpIHtcbiAgICAgICAgZHVwbGljYXRlc0luZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iamVjdHMucHVzaChvYmplY3QpO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICAgIGluc3BlY3ROb2RlKG9iamVjdFtpbmRleF0sIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdEtleUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICAgIGluc3BlY3ROb2RlKG9iamVjdFtvYmplY3RLZXlMaXN0W2luZGV4XV0sIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkdW1wKGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZShvcHRpb25zKTtcblxuICBpZiAoIXN0YXRlLm5vUmVmcykgZ2V0RHVwbGljYXRlUmVmZXJlbmNlcyhpbnB1dCwgc3RhdGUpO1xuXG4gIGlmICh3cml0ZU5vZGUoc3RhdGUsIDAsIGlucHV0LCB0cnVlLCB0cnVlKSkgcmV0dXJuIHN0YXRlLmR1bXAgKyAnXFxuJztcblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIHNhZmVEdW1wKGlucHV0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkdW1wKGlucHV0LCBjb21tb24uZXh0ZW5kKHsgc2NoZW1hOiBERUZBVUxUX1NBRkVfU0NIRU1BIH0sIG9wdGlvbnMpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMuZHVtcCAgICAgPSBkdW1wO1xubW9kdWxlLmV4cG9ydHMuc2FmZUR1bXAgPSBzYWZlRHVtcDtcbiIsICIndXNlIHN0cmljdCc7XG5cblxudmFyIGxvYWRlciA9IHJlcXVpcmUoJy4vanMteWFtbC9sb2FkZXInKTtcbnZhciBkdW1wZXIgPSByZXF1aXJlKCcuL2pzLXlhbWwvZHVtcGVyJyk7XG5cblxuZnVuY3Rpb24gZGVwcmVjYXRlZChuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiAnICsgbmFtZSArICcgaXMgZGVwcmVjYXRlZCBhbmQgY2Fubm90IGJlIHVzZWQuJyk7XG4gIH07XG59XG5cblxubW9kdWxlLmV4cG9ydHMuVHlwZSAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vanMteWFtbC90eXBlJyk7XG5tb2R1bGUuZXhwb3J0cy5TY2hlbWEgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9qcy15YW1sL3NjaGVtYScpO1xubW9kdWxlLmV4cG9ydHMuRkFJTFNBRkVfU0NIRU1BICAgICA9IHJlcXVpcmUoJy4vanMteWFtbC9zY2hlbWEvZmFpbHNhZmUnKTtcbm1vZHVsZS5leHBvcnRzLkpTT05fU0NIRU1BICAgICAgICAgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2pzb24nKTtcbm1vZHVsZS5leHBvcnRzLkNPUkVfU0NIRU1BICAgICAgICAgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2NvcmUnKTtcbm1vZHVsZS5leHBvcnRzLkRFRkFVTFRfU0FGRV9TQ0hFTUEgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2RlZmF1bHRfc2FmZScpO1xubW9kdWxlLmV4cG9ydHMuREVGQVVMVF9GVUxMX1NDSEVNQSA9IHJlcXVpcmUoJy4vanMteWFtbC9zY2hlbWEvZGVmYXVsdF9mdWxsJyk7XG5tb2R1bGUuZXhwb3J0cy5sb2FkICAgICAgICAgICAgICAgID0gbG9hZGVyLmxvYWQ7XG5tb2R1bGUuZXhwb3J0cy5sb2FkQWxsICAgICAgICAgICAgID0gbG9hZGVyLmxvYWRBbGw7XG5tb2R1bGUuZXhwb3J0cy5zYWZlTG9hZCAgICAgICAgICAgID0gbG9hZGVyLnNhZmVMb2FkO1xubW9kdWxlLmV4cG9ydHMuc2FmZUxvYWRBbGwgICAgICAgICA9IGxvYWRlci5zYWZlTG9hZEFsbDtcbm1vZHVsZS5leHBvcnRzLmR1bXAgICAgICAgICAgICAgICAgPSBkdW1wZXIuZHVtcDtcbm1vZHVsZS5leHBvcnRzLnNhZmVEdW1wICAgICAgICAgICAgPSBkdW1wZXIuc2FmZUR1bXA7XG5tb2R1bGUuZXhwb3J0cy5ZQU1MRXhjZXB0aW9uICAgICAgID0gcmVxdWlyZSgnLi9qcy15YW1sL2V4Y2VwdGlvbicpO1xuXG4vLyBEZXByZWNhdGVkIHNjaGVtYSBuYW1lcyBmcm9tIEpTLVlBTUwgMi4wLnhcbm1vZHVsZS5leHBvcnRzLk1JTklNQUxfU0NIRU1BID0gcmVxdWlyZSgnLi9qcy15YW1sL3NjaGVtYS9mYWlsc2FmZScpO1xubW9kdWxlLmV4cG9ydHMuU0FGRV9TQ0hFTUEgICAgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2RlZmF1bHRfc2FmZScpO1xubW9kdWxlLmV4cG9ydHMuREVGQVVMVF9TQ0hFTUEgPSByZXF1aXJlKCcuL2pzLXlhbWwvc2NoZW1hL2RlZmF1bHRfZnVsbCcpO1xuXG4vLyBEZXByZWNhdGVkIGZ1bmN0aW9ucyBmcm9tIEpTLVlBTUwgMS54Lnhcbm1vZHVsZS5leHBvcnRzLnNjYW4gICAgICAgICAgID0gZGVwcmVjYXRlZCgnc2NhbicpO1xubW9kdWxlLmV4cG9ydHMucGFyc2UgICAgICAgICAgPSBkZXByZWNhdGVkKCdwYXJzZScpO1xubW9kdWxlLmV4cG9ydHMuY29tcG9zZSAgICAgICAgPSBkZXByZWNhdGVkKCdjb21wb3NlJyk7XG5tb2R1bGUuZXhwb3J0cy5hZGRDb25zdHJ1Y3RvciA9IGRlcHJlY2F0ZWQoJ2FkZENvbnN0cnVjdG9yJyk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB5YW1sID0gcmVxdWlyZSgnLi9saWIvanMteWFtbC5qcycpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0geWFtbDtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHlhbWwgPSByZXF1aXJlKCdqcy15YW1sJyk7XG5cbi8qKlxuICogRGVmYXVsdCBlbmdpbmVzXG4gKi9cblxuY29uc3QgZW5naW5lcyA9IGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBZQU1MXG4gKi9cblxuZW5naW5lcy55YW1sID0ge1xuICBwYXJzZTogeWFtbC5zYWZlTG9hZC5iaW5kKHlhbWwpLFxuICBzdHJpbmdpZnk6IHlhbWwuc2FmZUR1bXAuYmluZCh5YW1sKVxufTtcblxuLyoqXG4gKiBKU09OXG4gKi9cblxuZW5naW5lcy5qc29uID0ge1xuICBwYXJzZTogSlNPTi5wYXJzZS5iaW5kKEpTT04pLFxuICBzdHJpbmdpZnk6IGZ1bmN0aW9uKG9iaiwgb3B0aW9ucykge1xuICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtyZXBsYWNlcjogbnVsbCwgc3BhY2U6IDJ9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBvcHRzLnJlcGxhY2VyLCBvcHRzLnNwYWNlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBKYXZhU2NyaXB0XG4gKi9cblxuZW5naW5lcy5qYXZhc2NyaXB0ID0ge1xuICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyLCBvcHRpb25zLCB3cmFwKSB7XG4gICAgLyogZXNsaW50IG5vLWV2YWw6IDAgKi9cbiAgICB0cnkge1xuICAgICAgaWYgKHdyYXAgIT09IGZhbHNlKSB7XG4gICAgICAgIHN0ciA9ICcoZnVuY3Rpb24oKSB7XFxucmV0dXJuICcgKyBzdHIudHJpbSgpICsgJztcXG59KCkpOyc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXZhbChzdHIpIHx8IHt9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHdyYXAgIT09IGZhbHNlICYmIC8odW5leHBlY3RlZHxpZGVudGlmaWVyKS9pLnRlc3QoZXJyLm1lc3NhZ2UpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZShzdHIsIG9wdGlvbnMsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihlcnIpO1xuICAgIH1cbiAgfSxcbiAgc3RyaW5naWZ5OiBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0cmluZ2lmeWluZyBKYXZhU2NyaXB0IGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgfVxufTtcbiIsICIvKiFcbiAqIHN0cmlwLWJvbS1zdHJpbmcgPGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L3N0cmlwLWJvbS1zdHJpbmc+XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE3LCBKb24gU2NobGlua2VydC5cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3RyKSB7XG4gIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuY2hhckF0KDApID09PSAnXFx1ZmVmZicpIHtcbiAgICByZXR1cm4gc3RyLnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBzdHI7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3Qgc3RyaXBCb20gPSByZXF1aXJlKCdzdHJpcC1ib20tc3RyaW5nJyk7XG5jb25zdCB0eXBlT2YgPSByZXF1aXJlKCdraW5kLW9mJyk7XG5cbmV4cG9ydHMuZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbCkge1xuICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB2YWxcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBgdmFsYCBpcyBhIGJ1ZmZlclxuICovXG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBmdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHR5cGVPZih2YWwpID09PSAnYnVmZmVyJztcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGB2YWxgIGlzIGFuIG9iamVjdFxuICovXG5cbmV4cG9ydHMuaXNPYmplY3QgPSBmdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHR5cGVPZih2YWwpID09PSAnb2JqZWN0Jztcbn07XG5cbi8qKlxuICogQ2FzdCBgaW5wdXRgIHRvIGEgYnVmZmVyXG4gKi9cblxuZXhwb3J0cy50b0J1ZmZlciA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gQnVmZmVyLmZyb20oaW5wdXQpIDogaW5wdXQ7XG59O1xuXG4vKipcbiAqIENhc3QgYHZhbGAgdG8gYSBzdHJpbmcuXG4gKi9cblxuZXhwb3J0cy50b1N0cmluZyA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gIGlmIChleHBvcnRzLmlzQnVmZmVyKGlucHV0KSkgcmV0dXJuIHN0cmlwQm9tKFN0cmluZyhpbnB1dCkpO1xuICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIGlucHV0IHRvIGJlIGEgc3RyaW5nIG9yIGJ1ZmZlcicpO1xuICB9XG4gIHJldHVybiBzdHJpcEJvbShpbnB1dCk7XG59O1xuXG4vKipcbiAqIENhc3QgYHZhbGAgdG8gYW4gYXJyYXkuXG4gKi9cblxuZXhwb3J0cy5hcnJheWlmeSA9IGZ1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdmFsID8gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdKSA6IFtdO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYHN0cmAgc3RhcnRzIHdpdGggYHN1YnN0cmAuXG4gKi9cblxuZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzdWJzdHIsIGxlbikge1xuICBpZiAodHlwZW9mIGxlbiAhPT0gJ251bWJlcicpIGxlbiA9IHN1YnN0ci5sZW5ndGg7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgbGVuKSA9PT0gc3Vic3RyO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGVuZ2luZXMgPSByZXF1aXJlKCcuL2VuZ2luZXMnKTtcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuXG4gIC8vIGVuc3VyZSB0aGF0IGRlbGltaXRlcnMgYXJlIGFuIGFycmF5XG4gIG9wdHMuZGVsaW1pdGVycyA9IHV0aWxzLmFycmF5aWZ5KG9wdHMuZGVsaW1zIHx8IG9wdHMuZGVsaW1pdGVycyB8fCAnLS0tJyk7XG4gIGlmIChvcHRzLmRlbGltaXRlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgb3B0cy5kZWxpbWl0ZXJzLnB1c2gob3B0cy5kZWxpbWl0ZXJzWzBdKTtcbiAgfVxuXG4gIG9wdHMubGFuZ3VhZ2UgPSAob3B0cy5sYW5ndWFnZSB8fCBvcHRzLmxhbmcgfHwgJ3lhbWwnKS50b0xvd2VyQ2FzZSgpO1xuICBvcHRzLmVuZ2luZXMgPSBPYmplY3QuYXNzaWduKHt9LCBlbmdpbmVzLCBvcHRzLnBhcnNlcnMsIG9wdHMuZW5naW5lcyk7XG4gIHJldHVybiBvcHRzO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSwgb3B0aW9ucykge1xuICBsZXQgZW5naW5lID0gb3B0aW9ucy5lbmdpbmVzW25hbWVdIHx8IG9wdGlvbnMuZW5naW5lc1thbGlhc2UobmFtZSldO1xuICBpZiAodHlwZW9mIGVuZ2luZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dyYXktbWF0dGVyIGVuZ2luZSBcIicgKyBuYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBlbmdpbmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBlbmdpbmUgPSB7IHBhcnNlOiBlbmdpbmUgfTtcbiAgfVxuICByZXR1cm4gZW5naW5lO1xufTtcblxuZnVuY3Rpb24gYWxpYXNlKG5hbWUpIHtcbiAgc3dpdGNoIChuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdqcyc6XG4gICAgY2FzZSAnamF2YXNjcmlwdCc6XG4gICAgICByZXR1cm4gJ2phdmFzY3JpcHQnO1xuICAgIGNhc2UgJ2NvZmZlZSc6XG4gICAgY2FzZSAnY29mZmVlc2NyaXB0JzpcbiAgICBjYXNlICdjc29uJzpcbiAgICAgIHJldHVybiAnY29mZmVlJztcbiAgICBjYXNlICd5YW1sJzpcbiAgICBjYXNlICd5bWwnOlxuICAgICAgcmV0dXJuICd5YW1sJztcbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIH1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHR5cGVPZiA9IHJlcXVpcmUoJ2tpbmQtb2YnKTtcbmNvbnN0IGdldEVuZ2luZSA9IHJlcXVpcmUoJy4vZW5naW5lJyk7XG5jb25zdCBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmaWxlLCBkYXRhLCBvcHRpb25zKSB7XG4gIGlmIChkYXRhID09IG51bGwgJiYgb3B0aW9ucyA9PSBudWxsKSB7XG4gICAgc3dpdGNoICh0eXBlT2YoZmlsZSkpIHtcbiAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgIGRhdGEgPSBmaWxlLmRhdGE7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhwZWN0ZWQgZmlsZSB0byBiZSBhIHN0cmluZyBvciBvYmplY3QnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBzdHIgPSBmaWxlLmNvbnRlbnQ7XG4gIGNvbnN0IG9wdHMgPSBkZWZhdWx0cyhvcHRpb25zKTtcbiAgaWYgKGRhdGEgPT0gbnVsbCkge1xuICAgIGlmICghb3B0cy5kYXRhKSByZXR1cm4gZmlsZTtcbiAgICBkYXRhID0gb3B0cy5kYXRhO1xuICB9XG5cbiAgY29uc3QgbGFuZ3VhZ2UgPSBmaWxlLmxhbmd1YWdlIHx8IG9wdHMubGFuZ3VhZ2U7XG4gIGNvbnN0IGVuZ2luZSA9IGdldEVuZ2luZShsYW5ndWFnZSwgb3B0cyk7XG4gIGlmICh0eXBlb2YgZW5naW5lLnN0cmluZ2lmeSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIFwiJyArIGxhbmd1YWdlICsgJy5zdHJpbmdpZnlcIiB0byBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgZmlsZS5kYXRhLCBkYXRhKTtcbiAgY29uc3Qgb3BlbiA9IG9wdHMuZGVsaW1pdGVyc1swXTtcbiAgY29uc3QgY2xvc2UgPSBvcHRzLmRlbGltaXRlcnNbMV07XG4gIGNvbnN0IG1hdHRlciA9IGVuZ2luZS5zdHJpbmdpZnkoZGF0YSwgb3B0aW9ucykudHJpbSgpO1xuICBsZXQgYnVmID0gJyc7XG5cbiAgaWYgKG1hdHRlciAhPT0gJ3t9Jykge1xuICAgIGJ1ZiA9IG5ld2xpbmUob3BlbikgKyBuZXdsaW5lKG1hdHRlcikgKyBuZXdsaW5lKGNsb3NlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZmlsZS5leGNlcnB0ID09PSAnc3RyaW5nJyAmJiBmaWxlLmV4Y2VycHQgIT09ICcnKSB7XG4gICAgaWYgKHN0ci5pbmRleE9mKGZpbGUuZXhjZXJwdC50cmltKCkpID09PSAtMSkge1xuICAgICAgYnVmICs9IG5ld2xpbmUoZmlsZS5leGNlcnB0KSArIG5ld2xpbmUoY2xvc2UpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgKyBuZXdsaW5lKHN0cik7XG59O1xuXG5mdW5jdGlvbiBuZXdsaW5lKHN0cikge1xuICByZXR1cm4gc3RyLnNsaWNlKC0xKSAhPT0gJ1xcbicgPyBzdHIgKyAnXFxuJyA6IHN0cjtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZpbGUsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMpO1xuXG4gIGlmIChmaWxlLmRhdGEgPT0gbnVsbCkge1xuICAgIGZpbGUuZGF0YSA9IHt9O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRzLmV4Y2VycHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gb3B0cy5leGNlcnB0KGZpbGUsIG9wdHMpO1xuICB9XG5cbiAgY29uc3Qgc2VwID0gZmlsZS5kYXRhLmV4Y2VycHRfc2VwYXJhdG9yIHx8IG9wdHMuZXhjZXJwdF9zZXBhcmF0b3I7XG4gIGlmIChzZXAgPT0gbnVsbCAmJiAob3B0cy5leGNlcnB0ID09PSBmYWxzZSB8fCBvcHRzLmV4Y2VycHQgPT0gbnVsbCkpIHtcbiAgICByZXR1cm4gZmlsZTtcbiAgfVxuXG4gIGNvbnN0IGRlbGltaXRlciA9IHR5cGVvZiBvcHRzLmV4Y2VycHQgPT09ICdzdHJpbmcnXG4gICAgPyBvcHRzLmV4Y2VycHRcbiAgICA6IChzZXAgfHwgb3B0cy5kZWxpbWl0ZXJzWzBdKTtcblxuICAvLyBpZiBlbmFibGVkLCBnZXQgdGhlIGV4Y2VycHQgZGVmaW5lZCBhZnRlciBmcm9udC1tYXR0ZXJcbiAgY29uc3QgaWR4ID0gZmlsZS5jb250ZW50LmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICBmaWxlLmV4Y2VycHQgPSBmaWxlLmNvbnRlbnQuc2xpY2UoMCwgaWR4KTtcbiAgfVxuXG4gIHJldHVybiBmaWxlO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHR5cGVPZiA9IHJlcXVpcmUoJ2tpbmQtb2YnKTtcbmNvbnN0IHN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vc3RyaW5naWZ5Jyk7XG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHZhbHVlIHRvIGVuc3VyZSBhbiBvYmplY3QgaXMgcmV0dXJuZWRcbiAqIHdpdGggdGhlIGV4cGVjdGVkIHByb3BlcnRpZXMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmaWxlKSB7XG4gIGlmICh0eXBlT2YoZmlsZSkgIT09ICdvYmplY3QnKSB7XG4gICAgZmlsZSA9IHsgY29udGVudDogZmlsZSB9O1xuICB9XG5cbiAgaWYgKHR5cGVPZihmaWxlLmRhdGEpICE9PSAnb2JqZWN0Jykge1xuICAgIGZpbGUuZGF0YSA9IHt9O1xuICB9XG5cbiAgLy8gaWYgZmlsZSB3YXMgcGFzc2VkIGFzIGFuIG9iamVjdCwgZW5zdXJlIHRoYXRcbiAgLy8gXCJmaWxlLmNvbnRlbnRcIiBpcyBzZXRcbiAgaWYgKGZpbGUuY29udGVudHMgJiYgZmlsZS5jb250ZW50ID09IG51bGwpIHtcbiAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnRzO1xuICB9XG5cbiAgLy8gc2V0IG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMgb24gdGhlIGZpbGUgb2JqZWN0XG4gIHV0aWxzLmRlZmluZShmaWxlLCAnb3JpZycsIHV0aWxzLnRvQnVmZmVyKGZpbGUuY29udGVudCkpO1xuICB1dGlscy5kZWZpbmUoZmlsZSwgJ2xhbmd1YWdlJywgZmlsZS5sYW5ndWFnZSB8fCAnJyk7XG4gIHV0aWxzLmRlZmluZShmaWxlLCAnbWF0dGVyJywgZmlsZS5tYXR0ZXIgfHwgJycpO1xuICB1dGlscy5kZWZpbmUoZmlsZSwgJ3N0cmluZ2lmeScsIGZ1bmN0aW9uKGRhdGEsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxhbmd1YWdlKSB7XG4gICAgICBmaWxlLmxhbmd1YWdlID0gb3B0aW9ucy5sYW5ndWFnZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZ2lmeShmaWxlLCBkYXRhLCBvcHRpb25zKTtcbiAgfSk7XG5cbiAgLy8gc3RyaXAgQk9NIGFuZCBlbnN1cmUgdGhhdCBcImZpbGUuY29udGVudFwiIGlzIGEgc3RyaW5nXG4gIGZpbGUuY29udGVudCA9IHV0aWxzLnRvU3RyaW5nKGZpbGUuY29udGVudCk7XG4gIGZpbGUuaXNFbXB0eSA9IGZhbHNlO1xuICBmaWxlLmV4Y2VycHQgPSAnJztcbiAgcmV0dXJuIGZpbGU7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZ2V0RW5naW5lID0gcmVxdWlyZSgnLi9lbmdpbmUnKTtcbmNvbnN0IGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxhbmd1YWdlLCBzdHIsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMpO1xuICBjb25zdCBlbmdpbmUgPSBnZXRFbmdpbmUobGFuZ3VhZ2UsIG9wdHMpO1xuICBpZiAodHlwZW9mIGVuZ2luZS5wYXJzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cGVjdGVkIFwiJyArIGxhbmd1YWdlICsgJy5wYXJzZVwiIHRvIGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICByZXR1cm4gZW5naW5lLnBhcnNlKHN0ciwgb3B0cyk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3Qgc2VjdGlvbnMgPSByZXF1aXJlKCdzZWN0aW9uLW1hdHRlcicpO1xuY29uc3QgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2xpYi9kZWZhdWx0cycpO1xuY29uc3Qgc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9saWIvc3RyaW5naWZ5Jyk7XG5jb25zdCBleGNlcnB0ID0gcmVxdWlyZSgnLi9saWIvZXhjZXJwdCcpO1xuY29uc3QgZW5naW5lcyA9IHJlcXVpcmUoJy4vbGliL2VuZ2luZXMnKTtcbmNvbnN0IHRvRmlsZSA9IHJlcXVpcmUoJy4vbGliL3RvLWZpbGUnKTtcbmNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9saWIvcGFyc2UnKTtcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi9saWIvdXRpbHMnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHN0cmluZyBvciBvYmplY3Qgd2l0aCBgY29udGVudGAgcHJvcGVydHksIGV4dHJhY3RzXG4gKiBhbmQgcGFyc2VzIGZyb250LW1hdHRlciBmcm9tIHRoZSBzdHJpbmcsIHRoZW4gcmV0dXJucyBhbiBvYmplY3RcbiAqIHdpdGggYGRhdGFgLCBgY29udGVudGAgYW5kIG90aGVyIFt1c2VmdWwgcHJvcGVydGllc10oI3JldHVybmVkLW9iamVjdCkuXG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdHRlciA9IHJlcXVpcmUoJ2dyYXktbWF0dGVyJyk7XG4gKiBjb25zb2xlLmxvZyhtYXR0ZXIoJy0tLVxcbnRpdGxlOiBIb21lXFxuLS0tXFxuT3RoZXIgc3R1ZmYnKSk7XG4gKiAvLz0+IHsgZGF0YTogeyB0aXRsZTogJ0hvbWUnfSwgY29udGVudDogJ090aGVyIHN0dWZmJyB9XG4gKiBgYGBcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gYGlucHV0YCBTdHJpbmcsIG9yIG9iamVjdCB3aXRoIGBjb250ZW50YCBzdHJpbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBgb3B0aW9uc2BcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gbWF0dGVyKGlucHV0LCBvcHRpb25zKSB7XG4gIGlmIChpbnB1dCA9PT0gJycpIHtcbiAgICByZXR1cm4geyBkYXRhOiB7fSwgY29udGVudDogaW5wdXQsIGV4Y2VycHQ6ICcnLCBvcmlnOiBpbnB1dCB9O1xuICB9XG5cbiAgbGV0IGZpbGUgPSB0b0ZpbGUoaW5wdXQpO1xuICBjb25zdCBjYWNoZWQgPSBtYXR0ZXIuY2FjaGVbZmlsZS5jb250ZW50XTtcblxuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBmaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgY2FjaGVkKTtcbiAgICAgIGZpbGUub3JpZyA9IGNhY2hlZC5vcmlnO1xuICAgICAgcmV0dXJuIGZpbGU7XG4gICAgfVxuXG4gICAgLy8gb25seSBjYWNoZSBpZiB0aGVyZSBhcmUgbm8gb3B0aW9ucyBwYXNzZWQuIGlmIHdlIGNhY2hlIHdoZW4gb3B0aW9uc1xuICAgIC8vIGFyZSBwYXNzZWQsIHdlIHdvdWxkIG5lZWQgdG8gYWxzbyBjYWNoZSBvcHRpb25zIHZhbHVlcywgd2hpY2ggd291bGRcbiAgICAvLyBuZWdhdGUgYW55IHBlcmZvcm1hbmNlIGJlbmVmaXRzIG9mIGNhY2hpbmdcbiAgICBtYXR0ZXIuY2FjaGVbZmlsZS5jb250ZW50XSA9IGZpbGU7XG4gIH1cblxuICByZXR1cm4gcGFyc2VNYXR0ZXIoZmlsZSwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogUGFyc2UgZnJvbnQgbWF0dGVyXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VNYXR0ZXIoZmlsZSwgb3B0aW9ucykge1xuICBjb25zdCBvcHRzID0gZGVmYXVsdHMob3B0aW9ucyk7XG4gIGNvbnN0IG9wZW4gPSBvcHRzLmRlbGltaXRlcnNbMF07XG4gIGNvbnN0IGNsb3NlID0gJ1xcbicgKyBvcHRzLmRlbGltaXRlcnNbMV07XG4gIGxldCBzdHIgPSBmaWxlLmNvbnRlbnQ7XG5cbiAgaWYgKG9wdHMubGFuZ3VhZ2UpIHtcbiAgICBmaWxlLmxhbmd1YWdlID0gb3B0cy5sYW5ndWFnZTtcbiAgfVxuXG4gIC8vIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBvcGVuaW5nIGRlbGltaXRlclxuICBjb25zdCBvcGVuTGVuID0gb3Blbi5sZW5ndGg7XG4gIGlmICghdXRpbHMuc3RhcnRzV2l0aChzdHIsIG9wZW4sIG9wZW5MZW4pKSB7XG4gICAgZXhjZXJwdChmaWxlLCBvcHRzKTtcbiAgICByZXR1cm4gZmlsZTtcbiAgfVxuXG4gIC8vIGlmIHRoZSBuZXh0IGNoYXJhY3RlciBhZnRlciB0aGUgb3BlbmluZyBkZWxpbWl0ZXIgaXNcbiAgLy8gYSBjaGFyYWN0ZXIgZnJvbSB0aGUgZGVsaW1pdGVyLCB0aGVuIGl0J3Mgbm90IGEgZnJvbnQtXG4gIC8vIG1hdHRlciBkZWxpbWl0ZXJcbiAgaWYgKHN0ci5jaGFyQXQob3BlbkxlbikgPT09IG9wZW4uc2xpY2UoLTEpKSB7XG4gICAgcmV0dXJuIGZpbGU7XG4gIH1cblxuICAvLyBzdHJpcCB0aGUgb3BlbmluZyBkZWxpbWl0ZXJcbiAgc3RyID0gc3RyLnNsaWNlKG9wZW5MZW4pO1xuICBjb25zdCBsZW4gPSBzdHIubGVuZ3RoO1xuXG4gIC8vIHVzZSB0aGUgbGFuZ3VhZ2UgZGVmaW5lZCBhZnRlciBmaXJzdCBkZWxpbWl0ZXIsIGlmIGl0IGV4aXN0c1xuICBjb25zdCBsYW5ndWFnZSA9IG1hdHRlci5sYW5ndWFnZShzdHIsIG9wdHMpO1xuICBpZiAobGFuZ3VhZ2UubmFtZSkge1xuICAgIGZpbGUubGFuZ3VhZ2UgPSBsYW5ndWFnZS5uYW1lO1xuICAgIHN0ciA9IHN0ci5zbGljZShsYW5ndWFnZS5yYXcubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIGdldCB0aGUgaW5kZXggb2YgdGhlIGNsb3NpbmcgZGVsaW1pdGVyXG4gIGxldCBjbG9zZUluZGV4ID0gc3RyLmluZGV4T2YoY2xvc2UpO1xuICBpZiAoY2xvc2VJbmRleCA9PT0gLTEpIHtcbiAgICBjbG9zZUluZGV4ID0gbGVuO1xuICB9XG5cbiAgLy8gZ2V0IHRoZSByYXcgZnJvbnQtbWF0dGVyIGJsb2NrXG4gIGZpbGUubWF0dGVyID0gc3RyLnNsaWNlKDAsIGNsb3NlSW5kZXgpO1xuXG4gIGNvbnN0IGJsb2NrID0gZmlsZS5tYXR0ZXIucmVwbGFjZSgvXlxccyojW15cXG5dKy9nbSwgJycpLnRyaW0oKTtcbiAgaWYgKGJsb2NrID09PSAnJykge1xuICAgIGZpbGUuaXNFbXB0eSA9IHRydWU7XG4gICAgZmlsZS5lbXB0eSA9IGZpbGUuY29udGVudDtcbiAgICBmaWxlLmRhdGEgPSB7fTtcbiAgfSBlbHNlIHtcblxuICAgIC8vIGNyZWF0ZSBmaWxlLmRhdGEgYnkgcGFyc2luZyB0aGUgcmF3IGZpbGUubWF0dGVyIGJsb2NrXG4gICAgZmlsZS5kYXRhID0gcGFyc2UoZmlsZS5sYW5ndWFnZSwgZmlsZS5tYXR0ZXIsIG9wdHMpO1xuICB9XG5cbiAgLy8gdXBkYXRlIGZpbGUuY29udGVudFxuICBpZiAoY2xvc2VJbmRleCA9PT0gbGVuKSB7XG4gICAgZmlsZS5jb250ZW50ID0gJyc7XG4gIH0gZWxzZSB7XG4gICAgZmlsZS5jb250ZW50ID0gc3RyLnNsaWNlKGNsb3NlSW5kZXggKyBjbG9zZS5sZW5ndGgpO1xuICAgIGlmIChmaWxlLmNvbnRlbnRbMF0gPT09ICdcXHInKSB7XG4gICAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnQuc2xpY2UoMSk7XG4gICAgfVxuICAgIGlmIChmaWxlLmNvbnRlbnRbMF0gPT09ICdcXG4nKSB7XG4gICAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnQuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgZXhjZXJwdChmaWxlLCBvcHRzKTtcblxuICBpZiAob3B0cy5zZWN0aW9ucyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3B0cy5zZWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgc2VjdGlvbnMoZmlsZSwgb3B0cy5zZWN0aW9uKTtcbiAgfVxuICByZXR1cm4gZmlsZTtcbn1cblxuLyoqXG4gKiBFeHBvc2UgZW5naW5lc1xuICovXG5cbm1hdHRlci5lbmdpbmVzID0gZW5naW5lcztcblxuLyoqXG4gKiBTdHJpbmdpZnkgYW4gb2JqZWN0IHRvIFlBTUwgb3IgdGhlIHNwZWNpZmllZCBsYW5ndWFnZSwgYW5kXG4gKiBhcHBlbmQgaXQgdG8gdGhlIGdpdmVuIHN0cmluZy4gQnkgZGVmYXVsdCwgb25seSBZQU1MIGFuZCBKU09OXG4gKiBjYW4gYmUgc3RyaW5naWZpZWQuIFNlZSB0aGUgW2VuZ2luZXNdKCNlbmdpbmVzKSBzZWN0aW9uIHRvIGxlYXJuXG4gKiBob3cgdG8gc3RyaW5naWZ5IG90aGVyIGxhbmd1YWdlcy5cbiAqXG4gKiBgYGBqc1xuICogY29uc29sZS5sb2cobWF0dGVyLnN0cmluZ2lmeSgnZm9vIGJhciBiYXonLCB7dGl0bGU6ICdIb21lJ30pKTtcbiAqIC8vIHJlc3VsdHMgaW46XG4gKiAvLyAtLS1cbiAqIC8vIHRpdGxlOiBIb21lXG4gKiAvLyAtLS1cbiAqIC8vIGZvbyBiYXIgYmF6XG4gKiBgYGBcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gYGZpbGVgIFRoZSBjb250ZW50IHN0cmluZyB0byBhcHBlbmQgdG8gc3RyaW5naWZpZWQgZnJvbnQtbWF0dGVyLCBvciBhIGZpbGUgb2JqZWN0IHdpdGggYGZpbGUuY29udGVudGAgc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R9IGBkYXRhYCBGcm9udCBtYXR0ZXIgdG8gc3RyaW5naWZ5LlxuICogQHBhcmFtIHtPYmplY3R9IGBvcHRpb25zYCBbT3B0aW9uc10oI29wdGlvbnMpIHRvIHBhc3MgdG8gZ3JheS1tYXR0ZXIgYW5kIFtqcy15YW1sXS5cbiAqIEByZXR1cm4ge1N0cmluZ30gUmV0dXJucyBhIHN0cmluZyBjcmVhdGVkIGJ5IHdyYXBwaW5nIHN0cmluZ2lmaWVkIHlhbWwgd2l0aCBkZWxpbWl0ZXJzLCBhbmQgYXBwZW5kaW5nIHRoYXQgdG8gdGhlIGdpdmVuIHN0cmluZy5cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubWF0dGVyLnN0cmluZ2lmeSA9IGZ1bmN0aW9uKGZpbGUsIGRhdGEsIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBmaWxlID09PSAnc3RyaW5nJykgZmlsZSA9IG1hdHRlcihmaWxlLCBvcHRpb25zKTtcbiAgcmV0dXJuIHN0cmluZ2lmeShmaWxlLCBkYXRhLCBvcHRpb25zKTtcbn07XG5cbi8qKlxuICogU3luY2hyb25vdXNseSByZWFkIGEgZmlsZSBmcm9tIHRoZSBmaWxlIHN5c3RlbSBhbmQgcGFyc2VcbiAqIGZyb250IG1hdHRlci4gUmV0dXJucyB0aGUgc2FtZSBvYmplY3QgYXMgdGhlIFttYWluIGZ1bmN0aW9uXSgjbWF0dGVyKS5cbiAqXG4gKiBgYGBqc1xuICogY29uc3QgZmlsZSA9IG1hdHRlci5yZWFkKCcuL2NvbnRlbnQvYmxvZy1wb3N0Lm1kJyk7XG4gKiBgYGBcbiAqIEBwYXJhbSB7U3RyaW5nfSBgZmlsZXBhdGhgIGZpbGUgcGF0aCBvZiB0aGUgZmlsZSB0byByZWFkLlxuICogQHBhcmFtIHtPYmplY3R9IGBvcHRpb25zYCBbT3B0aW9uc10oI29wdGlvbnMpIHRvIHBhc3MgdG8gZ3JheS1tYXR0ZXIuXG4gKiBAcmV0dXJuIHtPYmplY3R9IFJldHVybnMgW2FuIG9iamVjdF0oI3JldHVybmVkLW9iamVjdCkgd2l0aCBgZGF0YWAgYW5kIGBjb250ZW50YFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tYXR0ZXIucmVhZCA9IGZ1bmN0aW9uKGZpbGVwYXRoLCBvcHRpb25zKSB7XG4gIGNvbnN0IHN0ciA9IGZzLnJlYWRGaWxlU3luYyhmaWxlcGF0aCwgJ3V0ZjgnKTtcbiAgY29uc3QgZmlsZSA9IG1hdHRlcihzdHIsIG9wdGlvbnMpO1xuICBmaWxlLnBhdGggPSBmaWxlcGF0aDtcbiAgcmV0dXJuIGZpbGU7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gYHN0cmluZ2AgaGFzIGZyb250IG1hdHRlci5cbiAqIEBwYXJhbSAge1N0cmluZ30gYHN0cmluZ2BcbiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIGZyb250IG1hdHRlciBleGlzdHMuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1hdHRlci50ZXN0ID0gZnVuY3Rpb24oc3RyLCBvcHRpb25zKSB7XG4gIHJldHVybiB1dGlscy5zdGFydHNXaXRoKHN0ciwgZGVmYXVsdHMob3B0aW9ucykuZGVsaW1pdGVyc1swXSk7XG59O1xuXG4vKipcbiAqIERldGVjdCB0aGUgbGFuZ3VhZ2UgdG8gdXNlLCBpZiBvbmUgaXMgZGVmaW5lZCBhZnRlciB0aGVcbiAqIGZpcnN0IGZyb250LW1hdHRlciBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGBzdHJpbmdgXG4gKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYFxuICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBgcmF3YCAoYWN0dWFsIGxhbmd1YWdlIHN0cmluZyksIGFuZCBgbmFtZWAsIHRoZSBsYW5ndWFnZSB3aXRoIHdoaXRlc3BhY2UgdHJpbW1lZFxuICovXG5cbm1hdHRlci5sYW5ndWFnZSA9IGZ1bmN0aW9uKHN0ciwgb3B0aW9ucykge1xuICBjb25zdCBvcHRzID0gZGVmYXVsdHMob3B0aW9ucyk7XG4gIGNvbnN0IG9wZW4gPSBvcHRzLmRlbGltaXRlcnNbMF07XG5cbiAgaWYgKG1hdHRlci50ZXN0KHN0cikpIHtcbiAgICBzdHIgPSBzdHIuc2xpY2Uob3Blbi5sZW5ndGgpO1xuICB9XG5cbiAgY29uc3QgbGFuZ3VhZ2UgPSBzdHIuc2xpY2UoMCwgc3RyLnNlYXJjaCgvXFxyP1xcbi8pKTtcbiAgcmV0dXJuIHtcbiAgICByYXc6IGxhbmd1YWdlLFxuICAgIG5hbWU6IGxhbmd1YWdlID8gbGFuZ3VhZ2UudHJpbSgpIDogJydcbiAgfTtcbn07XG5cbi8qKlxuICogRXhwb3NlIGBtYXR0ZXJgXG4gKi9cblxubWF0dGVyLmNhY2hlID0ge307XG5tYXR0ZXIuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICBtYXR0ZXIuY2FjaGUgPSB7fTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IG1hdHRlcjtcbiIsICJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgbm9ybWFsaXplUGF0aCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblwiO1xuaW1wb3J0IHsgc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblN0b3JlXCI7XG5pbXBvcnQgeyBPdmxBcGlDbGllbnQgfSBmcm9tIFwiLi9hcGlcIjtcbmltcG9ydCB7IGFwcGVuZEVycm9yTG9nIH0gZnJvbSBcIi4vbG9nZ2luZ1wiO1xuaW1wb3J0IHsgU2F2ZUNvbnZlcnNhdGlvbk1vZGFsLCBTYXZlQ29udmVyc2F0aW9uRm9ybSB9IGZyb20gXCIuL21vZGFscy9zYXZlQ29udmVyc2F0aW9uTW9kYWxcIjtcbmltcG9ydCB7IHBhcnNlVHVybnMgfSBmcm9tIFwiLi9wYXJzZVR1cm5zXCI7XG5pbXBvcnQgeyBPdmxTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIE92bFNldHRpbmdzLCBFTUJFRERJTkdfUFJFU0VUUyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBDaGF0VmlldywgVklFV19UWVBFX09WTF9DSEFUIH0gZnJvbSBcIi4vdmlld3MvY2hhdFZpZXdcIjtcbmltcG9ydCB7IEluZGV4ZXIgfSBmcm9tIFwiLi9pbmRleGluZy9pbmRleGVyXCI7XG5pbXBvcnQgeyBWYXVsdFdhdGNoZXIgfSBmcm9tIFwiLi92YXVsdFdhdGNoZXJcIjtcbmltcG9ydCB7IGpvaW4gfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHR5cGUgeyBBc3Npc3RhbnRSZXBseVN0cmVhbU9wdGlvbnMgfSBmcm9tIFwiLi9wbHVnaW5BcGlcIjtcbmltcG9ydCB7IGRlbGV0ZUNoYXRTZXNzaW9uLCBsaXN0Q2hhdFNlc3Npb25zLCBsb2FkQ2hhdFNlc3Npb24sIHNhdmVDaGF0U2Vzc2lvbiB9IGZyb20gXCIuL2NoYXRTZXNzaW9uU3RvcmVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3ZsUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgcHVibGljIHNldHRpbmdzOiBPdmxTZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICBwcml2YXRlIGxhc3RTYXZlZFNldHRpbmdzOiBPdmxTZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICBwcml2YXRlIGFwaUNsaWVudDogT3ZsQXBpQ2xpZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaW5kZXhlcjogSW5kZXhlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHZhdWx0V2F0Y2hlcjogVmF1bHRXYXRjaGVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaW5kZXhpbmdFdmVudHNSZWdpc3RlcmVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgYXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBBUEkgXHVENjM4XHVDRDlDIFx1Qjg1Q1x1QzlDMVx1Qzc0NCBcdUJEODRcdUI5QUNcdUQ1NzQgXHVDMEMxXHVEMERDXHVCOTdDIFx1QzcyMFx1QzlDMFx1RDU2OVx1QjJDOFx1QjJFNC5cbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBPdmxBcGlDbGllbnQoXG4gICAgICAoKSA9PiB0aGlzLnNldHRpbmdzLFxuICAgICAgKGNvbnRleHQ6IHN0cmluZywgZGV0YWlsOiB1bmtub3duKSA9PlxuICAgICAgICBhcHBlbmRFcnJvckxvZyh0aGlzLmFwcCwgdGhpcy5tYW5pZmVzdCwgY29udGV4dCwgZGV0YWlsKVxuICAgICk7XG5cbiAgICAvLyBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDRDA4XHVBRTMwXHVENjU0XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaW5kZXhpbmdFbmFibGVkKSB7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVJbmRleGluZygpO1xuICAgIH1cblxuICAgIC8vIFx1QzBBQ1x1Qzc3NFx1QjREQ1x1QkMxNCBcdUNDNDRcdUQzMDUgXHVCREYwIFx1QjRGMVx1Qjg1RFxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9PVkxfQ0hBVCwgKGxlYWYpID0+IG5ldyBDaGF0VmlldyhsZWFmLCB0aGlzKSk7XG5cbiAgICB0aGlzLmFkZFJpYmJvbkljb24oXCJtZXNzYWdlLWNpcmNsZVwiLCBcIk9WTCBcdUIzMDBcdUQ2NTQgXHVDNUY0XHVBRTMwXCIsICgpID0+IHtcbiAgICAgIHZvaWQgdGhpcy5vcGVuQ2hhdFZpZXcoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJvdmwtb3Blbi1jaGF0XCIsXG4gICAgICBuYW1lOiBcIk9WTCBcdUIzMDBcdUQ2NTQgXHVDQzNEIFx1QzVGNFx1QUUzMFwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdm9pZCB0aGlzLm9wZW5DaGF0VmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm92bC1zYXZlLWNvbnZlcnNhdGlvblwiLFxuICAgICAgbmFtZTogXCJcdUIzMDBcdUQ2NTQgSlNPTlx1QzVEMFx1QzExQyBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjQgXHVDODAwXHVDN0E1XCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBuZXcgU2F2ZUNvbnZlcnNhdGlvbk1vZGFsKHRoaXMsIChmb3JtKSA9PiB7XG4gICAgICAgICAgdm9pZCB0aGlzLmhhbmRsZVNhdmVDb252ZXJzYXRpb24oZm9ybSk7XG4gICAgICAgIH0pLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJvdmwtaW5kZXgtdmF1bHRcIixcbiAgICAgIG5hbWU6IFwiXHVCQ0ZDXHVEMkI4IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUM3OTFcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIHZvaWQgdGhpcy5zdGFydEluZGV4aW5nKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IE92bFNldHRpbmdUYWIodGhpcykpO1xuICB9XG5cbiAgb251bmxvYWQoKTogdm9pZCB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfT1ZMX0NIQVQpLmZvckVhY2goKGxlYWYpID0+IHtcbiAgICAgIGxlYWYuZGV0YWNoKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdUM3NzhcdUIzNzFcdUMxMUMgXHVDODE1XHVCOUFDXG4gICAgaWYgKHRoaXMuaW5kZXhlcikge1xuICAgICAgdGhpcy5pbmRleGVyLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUMyQTRcdUQxNUMgXHVDRDA4XHVBRTMwXHVENjU0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVJbmRleGluZygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuaW5kZXhlcikge1xuICAgICAgICB0aGlzLmluZGV4ZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5pbmRleGVyID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gXHVCMzcwXHVDNzc0XHVEMTMwIFx1QjUxNFx1QjgwOVx1RDFBMFx1QjlBQyBcdUFDQkRcdUI4NUNcbiAgICAgIGNvbnN0IGRhdGFEaXIgPSBqb2luKFxuICAgICAgICAvLyBAdHMtaWdub3JlIC0gT2JzaWRpYW4gQVBJXHVDNzU4IFx1QjBCNFx1QkQ4MCBcdUMxOERcdUMxMzEgXHVDMEFDXHVDNkE5XG4gICAgICAgIHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuYmFzZVBhdGgsXG4gICAgICAgIFwiLm9ic2lkaWFuXCIsXG4gICAgICAgIFwicGx1Z2luc1wiLFxuICAgICAgICB0aGlzLm1hbmlmZXN0LmlkXG4gICAgICApO1xuXG4gICAgICBjb25zdCBtZXRhU3RvcmVQYXRoID0gam9pbihkYXRhRGlyLCBcIm1ldGEuanNvblwiKTtcbiAgICAgIGNvbnN0IHZlY3RvclN0b3JlUGF0aCA9IGpvaW4oZGF0YURpciwgXCJ2ZWN0b3JzLmpzb25cIik7XG5cbiAgICAgIC8vIFx1Qzc3OFx1QjM3MVx1QzExQyBcdUMwRERcdUMxMzFcbiAgICAgIHRoaXMuaW5kZXhlciA9IG5ldyBJbmRleGVyKHtcbiAgICAgICAgY2h1bmtTaXplOiB0aGlzLnNldHRpbmdzLmNodW5rU2l6ZSxcbiAgICAgICAgY2h1bmtPdmVybGFwOiB0aGlzLnNldHRpbmdzLmNodW5rT3ZlcmxhcCxcbiAgICAgICAgdG9wSzogdGhpcy5zZXR0aW5ncy50b3BLLFxuICAgICAgICB2ZWN0b3JJbmRleEVuZ2luZTogXCJqc29uXCIsXG4gICAgICAgIGVtYmVkZGluZ1Byb3ZpZGVyOiB0aGlzLnNldHRpbmdzLmVtYmVkZGluZ1Byb3ZpZGVyLFxuICAgICAgICBlbWJlZGRpbmdNb2RlbDogdGhpcy5zZXR0aW5ncy5lbWJlZGRpbmdNb2RlbCxcbiAgICAgICAgZW1iZWRkaW5nQXBpS2V5OiB0aGlzLnNldHRpbmdzLmVtYmVkZGluZ0FwaUtleSB8fCB0aGlzLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgZW1iZWRkaW5nQXBpVXJsOiB0aGlzLmdldEVtYmVkZGluZ0FwaVVybCgpLFxuICAgICAgICBtZXRhU3RvcmVQYXRoLFxuICAgICAgICB2ZWN0b3JTdG9yZVBhdGgsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdGhpcy5pbmRleGVyLmluaXRpYWxpemUoKTtcblxuICAgICAgLy8gXHVCQ0ZDXHVEMkI4IFx1QzZDQ1x1Q0M5OCBcdUMxMjRcdUM4MTVcbiAgICAgIHRoaXMudmF1bHRXYXRjaGVyID0gbmV3IFZhdWx0V2F0Y2hlcih0aGlzLmFwcC52YXVsdCk7XG4gICAgICB0aGlzLnZhdWx0V2F0Y2hlci5zZXRJbmRleGVyKHRoaXMuaW5kZXhlcik7XG5cbiAgICAgIGlmICghdGhpcy5pbmRleGluZ0V2ZW50c1JlZ2lzdGVyZWQpIHtcbiAgICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1Qzc3NFx1QkNBNFx1RDJCOCBcdUI5QUNcdUMyQTRcdUIxMDggXHVCNEYxXHVCODVEXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcImNyZWF0ZVwiLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICB2b2lkIHRoaXMudmF1bHRXYXRjaGVyPy5vbkZpbGVDcmVhdGUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJtb2RpZnlcIiwgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgdm9pZCB0aGlzLnZhdWx0V2F0Y2hlcj8ub25GaWxlTW9kaWZ5KGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgIHRoaXMudmF1bHRXYXRjaGVyPy5vbkZpbGVEZWxldGUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgdm9pZCB0aGlzLnZhdWx0V2F0Y2hlcj8ub25GaWxlUmVuYW1lKGZpbGUsIG9sZFBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuaW5kZXhpbmdFdmVudHNSZWdpc3RlcmVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkRDXHVDMkE0XHVEMTVDIFx1Q0QwOFx1QUUzMFx1RDY1NCBcdUM2NDRcdUI4Q0NcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkRDXHVDMkE0XHVEMTVDIFx1Q0QwOFx1QUUzMFx1RDY1NCBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkRDXHVDMkE0XHVEMTVDIFx1Q0QwOFx1QUUzMFx1RDY1NFx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1QkNGQ1x1RDJCOCBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkRDXHVDNzkxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHN0YXJ0SW5kZXhpbmcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmluZGV4aW5nRW5hYmxlZCkge1xuICAgICAgbmV3IE5vdGljZShcIlx1QkEzQ1x1QzgwMCBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzQ0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUluZGV4aW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZhdWx0V2F0Y2hlcikge1xuICAgICAgbmV3IE5vdGljZShcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUMyQTRcdUQxNUNcdUM3NzQgXHVDRDA4XHVBRTMwXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy52YXVsdFdhdGNoZXIuaW5kZXhWYXVsdCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVCQ0ZDXHVEMkI4IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdUJDRkNcdUQyQjggXHVDNzc4XHVCMzcxXHVDMkYxXHVDNUQwIFx1QzJFNFx1RDMyOFx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVCQ0ExXHVEMTMwIFx1QUM4MFx1QzBDOSBcdUMyMThcdUQ1ODlcbiAgICovXG4gIHB1YmxpYyBhc3luYyBzZWFyY2gocXVlcnk6IHN0cmluZyk6IFByb21pc2U8QXJyYXk8eyBjaHVuazogYW55OyBub3RlOiBhbnk7IHNjb3JlOiBudW1iZXIgfT4+IHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzc0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IGF3YWl0IHRoaXMuaW5kZXhlci5zZWFyY2gocXVlcnkpO1xuICAgIHJldHVybiB0aGlzLmluZGV4ZXIuZ2V0U2VhcmNoUmVzdWx0c1dpdGhNZXRhZGF0YShzZWFyY2hSZXN1bHRzKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgb3BlbkNoYXRWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX09WTF9DSEFUKVswXTtcbiAgICBjb25zdCBsZWFmID0gZXhpc3RpbmdMZWFmID8/IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgIGlmICghbGVhZikge1xuICAgICAgbmV3IE5vdGljZShcIlx1QjMwMFx1RDY1NCBcdUNDM0RcdUM3NDQgXHVDNUY0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX09WTF9DSEFULCBhY3RpdmU6IHRydWUgfSk7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdEFzc2lzdGFudFJlcGx5KHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghdGhpcy5hcGlDbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBcdUQwNzRcdUI3N0NcdUM3NzRcdUM1QjhcdUQyQjhcdUI5N0MgXHVDRDA4XHVBRTMwXHVENjU0XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQucmVxdWVzdEFzc2lzdGFudFJlcGx5KHR1cm5zKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXF1ZXN0QXNzaXN0YW50UmVwbHlTdHJlYW0oXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBvcHRpb25zOiBBc3Npc3RhbnRSZXBseVN0cmVhbU9wdGlvbnNcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuYXBpQ2xpZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgXHVEMDc0XHVCNzdDXHVDNzc0XHVDNUI4XHVEMkI4XHVCOTdDIFx1Q0QwOFx1QUUzMFx1RDY1NFx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LnJlcXVlc3RBc3Npc3RhbnRSZXBseVN0cmVhbSh0dXJucywgb3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghdGhpcy5hcGlDbGllbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBcdUQwNzRcdUI3N0NcdUM3NzRcdUM1QjhcdUQyQjhcdUI5N0MgXHVDRDA4XHVBRTMwXHVENjU0XHVENTYwIFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQucmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlQ29udmVyc2F0aW9uRnJvbVR1cm5zKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10sXG4gICAgb3V0cHV0Rm9sZGVyOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gc2F2ZUNvbnZlcnNhdGlvbkZyb21UdXJucyh0aGlzLmFwcC52YXVsdCwgc2Vzc2lvbklkLCB0dXJucywgb3V0cHV0Rm9sZGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlQ2hhdFNlc3Npb24oc2Vzc2lvbklkOiBzdHJpbmcsIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBzYXZlQ2hhdFNlc3Npb24odGhpcy5hcHAudmF1bHQsIHNlc3Npb25JZCwgdHVybnMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGxpc3RDaGF0U2Vzc2lvbnMoKSB7XG4gICAgcmV0dXJuIGxpc3RDaGF0U2Vzc2lvbnModGhpcy5hcHAudmF1bHQpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGxvYWRDaGF0U2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8Q29udmVyc2F0aW9uVHVybltdPiB7XG4gICAgcmV0dXJuIGxvYWRDaGF0U2Vzc2lvbih0aGlzLmFwcC52YXVsdCwgc2Vzc2lvbklkKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVDaGF0U2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGRlbGV0ZUNoYXRTZXNzaW9uKHRoaXMuYXBwLnZhdWx0LCBzZXNzaW9uSWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUywgLi4uKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgfTtcblxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXIgPT09IFwibG9jYWxcIikge1xuICAgICAgdGhpcy5zZXR0aW5ncy5lbWJlZGRpbmdQcm92aWRlciA9IFwiZ2VtaW5pXCI7XG4gICAgICB0aGlzLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsID0gRU1CRURESU5HX1BSRVNFVFMuZ2VtaW5pLm1vZGVsO1xuICAgICAgdGhpcy5zZXR0aW5ncy5lbWJlZGRpbmdBcGlVcmwgPSBFTUJFRERJTkdfUFJFU0VUUy5nZW1pbmkuYXBpVXJsIHx8IFwiXCI7XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RTYXZlZFNldHRpbmdzID0geyAuLi50aGlzLnNldHRpbmdzIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHByZXZpb3VzU2V0dGluZ3MgPSB7IC4uLnRoaXMubGFzdFNhdmVkU2V0dGluZ3MgfTtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIHRoaXMubGFzdFNhdmVkU2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcblxuICAgIGlmIChwcmV2aW91c1NldHRpbmdzLmluZGV4aW5nRW5hYmxlZCAhPT0gdGhpcy5zZXR0aW5ncy5pbmRleGluZ0VuYWJsZWQpIHtcbiAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5pbmRleGluZ0VuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pbmRleGVyPy5jbG9zZSgpO1xuICAgICAgICB0aGlzLmluZGV4ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnZhdWx0V2F0Y2hlcj8uc2V0SW5kZXhlcihudWxsKTtcbiAgICAgICAgdGhpcy52YXVsdFdhdGNoZXIgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplSW5kZXhpbmcoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuaW5kZXhpbmdFbmFibGVkIHx8ICF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zaG91bGRSZWluaXRpYWxpemVJbmRleGluZyhwcmV2aW91c1NldHRpbmdzLCB0aGlzLnNldHRpbmdzKSkge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplSW5kZXhpbmcoKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMTI0XHVDODE1XHVDNzc0IFx1QkNDMFx1QUNCRFx1QjQxOFx1QzVCNCBcdUM3QUNcdUM3NzhcdUIzNzFcdUMyRjFcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTY5XHVCMkM4XHVCMkU0LiBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgXHVDODA0XHVDQ0I0IFx1Qzc4NFx1QkNBMFx1QjUyOVx1Qzc0NCBcdUMyRTRcdUQ1ODlcdUQ1NzQgXHVDOEZDXHVDMTM4XHVDNjk0LlwiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVNhdmVDb252ZXJzYXRpb24oZm9ybTogU2F2ZUNvbnZlcnNhdGlvbkZvcm0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFmb3JtLmlucHV0UGF0aCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiSlNPTiBcdUQzMENcdUM3N0MgXHVBQ0JEXHVCODVDXHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWZvcm0uc2Vzc2lvbklkKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdUMxMzhcdUMxNTggSURcdUI5N0MgXHVDNzg1XHVCODI1XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QganNvblBhdGggPSBub3JtYWxpemVQYXRoKGZvcm0uaW5wdXRQYXRoKS5yZXBsYWNlKC9eXFwvKy8sIFwiXCIpO1xuICAgICAgY29uc3QganNvbkV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGpzb25QYXRoKTtcbiAgICAgIGlmICghanNvbkV4aXN0cykge1xuICAgICAgICBuZXcgTm90aWNlKFwiSlNPTiBcdUQzMENcdUM3N0NcdUM3NDQgXHVDQzNFXHVDNzQ0IFx1QzIxOCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBqc29uQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChqc29uUGF0aCk7XG4gICAgICBjb25zdCB0dXJucyA9IHBhcnNlVHVybnMoanNvbkNvbnRlbnQpO1xuXG4gICAgICBjb25zdCBvdXRwdXRGb2xkZXIgPSBmb3JtLm91dHB1dEZvbGRlclxuICAgICAgICA/IG5vcm1hbGl6ZVBhdGgoZm9ybS5vdXRwdXRGb2xkZXIpLnJlcGxhY2UoL15cXC8rLywgXCJcIilcbiAgICAgICAgOiBcIlwiO1xuICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IGF3YWl0IHNhdmVDb252ZXJzYXRpb25Gcm9tVHVybnMoXG4gICAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgICBmb3JtLnNlc3Npb25JZCxcbiAgICAgICAgdHVybnMsXG4gICAgICAgIG91dHB1dEZvbGRlclxuICAgICAgKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1QjMwMFx1RDY1NCBcdUM4MDBcdUM3QTUgXHVDNjQ0XHVCOENDOiAke3RhcmdldFBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1QzgwNFx1Q0NCNCBcdUJDRkNcdUQyQjhcdUI5N0MgXHVDNzg0XHVCQ0EwXHVCNTI5XHVENTY5XHVCMkM4XHVCMkU0IChcdUMyQTRcdUNFOTQgXHVENkM0IFx1QzdBQ1x1Qzc3OFx1QjM3MVx1QzJGMSlcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbmRleFZhdWx0QWxsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5pbmRleGluZ0VuYWJsZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc3OFx1QjM3MVx1QzJGMVx1Qzc3NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pbmRleGVyKSB7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVJbmRleGluZygpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy52YXVsdFdhdGNoZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRENcdUMyQTRcdUQxNUNcdUM3NzQgXHVDRDA4XHVBRTMwXHVENjU0XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coXCJcdUM4MDRcdUNDQjQgXHVCQ0ZDXHVEMkI4IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRENcdUM3OTEuLi5cIik7XG4gICAgICBhd2FpdCB0aGlzLnZhdWx0V2F0Y2hlci5pbmRleFZhdWx0KCk7XG4gICAgICBjb25zb2xlLmxvZyhcIlx1QzgwNFx1Q0NCNCBcdUJDRkNcdUQyQjggXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzY0NFx1QjhDQ1wiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QzgwNFx1Q0NCNCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDMkUwXHVBRERDIFx1QjE3OFx1RDJCOFx1QjlDQyBcdUM3ODRcdUJDQTBcdUI1MjlcdUQ1NjlcdUIyQzhcdUIyRTQgKFx1Qzk5RFx1QkQ4NCBcdUM3NzhcdUIzNzFcdUMyRjEpXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5kZXhOZXdGaWxlc09ubHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmluZGV4aW5nRW5hYmxlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzc0IFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUluZGV4aW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZhdWx0V2F0Y2hlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzJEQ1x1QzJBNFx1RDE1Q1x1Qzc3NCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ZXIgPSB0aGlzLmluZGV4ZXI7XG4gICAgaWYgKCFpbmRleGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMkRDXHVDMkE0XHVEMTVDXHVDNzc0IFx1Q0QwOFx1QUUzMFx1RDY1NFx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiXHVDMkUwXHVBRERDIFx1RDMwQ1x1Qzc3QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkRDXHVDNzkxLi4uXCIpO1xuICAgICAgXG4gICAgICAvLyBcdUJDRkNcdUQyQjhcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQzMENcdUM3N0MgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCBpbmRleGVkID0gMDtcblxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGFsbEZpbGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgLy8gXHVBQzAxIFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUM3NzhcdUIzNzFcdUMyRjEgKFx1Qzc3NFx1QkJGOCBcdUM3NzhcdUIzNzFcdUMyRjFcdUI0MUMgXHVEMzBDXHVDNzdDXHVDNzQwIGluZGV4ZXJcdUM1RDBcdUMxMUMgXHVENjU1XHVDNzc4KVxuICAgICAgICAgIGF3YWl0IGluZGV4ZXIuaW5kZXhGaWxlKGZpbGUucGF0aCwgY29udGVudCk7XG4gICAgICAgICAgaW5kZXhlZCsrO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgXHVEMzBDXHVDNzdDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgXHVDMkUwXHVBRERDIFx1RDMwQ1x1Qzc3QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNjQ0XHVCOENDOiAke2luZGV4ZWR9XHVBQzFDIFx1RDMwQ1x1Qzc3QyBcdUNDOThcdUI5QUNgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QzJFMFx1QUREQyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IEFQSSBVUkwgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG4gICAqL1xuICBwcml2YXRlIGdldEVtYmVkZGluZ0FwaVVybCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmVtYmVkZGluZ0FwaVVybD8udHJpbSgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5lbWJlZGRpbmdBcGlVcmwudHJpbSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXNldCA9IEVNQkVERElOR19QUkVTRVRTW3RoaXMuc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXJdO1xuICAgIHJldHVybiBwcmVzZXQ/LmFwaVVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM3NzhcdUIzNzFcdUMxMUMgXHVDN0FDXHVDRDA4XHVBRTMwXHVENjU0XHVBQzAwIFx1RDU0NFx1QzY5NFx1RDU1QyBcdUMxMjRcdUM4MTUgXHVCQ0MwXHVBQ0JEXHVDNzc4XHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgKi9cbiAgcHJpdmF0ZSBzaG91bGRSZWluaXRpYWxpemVJbmRleGluZyhwcmV2aW91czogT3ZsU2V0dGluZ3MsIGN1cnJlbnQ6IE92bFNldHRpbmdzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHByZXZpb3VzLmVtYmVkZGluZ1Byb3ZpZGVyICE9PSBjdXJyZW50LmVtYmVkZGluZ1Byb3ZpZGVyIHx8XG4gICAgICBwcmV2aW91cy5lbWJlZGRpbmdNb2RlbCAhPT0gY3VycmVudC5lbWJlZGRpbmdNb2RlbCB8fFxuICAgICAgcHJldmlvdXMuZW1iZWRkaW5nQXBpVXJsICE9PSBjdXJyZW50LmVtYmVkZGluZ0FwaVVybFxuICAgICk7XG4gIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IFZhdWx0IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IENvbnZlcnNhdGlvbiwgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblwiO1xuaW1wb3J0IHsgY29udmVydFRvTWFya2Rvd24gfSBmcm9tIFwiLi9jb252ZXJzYXRpb25cIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVDb252ZXJzYXRpb25Gcm9tVHVybnMoXG4gIHZhdWx0OiBWYXVsdCxcbiAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10sXG4gIG91dHB1dEZvbGRlcjogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbiA9IHtcbiAgICBzZXNzaW9uSWQsXG4gICAgdHVybnMsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpXG4gIH07XG5cbiAgY29uc3QgbWFya2Rvd24gPSBjb252ZXJ0VG9NYXJrZG93bihjb252ZXJzYXRpb24pO1xuICBjb25zdCBmaWxlbmFtZSA9IGJ1aWxkRmlsZU5hbWUoY29udmVyc2F0aW9uKTtcbiAgY29uc3QgY2xlYW5lZEZvbGRlciA9IG91dHB1dEZvbGRlciA/IG5vcm1hbGl6ZVBhdGgob3V0cHV0Rm9sZGVyKS5yZXBsYWNlKC9eXFwvKy8sIFwiXCIpIDogXCJcIjtcbiAgY29uc3QgdGFyZ2V0UGF0aCA9IGF3YWl0IGVuc3VyZVVuaXF1ZVBhdGgoXG4gICAgdmF1bHQsXG4gICAgbm9ybWFsaXplUGF0aChjbGVhbmVkRm9sZGVyID8gYCR7Y2xlYW5lZEZvbGRlcn0vJHtmaWxlbmFtZX1gIDogZmlsZW5hbWUpXG4gICk7XG5cbiAgaWYgKGNsZWFuZWRGb2xkZXIpIHtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHModmF1bHQsIGNsZWFuZWRGb2xkZXIpO1xuICB9XG5cbiAgYXdhaXQgdmF1bHQuY3JlYXRlKHRhcmdldFBhdGgsIG1hcmtkb3duKTtcbiAgcmV0dXJuIHRhcmdldFBhdGg7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkRmlsZU5hbWUoY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb24pOiBzdHJpbmcge1xuICBjb25zdCBzYWZlVGl0bGUgPSBzYW5pdGl6ZUZpbGVTZWdtZW50KGNvbnZlcnNhdGlvbi5zZXNzaW9uSWQpO1xuICByZXR1cm4gYCR7c2FmZVRpdGxlfS5tZGA7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplRmlsZVNlZ21lbnQodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKCk7XG4gIGlmICghdHJpbW1lZCkge1xuICAgIHJldHVybiBcInVudGl0bGVkXCI7XG4gIH1cblxuICBjb25zdCBjbGVhbmVkID0gdHJpbW1lZFxuICAgIC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgXCIgXCIpXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgLnRyaW0oKTtcblxuICByZXR1cm4gY2xlYW5lZCB8fCBcInVudGl0bGVkXCI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyh2YXVsdDogVmF1bHQsIGZvbGRlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlcik7XG4gIGlmICghZXhpc3RzKSB7XG4gICAgYXdhaXQgdmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlcik7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlVW5pcXVlUGF0aCh2YXVsdDogVmF1bHQsIHBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuICBjb25zdCBleHRlbnNpb25JbmRleCA9IG5vcm1hbGl6ZWQubGFzdEluZGV4T2YoXCIubWRcIik7XG4gIGNvbnN0IGJhc2UgPSBleHRlbnNpb25JbmRleCA9PT0gLTEgPyBub3JtYWxpemVkIDogbm9ybWFsaXplZC5zbGljZSgwLCBleHRlbnNpb25JbmRleCk7XG4gIGNvbnN0IGV4dGVuc2lvbiA9IGV4dGVuc2lvbkluZGV4ID09PSAtMSA/IFwiXCIgOiBcIi5tZFwiO1xuXG4gIGxldCBjYW5kaWRhdGUgPSBub3JtYWxpemVkO1xuICBsZXQgY291bnQgPSAxO1xuXG4gIHdoaWxlIChhd2FpdCB2YXVsdC5hZGFwdGVyLmV4aXN0cyhjYW5kaWRhdGUpKSB7XG4gICAgY2FuZGlkYXRlID0gYCR7YmFzZX0tJHtjb3VudH0ke2V4dGVuc2lvbn1gO1xuICAgIGNvdW50ICs9IDE7XG4gIH1cblxuICByZXR1cm4gY2FuZGlkYXRlO1xufVxuIiwgImltcG9ydCBmcyBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuXG5mdW5jdGlvbiB5YW1sUXVvdGUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG59XG5cbi8vIFx1QjMwMFx1RDY1NFx1Qzc1OCBcdUFDMDEgXHVEMTM0XHVDNzQ0IFx1QjA5OFx1RDBDMFx1QjBCNFx1QjI5NCBcdUQwQzBcdUM3ODVcbmV4cG9ydCB0eXBlIEFzc2lzdGFudEdlbmVyYXRpb25Mb2cgPSB7XG4gIHByb3ZpZGVyPzogc3RyaW5nO1xuICBtb2RlbD86IHN0cmluZztcbiAgaW5wdXRUb2tlbnM/OiBudW1iZXI7XG4gIG91dHB1dFRva2Vucz86IG51bWJlcjtcbiAgdG90YWxUb2tlbnM/OiBudW1iZXI7XG4gIGR1cmF0aW9uTXM6IG51bWJlcjtcbiAgdG9rZW5zUGVyU2Vjb25kPzogbnVtYmVyO1xuICBzdGFydGVkQXQ6IHN0cmluZztcbiAgY29tcGxldGVkQXQ6IHN0cmluZztcbiAgZXN0aW1hdGVkOiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgQ29udmVyc2F0aW9uVHVybiA9IHtcbiAgcm9sZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiIHwgXCJzeXN0ZW1cIjtcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA/OiBEYXRlIHwgc3RyaW5nO1xuICBnZW5lcmF0aW9uTG9nPzogQXNzaXN0YW50R2VuZXJhdGlvbkxvZztcbn07XG5cbi8vIFx1QjMwMFx1RDY1NCBcdUM4MDRcdUNDQjRcdUI5N0MgXHVCMDk4XHVEMEMwXHVCMEI0XHVCMjk0IFx1RDBDMFx1Qzc4NVxuZXhwb3J0IHR5cGUgQ29udmVyc2F0aW9uID0ge1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xufTtcblxuLy8gXHVCMzAwXHVENjU0XHVCOTdDIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVCQ0MwXHVENjU4XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvTWFya2Rvd24oY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb24pOiBzdHJpbmcge1xuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBZQU1MIFx1RDUwNFx1Qjg2MFx1RDJCOFx1QjlFNFx1RDEzMFxuICBjb25zdCByb2xlTGlzdCA9IEFycmF5LmZyb20obmV3IFNldChjb252ZXJzYXRpb24udHVybnMubWFwKCh0dXJuKSA9PiB0dXJuLnJvbGUpKSkuam9pbihcIiwgXCIpO1xuICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICBsaW5lcy5wdXNoKGBzZXNzaW9uSWQ6ICR7eWFtbFF1b3RlKGNvbnZlcnNhdGlvbi5zZXNzaW9uSWQpfWApO1xuICBsaW5lcy5wdXNoKGBjcmVhdGVkQXQ6ICR7eWFtbFF1b3RlKGNvbnZlcnNhdGlvbi5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSl9YCk7XG4gIGxpbmVzLnB1c2goYHR1cm5Db3VudDogJHtjb252ZXJzYXRpb24udHVybnMubGVuZ3RofWApO1xuICBsaW5lcy5wdXNoKGByb2xlczogWyR7cm9sZUxpc3R9XWApO1xuICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gIC8vIFx1QjJFOFx1Qzc3QyBcdUM2OTRcdUM1N0QgXHVDODAwXHVDN0E1KGFzc2lzdGFudCAxXHVEMTM0KVx1Qzc3OCBcdUFDQkRcdUM2QjAgXHVCQ0Y4XHVCQjM4XHVCOUNDIFx1QURGOFx1QjMwMFx1Qjg1QyBcdUNEOUNcdUI4MjVcbiAgaWYgKGNvbnZlcnNhdGlvbi50dXJucy5sZW5ndGggPT09IDEgJiYgY29udmVyc2F0aW9uLnR1cm5zWzBdLnJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICBsaW5lcy5wdXNoKGNvbnZlcnNhdGlvbi50dXJuc1swXS5jb250ZW50LnRyaW0oKSk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgICByZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbiAgLy8gXHVBQzAxIFx1RDEzNFx1Qzc0NCBcdUI5QzhcdUQwNkNcdUIyRTRcdUM2QjRcdUM3M0NcdUI4NUMgXHVCQ0MwXHVENjU4XG4gIGZvciAoY29uc3QgdHVybiBvZiBjb252ZXJzYXRpb24udHVybnMpIHtcbiAgICBjb25zdCByb2xlTGFiZWwgPSB0dXJuLnJvbGUgPT09IFwidXNlclwiID8gXCJcdUQ4M0RcdURDNjQgXHVDMEFDXHVDNkE5XHVDNzkwXCIgOiBcbiAgICAgICAgICAgICAgICAgICAgIHR1cm4ucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwiXHVEODNFXHVERDE2IFx1QzVCNFx1QzJEQ1x1QzJBNFx1RDEzNFx1RDJCOFwiIDogXG4gICAgICAgICAgICAgICAgICAgICBcIlx1MjY5OVx1RkUwRiBcdUMyRENcdUMyQTRcdUQxNUNcIjtcbiAgICBcbiAgICBsaW5lcy5wdXNoKGAjIyAke3JvbGVMYWJlbH1gKTtcbiAgICBcbiAgICBpZiAodHVybi50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHR5cGVvZiB0dXJuLnRpbWVzdGFtcCA9PT0gXCJzdHJpbmdcIiBcbiAgICAgICAgPyB0dXJuLnRpbWVzdGFtcCBcbiAgICAgICAgOiB0dXJuLnRpbWVzdGFtcC50b0lTT1N0cmluZygpO1xuICAgICAgbGluZXMucHVzaChgKiR7dGltZXN0YW1wfSpgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuICAgIFxuICAgIGxpbmVzLnB1c2godHVybi5jb250ZW50KTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG4gIFxuICByZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcbn1cblxuLy8gXHVCMzAwXHVENjU0XHVCOTdDIFx1RDMwQ1x1Qzc3Q1x1Qjg1QyBcdUM4MDBcdUM3QTVcbmV4cG9ydCBmdW5jdGlvbiBzYXZlQ29udmVyc2F0aW9uKFxuICBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbixcbiAgdGFyZ2V0RGlyOiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGlmICghZnMuZXhpc3RzU3luYyh0YXJnZXREaXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBcdUIzMDBcdUMwQzEgXHVCNTE0XHVCODA5XHVEMUEwXHVCOUFDXHVBQzAwIFx1Qzg3NFx1QzdBQ1x1RDU1OFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQ6ICR7dGFyZ2V0RGlyfWApO1xuICB9XG4gIFxuICBjb25zdCBtYXJrZG93biA9IGNvbnZlcnRUb01hcmtkb3duKGNvbnZlcnNhdGlvbik7XG4gIFxuICAvLyBcdUQzMENcdUM3N0NcdUJBODUgXHVDMEREXHVDMTMxOiBZWVlZLU1NLURELXNlc3Npb25JZC5tZFxuICBjb25zdCBkYXRlID0gY29udmVyc2F0aW9uLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcbiAgY29uc3QgZmlsZW5hbWUgPSBgJHtkYXRlfS0ke2NvbnZlcnNhdGlvbi5zZXNzaW9uSWR9Lm1kYDtcbiAgY29uc3QgZmlsZXBhdGggPSBwYXRoLmpvaW4odGFyZ2V0RGlyLCBmaWxlbmFtZSk7XG4gIFxuICBmcy53cml0ZUZpbGVTeW5jKGZpbGVwYXRoLCBtYXJrZG93biwgXCJ1dGYtOFwiKTtcbiAgXG4gIHJldHVybiBmaWxlcGF0aDtcbn1cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IENvbnZlcnNhdGlvblR1cm4gfSBmcm9tIFwiLi9jb252ZXJzYXRpb25cIjtcbmltcG9ydCB0eXBlIHsgT3ZsU2V0dGluZ3MgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgUFJPVklERVJfUFJFU0VUUyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgdHlwZSB7IEFzc2lzdGFudFJlcGx5U3RyZWFtT3B0aW9ucywgQXNzaXN0YW50VG9rZW5Vc2FnZSB9IGZyb20gXCIuL3BsdWdpbkFwaVwiO1xuXG50eXBlIExvZ1dyaXRlciA9IChjb250ZXh0OiBzdHJpbmcsIGRldGFpbDogdW5rbm93bikgPT4gUHJvbWlzZTx2b2lkPjtcblxudHlwZSBTZXR0aW5nc0dldHRlciA9ICgpID0+IE92bFNldHRpbmdzO1xuXG5leHBvcnQgY2xhc3MgT3ZsQXBpQ2xpZW50IHtcbiAgcHJpdmF0ZSByZWFkb25seSBnZXRTZXR0aW5nczogU2V0dGluZ3NHZXR0ZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nV3JpdGVyOiBMb2dXcml0ZXI7XG5cbiAgY29uc3RydWN0b3IoZ2V0U2V0dGluZ3M6IFNldHRpbmdzR2V0dGVyLCBsb2dXcml0ZXI/OiBMb2dXcml0ZXIpIHtcbiAgICB0aGlzLmdldFNldHRpbmdzID0gZ2V0U2V0dGluZ3M7XG4gICAgLy8gXHVCODVDXHVBREY4IFx1QUUzMFx1Qjg1RFx1QUUzMFx1Qjk3QyBcdUM4RkNcdUM3ODVcdUJDMUJcdUM5QzAgXHVCQUJCXHVENTVDIFx1QUNCRFx1QzZCMFx1QzVEMFx1QjNDNCBcdUM1NDhcdUM4MDRcdUQ1NThcdUFDOEMgXHVCM0Q5XHVDNzkxXHVENTU4XHVCM0M0XHVCODVEIFx1Q0M5OFx1QjlBQ1x1RDU2OVx1QjJDOFx1QjJFNC5cbiAgICB0aGlzLmxvZ1dyaXRlciA9IGxvZ1dyaXRlciA/PyAoYXN5bmMgKCkgPT4ge30pO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdEFzc2lzdGFudFJlcGx5KHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXG4gICAgaWYgKHNldHRpbmdzLnByb3ZpZGVyID09PSBcImdlbWluaVwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0R2VtaW5pUmVwbHkoc2V0dGluZ3MsIHR1cm5zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0T3BlbkFpQ29tcGF0aWJsZVJlcGx5KHNldHRpbmdzLCB0dXJucyk7XG4gIH1cblxuICBhc3luYyByZXF1ZXN0QXNzaXN0YW50UmVwbHlTdHJlYW0oXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBvcHRpb25zOiBBc3Npc3RhbnRSZXBseVN0cmVhbU9wdGlvbnNcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcblxuICAgIGlmIChzZXR0aW5ncy5wcm92aWRlciA9PT0gXCJnZW1pbmlcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdEdlbWluaVJlcGx5U3RyZWFtKHNldHRpbmdzLCB0dXJucywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdE9wZW5BaUNvbXBhdGlibGVSZXBseVN0cmVhbShzZXR0aW5ncywgdHVybnMsIG9wdGlvbnMpO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuICAgIGNvbnN0IHRpdGxlTW9kZWwgPSBzZXR0aW5ncy50aXRsZU1vZGVsLnRyaW0oKTtcbiAgICBjb25zdCBtb2RlbE5hbWUgPSB0aXRsZU1vZGVsIHx8IHNldHRpbmdzLm1vZGVsLnRyaW0oKTtcbiAgICBjb25zdCB0dXJuczogQ29udmVyc2F0aW9uVHVybltdID0gW1xuICAgICAge1xuICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgY29udGVudDogcHJvbXB0LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfVxuICAgIF07XG5cbiAgICBpZiAoc2V0dGluZ3MucHJvdmlkZXIgPT09IFwiZ2VtaW5pXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RHZW1pbmlSZXBseShzZXR0aW5ncywgdHVybnMsIHtcbiAgICAgICAgbW9kZWxOYW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6IFwiXCJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcXVlc3RPcGVuQWlDb21wYXRpYmxlUmVwbHkoc2V0dGluZ3MsIHR1cm5zLCB7XG4gICAgICBtb2RlbE5hbWUsXG4gICAgICBzeXN0ZW1Qcm9tcHQ6IFwiXCJcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVxdWVzdE9wZW5BaUNvbXBhdGlibGVSZXBseShcbiAgICBzZXR0aW5nczogT3ZsU2V0dGluZ3MsXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBvcHRpb25zPzogeyBtb2RlbE5hbWU/OiBzdHJpbmc7IHN5c3RlbVByb21wdD86IHN0cmluZyB8IG51bGwgfVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGFwaVVybCA9IHNldHRpbmdzLmFwaVVybC50cmltKCk7XG4gICAgaWYgKCFhcGlVcmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBVUkxcdUM3NDQgXHVDMTI0XHVDODE1XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWxOYW1lID0gb3B0aW9ucz8ubW9kZWxOYW1lPy50cmltKCkgfHwgc2V0dGluZ3MubW9kZWwudHJpbSgpIHx8IFBST1ZJREVSX1BSRVNFVFMub3BlbmFpLm1vZGVsO1xuICAgIGlmICghbW9kZWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUJBQThcdUIzNzggXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5idWlsZE9wZW5BaU1lc3NhZ2VzKHNldHRpbmdzLCB0dXJucywgb3B0aW9ucz8uc3lzdGVtUHJvbXB0ID8/IG51bGwpO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgbWVzc2FnZXNcbiAgICB9O1xuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcblxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH07XG4gICAgaWYgKHNldHRpbmdzLmFwaUtleS50cmltKCkpIHtcbiAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHtzZXR0aW5ncy5hcGlLZXkudHJpbSgpfWA7XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlOiB7IHRleHQ6IHN0cmluZzsganNvbj86IHVua25vd247IHN0YXR1cz86IG51bWJlciB9O1xuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IGFwaVVybCxcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBhd2FpdCB0aGlzLmxvZyhcIm9wZW5haS1jb21wYXRpYmxlIHJlcXVlc3QgZmFpbGVkXCIsIHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgIGVycm9yOiBtZXNzYWdlXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIFx1QzY5NFx1Q0NBRCBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgaWYgKHN0YXR1cyAmJiBzdGF0dXMgPj0gNDAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmxvZyhcIm9wZW5haS1jb21wYXRpYmxlIHJlc3BvbnNlIGVycm9yXCIsIHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLnRleHRcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgXHVDNjI0XHVCOTU4OiAke3N0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJzZUpzb25SZXNwb25zZShyZXNwb25zZS50ZXh0LCByZXNwb25zZS5qc29uKTtcbiAgICBjb25zdCBjb250ZW50ID1cbiAgICAgIChkYXRhIGFzIHsgY2hvaWNlcz86IEFycmF5PHsgbWVzc2FnZT86IHsgY29udGVudD86IHN0cmluZyB9IH0+IH0pPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2VcbiAgICAgICAgPy5jb250ZW50ID8/XG4gICAgICAoZGF0YSBhcyB7IHJlcGx5Pzogc3RyaW5nIH0pPy5yZXBseSA/P1xuICAgICAgKGRhdGEgYXMgeyBjb250ZW50Pzogc3RyaW5nIH0pPy5jb250ZW50ID8/XG4gICAgICAoZGF0YSBhcyB7IG1lc3NhZ2U/OiBzdHJpbmcgfSk/Lm1lc3NhZ2U7XG5cbiAgICBpZiAoIWNvbnRlbnQgfHwgdHlwZW9mIGNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwib3BlbmFpLWNvbXBhdGlibGUgcmVzcG9uc2UgaW52YWxpZFwiLCB7IHVybDogYXBpVXJsLCByZXNwb25zZTogZGF0YSB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQudHJpbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXF1ZXN0T3BlbkFpQ29tcGF0aWJsZVJlcGx5U3RyZWFtKFxuICAgIHNldHRpbmdzOiBPdmxTZXR0aW5ncyxcbiAgICB0dXJuczogQ29udmVyc2F0aW9uVHVybltdLFxuICAgIHN0cmVhbU9wdGlvbnM6IEFzc2lzdGFudFJlcGx5U3RyZWFtT3B0aW9ucyxcbiAgICBvcHRpb25zPzogeyBtb2RlbE5hbWU/OiBzdHJpbmc7IHN5c3RlbVByb21wdD86IHN0cmluZyB8IG51bGwgfVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGFwaVVybCA9IHNldHRpbmdzLmFwaVVybC50cmltKCk7XG4gICAgaWYgKCFhcGlVcmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBVUkxcdUM3NDQgXHVDMTI0XHVDODE1XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWxOYW1lID0gb3B0aW9ucz8ubW9kZWxOYW1lPy50cmltKCkgfHwgc2V0dGluZ3MubW9kZWwudHJpbSgpIHx8IFBST1ZJREVSX1BSRVNFVFMub3BlbmFpLm1vZGVsO1xuICAgIGlmICghbW9kZWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUJBQThcdUIzNzggXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5idWlsZE9wZW5BaU1lc3NhZ2VzKHNldHRpbmdzLCB0dXJucywgb3B0aW9ucz8uc3lzdGVtUHJvbXB0ID8/IG51bGwpO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgbWVzc2FnZXMsXG4gICAgICBzdHJlYW06IHRydWUsXG4gICAgICBzdHJlYW1fb3B0aW9uczoge1xuICAgICAgICBpbmNsdWRlX3VzYWdlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH07XG4gICAgaWYgKHNldHRpbmdzLmFwaUtleS50cmltKCkpIHtcbiAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHtzZXR0aW5ncy5hcGlLZXkudHJpbSgpfWA7XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgICB0cnkge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgIHNpZ25hbDogc3RyZWFtT3B0aW9ucy5zaWduYWxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5pc0Fib3J0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgIHRocm93IHRoaXMuY3JlYXRlQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwib3BlbmFpLWNvbXBhdGlibGUgc3RyZWFtIHJlcXVlc3QgZmFpbGVkXCIsIHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgIGVycm9yOiBtZXNzYWdlXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIFx1QzJBNFx1RDJCOFx1QjlBQ1x1QkMwRCBcdUM2OTRcdUNDQUQgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgYXdhaXQgdGhpcy5sb2coXCJvcGVuYWktY29tcGF0aWJsZSBzdHJlYW0gcmVzcG9uc2UgZXJyb3JcIiwge1xuICAgICAgICB1cmw6IGFwaVVybCxcbiAgICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHJlc3BvbnNlOiByZXNwb25zZVRleHRcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgXHVDNjI0XHVCOTU4OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gYXdhaXQgdGhpcy5yZXF1ZXN0T3BlbkFpQ29tcGF0aWJsZVJlcGx5KHNldHRpbmdzLCB0dXJucywgb3B0aW9ucyk7XG4gICAgICBzdHJlYW1PcHRpb25zLm9uVG9rZW4oZmFsbGJhY2spO1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cblxuICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgIGxldCBidWZmZXIgPSBcIlwiO1xuICAgIGxldCBmdWxsVGV4dCA9IFwiXCI7XG5cbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IGJ1ZmZlci5zcGxpdChcIlxcblxcblwiKTtcbiAgICAgICAgYnVmZmVyID0gY2h1bmtzLnBvcCgpID8/IFwiXCI7XG5cbiAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgICAgICBjb25zdCBwYXJzZWRDaHVuayA9IHRoaXMucGFyc2VPcGVuQWlTc2VDaHVuayhjaHVuayk7XG4gICAgICAgICAgaWYgKHBhcnNlZENodW5rLnVzYWdlKSB7XG4gICAgICAgICAgICBzdHJlYW1PcHRpb25zLm9uVXNhZ2U/LihwYXJzZWRDaHVuay51c2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgcGFyc2VkQ2h1bmsudG9rZW5zKSB7XG4gICAgICAgICAgICBmdWxsVGV4dCArPSB0b2tlbjtcbiAgICAgICAgICAgIHN0cmVhbU9wdGlvbnMub25Ub2tlbih0b2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChidWZmZXIudHJpbSgpKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZENodW5rID0gdGhpcy5wYXJzZU9wZW5BaVNzZUNodW5rKGJ1ZmZlcik7XG4gICAgICAgIGlmIChwYXJzZWRDaHVuay51c2FnZSkge1xuICAgICAgICAgIHN0cmVhbU9wdGlvbnMub25Vc2FnZT8uKHBhcnNlZENodW5rLnVzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHBhcnNlZENodW5rLnRva2Vucykge1xuICAgICAgICAgIGZ1bGxUZXh0ICs9IHRva2VuO1xuICAgICAgICAgIHN0cmVhbU9wdGlvbnMub25Ub2tlbih0b2tlbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMuaXNBYm9ydEVycm9yKGVycm9yKSkge1xuICAgICAgICB0aHJvdyB0aGlzLmNyZWF0ZUFib3J0RXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBhd2FpdCB0aGlzLmxvZyhcIm9wZW5haS1jb21wYXRpYmxlIHN0cmVhbSByZWFkIGZhaWxlZFwiLCB7XG4gICAgICAgIHVybDogYXBpVXJsLFxuICAgICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAgICBlcnJvcjogbWVzc2FnZVxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1QzJBNFx1RDJCOFx1QjlBQ1x1QkMwRCBcdUM3NTFcdUIyRjUgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgIH1cblxuICAgIHJldHVybiBmdWxsVGV4dC50cmltKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlcXVlc3RHZW1pbmlSZXBseShcbiAgICBzZXR0aW5nczogT3ZsU2V0dGluZ3MsXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBvcHRpb25zPzogeyBtb2RlbE5hbWU/OiBzdHJpbmc7IHN5c3RlbVByb21wdD86IHN0cmluZyB8IG51bGwgfVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGFwaUtleSA9IHNldHRpbmdzLmFwaUtleS50cmltKCk7XG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbWluaSBBUEkgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVsTmFtZSA9IG9wdGlvbnM/Lm1vZGVsTmFtZT8udHJpbSgpIHx8IHNldHRpbmdzLm1vZGVsLnRyaW0oKSB8fCBQUk9WSURFUl9QUkVTRVRTLmdlbWluaS5tb2RlbDtcbiAgICBpZiAoIW1vZGVsTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VtaW5pIFx1QkFBOFx1QjM3OCBcdUM3NzRcdUI5ODRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgfVxuXG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gKG9wdGlvbnM/LnN5c3RlbVByb21wdCA/PyBzZXR0aW5ncy5zeXN0ZW1Qcm9tcHQpLnRyaW0oKTtcbiAgICBjb25zdCBjb250ZW50cyA9IHR1cm5zLm1hcCgodHVybikgPT4ge1xuICAgICAgY29uc3Qgcm9sZSA9IHR1cm4ucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwibW9kZWxcIiA6IFwidXNlclwiO1xuICAgICAgY29uc3QgdGV4dCA9IHR1cm4ucm9sZSA9PT0gXCJzeXN0ZW1cIiA/IGBbXHVDMkRDXHVDMkE0XHVEMTVDXSAke3R1cm4uY29udGVudH1gIDogdHVybi5jb250ZW50O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcm9sZSxcbiAgICAgICAgcGFydHM6IFt7IHRleHQgfV1cbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBwYXlsb2FkOiB7XG4gICAgICBzeXN0ZW1JbnN0cnVjdGlvbj86IHsgcGFydHM6IEFycmF5PHsgdGV4dDogc3RyaW5nIH0+IH07XG4gICAgICBjb250ZW50czogQXJyYXk8eyByb2xlOiBzdHJpbmc7IHBhcnRzOiBBcnJheTx7IHRleHQ6IHN0cmluZyB9PiB9PjtcbiAgICAgIGdlbmVyYXRpb25Db25maWc6IHsgcmVzcG9uc2VNaW1lVHlwZTogc3RyaW5nIH07XG4gICAgfSA9IHtcbiAgICAgIGNvbnRlbnRzLFxuICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICByZXNwb25zZU1pbWVUeXBlOiBcInRleHQvcGxhaW5cIlxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3lzdGVtUHJvbXB0KSB7XG4gICAgICBwYXlsb2FkLnN5c3RlbUluc3RydWN0aW9uID0geyBwYXJ0czogW3sgdGV4dDogc3lzdGVtUHJvbXB0IH1dIH07XG4gICAgfVxuXG4gICAgLy8gR2VtaW5pIEFQSSBVUkwgXHVBRDZDXHVDMTMxIChBUEkgXHVEMEE0XHVCOTdDIFx1Q0ZGQ1x1QjlBQyBcdUQzMENcdUI3N0NcdUJCRjhcdUQxMzBcdUI4NUMgXHVDODA0XHVCMkVDKVxuICAgIGNvbnN0IGFwaVVybCA9IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7bW9kZWxOYW1lfTpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7YXBpS2V5fWA7XG5cbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9O1xuXG4gICAgbGV0IHJlc3BvbnNlOiB7IHRleHQ6IHN0cmluZzsganNvbj86IHVua25vd247IHN0YXR1cz86IG51bWJlciB9O1xuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IGFwaVVybCxcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgYXdhaXQgdGhpcy5sb2coXCJnZW1pbmkgcmVxdWVzdCBmYWlsZWRcIiwge1xuICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAgICBlcnJvcjogbWVzc2FnZVxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlbWluaSBcdUM2OTRcdUNDQUQgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzID49IDQwMCkge1xuICAgICAgYXdhaXQgdGhpcy5sb2coXCJnZW1pbmkgcmVzcG9uc2UgZXJyb3JcIiwge1xuICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIHJlc3BvbnNlOiByZXNwb25zZS50ZXh0XG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgR2VtaW5pIEFQSSBcdUM2MjRcdUI5NTg6ICR7c3RhdHVzfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcnNlSnNvblJlc3BvbnNlKHJlc3BvbnNlLnRleHQsIHJlc3BvbnNlLmpzb24pO1xuICAgIGNvbnN0IHRleHQgPVxuICAgICAgKGRhdGEgYXMgeyB0ZXh0Pzogc3RyaW5nIH0pPy50ZXh0ID8/XG4gICAgICAoZGF0YSBhcyB7IGNhbmRpZGF0ZXM/OiBBcnJheTx7IGNvbnRlbnQ/OiB7IHBhcnRzPzogQXJyYXk8eyB0ZXh0Pzogc3RyaW5nIH0+IH0gfT4gfSlcbiAgICAgICAgPy5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQ/LnBhcnRzXG4gICAgICAgID8ubWFwKChwYXJ0KSA9PiBwYXJ0LnRleHQgPz8gXCJcIilcbiAgICAgICAgLmpvaW4oXCJcIikgPz9cbiAgICAgIFwiXCI7XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwiZ2VtaW5pIHJlc3BvbnNlIGludmFsaWRcIiwgeyBtb2RlbDogbW9kZWxOYW1lLCByZXNwb25zZTogZGF0YSB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc1MVx1QjJGNSBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlcXVlc3RHZW1pbmlSZXBseVN0cmVhbShcbiAgICBzZXR0aW5nczogT3ZsU2V0dGluZ3MsXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBzdHJlYW1PcHRpb25zOiBBc3Npc3RhbnRSZXBseVN0cmVhbU9wdGlvbnMsXG4gICAgb3B0aW9ucz86IHsgbW9kZWxOYW1lPzogc3RyaW5nOyBzeXN0ZW1Qcm9tcHQ/OiBzdHJpbmcgfCBudWxsIH1cbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBhcGlLZXkgPSBzZXR0aW5ncy5hcGlLZXkudHJpbSgpO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW1pbmkgQVBJIFx1RDBBNFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NzQgXHVDOEZDXHVDMTM4XHVDNjk0LlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RlbE5hbWUgPSBvcHRpb25zPy5tb2RlbE5hbWU/LnRyaW0oKSB8fCBzZXR0aW5ncy5tb2RlbC50cmltKCkgfHwgUFJPVklERVJfUFJFU0VUUy5nZW1pbmkubW9kZWw7XG4gICAgaWYgKCFtb2RlbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbWluaSBcdUJBQThcdUIzNzggXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IChvcHRpb25zPy5zeXN0ZW1Qcm9tcHQgPz8gc2V0dGluZ3Muc3lzdGVtUHJvbXB0KS50cmltKCk7XG4gICAgY29uc3QgY29udGVudHMgPSB0dXJucy5tYXAoKHR1cm4pID0+IHtcbiAgICAgIGNvbnN0IHJvbGUgPSB0dXJuLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgPyBcIm1vZGVsXCIgOiBcInVzZXJcIjtcbiAgICAgIGNvbnN0IHRleHQgPSB0dXJuLnJvbGUgPT09IFwic3lzdGVtXCIgPyBgW1x1QzJEQ1x1QzJBNFx1RDE1Q10gJHt0dXJuLmNvbnRlbnR9YCA6IHR1cm4uY29udGVudDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJvbGUsXG4gICAgICAgIHBhcnRzOiBbeyB0ZXh0IH1dXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgcGF5bG9hZDoge1xuICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb24/OiB7IHBhcnRzOiBBcnJheTx7IHRleHQ6IHN0cmluZyB9PiB9O1xuICAgICAgY29udGVudHM6IEFycmF5PHsgcm9sZTogc3RyaW5nOyBwYXJ0czogQXJyYXk8eyB0ZXh0OiBzdHJpbmcgfT4gfT47XG4gICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7IHJlc3BvbnNlTWltZVR5cGU6IHN0cmluZyB9O1xuICAgIH0gPSB7XG4gICAgICBjb250ZW50cyxcbiAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcbiAgICAgICAgcmVzcG9uc2VNaW1lVHlwZTogXCJ0ZXh0L3BsYWluXCJcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN5c3RlbVByb21wdCkge1xuICAgICAgcGF5bG9hZC5zeXN0ZW1JbnN0cnVjdGlvbiA9IHsgcGFydHM6IFt7IHRleHQ6IHN5c3RlbVByb21wdCB9XSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFwaVVybCA9IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7bW9kZWxOYW1lfTpzdHJlYW1HZW5lcmF0ZUNvbnRlbnQ/YWx0PXNzZSZrZXk9JHthcGlLZXl9YDtcblxuICAgIGxldCByZXNwb25zZTogUmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgc2lnbmFsOiBzdHJlYW1PcHRpb25zLnNpZ25hbFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLmlzQWJvcnRFcnJvcihlcnJvcikpIHtcbiAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVBYm9ydEVycm9yKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgYXdhaXQgdGhpcy5sb2coXCJnZW1pbmkgc3RyZWFtIHJlcXVlc3QgZmFpbGVkXCIsIHtcbiAgICAgICAgbW9kZWw6IG1vZGVsTmFtZSxcbiAgICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgICAgZXJyb3I6IG1lc3NhZ2VcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBHZW1pbmkgXHVDMkE0XHVEMkI4XHVCOUFDXHVCQzBEIFx1QzY5NFx1Q0NBRCBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCByZXNwb25zZVRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICBhd2FpdCB0aGlzLmxvZyhcImdlbWluaSBzdHJlYW0gcmVzcG9uc2UgZXJyb3JcIiwge1xuICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlVGV4dFxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlbWluaSBBUEkgXHVDNjI0XHVCOTU4OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gYXdhaXQgdGhpcy5yZXF1ZXN0R2VtaW5pUmVwbHkoc2V0dGluZ3MsIHR1cm5zLCBvcHRpb25zKTtcbiAgICAgIHN0cmVhbU9wdGlvbnMub25Ub2tlbihmYWxsYmFjayk7XG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgbGV0IGJ1ZmZlciA9IFwiXCI7XG4gICAgbGV0IGZ1bGxUZXh0ID0gXCJcIjtcbiAgICBsZXQgc25hcHNob3RUZXh0ID0gXCJcIjtcblxuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgYnVmZmVyICs9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gYnVmZmVyLnNwbGl0KFwiXFxuXFxuXCIpO1xuICAgICAgICBidWZmZXIgPSBjaHVua3MucG9wKCkgPz8gXCJcIjtcblxuICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGFyc2VHZW1pbmlTc2VDaHVuayhjaHVuaywgc25hcHNob3RUZXh0KTtcbiAgICAgICAgICBzbmFwc2hvdFRleHQgPSByZXN1bHQuc25hcHNob3Q7XG4gICAgICAgICAgaWYgKHJlc3VsdC51c2FnZSkge1xuICAgICAgICAgICAgc3RyZWFtT3B0aW9ucy5vblVzYWdlPy4ocmVzdWx0LnVzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlc3VsdC5kZWx0YSkge1xuICAgICAgICAgICAgZnVsbFRleHQgKz0gcmVzdWx0LmRlbHRhO1xuICAgICAgICAgICAgc3RyZWFtT3B0aW9ucy5vblRva2VuKHJlc3VsdC5kZWx0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChidWZmZXIudHJpbSgpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGFyc2VHZW1pbmlTc2VDaHVuayhidWZmZXIsIHNuYXBzaG90VGV4dCk7XG4gICAgICAgIHNuYXBzaG90VGV4dCA9IHJlc3VsdC5zbmFwc2hvdDtcbiAgICAgICAgaWYgKHJlc3VsdC51c2FnZSkge1xuICAgICAgICAgIHN0cmVhbU9wdGlvbnMub25Vc2FnZT8uKHJlc3VsdC51c2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5kZWx0YSkge1xuICAgICAgICAgIGZ1bGxUZXh0ICs9IHJlc3VsdC5kZWx0YTtcbiAgICAgICAgICBzdHJlYW1PcHRpb25zLm9uVG9rZW4ocmVzdWx0LmRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5pc0Fib3J0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgIHRocm93IHRoaXMuY3JlYXRlQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIGF3YWl0IHRoaXMubG9nKFwiZ2VtaW5pIHN0cmVhbSByZWFkIGZhaWxlZFwiLCB7XG4gICAgICAgIG1vZGVsOiBtb2RlbE5hbWUsXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgIGVycm9yOiBtZXNzYWdlXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgR2VtaW5pIFx1QzJBNFx1RDJCOFx1QjlBQ1x1QkMwRCBcdUM3NTFcdUIyRjUgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgIH1cblxuICAgIHJldHVybiBmdWxsVGV4dDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRPcGVuQWlNZXNzYWdlcyhcbiAgICBzZXR0aW5nczogT3ZsU2V0dGluZ3MsXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBzeXN0ZW1Qcm9tcHRPdmVycmlkZTogc3RyaW5nIHwgbnVsbFxuICApOiBBcnJheTx7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBtZXNzYWdlcyA9IFtdIGFzIEFycmF5PHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfT47XG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gc3lzdGVtUHJvbXB0T3ZlcnJpZGUgIT09IG51bGxcbiAgICAgID8gc3lzdGVtUHJvbXB0T3ZlcnJpZGUudHJpbSgpXG4gICAgICA6IHNldHRpbmdzLnN5c3RlbVByb21wdC50cmltKCk7XG4gICAgaWYgKHN5c3RlbVByb21wdCkge1xuICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB0dXJuIG9mIHR1cm5zKSB7XG4gICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogdHVybi5yb2xlLCBjb250ZW50OiB0dXJuLmNvbnRlbnQgfSk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlcztcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VKc29uUmVzcG9uc2UodGV4dDogc3RyaW5nLCBqc29uPzogdW5rbm93bik6IHVua25vd24ge1xuICAgIGlmIChqc29uKSB7XG4gICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIFx1Qzc1MVx1QjJGNVx1Qzc0NCBcdUQ1NzRcdUMxMURcdUQ1NjAgXHVDMjE4IFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZU9wZW5BaVNzZUNodW5rKGNodW5rOiBzdHJpbmcpOiB7IHRva2Vuczogc3RyaW5nW107IHVzYWdlPzogQXNzaXN0YW50VG9rZW5Vc2FnZSB9IHtcbiAgICBjb25zdCB0b2tlbnM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IHVzYWdlOiBBc3Npc3RhbnRUb2tlblVzYWdlIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGxpbmVzID0gY2h1bmtcbiAgICAgIC5zcGxpdChcIlxcblwiKVxuICAgICAgLm1hcCgobGluZSkgPT4gbGluZS50cmltKCkpXG4gICAgICAuZmlsdGVyKChsaW5lKSA9PiBsaW5lLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSk7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSBsaW5lLnNsaWNlKFwiZGF0YTpcIi5sZW5ndGgpLnRyaW0oKTtcbiAgICAgIGlmICghcGF5bG9hZCB8fCBwYXlsb2FkID09PSBcIltET05FXVwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgZGF0YTogdW5rbm93bjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcGVuQWlVc2FnZSA9IHRoaXMuZXh0cmFjdE9wZW5BaVVzYWdlKGRhdGEpO1xuICAgICAgaWYgKG9wZW5BaVVzYWdlKSB7XG4gICAgICAgIHVzYWdlID0gb3BlbkFpVXNhZ2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID1cbiAgICAgICAgKGRhdGEgYXMgeyBjaG9pY2VzPzogQXJyYXk8eyBkZWx0YT86IHsgY29udGVudD86IHN0cmluZyB9IH0+IH0pPy5jaG9pY2VzPy5bMF0/LmRlbHRhPy5jb250ZW50ID8/XG4gICAgICAgIChkYXRhIGFzIHsgY2hvaWNlcz86IEFycmF5PHsgbWVzc2FnZT86IHsgY29udGVudD86IHN0cmluZyB9IH0+IH0pPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgPz9cbiAgICAgICAgKGRhdGEgYXMgeyBtZXNzYWdlPzogeyBjb250ZW50Pzogc3RyaW5nIH0gfSk/Lm1lc3NhZ2U/LmNvbnRlbnQgPz9cbiAgICAgICAgXCJcIjtcblxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyB0b2tlbnMsIHVzYWdlIH07XG4gIH1cblxuICBwcml2YXRlIHBhcnNlR2VtaW5pU3NlQ2h1bmsoXG4gICAgY2h1bms6IHN0cmluZyxcbiAgICBzbmFwc2hvdFRleHQ6IHN0cmluZ1xuICApOiB7IGRlbHRhOiBzdHJpbmc7IHNuYXBzaG90OiBzdHJpbmc7IHVzYWdlPzogQXNzaXN0YW50VG9rZW5Vc2FnZSB9IHtcbiAgICBjb25zdCBsaW5lcyA9IGNodW5rXG4gICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgIC5tYXAoKGxpbmUpID0+IGxpbmUudHJpbSgpKVxuICAgICAgLmZpbHRlcigobGluZSkgPT4gbGluZS5zdGFydHNXaXRoKFwiZGF0YTpcIikpO1xuXG4gICAgbGV0IGRlbHRhID0gXCJcIjtcbiAgICBsZXQgc25hcHNob3QgPSBzbmFwc2hvdFRleHQ7XG4gICAgbGV0IHVzYWdlOiBBc3Npc3RhbnRUb2tlblVzYWdlIHwgdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBwYXlsb2FkID0gbGluZS5zbGljZShcImRhdGE6XCIubGVuZ3RoKS50cmltKCk7XG4gICAgICBpZiAoIXBheWxvYWQgfHwgcGF5bG9hZCA9PT0gXCJbRE9ORV1cIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IGRhdGE6IHVua25vd247XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShwYXlsb2FkKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZ2VtaW5pVXNhZ2UgPSB0aGlzLmV4dHJhY3RHZW1pbmlVc2FnZShkYXRhKTtcbiAgICAgIGlmIChnZW1pbmlVc2FnZSkge1xuICAgICAgICB1c2FnZSA9IGdlbWluaVVzYWdlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0VGV4dCA9XG4gICAgICAgIChkYXRhIGFzIHsgdGV4dD86IHN0cmluZyB9KT8udGV4dCA/P1xuICAgICAgICAoZGF0YSBhcyB7IGNhbmRpZGF0ZXM/OiBBcnJheTx7IGNvbnRlbnQ/OiB7IHBhcnRzPzogQXJyYXk8eyB0ZXh0Pzogc3RyaW5nIH0+IH0gfT4gfSlcbiAgICAgICAgICA/LmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHNcbiAgICAgICAgICA/Lm1hcCgocGFydCkgPT4gcGFydC50ZXh0ID8/IFwiXCIpXG4gICAgICAgICAgLmpvaW4oXCJcIikgPz9cbiAgICAgICAgXCJcIjtcblxuICAgICAgaWYgKCFuZXh0VGV4dCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5leHRUZXh0LnN0YXJ0c1dpdGgoc25hcHNob3QpKSB7XG4gICAgICAgIGNvbnN0IGFwcGVuZGVkID0gbmV4dFRleHQuc2xpY2Uoc25hcHNob3QubGVuZ3RoKTtcbiAgICAgICAgaWYgKGFwcGVuZGVkKSB7XG4gICAgICAgICAgZGVsdGEgKz0gYXBwZW5kZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc25hcHNob3QgPSBuZXh0VGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbHRhICs9IG5leHRUZXh0O1xuICAgICAgICBzbmFwc2hvdCArPSBuZXh0VGV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBkZWx0YSwgc25hcHNob3QsIHVzYWdlIH07XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RPcGVuQWlVc2FnZShkYXRhOiB1bmtub3duKTogQXNzaXN0YW50VG9rZW5Vc2FnZSB8IG51bGwge1xuICAgIGNvbnN0IHVzYWdlID0gKGRhdGEgYXMge1xuICAgICAgdXNhZ2U/OiB7IHByb21wdF90b2tlbnM/OiBudW1iZXI7IGNvbXBsZXRpb25fdG9rZW5zPzogbnVtYmVyOyB0b3RhbF90b2tlbnM/OiBudW1iZXIgfTtcbiAgICB9KT8udXNhZ2U7XG5cbiAgICBpZiAoIXVzYWdlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBpbnB1dFRva2VucyA9IE51bWJlcih1c2FnZS5wcm9tcHRfdG9rZW5zKTtcbiAgICBjb25zdCBvdXRwdXRUb2tlbnMgPSBOdW1iZXIodXNhZ2UuY29tcGxldGlvbl90b2tlbnMpO1xuICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gTnVtYmVyKHVzYWdlLnRvdGFsX3Rva2Vucyk7XG5cbiAgICBjb25zdCBoYXNBbnlUb2tlbiA9XG4gICAgICBOdW1iZXIuaXNGaW5pdGUoaW5wdXRUb2tlbnMpIHx8IE51bWJlci5pc0Zpbml0ZShvdXRwdXRUb2tlbnMpIHx8IE51bWJlci5pc0Zpbml0ZSh0b3RhbFRva2Vucyk7XG4gICAgaWYgKCFoYXNBbnlUb2tlbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0OiBBc3Npc3RhbnRUb2tlblVzYWdlID0ge307XG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShpbnB1dFRva2VucykpIHtcbiAgICAgIHJlc3VsdC5pbnB1dFRva2VucyA9IGlucHV0VG9rZW5zO1xuICAgIH1cbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG91dHB1dFRva2VucykpIHtcbiAgICAgIHJlc3VsdC5vdXRwdXRUb2tlbnMgPSBvdXRwdXRUb2tlbnM7XG4gICAgfVxuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUodG90YWxUb2tlbnMpKSB7XG4gICAgICByZXN1bHQudG90YWxUb2tlbnMgPSB0b3RhbFRva2VucztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0R2VtaW5pVXNhZ2UoZGF0YTogdW5rbm93bik6IEFzc2lzdGFudFRva2VuVXNhZ2UgfCBudWxsIHtcbiAgICBjb25zdCB1c2FnZSA9IChkYXRhIGFzIHtcbiAgICAgIHVzYWdlTWV0YWRhdGE/OiB7XG4gICAgICAgIHByb21wdFRva2VuQ291bnQ/OiBudW1iZXI7XG4gICAgICAgIGNhbmRpZGF0ZXNUb2tlbkNvdW50PzogbnVtYmVyO1xuICAgICAgICB0b3RhbFRva2VuQ291bnQ/OiBudW1iZXI7XG4gICAgICB9O1xuICAgIH0pPy51c2FnZU1ldGFkYXRhO1xuXG4gICAgaWYgKCF1c2FnZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgaW5wdXRUb2tlbnMgPSBOdW1iZXIodXNhZ2UucHJvbXB0VG9rZW5Db3VudCk7XG4gICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gTnVtYmVyKHVzYWdlLmNhbmRpZGF0ZXNUb2tlbkNvdW50KTtcbiAgICBjb25zdCB0b3RhbFRva2VucyA9IE51bWJlcih1c2FnZS50b3RhbFRva2VuQ291bnQpO1xuXG4gICAgY29uc3QgaGFzQW55VG9rZW4gPVxuICAgICAgTnVtYmVyLmlzRmluaXRlKGlucHV0VG9rZW5zKSB8fCBOdW1iZXIuaXNGaW5pdGUob3V0cHV0VG9rZW5zKSB8fCBOdW1iZXIuaXNGaW5pdGUodG90YWxUb2tlbnMpO1xuICAgIGlmICghaGFzQW55VG9rZW4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdDogQXNzaXN0YW50VG9rZW5Vc2FnZSA9IHt9O1xuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoaW5wdXRUb2tlbnMpKSB7XG4gICAgICByZXN1bHQuaW5wdXRUb2tlbnMgPSBpbnB1dFRva2VucztcbiAgICB9XG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShvdXRwdXRUb2tlbnMpKSB7XG4gICAgICByZXN1bHQub3V0cHV0VG9rZW5zID0gb3V0cHV0VG9rZW5zO1xuICAgIH1cbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHRvdGFsVG9rZW5zKSkge1xuICAgICAgcmVzdWx0LnRvdGFsVG9rZW5zID0gdG90YWxUb2tlbnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgaXNBYm9ydEVycm9yKGVycm9yOiB1bmtub3duKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgKGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiIHx8IC9hYm9ydHxcdUM5MTFcdUIyRTgvaS50ZXN0KGVycm9yLm1lc3NhZ2UpKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQWJvcnRFcnJvcigpOiBFcnJvciB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJcdUM2OTRcdUNDQURcdUM3NzQgXHVDOTExXHVCMkU4XHVCNDE4XHVDNUM4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICBlcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2coY29udGV4dDogc3RyaW5nLCBkZXRhaWw6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmxvZ1dyaXRlcihjb250ZXh0LCBkZXRhaWwpO1xuICB9XG59XG4iLCAiZXhwb3J0IHR5cGUgQXBpUHJvdmlkZXIgPSBcImdlbWluaVwiIHwgXCJvcGVuYWlcIiB8IFwib2xsYW1hXCIgfCBcImN1c3RvbVwiO1xuZXhwb3J0IHR5cGUgRW1iZWRkaW5nUHJvdmlkZXIgPSBcImdlbWluaVwiIHwgXCJvcGVuYWlcIiB8IFwibG9jYWxcIiB8IFwiY3VzdG9tXCI7XG5cbmV4cG9ydCB0eXBlIE92bFNldHRpbmdzID0ge1xuICBwcm92aWRlcjogQXBpUHJvdmlkZXI7XG4gIGFwaVVybDogc3RyaW5nO1xuICBhcGlLZXk6IHN0cmluZztcbiAgbW9kZWw6IHN0cmluZztcbiAgdGl0bGVNb2RlbDogc3RyaW5nO1xuICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZztcbiAgZGVmYXVsdE91dHB1dEZvbGRlcjogc3RyaW5nO1xuICAvLyBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDMTI0XHVDODE1XG4gIGluZGV4aW5nRW5hYmxlZDogYm9vbGVhbjtcbiAgY2h1bmtTaXplOiBudW1iZXI7XG4gIGNodW5rT3ZlcmxhcDogbnVtYmVyO1xuICB0b3BLOiBudW1iZXI7XG4gIHNlYXJjaFNpbWlsYXJpdHlUaHJlc2hvbGQ6IG51bWJlcjtcbiAgc2F2ZVNpbWlsYXJpdHlUaHJlc2hvbGQ6IG51bWJlcjtcbiAgLy8gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzEyNFx1QzgxNVxuICBlbWJlZGRpbmdQcm92aWRlcjogRW1iZWRkaW5nUHJvdmlkZXI7XG4gIGVtYmVkZGluZ0FwaUtleTogc3RyaW5nO1xuICBlbWJlZGRpbmdNb2RlbDogc3RyaW5nO1xuICBlbWJlZGRpbmdBcGlVcmw6IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9WSURFUl9QUkVTRVRTOiBSZWNvcmQ8QXBpUHJvdmlkZXIsIHsgYXBpVXJsOiBzdHJpbmc7IG1vZGVsOiBzdHJpbmcgfT4gPSB7XG4gIGdlbWluaToge1xuICAgIGFwaVVybDogXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzL2dlbWluaS0zLjAtcHJldmlldzpnZW5lcmF0ZUNvbnRlbnRcIixcbiAgICBtb2RlbDogXCJnZW1pbmktMy4wLXByZXZpZXdcIlxuICB9LFxuICBvcGVuYWk6IHtcbiAgICBhcGlVcmw6IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zXCIsXG4gICAgbW9kZWw6IFwiZ3B0LTRvLW1pbmlcIlxuICB9LFxuICBvbGxhbWE6IHtcbiAgICBhcGlVcmw6IFwiaHR0cDovL2xvY2FsaG9zdDoxMTQzNC92MS9jaGF0L2NvbXBsZXRpb25zXCIsXG4gICAgbW9kZWw6IFwibGxhbWEzLjFcIlxuICB9LFxuICBjdXN0b206IHtcbiAgICBhcGlVcmw6IFwiXCIsXG4gICAgbW9kZWw6IFwiXCJcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IEVNQkVERElOR19QUkVTRVRTOiBSZWNvcmQ8RW1iZWRkaW5nUHJvdmlkZXIsIHsgbW9kZWw6IHN0cmluZzsgYXBpVXJsPzogc3RyaW5nIH0+ID0ge1xuICBnZW1pbmk6IHtcbiAgICBtb2RlbDogXCJ0ZXh0LWVtYmVkZGluZy0wMDRcIixcbiAgICBhcGlVcmw6IFwiaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVsc1wiXG4gIH0sXG4gIG9wZW5haToge1xuICAgIG1vZGVsOiBcInRleHQtZW1iZWRkaW5nLTMtc21hbGxcIixcbiAgICBhcGlVcmw6IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9lbWJlZGRpbmdzXCJcbiAgfSxcbiAgbG9jYWw6IHtcbiAgICBtb2RlbDogXCJYZW5vdmEvYWxsLU1pbmlMTS1MNi12MlwiXG4gIH0sXG4gIGN1c3RvbToge1xuICAgIG1vZGVsOiBcIlwiXG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBPdmxTZXR0aW5ncyA9IHtcbiAgcHJvdmlkZXI6IFwiZ2VtaW5pXCIsXG4gIGFwaVVybDogUFJPVklERVJfUFJFU0VUUy5nZW1pbmkuYXBpVXJsLFxuICBhcGlLZXk6IFwiXCIsXG4gIG1vZGVsOiBQUk9WSURFUl9QUkVTRVRTLmdlbWluaS5tb2RlbCxcbiAgdGl0bGVNb2RlbDogXCJcIixcbiAgc3lzdGVtUHJvbXB0OiBcIlwiLFxuICBkZWZhdWx0T3V0cHV0Rm9sZGVyOiBcIlwiLFxuICAvLyBcdUM3NzhcdUIzNzFcdUMyRjEgXHVBRTMwXHVCQ0Y4IFx1QzEyNFx1QzgxNVxuICBpbmRleGluZ0VuYWJsZWQ6IGZhbHNlLFxuICBjaHVua1NpemU6IDQwMCxcbiAgY2h1bmtPdmVybGFwOiA1MCxcbiAgdG9wSzogOCxcbiAgc2VhcmNoU2ltaWxhcml0eVRocmVzaG9sZDogMC4zNSxcbiAgc2F2ZVNpbWlsYXJpdHlUaHJlc2hvbGQ6IDAuNzUsXG4gIC8vIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUFFMzBcdUJDRjggXHVDMTI0XHVDODE1IChHZW1pbmkpXG4gIGVtYmVkZGluZ1Byb3ZpZGVyOiBcImdlbWluaVwiLFxuICBlbWJlZGRpbmdBcGlLZXk6IFwiXCIsXG4gIGVtYmVkZGluZ01vZGVsOiBFTUJFRERJTkdfUFJFU0VUUy5nZW1pbmkubW9kZWwsXG4gIGVtYmVkZGluZ0FwaVVybDogRU1CRURESU5HX1BSRVNFVFMuZ2VtaW5pLmFwaVVybCB8fCBcIlwiLFxufTtcbiIsICJpbXBvcnQgeyBNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IHR5cGUgU2F2ZUNvbnZlcnNhdGlvbkZvcm0gPSB7XG4gIGlucHV0UGF0aDogc3RyaW5nO1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgb3V0cHV0Rm9sZGVyOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY2xhc3MgU2F2ZUNvbnZlcnNhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHJlYWRvbmx5IG9uU3VibWl0OiAodmFsdWU6IFNhdmVDb252ZXJzYXRpb25Gb3JtKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luLCBvblN1Ym1pdDogKHZhbHVlOiBTYXZlQ29udmVyc2F0aW9uRm9ybSkgPT4gdm9pZCkge1xuICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgfVxuXG4gIG9uT3BlbigpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJcdUIzMDBcdUQ2NTQgSlNPTiBcdUM4MDBcdUM3QTVcIiB9KTtcblxuICAgIGNvbnN0IGlucHV0UGF0aEVsID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiB9KTtcbiAgICBpbnB1dFBhdGhFbC5wbGFjZWhvbGRlciA9IFwiSlNPTiBcdUQzMENcdUM3N0MgXHVBQ0JEXHVCODVDIChcdUJDRkNcdUQyQjggXHVBRTMwXHVDOTAwKVwiO1xuXG4gICAgY29uc3Qgc2Vzc2lvbklkRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiIH0pO1xuICAgIHNlc3Npb25JZEVsLnBsYWNlaG9sZGVyID0gXCJcdUMxMzhcdUMxNTggSURcIjtcblxuICAgIGNvbnN0IG91dHB1dEZvbGRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiB9KTtcbiAgICBvdXRwdXRGb2xkZXJFbC5wbGFjZWhvbGRlciA9IFwiXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NCAoXHVDMTIwXHVEMERELCBcdUJDRkNcdUQyQjggXHVBRTMwXHVDOTAwKVwiO1xuXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUM4MDBcdUM3QTVcIiB9KTtcbiAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMub25TdWJtaXQoe1xuICAgICAgICBpbnB1dFBhdGg6IGlucHV0UGF0aEVsLnZhbHVlLnRyaW0oKSxcbiAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWRFbC52YWx1ZS50cmltKCksXG4gICAgICAgIG91dHB1dEZvbGRlcjogb3V0cHV0Rm9sZGVyRWwudmFsdWUudHJpbSgpXG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuL2NvbnZlcnNhdGlvblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUdXJucyhjb250ZW50OiBzdHJpbmcpOiBDb252ZXJzYXRpb25UdXJuW10ge1xuICBsZXQgZGF0YTogdW5rbm93bjtcbiAgdHJ5IHtcbiAgICBkYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgfSBjYXRjaCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSlNPTiBcdUQ2MTVcdUMyRERcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJKU09OXHVDNzQwIFx1QkMzMFx1QzVGNFx1Qzc3NFx1QzVCNFx1QzU3QyBcdUQ1NjlcdUIyQzhcdUIyRTQuXCIpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdUM3OThcdUJBQkJcdUI0MUMgXHVENTZEXHVCQUE5OiAke2luZGV4ICsgMX1cdUJDODhcdUM5RjhgKTtcbiAgICB9XG5cbiAgICBjb25zdCByb2xlID0gKGl0ZW0gYXMgeyByb2xlPzogc3RyaW5nIH0pLnJvbGU7XG4gICAgY29uc3QgY29udGVudFZhbHVlID0gKGl0ZW0gYXMgeyBjb250ZW50Pzogc3RyaW5nIH0pLmNvbnRlbnQ7XG4gICAgY29uc3QgdGltZXN0YW1wVmFsdWUgPSAoaXRlbSBhcyB7IHRpbWVzdGFtcD86IHN0cmluZyB9KS50aW1lc3RhbXA7XG5cbiAgICBpZiAocm9sZSAhPT0gXCJ1c2VyXCIgJiYgcm9sZSAhPT0gXCJhc3Npc3RhbnRcIiAmJiByb2xlICE9PSBcInN5c3RlbVwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHJvbGVcdUM3NzQgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNDogJHtpbmRleCArIDF9XHVCQzg4XHVDOUY4YCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY29udGVudFZhbHVlICE9PSBcInN0cmluZ1wiIHx8ICFjb250ZW50VmFsdWUudHJpbSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNvbnRlbnRcdUFDMDAgXHVDNjJDXHVCQzE0XHVCOTc0XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNDogJHtpbmRleCArIDF9XHVCQzg4XHVDOUY4YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50OiBjb250ZW50VmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcFZhbHVlXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgQXBpUHJvdmlkZXIsIE92bFNldHRpbmdzLCBFbWJlZGRpbmdQcm92aWRlciB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBQUk9WSURFUl9QUkVTRVRTLCBFTUJFRERJTkdfUFJFU0VUUyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCB0eXBlIFNldHRpbmdzSG9zdCA9IFBsdWdpbiAmIHtcbiAgc2V0dGluZ3M6IE92bFNldHRpbmdzO1xuICBzYXZlU2V0dGluZ3M6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGluZGV4VmF1bHRBbGw6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGluZGV4TmV3RmlsZXNPbmx5OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufTtcblxuZXhwb3J0IGNsYXNzIE92bFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcHJpdmF0ZSByZWFkb25seSBwbHVnaW46IFNldHRpbmdzSG9zdDtcbiAgcHJpdmF0ZSBnZW1pbmlNb2RlbHM6IHN0cmluZ1tdID0gW107XG5cbiAgY29uc3RydWN0b3IocGx1Z2luOiBTZXR0aW5nc0hvc3QpIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJPVkwgXHVDMTI0XHVDODE1XCIgfSk7XG5cbiAgICBsZXQgYXBpVXJsSW5wdXQ6IHsgc2V0VmFsdWU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkIH0gfCBudWxsID0gbnVsbDtcbiAgICBsZXQgbW9kZWxJbnB1dDogeyBzZXRWYWx1ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkFQSSBcdUM4MUNcdUFDRjVcdUMwQUNcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDMEFDXHVDNkE5XHVENTYwIEFQSSBcdUM4MUNcdUFDRjVcdUMwQUNcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LiAoT2xsYW1hIFx1RDNFQ1x1RDU2OClcIilcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9ucyh7XG4gICAgICAgICAgICBnZW1pbmk6IFwiR29vZ2xlIEdlbWluaVwiLFxuICAgICAgICAgICAgb3BlbmFpOiBcIk9wZW5BSSBcdUQ2MzhcdUQ2NThcIixcbiAgICAgICAgICAgIG9sbGFtYTogXCJPbGxhbWEgKFx1Qjg1Q1x1Q0VFQylcIixcbiAgICAgICAgICAgIGN1c3RvbTogXCJcdUMwQUNcdUM2QTlcdUM3OTAgXHVDOUMwXHVDODE1XCJcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHZhbHVlIGFzIEFwaVByb3ZpZGVyO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgICAgIGNvbnN0IHByZXNldCA9IFBST1ZJREVSX1BSRVNFVFNbcHJvdmlkZXJdO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsID0gcHJlc2V0LmFwaVVybDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsID0gcHJlc2V0Lm1vZGVsO1xuICAgICAgICAgICAgYXBpVXJsSW5wdXQ/LnNldFZhbHVlKHByZXNldC5hcGlVcmwpO1xuICAgICAgICAgICAgbW9kZWxJbnB1dD8uc2V0VmFsdWUocHJlc2V0Lm1vZGVsKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJBUEkgVVJMXCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QzgxQ1x1QUNGNVx1QzBBQ1x1QkNDNCBcdUNDNDRcdUQzMDUgXHVDNUQ0XHVCNERDXHVEM0VDXHVDNzc4XHVEMkI4IFVSTFwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgYXBpVXJsSW5wdXQgPSB0ZXh0O1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiaHR0cDovL2xvY2FsaG9zdDoxMTQzNC92MS9jaGF0L2NvbXBsZXRpb25zXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaVVybClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlVcmwgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkFQSSBcdUQwQTRcIilcbiAgICAgIC5zZXREZXNjKFwiXHVENTQ0XHVDNjk0XHVENTVDIFx1QUNCRFx1QzZCMCBCZWFyZXIgXHVEMUEwXHVEMDcwIFx1QjYxMFx1QjI5NCBcdUM4MUNcdUFDRjVcdUMwQUMgXHVEMEE0XHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NC5cIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiXHVDMTIwXHVEMEREXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID09PSBcImdlbWluaVwiKSB7XG4gICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJHZW1pbmkgXHVCQUE4XHVCMzc4IFx1QkFBOVx1Qjg1RFwiKVxuICAgICAgICAuc2V0RGVzYyhcIkdvb2dsZVx1QzVEMFx1QzExQyBcdUM4MUNcdUFDRjVcdUQ1NThcdUIyOTQgXHVCQUE4XHVCMzc4XHVDNzQ0IFx1QkQ4OFx1QjdFQ1x1QzY0MCBcdUMxMjBcdUQwRERcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIilcbiAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJcdUJBQTlcdUI4NUQgXHVCRDg4XHVCN0VDXHVDNjI0XHVBRTMwXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkR2VtaW5pTW9kZWxzKCk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLmdlbWluaU1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgIC5zZXROYW1lKFwiR2VtaW5pIFx1QkFBOFx1QjM3OCBcdUMxMjBcdUQwRERcIilcbiAgICAgICAgICAuc2V0RGVzYyhcIlx1QkFBOVx1Qjg1RFx1QzVEMCBcdUM1QzZcdUIyOTQgXHVCQUE4XHVCMzc4XHVDNzQwIFx1QzU0NFx1Qjc5OFx1QzVEMFx1QzExQyBcdUM5QzFcdUM4MTEgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0LlwiKVxuICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdlbWluaU1vZGVscy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oXG4gICAgICAgICAgICAgIChhY2MsIG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBhY2NbbmFtZV0gPSBuYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgLmFkZE9wdGlvbnMob3B0aW9ucylcbiAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsKVxuICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBtb2RlbElucHV0Py5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUJBQThcdUIzNzhcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDODFDXHVBQ0Y1XHVDMEFDXHVCQ0M0IFx1QkFBOFx1QjM3OCBcdUM3NzRcdUI5ODQgKFx1QzlDMVx1QzgxMSBcdUM3ODVcdUI4MjUgXHVBQzAwXHVCMkE1KVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgbW9kZWxJbnB1dCA9IHRleHQ7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJncHQtNG8tbWluaVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiXHVDODFDXHVCQUE5IFx1QzBERFx1QzEzMSBcdUJBQThcdUIzNzhcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDMTM4XHVDMTU4L1x1QzgwMFx1QzdBNSBcdUM4MUNcdUJBQTkgXHVDMEREXHVDMTMxXHVDNUQwIFx1QzBBQ1x1QzZBOVx1RDU2MCBcdUJBQThcdUIzNzggKFx1QkU0NFx1QzVCNFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUFFMzBcdUJDRjggXHVCQUE4XHVCMzc4IFx1QzBBQ1x1QzZBOSlcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiZ3B0LTRvLW1pbmlcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVNb2RlbClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZU1vZGVsID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiXHVDMkRDXHVDMkE0XHVEMTVDIFx1RDUwNFx1Qjg2Q1x1RDUwNFx1RDJCOFwiKVxuICAgICAgLnNldERlc2MoXCJcdUJBQThcdUI0RTAgXHVDNjk0XHVDQ0FEXHVDNUQwIFx1RDNFQ1x1RDU2OFx1QjQyMCBcdUMyRENcdUMyQTRcdUQxNUMgXHVCQTU0XHVDMkRDXHVDOUMwXCIpXG4gICAgICAuYWRkVGV4dEFyZWEoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJcdUM2MDg6IFx1QjEwOFx1QjI5NCBPYnNpZGlhbiBcdUI5QUNcdUMxMUNcdUNFNTggXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XHVCMkU0LlwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1Qcm9tcHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtUHJvbXB0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUFFMzBcdUJDRjggXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NFwiKVxuICAgICAgLnNldERlc2MoXCJcdUIzMDBcdUQ2NTRcdUI5N0MgXHVDODAwXHVDN0E1XHVENTYwIFx1QUUzMFx1QkNGOCBcdUQzRjRcdUIzNTQgKFx1QkNGQ1x1RDJCOCBcdUFFMzBcdUM5MDApXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIlx1QzYwODogQ29udmVyc2F0aW9uc1wiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0T3V0cHV0Rm9sZGVyKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPdXRwdXRGb2xkZXIgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUJDMEYgXHVBQzgwXHVDMEM5IFx1QzEyNFx1QzgxNVwiIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1Qzc3OFx1QjM3MVx1QzJGMSBcdUQ2NUNcdUMxMzFcdUQ2NTRcIilcbiAgICAgIC5zZXREZXNjKFwiXHVCQ0ZDXHVEMkI4IFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUM3NzhcdUIzNzFcdUMyRjFcdUQ1NThcdUM1RUMgXHVCQ0ExXHVEMTMwIFx1QUM4MFx1QzBDOVx1Qzc0NCBcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuXCIpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleGluZ0VuYWJsZWQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhpbmdFbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUM4MDRcdUNDQjQgXHVCQ0ZDXHVEMkI4IFx1Qzc4NFx1QkNBMFx1QjUyOVwiKVxuICAgICAgLnNldERlc2MoXCJcdUJDRkNcdUQyQjhcdUM3NTggXHVCQUE4XHVCNEUwIFx1QjE3OFx1RDJCOFx1Qjk3QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQzBGIFx1Qzc3OFx1QjM3MVx1QzJGMVx1RDU2OVx1QjJDOFx1QjJFNC4gKFx1QzJEQ1x1QUMwNFx1Qzc3NCBcdUFDNzhcdUI5QjQgXHVDMjE4IFx1Qzc4OFx1Qzc0QylcIilcbiAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlx1QzgwNFx1Q0NCNCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkRDXHVDNzkxXCIpXG4gICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJcdUM5QzRcdUQ1ODkgXHVDOTExLi4uXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaW5kZXhWYXVsdEFsbCgpO1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiXHVDODA0XHVDQ0I0IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM2NDRcdUI4Q0MhXCIpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJcdUM4MDRcdUNDQjQgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzJEQ1x1Qzc5MVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1QzJFMFx1QUREQyBcdUIxNzhcdUQyQjhcdUI5Q0MgXHVDNzg0XHVCQ0EwXHVCNTI5XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QjlDOFx1QzlDMFx1QjlDOSBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDNzc0XHVENkM0IFx1QzBERFx1QzEzMVx1QjQxOFx1QUM3MFx1QjA5OCBcdUMyMThcdUM4MTVcdUI0MUMgXHVCMTc4XHVEMkI4XHVCOUNDIFx1Qzc4NFx1QkNBMFx1QjUyOVx1RDU2OVx1QjJDOFx1QjJFNC5cIilcbiAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlx1QzJFMFx1QUREQyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMkRDXHVDNzkxXCIpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJcdUM5QzRcdUQ1ODkgXHVDOTExLi4uXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaW5kZXhOZXdGaWxlc09ubHkoKTtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlx1QzJFMFx1QUREQyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNjQ0XHVCOENDIVwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiXHVDMkUwXHVBRERDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMyRENcdUM3OTFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUNDQURcdUQwNkMgXHVEMDZDXHVBRTMwXCIpXG4gICAgICAuc2V0RGVzYyhcIlx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUJEODRcdUQ1NjBcdUQ1NjAgXHVCNTRDIFx1QUMwMSBcdUNDQURcdUQwNkNcdUM3NTggXHVDRDVDXHVCMzAwIFx1RDFBMFx1RDA3MCBcdUMyMTggKFx1QUUzMFx1QkNGODogNDAwKVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCI0MDBcIilcbiAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmNodW5rU2l6ZSkpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2h1bmtTaXplID0gbnVtO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUNDQURcdUQwNkMgXHVDNjI0XHVCQzg0XHVCN0E5XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1Qzc3OFx1QzgxMVx1RDU1QyBcdUNDQURcdUQwNkMgXHVBQzA0IFx1QzkxMVx1QkNGNVx1QjQxOFx1QjI5NCBcdUQxQTBcdUQwNzAgXHVDMjE4IChcdUFFMzBcdUJDRjg6IDUwKVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCI1MFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2h1bmtPdmVybGFwKSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2h1bmtPdmVybGFwID0gbnVtO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUFDODBcdUMwQzkgXHVBQ0IwXHVBQ0ZDIFx1QzIxOCAoVG9wLUspXCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QUM4MFx1QzBDOSBcdUMyREMgXHVCQzE4XHVENjU4XHVENTYwIFx1Q0Q1Q1x1QjMwMCBcdUFDQjBcdUFDRkMgXHVDMjE4IChcdUFFMzBcdUJDRjg6IDgpXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjhcIilcbiAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnRvcEspKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvcEsgPSBudW07XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1QUM4MFx1QzBDOSBcdUM3MjBcdUMwQUNcdUIzQzQgXHVDNzg0XHVBQ0M0XHVBQzEyXCIpXG4gICAgICAuc2V0RGVzYyhcIlJBRyBcdUFDODBcdUMwQzkgXHVBQ0IwXHVBQ0ZDXHVCODVDIFx1Q0M0NFx1RDBERFx1RDU2MCBcdUNENUNcdUMxOEMgXHVDNzIwXHVDMEFDXHVCM0M0ICgwfjEsIFx1QUUzMFx1QkNGODogMC4zNSlcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMC4zNVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VhcmNoU2ltaWxhcml0eVRocmVzaG9sZCkpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4obnVtKSAmJiBudW0gPj0gMCAmJiBudW0gPD0gMSkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWFyY2hTaW1pbGFyaXR5VGhyZXNob2xkID0gbnVtO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUM4MDBcdUM3QTUgXHVDNzIwXHVDMEFDXHVCM0M0IFx1Qzc4NFx1QUNDNFx1QUMxMlwiKVxuICAgICAgLnNldERlc2MoXCJcdUIzMDBcdUQ2NTQgXHVDODAwXHVDN0E1IFx1QzJEQyBcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIFx1QUUzMFx1QzkwMCBcdUM3MjBcdUMwQUNcdUIzQzQgKDB+MSwgXHVBRTMwXHVCQ0Y4OiAwLjc1KVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIwLjc1XCIpXG4gICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlU2ltaWxhcml0eVRocmVzaG9sZCkpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4obnVtKSAmJiBudW0gPj0gMCAmJiBudW0gPD0gMSkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlU2ltaWxhcml0eVRocmVzaG9sZCA9IG51bTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMTI0XHVDODE1XCIgfSk7XG5cbiAgICBsZXQgZW1iZWRkaW5nTW9kZWxJbnB1dDogeyBzZXRWYWx1ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xuICAgIGxldCBlbWJlZGRpbmdBcGlVcmxJbnB1dDogeyBzZXRWYWx1ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgfSB8IG51bGwgPSBudWxsO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM4MUNcdUFDRjVcdUM3OTBcIilcbiAgICAgIC5zZXREZXNjKFwiXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVx1QzVEMCBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVDODFDXHVBQ0Y1XHVDNzkwXHVCOTdDIFx1QzEyMFx1RDBERFx1RDU1OFx1QzEzOFx1QzY5NFwiKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5hZGRPcHRpb25zKHtcbiAgICAgICAgICAgIGdlbWluaTogXCJHb29nbGUgR2VtaW5pIChBUEkpXCIsXG4gICAgICAgICAgICBvcGVuYWk6IFwiT3BlbkFJIChBUEkpXCIsXG4gICAgICAgICAgICBsb2NhbDogXCJcdUI4NUNcdUNFRUMgXHVCQUE4XHVCMzc4IChIdWdnaW5nRmFjZSlcIixcbiAgICAgICAgICAgIGN1c3RvbTogXCJcdUNFRTRcdUMyQTRcdUQxNDAgQVBJXCJcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdQcm92aWRlcilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHZhbHVlIGFzIEVtYmVkZGluZ1Byb3ZpZGVyO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgICAgIGNvbnN0IHByZXNldCA9IEVNQkVERElOR19QUkVTRVRTW3Byb3ZpZGVyXTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ01vZGVsID0gcHJlc2V0Lm1vZGVsO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nQXBpVXJsID0gcHJlc2V0LmFwaVVybCB8fCBcIlwiO1xuICAgICAgICAgICAgZW1iZWRkaW5nTW9kZWxJbnB1dD8uc2V0VmFsdWUocHJlc2V0Lm1vZGVsKTtcbiAgICAgICAgICAgIGVtYmVkZGluZ0FwaVVybElucHV0Py5zZXRWYWx1ZShwcmVzZXQuYXBpVXJsIHx8IFwiXCIpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ1Byb3ZpZGVyICE9PSBcImxvY2FsXCIpIHtcbiAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIlx1Qzc4NFx1QkNBMFx1QjUyOSBBUEkgVVJMXCIpXG4gICAgICAgIC5zZXREZXNjKFwiXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzY5NFx1Q0NBRCBcdUM1RDRcdUI0RENcdUQzRUNcdUM3NzhcdUQyQjggVVJMIChcdUJFNDRcdUM1QjRcdUM3ODhcdUM3M0NcdUJBNzQgXHVDODFDXHVBQ0Y1XHVDNzkwIFx1QUUzMFx1QkNGOFx1QUMxMiBcdUMwQUNcdUM2QTkpXCIpXG4gICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgZW1iZWRkaW5nQXBpVXJsSW5wdXQgPSB0ZXh0O1xuICAgICAgICAgIHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvZW1iZWRkaW5nc1wiKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkZGluZ0FwaVVybClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nQXBpVXJsID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nUHJvdmlkZXIgIT09IFwibG9jYWxcIikge1xuICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiXHVDNzg0XHVCQ0EwXHVCNTI5IEFQSSBcdUQwQTRcIilcbiAgICAgICAgLnNldERlc2MoXCJcdUM3ODRcdUJDQTBcdUI1MjkgQVBJIFx1RDBBNCAoXHVCRTQ0XHVDNUI0XHVDNzg4XHVDNzNDXHVCQTc0IExMTSBBUEkgXHVEMEE0IFx1QzBBQ1x1QzZBOSlcIilcbiAgICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgICAgdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiXHVDMTIwXHVEMEREXCIpXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nQXBpS2V5KVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdBcGlLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQUE4XHVCMzc4XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1QzBBQ1x1QzZBOVx1RDU2MCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQUE4XHVCMzc4XCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICBlbWJlZGRpbmdNb2RlbElucHV0ID0gdGV4dDtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIlx1QkFBOFx1QjM3OFx1QkE4NVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdNb2RlbClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdNb2RlbCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRHZW1pbmlNb2RlbHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgYXBpS2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5LnRyaW0oKTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgbmV3IE5vdGljZShcIkdlbWluaSBBUEkgXHVEMEE0XHVCOTdDIFx1QkEzQ1x1QzgwMCBcdUM3ODVcdUI4MjVcdUQ1NzQgXHVDOEZDXHVDMTM4XHVDNjk0LlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgdXJsOiBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscz9rZXk9JHthcGlLZXl9YFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhc1xuICAgICAgICB8IHsgbW9kZWxzPzogQXJyYXk8eyBuYW1lPzogc3RyaW5nOyBzdXBwb3J0ZWRHZW5lcmF0aW9uTWV0aG9kcz86IHN0cmluZ1tdIH0+IH1cbiAgICAgICAgfCB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBtb2RlbHMgPSBkYXRhPy5tb2RlbHMgPz8gW107XG4gICAgICB0aGlzLmdlbWluaU1vZGVscyA9IG1vZGVsc1xuICAgICAgICAuZmlsdGVyKChtb2RlbCkgPT4gbW9kZWwuc3VwcG9ydGVkR2VuZXJhdGlvbk1ldGhvZHM/LmluY2x1ZGVzKFwiZ2VuZXJhdGVDb250ZW50XCIpKVxuICAgICAgICAubWFwKChtb2RlbCkgPT4gbW9kZWwubmFtZSlcbiAgICAgICAgLmZpbHRlcigobmFtZSk6IG5hbWUgaXMgc3RyaW5nID0+IEJvb2xlYW4obmFtZSkpO1xuXG4gICAgICBpZiAodGhpcy5nZW1pbmlNb2RlbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdUMwQUNcdUM2QTkgXHVBQzAwXHVCMkE1XHVENTVDIEdlbWluaSBcdUJBQThcdUIzNzhcdUM3NDQgXHVDQzNFXHVDOUMwIFx1QkFCQlx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKFwiR2VtaW5pIFx1QkFBOFx1QjM3OCBcdUJBQTlcdUI4NURcdUM3NDQgXHVCRDg4XHVCN0VDXHVDNjU0XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYEdlbWluaSBcdUJBQThcdUIzNzggXHVCQUE5XHVCODVEIFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBNYXJrZG93blJlbmRlcmVyLCBOb3RpY2UsIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgQXNzaXN0YW50R2VuZXJhdGlvbkxvZywgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gXCIuLi9jb252ZXJzYXRpb25cIjtcbmltcG9ydCB0eXBlIHsgQXNzaXN0YW50VG9rZW5Vc2FnZSwgUGx1Z2luQ2hhdEFwaSB9IGZyb20gXCIuLi9wbHVnaW5BcGlcIjtcbmltcG9ydCB7IFRvcGljU2VwYXJhdGlvbkVuZ2luZSB9IGZyb20gXCIuLi90b3BpY1NlcGFyYXRpb25cIjtcbmltcG9ydCB7IHNhdmVTZWdtZW50c0FzTm90ZXMgfSBmcm9tIFwiLi4vdG9waWNTZXBhcmF0aW9uXCI7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfT1ZMX0NIQVQgPSBcIm92bC1jaGF0LXZpZXdcIjtcblxuZXhwb3J0IGNsYXNzIENoYXRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwcml2YXRlIHJlYWRvbmx5IHBsdWdpbjogUGx1Z2luQ2hhdEFwaTtcbiAgcHJpdmF0ZSBtZXNzYWdlczogQ29udmVyc2F0aW9uVHVybltdID0gW107XG4gIHByaXZhdGUgbWVzc2FnZXNFbDogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnB1dEVsOiBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2VuZEJ1dHRvbkVsOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0b3BCdXR0b25FbDogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB2YXVsdFNlYXJjaEJ1dHRvbkVsOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhpc3RvcnlTZWxlY3RFbDogSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBkZWxldGVTZXNzaW9uQnV0dG9uRWw6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2F2ZUJ1dHRvbkVsOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG5ld1Nlc3Npb25CdXR0b25FbDogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZXNzaW9uSWRFbDogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNob3dTb3VyY2VzQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhY3RpdmVBYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0cmVhbWluZ01lc3NhZ2VFbDogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdHJlYW1pbmdDb250ZW50RWw6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RyZWFtaW5nVHVybjogQ29udmVyc2F0aW9uVHVybiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzQXBwbHlpbmdMb2FkZWRTZXNzaW9uOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc3VwcHJlc3NIaXN0b3J5U2VsZWN0aW9uQ2hhbmdlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBQbHVnaW5DaGF0QXBpKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfT1ZMX0NIQVQ7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIk9WTCBcdUIzMDBcdUQ2NTRcIjtcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJtZXNzYWdlLWNpcmNsZVwiO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcIm92bC1jaGF0LXZpZXdcIik7XG5cbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC1oZWFkZXJcIiB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC10aXRsZVwiLCB0ZXh0OiBcIk9WTCBcdUIzMDBcdUQ2NTRcIiB9KTtcblxuICAgIGNvbnN0IHNlc3Npb25XcmFwRWwgPSBoZWFkZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC1zZXNzaW9uXCIgfSk7XG4gICAgc2Vzc2lvbldyYXBFbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlx1QzgxQ1x1QkFBOVwiIH0pO1xuICAgIGNvbnN0IHNlc3Npb25JbnB1dEVsID0gc2Vzc2lvbldyYXBFbC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIgfSk7XG4gICAgc2Vzc2lvbklucHV0RWwudmFsdWUgPSB0aGlzLmJ1aWxkU2Vzc2lvbklkKCk7XG4gICAgdGhpcy5zZXNzaW9uSWRFbCA9IHNlc3Npb25JbnB1dEVsO1xuXG4gICAgY29uc3QgY29udHJvbHNFbCA9IGhlYWRlckVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm92bC1jaGF0LWNvbnRyb2xzXCIgfSk7XG5cbiAgICBjb25zdCBzaG93U291cmNlc0xhYmVsID0gY29udHJvbHNFbC5jcmVhdGVFbChcImxhYmVsXCIsIHsgY2xzOiBcIm92bC1zb3VyY2Utb3B0aW9uXCIgfSk7XG4gICAgY29uc3Qgc2hvd1NvdXJjZXNDaGVja2JveCA9IHNob3dTb3VyY2VzTGFiZWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwiY2hlY2tib3hcIiB9KTtcbiAgICBzaG93U291cmNlc0NoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICBzaG93U291cmNlc0xhYmVsLmFwcGVuZFRleHQoXCIgXHVDMThDXHVDMkE0XHVCOUNDIFx1QkNGNFx1QUUzMFwiKTtcbiAgICB0aGlzLnNob3dTb3VyY2VzQ2hlY2tib3ggPSBzaG93U291cmNlc0NoZWNrYm94O1xuXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbkVsID0gY29udHJvbHNFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHVDODAwXHVDN0E1XCIsIGNsczogXCJvdmwtY2hhdC1idXR0b25cIiB9KTtcbiAgICBzYXZlQnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHZvaWQgdGhpcy5oYW5kbGVTYXZlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5zYXZlQnV0dG9uRWwgPSBzYXZlQnV0dG9uRWw7XG5cbiAgICBjb25zdCBuZXdTZXNzaW9uQnV0dG9uRWwgPSBjb250cm9sc0VsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUMwQzggXHVDMTM4XHVDMTU4XCIsIGNsczogXCJvdmwtY2hhdC1idXR0b25cIiB9KTtcbiAgICBuZXdTZXNzaW9uQnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHZvaWQgdGhpcy5oYW5kbGVTdGFydE5ld1Nlc3Npb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLm5ld1Nlc3Npb25CdXR0b25FbCA9IG5ld1Nlc3Npb25CdXR0b25FbDtcblxuICAgIGNvbnN0IGhpc3RvcnlTZWxlY3RFbCA9IGNvbnRyb2xzRWwuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwib3ZsLXNlc3Npb24tc2VsZWN0XCIgfSk7XG4gICAgaGlzdG9yeVNlbGVjdEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLmhhbmRsZUhpc3RvcnlTZWxlY3Rpb25DaGFuZ2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLmhpc3RvcnlTZWxlY3RFbCA9IGhpc3RvcnlTZWxlY3RFbDtcblxuICAgIGNvbnN0IGRlbGV0ZVNlc3Npb25CdXR0b25FbCA9IGNvbnRyb2xzRWwuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcInhcIiwgY2xzOiBcIm92bC1jaGF0LWJ1dHRvblwiIH0pO1xuICAgIGRlbGV0ZVNlc3Npb25CdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLmhhbmRsZURlbGV0ZVNlbGVjdGVkU2Vzc2lvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuZGVsZXRlU2Vzc2lvbkJ1dHRvbkVsID0gZGVsZXRlU2Vzc2lvbkJ1dHRvbkVsO1xuXG4gICAgY29uc3QgbWVzc2FnZXNFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC1tZXNzYWdlc1wiIH0pO1xuICAgIHRoaXMubWVzc2FnZXNFbCA9IG1lc3NhZ2VzRWw7XG5cbiAgICBjb25zdCBpbnB1dFdyYXBFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvdmwtY2hhdC1pbnB1dFwiIH0pO1xuICAgIGNvbnN0IHRleHRhcmVhRWwgPSBpbnB1dFdyYXBFbC5jcmVhdGVFbChcInRleHRhcmVhXCIpO1xuICAgIHRleHRhcmVhRWwucGxhY2Vob2xkZXIgPSBcIlx1QkE1NFx1QzJEQ1x1QzlDMFx1Qjk3QyBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTQuIChDdHJsK0VudGVyIFx1QzgwNFx1QzFBMSlcIjtcbiAgICB0aGlzLmlucHV0RWwgPSB0ZXh0YXJlYUVsO1xuXG4gICAgY29uc3QgYWN0aW9uV3JhcEVsID0gaW5wdXRXcmFwRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3ZsLWNoYXQtYWN0aW9uc1wiIH0pO1xuICAgIGNvbnN0IHZhdWx0U2VhcmNoQnV0dG9uRWwgPSBhY3Rpb25XcmFwRWwuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdGV4dDogXCJcdUJDRkNcdUQyQjggXHVBQzgwXHVDMEM5IFx1QjJGNVx1QkNDMFwiLFxuICAgICAgY2xzOiBcIm92bC1jaGF0LWJ1dHRvblwiXG4gICAgfSk7XG4gICAgdmF1bHRTZWFyY2hCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLmhhbmRsZVNlbmQodHJ1ZSk7XG4gICAgfSk7XG4gICAgdGhpcy52YXVsdFNlYXJjaEJ1dHRvbkVsID0gdmF1bHRTZWFyY2hCdXR0b25FbDtcblxuICAgIGNvbnN0IHNlbmRCdXR0b25FbCA9IGFjdGlvbldyYXBFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHVDODA0XHVDMUExXCIsIGNsczogXCJvdmwtY2hhdC1idXR0b25cIiB9KTtcbiAgICBzZW5kQnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHZvaWQgdGhpcy5oYW5kbGVTZW5kKGZhbHNlKTtcbiAgICB9KTtcbiAgICB0aGlzLnNlbmRCdXR0b25FbCA9IHNlbmRCdXR0b25FbDtcblxuICAgIGNvbnN0IHN0b3BCdXR0b25FbCA9IGFjdGlvbldyYXBFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHVDOTExXHVCMkU4XCIsIGNsczogXCJvdmwtY2hhdC1idXR0b25cIiB9KTtcbiAgICBzdG9wQnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHN0b3BCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVTdG9wU3RyZWFtaW5nKCk7XG4gICAgfSk7XG4gICAgdGhpcy5zdG9wQnV0dG9uRWwgPSBzdG9wQnV0dG9uRWw7XG5cbiAgICB0ZXh0YXJlYUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiICYmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZvaWQgdGhpcy5oYW5kbGVTZW5kKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMucmVmcmVzaEhpc3RvcnlEcm9wZG93bigpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFNlc3Npb25JZCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgXCItXCIpO1xuICAgIHJldHVybiBgc2Vzc2lvbi0ke3N0YW1wfWA7XG4gIH1cblxuICBwcml2YXRlIHNldEJ1c3lTdGF0ZShzdGF0ZToge1xuICAgIGlzQnVzeTogYm9vbGVhbjtcbiAgICBzZW5kTG9hZGluZz86IGJvb2xlYW47XG4gICAgdmF1bHRTZWFyY2hMb2FkaW5nPzogYm9vbGVhbjtcbiAgICBzYXZlTG9hZGluZz86IGJvb2xlYW47XG4gICAgc3RvcEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGRpc2FibGVIaXN0b3J5QWN0aW9ucz86IGJvb2xlYW47XG4gIH0pOiB2b2lkIHtcbiAgICBjb25zdCBzZW5kTG9hZGluZyA9IHN0YXRlLnNlbmRMb2FkaW5nID8/IGZhbHNlO1xuICAgIGNvbnN0IHZhdWx0U2VhcmNoTG9hZGluZyA9IHN0YXRlLnZhdWx0U2VhcmNoTG9hZGluZyA/PyBmYWxzZTtcbiAgICBjb25zdCBzYXZlTG9hZGluZyA9IHN0YXRlLnNhdmVMb2FkaW5nID8/IGZhbHNlO1xuICAgIGNvbnN0IHN0b3BFbmFibGVkID0gc3RhdGUuc3RvcEVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgZGlzYWJsZUhpc3RvcnlBY3Rpb25zID0gc3RhdGUuZGlzYWJsZUhpc3RvcnlBY3Rpb25zID8/IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuc2VuZEJ1dHRvbkVsKSB7XG4gICAgICB0aGlzLnNlbmRCdXR0b25FbC5kaXNhYmxlZCA9IHN0YXRlLmlzQnVzeTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbkVsLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1sb2FkaW5nXCIsIHNlbmRMb2FkaW5nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudmF1bHRTZWFyY2hCdXR0b25FbCkge1xuICAgICAgdGhpcy52YXVsdFNlYXJjaEJ1dHRvbkVsLmRpc2FibGVkID0gc3RhdGUuaXNCdXN5O1xuICAgICAgdGhpcy52YXVsdFNlYXJjaEJ1dHRvbkVsLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1sb2FkaW5nXCIsIHZhdWx0U2VhcmNoTG9hZGluZyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNhdmVCdXR0b25FbCkge1xuICAgICAgdGhpcy5zYXZlQnV0dG9uRWwuZGlzYWJsZWQgPSBzdGF0ZS5pc0J1c3k7XG4gICAgICB0aGlzLnNhdmVCdXR0b25FbC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtbG9hZGluZ1wiLCBzYXZlTG9hZGluZyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm5ld1Nlc3Npb25CdXR0b25FbCkge1xuICAgICAgdGhpcy5uZXdTZXNzaW9uQnV0dG9uRWwuZGlzYWJsZWQgPSBzdGF0ZS5pc0J1c3k7XG4gICAgfVxuICAgIGlmICh0aGlzLmhpc3RvcnlTZWxlY3RFbCkge1xuICAgICAgdGhpcy5oaXN0b3J5U2VsZWN0RWwuZGlzYWJsZWQgPSBzdGF0ZS5pc0J1c3kgfHwgZGlzYWJsZUhpc3RvcnlBY3Rpb25zO1xuICAgIH1cbiAgICBpZiAodGhpcy5kZWxldGVTZXNzaW9uQnV0dG9uRWwpIHtcbiAgICAgIHRoaXMuZGVsZXRlU2Vzc2lvbkJ1dHRvbkVsLmRpc2FibGVkID0gc3RhdGUuaXNCdXN5IHx8IGRpc2FibGVIaXN0b3J5QWN0aW9ucztcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RvcEJ1dHRvbkVsKSB7XG4gICAgICB0aGlzLnN0b3BCdXR0b25FbC5kaXNhYmxlZCA9ICFzdG9wRW5hYmxlZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5wdXRFbCkge1xuICAgICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gc3RhdGUuaXNCdXN5O1xuICAgIH1cbiAgICBpZiAoc3RhdGUuaXNCdXN5KSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcyhcIm92bC1jaGF0LWJ1c3lcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udGVudEVsLnJlbW92ZUNsYXNzKFwib3ZsLWNoYXQtYnVzeVwiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFwcGVuZE1lc3NhZ2UodHVybjogQ29udmVyc2F0aW9uVHVybik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMubWVzc2FnZXMucHVzaCh0dXJuKTtcbiAgICBpZiAoIXRoaXMubWVzc2FnZXNFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMubWVzc2FnZXNFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IGBvdmwtY2hhdC1tZXNzYWdlIG92bC1jaGF0LSR7dHVybi5yb2xlfWBcbiAgICB9KTtcbiAgICBtZXNzYWdlRWwuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcIm92bC1jaGF0LXJvbGVcIixcbiAgICAgIHRleHQ6IHRoaXMuZ2V0Um9sZUxhYmVsKHR1cm4ucm9sZSlcbiAgICB9KTtcbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcIm92bC1jaGF0LWNvbnRlbnQgbWFya2Rvd24tcHJldmlldy12aWV3IG1hcmtkb3duLXJlbmRlcmVkXCJcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bih0dXJuLmNvbnRlbnQsIGNvbnRlbnRFbCwgXCJcIiwgdGhpcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgY29udGVudEVsLnNldFRleHQoYFx1QjgwQ1x1QjM1NFx1QjlDMSBcdUMyRTRcdUQzMjg6ICR7ZmFsbGJhY2t9YCk7XG4gICAgfVxuICAgIGlmICh0dXJuLnRpbWVzdGFtcCkge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gdHlwZW9mIHR1cm4udGltZXN0YW1wID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gdHVybi50aW1lc3RhbXBcbiAgICAgICAgOiB0dXJuLnRpbWVzdGFtcC50b0lTT1N0cmluZygpO1xuICAgICAgbWVzc2FnZUVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgY2xzOiBcIm92bC1jaGF0LXRpbWVzdGFtcFwiLFxuICAgICAgICB0ZXh0OiB0aW1lc3RhbXBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0dXJuLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgJiYgdHVybi5nZW5lcmF0aW9uTG9nKSB7XG4gICAgICB0aGlzLnJlbmRlckdlbmVyYXRpb25Mb2dDb250cm9scyhtZXNzYWdlRWwsIHR1cm4uZ2VuZXJhdGlvbkxvZyk7XG4gICAgfVxuXG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Q3VycmVudFNlc3Npb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU3RyZWFtaW5nQXNzaXN0YW50TWVzc2FnZSgpOiB2b2lkIHtcbiAgICBjb25zdCB0dXJuOiBDb252ZXJzYXRpb25UdXJuID0ge1xuICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKHR1cm4pO1xuICAgIHRoaXMuc3RyZWFtaW5nVHVybiA9IHR1cm47XG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZXNFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMubWVzc2FnZXNFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwib3ZsLWNoYXQtbWVzc2FnZSBvdmwtY2hhdC1hc3Npc3RhbnRcIlxuICAgIH0pO1xuICAgIG1lc3NhZ2VFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwib3ZsLWNoYXQtcm9sZVwiLFxuICAgICAgdGV4dDogdGhpcy5nZXRSb2xlTGFiZWwoXCJhc3Npc3RhbnRcIilcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwib3ZsLWNoYXQtY29udGVudCBtYXJrZG93bi1wcmV2aWV3LXZpZXcgbWFya2Rvd24tcmVuZGVyZWRcIlxuICAgIH0pO1xuICAgIGNvbnRlbnRFbC5zZXRUZXh0KFwiXCIpO1xuXG4gICAgY29uc3QgdGltZXN0YW1wID0gdHVybi50aW1lc3RhbXBcbiAgICAgID8gKHR5cGVvZiB0dXJuLnRpbWVzdGFtcCA9PT0gXCJzdHJpbmdcIiA/IHR1cm4udGltZXN0YW1wIDogdHVybi50aW1lc3RhbXAudG9JU09TdHJpbmcoKSlcbiAgICAgIDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgbWVzc2FnZUVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJvdmwtY2hhdC10aW1lc3RhbXBcIixcbiAgICAgIHRleHQ6IHRpbWVzdGFtcFxuICAgIH0pO1xuXG4gICAgdGhpcy5zdHJlYW1pbmdNZXNzYWdlRWwgPSBtZXNzYWdlRWw7XG4gICAgdGhpcy5zdHJlYW1pbmdDb250ZW50RWwgPSBjb250ZW50RWw7XG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0cmVhbWluZ0Fzc2lzdGFudE1lc3NhZ2UodG9rZW46IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdHJlYW1pbmdUdXJuIHx8ICF0aGlzLnN0cmVhbWluZ0NvbnRlbnRFbCB8fCAhdG9rZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnN0cmVhbWluZ1R1cm4uY29udGVudCArPSB0b2tlbjtcbiAgICB0aGlzLnN0cmVhbWluZ0NvbnRlbnRFbC5zZXRUZXh0KHRoaXMuc3RyZWFtaW5nVHVybi5jb250ZW50KTtcblxuICAgIGlmICh0aGlzLm1lc3NhZ2VzRWwpIHtcbiAgICAgIHRoaXMubWVzc2FnZXNFbC5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsSGVpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmluYWxpemVTdHJlYW1pbmdBc3Npc3RhbnRNZXNzYWdlKGZpbmFsQ29udGVudD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zdHJlYW1pbmdUdXJuIHx8ICF0aGlzLnN0cmVhbWluZ0NvbnRlbnRFbCkge1xuICAgICAgdGhpcy5jbGVhclN0cmVhbWluZ01lc3NhZ2VTdGF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZmluYWxDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1R1cm4uY29udGVudCA9IGZpbmFsQ29udGVudDtcbiAgICB9XG5cbiAgICB0aGlzLnN0cmVhbWluZ0NvbnRlbnRFbC5lbXB0eSgpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKHRoaXMuc3RyZWFtaW5nVHVybi5jb250ZW50LCB0aGlzLnN0cmVhbWluZ0NvbnRlbnRFbCwgXCJcIiwgdGhpcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdDb250ZW50RWwuc2V0VGV4dChgXHVCODBDXHVCMzU0XHVCOUMxIFx1QzJFNFx1RDMyODogJHtmYWxsYmFja31gKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJlYW1pbmdNZXNzYWdlRWwgJiYgdGhpcy5zdHJlYW1pbmdUdXJuLmdlbmVyYXRpb25Mb2cpIHtcbiAgICAgIHRoaXMucmVuZGVyR2VuZXJhdGlvbkxvZ0NvbnRyb2xzKHRoaXMuc3RyZWFtaW5nTWVzc2FnZUVsLCB0aGlzLnN0cmVhbWluZ1R1cm4uZ2VuZXJhdGlvbkxvZyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWVzc2FnZXNFbCkge1xuICAgICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Q3VycmVudFNlc3Npb24oKTtcblxuICAgIHRoaXMuY2xlYXJTdHJlYW1pbmdNZXNzYWdlU3RhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3RyZWFtaW5nQXNzaXN0YW50TWVzc2FnZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdHJlYW1pbmdUdXJuKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMubWVzc2FnZXMuaW5kZXhPZih0aGlzLnN0cmVhbWluZ1R1cm4pO1xuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc3RyZWFtaW5nTWVzc2FnZUVsPy5yZW1vdmUoKTtcbiAgICB0aGlzLmNsZWFyU3RyZWFtaW5nTWVzc2FnZVN0YXRlKCk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyU3RyZWFtaW5nTWVzc2FnZVN0YXRlKCk6IHZvaWQge1xuICAgIHRoaXMuc3RyZWFtaW5nVHVybiA9IG51bGw7XG4gICAgdGhpcy5zdHJlYW1pbmdNZXNzYWdlRWwgPSBudWxsO1xuICAgIHRoaXMuc3RyZWFtaW5nQ29udGVudEVsID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlU3RvcFN0cmVhbWluZygpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZUFib3J0Q29udHJvbGxlcj8uYWJvcnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNBYm9ydEVycm9yKGVycm9yOiB1bmtub3duKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgKGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiIHx8IC9cdUM5MTFcdUIyRTh8YWJvcnQvaS50ZXN0KGVycm9yLm1lc3NhZ2UpKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Um9sZUxhYmVsKHJvbGU6IENvbnZlcnNhdGlvblR1cm5bXCJyb2xlXCJdKTogc3RyaW5nIHtcbiAgICBpZiAocm9sZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgIHJldHVybiBcIlx1QzBBQ1x1QzZBOVx1Qzc5MFwiO1xuICAgIH1cbiAgICBpZiAocm9sZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgcmV0dXJuIFwiXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCI7XG4gICAgfVxuICAgIHJldHVybiBcIlx1QzJEQ1x1QzJBNFx1RDE1Q1wiO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTZW5kKHVzZVJhZzogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbnB1dEVsPy52YWx1ZS50cmltKCkgPz8gXCJcIjtcbiAgICBpZiAoIWlucHV0KSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHVCQTU0XHVDMkRDXHVDOUMwXHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzRmlyc3RRdWVzdGlvbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoID09PSAwO1xuXG4gICAgYXdhaXQgdGhpcy5hcHBlbmRNZXNzYWdlKHtcbiAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgY29udGVudDogaW5wdXQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICAgIGlmICh0aGlzLmlucHV0RWwpIHtcbiAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKGlzRmlyc3RRdWVzdGlvbikge1xuICAgICAgdm9pZCB0aGlzLmdlbmVyYXRlU2Vzc2lvblRpdGxlRnJvbVF1ZXN0aW9uKGlucHV0KTtcbiAgICB9XG5cbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgdGhpcy5hY3RpdmVBYm9ydENvbnRyb2xsZXIgPSBhYm9ydENvbnRyb2xsZXI7XG5cbiAgICB0aGlzLnNldEJ1c3lTdGF0ZSh7XG4gICAgICBpc0J1c3k6IHRydWUsXG4gICAgICBzZW5kTG9hZGluZzogIXVzZVJhZyxcbiAgICAgIHZhdWx0U2VhcmNoTG9hZGluZzogdXNlUmFnLFxuICAgICAgc3RvcEVuYWJsZWQ6IHRydWVcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2hvd1NvdXJjZXNPbmx5ID0gdGhpcy5zaG93U291cmNlc0NoZWNrYm94Py5jaGVja2VkID8/IGZhbHNlO1xuXG4gICAgICBsZXQgcmVwbHk6IHN0cmluZztcbiAgICAgIGxldCByZXF1ZXN0VHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSB8IG51bGwgPSBudWxsO1xuXG4gICAgICBpZiAodXNlUmFnICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4aW5nRW5hYmxlZCkge1xuICAgICAgICAvLyBSQUcgXHVDMEFDXHVDNkE5OiBcdUFDODBcdUMwQzkgXHVENkM0IFx1Q0VFOFx1RDE0RFx1QzJBNFx1RDJCOCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gYXdhaXQgdGhpcy5wbHVnaW4uc2VhcmNoKGlucHV0KTtcbiAgICAgICAgICBjb25zdCByZWxldmFudFJlc3VsdHMgPSB0aGlzLmZpbHRlclJlbGV2YW50U2VhcmNoUmVzdWx0cyhzZWFyY2hSZXN1bHRzKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocmVsZXZhbnRSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHNob3dTb3VyY2VzT25seSkge1xuICAgICAgICAgICAgICByZXBseSA9IFwiXHVDOUM4XHVCQjM4XHVBQ0ZDIFx1QzcyMFx1QzBBQ1x1RDU1QyBcdUIxNzhcdUQyQjhcdUI5N0MgXHVDQzNFXHVDOUMwIFx1QkFCQlx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcXVlc3RUdXJucyA9IHRoaXMubWVzc2FnZXM7XG4gICAgICAgICAgICAgIHJlcGx5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHNob3dTb3VyY2VzT25seSkge1xuICAgICAgICAgICAgLy8gXHVDMThDXHVDMkE0XHVCOUNDIFx1RDQ1Q1x1QzJEQ1xuICAgICAgICAgICAgcmVwbHkgPSB0aGlzLmZvcm1hdFNlYXJjaFJlc3VsdHMocmVsZXZhbnRSZXN1bHRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVBQzgwXHVDMEM5IFx1QUNCMFx1QUNGQ1x1Qjk3QyBcdUNFRThcdUQxNERcdUMyQTRcdUQyQjhcdUI4NUMgTExNXHVDNUQwIFx1QzgwNFx1QjJFQ1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuYnVpbGRDb250ZXh0KHJlbGV2YW50UmVzdWx0cyk7XG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlZE1lc3NhZ2VzID0gdGhpcy5idWlsZEVuaGFuY2VkTWVzc2FnZXMoaW5wdXQsIGNvbnRleHQpO1xuICAgICAgICAgICAgcmVxdWVzdFR1cm5zID0gZW5oYW5jZWRNZXNzYWdlcztcbiAgICAgICAgICAgIHJlcGx5ID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlJBRyBcdUFDODBcdUMwQzkgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1QUM4MFx1QzBDOVx1QzVEMCBcdUMyRTRcdUQzMjhcdUQ1NThcdUM1RUMgXHVDNzdDXHVCQzE4IFx1QkFBOFx1QjREQ1x1Qjg1QyBcdUM4MDRcdUQ2NThcdUQ1NjlcdUIyQzhcdUIyRTRcIik7XG4gICAgICAgICAgcmVxdWVzdFR1cm5zID0gdGhpcy5tZXNzYWdlcztcbiAgICAgICAgICByZXBseSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1Qzc3Q1x1QkMxOCBcdUJBQThcdUI0RENcbiAgICAgICAgcmVxdWVzdFR1cm5zID0gdGhpcy5tZXNzYWdlcztcbiAgICAgICAgcmVwbHkgPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVxdWVzdFR1cm5zKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlU3RyZWFtaW5nQXNzaXN0YW50TWVzc2FnZSgpO1xuICAgICAgICBjb25zdCBzdGFydGVkQXRNcyA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBsYXRlc3RVc2FnZTogQXNzaXN0YW50VG9rZW5Vc2FnZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0cmVhbWVkUmVwbHkgPSBcIlwiO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcGx5ID0gYXdhaXQgdGhpcy5wbHVnaW4ucmVxdWVzdEFzc2lzdGFudFJlcGx5U3RyZWFtKHJlcXVlc3RUdXJucywge1xuICAgICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgb25Ub2tlbjogKHRva2VuKSA9PiB7XG4gICAgICAgICAgICAgIHN0cmVhbWVkUmVwbHkgKz0gdG9rZW47XG4gICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyZWFtaW5nQXNzaXN0YW50TWVzc2FnZSh0b2tlbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Vc2FnZTogKHVzYWdlKSA9PiB7XG4gICAgICAgICAgICAgIGxhdGVzdFVzYWdlID0gdXNhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFyZXBseSkge1xuICAgICAgICAgICAgcmVwbHkgPSBzdHJlYW1lZFJlcGx5O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnN0cmVhbWluZ1R1cm4pIHtcbiAgICAgICAgICAgIHRoaXMuc3RyZWFtaW5nVHVybi5nZW5lcmF0aW9uTG9nID0gdGhpcy5idWlsZEFzc2lzdGFudEdlbmVyYXRpb25Mb2coe1xuICAgICAgICAgICAgICByZXF1ZXN0VHVybnMsXG4gICAgICAgICAgICAgIHJlcGx5LFxuICAgICAgICAgICAgICBzdGFydGVkQXRNcyxcbiAgICAgICAgICAgICAgY29tcGxldGVkQXRNczogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgdXNhZ2U6IGxhdGVzdFVzYWdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCB0aGlzLmZpbmFsaXplU3RyZWFtaW5nQXNzaXN0YW50TWVzc2FnZShyZXBseSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgcGFydGlhbFJlcGx5ID0gc3RyZWFtZWRSZXBseSB8fCB0aGlzLnN0cmVhbWluZ1R1cm4/LmNvbnRlbnQgfHwgXCJcIjtcbiAgICAgICAgICBpZiAocGFydGlhbFJlcGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW1pbmdUdXJuKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RyZWFtaW5nVHVybi5nZW5lcmF0aW9uTG9nID0gdGhpcy5idWlsZEFzc2lzdGFudEdlbmVyYXRpb25Mb2coe1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUdXJucyxcbiAgICAgICAgICAgICAgICByZXBseTogcGFydGlhbFJlcGx5LFxuICAgICAgICAgICAgICAgIHN0YXJ0ZWRBdE1zLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZEF0TXM6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgdXNhZ2U6IGxhdGVzdFVzYWdlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5hbGl6ZVN0cmVhbWluZ0Fzc2lzdGFudE1lc3NhZ2UocGFydGlhbFJlcGx5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTdHJlYW1pbmdBc3Npc3RhbnRNZXNzYWdlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuaXNBYm9ydEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlx1Qzc1MVx1QjJGNSBcdUMwRERcdUMxMzFcdUM3NDQgXHVDOTExXHVCMkU4XHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwZW5kTWVzc2FnZSh7XG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICBjb250ZW50OiByZXBseSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1QjMwMFx1RDY1NCBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5hY3RpdmVBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgdGhpcy5zZXRCdXN5U3RhdGUoeyBpc0J1c3k6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZmlsdGVyUmVsZXZhbnRTZWFyY2hSZXN1bHRzKHNlYXJjaFJlc3VsdHM6IGFueVtdKTogYW55W10ge1xuICAgIGNvbnN0IHRocmVzaG9sZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNlYXJjaFNpbWlsYXJpdHlUaHJlc2hvbGQ7XG4gICAgcmV0dXJuIHNlYXJjaFJlc3VsdHMuZmlsdGVyKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnN0IHNjb3JlID0gTnVtYmVyKHJlc3VsdD8uc2NvcmUpO1xuICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2NvcmUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzY29yZSA+PSB0aHJlc2hvbGQ7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ29udGV4dChzZWFyY2hSZXN1bHRzOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgaWYgKHNlYXJjaFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJcdUFEMDBcdUI4MjggXHVCQjM4XHVDMTFDXHVCOTdDIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiO1xuICAgIH1cblxuICAgIGxldCBjb250ZXh0ID0gXCJcdUIyRTRcdUM3NENcdUM3NDAgXHVBQzgwXHVDMEM5XHVCNDFDIFx1QUQwMFx1QjgyOCBcdUJCMzhcdUMxMUNcdUI0RTRcdUM3ODVcdUIyQzhcdUIyRTQ6XFxuXFxuXCI7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hSZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzZWFyY2hSZXN1bHRzW2ldO1xuICAgICAgY29uc3QgeyBjaHVuaywgbm90ZSwgc2NvcmUgfSA9IHJlc3VsdDtcbiAgICAgIFxuICAgICAgY29udGV4dCArPSBgIyMgXHVCQjM4XHVDMTFDICR7aSArIDF9OiAke25vdGUudGl0bGV9XFxuYDtcbiAgICAgIGNvbnRleHQgKz0gYC0gXHVEMzBDXHVDNzdDOiAke25vdGUucGF0aH1cXG5gO1xuICAgICAgY29udGV4dCArPSBgLSBcdUMxMzlcdUMxNTg6ICR7Y2h1bmsuc2VjdGlvbiB8fCBcIlx1QkNGOFx1QkIzOFwifVxcbmA7XG4gICAgICBjb250ZXh0ICs9IGAtIFx1QzcyMFx1QzBBQ1x1QjNDNDogJHsoc2NvcmUgKiAxMDApLnRvRml4ZWQoMSl9JVxcblxcbmA7XG4gICAgICBjb250ZXh0ICs9IGAke2NodW5rLnRleHR9XFxuXFxuYDtcbiAgICAgIGNvbnRleHQgKz0gXCItLS1cXG5cXG5cIjtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0U2VhcmNoUmVzdWx0cyhzZWFyY2hSZXN1bHRzOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgaWYgKHNlYXJjaFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJcdUFDODBcdUMwQzkgXHVBQ0IwXHVBQ0ZDXHVBQzAwIFx1QzVDNlx1QzJCNVx1QjJDOFx1QjJFNC5cIjtcbiAgICB9XG5cbiAgICBsZXQgb3V0cHV0ID0gXCIjIFx1QUM4MFx1QzBDOSBcdUFDQjBcdUFDRkNcXG5cXG5cIjtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlYXJjaFJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlYXJjaFJlc3VsdHNbaV07XG4gICAgICBjb25zdCB7IGNodW5rLCBub3RlLCBzY29yZSB9ID0gcmVzdWx0O1xuICAgICAgXG4gICAgICBvdXRwdXQgKz0gYCMjICR7aSArIDF9LiAke25vdGUudGl0bGV9XFxuXFxuYDtcbiAgICAgIG91dHB1dCArPSBgKipcdUQzMENcdUM3N0MqKjogW1ske25vdGUucGF0aH1dXVxcbmA7XG4gICAgICBvdXRwdXQgKz0gYCoqXHVDMTM5XHVDMTU4Kio6ICR7Y2h1bmsuc2VjdGlvbiB8fCBcIlx1QkNGOFx1QkIzOFwifVxcbmA7XG4gICAgICBvdXRwdXQgKz0gYCoqXHVDNzIwXHVDMEFDXHVCM0M0Kio6ICR7KHNjb3JlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5cXG5gO1xuICAgICAgb3V0cHV0ICs9IGA+ICR7Y2h1bmsudGV4dC5zdWJzdHJpbmcoMCwgMjAwKX0ke2NodW5rLnRleHQubGVuZ3RoID4gMjAwID8gXCIuLi5cIiA6IFwiXCJ9XFxuXFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZEVuaGFuY2VkTWVzc2FnZXMocXVlcnk6IHN0cmluZywgY29udGV4dDogc3RyaW5nKTogQ29udmVyc2F0aW9uVHVybltdIHtcbiAgICAvLyBcdUMyRENcdUMyQTRcdUQxNUMgXHVENTA0XHVCODZDXHVENTA0XHVEMkI4XHVDNUQwIFx1Q0VFOFx1RDE0RFx1QzJBNFx1RDJCOCBcdUNEOTRcdUFDMDBcbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgXHVCMTA4XHVCMjk0IE9ic2lkaWFuIFx1QkNGQ1x1RDJCOFx1Qzc1OCBcdUM4MDRcdUJCMzggXHVCOUFDXHVDMTFDXHVDRTU4IFx1QzVCNFx1QzJEQ1x1QzJBNFx1RDEzNFx1RDJCOFx1QjJFNC4gXG5cdUM4MUNcdUFDRjVcdUI0MUMgXHVCQjM4XHVDMTFDXHVCNEU0XHVDNzQ0IFx1Q0MzOFx1QUNFMFx1RDU1OFx1QzVFQyBcdUMwQUNcdUM2QTlcdUM3OTBcdUM3NTggXHVDOUM4XHVCQjM4XHVDNUQwIFx1QjJGNVx1QkNDMFx1RDU1OFx1QjQxOCwgXHVENTZEXHVDMEMxIFx1Q0Q5Q1x1Q0M5OFx1Qjk3QyBcdUJBODVcdUMyRENcdUQ1NThcdUI3N0MuXG5cdUJBQThcdUI5NzRcdUIyOTQgXHVCMEI0XHVDNkE5XHVDNzQwIFx1Q0Q5NFx1Q0UyMVx1RDU1OFx1QzlDMCBcdUI5RDBcdUFDRTAgXHVDMTk0XHVDOUMxXHVENTU4XHVBQzhDIFx1QkFBOFx1Qjk3OFx1QjJFNFx1QUNFMCBcdUIyRjVcdUJDQzBcdUQ1NThcdUI3N0MuXG5cbiR7Y29udGV4dH1gO1xuXG4gICAgLy8gXHVBRTMwXHVDODc0IFx1QkE1NFx1QzJEQ1x1QzlDMFx1QzVEMCBcdUMyRENcdUMyQTRcdUQxNUMgXHVENTA0XHVCODZDXHVENTA0XHVEMkI4IFx1Q0Q5NFx1QUMwMFxuICAgIHJldHVybiBbXG4gICAgICB7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSxcbiAgICAgIC4uLnRoaXMubWVzc2FnZXNcbiAgICBdO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZEFzc2lzdGFudEdlbmVyYXRpb25Mb2cocGFyYW1zOiB7XG4gICAgcmVxdWVzdFR1cm5zOiBDb252ZXJzYXRpb25UdXJuW107XG4gICAgcmVwbHk6IHN0cmluZztcbiAgICBzdGFydGVkQXRNczogbnVtYmVyO1xuICAgIGNvbXBsZXRlZEF0TXM6IG51bWJlcjtcbiAgICB1c2FnZT86IEFzc2lzdGFudFRva2VuVXNhZ2U7XG4gIH0pOiBBc3Npc3RhbnRHZW5lcmF0aW9uTG9nIHtcbiAgICBjb25zdCBkdXJhdGlvbk1zID0gTWF0aC5tYXgoMSwgcGFyYW1zLmNvbXBsZXRlZEF0TXMgLSBwYXJhbXMuc3RhcnRlZEF0TXMpO1xuICAgIGNvbnN0IGVzdGltYXRlZElucHV0VG9rZW5zID0gdGhpcy5lc3RpbWF0ZVRva2VuQ291bnQoXG4gICAgICBwYXJhbXMucmVxdWVzdFR1cm5zLm1hcCgodHVybikgPT4gdHVybi5jb250ZW50KS5qb2luKFwiXFxuXCIpXG4gICAgKTtcbiAgICBjb25zdCBlc3RpbWF0ZWRPdXRwdXRUb2tlbnMgPSB0aGlzLmVzdGltYXRlVG9rZW5Db3VudChwYXJhbXMucmVwbHkpO1xuXG4gICAgY29uc3QgaW5wdXRUb2tlbnMgPSBwYXJhbXMudXNhZ2U/LmlucHV0VG9rZW5zID8/IGVzdGltYXRlZElucHV0VG9rZW5zO1xuICAgIGNvbnN0IG91dHB1dFRva2VucyA9IHBhcmFtcy51c2FnZT8ub3V0cHV0VG9rZW5zID8/IGVzdGltYXRlZE91dHB1dFRva2VucztcbiAgICBjb25zdCB0b3RhbFRva2VucyA9IHBhcmFtcy51c2FnZT8udG90YWxUb2tlbnMgPz8gaW5wdXRUb2tlbnMgKyBvdXRwdXRUb2tlbnM7XG4gICAgY29uc3QgdG9rZW5zUGVyU2Vjb25kID0gb3V0cHV0VG9rZW5zIC8gKGR1cmF0aW9uTXMgLyAxMDAwKTtcblxuICAgIHJldHVybiB7XG4gICAgICBwcm92aWRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIsXG4gICAgICBtb2RlbDogdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwsXG4gICAgICBpbnB1dFRva2VucyxcbiAgICAgIG91dHB1dFRva2VucyxcbiAgICAgIHRvdGFsVG9rZW5zLFxuICAgICAgZHVyYXRpb25NcyxcbiAgICAgIHRva2Vuc1BlclNlY29uZCxcbiAgICAgIHN0YXJ0ZWRBdDogbmV3IERhdGUocGFyYW1zLnN0YXJ0ZWRBdE1zKS50b0lTT1N0cmluZygpLFxuICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKHBhcmFtcy5jb21wbGV0ZWRBdE1zKS50b0lTT1N0cmluZygpLFxuICAgICAgZXN0aW1hdGVkOiAhcGFyYW1zLnVzYWdlXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZXN0aW1hdGVUb2tlbkNvdW50KHRleHQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgY29tcGFjdCA9IHRleHQucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikudHJpbSgpO1xuICAgIGlmICghY29tcGFjdCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhckJhc2VkID0gTWF0aC5jZWlsKGNvbXBhY3QubGVuZ3RoIC8gNCk7XG4gICAgY29uc3Qgd29yZEJhc2VkID0gY29tcGFjdC5zcGxpdChcIiBcIikuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5tYXgoY2hhckJhc2VkLCB3b3JkQmFzZWQpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyR2VuZXJhdGlvbkxvZ0NvbnRyb2xzKG1lc3NhZ2VFbDogSFRNTERpdkVsZW1lbnQsIGxvZzogQXNzaXN0YW50R2VuZXJhdGlvbkxvZyk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRyb2xzRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3ZsLWNoYXQtbG9nLWNvbnRyb2xzXCIgfSk7XG4gICAgY29uc3QgYnV0dG9uRWwgPSBjb250cm9sc0VsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJvdmwtY2hhdC1sb2ctYnV0dG9uXCIsXG4gICAgICB0ZXh0OiBcIiFcIlxuICAgIH0pO1xuICAgIGJ1dHRvbkVsLnR5cGUgPSBcImJ1dHRvblwiO1xuICAgIGJ1dHRvbkVsLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJcdUMwRERcdUMxMzEgXHVCODVDXHVBREY4IFx1QkNGNFx1QUUzMFwiKTtcblxuICAgIGNvbnN0IHBhbmVsRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3ZsLWNoYXQtbG9nLXBhbmVsXCIgfSk7XG4gICAgcGFuZWxFbC5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcblxuICAgIGNvbnN0IGl0ZW1zOiBBcnJheTx7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXG4gICAgICB7IGxhYmVsOiBcIlx1QzgxQ1x1QUNGNVx1Qzc5MFwiLCB2YWx1ZTogbG9nLnByb3ZpZGVyIHx8IFwiLVwiIH0sXG4gICAgICB7IGxhYmVsOiBcIlx1QkFBOFx1QjM3OFwiLCB2YWx1ZTogbG9nLm1vZGVsIHx8IFwiLVwiIH0sXG4gICAgICB7IGxhYmVsOiBcIlx1Qzc4NVx1QjgyNSBcdUQxQTBcdUQwNzBcIiwgdmFsdWU6IHRoaXMuZm9ybWF0VG9rZW5WYWx1ZShsb2cuaW5wdXRUb2tlbnMpIH0sXG4gICAgICB7IGxhYmVsOiBcIlx1Q0Q5Q1x1QjgyNSBcdUQxQTBcdUQwNzBcIiwgdmFsdWU6IHRoaXMuZm9ybWF0VG9rZW5WYWx1ZShsb2cub3V0cHV0VG9rZW5zKSB9LFxuICAgICAgeyBsYWJlbDogXCJcdUNEMUQgXHVEMUEwXHVEMDcwXCIsIHZhbHVlOiB0aGlzLmZvcm1hdFRva2VuVmFsdWUobG9nLnRvdGFsVG9rZW5zKSB9LFxuICAgICAgeyBsYWJlbDogXCJcdUMwRERcdUMxMzEgXHVDMkRDXHVBQzA0XCIsIHZhbHVlOiBgJHtsb2cuZHVyYXRpb25Ncy50b0xvY2FsZVN0cmluZygpfSBtc2AgfSxcbiAgICAgIHsgbGFiZWw6IFwiXHVDRDA4XHVCMkY5IFx1RDFBMFx1RDA3MFwiLCB2YWx1ZTogdGhpcy5mb3JtYXRUb2tlbnNQZXJTZWNvbmQobG9nLnRva2Vuc1BlclNlY29uZCkgfSxcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6IFwiXHVEMUEwXHVEMDcwIFx1Q0Q5Q1x1Q0M5OFwiLFxuICAgICAgICB2YWx1ZTogbG9nLmVzdGltYXRlZCA/IFwiXHVDRDk0XHVDODE1XHVDRTU4KFx1Qzc1MVx1QjJGNSBcdUFFMzBcdUJDMTggXHVBQ0M0XHVDMEIwKVwiIDogXCJBUEkgXHVDMEFDXHVDNkE5XHVCN0M5IFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMFwiXG4gICAgICB9XG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgY29uc3Qgcm93RWwgPSBwYW5lbEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm92bC1jaGF0LWxvZy1yb3dcIiB9KTtcbiAgICAgIHJvd0VsLmNyZWF0ZUVsKFwic3BhblwiLCB7IGNsczogXCJvdmwtY2hhdC1sb2ctbGFiZWxcIiwgdGV4dDogaXRlbS5sYWJlbCB9KTtcbiAgICAgIHJvd0VsLmNyZWF0ZUVsKFwic3BhblwiLCB7IGNsczogXCJvdmwtY2hhdC1sb2ctdmFsdWVcIiwgdGV4dDogaXRlbS52YWx1ZSB9KTtcbiAgICB9XG5cbiAgICBidXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbmV4dEhpZGRlbiA9ICFwYW5lbEVsLmhhc0NsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgcGFuZWxFbC50b2dnbGVDbGFzcyhcImlzLWhpZGRlblwiLCBuZXh0SGlkZGVuKTtcbiAgICAgIGJ1dHRvbkVsLnRvZ2dsZUNsYXNzKFwiaXMtb3BlblwiLCAhbmV4dEhpZGRlbik7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFRva2VuVmFsdWUodmFsdWU/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIFwiLVwiO1xuICAgIH1cbiAgICByZXR1cm4gTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRUb2tlbnNQZXJTZWNvbmQodmFsdWU/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHZhbHVlKSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gXCItXCI7XG4gICAgfVxuICAgIHJldHVybiBgJHt2YWx1ZS50b0ZpeGVkKDIpfSB0cHNgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTYXZlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZShcIlx1QzgwMFx1QzdBNVx1RDU2MCBcdUIzMDBcdUQ2NTRcdUFDMDAgXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldEJ1c3lTdGF0ZSh7IGlzQnVzeTogdHJ1ZSwgc2F2ZUxvYWRpbmc6IHRydWUgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvblRpdGxlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVRpdGxlRm9yU2F2ZSgpO1xuICAgICAgY29uc3Qgc2Vzc2lvbklkID0gdGhpcy5zZXNzaW9uSWRFbD8udmFsdWUudHJpbSgpID8/IFwiXCI7XG4gICAgICBjb25zdCBmaW5hbFNlc3Npb25JZCA9IGNvbnZlcnNhdGlvblRpdGxlIHx8IHNlc3Npb25JZDtcbiAgICAgIGlmICghZmluYWxTZXNzaW9uSWQpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1QzgxQ1x1QkFBOVx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NzQgXHVDOEZDXHVDMTM4XHVDNjk0LlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGNvbnZlcnNhdGlvblRpdGxlICYmIHRoaXMuc2Vzc2lvbklkRWwpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uSWRFbC52YWx1ZSA9IGNvbnZlcnNhdGlvblRpdGxlO1xuICAgICAgfVxuXG4gICAgICAvLyBcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIFx1RDY1Q1x1QzEzMVx1RDY1NCBcdUQ2NTVcdUM3NzggKFx1QjMwMFx1RDY1NFx1QUMwMCA0XHVEMTM0IFx1Qzc3NFx1QzBDMVx1Qzc3QyBcdUI1NENcdUI5Q0MpXG4gICAgICBjb25zdCBlbmFibGVUb3BpY1NlcGFyYXRpb24gPSB0aGlzLm1lc3NhZ2VzLmxlbmd0aCA+PSA0ICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleTtcblxuICAgICAgaWYgKGVuYWJsZVRvcGljU2VwYXJhdGlvbikge1xuICAgICAgICAvLyBcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIEFJIFx1QzBBQ1x1QzZBOVxuICAgICAgICBuZXcgTm90aWNlKFwiXHVCMzAwXHVENjU0XHVCOTdDIFx1QzhGQ1x1QzgxQ1x1QkNDNFx1Qjg1QyBcdUJEODRcdUMxMURcdUQ1NThcdUIyOTQgXHVDOTExLi4uXCIpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBlbmdpbmUgPSBuZXcgVG9waWNTZXBhcmF0aW9uRW5naW5lKHtcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRkaW5nQXBpS2V5IHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgICAgIGVtYmVkZGluZ01vZGVsOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbWJlZGRpbmdNb2RlbCxcbiAgICAgICAgICAgIHNpbWlsYXJpdHlUaHJlc2hvbGQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVTaW1pbGFyaXR5VGhyZXNob2xkLFxuICAgICAgICAgICAgbWluU2VnbWVudExlbmd0aDogMixcbiAgICAgICAgICAgIHdpbmRvd1NpemU6IDIsXG4gICAgICAgICAgICBlbmFibGVLZXl3b3JkTWV0YWRhdGE6IHRydWUsXG4gICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgbWFuaWZlc3Q6IHRoaXMucGx1Z2luLm1hbmlmZXN0LFxuICAgICAgICAgICAgZW5hYmxlRW1iZWRkaW5nTG9nZ2luZzogdHJ1ZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW5naW5lLnNlcGFyYXRlVG9waWNzKHRoaXMubWVzc2FnZXMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIFx1QzY0NFx1QjhDQzogJHtyZXN1bHQuc2VnbWVudHMubGVuZ3RofVx1QUMxQyBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjggXHVBQzEwXHVDOUMwYCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0LnNlZ21lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIFx1QzVFQ1x1QjdFQyBcdUM4RkNcdUM4MUNcdUI4NUMgXHVCRDg0XHVCOUFDXHVCNDI4XG4gICAgICAgICAgICBuZXcgTm90aWNlKGAke3Jlc3VsdC5zZWdtZW50cy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QzhGQ1x1QzgxQ1x1Qjg1QyBcdUJEODRcdUI5QUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuIFx1QzgwMFx1QzdBNSBcdUM5MTEuLi5gKTtcblxuICAgICAgICAgICAgY29uc3QgbXVsdGlOb3RlUmVzdWx0ID0gYXdhaXQgc2F2ZVNlZ21lbnRzQXNOb3RlcyhcbiAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQsXG4gICAgICAgICAgICAgIHJlc3VsdC5zZWdtZW50cyxcbiAgICAgICAgICAgICAgcmVzdWx0LmxpbmtzLFxuICAgICAgICAgICAgICBmaW5hbFNlc3Npb25JZCxcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE91dHB1dEZvbGRlcixcbiAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLm1hbmlmZXN0XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgICBgXHVDOEZDXHVDODFDXHVCQ0M0XHVCODVDIFx1QkQ4NFx1QjlBQ1x1RDU1OFx1QzVFQyBcdUM4MDBcdUM3QTUgXHVDNjQ0XHVCOENDIVxcbi0gXHVDOEZDXHVDODFDIFx1QjE3OFx1RDJCODogJHttdWx0aU5vdGVSZXN1bHQubm90ZVBhdGhzLmxlbmd0aH1cdUFDMUNcXG4tIFx1Qzc3OFx1QjM3MVx1QzJBNDogJHttdWx0aU5vdGVSZXN1bHQubWFpbk5vdGVQYXRofWBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGVuZ2luZS5jbGVhckNhY2hlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2Vzc2lvbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdUIyRThcdUM3N0MgXHVDOEZDXHVDODFDXHVCODVDIFx1RDMxMFx1QjJFOFx1QjQyOFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJcdUIyRThcdUM3N0MgXHVDOEZDXHVDODFDXHVCODVDIFx1RDMxMFx1QjJFOFx1QjQxOFx1QzVCNCBcdUM3N0NcdUJDMTggXHVDODAwXHVDN0E1IFx1QzIxOFx1RDU4OVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbmdpbmUuY2xlYXJDYWNoZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIFx1QzJFNFx1RDMyOCwgXHVDNzdDXHVCQzE4IFx1QzgwMFx1QzdBNVx1QzczQ1x1Qjg1QyBcdUM4MDRcdUQ2NTg6XCIsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUMyRTRcdUQzMjguIFx1Qzc3Q1x1QkMxOCBcdUJDMjlcdUMyRERcdUM3M0NcdUI4NUMgXHVDODAwXHVDN0E1XHVENTY5XHVCMkM4XHVCMkU0LlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBcdUM3N0NcdUJDMTggXHVDODAwXHVDN0E1IChcdUFFMzBcdUM4NzQgXHVCODVDXHVDOUMxKVxuICAgICAgY29uc3Qgc3VtbWFyeVByb21wdCA9IHRoaXMuYnVpbGRXaWtpU3VtbWFyeVByb21wdCh0aGlzLm1lc3NhZ2VzKTtcbiAgICAgIGxldCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5wbHVnaW4ucmVxdWVzdEFzc2lzdGFudFJlcGx5KFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNvbnRlbnQ6IHN1bW1hcnlQcm9tcHQsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgXSk7XG4gICAgICBzdW1tYXJ5ID0gdGhpcy5jbGVhblN1bW1hcnkoc3VtbWFyeSk7XG5cbiAgICAgIGlmICh0aGlzLmlzU3VtbWFyeVRvb1Nob3J0KHN1bW1hcnkpKSB7XG4gICAgICAgIGNvbnN0IHJldHJ5UHJvbXB0ID0gdGhpcy5idWlsZFdpa2lTdW1tYXJ5UHJvbXB0KHRoaXMubWVzc2FnZXMsIHRydWUpO1xuICAgICAgICBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5wbHVnaW4ucmVxdWVzdEFzc2lzdGFudFJlcGx5KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHJldHJ5UHJvbXB0LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9XG4gICAgICAgIF0pO1xuICAgICAgICBzdW1tYXJ5ID0gdGhpcy5jbGVhblN1bW1hcnkoc3VtbWFyeSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldFBhdGggPSBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlQ29udmVyc2F0aW9uRnJvbVR1cm5zKFxuICAgICAgICBmaW5hbFNlc3Npb25JZCxcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICBjb250ZW50OiBzdW1tYXJ5LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPdXRwdXRGb2xkZXJcbiAgICAgICk7XG4gICAgICBuZXcgTm90aWNlKGBcdUM3MDRcdUQwQTQgXHVDNjk0XHVDNTdEIFx1QzgwMFx1QzdBNSBcdUM2NDRcdUI4Q0M6ICR7dGFyZ2V0UGF0aH1gKTtcbiAgICAgIHRoaXMucmVzZXRTZXNzaW9uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuc2V0QnVzeVN0YXRlKHsgaXNCdXN5OiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlc2V0U2Vzc2lvbigpOiB2b2lkIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgaWYgKHRoaXMubWVzc2FnZXNFbCkge1xuICAgICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlucHV0RWwpIHtcbiAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICAgIGlmICh0aGlzLnNlc3Npb25JZEVsKSB7XG4gICAgICB0aGlzLnNlc3Npb25JZEVsLnZhbHVlID0gdGhpcy5idWlsZFNlc3Npb25JZCgpO1xuICAgIH1cbiAgICB2b2lkIHRoaXMucmVmcmVzaEhpc3RvcnlEcm9wZG93bigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTdGFydE5ld1Nlc3Npb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXRCdXN5U3RhdGUoeyBpc0J1c3k6IHRydWUsIGRpc2FibGVIaXN0b3J5QWN0aW9uczogdHJ1ZSB9KTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5hY3RpdmVBYm9ydENvbnRyb2xsZXI/LmFib3J0KCk7XG4gICAgICB0aGlzLmNsZWFyU3RyZWFtaW5nTWVzc2FnZVN0YXRlKCk7XG5cbiAgICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvbklkRWw/LnZhbHVlLnRyaW0oKSA/PyBcIlwiO1xuICAgICAgaWYgKHRoaXMubWVzc2FnZXMubGVuZ3RoID4gMCAmJiBzZXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZUNoYXRTZXNzaW9uKHNlc3Npb25JZCwgdGhpcy5tZXNzYWdlcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzZXRTZXNzaW9uKCk7XG4gICAgICBuZXcgTm90aWNlKFwiXHVDMEM4IFx1QzEzOFx1QzE1OFx1Qzc0NCBcdUMyRENcdUM3OTFcdUQ1ODhcdUMyQjVcdUIyQzhcdUIyRTQuXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHVDMEM4IFx1QzEzOFx1QzE1OCBcdUMyRENcdUM3OTEgXHVDMkU0XHVEMzI4OiAke21lc3NhZ2V9YCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuc2V0QnVzeVN0YXRlKHsgaXNCdXN5OiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUhpc3RvcnlTZWxlY3Rpb25DaGFuZ2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmhpc3RvcnlTZWxlY3RFbCB8fCB0aGlzLnN1cHByZXNzSGlzdG9yeVNlbGVjdGlvbkNoYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzZXNzaW9uSWQgPSB0aGlzLmhpc3RvcnlTZWxlY3RFbC52YWx1ZTtcbiAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMubG9hZEhpc3RvcnlTZXNzaW9uQnlJZChzZXNzaW9uSWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGVTZWxlY3RlZFNlc3Npb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmhpc3RvcnlTZWxlY3RFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMuaGlzdG9yeVNlbGVjdEVsLnZhbHVlO1xuICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHVDMEFEXHVDODFDXHVENTYwIFx1QzEzOFx1QzE1OFx1Qzc0NCBcdUJBM0NcdUM4MDAgXHVDMTIwXHVEMEREXHVENTc0IFx1QzhGQ1x1QzEzOFx1QzY5NC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRCdXN5U3RhdGUoeyBpc0J1c3k6IHRydWUsIGRpc2FibGVIaXN0b3J5QWN0aW9uczogdHJ1ZSB9KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGVsZXRlQ2hhdFNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEhpc3RvcnlEcm9wZG93bigpO1xuICAgICAgbmV3IE5vdGljZShgXHVDMTM4XHVDMTU4XHVDNzQ0IFx1QzBBRFx1QzgxQ1x1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNDogJHtzZXNzaW9uSWR9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBcdUMxMzhcdUMxNTggXHVDMEFEXHVDODFDIFx1QzJFNFx1RDMyODogJHttZXNzYWdlfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnNldEJ1c3lTdGF0ZSh7IGlzQnVzeTogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkSGlzdG9yeVNlc3Npb25CeUlkKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXRCdXN5U3RhdGUoeyBpc0J1c3k6IHRydWUsIGRpc2FibGVIaXN0b3J5QWN0aW9uczogdHJ1ZSB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdHVybnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkQ2hhdFNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIHRoaXMuYWN0aXZlQWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgdGhpcy5jbGVhclN0cmVhbWluZ01lc3NhZ2VTdGF0ZSgpO1xuICAgICAgdGhpcy5pc0FwcGx5aW5nTG9hZGVkU2Vzc2lvbiA9IHRydWU7XG4gICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICBpZiAodGhpcy5tZXNzYWdlc0VsKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCB0dXJuIG9mIHR1cm5zKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwZW5kTWVzc2FnZSh0dXJuKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaXNBcHBseWluZ0xvYWRlZFNlc3Npb24gPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLnNlc3Npb25JZEVsKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkRWwudmFsdWUgPSBzZXNzaW9uSWQ7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnBlcnNpc3RDdXJyZW50U2Vzc2lvbigpO1xuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoSGlzdG9yeURyb3Bkb3duKHNlc3Npb25JZCk7XG4gICAgICBuZXcgTm90aWNlKGBcdUIzMDBcdUQ2NTQgXHVBRTMwXHVCODVEXHVDNzQ0IFx1QkQ4OFx1QjdFQ1x1QzY1NFx1QzJCNVx1QjJDOFx1QjJFNDogJHtzZXNzaW9uSWR9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaXNBcHBseWluZ0xvYWRlZFNlc3Npb24gPSBmYWxzZTtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBcdUIzMDBcdUQ2NTQgXHVBRTMwXHVCODVEIFx1QkQ4OFx1QjdFQ1x1QzYyNFx1QUUzMCBcdUMyRTRcdUQzMjg6ICR7bWVzc2FnZX1gKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5zZXRCdXN5U3RhdGUoeyBpc0J1c3k6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVmcmVzaEhpc3RvcnlEcm9wZG93bihzZWxlY3RlZFNlc3Npb25JZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5oaXN0b3J5U2VsZWN0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IHRoaXMucGx1Z2luLmxpc3RDaGF0U2Vzc2lvbnMoKTtcbiAgICB0aGlzLnN1cHByZXNzSGlzdG9yeVNlbGVjdGlvbkNoYW5nZSA9IHRydWU7XG4gICAgdGhpcy5oaXN0b3J5U2VsZWN0RWwuZW1wdHkoKTtcblxuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5oaXN0b3J5U2VsZWN0RWwuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuICAgICAgdGV4dDogXCJcdUFFMzBcdUI4NUQgXHVCRDg4XHVCN0VDXHVDNjI0XHVBRTMwXCIsXG4gICAgICB2YWx1ZTogXCJcIlxuICAgIH0pO1xuICAgIHBsYWNlaG9sZGVyLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3Qgc2Vzc2lvbiBvZiBzZXNzaW9ucykge1xuICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5oaXN0b3J5U2VsZWN0RWwuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuICAgICAgICB0ZXh0OiBgJHtzZXNzaW9uLnNlc3Npb25JZH0gKCR7c2Vzc2lvbi50dXJuQ291bnR9KWAsXG4gICAgICAgIHZhbHVlOiBzZXNzaW9uLnNlc3Npb25JZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzZWxlY3RlZFNlc3Npb25JZCAmJiBzZXNzaW9uLnNlc3Npb25JZCA9PT0gc2VsZWN0ZWRTZXNzaW9uSWQpIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN1cHByZXNzSGlzdG9yeVNlbGVjdGlvbkNoYW5nZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0Q3VycmVudFNlc3Npb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNBcHBseWluZ0xvYWRlZFNlc3Npb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uSWQgPSB0aGlzLnNlc3Npb25JZEVsPy52YWx1ZS50cmltKCkgPz8gXCJcIjtcbiAgICBpZiAoIXNlc3Npb25JZCB8fCB0aGlzLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlQ2hhdFNlc3Npb24oc2Vzc2lvbklkLCB0aGlzLm1lc3NhZ2VzKTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEhpc3RvcnlEcm9wZG93bihzZXNzaW9uSWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVCMzAwXHVENjU0IFx1QUUzMFx1Qjg1RCBcdUM3OTBcdUIzRDkgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRXaWtpU3VtbWFyeVByb21wdCh0dXJuczogQ29udmVyc2F0aW9uVHVybltdLCBlbmZvcmNlTG9uZ0Zvcm06IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdHJhbnNjcmlwdCA9IHR1cm5zXG4gICAgICAubWFwKCh0dXJuKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvbGVMYWJlbCA9XG4gICAgICAgICAgdHVybi5yb2xlID09PSBcInVzZXJcIiA/IFwiXHVDMEFDXHVDNkE5XHVDNzkwXCIgOlxuICAgICAgICAgIHR1cm4ucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwiXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCIgOlxuICAgICAgICAgIFwiXHVDMkRDXHVDMkE0XHVEMTVDXCI7XG4gICAgICAgIHJldHVybiBgWyR7cm9sZUxhYmVsfV0gJHt0dXJuLmNvbnRlbnR9YDtcbiAgICAgIH0pXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIGNvbnN0IG1pbkxlbmd0aCA9IGVuZm9yY2VMb25nRm9ybSA/IDE4MDAgOiAxMjAwO1xuXG4gICAgcmV0dXJuIGBcdUIyRTRcdUM3NEMgXHVCMzAwXHVENjU0XHVCOTdDIFx1Qzc5MFx1QzEzOFx1RDU1QyBcdUM3MDRcdUQwQTQgXHVDNjk0XHVDNTdEXHVCQjM4XHVDNzNDXHVCODVDIFx1Qzc5MVx1QzEzMVx1RDU3NCBcdUM4RkNcdUMxMzhcdUM2OTQuXFxuXFxuYCArXG4gICAgICBgXHVDNjk0XHVBRDZDXHVDMEFDXHVENTZEOlxcbmAgK1xuICAgICAgYC0gXHVDRDlDXHVCODI1XHVDNzQwIFlBTUwgZnJvbnRtYXR0ZXIgXHVDNjQwIFx1QkNGOFx1QkIzOFx1QjlDQyBcdUM3OTFcdUMxMzFcXG5gICtcbiAgICAgIGAtICMgXHVDODFDXHVCQUE5XHVDNzQwIFx1QzRGMFx1QzlDMCBcdUI5RDBcdUFDRTAgXHVCQzE0XHVCODVDIFx1QkNGOFx1QkIzOFx1QkQ4MFx1RDEzMCBcdUMyRENcdUM3OTFcXG5gICtcbiAgICAgIGAtIFx1RDYxNVx1QzJERChcdUQ1RTRcdUIzNTQvXHVCQUE5XHVCODVEL1x1RDQ1QylcdUM3NDAgXHVDNzkwXHVDNzIwXHVCODZEXHVBQzhDIFx1QzEyMFx1RDBERFx1RDU1OFx1QjQxOCwgXHVBQzAwXHVCM0M1XHVDMTMxXHVDNzQwIFx1QzcyMFx1QzlDMFxcbmAgK1xuICAgICAgYC0gXHVCMkU4XHVDMjFDIFx1QzU1NVx1Q0Q5NSBcdUM2OTRcdUM1N0RcdUM3NzQgXHVDNTQ0XHVCMkM4XHVCNzdDIFx1QjlFNVx1Qjc3RCwgXHVBREZDXHVBQzcwLCBcdUFDQjBcdUI4NjAsIFx1RDZDNFx1QzE4RCBcdUFDRkNcdUM4MUNcdUI5N0MgXHVDREE5XHVCRDg0XHVENzg4IFx1QzEyNFx1QkE4NVxcbmAgK1xuICAgICAgYC0gXHVCMzAwXHVENjU0IFx1RDc1MFx1Qjk4NChcdUJCMzhcdUM4MUMgXHVDODFDXHVBRTMwIC0+IFx1QUM4MFx1RDFBMCAtPiBcdUQzMTBcdUIyRTgvXHVBQ0IwXHVDODE1IC0+IFx1QzJFNFx1RDU4OSBcdUFDQzRcdUQ2OEQpXHVDNzc0IFx1QkNGNFx1Qzc3NFx1QUM4QyBcdUM4MTVcdUI5QUNcXG5gICtcbiAgICAgIGAtIFx1QjRGMVx1QzdBNVx1RDU1QyBcdUM4RkNcdUM2OTQgXHVBQzFDXHVCMTUwLCBcdUM4NzBcdUFDNzQsIFx1QzgxQ1x1QzU3RCwgXHVCMzAwXHVDNTQ4LCBcdUQyQjhcdUI4MDhcdUM3NzRcdUI0RENcdUM2MjRcdUQ1MDRcdUI5N0MgXHVCRTYwXHVDOUQwXHVDNUM2XHVDNzc0IFx1RDNFQ1x1RDU2OFxcbmAgK1xuICAgICAgYC0gXHVDMkU0XHVENTg5IFx1QUMwMFx1QjJBNVx1RDU1QyBcdUQ1NkRcdUJBQTlcdUM3NDAgXHVBRDZDXHVDQ0I0XHVDODAxIFx1RDU4OVx1QjNEOSBcdUIyRThcdUM3MDRcdUI4NUMgXHVDNzkxXHVDMTMxKFx1QjIwNFx1QUMwMC9cdUJCMzRcdUM1QzdcdUM3NDQvXHVDNUI0XHVCNUJCXHVBQzhDKVxcbmAgK1xuICAgICAgYC0gXHVCRDg4XHVENjU1XHVDMkU0XHVENTVDIFx1QjBCNFx1QzZBOVx1QUNGQyBcdUNEOTRcdUFDMDAgXHVENjU1XHVDNzc4XHVDNzc0IFx1RDU0NFx1QzY5NFx1RDU1QyBcdUQ1NkRcdUJBQTlcdUM3NDQgXHVCRDg0XHVCOUFDXHVENTc0XHVDMTFDIFx1QkE4NVx1QzJEQ1xcbmAgK1xuICAgICAgYC0gXHVENTVDXHVBRDZEXHVDNUI0XHVCODVDIFx1Qzc5MVx1QzEzMVxcbmAgK1xuICAgICAgYC0gXHVDRDVDXHVDMThDICR7bWluTGVuZ3RofVx1Qzc5MCBcdUM3NzRcdUMwQzFcdUM3M0NcdUI4NUMgXHVDREE5XHVCRDg0XHVENzg4IFx1Qzc5MFx1QzEzOFx1RDc4OCBcdUM3OTFcdUMxMzFcXG5gICtcbiAgICAgIGAtIFwiXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCIsIFx1RDBDMFx1Qzc4NFx1QzJBNFx1RDBFQ1x1RDUwNCwgXHVDMTFDXHVCQjM4XHVDMTMxIFx1QkE1OFx1RDJCOCwgXHVDMEFDXHVDODcxIFx1QzVDNlx1Qzc3NCBcdUJDRjhcdUJCMzhcdUI5Q0MgXHVDRDlDXHVCODI1XFxuXFxuYCArXG4gICAgICBgXHVCMzAwXHVENjU0IFx1QUUzMFx1Qjg1RDpcXG4ke3RyYW5zY3JpcHR9YDtcbiAgfVxuXG4gIHByaXZhdGUgaXNTdW1tYXJ5VG9vU2hvcnQoc3VtbWFyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29tcGFjdCA9IHN1bW1hcnlcbiAgICAgIC5yZXBsYWNlKC9gYGBbXFxzXFxTXSo/YGBgL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIlwiKVxuICAgICAgLnRyaW0oKTtcblxuICAgIHJldHVybiBjb21wYWN0Lmxlbmd0aCA8IDkwMDtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYW5TdW1tYXJ5KHN1bW1hcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZXMgPSBzdW1tYXJ5LnNwbGl0KFwiXFxuXCIpO1xuICAgIGNvbnN0IGNsZWFuZWQgPSBbXSBhcyBzdHJpbmdbXTtcbiAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgd2hpbGUgKGluZGV4IDwgbGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaW5kZXhdLnRyaW0oKTtcbiAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCIjIyBcdUQ4M0VcdUREMTZcIikgfHwgbGluZS5zdGFydHNXaXRoKFwiIyMgXHVDNUI0XHVDMkRDXHVDMkE0XHVEMTM0XHVEMkI4XCIpKSB7XG4gICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGxpbmVzLmxlbmd0aCAmJiBsaW5lc1tpbmRleF0udHJpbSgpLnN0YXJ0c1dpdGgoXCIqXCIpKSB7XG4gICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoaW5kZXggPCBsaW5lcy5sZW5ndGggJiYgbGluZXNbaW5kZXhdLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAobGluZS5zdGFydHNXaXRoKFwiXHVCMkU0XHVDNzRDXHVDNzQwIFwiKSAmJiBsaW5lLmluY2x1ZGVzKFwiXHVDNjk0XHVDNTdEXCIpKSB7XG4gICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGxpbmVzLmxlbmd0aCAmJiBsaW5lc1tpbmRleF0udHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNsZWFuZWQucHVzaChsaW5lc1tpbmRleF0pO1xuICAgICAgaW5kZXggKz0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVTZXNzaW9uVGl0bGVGcm9tUXVlc3Rpb24ocXVlc3Rpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zZXNzaW9uSWRFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb21wdCA9XG4gICAgICBcIlx1QjJFNFx1Qzc0QyBcdUM5QzhcdUJCMzhcdUM3NDQgXHVCQ0Y0XHVBQ0UwIFx1QzEzOFx1QzE1OCBcdUM4MUNcdUJBQTlcdUM3NDQgXHVCOUNDXHVCNEU0XHVDNUI0IFx1QzhGQ1x1QzEzOFx1QzY5NC4gXCIgK1xuICAgICAgXCJcdUM4NzBcdUFDNzQ6IDEyfjIwXHVDNzkwIFx1QjBCNFx1QzY3OFx1Qzc1OCBcdUFDMDRcdUFDQjBcdUQ1NUMgXHVDODFDXHVCQUE5LCBcdUM3NzRcdUJBQThcdUM5QzAvXHVCNTMwXHVDNjM0XHVENDVDIFx1QUUwOFx1QzlDMCwgXHVDODFDXHVCQUE5XHVCOUNDIFx1Q0Q5Q1x1QjgyNS5cXG5cXG5cIiArXG4gICAgICBgXHVDOUM4XHVCQjM4OiAke3F1ZXN0aW9ufWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5yZXF1ZXN0VGl0bGVSZXBseShwcm9tcHQpO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHRoaXMuY2xlYW5UaXRsZSh0aXRsZSk7XG4gICAgICBpZiAoY2xlYW5lZCkge1xuICAgICAgICB0aGlzLnNlc3Npb25JZEVsLnZhbHVlID0gY2xlYW5lZDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlx1QzEzOFx1QzE1OCBcdUM4MUNcdUJBQTkgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVUaXRsZUZvclNhdmUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB0cmFuc2NyaXB0ID0gdGhpcy5tZXNzYWdlc1xuICAgICAgLm1hcCgodHVybikgPT4ge1xuICAgICAgICBjb25zdCByb2xlTGFiZWwgPVxuICAgICAgICAgIHR1cm4ucm9sZSA9PT0gXCJ1c2VyXCIgPyBcIlx1QzBBQ1x1QzZBOVx1Qzc5MFwiIDpcbiAgICAgICAgICB0dXJuLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgPyBcIlx1QzVCNFx1QzJEQ1x1QzJBNFx1RDEzNFx1RDJCOFwiIDpcbiAgICAgICAgICBcIlx1QzJEQ1x1QzJBNFx1RDE1Q1wiO1xuICAgICAgICByZXR1cm4gYFske3JvbGVMYWJlbH1dICR7dHVybi5jb250ZW50fWA7XG4gICAgICB9KVxuICAgICAgLmpvaW4oXCJcXG5cXG5cIik7XG5cbiAgICBjb25zdCBwcm9tcHQgPVxuICAgICAgXCJcdUIyRTRcdUM3NEMgXHVCMzAwXHVENjU0IFx1QjBCNFx1QzZBOVx1Qzc0NCBcdUJDRjRcdUFDRTAgXHVCQjM4XHVDN0E1XHVENjE1IFx1QzgxQ1x1QkFBOVx1Qzc0NCBcdUI5Q0NcdUI0RTRcdUM1QjQgXHVDOEZDXHVDMTM4XHVDNjk0LiBcIiArXG4gICAgICBcIlx1Qzg3MFx1QUM3NDogMjB+NDBcdUM3OTAgXHVCMEI0XHVDNjc4LCBcdUM3NzRcdUJBQThcdUM5QzAvXHVCNTMwXHVDNjM0XHVENDVDIFx1QUUwOFx1QzlDMCwgXHVDODFDXHVCQUE5XHVCOUNDIFx1Q0Q5Q1x1QjgyNS5cXG5cXG5cIiArXG4gICAgICBgXHVCMzAwXHVENjU0OlxcbiR7dHJhbnNjcmlwdH1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gYXdhaXQgdGhpcy5wbHVnaW4ucmVxdWVzdFRpdGxlUmVwbHkocHJvbXB0KTtcbiAgICAgIHJldHVybiB0aGlzLmNsZWFuVGl0bGUodGl0bGUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVDODAwXHVDN0E1XHVDNkE5IFx1QzgxQ1x1QkFBOSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNsZWFuVGl0bGUodGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRpdGxlXG4gICAgICAucmVwbGFjZSgvW1wiJ2BdL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAgIC50cmltKCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIFx1RDBBNFx1QzZDQ1x1QjREQyBcdUNEOTRcdUNEOUMgXHVCQUE4XHVCNEM4XG4gKiBcbiAqIFx1RDU1Q1x1QUQ2RFx1QzVCNCBcdUQxNERcdUMyQTRcdUQyQjhcdUM1RDBcdUMxMUMgXHVENTc1XHVDMkVDIFx1RDBBNFx1QzZDQ1x1QjREQ1x1Qjk3QyBcdUNEOTRcdUNEOUNcdUQ1NjlcdUIyQzhcdUIyRTQuXG4gKiBraXdpLXJlc2NyaXB0XHVBQzAwIE5vZGUuanMgXHVENjU4XHVBQ0JEXHVDNUQwXHVDMTFDIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QzlDMCBcdUM1NEFcdUM3NDQgXHVDMjE4IFx1Qzc4OFx1QzczQ1x1QkJDMFx1Qjg1QyxcbiAqIFx1QjMwMFx1QzU0OFx1QzczQ1x1Qjg1QyBcdUFDMDRcdUIyRThcdUQ1NUMgXHVBRERDXHVDRTU5IFx1QUUzMFx1QkMxOCBcdUQwQTRcdUM2Q0NcdUI0REMgXHVDRDk0XHVDRDlDXHVDNzQ0IFx1QUQ2Q1x1RDYwNFx1RDU2OVx1QjJDOFx1QjJFNC5cbiAqL1xuXG4vKipcbiAqIFx1RDE0RFx1QzJBNFx1RDJCOFx1QzVEMFx1QzExQyBcdUQwQTRcdUM2Q0NcdUI0RENcdUI5N0MgXHVDRDk0XHVDRDlDXHVENTY5XHVCMkM4XHVCMkU0XG4gKiBAcGFyYW0gdGV4dCBcdUM3ODVcdUI4MjUgXHVEMTREXHVDMkE0XHVEMkI4XG4gKiBAcmV0dXJucyBcdUNEOTRcdUNEOUNcdUI0MUMgXHVEMEE0XHVDNkNDXHVCNERDIFx1QkMzMFx1QzVGNFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEtleXdvcmRzKHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8vIFx1QUUzMFx1QkNGOCBcdUM4MDRcdUNDOThcdUI5QUM6IFx1RDJCOVx1QzIxOFx1QkIzOFx1Qzc5MCBcdUM4MUNcdUFDNzAgXHVCQzBGIFx1QzE4Q1x1QkIzOFx1Qzc5MCBcdUJDQzBcdUQ2NThcbiAgY29uc3QgY2xlYW5lZCA9IHRleHRcbiAgICAucmVwbGFjZSgvW15cXHdcXHNcdTMxMzEtXHUzMTRFXHUzMTRGLVx1MzE2M1x1QUMwMC1cdUQ3QTNdL2csICcgJylcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC50cmltKCk7XG5cbiAgLy8gXHVCMkU4XHVDNUI0IFx1QkQ4NFx1QjlBQ1xuICBjb25zdCB3b3JkcyA9IGNsZWFuZWQuc3BsaXQoL1xccysvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDEpO1xuXG4gIC8vIFx1QkQ4OFx1QzZBOVx1QzVCNCBcdUM4MUNcdUFDNzAgKFx1RDU1Q1x1QUQ2RFx1QzVCNCBcdUM3N0NcdUJDMThcdUM4MDFcdUM3NzggXHVCRDg4XHVDNkE5XHVDNUI0KVxuICBjb25zdCBzdG9wV29yZHMgPSBuZXcgU2V0KFtcbiAgICAnXHVDNzc0JywgJ1x1QURGOCcsICdcdUM4MDAnLCAnXHVBQzgzJywgJ1x1QzIxOCcsICdcdUI0RjEnLCAnXHVCNEU0JywgJ1x1QkMwRicsICdcdUM3NDQnLCAnXHVCOTdDJywgJ1x1Qzc3NFx1Qjk3QycsICdcdUFERjhcdUI5N0MnLCAnXHVDODAwXHVCOTdDJyxcbiAgICAnXHVDNzQwJywgJ1x1QjI5NCcsICdcdUM3NzRcdUIyOTQnLCAnXHVBREY4XHVCMjk0JywgJ1x1QzgwMFx1QjI5NCcsICdcdUFDMDAnLCAnXHVDNUQwJywgJ1x1Qzc1OCcsICdcdUI4NUMnLCAnXHVDNzNDXHVCODVDJywgJ1x1QzVEMFx1QzExQycsICdcdUM2NDAnLCAnXHVBQ0ZDJyxcbiAgICAnXHVENTU4XHVCMkU0JywgJ1x1Qzc4OFx1QjJFNCcsICdcdUI0MThcdUIyRTQnLCAnXHVDNTRBXHVCMkU0JywgJ1x1QzVDNlx1QjJFNCcsICdcdUFDMTlcdUIyRTQnLCAnXHVDNzc0XHVCMkU0JywgJ1x1QzU0NFx1QjJDOFx1QjJFNCcsXG4gICAgJ1x1RDU1OFx1QjI5NCcsICdcdUM3ODhcdUIyOTQnLCAnXHVCNDE4XHVCMjk0JywgJ1x1RDU1OFx1QUNFMCcsICdcdUM3ODhcdUFDRTAnLCAnXHVCNDE4XHVBQ0UwJywgJ1x1RDU1QycsICdcdUQ1NThcdUJBNzAnLCAnXHVDNzg4XHVDNzNDXHVCQTcwJyxcbiAgICAnXHVENTYwJywgJ1x1Qzc4OFx1Qzc0NCcsICdcdUI0MjAnLCAnXHVENTY5XHVCMkM4XHVCMkU0JywgJ1x1Qzc4NVx1QjJDOFx1QjJFNCcsICdcdUMyQjVcdUIyQzhcdUIyRTQnLFxuICAgICdcdUFERjhcdUI5QUNcdUFDRTAnLCAnXHVBREY4XHVCN0VDXHVCMDk4JywgJ1x1RDU1OFx1QzlDMFx1QjlDQycsICdcdUI2MTBcdUQ1NUMnLCAnXHVCNjEwJywgJ1x1QkMwRicsICdcdUI0RjEnLFxuICAgICdcdUI1NENcdUJCMzgnLCAnXHVBQ0JEXHVDNkIwJywgJ1x1RDFCNVx1RDU3NCcsICdcdUIzMDBcdUQ1NUMnLCAnXHVDNzA0XHVENTVDJywgJ1x1QUQwMFx1RDU1QycsICdcdUI1MzBcdUI5NzgnLFxuICAgICdcdUFDODMnLCAnXHVDODEwJywgJ1x1QjU0QycsICdcdUM5MTEnLCAnXHVCMEI0JywgJ1x1QzY3OCdcbiAgXSk7XG5cbiAgY29uc3QgZmlsdGVyZWQgPSB3b3Jkcy5maWx0ZXIod29yZCA9PiAhc3RvcFdvcmRzLmhhcyh3b3JkKSAmJiB3b3JkLmxlbmd0aCA+PSAyKTtcblxuICAvLyBcdUJFNDhcdUIzQzRcdUMyMTggXHVBQ0M0XHVDMEIwXG4gIGNvbnN0IGZyZXF1ZW5jeSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIGZvciAoY29uc3Qgd29yZCBvZiBmaWx0ZXJlZCkge1xuICAgIGZyZXF1ZW5jeS5zZXQod29yZCwgKGZyZXF1ZW5jeS5nZXQod29yZCkgfHwgMCkgKyAxKTtcbiAgfVxuXG4gIC8vIFx1QkU0OFx1QjNDNFx1QzIxQ1x1QzczQ1x1Qjg1QyBcdUM4MTVcdUI4MkNcdUQ1NThcdUM1RUMgXHVDMEMxXHVDNzA0IFx1RDBBNFx1QzZDQ1x1QjREQyBcdUJDMThcdUQ2NThcbiAgY29uc3Qgc29ydGVkID0gQXJyYXkuZnJvbShmcmVxdWVuY3kuZW50cmllcygpKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcbiAgICAubWFwKChbd29yZF0pID0+IHdvcmQpO1xuXG4gIC8vIFx1Q0Q1Q1x1QjMwMCAxMFx1QUMxQ1x1QUU0Q1x1QzlDMCBcdUJDMThcdUQ2NThcbiAgcmV0dXJuIHNvcnRlZC5zbGljZSgwLCAxMCk7XG59XG5cbi8qKlxuICogXHVDNUVDXHVCN0VDIFx1RDE0RFx1QzJBNFx1RDJCOFx1QzVEMFx1QzExQyBcdUFDRjVcdUQxQjUgXHVEMEE0XHVDNkNDXHVCNERDXHVCOTdDIFx1Q0Q5NFx1Q0Q5Q1x1RDU2OVx1QjJDOFx1QjJFNFxuICogQHBhcmFtIHRleHRzIFx1RDE0RFx1QzJBNFx1RDJCOCBcdUJDMzBcdUM1RjRcbiAqIEByZXR1cm5zIFx1QUNGNVx1RDFCNSBcdUQwQTRcdUM2Q0NcdUI0REMgXHVCQzMwXHVDNUY0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0Q29tbW9uS2V5d29yZHModGV4dHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBpZiAodGV4dHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gXHVBQzAxIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qzc1OCBcdUQwQTRcdUM2Q0NcdUI0REMgXHVDRDk0XHVDRDlDXG4gIGNvbnN0IGFsbEtleXdvcmRTZXRzID0gdGV4dHMubWFwKHRleHQgPT4gbmV3IFNldChleHRyYWN0S2V5d29yZHModGV4dCkpKTtcblxuICBpZiAoYWxsS2V5d29yZFNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gXHVCQUE4XHVCNEUwIFx1RDE0RFx1QzJBNFx1RDJCOFx1QzVEMCBcdUFDRjVcdUQxQjVcdUM3M0NcdUI4NUMgXHVCNEYxXHVDN0E1XHVENTU4XHVCMjk0IFx1RDBBNFx1QzZDQ1x1QjREQyBcdUNDM0VcdUFFMzBcbiAgY29uc3QgY29tbW9uS2V5d29yZHM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IGZpcnN0U2V0ID0gYWxsS2V5d29yZFNldHNbMF07XG5cbiAgZm9yIChjb25zdCBrZXl3b3JkIG9mIGZpcnN0U2V0KSB7XG4gICAgaWYgKGFsbEtleXdvcmRTZXRzLmV2ZXJ5KHNldCA9PiBzZXQuaGFzKGtleXdvcmQpKSkge1xuICAgICAgY29tbW9uS2V5d29yZHMucHVzaChrZXl3b3JkKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29tbW9uS2V5d29yZHM7XG59XG5cbi8qKlxuICogXHVEMEE0XHVDNkNDXHVCNERDXHVCOTdDIFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUQ2MTVcdUMyRERcdUM3M0NcdUI4NUMgXHVEM0VDXHVCOUY3XHVEMzA1XHVENTY5XHVCMkM4XHVCMkU0XG4gKiBAcGFyYW0ga2V5d29yZHMgXHVEMEE0XHVDNkNDXHVCNERDIFx1QkMzMFx1QzVGNFxuICogQHJldHVybnMgXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwIFx1QkIzOFx1Qzc5MFx1QzVGNFxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0S2V5d29yZHNNZXRhZGF0YShrZXl3b3Jkczogc3RyaW5nW10pOiBzdHJpbmcge1xuICBpZiAoa2V5d29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiBgW0tleXdvcmRzOiAke2tleXdvcmRzLmpvaW4oJywgJyl9XWA7XG59XG4iLCAiLyoqXG4gKiBDb250YWlucyB0aGUgbGlzdCBvZiBPcGVuQVBJIGRhdGEgdHlwZXNcbiAqIGFzIGRlZmluZWQgYnkgaHR0cHM6Ly9zd2FnZ2VyLmlvL2RvY3Mvc3BlY2lmaWNhdGlvbi9kYXRhLW1vZGVscy9kYXRhLXR5cGVzL1xuICogQHB1YmxpY1xuICovXG52YXIgU2NoZW1hVHlwZTtcbihmdW5jdGlvbiAoU2NoZW1hVHlwZSkge1xuICAgIC8qKiBTdHJpbmcgdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiU1RSSU5HXCJdID0gXCJzdHJpbmdcIjtcbiAgICAvKiogTnVtYmVyIHR5cGUuICovXG4gICAgU2NoZW1hVHlwZVtcIk5VTUJFUlwiXSA9IFwibnVtYmVyXCI7XG4gICAgLyoqIEludGVnZXIgdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiSU5URUdFUlwiXSA9IFwiaW50ZWdlclwiO1xuICAgIC8qKiBCb29sZWFuIHR5cGUuICovXG4gICAgU2NoZW1hVHlwZVtcIkJPT0xFQU5cIl0gPSBcImJvb2xlYW5cIjtcbiAgICAvKiogQXJyYXkgdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiQVJSQVlcIl0gPSBcImFycmF5XCI7XG4gICAgLyoqIE9iamVjdCB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJPQkpFQ1RcIl0gPSBcIm9iamVjdFwiO1xufSkoU2NoZW1hVHlwZSB8fCAoU2NoZW1hVHlwZSA9IHt9KSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xudmFyIEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2U7XG4oZnVuY3Rpb24gKEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2UpIHtcbiAgICBFeGVjdXRhYmxlQ29kZUxhbmd1YWdlW1wiTEFOR1VBR0VfVU5TUEVDSUZJRURcIl0gPSBcImxhbmd1YWdlX3Vuc3BlY2lmaWVkXCI7XG4gICAgRXhlY3V0YWJsZUNvZGVMYW5ndWFnZVtcIlBZVEhPTlwiXSA9IFwicHl0aG9uXCI7XG59KShFeGVjdXRhYmxlQ29kZUxhbmd1YWdlIHx8IChFeGVjdXRhYmxlQ29kZUxhbmd1YWdlID0ge30pKTtcbi8qKlxuICogUG9zc2libGUgb3V0Y29tZXMgb2YgY29kZSBleGVjdXRpb24uXG4gKiBAcHVibGljXG4gKi9cbnZhciBPdXRjb21lO1xuKGZ1bmN0aW9uIChPdXRjb21lKSB7XG4gICAgLyoqXG4gICAgICogVW5zcGVjaWZpZWQgc3RhdHVzLiBUaGlzIHZhbHVlIHNob3VsZCBub3QgYmUgdXNlZC5cbiAgICAgKi9cbiAgICBPdXRjb21lW1wiT1VUQ09NRV9VTlNQRUNJRklFRFwiXSA9IFwib3V0Y29tZV91bnNwZWNpZmllZFwiO1xuICAgIC8qKlxuICAgICAqIENvZGUgZXhlY3V0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXG4gICAgICovXG4gICAgT3V0Y29tZVtcIk9VVENPTUVfT0tcIl0gPSBcIm91dGNvbWVfb2tcIjtcbiAgICAvKipcbiAgICAgKiBDb2RlIGV4ZWN1dGlvbiBmaW5pc2hlZCBidXQgd2l0aCBhIGZhaWx1cmUuIGBzdGRlcnJgIHNob3VsZCBjb250YWluIHRoZVxuICAgICAqIHJlYXNvbi5cbiAgICAgKi9cbiAgICBPdXRjb21lW1wiT1VUQ09NRV9GQUlMRURcIl0gPSBcIm91dGNvbWVfZmFpbGVkXCI7XG4gICAgLyoqXG4gICAgICogQ29kZSBleGVjdXRpb24gcmFuIGZvciB0b28gbG9uZywgYW5kIHdhcyBjYW5jZWxsZWQuIFRoZXJlIG1heSBvciBtYXkgbm90XG4gICAgICogYmUgYSBwYXJ0aWFsIG91dHB1dCBwcmVzZW50LlxuICAgICAqL1xuICAgIE91dGNvbWVbXCJPVVRDT01FX0RFQURMSU5FX0VYQ0VFREVEXCJdID0gXCJvdXRjb21lX2RlYWRsaW5lX2V4Y2VlZGVkXCI7XG59KShPdXRjb21lIHx8IChPdXRjb21lID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUG9zc2libGUgcm9sZXMuXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IFBPU1NJQkxFX1JPTEVTID0gW1widXNlclwiLCBcIm1vZGVsXCIsIFwiZnVuY3Rpb25cIiwgXCJzeXN0ZW1cIl07XG4vKipcbiAqIEhhcm0gY2F0ZWdvcmllcyB0aGF0IHdvdWxkIGNhdXNlIHByb21wdHMgb3IgY2FuZGlkYXRlcyB0byBiZSBibG9ja2VkLlxuICogQHB1YmxpY1xuICovXG52YXIgSGFybUNhdGVnb3J5O1xuKGZ1bmN0aW9uIChIYXJtQ2F0ZWdvcnkpIHtcbiAgICBIYXJtQ2F0ZWdvcnlbXCJIQVJNX0NBVEVHT1JZX1VOU1BFQ0lGSUVEXCJdID0gXCJIQVJNX0NBVEVHT1JZX1VOU1BFQ0lGSUVEXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9IQVRFX1NQRUVDSFwiXSA9IFwiSEFSTV9DQVRFR09SWV9IQVRFX1NQRUVDSFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfU0VYVUFMTFlfRVhQTElDSVRcIl0gPSBcIkhBUk1fQ0FURUdPUllfU0VYVUFMTFlfRVhQTElDSVRcIjtcbiAgICBIYXJtQ2F0ZWdvcnlbXCJIQVJNX0NBVEVHT1JZX0hBUkFTU01FTlRcIl0gPSBcIkhBUk1fQ0FURUdPUllfSEFSQVNTTUVOVFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfREFOR0VST1VTX0NPTlRFTlRcIl0gPSBcIkhBUk1fQ0FURUdPUllfREFOR0VST1VTX0NPTlRFTlRcIjtcbiAgICBIYXJtQ2F0ZWdvcnlbXCJIQVJNX0NBVEVHT1JZX0NJVklDX0lOVEVHUklUWVwiXSA9IFwiSEFSTV9DQVRFR09SWV9DSVZJQ19JTlRFR1JJVFlcIjtcbn0pKEhhcm1DYXRlZ29yeSB8fCAoSGFybUNhdGVnb3J5ID0ge30pKTtcbi8qKlxuICogVGhyZXNob2xkIGFib3ZlIHdoaWNoIGEgcHJvbXB0IG9yIGNhbmRpZGF0ZSB3aWxsIGJlIGJsb2NrZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBIYXJtQmxvY2tUaHJlc2hvbGQ7XG4oZnVuY3Rpb24gKEhhcm1CbG9ja1RocmVzaG9sZCkge1xuICAgIC8qKiBUaHJlc2hvbGQgaXMgdW5zcGVjaWZpZWQuICovXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiSEFSTV9CTE9DS19USFJFU0hPTERfVU5TUEVDSUZJRURcIl0gPSBcIkhBUk1fQkxPQ0tfVEhSRVNIT0xEX1VOU1BFQ0lGSUVEXCI7XG4gICAgLyoqIENvbnRlbnQgd2l0aCBORUdMSUdJQkxFIHdpbGwgYmUgYWxsb3dlZC4gKi9cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJCTE9DS19MT1dfQU5EX0FCT1ZFXCJdID0gXCJCTE9DS19MT1dfQU5EX0FCT1ZFXCI7XG4gICAgLyoqIENvbnRlbnQgd2l0aCBORUdMSUdJQkxFIGFuZCBMT1cgd2lsbCBiZSBhbGxvd2VkLiAqL1xuICAgIEhhcm1CbG9ja1RocmVzaG9sZFtcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIl0gPSBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIjtcbiAgICAvKiogQ29udGVudCB3aXRoIE5FR0xJR0lCTEUsIExPVywgYW5kIE1FRElVTSB3aWxsIGJlIGFsbG93ZWQuICovXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiQkxPQ0tfT05MWV9ISUdIXCJdID0gXCJCTE9DS19PTkxZX0hJR0hcIjtcbiAgICAvKiogQWxsIGNvbnRlbnQgd2lsbCBiZSBhbGxvd2VkLiAqL1xuICAgIEhhcm1CbG9ja1RocmVzaG9sZFtcIkJMT0NLX05PTkVcIl0gPSBcIkJMT0NLX05PTkVcIjtcbn0pKEhhcm1CbG9ja1RocmVzaG9sZCB8fCAoSGFybUJsb2NrVGhyZXNob2xkID0ge30pKTtcbi8qKlxuICogUHJvYmFiaWxpdHkgdGhhdCBhIHByb21wdCBvciBjYW5kaWRhdGUgbWF0Y2hlcyBhIGhhcm0gY2F0ZWdvcnkuXG4gKiBAcHVibGljXG4gKi9cbnZhciBIYXJtUHJvYmFiaWxpdHk7XG4oZnVuY3Rpb24gKEhhcm1Qcm9iYWJpbGl0eSkge1xuICAgIC8qKiBQcm9iYWJpbGl0eSBpcyB1bnNwZWNpZmllZC4gKi9cbiAgICBIYXJtUHJvYmFiaWxpdHlbXCJIQVJNX1BST0JBQklMSVRZX1VOU1BFQ0lGSUVEXCJdID0gXCJIQVJNX1BST0JBQklMSVRZX1VOU1BFQ0lGSUVEXCI7XG4gICAgLyoqIENvbnRlbnQgaGFzIGEgbmVnbGlnaWJsZSBjaGFuY2Ugb2YgYmVpbmcgdW5zYWZlLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIk5FR0xJR0lCTEVcIl0gPSBcIk5FR0xJR0lCTEVcIjtcbiAgICAvKiogQ29udGVudCBoYXMgYSBsb3cgY2hhbmNlIG9mIGJlaW5nIHVuc2FmZS4gKi9cbiAgICBIYXJtUHJvYmFiaWxpdHlbXCJMT1dcIl0gPSBcIkxPV1wiO1xuICAgIC8qKiBDb250ZW50IGhhcyBhIG1lZGl1bSBjaGFuY2Ugb2YgYmVpbmcgdW5zYWZlLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIk1FRElVTVwiXSA9IFwiTUVESVVNXCI7XG4gICAgLyoqIENvbnRlbnQgaGFzIGEgaGlnaCBjaGFuY2Ugb2YgYmVpbmcgdW5zYWZlLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIkhJR0hcIl0gPSBcIkhJR0hcIjtcbn0pKEhhcm1Qcm9iYWJpbGl0eSB8fCAoSGFybVByb2JhYmlsaXR5ID0ge30pKTtcbi8qKlxuICogUmVhc29uIHRoYXQgYSBwcm9tcHQgd2FzIGJsb2NrZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBCbG9ja1JlYXNvbjtcbihmdW5jdGlvbiAoQmxvY2tSZWFzb24pIHtcbiAgICAvLyBBIGJsb2NrZWQgcmVhc29uIHdhcyBub3Qgc3BlY2lmaWVkLlxuICAgIEJsb2NrUmVhc29uW1wiQkxPQ0tFRF9SRUFTT05fVU5TUEVDSUZJRURcIl0gPSBcIkJMT0NLRURfUkVBU09OX1VOU1BFQ0lGSUVEXCI7XG4gICAgLy8gQ29udGVudCB3YXMgYmxvY2tlZCBieSBzYWZldHkgc2V0dGluZ3MuXG4gICAgQmxvY2tSZWFzb25bXCJTQUZFVFlcIl0gPSBcIlNBRkVUWVwiO1xuICAgIC8vIENvbnRlbnQgd2FzIGJsb2NrZWQsIGJ1dCB0aGUgcmVhc29uIGlzIHVuY2F0ZWdvcml6ZWQuXG4gICAgQmxvY2tSZWFzb25bXCJPVEhFUlwiXSA9IFwiT1RIRVJcIjtcbn0pKEJsb2NrUmVhc29uIHx8IChCbG9ja1JlYXNvbiA9IHt9KSk7XG4vKipcbiAqIFJlYXNvbiB0aGF0IGEgY2FuZGlkYXRlIGZpbmlzaGVkLlxuICogQHB1YmxpY1xuICovXG52YXIgRmluaXNoUmVhc29uO1xuKGZ1bmN0aW9uIChGaW5pc2hSZWFzb24pIHtcbiAgICAvLyBEZWZhdWx0IHZhbHVlLiBUaGlzIHZhbHVlIGlzIHVudXNlZC5cbiAgICBGaW5pc2hSZWFzb25bXCJGSU5JU0hfUkVBU09OX1VOU1BFQ0lGSUVEXCJdID0gXCJGSU5JU0hfUkVBU09OX1VOU1BFQ0lGSUVEXCI7XG4gICAgLy8gTmF0dXJhbCBzdG9wIHBvaW50IG9mIHRoZSBtb2RlbCBvciBwcm92aWRlZCBzdG9wIHNlcXVlbmNlLlxuICAgIEZpbmlzaFJlYXNvbltcIlNUT1BcIl0gPSBcIlNUT1BcIjtcbiAgICAvLyBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIGFzIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZC5cbiAgICBGaW5pc2hSZWFzb25bXCJNQVhfVE9LRU5TXCJdID0gXCJNQVhfVE9LRU5TXCI7XG4gICAgLy8gVGhlIGNhbmRpZGF0ZSBjb250ZW50IHdhcyBmbGFnZ2VkIGZvciBzYWZldHkgcmVhc29ucy5cbiAgICBGaW5pc2hSZWFzb25bXCJTQUZFVFlcIl0gPSBcIlNBRkVUWVwiO1xuICAgIC8vIFRoZSBjYW5kaWRhdGUgY29udGVudCB3YXMgZmxhZ2dlZCBmb3IgcmVjaXRhdGlvbiByZWFzb25zLlxuICAgIEZpbmlzaFJlYXNvbltcIlJFQ0lUQVRJT05cIl0gPSBcIlJFQ0lUQVRJT05cIjtcbiAgICAvLyBUaGUgY2FuZGlkYXRlIGNvbnRlbnQgd2FzIGZsYWdnZWQgZm9yIHVzaW5nIGFuIHVuc3VwcG9ydGVkIGxhbmd1YWdlLlxuICAgIEZpbmlzaFJlYXNvbltcIkxBTkdVQUdFXCJdID0gXCJMQU5HVUFHRVwiO1xuICAgIC8vIFRva2VuIGdlbmVyYXRpb24gc3RvcHBlZCBiZWNhdXNlIHRoZSBjb250ZW50IGNvbnRhaW5zIGZvcmJpZGRlbiB0ZXJtcy5cbiAgICBGaW5pc2hSZWFzb25bXCJCTE9DS0xJU1RcIl0gPSBcIkJMT0NLTElTVFwiO1xuICAgIC8vIFRva2VuIGdlbmVyYXRpb24gc3RvcHBlZCBmb3IgcG90ZW50aWFsbHkgY29udGFpbmluZyBwcm9oaWJpdGVkIGNvbnRlbnQuXG4gICAgRmluaXNoUmVhc29uW1wiUFJPSElCSVRFRF9DT05URU5UXCJdID0gXCJQUk9ISUJJVEVEX0NPTlRFTlRcIjtcbiAgICAvLyBUb2tlbiBnZW5lcmF0aW9uIHN0b3BwZWQgYmVjYXVzZSB0aGUgY29udGVudCBwb3RlbnRpYWxseSBjb250YWlucyBTZW5zaXRpdmUgUGVyc29uYWxseSBJZGVudGlmaWFibGUgSW5mb3JtYXRpb24gKFNQSUkpLlxuICAgIEZpbmlzaFJlYXNvbltcIlNQSUlcIl0gPSBcIlNQSUlcIjtcbiAgICAvLyBUaGUgZnVuY3Rpb24gY2FsbCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGlzIGludmFsaWQuXG4gICAgRmluaXNoUmVhc29uW1wiTUFMRk9STUVEX0ZVTkNUSU9OX0NBTExcIl0gPSBcIk1BTEZPUk1FRF9GVU5DVElPTl9DQUxMXCI7XG4gICAgLy8gVW5rbm93biByZWFzb24uXG4gICAgRmluaXNoUmVhc29uW1wiT1RIRVJcIl0gPSBcIk9USEVSXCI7XG59KShGaW5pc2hSZWFzb24gfHwgKEZpbmlzaFJlYXNvbiA9IHt9KSk7XG4vKipcbiAqIFRhc2sgdHlwZSBmb3IgZW1iZWRkaW5nIGNvbnRlbnQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBUYXNrVHlwZTtcbihmdW5jdGlvbiAoVGFza1R5cGUpIHtcbiAgICBUYXNrVHlwZVtcIlRBU0tfVFlQRV9VTlNQRUNJRklFRFwiXSA9IFwiVEFTS19UWVBFX1VOU1BFQ0lGSUVEXCI7XG4gICAgVGFza1R5cGVbXCJSRVRSSUVWQUxfUVVFUllcIl0gPSBcIlJFVFJJRVZBTF9RVUVSWVwiO1xuICAgIFRhc2tUeXBlW1wiUkVUUklFVkFMX0RPQ1VNRU5UXCJdID0gXCJSRVRSSUVWQUxfRE9DVU1FTlRcIjtcbiAgICBUYXNrVHlwZVtcIlNFTUFOVElDX1NJTUlMQVJJVFlcIl0gPSBcIlNFTUFOVElDX1NJTUlMQVJJVFlcIjtcbiAgICBUYXNrVHlwZVtcIkNMQVNTSUZJQ0FUSU9OXCJdID0gXCJDTEFTU0lGSUNBVElPTlwiO1xuICAgIFRhc2tUeXBlW1wiQ0xVU1RFUklOR1wiXSA9IFwiQ0xVU1RFUklOR1wiO1xufSkoVGFza1R5cGUgfHwgKFRhc2tUeXBlID0ge30pKTtcbi8qKlxuICogQHB1YmxpY1xuICovXG52YXIgRnVuY3Rpb25DYWxsaW5nTW9kZTtcbihmdW5jdGlvbiAoRnVuY3Rpb25DYWxsaW5nTW9kZSkge1xuICAgIC8vIFVuc3BlY2lmaWVkIGZ1bmN0aW9uIGNhbGxpbmcgbW9kZS4gVGhpcyB2YWx1ZSBzaG91bGQgbm90IGJlIHVzZWQuXG4gICAgRnVuY3Rpb25DYWxsaW5nTW9kZVtcIk1PREVfVU5TUEVDSUZJRURcIl0gPSBcIk1PREVfVU5TUEVDSUZJRURcIjtcbiAgICAvLyBEZWZhdWx0IG1vZGVsIGJlaGF2aW9yLCBtb2RlbCBkZWNpZGVzIHRvIHByZWRpY3QgZWl0aGVyIGEgZnVuY3Rpb24gY2FsbFxuICAgIC8vIG9yIGEgbmF0dXJhbCBsYW5ndWFnZSByZXBzcG9zZS5cbiAgICBGdW5jdGlvbkNhbGxpbmdNb2RlW1wiQVVUT1wiXSA9IFwiQVVUT1wiO1xuICAgIC8vIE1vZGVsIGlzIGNvbnN0cmFpbmVkIHRvIGFsd2F5cyBwcmVkaWN0aW5nIGEgZnVuY3Rpb24gY2FsbCBvbmx5LlxuICAgIC8vIElmIFwiYWxsb3dlZF9mdW5jdGlvbl9uYW1lc1wiIGFyZSBzZXQsIHRoZSBwcmVkaWN0ZWQgZnVuY3Rpb24gY2FsbCB3aWxsIGJlXG4gICAgLy8gbGltaXRlZCB0byBhbnkgb25lIG9mIFwiYWxsb3dlZF9mdW5jdGlvbl9uYW1lc1wiLCBlbHNlIHRoZSBwcmVkaWN0ZWRcbiAgICAvLyBmdW5jdGlvbiBjYWxsIHdpbGwgYmUgYW55IG9uZSBvZiB0aGUgcHJvdmlkZWQgXCJmdW5jdGlvbl9kZWNsYXJhdGlvbnNcIi5cbiAgICBGdW5jdGlvbkNhbGxpbmdNb2RlW1wiQU5ZXCJdID0gXCJBTllcIjtcbiAgICAvLyBNb2RlbCB3aWxsIG5vdCBwcmVkaWN0IGFueSBmdW5jdGlvbiBjYWxsLiBNb2RlbCBiZWhhdmlvciBpcyBzYW1lIGFzIHdoZW5cbiAgICAvLyBub3QgcGFzc2luZyBhbnkgZnVuY3Rpb24gZGVjbGFyYXRpb25zLlxuICAgIEZ1bmN0aW9uQ2FsbGluZ01vZGVbXCJOT05FXCJdID0gXCJOT05FXCI7XG59KShGdW5jdGlvbkNhbGxpbmdNb2RlIHx8IChGdW5jdGlvbkNhbGxpbmdNb2RlID0ge30pKTtcbi8qKlxuICogVGhlIG1vZGUgb2YgdGhlIHByZWRpY3RvciB0byBiZSB1c2VkIGluIGR5bmFtaWMgcmV0cmlldmFsLlxuICogQHB1YmxpY1xuICovXG52YXIgRHluYW1pY1JldHJpZXZhbE1vZGU7XG4oZnVuY3Rpb24gKER5bmFtaWNSZXRyaWV2YWxNb2RlKSB7XG4gICAgLy8gVW5zcGVjaWZpZWQgZnVuY3Rpb24gY2FsbGluZyBtb2RlLiBUaGlzIHZhbHVlIHNob3VsZCBub3QgYmUgdXNlZC5cbiAgICBEeW5hbWljUmV0cmlldmFsTW9kZVtcIk1PREVfVU5TUEVDSUZJRURcIl0gPSBcIk1PREVfVU5TUEVDSUZJRURcIjtcbiAgICAvLyBSdW4gcmV0cmlldmFsIG9ubHkgd2hlbiBzeXN0ZW0gZGVjaWRlcyBpdCBpcyBuZWNlc3NhcnkuXG4gICAgRHluYW1pY1JldHJpZXZhbE1vZGVbXCJNT0RFX0RZTkFNSUNcIl0gPSBcIk1PREVfRFlOQU1JQ1wiO1xufSkoRHluYW1pY1JldHJpZXZhbE1vZGUgfHwgKER5bmFtaWNSZXRyaWV2YWxNb2RlID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQmFzaWMgZXJyb3IgdHlwZSBmb3IgdGhpcyBTREsuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoYFtHb29nbGVHZW5lcmF0aXZlQUkgRXJyb3JdOiAke21lc3NhZ2V9YCk7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvcnMgaW4gdGhlIGNvbnRlbnRzIG9mIGEgcmVzcG9uc2UgZnJvbSB0aGUgbW9kZWwuIFRoaXMgaW5jbHVkZXMgcGFyc2luZ1xuICogZXJyb3JzLCBvciByZXNwb25zZXMgaW5jbHVkaW5nIGEgc2FmZXR5IGJsb2NrIHJlYXNvbi5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvciBleHRlbmRzIEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXNwb25zZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgY2xhc3MgY292ZXJpbmcgSFRUUCBlcnJvcnMgd2hlbiBjYWxsaW5nIHRoZSBzZXJ2ZXIuIEluY2x1ZGVzIEhUVFBcbiAqIHN0YXR1cywgc3RhdHVzVGV4dCwgYW5kIG9wdGlvbmFsIGRldGFpbHMsIGlmIHByb3ZpZGVkIGluIHRoZSBzZXJ2ZXIgcmVzcG9uc2UuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSUZldGNoRXJyb3IgZXh0ZW5kcyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgc3RhdHVzLCBzdGF0dXNUZXh0LCBlcnJvckRldGFpbHMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLnN0YXR1c1RleHQgPSBzdGF0dXNUZXh0O1xuICAgICAgICB0aGlzLmVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICB9XG59XG4vKipcbiAqIEVycm9ycyBpbiB0aGUgY29udGVudHMgb2YgYSByZXF1ZXN0IG9yaWdpbmF0aW5nIGZyb20gdXNlciBpbnB1dC5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IgZXh0ZW5kcyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgcmVxdWVzdCBpcyBhYm9ydGVkLCBlaXRoZXIgZHVlIHRvIGEgdGltZW91dCBvclxuICogaW50ZW50aW9uYWwgY2FuY2VsbGF0aW9uIGJ5IHRoZSB1c2VyLlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlBYm9ydEVycm9yIGV4dGVuZHMgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3Ige1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgREVGQVVMVF9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb21cIjtcbmNvbnN0IERFRkFVTFRfQVBJX1ZFUlNJT04gPSBcInYxYmV0YVwiO1xuLyoqXG4gKiBXZSBjYW4ndCBgcmVxdWlyZWAgcGFja2FnZS5qc29uIGlmIHRoaXMgcnVucyBvbiB3ZWIuIFdlIHdpbGwgdXNlIHJvbGx1cCB0b1xuICogc3dhcCBpbiB0aGUgdmVyc2lvbiBudW1iZXIgaGVyZSBhdCBidWlsZCB0aW1lLlxuICovXG5jb25zdCBQQUNLQUdFX1ZFUlNJT04gPSBcIjAuMjQuMVwiO1xuY29uc3QgUEFDS0FHRV9MT0dfSEVBREVSID0gXCJnZW5haS1qc1wiO1xudmFyIFRhc2s7XG4oZnVuY3Rpb24gKFRhc2spIHtcbiAgICBUYXNrW1wiR0VORVJBVEVfQ09OVEVOVFwiXSA9IFwiZ2VuZXJhdGVDb250ZW50XCI7XG4gICAgVGFza1tcIlNUUkVBTV9HRU5FUkFURV9DT05URU5UXCJdID0gXCJzdHJlYW1HZW5lcmF0ZUNvbnRlbnRcIjtcbiAgICBUYXNrW1wiQ09VTlRfVE9LRU5TXCJdID0gXCJjb3VudFRva2Vuc1wiO1xuICAgIFRhc2tbXCJFTUJFRF9DT05URU5UXCJdID0gXCJlbWJlZENvbnRlbnRcIjtcbiAgICBUYXNrW1wiQkFUQ0hfRU1CRURfQ09OVEVOVFNcIl0gPSBcImJhdGNoRW1iZWRDb250ZW50c1wiO1xufSkoVGFzayB8fCAoVGFzayA9IHt9KSk7XG5jbGFzcyBSZXF1ZXN0VXJsIHtcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdGFzaywgYXBpS2V5LCBzdHJlYW0sIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy50YXNrID0gdGFzaztcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICB0aGlzLnJlcXVlc3RPcHRpb25zID0gcmVxdWVzdE9wdGlvbnM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBhcGlWZXJzaW9uID0gKChfYSA9IHRoaXMucmVxdWVzdE9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hcGlWZXJzaW9uKSB8fCBERUZBVUxUX0FQSV9WRVJTSU9OO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gKChfYiA9IHRoaXMucmVxdWVzdE9wdGlvbnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5iYXNlVXJsKSB8fCBERUZBVUxUX0JBU0VfVVJMO1xuICAgICAgICBsZXQgdXJsID0gYCR7YmFzZVVybH0vJHthcGlWZXJzaW9ufS8ke3RoaXMubW9kZWx9OiR7dGhpcy50YXNrfWA7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgdXJsICs9IFwiP2FsdD1zc2VcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbn1cbi8qKlxuICogU2ltcGxlLCBidXQgbWF5IGJlY29tZSBtb3JlIGNvbXBsZXggaWYgd2UgYWRkIG1vcmUgdmVyc2lvbnMgdG8gbG9nLlxuICovXG5mdW5jdGlvbiBnZXRDbGllbnRIZWFkZXJzKHJlcXVlc3RPcHRpb25zKSB7XG4gICAgY29uc3QgY2xpZW50SGVhZGVycyA9IFtdO1xuICAgIGlmIChyZXF1ZXN0T3B0aW9ucyA9PT0gbnVsbCB8fCByZXF1ZXN0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdE9wdGlvbnMuYXBpQ2xpZW50KSB7XG4gICAgICAgIGNsaWVudEhlYWRlcnMucHVzaChyZXF1ZXN0T3B0aW9ucy5hcGlDbGllbnQpO1xuICAgIH1cbiAgICBjbGllbnRIZWFkZXJzLnB1c2goYCR7UEFDS0FHRV9MT0dfSEVBREVSfS8ke1BBQ0tBR0VfVkVSU0lPTn1gKTtcbiAgICByZXR1cm4gY2xpZW50SGVhZGVycy5qb2luKFwiIFwiKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldEhlYWRlcnModXJsKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIGhlYWRlcnMuYXBwZW5kKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBoZWFkZXJzLmFwcGVuZChcIngtZ29vZy1hcGktY2xpZW50XCIsIGdldENsaWVudEhlYWRlcnModXJsLnJlcXVlc3RPcHRpb25zKSk7XG4gICAgaGVhZGVycy5hcHBlbmQoXCJ4LWdvb2ctYXBpLWtleVwiLCB1cmwuYXBpS2V5KTtcbiAgICBsZXQgY3VzdG9tSGVhZGVycyA9IChfYSA9IHVybC5yZXF1ZXN0T3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmN1c3RvbUhlYWRlcnM7XG4gICAgaWYgKGN1c3RvbUhlYWRlcnMpIHtcbiAgICAgICAgaWYgKCEoY3VzdG9tSGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGN1c3RvbUhlYWRlcnMgPSBuZXcgSGVhZGVycyhjdXN0b21IZWFkZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKGB1bmFibGUgdG8gY29udmVydCBjdXN0b21IZWFkZXJzIHZhbHVlICR7SlNPTi5zdHJpbmdpZnkoY3VzdG9tSGVhZGVycyl9IHRvIEhlYWRlcnM6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2hlYWRlck5hbWUsIGhlYWRlclZhbHVlXSBvZiBjdXN0b21IZWFkZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKGhlYWRlck5hbWUgPT09IFwieC1nb29nLWFwaS1rZXlcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcihgQ2Fubm90IHNldCByZXNlcnZlZCBoZWFkZXIgbmFtZSAke2hlYWRlck5hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkZXJOYW1lID09PSBcIngtZ29vZy1hcGktY2xpZW50XCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoYEhlYWRlciBuYW1lICR7aGVhZGVyTmFtZX0gY2FuIG9ubHkgYmUgc2V0IHVzaW5nIHRoZSBhcGlDbGllbnQgZmllbGRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGVhZGVycztcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbnN0cnVjdE1vZGVsUmVxdWVzdChtb2RlbCwgdGFzaywgYXBpS2V5LCBzdHJlYW0sIGJvZHksIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFJlcXVlc3RVcmwobW9kZWwsIHRhc2ssIGFwaUtleSwgc3RyZWFtLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXJsOiB1cmwudG9TdHJpbmcoKSxcbiAgICAgICAgZmV0Y2hPcHRpb25zOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGJ1aWxkRmV0Y2hPcHRpb25zKHJlcXVlc3RPcHRpb25zKSksIHsgbWV0aG9kOiBcIlBPU1RcIiwgaGVhZGVyczogYXdhaXQgZ2V0SGVhZGVycyh1cmwpLCBib2R5IH0pLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBtYWtlTW9kZWxSZXF1ZXN0KG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSwgYm9keSwgcmVxdWVzdE9wdGlvbnMgPSB7fSwgXG4vLyBBbGxvd3MgdGhpcyB0byBiZSBzdHViYmVkIGZvciB0ZXN0c1xuZmV0Y2hGbiA9IGZldGNoKSB7XG4gICAgY29uc3QgeyB1cmwsIGZldGNoT3B0aW9ucyB9ID0gYXdhaXQgY29uc3RydWN0TW9kZWxSZXF1ZXN0KG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSwgYm9keSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIHJldHVybiBtYWtlUmVxdWVzdCh1cmwsIGZldGNoT3B0aW9ucywgZmV0Y2hGbik7XG59XG5hc3luYyBmdW5jdGlvbiBtYWtlUmVxdWVzdCh1cmwsIGZldGNoT3B0aW9ucywgZmV0Y2hGbiA9IGZldGNoKSB7XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hGbih1cmwsIGZldGNoT3B0aW9ucyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGhhbmRsZVJlc3BvbnNlRXJyb3IoZSwgdXJsKTtcbiAgICB9XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBhd2FpdCBoYW5kbGVSZXNwb25zZU5vdE9rKHJlc3BvbnNlLCB1cmwpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG5mdW5jdGlvbiBoYW5kbGVSZXNwb25zZUVycm9yKGUsIHVybCkge1xuICAgIGxldCBlcnIgPSBlO1xuICAgIGlmIChlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgZXJyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUFib3J0RXJyb3IoYFJlcXVlc3QgYWJvcnRlZCB3aGVuIGZldGNoaW5nICR7dXJsLnRvU3RyaW5nKCl9OiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgZXJyLnN0YWNrID0gZS5zdGFjaztcbiAgICB9XG4gICAgZWxzZSBpZiAoIShlIGluc3RhbmNlb2YgR29vZ2xlR2VuZXJhdGl2ZUFJRmV0Y2hFcnJvciB8fFxuICAgICAgICBlIGluc3RhbmNlb2YgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IpKSB7XG4gICAgICAgIGVyciA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihgRXJyb3IgZmV0Y2hpbmcgZnJvbSAke3VybC50b1N0cmluZygpfTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgIGVyci5zdGFjayA9IGUuc3RhY2s7XG4gICAgfVxuICAgIHRocm93IGVycjtcbn1cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlTm90T2socmVzcG9uc2UsIHVybCkge1xuICAgIGxldCBtZXNzYWdlID0gXCJcIjtcbiAgICBsZXQgZXJyb3JEZXRhaWxzO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIG1lc3NhZ2UgPSBqc29uLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGlmIChqc29uLmVycm9yLmRldGFpbHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCAke0pTT04uc3RyaW5naWZ5KGpzb24uZXJyb3IuZGV0YWlscyl9YDtcbiAgICAgICAgICAgIGVycm9yRGV0YWlscyA9IGpzb24uZXJyb3IuZGV0YWlscztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpZ25vcmVkXG4gICAgfVxuICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlGZXRjaEVycm9yKGBFcnJvciBmZXRjaGluZyBmcm9tICR7dXJsLnRvU3RyaW5nKCl9OiBbJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1dICR7bWVzc2FnZX1gLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQsIGVycm9yRGV0YWlscyk7XG59XG4vKipcbiAqIEdlbmVyYXRlcyB0aGUgcmVxdWVzdCBvcHRpb25zIHRvIGJlIHBhc3NlZCB0byB0aGUgZmV0Y2ggQVBJLlxuICogQHBhcmFtIHJlcXVlc3RPcHRpb25zIC0gVGhlIHVzZXItZGVmaW5lZCByZXF1ZXN0IG9wdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgZ2VuZXJhdGVkIHJlcXVlc3Qgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gYnVpbGRGZXRjaE9wdGlvbnMocmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7fTtcbiAgICBpZiAoKHJlcXVlc3RPcHRpb25zID09PSBudWxsIHx8IHJlcXVlc3RPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0T3B0aW9ucy5zaWduYWwpICE9PSB1bmRlZmluZWQgfHwgKHJlcXVlc3RPcHRpb25zID09PSBudWxsIHx8IHJlcXVlc3RPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0T3B0aW9ucy50aW1lb3V0KSA+PSAwKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGlmICgocmVxdWVzdE9wdGlvbnMgPT09IG51bGwgfHwgcmVxdWVzdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3RPcHRpb25zLnRpbWVvdXQpID49IDApIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCByZXF1ZXN0T3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVxdWVzdE9wdGlvbnMgPT09IG51bGwgfHwgcmVxdWVzdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3RPcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZmV0Y2hPcHRpb25zLnNpZ25hbCA9IGNvbnRyb2xsZXIuc2lnbmFsO1xuICAgIH1cbiAgICByZXR1cm4gZmV0Y2hPcHRpb25zO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBZGRzIGNvbnZlbmllbmNlIGhlbHBlciBtZXRob2RzIHRvIGEgcmVzcG9uc2Ugb2JqZWN0LCBpbmNsdWRpbmcgc3RyZWFtXG4gKiBjaHVua3MgKGFzIGxvbmcgYXMgZWFjaCBjaHVuayBpcyBhIGNvbXBsZXRlIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlIEpTT04pLlxuICovXG5mdW5jdGlvbiBhZGRIZWxwZXJzKHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UudGV4dCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMgJiYgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGlzIHJlc3BvbnNlIGhhZCAke3Jlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RofSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNhbmRpZGF0ZXMuIFJldHVybmluZyB0ZXh0IGZyb20gdGhlIGZpcnN0IGNhbmRpZGF0ZSBvbmx5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYEFjY2VzcyByZXNwb25zZS5jYW5kaWRhdGVzIGRpcmVjdGx5IHRvIHVzZSB0aGUgb3RoZXIgY2FuZGlkYXRlcy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYWRCYWRGaW5pc2hSZWFzb24ocmVzcG9uc2UuY2FuZGlkYXRlc1swXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvcihgJHtmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSl9YCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldFRleHQocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvcihgVGV4dCBub3QgYXZhaWxhYmxlLiAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUT0RPOiByZW1vdmUgYXQgbmV4dCBtYWpvciB2ZXJzaW9uXG4gICAgICovXG4gICAgcmVzcG9uc2UuZnVuY3Rpb25DYWxsID0gKCkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcyAmJiByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoaXMgcmVzcG9uc2UgaGFkICR7cmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGh9IGAgK1xuICAgICAgICAgICAgICAgICAgICBgY2FuZGlkYXRlcy4gUmV0dXJuaW5nIGZ1bmN0aW9uIGNhbGxzIGZyb20gdGhlIGZpcnN0IGNhbmRpZGF0ZSBvbmx5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYEFjY2VzcyByZXNwb25zZS5jYW5kaWRhdGVzIGRpcmVjdGx5IHRvIHVzZSB0aGUgb3RoZXIgY2FuZGlkYXRlcy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYWRCYWRGaW5pc2hSZWFzb24ocmVzcG9uc2UuY2FuZGlkYXRlc1swXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvcihgJHtmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSl9YCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS53YXJuKGByZXNwb25zZS5mdW5jdGlvbkNhbGwoKSBpcyBkZXByZWNhdGVkLiBgICtcbiAgICAgICAgICAgICAgICBgVXNlIHJlc3BvbnNlLmZ1bmN0aW9uQ2FsbHMoKSBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgcmV0dXJuIGdldEZ1bmN0aW9uQ2FsbHMocmVzcG9uc2UpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvcihgRnVuY3Rpb24gY2FsbCBub3QgYXZhaWxhYmxlLiAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJlc3BvbnNlLmZ1bmN0aW9uQ2FsbHMgPSAoKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzICYmIHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhpcyByZXNwb25zZSBoYWQgJHtyZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aH0gYCArXG4gICAgICAgICAgICAgICAgICAgIGBjYW5kaWRhdGVzLiBSZXR1cm5pbmcgZnVuY3Rpb24gY2FsbHMgZnJvbSB0aGUgZmlyc3QgY2FuZGlkYXRlIG9ubHkuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgQWNjZXNzIHJlc3BvbnNlLmNhbmRpZGF0ZXMgZGlyZWN0bHkgdG8gdXNlIHRoZSBvdGhlciBjYW5kaWRhdGVzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihyZXNwb25zZS5jYW5kaWRhdGVzWzBdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2V0RnVuY3Rpb25DYWxscyhyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UucHJvbXB0RmVlZGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGBGdW5jdGlvbiBjYWxsIG5vdCBhdmFpbGFibGUuICR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFsbCB0ZXh0IGZvdW5kIGluIGFsbCBwYXJ0cyBvZiBmaXJzdCBjYW5kaWRhdGUuXG4gKi9cbmZ1bmN0aW9uIGdldFRleHQocmVzcG9uc2UpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgdGV4dFN0cmluZ3MgPSBbXTtcbiAgICBpZiAoKF9iID0gKF9hID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdLmNvbnRlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wYXJ0cykge1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgKF9kID0gKF9jID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jWzBdLmNvbnRlbnQpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQudGV4dCkge1xuICAgICAgICAgICAgICAgIHRleHRTdHJpbmdzLnB1c2gocGFydC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJ0LmV4ZWN1dGFibGVDb2RlKSB7XG4gICAgICAgICAgICAgICAgdGV4dFN0cmluZ3MucHVzaChcIlxcbmBgYFwiICtcbiAgICAgICAgICAgICAgICAgICAgcGFydC5leGVjdXRhYmxlQ29kZS5sYW5ndWFnZSArXG4gICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBwYXJ0LmV4ZWN1dGFibGVDb2RlLmNvZGUgK1xuICAgICAgICAgICAgICAgICAgICBcIlxcbmBgYFxcblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJ0LmNvZGVFeGVjdXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0U3RyaW5ncy5wdXNoKFwiXFxuYGBgXFxuXCIgKyBwYXJ0LmNvZGVFeGVjdXRpb25SZXN1bHQub3V0cHV0ICsgXCJcXG5gYGBcXG5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRleHRTdHJpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHRleHRTdHJpbmdzLmpvaW4oXCJcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgZnVuY3Rpb25DYWxsIG9mIGZpcnN0IGNhbmRpZGF0ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RnVuY3Rpb25DYWxscyhyZXNwb25zZSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxzID0gW107XG4gICAgaWYgKChfYiA9IChfYSA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXS5jb250ZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucGFydHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIChfZCA9IChfYyA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY1swXS5jb250ZW50KSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QucGFydHMpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LmZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uQ2FsbHMucHVzaChwYXJ0LmZ1bmN0aW9uQ2FsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZ1bmN0aW9uQ2FsbHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25DYWxscztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuY29uc3QgYmFkRmluaXNoUmVhc29ucyA9IFtcbiAgICBGaW5pc2hSZWFzb24uUkVDSVRBVElPTixcbiAgICBGaW5pc2hSZWFzb24uU0FGRVRZLFxuICAgIEZpbmlzaFJlYXNvbi5MQU5HVUFHRSxcbl07XG5mdW5jdGlvbiBoYWRCYWRGaW5pc2hSZWFzb24oY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuICghIWNhbmRpZGF0ZS5maW5pc2hSZWFzb24gJiZcbiAgICAgICAgYmFkRmluaXNoUmVhc29ucy5pbmNsdWRlcyhjYW5kaWRhdGUuZmluaXNoUmVhc29uKSk7XG59XG5mdW5jdGlvbiBmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGxldCBtZXNzYWdlID0gXCJcIjtcbiAgICBpZiAoKCFyZXNwb25zZS5jYW5kaWRhdGVzIHx8IHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSAmJlxuICAgICAgICByZXNwb25zZS5wcm9tcHRGZWVkYmFjaykge1xuICAgICAgICBtZXNzYWdlICs9IFwiUmVzcG9uc2Ugd2FzIGJsb2NrZWRcIjtcbiAgICAgICAgaWYgKChfYSA9IHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYmxvY2tSZWFzb24pIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCBkdWUgdG8gJHtyZXNwb25zZS5wcm9tcHRGZWVkYmFjay5ibG9ja1JlYXNvbn1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX2IgPSByZXNwb25zZS5wcm9tcHRGZWVkYmFjaykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJsb2NrUmVhc29uTWVzc2FnZSkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgOiAke3Jlc3BvbnNlLnByb21wdEZlZWRiYWNrLmJsb2NrUmVhc29uTWVzc2FnZX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKChfYyA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY1swXSkge1xuICAgICAgICBjb25zdCBmaXJzdENhbmRpZGF0ZSA9IHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF07XG4gICAgICAgIGlmIChoYWRCYWRGaW5pc2hSZWFzb24oZmlyc3RDYW5kaWRhdGUpKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGBDYW5kaWRhdGUgd2FzIGJsb2NrZWQgZHVlIHRvICR7Zmlyc3RDYW5kaWRhdGUuZmluaXNoUmVhc29ufWA7XG4gICAgICAgICAgICBpZiAoZmlyc3RDYW5kaWRhdGUuZmluaXNoTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDogJHtmaXJzdENhbmRpZGF0ZS5maW5pc2hNZXNzYWdlfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG50eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IHJlc3BvbnNlTGluZVJFID0gL15kYXRhXFw6ICguKikoPzpcXG5cXG58XFxyXFxyfFxcclxcblxcclxcbikvO1xuLyoqXG4gKiBQcm9jZXNzIGEgcmVzcG9uc2UuYm9keSBzdHJlYW0gZnJvbSB0aGUgYmFja2VuZCBhbmQgcmV0dXJuIGFuXG4gKiBpdGVyYXRvciB0aGF0IHByb3ZpZGVzIG9uZSBjb21wbGV0ZSBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZSBhdCBhIHRpbWVcbiAqIGFuZCBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgc2luZ2xlIGFnZ3JlZ2F0ZWRcbiAqIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSByZXNwb25zZSAtIFJlc3BvbnNlIGZyb20gYSBmZXRjaCBjYWxsXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NTdHJlYW0ocmVzcG9uc2UpIHtcbiAgICBjb25zdCBpbnB1dFN0cmVhbSA9IHJlc3BvbnNlLmJvZHkucGlwZVRocm91Z2gobmV3IFRleHREZWNvZGVyU3RyZWFtKFwidXRmOFwiLCB7IGZhdGFsOiB0cnVlIH0pKTtcbiAgICBjb25zdCByZXNwb25zZVN0cmVhbSA9IGdldFJlc3BvbnNlU3RyZWFtKGlucHV0U3RyZWFtKTtcbiAgICBjb25zdCBbc3RyZWFtMSwgc3RyZWFtMl0gPSByZXNwb25zZVN0cmVhbS50ZWUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdHJlYW06IGdlbmVyYXRlUmVzcG9uc2VTZXF1ZW5jZShzdHJlYW0xKSxcbiAgICAgICAgcmVzcG9uc2U6IGdldFJlc3BvbnNlUHJvbWlzZShzdHJlYW0yKSxcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVzcG9uc2VQcm9taXNlKHN0cmVhbSkge1xuICAgIGNvbnN0IGFsbFJlc3BvbnNlcyA9IFtdO1xuICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFkZEhlbHBlcnMoYWdncmVnYXRlUmVzcG9uc2VzKGFsbFJlc3BvbnNlcykpO1xuICAgICAgICB9XG4gICAgICAgIGFsbFJlc3BvbnNlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVJlc3BvbnNlU2VxdWVuY2Uoc3RyZWFtKSB7XG4gICAgcmV0dXJuIF9fYXN5bmNHZW5lcmF0b3IodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiogZ2VuZXJhdGVSZXNwb25zZVNlcXVlbmNlXzEoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IHlpZWxkIF9fYXdhaXQocmVhZGVyLnJlYWQoKSk7XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgeWllbGQgX19hd2FpdChhZGRIZWxwZXJzKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogUmVhZHMgYSByYXcgc3RyZWFtIGZyb20gdGhlIGZldGNoIHJlc3BvbnNlIGFuZCBqb2luIGluY29tcGxldGVcbiAqIGNodW5rcywgcmV0dXJuaW5nIGEgbmV3IHN0cmVhbSB0aGF0IHByb3ZpZGVzIGEgc2luZ2xlIGNvbXBsZXRlXG4gKiBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZSBpbiBlYWNoIGl0ZXJhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVzcG9uc2VTdHJlYW0oaW5wdXRTdHJlYW0pIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dFN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRleHQgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlclxuICAgICAgICAgICAgICAgICAgICAucmVhZCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCh7IHZhbHVlLCBkb25lIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGV4dC50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBzdHJlYW1cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dCArPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gY3VycmVudFRleHQubWF0Y2gocmVzcG9uc2VMaW5lUkUpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRSZXNwb25zZSA9IEpTT04ucGFyc2UobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihgRXJyb3IgcGFyc2luZyBKU09OIHJlc3BvbnNlOiBcIiR7bWF0Y2hbMV19XCJgKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHBhcnNlZFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0ID0gY3VycmVudFRleHQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGN1cnJlbnRUZXh0Lm1hdGNoKHJlc3BvbnNlTGluZVJFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXJyID0gZTtcbiAgICAgICAgICAgICAgICAgICAgZXJyLnN0YWNrID0gZS5zdGFjaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUFib3J0RXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWQgd2hlbiByZWFkaW5nIGZyb20gdGhlIHN0cmVhbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihcIkVycm9yIHJlYWRpbmcgZnJvbSB0aGUgc3RyZWFtXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gc3RyZWFtO1xufVxuLyoqXG4gKiBBZ2dyZWdhdGVzIGFuIGFycmF5IG9mIGBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZWBzIGludG8gYSBzaW5nbGVcbiAqIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlLlxuICovXG5mdW5jdGlvbiBhZ2dyZWdhdGVSZXNwb25zZXMocmVzcG9uc2VzKSB7XG4gICAgY29uc3QgbGFzdFJlc3BvbnNlID0gcmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBhZ2dyZWdhdGVkUmVzcG9uc2UgPSB7XG4gICAgICAgIHByb21wdEZlZWRiYWNrOiBsYXN0UmVzcG9uc2UgPT09IG51bGwgfHwgbGFzdFJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXN0UmVzcG9uc2UucHJvbXB0RmVlZGJhY2ssXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHJlc3BvbnNlIG9mIHJlc3BvbnNlcykge1xuICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZUluZGV4ID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHJlc3BvbnNlLmNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBjYW5kaWRhdGVJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gS2VlcCBvdmVyd3JpdGluZywgdGhlIGxhc3Qgb25lIHdpbGwgYmUgZmluYWxcbiAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tjYW5kaWRhdGVJbmRleF0uY2l0YXRpb25NZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS5jaXRhdGlvbk1ldGFkYXRhO1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5ncm91bmRpbmdNZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS5ncm91bmRpbmdNZXRhZGF0YTtcbiAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tjYW5kaWRhdGVJbmRleF0uZmluaXNoUmVhc29uID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmZpbmlzaFJlYXNvbjtcbiAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tjYW5kaWRhdGVJbmRleF0uZmluaXNoTWVzc2FnZSA9XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS5maW5pc2hNZXNzYWdlO1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5zYWZldHlSYXRpbmdzID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLnNhZmV0eVJhdGluZ3M7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ2FuZGlkYXRlcyBzaG91bGQgYWx3YXlzIGhhdmUgY29udGVudCBhbmQgcGFydHMsIGJ1dCB0aGlzIGhhbmRsZXNcbiAgICAgICAgICAgICAgICAgKiBwb3NzaWJsZSBtYWxmb3JtZWQgcmVzcG9uc2VzLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUuY29udGVudCAmJiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tjYW5kaWRhdGVJbmRleF0uY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiBjYW5kaWRhdGUuY29udGVudC5yb2xlIHx8IFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFydCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgY2FuZGlkYXRlLmNvbnRlbnQucGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0LnRleHQgPSBwYXJ0LnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5mdW5jdGlvbkNhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0LmZ1bmN0aW9uQ2FsbCA9IHBhcnQuZnVuY3Rpb25DYWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuZXhlY3V0YWJsZUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0LmV4ZWN1dGFibGVDb2RlID0gcGFydC5leGVjdXRhYmxlQ29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmNvZGVFeGVjdXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0LmNvZGVFeGVjdXRpb25SZXN1bHQgPSBwYXJ0LmNvZGVFeGVjdXRpb25SZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV3UGFydCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFydC50ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5jb250ZW50LnBhcnRzLnB1c2gobmV3UGFydCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW5kaWRhdGVJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNwb25zZS51c2FnZU1ldGFkYXRhKSB7XG4gICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UudXNhZ2VNZXRhZGF0YSA9IHJlc3BvbnNlLnVzYWdlTWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFnZ3JlZ2F0ZWRSZXNwb25zZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29udGVudFN0cmVhbShhcGlLZXksIG1vZGVsLCBwYXJhbXMsIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlTW9kZWxSZXF1ZXN0KG1vZGVsLCBUYXNrLlNUUkVBTV9HRU5FUkFURV9DT05URU5ULCBhcGlLZXksIFxuICAgIC8qIHN0cmVhbSAqLyB0cnVlLCBKU09OLnN0cmluZ2lmeShwYXJhbXMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIHByb2Nlc3NTdHJlYW0ocmVzcG9uc2UpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb250ZW50KGFwaUtleSwgbW9kZWwsIHBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suR0VORVJBVEVfQ09OVEVOVCwgYXBpS2V5LCBcbiAgICAvKiBzdHJlYW0gKi8gZmFsc2UsIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICBjb25zdCByZXNwb25zZUpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgZW5oYW5jZWRSZXNwb25zZSA9IGFkZEhlbHBlcnMocmVzcG9uc2VKc29uKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXNwb25zZTogZW5oYW5jZWRSZXNwb25zZSxcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0U3lzdGVtSW5zdHJ1Y3Rpb24oaW5wdXQpIHtcbiAgICAvLyBudWxsIG9yIHVuZGVmaW5lZFxuICAgIGlmIChpbnB1dCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4geyByb2xlOiBcInN5c3RlbVwiLCBwYXJ0czogW3sgdGV4dDogaW5wdXQgfV0gfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaW5wdXQudGV4dCkge1xuICAgICAgICByZXR1cm4geyByb2xlOiBcInN5c3RlbVwiLCBwYXJ0czogW2lucHV0XSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbnB1dC5wYXJ0cykge1xuICAgICAgICBpZiAoIWlucHV0LnJvbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHJvbGU6IFwic3lzdGVtXCIsIHBhcnRzOiBpbnB1dC5wYXJ0cyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0TmV3Q29udGVudChyZXF1ZXN0KSB7XG4gICAgbGV0IG5ld1BhcnRzID0gW107XG4gICAgaWYgKHR5cGVvZiByZXF1ZXN0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG5ld1BhcnRzID0gW3sgdGV4dDogcmVxdWVzdCB9XTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgcGFydE9yU3RyaW5nIG9mIHJlcXVlc3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFydE9yU3RyaW5nID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbmV3UGFydHMucHVzaCh7IHRleHQ6IHBhcnRPclN0cmluZyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1BhcnRzLnB1c2gocGFydE9yU3RyaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXNzaWduUm9sZVRvUGFydHNBbmRWYWxpZGF0ZVNlbmRNZXNzYWdlUmVxdWVzdChuZXdQYXJ0cyk7XG59XG4vKipcbiAqIFdoZW4gbXVsdGlwbGUgUGFydCB0eXBlcyAoaS5lLiBGdW5jdGlvblJlc3BvbnNlUGFydCBhbmQgVGV4dFBhcnQpIGFyZVxuICogcGFzc2VkIGluIGEgc2luZ2xlIFBhcnQgYXJyYXksIHdlIG1heSBuZWVkIHRvIGFzc2lnbiBkaWZmZXJlbnQgcm9sZXMgdG8gZWFjaFxuICogcGFydC4gQ3VycmVudGx5IG9ubHkgRnVuY3Rpb25SZXNwb25zZVBhcnQgcmVxdWlyZXMgYSByb2xlIG90aGVyIHRoYW4gJ3VzZXInLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBwYXJ0cyBBcnJheSBvZiBwYXJ0cyB0byBwYXNzIHRvIHRoZSBtb2RlbFxuICogQHJldHVybnMgQXJyYXkgb2YgY29udGVudCBpdGVtc1xuICovXG5mdW5jdGlvbiBhc3NpZ25Sb2xlVG9QYXJ0c0FuZFZhbGlkYXRlU2VuZE1lc3NhZ2VSZXF1ZXN0KHBhcnRzKSB7XG4gICAgY29uc3QgdXNlckNvbnRlbnQgPSB7IHJvbGU6IFwidXNlclwiLCBwYXJ0czogW10gfTtcbiAgICBjb25zdCBmdW5jdGlvbkNvbnRlbnQgPSB7IHJvbGU6IFwiZnVuY3Rpb25cIiwgcGFydHM6IFtdIH07XG4gICAgbGV0IGhhc1VzZXJDb250ZW50ID0gZmFsc2U7XG4gICAgbGV0IGhhc0Z1bmN0aW9uQ29udGVudCA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgICBpZiAoXCJmdW5jdGlvblJlc3BvbnNlXCIgaW4gcGFydCkge1xuICAgICAgICAgICAgZnVuY3Rpb25Db250ZW50LnBhcnRzLnB1c2gocGFydCk7XG4gICAgICAgICAgICBoYXNGdW5jdGlvbkNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXNlckNvbnRlbnQucGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgICAgIGhhc1VzZXJDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzVXNlckNvbnRlbnQgJiYgaGFzRnVuY3Rpb25Db250ZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihcIldpdGhpbiBhIHNpbmdsZSBtZXNzYWdlLCBGdW5jdGlvblJlc3BvbnNlIGNhbm5vdCBiZSBtaXhlZCB3aXRoIG90aGVyIHR5cGUgb2YgcGFydCBpbiB0aGUgcmVxdWVzdCBmb3Igc2VuZGluZyBjaGF0IG1lc3NhZ2UuXCIpO1xuICAgIH1cbiAgICBpZiAoIWhhc1VzZXJDb250ZW50ICYmICFoYXNGdW5jdGlvbkNvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiTm8gY29udGVudCBpcyBwcm92aWRlZCBmb3Igc2VuZGluZyBjaGF0IG1lc3NhZ2UuXCIpO1xuICAgIH1cbiAgICBpZiAoaGFzVXNlckNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJDb250ZW50O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb25Db250ZW50O1xufVxuZnVuY3Rpb24gZm9ybWF0Q291bnRUb2tlbnNJbnB1dChwYXJhbXMsIG1vZGVsUGFyYW1zKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0ge1xuICAgICAgICBtb2RlbDogbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLm1vZGVsLFxuICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiBtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXMuZ2VuZXJhdGlvbkNvbmZpZyxcbiAgICAgICAgc2FmZXR5U2V0dGluZ3M6IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy5zYWZldHlTZXR0aW5ncyxcbiAgICAgICAgdG9vbHM6IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy50b29scyxcbiAgICAgICAgdG9vbENvbmZpZzogbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLnRvb2xDb25maWcsXG4gICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiBtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXMuc3lzdGVtSW5zdHJ1Y3Rpb24sXG4gICAgICAgIGNhY2hlZENvbnRlbnQ6IChfYSA9IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy5jYWNoZWRDb250ZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZSxcbiAgICAgICAgY29udGVudHM6IFtdLFxuICAgIH07XG4gICAgY29uc3QgY29udGFpbnNHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0gcGFyYW1zLmdlbmVyYXRlQ29udGVudFJlcXVlc3QgIT0gbnVsbDtcbiAgICBpZiAocGFyYW1zLmNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChjb250YWluc0dlbmVyYXRlQ29udGVudFJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcihcIkNvdW50VG9rZW5zUmVxdWVzdCBtdXN0IGhhdmUgb25lIG9mIGNvbnRlbnRzIG9yIGdlbmVyYXRlQ29udGVudFJlcXVlc3QsIG5vdCBib3RoLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0LmNvbnRlbnRzID0gcGFyYW1zLmNvbnRlbnRzO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250YWluc0dlbmVyYXRlQ29udGVudFJlcXVlc3QpIHtcbiAgICAgICAgZm9ybWF0dGVkR2VuZXJhdGVDb250ZW50UmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZm9ybWF0dGVkR2VuZXJhdGVDb250ZW50UmVxdWVzdCksIHBhcmFtcy5nZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEFycmF5IG9yIHN0cmluZ1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChwYXJhbXMpO1xuICAgICAgICBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0LmNvbnRlbnRzID0gW2NvbnRlbnRdO1xuICAgIH1cbiAgICByZXR1cm4geyBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0OiBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0IH07XG59XG5mdW5jdGlvbiBmb3JtYXRHZW5lcmF0ZUNvbnRlbnRJbnB1dChwYXJhbXMpIHtcbiAgICBsZXQgZm9ybWF0dGVkUmVxdWVzdDtcbiAgICBpZiAocGFyYW1zLmNvbnRlbnRzKSB7XG4gICAgICAgIGZvcm1hdHRlZFJlcXVlc3QgPSBwYXJhbXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBBcnJheSBvciBzdHJpbmdcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZvcm1hdE5ld0NvbnRlbnQocGFyYW1zKTtcbiAgICAgICAgZm9ybWF0dGVkUmVxdWVzdCA9IHsgY29udGVudHM6IFtjb250ZW50XSB9O1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnN5c3RlbUluc3RydWN0aW9uKSB7XG4gICAgICAgIGZvcm1hdHRlZFJlcXVlc3Quc3lzdGVtSW5zdHJ1Y3Rpb24gPSBmb3JtYXRTeXN0ZW1JbnN0cnVjdGlvbihwYXJhbXMuc3lzdGVtSW5zdHJ1Y3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkUmVxdWVzdDtcbn1cbmZ1bmN0aW9uIGZvcm1hdEVtYmVkQ29udGVudElucHV0KHBhcmFtcykge1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkocGFyYW1zKSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChwYXJhbXMpO1xuICAgICAgICByZXR1cm4geyBjb250ZW50IH07XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBodHRwczovL2FpLmdvb2dsZS5kZXYvYXBpL3Jlc3QvdjFiZXRhL0NvbnRlbnQjcGFydFxuY29uc3QgVkFMSURfUEFSVF9GSUVMRFMgPSBbXG4gICAgXCJ0ZXh0XCIsXG4gICAgXCJpbmxpbmVEYXRhXCIsXG4gICAgXCJmdW5jdGlvbkNhbGxcIixcbiAgICBcImZ1bmN0aW9uUmVzcG9uc2VcIixcbiAgICBcImV4ZWN1dGFibGVDb2RlXCIsXG4gICAgXCJjb2RlRXhlY3V0aW9uUmVzdWx0XCIsXG5dO1xuY29uc3QgVkFMSURfUEFSVFNfUEVSX1JPTEUgPSB7XG4gICAgdXNlcjogW1widGV4dFwiLCBcImlubGluZURhdGFcIl0sXG4gICAgZnVuY3Rpb246IFtcImZ1bmN0aW9uUmVzcG9uc2VcIl0sXG4gICAgbW9kZWw6IFtcInRleHRcIiwgXCJmdW5jdGlvbkNhbGxcIiwgXCJleGVjdXRhYmxlQ29kZVwiLCBcImNvZGVFeGVjdXRpb25SZXN1bHRcIl0sXG4gICAgLy8gU3lzdGVtIGluc3RydWN0aW9ucyBzaG91bGRuJ3QgYmUgaW4gaGlzdG9yeSBhbnl3YXkuXG4gICAgc3lzdGVtOiBbXCJ0ZXh0XCJdLFxufTtcbmZ1bmN0aW9uIHZhbGlkYXRlQ2hhdEhpc3RvcnkoaGlzdG9yeSkge1xuICAgIGxldCBwcmV2Q29udGVudCA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgY3VyckNvbnRlbnQgb2YgaGlzdG9yeSkge1xuICAgICAgICBjb25zdCB7IHJvbGUsIHBhcnRzIH0gPSBjdXJyQ29udGVudDtcbiAgICAgICAgaWYgKCFwcmV2Q29udGVudCAmJiByb2xlICE9PSBcInVzZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBGaXJzdCBjb250ZW50IHNob3VsZCBiZSB3aXRoIHJvbGUgJ3VzZXInLCBnb3QgJHtyb2xlfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghUE9TU0lCTEVfUk9MRVMuaW5jbHVkZXMocm9sZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihgRWFjaCBpdGVtIHNob3VsZCBpbmNsdWRlIHJvbGUgZmllbGQuIEdvdCAke3JvbGV9IGJ1dCB2YWxpZCByb2xlcyBhcmU6ICR7SlNPTi5zdHJpbmdpZnkoUE9TU0lCTEVfUk9MRVMpfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwYXJ0cykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihcIkNvbnRlbnQgc2hvdWxkIGhhdmUgJ3BhcnRzJyBwcm9wZXJ0eSB3aXRoIGFuIGFycmF5IG9mIFBhcnRzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihcIkVhY2ggQ29udGVudCBzaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgcGFydFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb3VudEZpZWxkcyA9IHtcbiAgICAgICAgICAgIHRleHQ6IDAsXG4gICAgICAgICAgICBpbmxpbmVEYXRhOiAwLFxuICAgICAgICAgICAgZnVuY3Rpb25DYWxsOiAwLFxuICAgICAgICAgICAgZnVuY3Rpb25SZXNwb25zZTogMCxcbiAgICAgICAgICAgIGZpbGVEYXRhOiAwLFxuICAgICAgICAgICAgZXhlY3V0YWJsZUNvZGU6IDAsXG4gICAgICAgICAgICBjb2RlRXhlY3V0aW9uUmVzdWx0OiAwLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFZBTElEX1BBUlRfRklFTERTKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50RmllbGRzW2tleV0gKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsaWRQYXJ0cyA9IFZBTElEX1BBUlRTX1BFUl9ST0xFW3JvbGVdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBWQUxJRF9QQVJUX0ZJRUxEUykge1xuICAgICAgICAgICAgaWYgKCF2YWxpZFBhcnRzLmluY2x1ZGVzKGtleSkgJiYgY291bnRGaWVsZHNba2V5XSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYENvbnRlbnQgd2l0aCByb2xlICcke3JvbGV9JyBjYW4ndCBjb250YWluICcke2tleX0nIHBhcnRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcmV2Q29udGVudCA9IHRydWU7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlc3BvbnNlIGlzIHZhbGlkIChjb3VsZCBiZSBhcHBlbmRlZCB0byB0aGUgaGlzdG9yeSksIGZsYXNlIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZFJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzID09PSB1bmRlZmluZWQgfHwgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBjb250ZW50ID0gKF9hID0gcmVzcG9uc2UuY2FuZGlkYXRlc1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRlbnQ7XG4gICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjb250ZW50LnBhcnRzID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgY29udGVudC5wYXJ0cykge1xuICAgICAgICBpZiAocGFydCA9PT0gdW5kZWZpbmVkIHx8IE9iamVjdC5rZXlzKHBhcnQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0LnRleHQgIT09IHVuZGVmaW5lZCAmJiBwYXJ0LnRleHQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG8gbm90IGxvZyBhIG1lc3NhZ2UgZm9yIHRoaXMgZXJyb3IuXG4gKi9cbmNvbnN0IFNJTEVOVF9FUlJPUiA9IFwiU0lMRU5UX0VSUk9SXCI7XG4vKipcbiAqIENoYXRTZXNzaW9uIGNsYXNzIHRoYXQgZW5hYmxlcyBzZW5kaW5nIGNoYXQgbWVzc2FnZXMgYW5kIHN0b3Jlc1xuICogaGlzdG9yeSBvZiBzZW50IGFuZCByZWNlaXZlZCBtZXNzYWdlcyBzbyBmYXIuXG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDaGF0U2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCBfcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0T3B0aW9ucyA9IF9yZXF1ZXN0T3B0aW9ucztcbiAgICAgICAgdGhpcy5faGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB0aGlzLl9hcGlLZXkgPSBhcGlLZXk7XG4gICAgICAgIGlmIChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuaGlzdG9yeSkge1xuICAgICAgICAgICAgdmFsaWRhdGVDaGF0SGlzdG9yeShwYXJhbXMuaGlzdG9yeSk7XG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5ID0gcGFyYW1zLmhpc3Rvcnk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY2hhdCBoaXN0b3J5IHNvIGZhci4gQmxvY2tlZCBwcm9tcHRzIGFyZSBub3QgYWRkZWQgdG8gaGlzdG9yeS5cbiAgICAgKiBCbG9ja2VkIGNhbmRpZGF0ZXMgYXJlIG5vdCBhZGRlZCB0byBoaXN0b3J5LCBub3IgYXJlIHRoZSBwcm9tcHRzIHRoYXRcbiAgICAgKiBnZW5lcmF0ZWQgdGhlbS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRIaXN0b3J5KCkge1xuICAgICAgICBhd2FpdCB0aGlzLl9zZW5kUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpc3Rvcnk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgY2hhdCBtZXNzYWdlIGFuZCByZWNlaXZlcyBhIG5vbi1zdHJlYW1pbmdcbiAgICAgKiB7QGxpbmsgR2VuZXJhdGVDb250ZW50UmVzdWx0fS5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIHNlbmRNZXNzYWdlKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCA9IHtcbiAgICAgICAgICAgIHNhZmV0eVNldHRpbmdzOiAoX2EgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNhZmV0eVNldHRpbmdzLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzogKF9iID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5nZW5lcmF0aW9uQ29uZmlnLFxuICAgICAgICAgICAgdG9vbHM6IChfYyA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9vbHMsXG4gICAgICAgICAgICB0b29sQ29uZmlnOiAoX2QgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRvb2xDb25maWcsXG4gICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbjogKF9lID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5zeXN0ZW1JbnN0cnVjdGlvbixcbiAgICAgICAgICAgIGNhY2hlZENvbnRlbnQ6IChfZiA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YuY2FjaGVkQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnRzOiBbLi4udGhpcy5faGlzdG9yeSwgbmV3Q29udGVudF0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNoYXRTZXNzaW9uUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICBsZXQgZmluYWxSZXN1bHQ7XG4gICAgICAgIC8vIEFkZCBvbnRvIHRoZSBjaGFpbi5cbiAgICAgICAgdGhpcy5fc2VuZFByb21pc2UgPSB0aGlzLl9zZW5kUHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gZ2VuZXJhdGVDb250ZW50KHRoaXMuX2FwaUtleSwgdGhpcy5tb2RlbCwgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCwgY2hhdFNlc3Npb25SZXF1ZXN0T3B0aW9ucykpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZFJlc3BvbnNlKHJlc3VsdC5yZXNwb25zZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnB1c2gobmV3Q29udGVudCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VDb250ZW50ID0gT2JqZWN0LmFzc2lnbih7IHBhcnRzOiBbXSwgXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc3BvbnNlIHNlZW1zIHRvIGNvbWUgYmFjayB3aXRob3V0IGEgcm9sZSBzZXQuXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IFwibW9kZWxcIiB9LCAoX2EgPSByZXN1bHQucmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkucHVzaChyZXNwb25zZUNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2tFcnJvck1lc3NhZ2UgPSBmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXN1bHQucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmIChibG9ja0Vycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYHNlbmRNZXNzYWdlKCkgd2FzIHVuc3VjY2Vzc2Z1bC4gJHtibG9ja0Vycm9yTWVzc2FnZX0uIEluc3BlY3QgcmVzcG9uc2Ugb2JqZWN0IGZvciBkZXRhaWxzLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAvLyBSZXNldHMgX3NlbmRQcm9taXNlIHRvIGF2b2lkIHN1YnNlcXVlbnQgY2FsbHMgZmFpbGluZyBhbmQgdGhyb3cgZXJyb3IuXG4gICAgICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICByZXR1cm4gZmluYWxSZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgY2hhdCBtZXNzYWdlIGFuZCByZWNlaXZlcyB0aGUgcmVzcG9uc2UgYXMgYVxuICAgICAqIHtAbGluayBHZW5lcmF0ZUNvbnRlbnRTdHJlYW1SZXN1bHR9IGNvbnRhaW5pbmcgYW4gaXRlcmFibGUgc3RyZWFtXG4gICAgICogYW5kIGEgcmVzcG9uc2UgcHJvbWlzZS5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIHNlbmRNZXNzYWdlU3RyZWFtKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCA9IHtcbiAgICAgICAgICAgIHNhZmV0eVNldHRpbmdzOiAoX2EgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNhZmV0eVNldHRpbmdzLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzogKF9iID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5nZW5lcmF0aW9uQ29uZmlnLFxuICAgICAgICAgICAgdG9vbHM6IChfYyA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9vbHMsXG4gICAgICAgICAgICB0b29sQ29uZmlnOiAoX2QgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRvb2xDb25maWcsXG4gICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbjogKF9lID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5zeXN0ZW1JbnN0cnVjdGlvbixcbiAgICAgICAgICAgIGNhY2hlZENvbnRlbnQ6IChfZiA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YuY2FjaGVkQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnRzOiBbLi4udGhpcy5faGlzdG9yeSwgbmV3Q29udGVudF0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNoYXRTZXNzaW9uUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzdHJlYW1Qcm9taXNlID0gZ2VuZXJhdGVDb250ZW50U3RyZWFtKHRoaXMuX2FwaUtleSwgdGhpcy5tb2RlbCwgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCwgY2hhdFNlc3Npb25SZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIC8vIEFkZCBvbnRvIHRoZSBjaGFpbi5cbiAgICAgICAgdGhpcy5fc2VuZFByb21pc2UgPSB0aGlzLl9zZW5kUHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gc3RyZWFtUHJvbWlzZSlcbiAgICAgICAgICAgIC8vIFRoaXMgbXVzdCBiZSBoYW5kbGVkIHRvIGF2b2lkIHVuaGFuZGxlZCByZWplY3Rpb24sIGJ1dCBqdW1wXG4gICAgICAgICAgICAvLyB0byB0aGUgZmluYWwgY2F0Y2ggYmxvY2sgd2l0aCBhIGxhYmVsIHRvIG5vdCBsb2cgdGhpcyBlcnJvci5cbiAgICAgICAgICAgIC5jYXRjaCgoX2lnbm9yZWQpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihTSUxFTlRfRVJST1IpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHN0cmVhbVJlc3VsdCkgPT4gc3RyZWFtUmVzdWx0LnJlc3BvbnNlKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZFJlc3BvbnNlKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkucHVzaChuZXdDb250ZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUNvbnRlbnQgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIC8vIFJlc3BvbnNlIHNlZW1zIHRvIGNvbWUgYmFjayB3aXRob3V0IGEgcm9sZSBzZXQuXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZUNvbnRlbnQucm9sZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQucm9sZSA9IFwibW9kZWxcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKHJlc3BvbnNlQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBibG9ja0Vycm9yTWVzc2FnZSA9IGZvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBzZW5kTWVzc2FnZVN0cmVhbSgpIHdhcyB1bnN1Y2Nlc3NmdWwuICR7YmxvY2tFcnJvck1lc3NhZ2V9LiBJbnNwZWN0IHJlc3BvbnNlIG9iamVjdCBmb3IgZGV0YWlscy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIC8vIEVycm9ycyBpbiBzdHJlYW1Qcm9taXNlIGFyZSBhbHJlYWR5IGNhdGNoYWJsZSBieSB0aGUgdXNlciBhc1xuICAgICAgICAgICAgLy8gc3RyZWFtUHJvbWlzZSBpcyByZXR1cm5lZC5cbiAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0aW5nIHRoZSBlcnJvciBtZXNzYWdlIGluIGxvZ3MuXG4gICAgICAgICAgICBpZiAoZS5tZXNzYWdlICE9PSBTSUxFTlRfRVJST1IpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2VycyBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gX3NlbmRQcm9taXNlIHRvIGNhdGNoIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIGRvd25zdHJlYW0gZnJvbSBzdHJlYW1Qcm9taXNlLCBzbyB0aGV5IHNob3VsZCBub3QgdGhyb3cuXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdHJlYW1Qcm9taXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvdW50VG9rZW5zKGFwaUtleSwgbW9kZWwsIHBhcmFtcywgc2luZ2xlUmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suQ09VTlRfVE9LRU5TLCBhcGlLZXksIGZhbHNlLCBKU09OLnN0cmluZ2lmeShwYXJhbXMpLCBzaW5nbGVSZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGVtYmVkQ29udGVudChhcGlLZXksIG1vZGVsLCBwYXJhbXMsIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlTW9kZWxSZXF1ZXN0KG1vZGVsLCBUYXNrLkVNQkVEX0NPTlRFTlQsIGFwaUtleSwgZmFsc2UsIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuYXN5bmMgZnVuY3Rpb24gYmF0Y2hFbWJlZENvbnRlbnRzKGFwaUtleSwgbW9kZWwsIHBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXF1ZXN0c1dpdGhNb2RlbCA9IHBhcmFtcy5yZXF1ZXN0cy5tYXAoKHJlcXVlc3QpID0+IHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgbW9kZWwgfSk7XG4gICAgfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlTW9kZWxSZXF1ZXN0KG1vZGVsLCBUYXNrLkJBVENIX0VNQkVEX0NPTlRFTlRTLCBhcGlLZXksIGZhbHNlLCBKU09OLnN0cmluZ2lmeSh7IHJlcXVlc3RzOiByZXF1ZXN0c1dpdGhNb2RlbCB9KSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENsYXNzIGZvciBnZW5lcmF0aXZlIG1vZGVsIEFQSXMuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdlbmVyYXRpdmVNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBtb2RlbFBhcmFtcywgX3JlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgICAgIHRoaXMuX3JlcXVlc3RPcHRpb25zID0gX3JlcXVlc3RPcHRpb25zO1xuICAgICAgICBpZiAobW9kZWxQYXJhbXMubW9kZWwuaW5jbHVkZXMoXCIvXCIpKSB7XG4gICAgICAgICAgICAvLyBNb2RlbHMgbWF5IGJlIG5hbWVkIFwibW9kZWxzL21vZGVsLW5hbWVcIiBvciBcInR1bmVkTW9kZWxzL21vZGVsLW5hbWVcIlxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsUGFyYW1zLm1vZGVsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgcGF0aCBpcyBub3QgaW5jbHVkZWQsIGFzc3VtZSBpdCdzIGEgbm9uLXR1bmVkIG1vZGVsLlxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IGBtb2RlbHMvJHttb2RlbFBhcmFtcy5tb2RlbH1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2VuZXJhdGlvbkNvbmZpZyA9IG1vZGVsUGFyYW1zLmdlbmVyYXRpb25Db25maWcgfHwge307XG4gICAgICAgIHRoaXMuc2FmZXR5U2V0dGluZ3MgPSBtb2RlbFBhcmFtcy5zYWZldHlTZXR0aW5ncyB8fCBbXTtcbiAgICAgICAgdGhpcy50b29scyA9IG1vZGVsUGFyYW1zLnRvb2xzO1xuICAgICAgICB0aGlzLnRvb2xDb25maWcgPSBtb2RlbFBhcmFtcy50b29sQ29uZmlnO1xuICAgICAgICB0aGlzLnN5c3RlbUluc3RydWN0aW9uID0gZm9ybWF0U3lzdGVtSW5zdHJ1Y3Rpb24obW9kZWxQYXJhbXMuc3lzdGVtSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB0aGlzLmNhY2hlZENvbnRlbnQgPSBtb2RlbFBhcmFtcy5jYWNoZWRDb250ZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBub24tc3RyZWFtaW5nIGNhbGwgdG8gdGhlIG1vZGVsXG4gICAgICogYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBzaW5nbGUge0BsaW5rIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlfS5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlQ29udGVudChyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUGFyYW1zID0gZm9ybWF0R2VuZXJhdGVDb250ZW50SW5wdXQocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9yZXF1ZXN0T3B0aW9ucyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlQ29udGVudCh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgT2JqZWN0LmFzc2lnbih7IGdlbmVyYXRpb25Db25maWc6IHRoaXMuZ2VuZXJhdGlvbkNvbmZpZywgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsIHRvb2xzOiB0aGlzLnRvb2xzLCB0b29sQ29uZmlnOiB0aGlzLnRvb2xDb25maWcsIHN5c3RlbUluc3RydWN0aW9uOiB0aGlzLnN5c3RlbUluc3RydWN0aW9uLCBjYWNoZWRDb250ZW50OiAoX2EgPSB0aGlzLmNhY2hlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lIH0sIGZvcm1hdHRlZFBhcmFtcyksIGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBzaW5nbGUgc3RyZWFtaW5nIGNhbGwgdG8gdGhlIG1vZGVsIGFuZCByZXR1cm5zIGFuIG9iamVjdFxuICAgICAqIGNvbnRhaW5pbmcgYW4gaXRlcmFibGUgc3RyZWFtIHRoYXQgaXRlcmF0ZXMgb3ZlciBhbGwgY2h1bmtzIGluIHRoZVxuICAgICAqIHN0cmVhbWluZyByZXNwb25zZSBhcyB3ZWxsIGFzIGEgcHJvbWlzZSB0aGF0IHJldHVybnMgdGhlIGZpbmFsXG4gICAgICogYWdncmVnYXRlZCByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlQ29udGVudFN0cmVhbShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUGFyYW1zID0gZm9ybWF0R2VuZXJhdGVDb250ZW50SW5wdXQocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9yZXF1ZXN0T3B0aW9ucyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlQ29udGVudFN0cmVhbSh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgT2JqZWN0LmFzc2lnbih7IGdlbmVyYXRpb25Db25maWc6IHRoaXMuZ2VuZXJhdGlvbkNvbmZpZywgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsIHRvb2xzOiB0aGlzLnRvb2xzLCB0b29sQ29uZmlnOiB0aGlzLnRvb2xDb25maWcsIHN5c3RlbUluc3RydWN0aW9uOiB0aGlzLnN5c3RlbUluc3RydWN0aW9uLCBjYWNoZWRDb250ZW50OiAoX2EgPSB0aGlzLmNhY2hlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lIH0sIGZvcm1hdHRlZFBhcmFtcyksIGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhIG5ldyB7QGxpbmsgQ2hhdFNlc3Npb259IGluc3RhbmNlIHdoaWNoIGNhbiBiZSB1c2VkIGZvclxuICAgICAqIG11bHRpLXR1cm4gY2hhdHMuXG4gICAgICovXG4gICAgc3RhcnRDaGF0KHN0YXJ0Q2hhdFBhcmFtcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdFNlc3Npb24odGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIE9iamVjdC5hc3NpZ24oeyBnZW5lcmF0aW9uQ29uZmlnOiB0aGlzLmdlbmVyYXRpb25Db25maWcsIHNhZmV0eVNldHRpbmdzOiB0aGlzLnNhZmV0eVNldHRpbmdzLCB0b29sczogdGhpcy50b29scywgdG9vbENvbmZpZzogdGhpcy50b29sQ29uZmlnLCBzeXN0ZW1JbnN0cnVjdGlvbjogdGhpcy5zeXN0ZW1JbnN0cnVjdGlvbiwgY2FjaGVkQ29udGVudDogKF9hID0gdGhpcy5jYWNoZWRDb250ZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZSB9LCBzdGFydENoYXRQYXJhbXMpLCB0aGlzLl9yZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvdW50cyB0aGUgdG9rZW5zIGluIHRoZSBwcm92aWRlZCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgY291bnRUb2tlbnMocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRDb3VudFRva2Vuc0lucHV0KHJlcXVlc3QsIHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzogdGhpcy5nZW5lcmF0aW9uQ29uZmlnLFxuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICB0b29sczogdGhpcy50b29scyxcbiAgICAgICAgICAgIHRvb2xDb25maWc6IHRoaXMudG9vbENvbmZpZyxcbiAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiB0aGlzLnN5c3RlbUluc3RydWN0aW9uLFxuICAgICAgICAgICAgY2FjaGVkQ29udGVudDogdGhpcy5jYWNoZWRDb250ZW50LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gY291bnRUb2tlbnModGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIGZvcm1hdHRlZFBhcmFtcywgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWJlZHMgdGhlIHByb3ZpZGVkIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBGaWVsZHMgc2V0IGluIHRoZSBvcHRpb25hbCB7QGxpbmsgU2luZ2xlUmVxdWVzdE9wdGlvbnN9IHBhcmFtZXRlciB3aWxsXG4gICAgICogdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIHtAbGluayBSZXF1ZXN0T3B0aW9uc30gdmFsdWVzIHByb3ZpZGVkIHRvXG4gICAgICoge0BsaW5rIEdvb2dsZUdlbmVyYXRpdmVBSS5nZXRHZW5lcmF0aXZlTW9kZWwgfS5cbiAgICAgKi9cbiAgICBhc3luYyBlbWJlZENvbnRlbnQocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRFbWJlZENvbnRlbnRJbnB1dChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZW1iZWRDb250ZW50KHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBmb3JtYXR0ZWRQYXJhbXMsIGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1iZWRzIGFuIGFycmF5IG9mIHtAbGluayBFbWJlZENvbnRlbnRSZXF1ZXN0fXMuXG4gICAgICpcbiAgICAgKiBGaWVsZHMgc2V0IGluIHRoZSBvcHRpb25hbCB7QGxpbmsgU2luZ2xlUmVxdWVzdE9wdGlvbnN9IHBhcmFtZXRlciB3aWxsXG4gICAgICogdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIHtAbGluayBSZXF1ZXN0T3B0aW9uc30gdmFsdWVzIHByb3ZpZGVkIHRvXG4gICAgICoge0BsaW5rIEdvb2dsZUdlbmVyYXRpdmVBSS5nZXRHZW5lcmF0aXZlTW9kZWwgfS5cbiAgICAgKi9cbiAgICBhc3luYyBiYXRjaEVtYmVkQ29udGVudHMoYmF0Y2hFbWJlZENvbnRlbnRSZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9yZXF1ZXN0T3B0aW9ucyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGJhdGNoRW1iZWRDb250ZW50cyh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgYmF0Y2hFbWJlZENvbnRlbnRSZXF1ZXN0LCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUb3AtbGV2ZWwgY2xhc3MgZm9yIHRoaXMgU0RLXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSSB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5KSB7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEge0BsaW5rIEdlbmVyYXRpdmVNb2RlbH0gaW5zdGFuY2UgZm9yIHRoZSBwcm92aWRlZCBtb2RlbCBuYW1lLlxuICAgICAqL1xuICAgIGdldEdlbmVyYXRpdmVNb2RlbChtb2RlbFBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFtb2RlbFBhcmFtcy5tb2RlbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBNdXN0IHByb3ZpZGUgYSBtb2RlbCBuYW1lLiBgICtcbiAgICAgICAgICAgICAgICBgRXhhbXBsZTogZ2VuYWkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6ICdteS1tb2RlbC1uYW1lJyB9KWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGl2ZU1vZGVsKHRoaXMuYXBpS2V5LCBtb2RlbFBhcmFtcywgcmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEge0BsaW5rIEdlbmVyYXRpdmVNb2RlbH0gaW5zdGFuY2UgZnJvbSBwcm92aWRlZCBjb250ZW50IGNhY2hlLlxuICAgICAqL1xuICAgIGdldEdlbmVyYXRpdmVNb2RlbEZyb21DYWNoZWRDb250ZW50KGNhY2hlZENvbnRlbnQsIG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgICAgICBpZiAoIWNhY2hlZENvbnRlbnQubmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKFwiQ2FjaGVkIGNvbnRlbnQgbXVzdCBjb250YWluIGEgYG5hbWVgIGZpZWxkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhY2hlZENvbnRlbnQubW9kZWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcihcIkNhY2hlZCBjb250ZW50IG11c3QgY29udGFpbiBhIGBtb2RlbGAgZmllbGQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb3QgY2hlY2tpbmcgdG9vbHMgYW5kIHRvb2xDb25maWcgZm9yIG5vdyBhcyBpdCB3b3VsZCByZXF1aXJlIGEgZGVlcFxuICAgICAgICAgKiBlcXVhbGl0eSBjb21wYXJpc29uIGFuZCBpc24ndCBsaWtlbHkgdG8gYmUgYSBjb21tb24gY2FzZS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGRpc2FsbG93ZWREdXBsaWNhdGVzID0gW1wibW9kZWxcIiwgXCJzeXN0ZW1JbnN0cnVjdGlvblwiXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZGlzYWxsb3dlZER1cGxpY2F0ZXMpIHtcbiAgICAgICAgICAgIGlmICgobW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zW2tleV0pICYmXG4gICAgICAgICAgICAgICAgY2FjaGVkQ29udGVudFtrZXldICYmXG4gICAgICAgICAgICAgICAgKG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtc1trZXldKSAhPT0gY2FjaGVkQ29udGVudFtrZXldKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJtb2RlbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsUGFyYW1zQ29tcCA9IG1vZGVsUGFyYW1zLm1vZGVsLnN0YXJ0c1dpdGgoXCJtb2RlbHMvXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1vZGVsUGFyYW1zLm1vZGVsLnJlcGxhY2UoXCJtb2RlbHMvXCIsIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1vZGVsUGFyYW1zLm1vZGVsO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRDb250ZW50Q29tcCA9IGNhY2hlZENvbnRlbnQubW9kZWwuc3RhcnRzV2l0aChcIm1vZGVscy9cIilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2FjaGVkQ29udGVudC5tb2RlbC5yZXBsYWNlKFwibW9kZWxzL1wiLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjYWNoZWRDb250ZW50Lm1vZGVsO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWxQYXJhbXNDb21wID09PSBjYWNoZWRDb250ZW50Q29tcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKGBEaWZmZXJlbnQgdmFsdWUgZm9yIFwiJHtrZXl9XCIgc3BlY2lmaWVkIGluIG1vZGVsUGFyYW1zYCArXG4gICAgICAgICAgICAgICAgICAgIGAgKCR7bW9kZWxQYXJhbXNba2V5XX0pIGFuZCBjYWNoZWRDb250ZW50ICgke2NhY2hlZENvbnRlbnRba2V5XX0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWxQYXJhbXNGcm9tQ2FjaGUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1vZGVsUGFyYW1zKSwgeyBtb2RlbDogY2FjaGVkQ29udGVudC5tb2RlbCwgdG9vbHM6IGNhY2hlZENvbnRlbnQudG9vbHMsIHRvb2xDb25maWc6IGNhY2hlZENvbnRlbnQudG9vbENvbmZpZywgc3lzdGVtSW5zdHJ1Y3Rpb246IGNhY2hlZENvbnRlbnQuc3lzdGVtSW5zdHJ1Y3Rpb24sIGNhY2hlZENvbnRlbnQgfSk7XG4gICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGl2ZU1vZGVsKHRoaXMuYXBpS2V5LCBtb2RlbFBhcmFtc0Zyb21DYWNoZSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQmxvY2tSZWFzb24sIENoYXRTZXNzaW9uLCBEeW5hbWljUmV0cmlldmFsTW9kZSwgRXhlY3V0YWJsZUNvZGVMYW5ndWFnZSwgRmluaXNoUmVhc29uLCBGdW5jdGlvbkNhbGxpbmdNb2RlLCBHZW5lcmF0aXZlTW9kZWwsIEdvb2dsZUdlbmVyYXRpdmVBSSwgR29vZ2xlR2VuZXJhdGl2ZUFJQWJvcnRFcnJvciwgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IsIEdvb2dsZUdlbmVyYXRpdmVBSUZldGNoRXJyb3IsIEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yLCBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yLCBIYXJtQmxvY2tUaHJlc2hvbGQsIEhhcm1DYXRlZ29yeSwgSGFybVByb2JhYmlsaXR5LCBPdXRjb21lLCBQT1NTSUJMRV9ST0xFUywgU2NoZW1hVHlwZSwgVGFza1R5cGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiIsICIvKipcbiAqIFx1QkNBMVx1RDEzMCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQzBGIFx1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDQzRcdUMwQjAgXHVCQUE4XHVCNEM4XG4gKi9cblxuaW1wb3J0IHR5cGUgeyBBcHAsIFBsdWdpbk1hbmlmZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSAnQGdvb2dsZS9nZW5lcmF0aXZlLWFpJztcblxuLyoqXG4gKiBcdUNGNTRcdUMwQUNcdUM3NzggXHVDNzIwXHVDMEFDXHVCM0M0XHVCOTdDIFx1QUNDNFx1QzBCMFx1RDU2OVx1QjJDOFx1QjJFNFxuICogQHBhcmFtIHZlY0EgXHVCQ0ExXHVEMTMwIEFcbiAqIEBwYXJhbSB2ZWNCIFx1QkNBMVx1RDEzMCBCXG4gKiBAcmV0dXJucyBcdUNGNTRcdUMwQUNcdUM3NzggXHVDNzIwXHVDMEFDXHVCM0M0ICgtMX4xKVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29zaW5lU2ltaWxhcml0eSh2ZWNBOiBudW1iZXJbXSwgdmVjQjogbnVtYmVyW10pOiBudW1iZXIge1xuICBpZiAodmVjQS5sZW5ndGggIT09IHZlY0IubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcdUJDQTFcdUQxMzBcdUM3NTggXHVDQzI4XHVDNkQwXHVDNzc0IFx1Qzc3Q1x1Q0U1OFx1RDU1OFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTQnKTtcbiAgfVxuXG4gIGxldCBkb3RQcm9kdWN0ID0gMDtcbiAgbGV0IG5vcm1BID0gMDtcbiAgbGV0IG5vcm1CID0gMDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHZlY0EubGVuZ3RoOyBpKyspIHtcbiAgICBkb3RQcm9kdWN0ICs9IHZlY0FbaV0gKiB2ZWNCW2ldO1xuICAgIG5vcm1BICs9IHZlY0FbaV0gKiB2ZWNBW2ldO1xuICAgIG5vcm1CICs9IHZlY0JbaV0gKiB2ZWNCW2ldO1xuICB9XG5cbiAgY29uc3QgZGVub21pbmF0b3IgPSBNYXRoLnNxcnQobm9ybUEpICogTWF0aC5zcXJ0KG5vcm1CKTtcbiAgaWYgKGRlbm9taW5hdG9yID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICByZXR1cm4gZG90UHJvZHVjdCAvIGRlbm9taW5hdG9yO1xufVxuXG4vKipcbiAqIEdlbWluaSBBUElcdUI5N0MgXHVDMEFDXHVDNkE5XHVENTU4XHVDNUVDIFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM3ODRcdUJDQTBcdUI1MjlcdUM3NDQgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0XG4gKi9cbmV4cG9ydCBjbGFzcyBFbWJlZGRpbmdHZW5lcmF0b3Ige1xuICBwcml2YXRlIGdlbkFJOiBHb29nbGVHZW5lcmF0aXZlQUkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtb2RlbDogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSBjYWNoZTogTWFwPHN0cmluZywgbnVtYmVyW10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGxhc3RFbWJlZGRpbmc6IG51bWJlcltdIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbGFzdFRleHQ6IHN0cmluZyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBpS2V5OiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBtb2RlbE5hbWU6IHN0cmluZyA9ICdlbWJlZGRpbmctMDAxJyxcbiAgICBwcml2YXRlIGFwcD86IEFwcCxcbiAgICBwcml2YXRlIG1hbmlmZXN0PzogUGx1Z2luTWFuaWZlc3QsXG4gICAgcHJpdmF0ZSBlbmFibGVMb2dnaW5nOiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgaWYgKGFwaUtleSkge1xuICAgICAgdGhpcy5nZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkoYXBpS2V5KTtcbiAgICAgIC8vIG1vZGVscy8gXHVDODExXHVCNDUwXHVDMEFDIFx1QzgxQ1x1QUM3MFxuICAgICAgY29uc3QgY2xlYW5Nb2RlbE5hbWUgPSB0aGlzLm1vZGVsTmFtZS5yZXBsYWNlKC9ebW9kZWxzXFwvLywgJycpO1xuICAgICAgdGhpcy5tb2RlbCA9IHRoaXMuZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IGNsZWFuTW9kZWxOYW1lIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVCQ0ExXHVEMTMwXHVCODVDIFx1QkNDMFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNFxuICAgKiBAcGFyYW0gdGV4dCBcdUM3ODVcdUI4MjUgXHVEMTREXHVDMkE0XHVEMkI4XG4gICAqIEByZXR1cm5zIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJDQTFcdUQxMzBcbiAgICovXG4gIGFzeW5jIGVtYmVkKHRleHQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgICBpZiAoIXRoaXMubW9kZWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignR2VtaW5pIEFQSVx1QUMwMCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0Jyk7XG4gICAgfVxuXG4gICAgbGV0IGVtYmVkZGluZzogbnVtYmVyW10gfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBcdUNFOTBcdUMyREMgXHVENjU1XHVDNzc4XG4gICAgaWYgKHRoaXMuY2FjaGUuaGFzKHRleHQpKSB7XG4gICAgICBlbWJlZGRpbmcgPSB0aGlzLmNhY2hlLmdldCh0ZXh0KSE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZW1iZWRDb250ZW50KHRleHQpO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSByZXN1bHQ/LmVtYmVkZGluZz8udmFsdWVzO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzKSB8fCB2YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNzUxXHVCMkY1XHVDNzc0IFx1QkU0NFx1QzVCNCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbWJlZGRpbmcgPSB2YWx1ZXM7XG5cbiAgICAgICAgLy8gXHVDRTkwXHVDMkRDXHVDNUQwIFx1QzgwMFx1QzdBNVxuICAgICAgICB0aGlzLmNhY2hlLnNldCh0ZXh0LCBlbWJlZGRpbmcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWVtYmVkZGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxIFx1QUNCMFx1QUNGQ1x1QUMwMCBcdUM1QzZcdUMyQjVcdUIyQzhcdUIyRTQnKTtcbiAgICB9XG5cbiAgICAvLyBcdUI4NUNcdUFFNDUgXHVDQzk4XHVCOUFDIC0gXHVCQUE4XHVCNEUwIFx1Qzc4NFx1QkNBMFx1QjUyOShcdUNFOTBcdUMyREMgXHVEM0VDXHVENTY4KVx1Qzc0NCBcdUI4NUNcdUFFNDVcbiAgICBpZiAodGhpcy5lbmFibGVMb2dnaW5nICYmIHRoaXMuYXBwKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGFwcGVuZEVtYmVkZGluZ0xvZyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9sb2dnaW5nJyk7XG4gICAgICAgIGxldCBzaW1pbGFyaXR5OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBwcmV2aW91c1RleHQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhpcy5sYXN0RW1iZWRkaW5nKSB7XG4gICAgICAgICAgc2ltaWxhcml0eSA9IGNvc2luZVNpbWlsYXJpdHkodGhpcy5sYXN0RW1iZWRkaW5nLCBlbWJlZGRpbmcpO1xuICAgICAgICAgIHByZXZpb3VzVGV4dCA9IHRoaXMubGFzdFRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBhcHBlbmRFbWJlZGRpbmdMb2codGhpcy5hcHAsIHRoaXMubWFuaWZlc3QsIHtcbiAgICAgICAgICBpbnB1dFRleHQ6IHRleHQsXG4gICAgICAgICAgZW1iZWRkaW5nLFxuICAgICAgICAgIHNpbWlsYXJpdHksXG4gICAgICAgICAgcHJldmlvdXNJbnB1dFRleHQ6IHByZXZpb3VzVGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Qzc4NFx1QkNBMFx1QjUyOSBcdUI4NUNcdUFERjggXHVDNzkxXHVDMTMxIFx1QzJFNFx1RDMyODonLCBsb2dFcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjhcbiAgICB0aGlzLmxhc3RFbWJlZGRpbmcgPSBlbWJlZGRpbmc7XG4gICAgdGhpcy5sYXN0VGV4dCA9IHRleHQ7XG5cbiAgICByZXR1cm4gZW1iZWRkaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzVFQ1x1QjdFQyBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVENTVDIFx1QkM4OFx1QzVEMCBcdUJDQTFcdUQxMzBcdUI4NUMgXHVCQ0MwXHVENjU4XHVENTY5XHVCMkM4XHVCMkU0XG4gICAqIEBwYXJhbSB0ZXh0cyBcdUM3ODVcdUI4MjUgXHVEMTREXHVDMkE0XHVEMkI4IFx1QkMzMFx1QzVGNFxuICAgKiBAcmV0dXJucyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQ0ExXHVEMTMwIFx1QkMzMFx1QzVGNFxuICAgKi9cbiAgYXN5bmMgZW1iZWRCYXRjaCh0ZXh0czogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlcltdW10+IHtcbiAgICBjb25zdCBlbWJlZGRpbmdzOiBudW1iZXJbXVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRleHQgb2YgdGV4dHMpIHtcbiAgICAgIGNvbnN0IGVtYmVkZGluZyA9IGF3YWl0IHRoaXMuZW1iZWQodGV4dCk7XG4gICAgICBlbWJlZGRpbmdzLnB1c2goZW1iZWRkaW5nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW1iZWRkaW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNFOTBcdUMyRENcdUI5N0MgXHVDRDA4XHVBRTMwXHVENjU0XHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxufVxuIiwgIi8qKlxuICogXHVDOEZDXHVDODFDIFx1QkQ4NFx1QjlBQyBcdUM1RDRcdUM5QzRcbiAqIFxuICogXHVCMzAwXHVENjU0XHVDNzU4IFx1Qzc1OFx1QkJGOFx1Qjg2MFx1QzgwMSBcdUFDQkRcdUFDQzRcdUI5N0MgXHVEMEQwXHVDOUMwXHVENTU4XHVDNUVDIFx1QzhGQ1x1QzgxQ1x1QkNDNFx1Qjg1QyBcdUJEODRcdUI5QUNcdUQ1NjlcdUIyQzhcdUIyRTQuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBBcHAsIFBsdWdpbk1hbmlmZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25UdXJuIH0gZnJvbSAnLi4vY29udmVyc2F0aW9uJztcbmltcG9ydCB7IGV4dHJhY3RLZXl3b3JkcywgZm9ybWF0S2V5d29yZHNNZXRhZGF0YSwgZXh0cmFjdENvbW1vbktleXdvcmRzIH0gZnJvbSAnLi9rZXl3b3JkRXh0cmFjdG9yJztcbmltcG9ydCB7IEVtYmVkZGluZ0dlbmVyYXRvciwgY29zaW5lU2ltaWxhcml0eSB9IGZyb20gJy4vZW1iZWRkaW5nU2VydmljZSc7XG5pbXBvcnQgeyBhcHBlbmRUb3BpY1NlcGFyYXRpb25GYWlsdXJlTG9nIH0gZnJvbSAnLi4vbG9nZ2luZyc7XG5pbXBvcnQgdHlwZSB7IENvbnZlcnNhdGlvblNlZ21lbnQsIFRvcGljQm91bmRhcnksIFNlZ21lbnRMaW5rLCBUb3BpY1NlcGFyYXRpb25SZXN1bHQgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBUb3BpY1NlcGFyYXRpb25Db25maWcge1xuICBhcGlLZXk6IHN0cmluZztcbiAgZW1iZWRkaW5nTW9kZWw/OiBzdHJpbmc7IC8vIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJBQThcdUIzNzggXHVDNzc0XHVCOTg0XG4gIHNpbWlsYXJpdHlUaHJlc2hvbGQ/OiBudW1iZXI7IC8vIFx1QUUzMFx1QkNGOFx1QUMxMjogMC43NVxuICBtaW5TZWdtZW50TGVuZ3RoPzogbnVtYmVyOyAvLyBcdUNENUNcdUMxOEMgXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QUUzOFx1Qzc3NCAoXHVEMTM0IFx1QzIxOClcbiAgd2luZG93U2l6ZT86IG51bWJlcjsgLy8gXHVDMkFDXHVCNzdDXHVDNzc0XHVCNTI5IFx1QzcwOFx1QjNDNFx1QzZCMCBcdUQwNkNcdUFFMzBcbiAgZW5hYmxlS2V5d29yZE1ldGFkYXRhPzogYm9vbGVhbjsgLy8gXHVEMEE0XHVDNkNDXHVCNERDIFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwQUNcdUM2QTkgXHVDNUVDXHVCRDgwXG4gIGFwcD86IEFwcDsgLy8gXHVCODVDXHVBRTQ1XHVDNkE5IE9ic2lkaWFuIFx1QzU3MVxuICBtYW5pZmVzdD86IFBsdWdpbk1hbmlmZXN0OyAvLyBcdUQ1MENcdUI3RUNcdUFERjhcdUM3NzggXHVCOUU0XHVCMkM4XHVEMzk4XHVDMkE0XHVEMkI4XG4gIGVuYWJsZUVtYmVkZGluZ0xvZ2dpbmc/OiBib29sZWFuOyAvLyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVCODVDXHVBRTQ1IFx1RDY1Q1x1QzEzMVx1RDY1NFxufVxuXG5leHBvcnQgY2xhc3MgVG9waWNTZXBhcmF0aW9uRW5naW5lIHtcbiAgcHJpdmF0ZSBlbWJlZGRpbmdHZW5lcmF0b3I6IEVtYmVkZGluZ0dlbmVyYXRvcjtcbiAgcHJpdmF0ZSBjb25maWc6IFRvcGljU2VwYXJhdGlvbkNvbmZpZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFRvcGljU2VwYXJhdGlvbkNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgLi4uY29uZmlnLFxuICAgICAgc2ltaWxhcml0eVRocmVzaG9sZDogY29uZmlnLnNpbWlsYXJpdHlUaHJlc2hvbGQgPz8gMC43NSxcbiAgICAgIG1pblNlZ21lbnRMZW5ndGg6IGNvbmZpZy5taW5TZWdtZW50TGVuZ3RoID8/IDIsXG4gICAgICB3aW5kb3dTaXplOiBjb25maWcud2luZG93U2l6ZSA/PyAyLFxuICAgICAgZW5hYmxlS2V5d29yZE1ldGFkYXRhOiBjb25maWcuZW5hYmxlS2V5d29yZE1ldGFkYXRhID8/IHRydWUsXG4gICAgICBlbmFibGVFbWJlZGRpbmdMb2dnaW5nOiBjb25maWcuZW5hYmxlRW1iZWRkaW5nTG9nZ2luZyA/PyBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5lbWJlZGRpbmdHZW5lcmF0b3IgPSBuZXcgRW1iZWRkaW5nR2VuZXJhdG9yKFxuICAgICAgY29uZmlnLmFwaUtleSxcbiAgICAgIGNvbmZpZy5lbWJlZGRpbmdNb2RlbCA/PyAnZW1iZWRkaW5nLTAwMScsXG4gICAgICBjb25maWcuYXBwLFxuICAgICAgY29uZmlnLm1hbmlmZXN0LFxuICAgICAgY29uZmlnLmVuYWJsZUVtYmVkZGluZ0xvZ2dpbmcgPz8gZmFsc2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QjMwMFx1RDY1NFx1Qjk3QyBcdUM4RkNcdUM4MUNcdUJDQzRcdUI4NUMgXHVCRDg0XHVCOUFDXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqIEBwYXJhbSB0dXJucyBcdUIzMDBcdUQ2NTQgXHVEMTM0IFx1QkMzMFx1QzVGNFxuICAgKiBAcmV0dXJucyBcdUM4RkNcdUM4MUMgXHVCRDg0XHVCOUFDIFx1QUNCMFx1QUNGQ1xuICAgKi9cbiAgYXN5bmMgc2VwYXJhdGVUb3BpY3ModHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSk6IFByb21pc2U8VG9waWNTZXBhcmF0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0dXJucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZWdtZW50czogW10sXG4gICAgICAgICAgYm91bmRhcmllczogW10sXG4gICAgICAgICAgbGlua3M6IFtdXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIFx1QUMwMSBcdUQxMzRcdUM3NTggXHVEMTREXHVDMkE0XHVEMkI4IFx1QzkwMFx1QkU0NCAoXHVEMEE0XHVDNkNDXHVCNERDIFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUNEOTRcdUFDMDApXG4gICAgICBjb25zdCB0dXJuVGV4dHMgPSB0aGlzLnByZXBhcmVUdXJuVGV4dHModHVybnMpO1xuXG4gICAgICAvLyAyLiBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxXG4gICAgICBjb25zb2xlLmxvZygnXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUM5MTEuLi4nKTtcbiAgICAgIGxldCBlbWJlZGRpbmdzOiBudW1iZXJbXVtdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZW1iZWRkaW5ncyA9IGF3YWl0IHRoaXMuZW1iZWRkaW5nR2VuZXJhdG9yLmVtYmVkQmF0Y2godHVyblRleHRzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxIFx1QzJFNFx1RDMyODogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YDtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFwcCkge1xuICAgICAgICAgIGF3YWl0IGFwcGVuZFRvcGljU2VwYXJhdGlvbkZhaWx1cmVMb2codGhpcy5jb25maWcuYXBwLCB0aGlzLmNvbmZpZy5tYW5pZmVzdCwgbXNnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDMuIFx1QzJBQ1x1Qjc3Q1x1Qzc3NFx1QjUyOSBcdUM3MDhcdUIzQzRcdUM2QjBcdUI4NUMgXHVDNzIwXHVDMEFDXHVCM0M0IFx1QUNDNFx1QzBCMFxuICAgICAgY29uc29sZS5sb2coJ1x1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDQzRcdUMwQjAgXHVDOTExLi4uJyk7XG4gICAgICBsZXQgc2ltaWxhcml0aWVzOiBudW1iZXJbXTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNpbWlsYXJpdGllcyA9IHRoaXMuY2FsY3VsYXRlV2luZG93U2ltaWxhcml0aWVzKGVtYmVkZGluZ3MpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYFx1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDQzRcdUMwQjAgXHVDMkU0XHVEMzI4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gO1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYXBwKSB7XG4gICAgICAgICAgYXdhaXQgYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyh0aGlzLmNvbmZpZy5hcHAsIHRoaXMuY29uZmlnLm1hbmlmZXN0LCBtc2csIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gXHVDOEZDXHVDODFDIFx1QUNCRFx1QUNDNCBcdUQwRDBcdUM5QzBcbiAgICAgIGNvbnNvbGUubG9nKCdcdUM4RkNcdUM4MUMgXHVBQ0JEXHVBQ0M0IFx1RDBEMFx1QzlDMCBcdUM5MTEuLi4nKTtcbiAgICAgIGxldCBib3VuZGFyaWVzOiBUb3BpY0JvdW5kYXJ5W107XG4gICAgICB0cnkge1xuICAgICAgICBib3VuZGFyaWVzID0gdGhpcy5kZXRlY3RUb3BpY0JvdW5kYXJpZXMoc2ltaWxhcml0aWVzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGBcdUM4RkNcdUM4MUMgXHVBQ0JEXHVBQ0M0IFx1RDBEMFx1QzlDMCBcdUMyRTRcdUQzMjg6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWA7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hcHApIHtcbiAgICAgICAgICBhd2FpdCBhcHBlbmRUb3BpY1NlcGFyYXRpb25GYWlsdXJlTG9nKHRoaXMuY29uZmlnLmFwcCwgdGhpcy5jb25maWcubWFuaWZlc3QsIG1zZywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfVxuXG4gICAgICAvLyA1LiBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjggXHVDMEREXHVDMTMxXG4gICAgICBjb25zb2xlLmxvZygnXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QzBERFx1QzEzMSBcdUM5MTEuLi4nKTtcbiAgICAgIGxldCBzZWdtZW50czogQ29udmVyc2F0aW9uU2VnbWVudFtdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2VnbWVudHMgPSB0aGlzLmNyZWF0ZVNlZ21lbnRzKHR1cm5zLCBib3VuZGFyaWVzLCBzaW1pbGFyaXRpZXMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gO1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYXBwKSB7XG4gICAgICAgICAgYXdhaXQgYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyh0aGlzLmNvbmZpZy5hcHAsIHRoaXMuY29uZmlnLm1hbmlmZXN0LCBtc2csIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH1cblxuICAgICAgLy8gNi4gXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QUMwNCBcdUI5QzFcdUQwNkMgXHVCRDg0XHVDMTFEXG4gICAgICBjb25zb2xlLmxvZygnXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QjlDMVx1RDA2QyBcdUJEODRcdUMxMUQgXHVDOTExLi4uJyk7XG4gICAgICBsZXQgbGlua3M6IFNlZ21lbnRMaW5rW107XG4gICAgICB0cnkge1xuICAgICAgICBsaW5rcyA9IHRoaXMuYW5hbHl6ZVNlZ21lbnRMaW5rcyhzZWdtZW50cyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBtc2cgPSBgXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QjlDMVx1RDA2QyBcdUJEODRcdUMxMUQgXHVDMkU0XHVEMzI4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gO1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYXBwKSB7XG4gICAgICAgICAgYXdhaXQgYXBwZW5kVG9waWNTZXBhcmF0aW9uRmFpbHVyZUxvZyh0aGlzLmNvbmZpZy5hcHAsIHRoaXMuY29uZmlnLm1hbmlmZXN0LCBtc2csIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VnbWVudHMsXG4gICAgICAgIGJvdW5kYXJpZXMsXG4gICAgICAgIGxpbmtzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBcdUM3NzRcdUJCRjggXHVCODVDXHVBRTQ1XHVCNDFDIFx1QzVEMFx1QjdFQ1x1QjI5NCBcdUIyRTRcdUMyREMgXHVCODVDXHVBRTQ1XHVENTU4XHVDOUMwIFx1QzU0QVx1Qzc0Q1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnXHVDMkU0XHVEMzI4OicpKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICAvLyBcdUM2MDhcdUMwQzFcdUNFNTggXHVCQUJCXHVENTVDIFx1QzVEMFx1QjdFQ1xuICAgICAgY29uc3QgbXNnID0gYFx1QzhGQ1x1QzgxQyBcdUJEODRcdUI5QUMgXHVDOTExIFx1QzYwOFx1QzBDMVx1Q0U1OCBcdUJBQkJcdUQ1NUMgXHVDNjI0XHVCOTU4OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmFwcCkge1xuICAgICAgICBhd2FpdCBhcHBlbmRUb3BpY1NlcGFyYXRpb25GYWlsdXJlTG9nKHRoaXMuY29uZmlnLmFwcCwgdGhpcy5jb25maWcubWFuaWZlc3QsIG1zZywgZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qzc1OCBcdUI5QzhcdUM5QzBcdUI5QzkgTlx1QUMxQyBcdUJCMzhcdUM3QTVcdUM3NDQgXHVDRDk0XHVDRDlDXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGdldExhc3ROU2VudGVuY2VzKHRleHQ6IHN0cmluZywgbjogbnVtYmVyID0gMyk6IHN0cmluZyB7XG4gICAgLy8gXHVCOUM4XHVDRTY4XHVENDVDLCBcdUIyOTBcdUIwOENcdUQ0NUMsIFx1QkIzQ1x1Qzc0Q1x1RDQ1Q1x1Qjg1QyBcdUJCMzhcdUM3QTVcdUM3NDQgXHVCRDg0XHVCOUFDXG4gICAgY29uc3Qgc2VudGVuY2VzID0gdGV4dC5zcGxpdCgvKFsuIT9dKykvKS5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiAwKTtcbiAgICBcbiAgICAvLyBcdUJCMzhcdUM3QTUgXHVDMzBEXHVDNzNDXHVCODVDIFx1QUQ2Q1x1QzEzMSAoXHVCQjM4XHVDN0E1ICsgXHVBRDZDXHVCNDUwXHVDODEwKVxuICAgIGNvbnN0IHNlbnRlbmNlTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbnRlbmNlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgaWYgKGkgKyAxIDwgc2VudGVuY2VzLmxlbmd0aCkge1xuICAgICAgICBzZW50ZW5jZUxpc3QucHVzaChzZW50ZW5jZXNbaV0gKyBzZW50ZW5jZXNbaSArIDFdKTtcbiAgICAgIH0gZWxzZSBpZiAoaSA8IHNlbnRlbmNlcy5sZW5ndGgpIHtcbiAgICAgICAgc2VudGVuY2VMaXN0LnB1c2goc2VudGVuY2VzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IE5cdUFDMUMgXHVCQjM4XHVDN0E1IFx1Q0Q5NFx1Q0Q5Q1xuICAgIGNvbnN0IGxhc3RTZW50ZW5jZXMgPSBzZW50ZW5jZUxpc3Quc2xpY2UoLW4pO1xuICAgIHJldHVybiBsYXN0U2VudGVuY2VzLmpvaW4oJyAnKS50cmltKCk7XG4gIH1cblxuICAvKipcbiAgICogXHVEMTM0IFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUM5MDBcdUJFNDRcdUQ1NjlcdUIyQzhcdUIyRTQgKFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM5QzBcdUM4MTUgXHVENjE1XHVDMkREKVxuICAgKiBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNzg1XHVCODI1ID0gW1x1RDYwNFx1QzdBQyBcdUM5QzhcdUJCMzhcdUFDRkMgXHVBREY4IFx1QjJGNVx1QkNDMFx1Qzc1OCBcdUQwQTRcdUM2Q0NcdUI0RENdICsgXHVDNzc0XHVDODA0IGFzc2lzdGFudCBcdUI5QzhcdUM5QzBcdUI5QzkgMn4zXHVCQjM4XHVDN0E1ICsgXHVENjA0XHVDN0FDIFx1QzlDOFx1QkIzOCArIFx1RDYwNFx1QzdBQyBhc3Npc3RhbnQgXHVCOUM4XHVDOUMwXHVCOUM5IDJ+M1x1QkIzOFx1QzdBNVxuICAgKi9cbiAgcHJpdmF0ZSBwcmVwYXJlVHVyblRleHRzKHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHR1cm4gPSB0dXJuc1tpXTtcbiAgICAgIGxldCBlbWJlZGRpbmdJbnB1dCA9ICcnO1xuICAgICAgXG4gICAgICAvLyB1c2VyLWFzc2lzdGFudCBcdUMzMERcdUM3NDQgXHVDNzc0XHVCOEU4XHVCM0M0XHVCODVEIFx1Q0M5OFx1QjlBQ1xuICAgICAgaWYgKHR1cm4ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIC8vIDEuIFx1RDYwNFx1QzdBQyBcdUM5QzhcdUJCMzhcdUFDRkMgXHVCMkU0XHVDNzRDIFx1QjJGNVx1QkNDMChcdUM3ODhcdUIyRTRcdUJBNzQpXHVDNzU4IFx1RDBBNFx1QzZDQ1x1QjREQyBcdUNEOTRcdUNEOUNcbiAgICAgICAgbGV0IGNvbWJpbmVkVGV4dCA9IHR1cm4uY29udGVudDtcbiAgICAgICAgbGV0IGtleXdvcmRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVCMkU0XHVDNzRDIFx1RDEzNFx1Qzc3NCBhc3Npc3RhbnRcdUM3NzhcdUM5QzAgXHVENjU1XHVDNzc4XG4gICAgICAgIGlmIChpICsgMSA8IHR1cm5zLmxlbmd0aCAmJiB0dXJuc1tpICsgMV0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICBjb25zdCBuZXh0VHVybiA9IHR1cm5zW2kgKyAxXTtcbiAgICAgICAgICBjb21iaW5lZFRleHQgKz0gJyAnICsgbmV4dFR1cm4uY29udGVudDtcbiAgICAgICAgICBrZXl3b3JkcyA9IGV4dHJhY3RLZXl3b3Jkcyhjb21iaW5lZFRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGtleXdvcmRzID0gZXh0cmFjdEtleXdvcmRzKHR1cm4uY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDIuIFx1Qzc3NFx1QzgwNCBhc3Npc3RhbnQgXHVCOUM4XHVDOUMwXHVCOUM5IDJ+M1x1QkIzOFx1QzdBNSBcdUNEOTRcdUNEOUMgKFx1QzcwOFx1QjNDNFx1QzZCMCBcdUM2MjRcdUJDODRcdUI3QTkpXG4gICAgICAgIGxldCBwcmV2aW91c0Fzc2lzdGFudE92ZXJsYXAgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaiA9IGkgLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgIGlmICh0dXJuc1tqXS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgcHJldmlvdXNBc3Npc3RhbnRPdmVybGFwID0gdGhpcy5nZXRMYXN0TlNlbnRlbmNlcyh0dXJuc1tqXS5jb250ZW50LCAzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMy4gXHVENjA0XHVDN0FDIFx1QzlDOFx1QkIzOFxuICAgICAgICBjb25zdCBjdXJyZW50UXVlc3Rpb24gPSB0dXJuLmNvbnRlbnQ7XG4gICAgICAgIFxuICAgICAgICAvLyA0LiBcdUQ2MDRcdUM3QUMgXHVDOUM4XHVCQjM4XHVDNUQwIFx1QjMwMFx1RDU1QyBhc3Npc3RhbnQgXHVCMkY1XHVCQ0MwXHVDNzU4IFx1QjlDOFx1QzlDMFx1QjlDOSAyfjNcdUJCMzhcdUM3QTVcbiAgICAgICAgbGV0IGN1cnJlbnRBc3Npc3RhbnRPdmVybGFwID0gJyc7XG4gICAgICAgIGlmIChpICsgMSA8IHR1cm5zLmxlbmd0aCAmJiB0dXJuc1tpICsgMV0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICBjdXJyZW50QXNzaXN0YW50T3ZlcmxhcCA9IHRoaXMuZ2V0TGFzdE5TZW50ZW5jZXModHVybnNbaSArIDFdLmNvbnRlbnQsIDMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdUJBQThcdUI0NTAgXHVENTY5XHVDRTU4XHVBRTMwXG4gICAgICAgIGNvbnN0IGtleXdvcmRTdHIgPSBrZXl3b3Jkcy5sZW5ndGggPiAwID8gYFtcdUQwQTRcdUM2Q0NcdUI0REM6ICR7a2V5d29yZHMuam9pbignLCAnKX1dYCA6ICcnO1xuICAgICAgICBlbWJlZGRpbmdJbnB1dCA9IFtcbiAgICAgICAgICBrZXl3b3JkU3RyLFxuICAgICAgICAgIHByZXZpb3VzQXNzaXN0YW50T3ZlcmxhcCxcbiAgICAgICAgICBjdXJyZW50UXVlc3Rpb24sXG4gICAgICAgICAgY3VycmVudEFzc2lzdGFudE92ZXJsYXBcbiAgICAgICAgXVxuICAgICAgICAgIC5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApXG4gICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdC5wdXNoKGVtYmVkZGluZ0lucHV0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIGFzc2lzdGFudCBcdUQxMzRcdUM3NDAgXHVBQzc0XHVCMTA4XHVCNkYwXHVBRTMwICh1c2VyIFx1RDEzNFx1QzVEMFx1QzExQyBcdUM3NzRcdUJCRjggXHVDQzk4XHVCOUFDXHVCNDI4KVxuICAgICAgICBpZiAoaSArIDEgPCB0dXJucy5sZW5ndGggJiYgdHVybnNbaSArIDFdLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR1cm4ucm9sZSA9PT0gJ2Fzc2lzdGFudCcgJiYgKGkgPT09IDAgfHwgdHVybnNbaSAtIDFdLnJvbGUgIT09ICd1c2VyJykpIHtcbiAgICAgICAgLy8gdXNlciBcdUMzMERcdUM3NzQgXHVDNUM2XHVCMjk0IFx1QjNDNVx1QjlCRFx1QzgwMVx1Qzc3OCBhc3Npc3RhbnQgXHVEMTM0XHVDNzc4IFx1QUNCRFx1QzZCMFxuICAgICAgICBjb25zdCBrZXl3b3JkcyA9IGV4dHJhY3RLZXl3b3Jkcyh0dXJuLmNvbnRlbnQpO1xuICAgICAgICBjb25zdCBsYXN0U2VudGVuY2VzID0gdGhpcy5nZXRMYXN0TlNlbnRlbmNlcyh0dXJuLmNvbnRlbnQsIDMpO1xuICAgICAgICBjb25zdCBrZXl3b3JkU3RyID0ga2V5d29yZHMubGVuZ3RoID4gMCA/IGBbXHVEMEE0XHVDNkNDXHVCNERDOiAke2tleXdvcmRzLmpvaW4oJywgJyl9XWAgOiAnJztcbiAgICAgICAgXG4gICAgICAgIGVtYmVkZGluZ0lucHV0ID0gW2tleXdvcmRTdHIsIGxhc3RTZW50ZW5jZXNdLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMCkuam9pbignICcpO1xuICAgICAgICByZXN1bHQucHVzaChlbWJlZGRpbmdJbnB1dCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQubGVuZ3RoID4gMCA/IHJlc3VsdCA6IHR1cm5zLm1hcCh0ID0+IHQuY29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDMkFDXHVCNzdDXHVDNzc0XHVCNTI5IFx1QzcwOFx1QjNDNFx1QzZCMCBcdUJDMjlcdUMyRERcdUM3M0NcdUI4NUMgXHVDNzIwXHVDMEFDXHVCM0M0XHVCOTdDIFx1QUNDNFx1QzBCMFx1RDU2OVx1QjJDOFx1QjJFNFxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVXaW5kb3dTaW1pbGFyaXRpZXMoZW1iZWRkaW5nczogbnVtYmVyW11bXSk6IG51bWJlcltdIHtcbiAgICBjb25zdCBzaW1pbGFyaXRpZXM6IG51bWJlcltdID0gW107XG4gICAgY29uc3Qgd2luZG93U2l6ZSA9IHRoaXMuY29uZmlnLndpbmRvd1NpemUhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbWJlZGRpbmdzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzcwOFx1QjNDNFx1QzZCMDogXHVENjA0XHVDN0FDIFx1RDEzNFx1QkQ4MFx1RDEzMCB3aW5kb3dTaXplXHVCOUNDXHVEMDdDXG4gICAgICBjb25zdCBjdXJyZW50V2luZG93ID0gdGhpcy5jb21iaW5lRW1iZWRkaW5ncyhcbiAgICAgICAgZW1iZWRkaW5ncy5zbGljZShNYXRoLm1heCgwLCBpIC0gd2luZG93U2l6ZSArIDEpLCBpICsgMSlcbiAgICAgICk7XG5cbiAgICAgIC8vIFx1QjJFNFx1Qzc0QyBcdUM3MDhcdUIzQzRcdUM2QjA6IFx1QjJFNFx1Qzc0QyBcdUQxMzRcbiAgICAgIGNvbnN0IG5leHRXaW5kb3cgPSBlbWJlZGRpbmdzW2kgKyAxXTtcblxuICAgICAgLy8gXHVDNzIwXHVDMEFDXHVCM0M0IFx1QUNDNFx1QzBCMFxuICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IGNvc2luZVNpbWlsYXJpdHkoY3VycmVudFdpbmRvdywgbmV4dFdpbmRvdyk7XG4gICAgICBzaW1pbGFyaXRpZXMucHVzaChzaW1pbGFyaXR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2ltaWxhcml0aWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzVFQ1x1QjdFQyBcdUM3ODRcdUJDQTBcdUI1MjlcdUM3NDQgXHVEM0M5XHVBREUwXHVENTU4XHVDNUVDIFx1RDU1OFx1QjA5OFx1Qjg1QyBcdUFDQjBcdUQ1NjlcdUQ1NjlcdUIyQzhcdUIyRTRcbiAgICovXG4gIHByaXZhdGUgY29tYmluZUVtYmVkZGluZ3MoZW1iZWRkaW5nczogbnVtYmVyW11bXSk6IG51bWJlcltdIHtcbiAgICAvLyBcdUJDMjlcdUM1QjRcdUM4MDEgXHVENTA0XHVCODVDXHVBREY4XHVCNzk4XHVCQzBEOiBcdUM3NzRcdUI4NjBcdUM4MDFcdUM3M0NcdUI4NUMgdW5yZWFjaGFibGVcdUQ1NThcdUM5QzBcdUI5Q0MgXHVEMEMwXHVDNzg1IFx1QzU0OFx1QzgxNVx1QzEzMVx1Qzc0NCBcdUM3MDRcdUQ1NzQgXHVDNzIwXHVDOUMwXG4gICAgaWYgKGVtYmVkZGluZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1Qzc4NFx1QkNBMFx1QjUyOSBcdUJDMzBcdUM1RjRcdUM3NzQgXHVCRTQ0XHVDNUI0XHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0Jyk7XG4gICAgfVxuXG4gICAgaWYgKGVtYmVkZGluZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gZW1iZWRkaW5nc1swXTtcbiAgICB9XG5cbiAgICBjb25zdCBkaW0gPSBlbWJlZGRpbmdzWzBdLmxlbmd0aDtcbiAgICBjb25zdCBjb21iaW5lZCA9IG5ldyBBcnJheShkaW0pLmZpbGwoMCk7XG5cbiAgICBmb3IgKGNvbnN0IGVtYmVkZGluZyBvZiBlbWJlZGRpbmdzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpbTsgaSsrKSB7XG4gICAgICAgIGNvbWJpbmVkW2ldICs9IGVtYmVkZGluZ1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdUQzQzlcdUFERTAgXHVBQ0M0XHVDMEIwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW07IGkrKykge1xuICAgICAgY29tYmluZWRbaV0gLz0gZW1iZWRkaW5ncy5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbWJpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzhGQ1x1QzgxQyBcdUFDQkRcdUFDQzRcdUI5N0MgXHVEMEQwXHVDOUMwXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGRldGVjdFRvcGljQm91bmRhcmllcyhzaW1pbGFyaXRpZXM6IG51bWJlcltdKTogVG9waWNCb3VuZGFyeVtdIHtcbiAgICBjb25zdCBib3VuZGFyaWVzOiBUb3BpY0JvdW5kYXJ5W10gPSBbXTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLmNvbmZpZy5zaW1pbGFyaXR5VGhyZXNob2xkITtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2ltaWxhcml0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzaW1pbGFyaXR5ID0gc2ltaWxhcml0aWVzW2ldO1xuXG4gICAgICAvLyBcdUM3MjBcdUMwQUNcdUIzQzRcdUFDMDAgXHVDNzg0XHVBQ0M0XHVBQzEyIFx1QkJGOFx1QjlDQ1x1Qzc3NFx1QUM3MFx1QjA5OCBcdUFFMDlcdUFDQTlcdUQ3ODggXHVENTU4XHVCNzdEXHVENTVDIFx1QUNCRFx1QzZCMFxuICAgICAgY29uc3QgaXNQcmltYXJ5Qm91bmRhcnkgPSBzaW1pbGFyaXR5IDwgdGhyZXNob2xkO1xuXG4gICAgICAvLyBcdUM3NzRcdUM4MDQgXHVCMzAwXHVCRTQ0IFx1QUUwOVx1QUNBOVx1RDU1QyBcdUQ1NThcdUI3N0QgXHVBQzEwXHVDOUMwXG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgY29uc3QgcHJldlNpbWlsYXJpdHkgPSBzaW1pbGFyaXRpZXNbaSAtIDFdO1xuICAgICAgICBjb25zdCBkcm9wID0gcHJldlNpbWlsYXJpdHkgLSBzaW1pbGFyaXR5O1xuICAgICAgICBcbiAgICAgICAgLy8gMC4xNSBcdUM3NzRcdUMwQzEgXHVBRTA5XHVBQ0E5XHVENzg4IFx1RDU1OFx1Qjc3RFx1RDU1QyBcdUFDQkRcdUM2QjBcdUIzQzQgXHVBQ0JEXHVBQ0M0XHVCODVDIFx1QUMwNFx1QzhGQ1xuICAgICAgICBpZiAoZHJvcCA+IDAuMTUpIHtcbiAgICAgICAgICBib3VuZGFyaWVzLnB1c2goe1xuICAgICAgICAgICAgaW5kZXg6IGkgKyAxLCAvLyBcdUIyRTRcdUM3NEMgXHVEMTM0XHVCRDgwXHVEMTMwIFx1QzBDOFx1Qjg1Q1x1QzZCNCBcdUM4RkNcdUM4MUNcbiAgICAgICAgICAgIHNpbWlsYXJpdHksXG4gICAgICAgICAgICBpc1ByaW1hcnlCb3VuZGFyeTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1ByaW1hcnlCb3VuZGFyeSkge1xuICAgICAgICBib3VuZGFyaWVzLnB1c2goe1xuICAgICAgICAgIGluZGV4OiBpICsgMSxcbiAgICAgICAgICBzaW1pbGFyaXR5LFxuICAgICAgICAgIGlzUHJpbWFyeUJvdW5kYXJ5OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBib3VuZGFyaWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOFx1Qjk3QyBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTRcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlU2VnbWVudHMoXG4gICAgdHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSxcbiAgICBib3VuZGFyaWVzOiBUb3BpY0JvdW5kYXJ5W10sXG4gICAgc2ltaWxhcml0aWVzOiBudW1iZXJbXVxuICApOiBDb252ZXJzYXRpb25TZWdtZW50W10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBDb252ZXJzYXRpb25TZWdtZW50W10gPSBbXTtcbiAgICBjb25zdCBib3VuZGFyeUluZGljZXMgPSBib3VuZGFyaWVzLm1hcChiID0+IGIuaW5kZXgpLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICBjb25zdCBtaW5TZWdtZW50TGVuZ3RoID0gdGhpcy5jb25maWcubWluU2VnbWVudExlbmd0aCE7XG5cbiAgICBsZXQgc3RhcnRJbmRleCA9IDA7XG4gICAgZm9yIChjb25zdCBlbmRJbmRleCBvZiBib3VuZGFyeUluZGljZXMpIHtcbiAgICAgIGlmIChlbmRJbmRleCAtIHN0YXJ0SW5kZXggPj0gbWluU2VnbWVudExlbmd0aCkge1xuICAgICAgICBjb25zdCBzZWdtZW50VHVybnMgPSB0dXJucy5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCk7XG4gICAgICAgIGNvbnN0IGtleXdvcmRzID0gdGhpcy5leHRyYWN0U2VnbWVudEtleXdvcmRzKHNlZ21lbnRUdXJucyk7XG4gICAgICAgIGNvbnN0IGF2Z1NpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VTaW1pbGFyaXR5KHNpbWlsYXJpdGllcywgc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuXG4gICAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICAgIHN0YXJ0SW5kZXgsXG4gICAgICAgICAgZW5kSW5kZXgsXG4gICAgICAgICAgdHVybnM6IHNlZ21lbnRUdXJucyxcbiAgICAgICAgICBrZXl3b3JkcyxcbiAgICAgICAgICBhdmdTaW1pbGFyaXR5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXg7XG4gICAgfVxuXG4gICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOFxuICAgIGlmIChzdGFydEluZGV4IDwgdHVybnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBzZWdtZW50VHVybnMgPSB0dXJucy5zbGljZShzdGFydEluZGV4KTtcbiAgICAgIGNvbnN0IGtleXdvcmRzID0gdGhpcy5leHRyYWN0U2VnbWVudEtleXdvcmRzKHNlZ21lbnRUdXJucyk7XG4gICAgICBjb25zdCBhdmdTaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlU2ltaWxhcml0eShzaW1pbGFyaXRpZXMsIHN0YXJ0SW5kZXgsIHR1cm5zLmxlbmd0aCk7XG5cbiAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICBzdGFydEluZGV4LFxuICAgICAgICBlbmRJbmRleDogdHVybnMubGVuZ3RoLFxuICAgICAgICB0dXJuczogc2VnbWVudFR1cm5zLFxuICAgICAgICBrZXl3b3JkcyxcbiAgICAgICAgYXZnU2ltaWxhcml0eVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlZ21lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOFx1Qzc1OCBcdUQwQTRcdUM2Q0NcdUI0RENcdUI5N0MgXHVDRDk0XHVDRDlDXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RTZWdtZW50S2V5d29yZHModHVybnM6IENvbnZlcnNhdGlvblR1cm5bXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBhbGxUZXh0ID0gdHVybnMubWFwKHQgPT4gdC5jb250ZW50KS5qb2luKCcgJyk7XG4gICAgcmV0dXJuIGV4dHJhY3RLZXl3b3JkcyhhbGxUZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUFENkNcdUFDMDRcdUM3NTggXHVEM0M5XHVBREUwIFx1QzcyMFx1QzBBQ1x1QjNDNFx1Qjk3QyBcdUFDQzRcdUMwQjBcdUQ1NjlcdUIyQzhcdUIyRTRcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlQXZlcmFnZVNpbWlsYXJpdHkoc2ltaWxhcml0aWVzOiBudW1iZXJbXSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChzdGFydCA+PSBlbmQgLSAxKSB7XG4gICAgICByZXR1cm4gMS4wO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbGV2YW50U2ltaWxhcml0aWVzID0gc2ltaWxhcml0aWVzLnNsaWNlKHN0YXJ0LCBNYXRoLm1pbihlbmQgLSAxLCBzaW1pbGFyaXRpZXMubGVuZ3RoKSk7XG4gICAgaWYgKHJlbGV2YW50U2ltaWxhcml0aWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDEuMDtcbiAgICB9XG5cbiAgICBjb25zdCBzdW0gPSByZWxldmFudFNpbWlsYXJpdGllcy5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwsIDApO1xuICAgIHJldHVybiBzdW0gLyByZWxldmFudFNpbWlsYXJpdGllcy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QUMwNCBcdUI5QzFcdUQwNkNcdUI5N0MgXHVCRDg0XHVDMTFEXHVENTY5XHVCMkM4XHVCMkU0XG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVTZWdtZW50TGlua3Moc2VnbWVudHM6IENvbnZlcnNhdGlvblNlZ21lbnRbXSk6IFNlZ21lbnRMaW5rW10ge1xuICAgIGNvbnN0IGxpbmtzOiBTZWdtZW50TGlua1tdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBzZWdtZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCBzZWdtZW50QSA9IHNlZ21lbnRzW2ldO1xuICAgICAgICBjb25zdCBzZWdtZW50QiA9IHNlZ21lbnRzW2pdO1xuXG4gICAgICAgIC8vIFx1QUNGNVx1RDFCNSBcdUQwQTRcdUM2Q0NcdUI0REMgXHVDQzNFXHVBRTMwXG4gICAgICAgIGNvbnN0IGNvbW1vbktleXdvcmRzID0gc2VnbWVudEEua2V5d29yZHMuZmlsdGVyKGsgPT4gc2VnbWVudEIua2V5d29yZHMuaW5jbHVkZXMoaykpO1xuXG4gICAgICAgIGlmIChjb21tb25LZXl3b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gXHVDNUYwXHVBRDAwXHVDMTMxIFx1QzgxMFx1QzIxOCBcdUFDQzRcdUMwQjAgKEphY2NhcmQgXHVDNzIwXHVDMEFDXHVCM0M0KVxuICAgICAgICAgIGNvbnN0IHVuaW9uU2l6ZSA9IG5ldyBTZXQoWy4uLnNlZ21lbnRBLmtleXdvcmRzLCAuLi5zZWdtZW50Qi5rZXl3b3Jkc10pLnNpemU7XG4gICAgICAgICAgY29uc3QgcmVsZXZhbmNlU2NvcmUgPSBjb21tb25LZXl3b3Jkcy5sZW5ndGggLyB1bmlvblNpemU7XG5cbiAgICAgICAgICAvLyBcdUNENUNcdUMxOEMgXHVDNUYwXHVBRDAwXHVDMTMxIFx1Qzc4NFx1QUNDNFx1QUMxMiAoMC4xKVxuICAgICAgICAgIGlmIChyZWxldmFuY2VTY29yZSA+IDAuMSkge1xuICAgICAgICAgICAgbGlua3MucHVzaCh7XG4gICAgICAgICAgICAgIGZyb21TZWdtZW50OiBpLFxuICAgICAgICAgICAgICB0b1NlZ21lbnQ6IGosXG4gICAgICAgICAgICAgIGNvbW1vbktleXdvcmRzLFxuICAgICAgICAgICAgICByZWxldmFuY2VTY29yZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmtzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1Q0U5MFx1QzJEQ1x1Qjk3QyBcdUNEMDhcdUFFMzBcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTRcbiAgICovXG4gIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgdGhpcy5lbWJlZGRpbmdHZW5lcmF0b3IuY2xlYXJDYWNoZSgpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBcdUIyRTRcdUM5MTEgXHVCMTc4XHVEMkI4IFx1QzgwMFx1QzdBNSBcdUJBQThcdUI0QzhcbiAqIFxuICogXHVDOEZDXHVDODFDXHVCQ0M0XHVCODVDIFx1QkQ4NFx1QjlBQ1x1QjQxQyBcdUIzMDBcdUQ2NTRcdUI5N0MgXHVDNUVDXHVCN0VDIFx1QjE3OFx1RDJCOFx1Qjg1QyBcdUM4MDBcdUM3QTVcdUQ1NThcdUFDRTAgXHVCOUMxXHVEMDZDXHVCODVDIFx1QzVGMFx1QUNCMFx1RDU2OVx1QjJDOFx1QjJFNC5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IFZhdWx0LCBBcHAsIFBsdWdpbk1hbmlmZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uU2VnbWVudCwgU2VnbWVudExpbmsgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGNvbnZlcnRUb01hcmtkb3duIH0gZnJvbSAnLi4vY29udmVyc2F0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBNdWx0aU5vdGVTYXZlUmVzdWx0IHtcbiAgbm90ZVBhdGhzOiBzdHJpbmdbXTtcbiAgbWFpbk5vdGVQYXRoOiBzdHJpbmc7XG59XG5cbi8qKlxuICogXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4XHVCOTdDIFx1QUMxQ1x1QkNDNCBcdUIxNzhcdUQyQjhcdUI4NUMgXHVDODAwXHVDN0E1XHVENTY5XHVCMkM4XHVCMkU0XG4gKiBAcGFyYW0gdmF1bHQgT2JzaWRpYW4gVmF1bHRcbiAqIEBwYXJhbSBzZWdtZW50cyBcdUIzMDBcdUQ2NTQgXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4IFx1QkMzMFx1QzVGNFxuICogQHBhcmFtIGxpbmtzIFx1QzEzOFx1QURGOFx1QkEzQ1x1RDJCOCBcdUFDMDQgXHVCOUMxXHVEMDZDXG4gKiBAcGFyYW0gYmFzZVRpdGxlIFx1QUUzMFx1QkNGOCBcdUM4MUNcdUJBQTlcbiAqIEBwYXJhbSBvdXRwdXRGb2xkZXIgXHVDODAwXHVDN0E1IFx1RDNGNFx1QjM1NFxuICogQHBhcmFtIGFwcCBPYnNpZGlhbiBcdUM1NzEgXHVDNzc4XHVDMkE0XHVEMTM0XHVDMkE0IChcdUI4NUNcdUFFNDVcdUM2QTkpXG4gKiBAcGFyYW0gbWFuaWZlc3QgXHVENTBDXHVCN0VDXHVBREY4XHVDNzc4IFx1QjlFNFx1QjJDOFx1RDM5OFx1QzJBNFx1RDJCOCAoXHVCODVDXHVBRTQ1XHVDNkE5KVxuICogQHJldHVybnMgXHVDODAwXHVDN0E1XHVCNDFDIFx1QjE3OFx1RDJCOCBcdUFDQkRcdUI4NUNcdUI0RTRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTZWdtZW50c0FzTm90ZXMoXG4gIHZhdWx0OiBWYXVsdCxcbiAgc2VnbWVudHM6IENvbnZlcnNhdGlvblNlZ21lbnRbXSxcbiAgbGlua3M6IFNlZ21lbnRMaW5rW10sXG4gIGJhc2VUaXRsZTogc3RyaW5nLFxuICBvdXRwdXRGb2xkZXI6IHN0cmluZyxcbiAgYXBwPzogQXBwLFxuICBtYW5pZmVzdD86IFBsdWdpbk1hbmlmZXN0XG4pOiBQcm9taXNlPE11bHRpTm90ZVNhdmVSZXN1bHQ+IHtcbiAgY29uc3Qgbm90ZVBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBjbGVhbmVkRm9sZGVyID0gb3V0cHV0Rm9sZGVyID8gbm9ybWFsaXplUGF0aChvdXRwdXRGb2xkZXIpLnJlcGxhY2UoL15cXC8rLywgJycpIDogJyc7XG5cbiAgLy8gXHVEM0Y0XHVCMzU0IFx1QzBERFx1QzEzMVxuICBpZiAoY2xlYW5lZEZvbGRlcikge1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyh2YXVsdCwgY2xlYW5lZEZvbGRlcik7XG4gIH1cblxuICAvLyBcdUFDMDEgXHVDMTM4XHVBREY4XHVCQTNDXHVEMkI4XHVCOTdDIFx1QUMxQ1x1QkNDNCBcdUIxNzhcdUQyQjhcdUI4NUMgXHVDODAwXHVDN0E1XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgY29uc3Qgc2VnbWVudFRpdGxlID0gYXdhaXQgZ2VuZXJhdGVTZWdtZW50VGl0bGUoc2VnbWVudCwgYmFzZVRpdGxlLCBpICsgMSk7XG4gICAgY29uc3QgbWFya2Rvd24gPSBnZW5lcmF0ZVNlZ21lbnRNYXJrZG93bihzZWdtZW50LCBpLCBzZWdtZW50cy5sZW5ndGgsIGxpbmtzLCBub3RlUGF0aHMpO1xuXG4gICAgY29uc3QgZmlsZW5hbWUgPSBzYW5pdGl6ZUZpbGVuYW1lKHNlZ21lbnRUaXRsZSkgKyAnLm1kJztcbiAgICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgZW5zdXJlVW5pcXVlUGF0aChcbiAgICAgIHZhdWx0LFxuICAgICAgbm9ybWFsaXplUGF0aChjbGVhbmVkRm9sZGVyID8gYCR7Y2xlYW5lZEZvbGRlcn0vJHtmaWxlbmFtZX1gIDogZmlsZW5hbWUpXG4gICAgKTtcblxuICAgIGF3YWl0IHZhdWx0LmNyZWF0ZSh0YXJnZXRQYXRoLCBtYXJrZG93bik7XG4gICAgbm90ZVBhdGhzLnB1c2godGFyZ2V0UGF0aCk7XG4gIH1cblxuICAvLyBcdUJBNTRcdUM3NzggXHVDNzc4XHVCMzcxXHVDMkE0IFx1QjE3OFx1RDJCOCBcdUMwRERcdUMxMzFcbiAgY29uc3QgbWFpbk5vdGVQYXRoID0gYXdhaXQgY3JlYXRlTWFpbkluZGV4Tm90ZSh2YXVsdCwgc2VnbWVudHMsIG5vdGVQYXRocywgYmFzZVRpdGxlLCBjbGVhbmVkRm9sZGVyKTtcblxuICByZXR1cm4ge1xuICAgIG5vdGVQYXRocyxcbiAgICBtYWluTm90ZVBhdGhcbiAgfTtcbn1cblxuLyoqXG4gKiBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjhcdUM3NTggXHVDODFDXHVCQUE5XHVDNzQ0IFx1QzBERFx1QzEzMVx1RDU2OVx1QjJDOFx1QjJFNFxuICovXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVNlZ21lbnRUaXRsZShcbiAgc2VnbWVudDogQ29udmVyc2F0aW9uU2VnbWVudCxcbiAgYmFzZVRpdGxlOiBzdHJpbmcsXG4gIHNlZ21lbnROdW1iZXI6IG51bWJlclxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgLy8gXHVEMEE0XHVDNkNDXHVCNERDIFx1QUUzMFx1QkMxOCBcdUM4MUNcdUJBQTkgXHVDMEREXHVDMTMxXG4gIGNvbnN0IHRvcEtleXdvcmRzID0gc2VnbWVudC5rZXl3b3Jkcy5zbGljZSgwLCAzKS5qb2luKCcsICcpO1xuICBcbiAgaWYgKHRvcEtleXdvcmRzKSB7XG4gICAgcmV0dXJuIGAke2Jhc2VUaXRsZX0gLSAke3NlZ21lbnROdW1iZXJ9LiAke3RvcEtleXdvcmRzfWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke2Jhc2VUaXRsZX0gLSBcdUM4RkNcdUM4MUMgJHtzZWdtZW50TnVtYmVyfWA7XG4gIH1cbn1cblxuLyoqXG4gKiBcdUMxMzhcdUFERjhcdUJBM0NcdUQyQjhcdUI5N0MgXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0XHVDNzNDXHVCODVDIFx1QkNDMFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNlZ21lbnRNYXJrZG93bihcbiAgc2VnbWVudDogQ29udmVyc2F0aW9uU2VnbWVudCxcbiAgc2VnbWVudEluZGV4OiBudW1iZXIsXG4gIHRvdGFsU2VnbWVudHM6IG51bWJlcixcbiAgbGlua3M6IFNlZ21lbnRMaW5rW10sXG4gIG5vdGVQYXRoczogc3RyaW5nW11cbik6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMFxuICBsaW5lcy5wdXNoKCctLS0nKTtcbiAgbGluZXMucHVzaChgc2VnbWVudDogJHtzZWdtZW50SW5kZXggKyAxfS8ke3RvdGFsU2VnbWVudHN9YCk7XG4gIGxpbmVzLnB1c2goYGtleXdvcmRzOiBbJHtzZWdtZW50LmtleXdvcmRzLmpvaW4oJywgJyl9XWApO1xuICBsaW5lcy5wdXNoKGBhdmdTaW1pbGFyaXR5OiAke3NlZ21lbnQuYXZnU2ltaWxhcml0eS50b0ZpeGVkKDMpfWApO1xuICBsaW5lcy5wdXNoKCctLS0nKTtcbiAgbGluZXMucHVzaCgnJyk7XG5cbiAgLy8gXHVDODFDXHVCQUE5XG4gIGxpbmVzLnB1c2goYCMgXHVDOEZDXHVDODFDICR7c2VnbWVudEluZGV4ICsgMX1gKTtcbiAgbGluZXMucHVzaCgnJyk7XG5cbiAgLy8gXHVEMEE0XHVDNkNDXHVCNERDXG4gIGlmIChzZWdtZW50LmtleXdvcmRzLmxlbmd0aCA+IDApIHtcbiAgICBsaW5lcy5wdXNoKCcjIyBcdUM4RkNcdUM2OTQgXHVEMEE0XHVDNkNDXHVCNERDJyk7XG4gICAgbGluZXMucHVzaCgnJyk7XG4gICAgbGluZXMucHVzaChzZWdtZW50LmtleXdvcmRzLm1hcChrID0+IGAtICR7a31gKS5qb2luKCdcXG4nKSk7XG4gICAgbGluZXMucHVzaCgnJyk7XG4gIH1cblxuICAvLyBcdUM1RjBcdUFEMDAgXHVDOEZDXHVDODFDIFx1QjlDMVx1RDA2Q1xuICBjb25zdCByZWxhdGVkTGlua3MgPSBsaW5rcy5maWx0ZXIoXG4gICAgbGluayA9PiBsaW5rLmZyb21TZWdtZW50ID09PSBzZWdtZW50SW5kZXggfHwgbGluay50b1NlZ21lbnQgPT09IHNlZ21lbnRJbmRleFxuICApO1xuXG4gIGlmIChyZWxhdGVkTGlua3MubGVuZ3RoID4gMCkge1xuICAgIGxpbmVzLnB1c2goJyMjIFx1QzVGMFx1QUQwMCBcdUM4RkNcdUM4MUMnKTtcbiAgICBsaW5lcy5wdXNoKCcnKTtcblxuICAgIGZvciAoY29uc3QgbGluayBvZiByZWxhdGVkTGlua3MpIHtcbiAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gbGluay5mcm9tU2VnbWVudCA9PT0gc2VnbWVudEluZGV4ID8gbGluay50b1NlZ21lbnQgOiBsaW5rLmZyb21TZWdtZW50O1xuICAgICAgXG4gICAgICBpZiAobm90ZVBhdGhzW3RhcmdldEluZGV4XSkge1xuICAgICAgICBjb25zdCB0YXJnZXRQYXRoID0gbm90ZVBhdGhzW3RhcmdldEluZGV4XTtcbiAgICAgICAgY29uc3QgdGFyZ2V0TmFtZSA9IHRhcmdldFBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IGBcdUM4RkNcdUM4MUMgJHt0YXJnZXRJbmRleCArIDF9YDtcbiAgICAgICAgY29uc3QgY29tbW9uS2V5d29yZHNUZXh0ID0gbGluay5jb21tb25LZXl3b3Jkcy5zbGljZSgwLCAzKS5qb2luKCcsICcpO1xuICAgICAgICBcbiAgICAgICAgbGluZXMucHVzaChgLSBbWyR7dGFyZ2V0UGF0aC5yZXBsYWNlKCcubWQnLCAnJyl9fCR7dGFyZ2V0TmFtZX1dXSAoJHtjb21tb25LZXl3b3Jkc1RleHR9KWApO1xuICAgICAgfVxuICAgIH1cbiAgICBsaW5lcy5wdXNoKCcnKTtcbiAgfVxuXG4gIC8vIFx1QjMwMFx1RDY1NCBcdUIwQjRcdUM2QTlcbiAgbGluZXMucHVzaCgnIyMgXHVCMzAwXHVENjU0IFx1QjBCNFx1QzZBOScpO1xuICBsaW5lcy5wdXNoKCcnKTtcblxuICBmb3IgKGNvbnN0IHR1cm4gb2Ygc2VnbWVudC50dXJucykge1xuICAgIGNvbnN0IHJvbGVFbW9qaSA9IHR1cm4ucm9sZSA9PT0gJ3VzZXInID8gJ1x1RDgzRFx1REM2NCcgOiAnXHVEODNFXHVERDE2JztcbiAgICBjb25zdCByb2xlTGFiZWwgPSB0dXJuLnJvbGUgPT09ICd1c2VyJyA/ICdcdUMwQUNcdUM2QTlcdUM3OTAnIDogJ1x1QzVCNFx1QzJEQ1x1QzJBNFx1RDEzNFx1RDJCOCc7XG4gICAgXG4gICAgbGluZXMucHVzaChgIyMjICR7cm9sZUVtb2ppfSAke3JvbGVMYWJlbH1gKTtcbiAgICBcbiAgICBpZiAodHVybi50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHR5cGVvZiB0dXJuLnRpbWVzdGFtcCA9PT0gJ3N0cmluZydcbiAgICAgICAgPyB0dXJuLnRpbWVzdGFtcFxuICAgICAgICA6IHR1cm4udGltZXN0YW1wLnRvSVNPU3RyaW5nKCk7XG4gICAgICBsaW5lcy5wdXNoKGAqJHt0aW1lc3RhbXB9KmApO1xuICAgICAgbGluZXMucHVzaCgnJyk7XG4gICAgfVxuICAgIFxuICAgIGxpbmVzLnB1c2godHVybi5jb250ZW50KTtcbiAgICBsaW5lcy5wdXNoKCcnKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbn1cblxuLyoqXG4gKiBcdUJBNTRcdUM3NzggXHVDNzc4XHVCMzcxXHVDMkE0IFx1QjE3OFx1RDJCOFx1Qjk3QyBcdUMwRERcdUMxMzFcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWFpbkluZGV4Tm90ZShcbiAgdmF1bHQ6IFZhdWx0LFxuICBzZWdtZW50czogQ29udmVyc2F0aW9uU2VnbWVudFtdLFxuICBub3RlUGF0aHM6IHN0cmluZ1tdLFxuICBiYXNlVGl0bGU6IHN0cmluZyxcbiAgZm9sZGVyOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1QzgxQ1x1QkFBOVxuICBsaW5lcy5wdXNoKGAjICR7YmFzZVRpdGxlfSAtIFx1QzgwNFx1Q0NCNCBcdUM3NzhcdUIzNzFcdUMyQTRgKTtcbiAgbGluZXMucHVzaCgnJyk7XG5cbiAgLy8gXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwXG4gIGxpbmVzLnB1c2goJy0tLScpO1xuICBsaW5lcy5wdXNoKGB0b3RhbFNlZ21lbnRzOiAke3NlZ21lbnRzLmxlbmd0aH1gKTtcbiAgbGluZXMucHVzaChgY3JlYXRlZEF0OiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1gKTtcbiAgbGluZXMucHVzaCgnLS0tJyk7XG4gIGxpbmVzLnB1c2goJycpO1xuXG4gIC8vIFx1QzY5NFx1QzU3RFxuICBsaW5lcy5wdXNoKCcjIyBcdUFDMUNcdUM2OTQnKTtcbiAgbGluZXMucHVzaCgnJyk7XG4gIGxpbmVzLnB1c2goYFx1Qzc3NCBcdUIzMDBcdUQ2NTRcdUIyOTQgJHtzZWdtZW50cy5sZW5ndGh9XHVBQzFDXHVDNzU4IFx1QzhGQ1x1QzgxQ1x1Qjg1QyBcdUJEODRcdUI5QUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTQuYCk7XG4gIGxpbmVzLnB1c2goJycpO1xuXG4gIC8vIFx1QzhGQ1x1QzgxQyBcdUJBQTlcdUI4NURcbiAgbGluZXMucHVzaCgnIyMgXHVDOEZDXHVDODFDIFx1QkFBOVx1Qjg1RCcpO1xuICBsaW5lcy5wdXNoKCcnKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgIGNvbnN0IG5vdGVQYXRoID0gbm90ZVBhdGhzW2ldO1xuICAgIGNvbnN0IG5vdGVOYW1lID0gbm90ZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IGBcdUM4RkNcdUM4MUMgJHtpICsgMX1gO1xuICAgIGNvbnN0IGtleXdvcmRzID0gc2VnbWVudC5rZXl3b3Jkcy5zbGljZSgwLCAzKS5qb2luKCcsICcpO1xuXG4gICAgbGluZXMucHVzaChgIyMjICR7aSArIDF9LiBbWyR7bm90ZVBhdGgucmVwbGFjZSgnLm1kJywgJycpfXwke25vdGVOYW1lfV1dYCk7XG4gICAgbGluZXMucHVzaCgnJyk7XG4gICAgbGluZXMucHVzaChgKipcdUQwQTRcdUM2Q0NcdUI0REMqKjogJHtrZXl3b3Jkc31gKTtcbiAgICBsaW5lcy5wdXNoKGAqKlx1RDEzNCBcdUMyMTgqKjogJHtzZWdtZW50LnR1cm5zLmxlbmd0aH1gKTtcbiAgICBsaW5lcy5wdXNoKGAqKlx1QzcyMFx1QzBBQ1x1QjNDNCoqOiAkeyhzZWdtZW50LmF2Z1NpbWlsYXJpdHkgKiAxMDApLnRvRml4ZWQoMSl9JWApO1xuICAgIGxpbmVzLnB1c2goJycpO1xuICB9XG5cbiAgY29uc3QgbWFya2Rvd24gPSBsaW5lcy5qb2luKCdcXG4nKTtcbiAgY29uc3QgZmlsZW5hbWUgPSBzYW5pdGl6ZUZpbGVuYW1lKGJhc2VUaXRsZSkgKyAnLVx1Qzc3OFx1QjM3MVx1QzJBNC5tZCc7XG4gIGNvbnN0IHRhcmdldFBhdGggPSBhd2FpdCBlbnN1cmVVbmlxdWVQYXRoKFxuICAgIHZhdWx0LFxuICAgIG5vcm1hbGl6ZVBhdGgoZm9sZGVyID8gYCR7Zm9sZGVyfS8ke2ZpbGVuYW1lfWAgOiBmaWxlbmFtZSlcbiAgKTtcblxuICBhd2FpdCB2YXVsdC5jcmVhdGUodGFyZ2V0UGF0aCwgbWFya2Rvd24pO1xuICByZXR1cm4gdGFyZ2V0UGF0aDtcbn1cblxuLyoqXG4gKiBcdUQzMENcdUM3N0NcdUJBODVcdUM3NDQgXHVDNTQ4XHVDODA0XHVENTU4XHVBQzhDIFx1QkNDMFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNFxuICovXG5mdW5jdGlvbiBzYW5pdGl6ZUZpbGVuYW1lKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpO1xuICBpZiAoIXRyaW1tZWQpIHtcbiAgICByZXR1cm4gJ3VudGl0bGVkJztcbiAgfVxuXG4gIGNvbnN0IGNsZWFuZWQgPSB0cmltbWVkXG4gICAgLnJlcGxhY2UoL1tcXFxcLzoqP1wiPD58XS9nLCAnICcpXG4gICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgIC50cmltKCk7XG5cbiAgcmV0dXJuIGNsZWFuZWQgfHwgJ3VudGl0bGVkJztcbn1cblxuLyoqXG4gKiBcdUQzRjRcdUIzNTRcdUFDMDAgXHVDODc0XHVDN0FDXHVENTU4XHVCMjk0XHVDOUMwIFx1RDY1NVx1Qzc3OFx1RDU1OFx1QUNFMCBcdUM1QzZcdUM3M0NcdUJBNzQgXHVDMEREXHVDMTMxXHVENTY5XHVCMkM4XHVCMkU0XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyh2YXVsdDogVmF1bHQsIGZvbGRlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlcik7XG4gIGlmICghZXhpc3RzKSB7XG4gICAgYXdhaXQgdmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlcik7XG4gIH1cbn1cblxuLyoqXG4gKiBcdUFDRTBcdUM3MjBcdUQ1NUMgXHVEMzBDXHVDNzdDIFx1QUNCRFx1Qjg1Q1x1Qjk3QyBcdUJDRjRcdUM3QTVcdUQ1NjlcdUIyQzhcdUIyRTRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW5zdXJlVW5pcXVlUGF0aCh2YXVsdDogVmF1bHQsIHBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuICBjb25zdCBleHRlbnNpb25JbmRleCA9IG5vcm1hbGl6ZWQubGFzdEluZGV4T2YoJy5tZCcpO1xuICBjb25zdCBiYXNlID0gZXh0ZW5zaW9uSW5kZXggPT09IC0xID8gbm9ybWFsaXplZCA6IG5vcm1hbGl6ZWQuc2xpY2UoMCwgZXh0ZW5zaW9uSW5kZXgpO1xuICBjb25zdCBleHRlbnNpb24gPSBleHRlbnNpb25JbmRleCA9PT0gLTEgPyAnJyA6ICcubWQnO1xuXG4gIGxldCBjYW5kaWRhdGUgPSBub3JtYWxpemVkO1xuICBsZXQgY291bnQgPSAxO1xuXG4gIHdoaWxlIChhd2FpdCB2YXVsdC5hZGFwdGVyLmV4aXN0cyhjYW5kaWRhdGUpKSB7XG4gICAgY2FuZGlkYXRlID0gYCR7YmFzZX0tJHtjb3VudH0ke2V4dGVuc2lvbn1gO1xuICAgIGNvdW50ICs9IDE7XG4gIH1cblxuICByZXR1cm4gY2FuZGlkYXRlO1xufVxuIiwgIi8vIEpTT04gXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwIFx1QzgwMFx1QzdBNVx1QzE4Q1xuXG5pbXBvcnQgeyBleGlzdHNTeW5jLCBta2RpclN5bmMsIHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYywgcmVuYW1lU3luYyB9IGZyb20gXCJmc1wiO1xuaW1wb3J0IHsgZGlybmFtZSB9IGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBOb3RlTWV0YWRhdGEsIENodW5rLCBNZXRhZGF0YVN0b3JlRGF0YSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXRhZGF0YVN0b3JlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBzdG9yZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBkYXRhOiBNZXRhZGF0YVN0b3JlRGF0YTtcblxuICBjb25zdHJ1Y3RvcihzdG9yZVBhdGg6IHN0cmluZywgaW5kZXhTaWduYXR1cmU6IHN0cmluZykge1xuICAgIHRoaXMuc3RvcmVQYXRoID0gc3RvcmVQYXRoO1xuICAgIHRoaXMuZGF0YSA9IHRoaXMubG9hZERhdGEoaW5kZXhTaWduYXR1cmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXG4gICAqL1xuICBwcml2YXRlIGxvYWREYXRhKGluZGV4U2lnbmF0dXJlOiBzdHJpbmcpOiBNZXRhZGF0YVN0b3JlRGF0YSB7XG4gICAgaWYgKCFleGlzdHNTeW5jKHRoaXMuc3RvcmVQYXRoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5kZXhTaWduYXR1cmUsXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgbm90ZXM6IHt9LFxuICAgICAgICBjaHVua3M6IHt9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gcmVhZEZpbGVTeW5jKHRoaXMuc3RvcmVQYXRoLCBcInV0Zi04XCIpO1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpIGFzIFBhcnRpYWw8TWV0YWRhdGFTdG9yZURhdGE+O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5kZXhTaWduYXR1cmU6IHBhcnNlZC5pbmRleFNpZ25hdHVyZSB8fCBpbmRleFNpZ25hdHVyZSxcbiAgICAgICAgdXBkYXRlZEF0OiB0eXBlb2YgcGFyc2VkLnVwZGF0ZWRBdCA9PT0gXCJudW1iZXJcIiA/IHBhcnNlZC51cGRhdGVkQXQgOiBEYXRlLm5vdygpLFxuICAgICAgICBub3RlczogcGFyc2VkLm5vdGVzIHx8IHt9LFxuICAgICAgICBjaHVua3M6IHBhcnNlZC5jaHVua3MgfHwge30sXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODAwXHVDN0E1XHVDMThDIFx1Qjg1Q1x1QjREQyBcdUMyRTRcdUQzMjgsIFx1QzBDOFx1Qjg1QyBcdUNEMDhcdUFFMzBcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQ6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4U2lnbmF0dXJlLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIG5vdGVzOiB7fSxcbiAgICAgICAgY2h1bmtzOiB7fSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODAwXHVDN0E1IChcdUM2RDBcdUM3OTBcdUM4MDEgXHVDNEYwXHVBRTMwKVxuICAgKi9cbiAgcHJpdmF0ZSBwZXJzaXN0KCk6IHZvaWQge1xuICAgIG1rZGlyU3luYyhkaXJuYW1lKHRoaXMuc3RvcmVQYXRoKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgdGhpcy5kYXRhLnVwZGF0ZWRBdCA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCB0ZW1wUGF0aCA9IGAke3RoaXMuc3RvcmVQYXRofS50bXBgO1xuICAgIHdyaXRlRmlsZVN5bmModGVtcFBhdGgsIEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSksIFwidXRmLThcIik7XG4gICAgcmVuYW1lU3luYyh0ZW1wUGF0aCwgdGhpcy5zdG9yZVBhdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1Qzc3OFx1QjM3MVx1QzJBNCBcdUMyRENcdUFERjhcdUIyQzhcdUNDOTggXHVDODcwXHVENjhDXG4gICAqL1xuICBnZXRJbmRleFNpZ25hdHVyZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhTaWduYXR1cmU7XG4gIH1cblxuICAvKipcbiAgICogXHVDODAwXHVDN0E1XHVDMThDIFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgKi9cbiAgcmVzZXQoaW5kZXhTaWduYXR1cmU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZGF0YSA9IHtcbiAgICAgIGluZGV4U2lnbmF0dXJlLFxuICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgbm90ZXM6IHt9LFxuICAgICAgY2h1bmtzOiB7fSxcbiAgICB9O1xuICAgIHRoaXMucGVyc2lzdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QjE3OFx1RDJCOCBcdUM4MDBcdUM3QTUgXHVCNjEwXHVCMjk0IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuICAgKi9cbiAgdXBzZXJ0Tm90ZShub3RlOiBOb3RlTWV0YWRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLmRhdGEubm90ZXNbbm90ZS5pZF0gPSB7IC4uLm5vdGUgfTtcbiAgICB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUFDQkRcdUI4NUNcdUI4NUMgXHVCMTc4XHVEMkI4IFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0Tm90ZUJ5UGF0aChwYXRoOiBzdHJpbmcpOiBOb3RlTWV0YWRhdGEgfCBudWxsIHtcbiAgICBjb25zdCBub3RlID0gT2JqZWN0LnZhbHVlcyh0aGlzLmRhdGEubm90ZXMpLmZpbmQoKGl0ZW0pID0+IGl0ZW0ucGF0aCA9PT0gcGF0aCk7XG4gICAgcmV0dXJuIG5vdGUgPyB7IC4uLm5vdGUgfSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogSURcdUI4NUMgXHVCMTc4XHVEMkI4IFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0Tm90ZUJ5SWQoaWQ6IHN0cmluZyk6IE5vdGVNZXRhZGF0YSB8IG51bGwge1xuICAgIGNvbnN0IG5vdGUgPSB0aGlzLmRhdGEubm90ZXNbaWRdO1xuICAgIHJldHVybiBub3RlID8geyAuLi5ub3RlIH0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QkFBOFx1QjRFMCBcdUIxNzhcdUQyQjggXHVDODcwXHVENjhDXG4gICAqL1xuICBnZXRBbGxOb3RlcygpOiBOb3RlTWV0YWRhdGFbXSB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5kYXRhLm5vdGVzKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIudXBkYXRlZEF0IC0gYS51cGRhdGVkQXQpXG4gICAgICAubWFwKChub3RlKSA9PiAoeyAuLi5ub3RlIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIxNzhcdUQyQjggXHVDMEFEXHVDODFDXG4gICAqL1xuICBkZWxldGVOb3RlKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy5kYXRhLm5vdGVzW2lkXTtcbiAgICB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNDQURcdUQwNkMgXHVDODAwXHVDN0E1XG4gICAqL1xuICBpbnNlcnRDaHVua3MoY2h1bmtzOiBDaHVua1tdKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgIHRoaXMuZGF0YS5jaHVua3NbY2h1bmsuaWRdID0geyAuLi5jaHVuayB9O1xuICAgIH1cbiAgICB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIxNzhcdUQyQjhcdUM3NTggXHVDQ0FEXHVEMDZDIFx1QzBBRFx1QzgxQ1xuICAgKi9cbiAgZGVsZXRlQ2h1bmtzQnlOb3RlSWQobm90ZUlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IFtjaHVua0lkLCBjaHVua10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kYXRhLmNodW5rcykpIHtcbiAgICAgIGlmIChjaHVuay5ub3RlSWQgPT09IG5vdGVJZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5kYXRhLmNodW5rc1tjaHVua0lkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHVCMTc4XHVEMkI4XHVDNzU4IFx1Q0NBRFx1RDA2QyBcdUM4NzBcdUQ2OENcbiAgICovXG4gIGdldENodW5rc0J5Tm90ZUlkKG5vdGVJZDogc3RyaW5nKTogQ2h1bmtbXSB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5kYXRhLmNodW5rcylcbiAgICAgIC5maWx0ZXIoKGNodW5rKSA9PiBjaHVuay5ub3RlSWQgPT09IG5vdGVJZClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uIC0gYi5wb3NpdGlvbilcbiAgICAgIC5tYXAoKGNodW5rKSA9PiAoeyAuLi5jaHVuayB9KSk7XG4gIH1cblxuICAvKipcbiAgICogSURcdUI4NUMgXHVDQ0FEXHVEMDZDIFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0Q2h1bmtCeUlkKGlkOiBzdHJpbmcpOiBDaHVuayB8IG51bGwge1xuICAgIGNvbnN0IGNodW5rID0gdGhpcy5kYXRhLmNodW5rc1tpZF07XG4gICAgcmV0dXJuIGNodW5rID8geyAuLi5jaHVuayB9IDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUJBQThcdUI0RTAgXHVDQ0FEXHVEMDZDIFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0QWxsQ2h1bmtzKCk6IENodW5rW10ge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuZGF0YS5jaHVua3MpLm1hcCgoY2h1bmspID0+ICh7IC4uLmNodW5rIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVCMkVCXHVBRTMwXG4gICAqL1xuICBjbG9zZSgpOiB2b2lkIHtcbiAgICAvLyBcdUQzMENcdUM3N0MgXHVBRTMwXHVCQzE4IFx1QzgwMFx1QzdBNVx1QzE4Q1x1QjI5NCBjbG9zZSBcdUIzRDlcdUM3OTFcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTU4XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cbiAgfVxufVxuIiwgIi8vIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzFcdUFFMzAgLSBBUEkgXHVBRTMwXHVCQzE4IFx1QkMwRiBcdUI4NUNcdUNFRUMgXHVCQUE4XHVCMzc4IFx1QzlDMFx1QzZEMFxuXG5pbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCB0eXBlIEVtYmVkZGluZ0NvbmZpZyA9IHtcbiAgcHJvdmlkZXI6IFwiZ2VtaW5pXCIgfCBcIm9wZW5haVwiIHwgXCJsb2NhbFwiIHwgXCJjdXN0b21cIjtcbiAgYXBpS2V5Pzogc3RyaW5nO1xuICBtb2RlbDogc3RyaW5nO1xuICBhcGlVcmw/OiBzdHJpbmc7XG59O1xuXG5pbnRlcmZhY2UgR2VtaW5pRW1iZWRkaW5nUmVzcG9uc2Uge1xuICBlbWJlZGRpbmc/OiB7XG4gICAgdmFsdWVzPzogbnVtYmVyW107XG4gIH07XG59XG5cbmludGVyZmFjZSBPcGVuQUlFbWJlZGRpbmdSZXNwb25zZSB7XG4gIGRhdGE/OiBBcnJheTx7XG4gICAgZW1iZWRkaW5nPzogbnVtYmVyW107XG4gIH0+O1xufVxuXG5pbnRlcmZhY2UgQ3VzdG9tRW1iZWRkaW5nUmVzcG9uc2Uge1xuICBkYXRhPzogQXJyYXk8e1xuICAgIGVtYmVkZGluZz86IG51bWJlcltdO1xuICB9Pjtcbn1cblxuZXhwb3J0IGNsYXNzIEVtYmVkZGluZ0dlbmVyYXRvciB7XG4gIHByaXZhdGUgcGlwZWxpbmU6IGFueSA9IG51bGw7XG4gIHByaXZhdGUgcGlwZWxpbmVGYWN0b3J5OiAoKHRhc2s6IHN0cmluZywgbW9kZWw6IHN0cmluZykgPT4gUHJvbWlzZTxhbnk+KSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbmZpZzogRW1iZWRkaW5nQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogRW1iZWRkaW5nQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IFx1Q0QwOFx1QUUzMFx1RDY1NFxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5jb25maWcucHJvdmlkZXIgPT09IFwibG9jYWxcIikge1xuICAgICAgaWYgKHRoaXMucGlwZWxpbmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgXHVCODVDXHVDRUVDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJBQThcdUIzNzggXHVCODVDXHVCNTI5IFx1QzkxMTogJHt0aGlzLmNvbmZpZy5tb2RlbH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGBcdUJBQThcdUIzNzhcdUM3NDAgSHVnZ2luZ0ZhY2VcdUM1RDBcdUMxMUMgXHVCMkU0XHVDNkI0XHVCODVDXHVCNERDXHVCNDE4XHVDNUI0IFx1Qjg1Q1x1Q0VFQ1x1QzVEMCBcdUNFOTBcdUMyRENcdUI0MjlcdUIyQzhcdUIyRTQuYCk7XG4gICAgICBjb25zdCBwaXBlbGluZUZhY3RvcnkgPSBhd2FpdCB0aGlzLmxvYWRQaXBlbGluZUZhY3RvcnkoKTtcbiAgICAgIHRoaXMucGlwZWxpbmUgPSBhd2FpdCBwaXBlbGluZUZhY3RvcnkoXCJmZWF0dXJlLWV4dHJhY3Rpb25cIiwgdGhpcy5jb25maWcubW9kZWwpO1xuICAgICAgY29uc29sZS5sb2coXCJcdUM3ODRcdUJDQTBcdUI1MjkgXHVCQUE4XHVCMzc4IFx1Qjg1Q1x1QjUyOSBcdUM2NDRcdUI4Q0NcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFQSSBcdUFFMzBcdUJDMThcdUM3NDAgXHVDRDA4XHVBRTMwXHVENjU0IFx1QkQ4OFx1RDU0NFx1QzY5NFxuICAgICAgY29uc29sZS5sb2coYEFQSSBcdUFFMzBcdUJDMTggXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBBQ1x1QzZBOTogJHt0aGlzLmNvbmZpZy5wcm92aWRlcn1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMTREXHVDMkE0XHVEMkI4XHVCOTdDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJDQTFcdUQxMzBcdUI4NUMgXHVCQ0MwXHVENjU4XG4gICAqL1xuICBhc3luYyBlbWJlZCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgaWYgKHRoaXMuY29uZmlnLnByb3ZpZGVyID09PSBcImxvY2FsXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtYmVkTG9jYWwodGV4dCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy5wcm92aWRlciA9PT0gXCJnZW1pbmlcIikge1xuICAgICAgcmV0dXJuIHRoaXMuZW1iZWRHZW1pbmkodGV4dCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy5wcm92aWRlciA9PT0gXCJvcGVuYWlcIikge1xuICAgICAgcmV0dXJuIHRoaXMuZW1iZWRPcGVuQUkodGV4dCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy5wcm92aWRlciA9PT0gXCJjdXN0b21cIikge1xuICAgICAgcmV0dXJuIHRoaXMuZW1iZWRDdXN0b20odGV4dCk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBcdUM5QzBcdUM2RDBcdUQ1NThcdUM5QzAgXHVDNTRBXHVCMjk0IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM4MUNcdUFDRjVcdUM3OTA6ICR7dGhpcy5jb25maWcucHJvdmlkZXJ9YCk7XG4gIH1cblxuICAvKipcbiAgICogXHVCODVDXHVDRUVDIFx1QkFBOFx1QjM3OFx1Qjg1QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVtYmVkTG9jYWwodGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGlmICghdGhpcy5waXBlbGluZSkge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBpcGVsaW5lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUM3ODRcdUJDQTBcdUI1MjkgXHVEMzBDXHVDNzc0XHVENTA0XHVCNzdDXHVDNzc4IFx1Q0QwOFx1QUUzMFx1RDY1NCBcdUMyRTRcdUQzMjhcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdGhpcy5waXBlbGluZSh0ZXh0LCB7XG4gICAgICBwb29saW5nOiBcIm1lYW5cIixcbiAgICAgIG5vcm1hbGl6ZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKG91dHB1dC5kYXRhIGFzIEZsb2F0MzJBcnJheSk7XG4gIH1cblxuICAvKipcbiAgICogXHVCODVDXHVDRUVDIFx1Qzc4NFx1QkNBMFx1QjUyOVx1QzZBOSBcdUQzMENcdUM3NzRcdUQ1MDRcdUI3N0NcdUM3NzggXHVCODVDXHVCMzU0IChcdUQ1NDRcdUM2OTRcdUQ1NjAgXHVCNTRDXHVCOUNDIFx1Qjg1Q1x1QjREQylcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZFBpcGVsaW5lRmFjdG9yeSgpOiBQcm9taXNlPCh0YXNrOiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcpID0+IFByb21pc2U8YW55Pj4ge1xuICAgIGlmICh0aGlzLnBpcGVsaW5lRmFjdG9yeSkge1xuICAgICAgcmV0dXJuIHRoaXMucGlwZWxpbmVGYWN0b3J5O1xuICAgIH1cblxuICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IGltcG9ydChcIkB4ZW5vdmEvdHJhbnNmb3JtZXJzXCIpO1xuICAgIHRoaXMucGlwZWxpbmVGYWN0b3J5ID0gbW9kdWxlLnBpcGVsaW5lIGFzICh0YXNrOiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcpID0+IFByb21pc2U8YW55PjtcbiAgICByZXR1cm4gdGhpcy5waXBlbGluZUZhY3Rvcnk7XG4gIH1cblxuICAvKipcbiAgICogR2VtaW5pIEFQSVx1Qjg1QyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEREXHVDMTMxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVtYmVkR2VtaW5pKHRleHQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VtaW5pIEFQSSBcdUQwQTRcdUFDMDAgXHVDMTI0XHVDODE1XHVCNDE4XHVDOUMwIFx1QzU0QVx1QzU1OFx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmNvbmZpZy5hcGlVcmx9LyR7dGhpcy5jb25maWcubW9kZWx9OmVtYmVkQ29udGVudD9rZXk9JHt0aGlzLmNvbmZpZy5hcGlLZXl9YDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmwsXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0IH1dLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uIGFzIEdlbWluaUVtYmVkZGluZ1Jlc3BvbnNlO1xuICAgICAgaWYgKGRhdGEuZW1iZWRkaW5nPy52YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEuZW1iZWRkaW5nLnZhbHVlcztcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VtaW5pIEFQSSBcdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREXHVDNzc0IFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJHZW1pbmkgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuQUkgQVBJXHVCODVDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW1iZWRPcGVuQUkodGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGlmICghdGhpcy5jb25maWcuYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPcGVuQUkgQVBJIFx1RDBBNFx1QUMwMCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6IHRoaXMuY29uZmlnLmFwaVVybCB8fCBcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvZW1iZWRkaW5nc1wiLFxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5hcGlLZXl9YCxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG1vZGVsOiB0aGlzLmNvbmZpZy5tb2RlbCxcbiAgICAgICAgICBpbnB1dDogdGV4dCxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb24gYXMgT3BlbkFJRW1iZWRkaW5nUmVzcG9uc2U7XG4gICAgICBpZiAoZGF0YS5kYXRhPy5bMF0/LmVtYmVkZGluZykge1xuICAgICAgICByZXR1cm4gZGF0YS5kYXRhWzBdLmVtYmVkZGluZztcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlbkFJIEFQSSBcdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREXHVDNzc0IFx1QzYyQ1x1QkMxNFx1Qjk3NFx1QzlDMCBcdUM1NEFcdUMyQjVcdUIyQzhcdUIyRTRcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJPcGVuQUkgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMSBcdUMyRTRcdUQzMjg6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdUNFRTRcdUMyQTRcdUQxNDAgQVBJXHVCODVDIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW1iZWRDdXN0b20odGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGlmICghdGhpcy5jb25maWcuYXBpVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUNFRTRcdUMyQTRcdUQxNDAgQVBJIFVSTFx1Qzc3NCBcdUMxMjRcdUM4MTVcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5hcGlLZXkpIHtcbiAgICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQmVhcmVyICR7dGhpcy5jb25maWcuYXBpS2V5fWA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgIHVybDogdGhpcy5jb25maWcuYXBpVXJsLFxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWw6IHRoaXMuY29uZmlnLm1vZGVsLFxuICAgICAgICAgIGlucHV0OiB0ZXh0LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhcyBDdXN0b21FbWJlZGRpbmdSZXNwb25zZSB8IG51bWJlcltdO1xuICAgICAgXG4gICAgICAvLyBPcGVuQUkgXHVENjM4XHVENjU4IFx1RDYxNVx1QzJERFxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpICYmIGRhdGEuZGF0YT8uWzBdPy5lbWJlZGRpbmcpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEuZGF0YVswXS5lbWJlZGRpbmc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1QzlDMVx1QzgxMSBcdUJDMzBcdUM1RjQgXHVCQzE4XHVENjU4XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDRUU0XHVDMkE0XHVEMTQwIEFQSSBcdUM3NTFcdUIyRjUgXHVENjE1XHVDMkREXHVDNzQ0IFx1RDMwQ1x1QzJGMVx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVDRUU0XHVDMkE0XHVEMTQwIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzEgXHVDMkU0XHVEMzI4OlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDNUVDXHVCN0VDIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUJDMzBcdUNFNThcdUI4NUMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVxuICAgKi9cbiAgYXN5bmMgZW1iZWRCYXRjaCh0ZXh0czogc3RyaW5nW10pOiBQcm9taXNlPG51bWJlcltdW10+IHtcbiAgICBjb25zdCBlbWJlZGRpbmdzOiBudW1iZXJbXVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRleHQgb2YgdGV4dHMpIHtcbiAgICAgIGNvbnN0IGVtYmVkZGluZyA9IGF3YWl0IHRoaXMuZW1iZWQodGV4dCk7XG4gICAgICBlbWJlZGRpbmdzLnB1c2goZW1iZWRkaW5nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW1iZWRkaW5ncztcbiAgfVxufVxuIiwgIi8vIFx1QjlDOFx1RDA2Q1x1QjJFNFx1QzZCNCBcdUQzMENcdUMxMUMgLSBmcm9udG1hdHRlciwgXHVEMERDXHVBREY4LCBcdUI5QzFcdUQwNkMgXHVDRDk0XHVDRDlDXG5cbmltcG9ydCBtYXR0ZXIgZnJvbSBcImdyYXktbWF0dGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcImNyeXB0b1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZE5vdGUge1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgdGFnczogc3RyaW5nW107XG4gIGxpbmtzOiBzdHJpbmdbXTtcbiAgdGl0bGU6IHN0cmluZztcbiAgc2VjdGlvbnM6IFNlY3Rpb25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN0aW9uIHtcbiAgaGVhZGluZzogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGxldmVsOiBudW1iZXI7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG59XG5cbi8qKlxuICogXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUQzMENcdUMyRjFcdUQ1NThcdUM1RUMgXHVCQTU0XHVEMEMwXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1Q0Q5NFx1Q0Q5Q1x1RDU2OVx1QjJDOFx1QjJFNC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWFya2Rvd24oZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUGFyc2VkTm90ZSB7XG4gIC8vIEZyb250bWF0dGVyIFx1RDMwQ1x1QzJGMVxuICBjb25zdCBwYXJzZWQgPSBtYXR0ZXIoY29udGVudCk7XG4gIGNvbnN0IGZyb250bWF0dGVyID0gcGFyc2VkLmRhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIGNvbnN0IGJvZHlDb250ZW50ID0gcGFyc2VkLmNvbnRlbnQ7XG5cbiAgLy8gXHVDODFDXHVCQUE5IFx1Q0Q5NFx1Q0Q5QyAoZnJvbnRtYXR0ZXJcdUM3NTggdGl0bGUgXHVCNjEwXHVCMjk0IFx1RDMwQ1x1Qzc3Q1x1QkE4NSlcbiAgY29uc3QgdGl0bGUgPSAoZnJvbnRtYXR0ZXIudGl0bGUgYXMgc3RyaW5nKSB8fCBleHRyYWN0VGl0bGVGcm9tUGF0aChmaWxlUGF0aCk7XG5cbiAgLy8gXHVEMERDXHVBREY4IFx1Q0Q5NFx1Q0Q5QyAoI1x1RDBEQ1x1QURGOCBcdUQ2MTVcdUMyREQpXG4gIGNvbnN0IHRhZ3MgPSBleHRyYWN0VGFncyhib2R5Q29udGVudCwgZnJvbnRtYXR0ZXIpO1xuXG4gIC8vIFx1QjlDMVx1RDA2QyBcdUNEOTRcdUNEOUMgKFtbXHVCOUMxXHVEMDZDXV0gXHVENjE1XHVDMkREKVxuICBjb25zdCBsaW5rcyA9IGV4dHJhY3RMaW5rcyhib2R5Q29udGVudCk7XG5cbiAgLy8gXHVDMTM5XHVDMTU4IFx1QkQ4NFx1QjlBQ1xuICBjb25zdCBzZWN0aW9ucyA9IGV4dHJhY3RTZWN0aW9ucyhib2R5Q29udGVudCk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb250ZW50OiBib2R5Q29udGVudCxcbiAgICBmcm9udG1hdHRlcixcbiAgICB0YWdzLFxuICAgIGxpbmtzLFxuICAgIHRpdGxlLFxuICAgIHNlY3Rpb25zLFxuICB9O1xufVxuXG4vKipcbiAqIFx1RDMwQ1x1Qzc3QyBcdUFDQkRcdUI4NUNcdUM1RDBcdUMxMUMgXHVDODFDXHVCQUE5IFx1Q0Q5NFx1Q0Q5Q1xuICovXG5mdW5jdGlvbiBleHRyYWN0VGl0bGVGcm9tUGF0aChmaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZmlsZU5hbWUgPSBmaWxlUGF0aC5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJcIjtcbiAgcmV0dXJuIGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xufVxuXG4vKipcbiAqIFx1QkNGOFx1QkIzOFx1QUNGQyBmcm9udG1hdHRlclx1QzVEMFx1QzExQyBcdUQwRENcdUFERjggXHVDRDk0XHVDRDlDXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RUYWdzKGNvbnRlbnQ6IHN0cmluZywgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogc3RyaW5nW10ge1xuICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgLy8gRnJvbnRtYXR0ZXJcdUM3NTggdGFncyBcdUQ1NDRcdUI0RENcbiAgaWYgKEFycmF5LmlzQXJyYXkoZnJvbnRtYXR0ZXIudGFncykpIHtcbiAgICBmcm9udG1hdHRlci50YWdzLmZvckVhY2goKHRhZykgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB0YWcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGFncy5hZGQodGFnLnJlcGxhY2UoL14jLywgXCJcIikpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gXHVCQ0Y4XHVCQjM4XHVDNUQwXHVDMTFDICNcdUQwRENcdUFERjggXHVDRDk0XHVDRDlDXG4gIGNvbnN0IGhhc2h0YWdSZWdleCA9IC8jKFthLXpBLVowLTlcdUFDMDAtXHVEN0EzXy1dKykvZztcbiAgbGV0IG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gaGFzaHRhZ1JlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgdGFncy5hZGQobWF0Y2hbMV0pO1xuICB9XG5cbiAgcmV0dXJuIEFycmF5LmZyb20odGFncyk7XG59XG5cbi8qKlxuICogT2JzaWRpYW4gXHVCOUMxXHVEMDZDIFx1Q0Q5NFx1Q0Q5QyAoW1tcdUI5QzFcdUQwNkNdXSBcdUQ2MTVcdUMyREQpXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RMaW5rcyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGxpbmtzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IGxpbmtSZWdleCA9IC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZztcbiAgbGV0IG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gbGlua1JlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgLy8gXHVCQ0M0XHVDRTZEIFx1Q0M5OFx1QjlBQyBbW1x1QjlDMVx1RDA2Q3xcdUJDQzRcdUNFNkRdXVxuICAgIGNvbnN0IGxpbmsgPSBtYXRjaFsxXS5zcGxpdChcInxcIilbMF0udHJpbSgpO1xuICAgIGxpbmtzLmFkZChsaW5rKTtcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShsaW5rcyk7XG59XG5cbi8qKlxuICogXHVENUU0XHVCMzU0IFx1QUUzMFx1QzkwMFx1QzczQ1x1Qjg1QyBcdUMxMzlcdUMxNTggXHVCRDg0XHVCOUFDXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RTZWN0aW9ucyhjb250ZW50OiBzdHJpbmcpOiBTZWN0aW9uW10ge1xuICBjb25zdCBzZWN0aW9uczogU2VjdGlvbltdID0gW107XG4gIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdChcIlxcblwiKTtcblxuICBsZXQgY3VycmVudFNlY3Rpb246IFNlY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgbGV0IGN1cnJlbnRDb250ZW50OiBzdHJpbmdbXSA9IFtdO1xuICBsZXQgcG9zaXRpb24gPSAwO1xuXG4gIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgIGNvbnN0IGhlYWRlck1hdGNoID0gbGluZS5tYXRjaCgvXigjezEsNn0pXFxzKyguKykkLyk7XG5cbiAgICBpZiAoaGVhZGVyTWF0Y2gpIHtcbiAgICAgIC8vIFx1Qzc3NFx1QzgwNCBcdUMxMzlcdUMxNTggXHVDODAwXHVDN0E1XG4gICAgICBpZiAoY3VycmVudFNlY3Rpb24pIHtcbiAgICAgICAgY3VycmVudFNlY3Rpb24uY29udGVudCA9IGN1cnJlbnRDb250ZW50LmpvaW4oXCJcXG5cIikudHJpbSgpO1xuICAgICAgICBzZWN0aW9ucy5wdXNoKGN1cnJlbnRTZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gXHVDMEM4IFx1QzEzOVx1QzE1OCBcdUMyRENcdUM3OTFcbiAgICAgIGN1cnJlbnRTZWN0aW9uID0ge1xuICAgICAgICBoZWFkaW5nOiBoZWFkZXJNYXRjaFsyXS50cmltKCksXG4gICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgIGxldmVsOiBoZWFkZXJNYXRjaFsxXS5sZW5ndGgsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgfTtcbiAgICAgIGN1cnJlbnRDb250ZW50ID0gW107XG4gICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbikge1xuICAgICAgY3VycmVudENvbnRlbnQucHVzaChsaW5lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHVENUU0XHVCMzU0IFx1QzVDNlx1QjI5NCBcdUNDQUIgXHVCRDgwXHVCRDg0XG4gICAgICBpZiAoc2VjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGN1cnJlbnRTZWN0aW9uID0ge1xuICAgICAgICAgIGhlYWRpbmc6IFwiXCIsXG4gICAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgICBsZXZlbDogMCxcbiAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRDb250ZW50LnB1c2gobGluZSk7XG4gICAgfVxuXG4gICAgcG9zaXRpb24gKz0gbGluZS5sZW5ndGggKyAxOyAvLyArMSBmb3IgbmV3bGluZVxuICB9XG5cbiAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1QzEzOVx1QzE1OCBcdUM4MDBcdUM3QTVcbiAgaWYgKGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgY3VycmVudFNlY3Rpb24uY29udGVudCA9IGN1cnJlbnRDb250ZW50LmpvaW4oXCJcXG5cIikudHJpbSgpO1xuICAgIHNlY3Rpb25zLnB1c2goY3VycmVudFNlY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIHNlY3Rpb25zO1xufVxuXG4vKipcbiAqIFx1RDMwQ1x1Qzc3QyBcdUIwQjRcdUM2QTlcdUM3NTggXHVENTc0XHVDMkRDIFx1QzBERFx1QzEzMVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUhhc2goY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGNyZWF0ZUhhc2goXCJzaGEyNTZcIikudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdChcImhleFwiKTtcbn1cbiIsICIvLyBcdUJCMzhcdUMxMUMgXHVDQ0FEXHVEMEI5IFx1Qjg1Q1x1QzlDMSAtIFx1RDE0RFx1QzJBNFx1RDJCOFx1Qjk3QyBcdUM4MDFcdUM4MDhcdUQ1NUMgXHVEMDZDXHVBRTMwXHVCODVDIFx1QkQ4NFx1RDU2MFxuXG5pbXBvcnQgeyBDaHVuayB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vcGFyc2VyXCI7XG5cbi8qKlxuICogXHVBQzA0XHVCMkU4XHVENTVDIFx1RDFBMFx1RDA3MCBcdUNFNzRcdUM2QjRcdUQxMzAgKFx1QUNGNVx1QkMzMSBcdUFFMzBcdUM5MDAgXHVBREZDXHVDMEFDXHVDRTU4KVxuICogXHVDQzM4XHVBQ0UwOiBcdUQ1NUNcdUFFMDBcdUFDRkMgXHVDNjAxXHVDNUI0XHVCOTdDIFx1QkQ4NFx1QjlBQ1x1RDU1OFx1QzVFQyBcdUNFNzRcdUM2QjRcdUQyQjhcdUQ1NThcdUM1RUMgXHVDNzc0XHVDOTExIFx1Q0U3NFx1QzZCNFx1RDJCOCBcdUJDMjlcdUM5QzBcbiAqL1xuZnVuY3Rpb24gZXN0aW1hdGVUb2tlbkNvdW50KHRleHQ6IHN0cmluZyk6IG51bWJlciB7XG4gIC8vIFx1RDU1Q1x1QUUwMCBcdUJCMzhcdUM3OTAgXHVDODFDXHVBQzcwIFx1RDZDNCBcdUM2MDFcdUM1QjQvXHVDMjJCXHVDNzkwIFx1QjJFOFx1QzVCNCBcdUNFNzRcdUM2QjRcdUQyQjhcbiAgY29uc3Qgbm9uS29yZWFuVGV4dCA9IHRleHQucmVwbGFjZSgvW1x1QUMwMC1cdUQ3QTNdL2csIFwiIFwiKTtcbiAgY29uc3Qgd29yZHMgPSBub25Lb3JlYW5UZXh0LnNwbGl0KC9cXHMrLykuZmlsdGVyKCh3KSA9PiB3Lmxlbmd0aCA+IDApLmxlbmd0aDtcbiAgXG4gIC8vIFx1RDU1Q1x1QUUwMCBcdUJCMzhcdUM3OTBcdUI5Q0MgXHVDRTc0XHVDNkI0XHVEMkI4XG4gIGNvbnN0IGtvcmVhbkNoYXJzID0gKHRleHQubWF0Y2goL1tcdUFDMDAtXHVEN0EzXS9nKSB8fCBbXSkubGVuZ3RoO1xuICBcbiAgLy8gXHVDNjAxXHVDNUI0XHVCMjk0IDFcdUIyRThcdUM1QjQgXHUyMjQ4IDEuMyBcdUQxQTBcdUQwNzAsIFx1RDU1Q1x1QUUwMFx1Qzc0MCAxXHVDNzRDXHVDODA4IFx1MjI0OCAxIFx1RDFBMFx1RDA3MCBcdUFERkNcdUMwQUNcbiAgcmV0dXJuIE1hdGguY2VpbCh3b3JkcyAqIDEuMyArIGtvcmVhbkNoYXJzKTtcbn1cblxuLyoqXG4gKiBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVDQ0FEXHVEMDZDXHVCODVDIFx1QkQ4NFx1RDU2MFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2h1bmtUZXh0KFxuICBub3RlSWQ6IHN0cmluZyxcbiAgc2VjdGlvbnM6IFNlY3Rpb25bXSxcbiAgb3B0aW9uczoge1xuICAgIGNodW5rU2l6ZT86IG51bWJlcjtcbiAgICBjaHVua092ZXJsYXA/OiBudW1iZXI7XG4gIH0gPSB7fVxuKTogQ2h1bmtbXSB7XG4gIGNvbnN0IGNodW5rU2l6ZSA9IG9wdGlvbnMuY2h1bmtTaXplIHx8IDQwMDtcbiAgY29uc3QgY2h1bmtPdmVybGFwID0gb3B0aW9ucy5jaHVua092ZXJsYXAgfHwgNTA7XG4gIGNvbnN0IGNodW5rczogQ2h1bmtbXSA9IFtdO1xuXG4gIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9ucykge1xuICAgIGNvbnN0IHNlY3Rpb25UZXh0ID0gc2VjdGlvbi5oZWFkaW5nXG4gICAgICA/IGAjICR7c2VjdGlvbi5oZWFkaW5nfVxcblxcbiR7c2VjdGlvbi5jb250ZW50fWBcbiAgICAgIDogc2VjdGlvbi5jb250ZW50O1xuXG4gICAgaWYgKCFzZWN0aW9uVGV4dC50cmltKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuQ291bnQgPSBlc3RpbWF0ZVRva2VuQ291bnQoc2VjdGlvblRleHQpO1xuXG4gICAgLy8gXHVDMTM5XHVDMTU4XHVDNzc0IFx1Q0NBRFx1RDA2QyBcdUQwNkNcdUFFMzBcdUJDRjRcdUIyRTQgXHVDNzkxXHVDNzNDXHVCQTc0IFx1QURGOFx1QjMwMFx1Qjg1QyBcdUMwQUNcdUM2QTlcbiAgICBpZiAodG9rZW5Db3VudCA8PSBjaHVua1NpemUpIHtcbiAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgaWQ6IGAke25vdGVJZH0tY2h1bmstJHtjaHVua3MubGVuZ3RofWAsXG4gICAgICAgIG5vdGVJZCxcbiAgICAgICAgdGV4dDogc2VjdGlvblRleHQsXG4gICAgICAgIHBvc2l0aW9uOiBzZWN0aW9uLnBvc2l0aW9uLFxuICAgICAgICB0b2tlbkNvdW50LFxuICAgICAgICBzZWN0aW9uOiBzZWN0aW9uLmhlYWRpbmcsXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIFx1QzEzOVx1QzE1OFx1Qzc3NCBcdUQwNkNcdUJBNzQgXHVCQjM4XHVDN0E1IFx1QjJFOFx1QzcwNFx1Qjg1QyBcdUJEODRcdUQ1NjBcbiAgICBjb25zdCBzZW50ZW5jZXMgPSBzcGxpdEludG9TZW50ZW5jZXMoc2VjdGlvblRleHQpO1xuICAgIGxldCBjdXJyZW50Q2h1bms6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGN1cnJlbnRUb2tlbnMgPSAwO1xuXG4gICAgZm9yIChjb25zdCBzZW50ZW5jZSBvZiBzZW50ZW5jZXMpIHtcbiAgICAgIGNvbnN0IHNlbnRlbmNlVG9rZW5zID0gZXN0aW1hdGVUb2tlbkNvdW50KHNlbnRlbmNlKTtcblxuICAgICAgLy8gXHVENjA0XHVDN0FDIFx1Q0NBRFx1RDA2Q1x1QzVEMCBcdUNEOTRcdUFDMDAgXHVBQzAwXHVCMkE1XHVENTVDXHVDOUMwIFx1RDY1NVx1Qzc3OFxuICAgICAgaWYgKGN1cnJlbnRUb2tlbnMgKyBzZW50ZW5jZVRva2VucyA8PSBjaHVua1NpemUpIHtcbiAgICAgICAgY3VycmVudENodW5rLnB1c2goc2VudGVuY2UpO1xuICAgICAgICBjdXJyZW50VG9rZW5zICs9IHNlbnRlbmNlVG9rZW5zO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1Q0NBRFx1RDA2QyBcdUM4MDBcdUM3QTVcbiAgICAgICAgaWYgKGN1cnJlbnRDaHVuay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtUZXh0ID0gY3VycmVudENodW5rLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgICAgIGlkOiBgJHtub3RlSWR9LWNodW5rLSR7Y2h1bmtzLmxlbmd0aH1gLFxuICAgICAgICAgICAgbm90ZUlkLFxuICAgICAgICAgICAgdGV4dDogY2h1bmtUZXh0LFxuICAgICAgICAgICAgcG9zaXRpb246IHNlY3Rpb24ucG9zaXRpb24sXG4gICAgICAgICAgICB0b2tlbkNvdW50OiBjdXJyZW50VG9rZW5zLFxuICAgICAgICAgICAgc2VjdGlvbjogc2VjdGlvbi5oZWFkaW5nLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gXHVDNjI0XHVCQzg0XHVCN0E5XHVDNzQ0IFx1QzcwNFx1RDU3NCBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQTg3IFx1QkIzOFx1QzdBNSBcdUM3MjBcdUM5QzBcbiAgICAgICAgICBjb25zdCBvdmVybGFwU2VudGVuY2VzID0gZ2V0T3ZlcmxhcFNlbnRlbmNlcyhjdXJyZW50Q2h1bmssIGNodW5rT3ZlcmxhcCk7XG4gICAgICAgICAgY3VycmVudENodW5rID0gb3ZlcmxhcFNlbnRlbmNlcztcbiAgICAgICAgICBjdXJyZW50VG9rZW5zID0gZXN0aW1hdGVUb2tlbkNvdW50KGN1cnJlbnRDaHVuay5qb2luKFwiIFwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdUMwQzggXHVDQ0FEXHVEMDZDIFx1QzJEQ1x1Qzc5MVxuICAgICAgICBjdXJyZW50Q2h1bmsucHVzaChzZW50ZW5jZSk7XG4gICAgICAgIGN1cnJlbnRUb2tlbnMgKz0gc2VudGVuY2VUb2tlbnM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHVCOUM4XHVDOUMwXHVCOUM5IFx1Q0NBRFx1RDA2QyBcdUM4MDBcdUM3QTVcbiAgICBpZiAoY3VycmVudENodW5rLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNodW5rVGV4dCA9IGN1cnJlbnRDaHVuay5qb2luKFwiIFwiKTtcbiAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgaWQ6IGAke25vdGVJZH0tY2h1bmstJHtjaHVua3MubGVuZ3RofWAsXG4gICAgICAgIG5vdGVJZCxcbiAgICAgICAgdGV4dDogY2h1bmtUZXh0LFxuICAgICAgICBwb3NpdGlvbjogc2VjdGlvbi5wb3NpdGlvbixcbiAgICAgICAgdG9rZW5Db3VudDogY3VycmVudFRva2VucyxcbiAgICAgICAgc2VjdGlvbjogc2VjdGlvbi5oZWFkaW5nLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNodW5rcztcbn1cblxuLyoqXG4gKiBcdUQxNERcdUMyQTRcdUQyQjhcdUI5N0MgXHVCQjM4XHVDN0E1XHVDNzNDXHVCODVDIFx1QkQ4NFx1RDU2MCAoXHVBQzA0XHVCMkU4XHVENTVDIFx1QkM4NFx1QzgwNClcbiAqIFx1Q0MzOFx1QUNFMDogXHVDNTdEXHVDNUI0KERyLiwgTXIuIFx1QjRGMSlcdUIwOTggXHVDMThDXHVDMjE4XHVDODEwXHVDNUQwXHVDMTFDIFx1QkQ4NFx1RDU2MFx1QjQyMCBcdUMyMTggXHVDNzg4XHVDNzRDXG4gKi9cbmZ1bmN0aW9uIHNwbGl0SW50b1NlbnRlbmNlcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIC8vIFx1QjlDOFx1Q0U2OFx1RDQ1QywgXHVCMjkwXHVCMDhDXHVENDVDLCBcdUJCM0NcdUM3NENcdUQ0NUMgXHVCNEE0IFx1QUNGNVx1QkMzMVx1QzczQ1x1Qjg1QyBcdUJEODRcdUQ1NjBcbiAgLy8gXHVDODFDXHVENTVDXHVDMEFDXHVENTZEOiBcdUM1N0RcdUM1QjRcdUIwOTggXHVDMThDXHVDMjE4XHVDODEwXHVDNUQwXHVDMTFDIFx1Qzc5OFx1QkFCQiBcdUJEODRcdUQ1NjBcdUI0MjAgXHVDMjE4IFx1Qzc4OFx1Qzc0Q1xuICBjb25zdCBzZW50ZW5jZXMgPSB0ZXh0LnNwbGl0KC8oWy4hP11cXHMrKS8pLmZpbHRlcigocykgPT4gcy50cmltKCkpO1xuICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZW50ZW5jZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICBjb25zdCBzZW50ZW5jZSA9IHNlbnRlbmNlc1tpXTtcbiAgICBjb25zdCBwdW5jdHVhdGlvbiA9IHNlbnRlbmNlc1tpICsgMV0gfHwgXCJcIjtcbiAgICByZXN1bHQucHVzaChzZW50ZW5jZSArIHB1bmN0dWF0aW9uKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuZmlsdGVyKChzKSA9PiBzLnRyaW0oKSk7XG59XG5cbi8qKlxuICogXHVDNjI0XHVCQzg0XHVCN0E5XHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUI5QzhcdUM5QzBcdUI5QzkgXHVCQjM4XHVDN0E1XHVCNEU0IFx1QUMwMFx1QzgzOFx1QzYyNFx1QUUzMFxuICovXG5mdW5jdGlvbiBnZXRPdmVybGFwU2VudGVuY2VzKHNlbnRlbmNlczogc3RyaW5nW10sIHRhcmdldFRva2VuczogbnVtYmVyKTogc3RyaW5nW10ge1xuICBjb25zdCBvdmVybGFwOiBzdHJpbmdbXSA9IFtdO1xuICBsZXQgdG9rZW5zID0gMDtcblxuICBmb3IgKGxldCBpID0gc2VudGVuY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3Qgc2VudGVuY2UgPSBzZW50ZW5jZXNbaV07XG4gICAgY29uc3Qgc2VudGVuY2VUb2tlbnMgPSBlc3RpbWF0ZVRva2VuQ291bnQoc2VudGVuY2UpO1xuXG4gICAgaWYgKHRva2VucyArIHNlbnRlbmNlVG9rZW5zID4gdGFyZ2V0VG9rZW5zKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBvdmVybGFwLnVuc2hpZnQoc2VudGVuY2UpO1xuICAgIHRva2VucyArPSBzZW50ZW5jZVRva2VucztcbiAgfVxuXG4gIHJldHVybiBvdmVybGFwO1xufVxuIiwgIi8vIFx1Qzc3OFx1QjM3MVx1QzExQyAtIFx1RDMwQ1x1Qzc3QyBcdUMyQTRcdUNFOTQsIFx1RDMwQ1x1QzJGMSwgXHVDQ0FEXHVEMEI5LCBcdUM3ODRcdUJDQTBcdUI1MjksIFx1QzgwMFx1QzdBNVx1Qzc0NCBcdUQxQjVcdUQ1NjlcblxuaW1wb3J0IHsgTWV0YWRhdGFTdG9yZSB9IGZyb20gXCIuL21ldGFkYXRhU3RvcmVcIjtcbmltcG9ydCB7IEVtYmVkZGluZ0dlbmVyYXRvciwgRW1iZWRkaW5nQ29uZmlnIH0gZnJvbSBcIi4vZW1iZWRkaW5nc1wiO1xuaW1wb3J0IHsgcGFyc2VNYXJrZG93biwgY29tcHV0ZUhhc2ggfSBmcm9tIFwiLi9wYXJzZXJcIjtcbmltcG9ydCB7IGNodW5rVGV4dCB9IGZyb20gXCIuL2NodW5rZXJcIjtcbmltcG9ydCB7IEluZGV4aW5nQ29uZmlnLCBOb3RlTWV0YWRhdGEsIENodW5rIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBWZWN0b3JJbmRleCB9IGZyb20gXCIuL3ZlY3RvckluZGV4XCI7XG5pbXBvcnQgeyBjcmVhdGVWZWN0b3JJbmRleCB9IGZyb20gXCIuL3ZlY3RvckluZGV4RmFjdG9yeVwiO1xuaW1wb3J0IHsgYnVpbGRRdWVyeUVtYmVkZGluZ1RleHQgfSBmcm9tIFwiLi9xdWVyeUtleXdvcmRFbWJlZGRpbmdcIjtcblxuZXhwb3J0IGNsYXNzIEluZGV4ZXIge1xuICBwcml2YXRlIG1ldGFkYXRhU3RvcmU6IE1ldGFkYXRhU3RvcmU7XG4gIHByaXZhdGUgdmVjdG9yU3RvcmU6IFZlY3RvckluZGV4O1xuICBwcml2YXRlIGVtYmVkZGluZ0dlbmVyYXRvcjogRW1iZWRkaW5nR2VuZXJhdG9yO1xuICBwcml2YXRlIGNvbmZpZzogSW5kZXhpbmdDb25maWc7XG4gIHByaXZhdGUgaW5kZXhTaWduYXR1cmU6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEluZGV4aW5nQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5pbmRleFNpZ25hdHVyZSA9IHRoaXMuZ2VuZXJhdGVJbmRleFNpZ25hdHVyZSgpO1xuICAgIHRoaXMubWV0YWRhdGFTdG9yZSA9IG5ldyBNZXRhZGF0YVN0b3JlKGNvbmZpZy5tZXRhU3RvcmVQYXRoLCB0aGlzLmluZGV4U2lnbmF0dXJlKTtcbiAgICB0aGlzLnZlY3RvclN0b3JlID0gY3JlYXRlVmVjdG9ySW5kZXgoY29uZmlnLCB0aGlzLmluZGV4U2lnbmF0dXJlKTtcbiAgICBcbiAgICBjb25zdCBlbWJlZGRpbmdDb25maWc6IEVtYmVkZGluZ0NvbmZpZyA9IHtcbiAgICAgIHByb3ZpZGVyOiBjb25maWcuZW1iZWRkaW5nUHJvdmlkZXIsXG4gICAgICBtb2RlbDogY29uZmlnLmVtYmVkZGluZ01vZGVsLFxuICAgICAgYXBpS2V5OiBjb25maWcuZW1iZWRkaW5nQXBpS2V5LFxuICAgICAgYXBpVXJsOiBjb25maWcuZW1iZWRkaW5nQXBpVXJsLFxuICAgIH07XG4gICAgXG4gICAgdGhpcy5lbWJlZGRpbmdHZW5lcmF0b3IgPSBuZXcgRW1iZWRkaW5nR2VuZXJhdG9yKGVtYmVkZGluZ0NvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogXHVDRDA4XHVBRTMwXHVENjU0IC0gXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QkFBOFx1QjM3OCBcdUI4NUNcdUI0RENcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5lbWJlZGRpbmdHZW5lcmF0b3IuaW5pdGlhbGl6ZSgpO1xuXG4gICAgY29uc3QgbWV0YWRhdGFTaWduYXR1cmUgPSB0aGlzLm1ldGFkYXRhU3RvcmUuZ2V0SW5kZXhTaWduYXR1cmUoKTtcbiAgICBjb25zdCB2ZWN0b3JTaWduYXR1cmUgPSB0aGlzLnZlY3RvclN0b3JlLmdldEluZGV4U2lnbmF0dXJlKCk7XG5cbiAgICBpZiAoXG4gICAgICBtZXRhZGF0YVNpZ25hdHVyZSAhPT0gdGhpcy5pbmRleFNpZ25hdHVyZSB8fFxuICAgICAgdmVjdG9yU2lnbmF0dXJlICE9PSB0aGlzLmluZGV4U2lnbmF0dXJlXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlx1Qzc4NFx1QkNBMFx1QjUyOSBcdUJBQThcdUIzNzggXHVCQ0MwXHVBQ0JEIFx1QUMxMFx1QzlDMDogXHVBRTMwXHVDODc0IFx1Qzc3OFx1QjM3MVx1QzJBNFx1Qjk3QyBcdUNEMDhcdUFFMzBcdUQ2NTRcdUQ1NjlcdUIyQzhcdUIyRTQuXCIpO1xuICAgICAgdGhpcy5tZXRhZGF0YVN0b3JlLnJlc2V0KHRoaXMuaW5kZXhTaWduYXR1cmUpO1xuICAgICAgdGhpcy52ZWN0b3JTdG9yZS5yZXNldCh0aGlzLmluZGV4U2lnbmF0dXJlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVCMkU4XHVDNzdDIFx1RDMwQ1x1Qzc3QyBcdUM3NzhcdUIzNzFcdUMyRjFcbiAgICovXG4gIGFzeW5jIGluZGV4RmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gXHVEMzBDXHVDNzdDIFx1RDU3NFx1QzJEQyBcdUFDQzRcdUMwQjBcbiAgICAgIGNvbnN0IGhhc2ggPSBjb21wdXRlSGFzaChjb250ZW50KTtcblxuICAgICAgLy8gXHVBRTMwXHVDODc0IFx1QjE3OFx1RDJCOCBcdUQ2NTVcdUM3NzhcbiAgICAgIGNvbnN0IGV4aXN0aW5nTm90ZSA9IHRoaXMubWV0YWRhdGFTdG9yZS5nZXROb3RlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIGlmIChleGlzdGluZ05vdGUgJiYgZXhpc3RpbmdOb3RlLmhhc2ggPT09IGhhc2gpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFx1RDMwQ1x1Qzc3QyBcdUJDQzBcdUFDQkQgXHVDNUM2XHVDNzRDLCBcdUMyQTRcdUQwQjU6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHVCOUM4XHVEMDZDXHVCMkU0XHVDNkI0IFx1RDMwQ1x1QzJGMVxuICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VNYXJrZG93bihmaWxlUGF0aCwgY29udGVudCk7XG5cbiAgICAgIC8vIFx1QjE3OFx1RDJCOCBJRCBcdUMwRERcdUMxMzFcbiAgICAgIGNvbnN0IG5vdGVJZCA9IHRoaXMuZ2VuZXJhdGVOb3RlSWQoZmlsZVBhdGgpO1xuXG4gICAgICAvLyBcdUJBNTRcdUQwQzBcdUIzNzBcdUM3NzRcdUQxMzAgXHVDODAwXHVDN0E1XG4gICAgICBjb25zdCBub3RlTWV0YWRhdGE6IE5vdGVNZXRhZGF0YSA9IHtcbiAgICAgICAgaWQ6IG5vdGVJZCxcbiAgICAgICAgcGF0aDogZmlsZVBhdGgsXG4gICAgICAgIHRpdGxlOiBwYXJzZWQudGl0bGUsXG4gICAgICAgIHRhZ3M6IHBhcnNlZC50YWdzLFxuICAgICAgICBsaW5rczogcGFyc2VkLmxpbmtzLFxuICAgICAgICBmcm9udG1hdHRlcjogcGFyc2VkLmZyb250bWF0dGVyLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIGhhc2gsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLm1ldGFkYXRhU3RvcmUudXBzZXJ0Tm90ZShub3RlTWV0YWRhdGEpO1xuXG4gICAgICAvLyBcdUFFMzBcdUM4NzQgXHVDQ0FEXHVEMDZDIFx1QzBBRFx1QzgxQ1xuICAgICAgaWYgKGV4aXN0aW5nTm90ZSkge1xuICAgICAgICBjb25zdCBvbGRDaHVua3MgPSB0aGlzLm1ldGFkYXRhU3RvcmUuZ2V0Q2h1bmtzQnlOb3RlSWQobm90ZUlkKTtcbiAgICAgICAgdGhpcy52ZWN0b3JTdG9yZS5kZWxldGVFbWJlZGRpbmdzKG9sZENodW5rcy5tYXAoKGMpID0+IGMuaWQpKTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVN0b3JlLmRlbGV0ZUNodW5rc0J5Tm90ZUlkKG5vdGVJZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1Q0NBRFx1RDBCOVxuICAgICAgY29uc3QgY2h1bmtzID0gY2h1bmtUZXh0KG5vdGVJZCwgcGFyc2VkLnNlY3Rpb25zLCB7XG4gICAgICAgIGNodW5rU2l6ZTogdGhpcy5jb25maWcuY2h1bmtTaXplLFxuICAgICAgICBjaHVua092ZXJsYXA6IHRoaXMuY29uZmlnLmNodW5rT3ZlcmxhcCxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgXHVDQ0FEXHVEMDZDIFx1QzVDNlx1Qzc0QzogJHtmaWxlUGF0aH1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBcdUNDQURcdUQwNkMgXHVDODAwXHVDN0E1XG4gICAgICB0aGlzLm1ldGFkYXRhU3RvcmUuaW5zZXJ0Q2h1bmtzKGNodW5rcyk7XG5cbiAgICAgIC8vIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzEgXHVCQzBGIFx1QzgwMFx1QzdBNVxuICAgICAgY29uc29sZS5sb2coYFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwRERcdUMxMzEgXHVDOTExOiAke2ZpbGVQYXRofSAoJHtjaHVua3MubGVuZ3RofVx1QUMxQyBcdUNDQURcdUQwNkMpYCk7XG4gICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgICAgICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCB0aGlzLmVtYmVkZGluZ0dlbmVyYXRvci5lbWJlZChjaHVuay50ZXh0KTtcbiAgICAgICAgdGhpcy52ZWN0b3JTdG9yZS5zdG9yZUVtYmVkZGluZyhjaHVuay5pZCwgZW1iZWRkaW5nKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUM2NDRcdUI4Q0M6ICR7ZmlsZVBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQzMjg6ICR7ZmlsZVBhdGh9YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1RDMwQ1x1Qzc3QyBcdUMwQURcdUM4MUMgXHVDQzk4XHVCOUFDXG4gICAqL1xuICBkZWxldGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3RlID0gdGhpcy5tZXRhZGF0YVN0b3JlLmdldE5vdGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIGlmICghbm90ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rcyA9IHRoaXMubWV0YWRhdGFTdG9yZS5nZXRDaHVua3NCeU5vdGVJZChub3RlLmlkKTtcbiAgICB0aGlzLnZlY3RvclN0b3JlLmRlbGV0ZUVtYmVkZGluZ3MoY2h1bmtzLm1hcCgoYykgPT4gYy5pZCkpO1xuICAgIHRoaXMubWV0YWRhdGFTdG9yZS5kZWxldGVDaHVua3NCeU5vdGVJZChub3RlLmlkKTtcbiAgICB0aGlzLm1ldGFkYXRhU3RvcmUuZGVsZXRlTm90ZShub3RlLmlkKTtcblxuICAgIGNvbnNvbGUubG9nKGBcdUQzMENcdUM3N0MgXHVDMEFEXHVDODFDIFx1QzY0NFx1QjhDQzogJHtmaWxlUGF0aH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUFDODBcdUMwQzlcbiAgICovXG4gIGFzeW5jIHNlYXJjaChxdWVyeTogc3RyaW5nLCBrPzogbnVtYmVyKTogUHJvbWlzZTxBcnJheTx7IGNodW5rOiBDaHVuazsgc2NvcmU6IG51bWJlciB9Pj4ge1xuICAgIGNvbnN0IHRvcEsgPSBrIHx8IHRoaXMuY29uZmlnLnRvcEs7XG5cbiAgICAvLyBcdUNGRkNcdUI5QUMgXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzBERFx1QzEzMVxuICAgIGNvbnN0IHF1ZXJ5VGV4dEZvckVtYmVkZGluZyA9IGJ1aWxkUXVlcnlFbWJlZGRpbmdUZXh0KHF1ZXJ5KTtcbiAgICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IGF3YWl0IHRoaXMuZW1iZWRkaW5nR2VuZXJhdG9yLmVtYmVkKHF1ZXJ5VGV4dEZvckVtYmVkZGluZyB8fCBxdWVyeSk7XG5cbiAgICBjb25zdCBjdXJyZW50RGltZW5zaW9uID0gdGhpcy52ZWN0b3JTdG9yZS5nZXREaW1lbnNpb24oKTtcbiAgICBpZiAoY3VycmVudERpbWVuc2lvbiAhPT0gbnVsbCAmJiBxdWVyeUVtYmVkZGluZy5sZW5ndGggIT09IGN1cnJlbnREaW1lbnNpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFx1Q0ZGQ1x1QjlBQyBcdUNDMjhcdUM2RDAoJHtxdWVyeUVtYmVkZGluZy5sZW5ndGh9KVx1QUNGQyBcdUM3NzhcdUIzNzFcdUMyQTQgXHVDQzI4XHVDNkQwKCR7Y3VycmVudERpbWVuc2lvbn0pXHVDNzc0IFx1QjJFQ1x1Qjc3QyBcdUFDODBcdUMwQzlcdUM3NDQgXHVBQzc0XHVCMTA4XHVCNzAxXHVCMkM4XHVCMkU0LmBcbiAgICAgICk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLy8gXHVCQ0ExXHVEMTMwIFx1QUM4MFx1QzBDOVxuICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnZlY3RvclN0b3JlLnNlYXJjaChxdWVyeUVtYmVkZGluZywgdG9wSyk7XG5cbiAgICAvLyBcdUNDQURcdUQwNkMgXHVDODE1XHVCQ0Y0IFx1Q0Q5NFx1QUMwMFxuICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSByZXN1bHRzXG4gICAgICAubWFwKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLm1ldGFkYXRhU3RvcmUuZ2V0Q2h1bmtCeUlkKHJlc3VsdC5jaHVua0lkKTtcbiAgICAgICAgaWYgKCFjaHVuaykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2h1bmssXG4gICAgICAgICAgc2NvcmU6IHJlc3VsdC5zY29yZSxcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKChyKSA9PiByICE9PSBudWxsKSBhcyBBcnJheTx7IGNodW5rOiBDaHVuazsgc2NvcmU6IG51bWJlciB9PjtcblxuICAgIHJldHVybiBzZWFyY2hSZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QUM4MFx1QzBDOSBcdUFDQjBcdUFDRkNcdUM1RDAgXHVCMTc4XHVEMkI4IFx1QkE1NFx1RDBDMFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUNEOTRcdUFDMDBcbiAgICovXG4gIGdldFNlYXJjaFJlc3VsdHNXaXRoTWV0YWRhdGEoXG4gICAgc2VhcmNoUmVzdWx0czogQXJyYXk8eyBjaHVuazogQ2h1bms7IHNjb3JlOiBudW1iZXIgfT5cbiAgKTogQXJyYXk8e1xuICAgIGNodW5rOiBDaHVuaztcbiAgICBub3RlOiBOb3RlTWV0YWRhdGE7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgfT4ge1xuICAgIHJldHVybiBzZWFyY2hSZXN1bHRzXG4gICAgICAubWFwKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3Qgbm90ZSA9IHRoaXMubWV0YWRhdGFTdG9yZS5nZXROb3RlQnlJZChyZXN1bHQuY2h1bmsubm90ZUlkKTtcbiAgICAgICAgaWYgKCFub3RlKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjaHVuazogcmVzdWx0LmNodW5rLFxuICAgICAgICAgIG5vdGUsXG4gICAgICAgICAgc2NvcmU6IHJlc3VsdC5zY29yZSxcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKChyKSA9PiByICE9PSBudWxsKSBhcyBBcnJheTx7XG4gICAgICBjaHVuazogQ2h1bms7XG4gICAgICBub3RlOiBOb3RlTWV0YWRhdGE7XG4gICAgICBzY29yZTogbnVtYmVyO1xuICAgIH0+O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QjE3OFx1RDJCOCBJRCBcdUMwRERcdUMxMzFcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVOb3RlSWQoZmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGNyZWF0ZUhhc2goXCJzaGEyNTZcIikudXBkYXRlKGZpbGVQYXRoKS5kaWdlc3QoXCJoZXhcIikuc3Vic3RyaW5nKDAsIDE2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUM3NzhcdUIzNzFcdUMyQTQgXHVDMkRDXHVBREY4XHVCMkM4XHVDQzk4IFx1QzBERFx1QzEzMVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUluZGV4U2lnbmF0dXJlKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc291cmNlID0gW1xuICAgICAgdGhpcy5jb25maWcuZW1iZWRkaW5nUHJvdmlkZXIsXG4gICAgICB0aGlzLmNvbmZpZy5lbWJlZGRpbmdNb2RlbCxcbiAgICAgIHRoaXMuY29uZmlnLmVtYmVkZGluZ0FwaVVybCB8fCBcIlwiLFxuICAgIF0uam9pbihcIjo6XCIpO1xuXG4gICAgcmV0dXJuIGNyZWF0ZUhhc2goXCJzaGEyNTZcIikudXBkYXRlKHNvdXJjZSkuZGlnZXN0KFwiaGV4XCIpLnN1YnN0cmluZygwLCAxNik7XG4gIH1cblxuICAvKipcbiAgICogXHVCOUFDXHVDMThDXHVDMkE0IFx1RDU3NFx1QzgxQ1xuICAgKi9cbiAgY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5tZXRhZGF0YVN0b3JlLmNsb3NlKCk7XG4gICAgdGhpcy52ZWN0b3JTdG9yZS5jbG9zZSgpO1xuICB9XG59XG4iLCAiLy8gXHVCQ0ExXHVEMTMwIFx1QzJBNFx1RDFBMFx1QzVCNCAtIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM4MDBcdUM3QTUgXHVCQzBGIFx1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDODBcdUMwQzlcblxuaW1wb3J0IHsgZXhpc3RzU3luYywgbWtkaXJTeW5jLCByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMsIHJlbmFtZVN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgVmVjdG9yU3RvcmVEYXRhIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFZlY3RvckluZGV4IH0gZnJvbSBcIi4vdmVjdG9ySW5kZXhcIjtcblxuZXhwb3J0IGNsYXNzIFZlY3RvclN0b3JlIGltcGxlbWVudHMgVmVjdG9ySW5kZXgge1xuICBwcml2YXRlIHJlYWRvbmx5IHN0b3JlUGF0aDogc3RyaW5nO1xuICBwcml2YXRlIGRhdGE6IFZlY3RvclN0b3JlRGF0YTtcblxuICBjb25zdHJ1Y3RvcihzdG9yZVBhdGg6IHN0cmluZywgaW5kZXhTaWduYXR1cmU6IHN0cmluZykge1xuICAgIHRoaXMuc3RvcmVQYXRoID0gc3RvcmVQYXRoO1xuICAgIHRoaXMuZGF0YSA9IHRoaXMubG9hZERhdGEoaW5kZXhTaWduYXR1cmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUIzNzBcdUM3NzRcdUQxMzAgXHVCODVDXHVCNERDXG4gICAqL1xuICBwcml2YXRlIGxvYWREYXRhKGluZGV4U2lnbmF0dXJlOiBzdHJpbmcpOiBWZWN0b3JTdG9yZURhdGEge1xuICAgIGlmICghZXhpc3RzU3luYyh0aGlzLnN0b3JlUGF0aCkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4U2lnbmF0dXJlLFxuICAgICAgICBkaW1lbnNpb246IG51bGwsXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgZW1iZWRkaW5nczoge30sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByYXcgPSByZWFkRmlsZVN5bmModGhpcy5zdG9yZVBhdGgsIFwidXRmLThcIik7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdykgYXMgUGFydGlhbDxWZWN0b3JTdG9yZURhdGE+O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5kZXhTaWduYXR1cmU6IHBhcnNlZC5pbmRleFNpZ25hdHVyZSB8fCBpbmRleFNpZ25hdHVyZSxcbiAgICAgICAgZGltZW5zaW9uOiB0eXBlb2YgcGFyc2VkLmRpbWVuc2lvbiA9PT0gXCJudW1iZXJcIiA/IHBhcnNlZC5kaW1lbnNpb24gOiBudWxsLFxuICAgICAgICB1cGRhdGVkQXQ6IHR5cGVvZiBwYXJzZWQudXBkYXRlZEF0ID09PSBcIm51bWJlclwiID8gcGFyc2VkLnVwZGF0ZWRBdCA6IERhdGUubm93KCksXG4gICAgICAgIGVtYmVkZGluZ3M6IHBhcnNlZC5lbWJlZGRpbmdzIHx8IHt9LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiXHVCQ0ExXHVEMTMwIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUI4NUNcdUI0REMgXHVDMkU0XHVEMzI4LCBcdUMwQzhcdUI4NUMgXHVDRDA4XHVBRTMwXHVENjU0XHVENTY5XHVCMkM4XHVCMkU0OlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbmRleFNpZ25hdHVyZSxcbiAgICAgICAgZGltZW5zaW9uOiBudWxsLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIGVtYmVkZGluZ3M6IHt9LFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVDODAwXHVDN0E1XHVDMThDIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUM4MDBcdUM3QTUgKFx1QzZEMFx1Qzc5MFx1QzgwMSBcdUM0RjBcdUFFMzApXG4gICAqL1xuICBwcml2YXRlIHBlcnNpc3QoKTogdm9pZCB7XG4gICAgbWtkaXJTeW5jKGRpcm5hbWUodGhpcy5zdG9yZVBhdGgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB0aGlzLmRhdGEudXBkYXRlZEF0ID0gRGF0ZS5ub3coKTtcblxuICAgIGNvbnN0IHRlbXBQYXRoID0gYCR7dGhpcy5zdG9yZVBhdGh9LnRtcGA7XG4gICAgd3JpdGVGaWxlU3luYyh0ZW1wUGF0aCwgSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKSwgXCJ1dGYtOFwiKTtcbiAgICByZW5hbWVTeW5jKHRlbXBQYXRoLCB0aGlzLnN0b3JlUGF0aCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzc4XHVCMzcxXHVDMkE0IFx1QzJEQ1x1QURGOFx1QjJDOFx1Q0M5OCBcdUM4NzBcdUQ2OENcbiAgICovXG4gIGdldEluZGV4U2lnbmF0dXJlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleFNpZ25hdHVyZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUJDQTFcdUQxMzAgXHVDQzI4XHVDNkQwIFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0RGltZW5zaW9uKCk6IG51bWJlciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZGltZW5zaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzgwMFx1QzdBNVx1QzE4QyBcdUNEMDhcdUFFMzBcdUQ2NTRcbiAgICovXG4gIHJlc2V0KGluZGV4U2lnbmF0dXJlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmRhdGEgPSB7XG4gICAgICBpbmRleFNpZ25hdHVyZSxcbiAgICAgIGRpbWVuc2lvbjogbnVsbCxcbiAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgIGVtYmVkZGluZ3M6IHt9LFxuICAgIH07XG4gICAgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IFx1QzgwMFx1QzdBNVxuICAgKi9cbiAgc3RvcmVFbWJlZGRpbmcoY2h1bmtJZDogc3RyaW5nLCBlbWJlZGRpbmc6IG51bWJlcltdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGF0YS5kaW1lbnNpb24gPT09IG51bGwpIHtcbiAgICAgIHRoaXMuZGF0YS5kaW1lbnNpb24gPSBlbWJlZGRpbmcubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChlbWJlZGRpbmcubGVuZ3RoICE9PSB0aGlzLmRhdGEuZGltZW5zaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDQzI4XHVDNkQwIFx1QkQ4OFx1Qzc3Q1x1Q0U1ODogZXhwZWN0ZWQ9JHt0aGlzLmRhdGEuZGltZW5zaW9ufSwgYWN0dWFsPSR7ZW1iZWRkaW5nLmxlbmd0aH1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YS5lbWJlZGRpbmdzW2NodW5rSWRdID0gZW1iZWRkaW5nO1xuICAgIHRoaXMucGVyc2lzdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1QzVFQ1x1QjdFQyBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDNzdDXHVBRDA0IFx1QzgwMFx1QzdBNVxuICAgKi9cbiAgc3RvcmVFbWJlZGRpbmdzKGVtYmVkZGluZ3M6IE1hcDxzdHJpbmcsIG51bWJlcltdPik6IHZvaWQge1xuICAgIGZvciAoY29uc3QgW2NodW5rSWQsIGVtYmVkZGluZ10gb2YgZW1iZWRkaW5ncy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGltZW5zaW9uID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kaW1lbnNpb24gPSBlbWJlZGRpbmcubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW1iZWRkaW5nLmxlbmd0aCAhPT0gdGhpcy5kYXRhLmRpbWVuc2lvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUNDMjhcdUM2RDAgXHVCRDg4XHVDNzdDXHVDRTU4OiBleHBlY3RlZD0ke3RoaXMuZGF0YS5kaW1lbnNpb259LCBhY3R1YWw9JHtlbWJlZGRpbmcubGVuZ3RofWBcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kYXRhLmVtYmVkZGluZ3NbY2h1bmtJZF0gPSBlbWJlZGRpbmc7XG4gICAgfVxuXG4gICAgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzg0XHVCQ0EwXHVCNTI5IFx1Qzg3MFx1RDY4Q1xuICAgKi9cbiAgZ2V0RW1iZWRkaW5nKGNodW5rSWQ6IHN0cmluZyk6IG51bWJlcltdIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5lbWJlZGRpbmdzW2NodW5rSWRdIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogXHVCQUE4XHVCNEUwIFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUM4NzBcdUQ2OENcbiAgICovXG4gIGdldEFsbEVtYmVkZGluZ3MoKTogTWFwPHN0cmluZywgbnVtYmVyW10+IHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyW10+KCk7XG5cbiAgICBmb3IgKGNvbnN0IFtjaHVua0lkLCBlbWJlZGRpbmddIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YS5lbWJlZGRpbmdzKSkge1xuICAgICAgcmVzdWx0LnNldChjaHVua0lkLCBlbWJlZGRpbmcpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogXHVDQ0FEXHVEMDZDXHVDNzU4IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUMwQURcdUM4MUNcbiAgICovXG4gIGRlbGV0ZUVtYmVkZGluZyhjaHVua0lkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy5kYXRhLmVtYmVkZGluZ3NbY2h1bmtJZF07XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5kYXRhLmVtYmVkZGluZ3MpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5kYXRhLmRpbWVuc2lvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDNUVDXHVCN0VDIFx1Q0NBRFx1RDA2Q1x1Qzc1OCBcdUM3ODRcdUJDQTBcdUI1MjkgXHVDMEFEXHVDODFDXG4gICAqL1xuICBkZWxldGVFbWJlZGRpbmdzKGNodW5rSWRzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGlmIChjaHVua0lkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNodW5rSWQgb2YgY2h1bmtJZHMpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRhdGEuZW1iZWRkaW5nc1tjaHVua0lkXTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5kYXRhLmVtYmVkZGluZ3MpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5kYXRhLmRpbWVuc2lvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHVDRjU0XHVDMEFDXHVDNzc4IFx1QzcyMFx1QzBBQ1x1QjNDNCBcdUFDQzRcdUMwQjBcbiAgICovXG4gIHByaXZhdGUgY29zaW5lU2ltaWxhcml0eShhOiBudW1iZXJbXSwgYjogbnVtYmVyW10pOiBudW1iZXIge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1QkNBMVx1RDEzMCBcdUFFMzhcdUM3NzRcdUFDMDAgXHVDNzdDXHVDRTU4XHVENTU4XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNFwiKTtcbiAgICB9XG5cbiAgICBsZXQgZG90UHJvZHVjdCA9IDA7XG4gICAgbGV0IG5vcm1BID0gMDtcbiAgICBsZXQgbm9ybUIgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkb3RQcm9kdWN0ICs9IGFbaV0gKiBiW2ldO1xuICAgICAgbm9ybUEgKz0gYVtpXSAqIGFbaV07XG4gICAgICBub3JtQiArPSBiW2ldICogYltpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG90UHJvZHVjdCAvIChNYXRoLnNxcnQobm9ybUEpICogTWF0aC5zcXJ0KG5vcm1CKSk7XG4gIH1cblxuICAvKipcbiAgICogXHVCQ0ExXHVEMTMwIFx1QUM4MFx1QzBDOSAtIFRvcC1LIFx1QzcyMFx1QzBBQyBcdUNDQURcdUQwNkMgXHVDQzNFXHVBRTMwXG4gICAqIFxuICAgKiBcdUNDMzhcdUFDRTA6IFx1RDYwNFx1QzdBQyBcdUFENkNcdUQ2MDRcdUM3NDAgXHVCQUE4XHVCNEUwIFx1Qzc4NFx1QkNBMFx1QjUyOVx1Qzc0NCBcdUJBNTRcdUJBQThcdUI5QUNcdUM1RDAgXHVCODVDXHVCNERDXHVENTU4XHVDNUVDIFx1QzEyMFx1RDYxNSBcdUFDODBcdUMwQzlcdUM3NDQgXHVDMjE4XHVENTg5XHVENTY5XHVCMkM4XHVCMkU0LlxuICAgKiBcdUIzMDBcdUFERENcdUJBQTggXHVCQ0ZDXHVEMkI4XHVDNzU4IFx1QUNCRFx1QzZCMCBcdUMxMzFcdUIyQTVcdUM3NzQgXHVDODAwXHVENTU4XHVCNDIwIFx1QzIxOCBcdUM3ODhcdUM3M0NcdUJBNzAsIFx1QjJFNFx1Qzc0Q1x1QUNGQyBcdUFDMTlcdUM3NDAgXHVBQzFDXHVDMTIwXHVDNzc0IFx1QUQ4Q1x1QzdBNVx1QjQyOVx1QjJDOFx1QjJFNDpcbiAgICogLSBBTk4oQXBwcm94aW1hdGUgTmVhcmVzdCBOZWlnaGJvcikgXHVDNTRDXHVBQ0UwXHVCOUFDXHVDOTk4IFx1QzBBQ1x1QzZBOSAoRkFJU1MsIEhOU1cgXHVCNEYxKVxuICAgKiAtIFx1QzgwNFx1QzZBOSBcdUJDQTFcdUQxMzAgXHVCMzcwXHVDNzc0XHVEMTMwXHVCQ0EwXHVDNzc0XHVDMkE0IFx1QzBBQ1x1QzZBOSAoQ2hyb21hLCBRZHJhbnQgXHVCNEYxKVxuICAgKiAtIFx1Qzk5RFx1QkQ4NCBcdUFDODBcdUMwQzkgXHVCNjEwXHVCMjk0IFx1Qzc3OFx1QjM3MVx1QzJBNCBcdUNFOTBcdUMyRjFcbiAgICovXG4gIHNlYXJjaChxdWVyeUVtYmVkZGluZzogbnVtYmVyW10sIGs6IG51bWJlciA9IDgpOiBBcnJheTx7IGNodW5rSWQ6IHN0cmluZzsgc2NvcmU6IG51bWJlciB9PiB7XG4gICAgY29uc3QgYWxsRW1iZWRkaW5ncyA9IHRoaXMuZ2V0QWxsRW1iZWRkaW5ncygpO1xuICAgIGNvbnN0IHNjb3JlczogQXJyYXk8eyBjaHVua0lkOiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4gPSBbXTtcblxuICAgIGZvciAoY29uc3QgW2NodW5rSWQsIGVtYmVkZGluZ10gb2YgYWxsRW1iZWRkaW5ncy5lbnRyaWVzKCkpIHtcbiAgICAgIGNvbnN0IHNjb3JlID0gdGhpcy5jb3NpbmVTaW1pbGFyaXR5KHF1ZXJ5RW1iZWRkaW5nLCBlbWJlZGRpbmcpO1xuICAgICAgc2NvcmVzLnB1c2goeyBjaHVua0lkLCBzY29yZSB9KTtcbiAgICB9XG5cbiAgICAvLyBcdUM4MTBcdUMyMTggXHVBRTMwXHVDOTAwIFx1QjBCNFx1QjlCQ1x1Q0MyOFx1QzIxQyBcdUM4MTVcdUI4MkMgXHVENkM0IFx1QzBDMVx1QzcwNCBLXHVBQzFDIFx1QkMxOFx1RDY1OFxuICAgIHNjb3Jlcy5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSk7XG4gICAgcmV0dXJuIHNjb3Jlcy5zbGljZSgwLCBrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUIzNzBcdUM3NzRcdUQxMzBcdUJDQTBcdUM3NzRcdUMyQTQgXHVCMkVCXHVBRTMwXG4gICAqL1xuICBjbG9zZSgpOiB2b2lkIHtcbiAgICAvLyBcdUQzMENcdUM3N0MgXHVBRTMwXHVCQzE4IFx1QzgwMFx1QzdBNVx1QzE4Q1x1QjI5NCBjbG9zZSBcdUIzRDlcdUM3OTFcdUM3NzQgXHVENTQ0XHVDNjk0XHVENTU4XHVDOUMwIFx1QzU0QVx1QzJCNVx1QjJDOFx1QjJFNC5cbiAgfVxufVxuIiwgIi8vIFx1QkNBMVx1RDEzMCBcdUM3NzhcdUIzNzFcdUMyQTQgXHVDMEREXHVDMTMxIFx1RDMyOVx1RDFBMFx1QjlBQ1xuXG5pbXBvcnQgeyBJbmRleGluZ0NvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBWZWN0b3JTdG9yZSB9IGZyb20gXCIuL3ZlY3RvclN0b3JlXCI7XG5pbXBvcnQgeyBWZWN0b3JJbmRleCB9IGZyb20gXCIuL3ZlY3RvckluZGV4XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWZWN0b3JJbmRleChjb25maWc6IEluZGV4aW5nQ29uZmlnLCBpbmRleFNpZ25hdHVyZTogc3RyaW5nKTogVmVjdG9ySW5kZXgge1xuICBjb25zdCBlbmdpbmUgPSBjb25maWcudmVjdG9ySW5kZXhFbmdpbmUgfHwgXCJqc29uXCI7XG5cbiAgaWYgKGVuZ2luZSA9PT0gXCJqc29uXCIpIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvclN0b3JlKGNvbmZpZy52ZWN0b3JTdG9yZVBhdGgsIGluZGV4U2lnbmF0dXJlKTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgXHVDNTQ0XHVDOUMxIFx1QzlDMFx1QzZEMFx1RDU1OFx1QzlDMCBcdUM1NEFcdUIyOTQgXHVCQ0ExXHVEMTMwIFx1Qzc3OFx1QjM3MVx1QzJBNCBcdUM1RDRcdUM5QzRcdUM3ODVcdUIyQzhcdUIyRTQ6ICR7ZW5naW5lfWApO1xufVxuIiwgImltcG9ydCB7IGV4dHJhY3RLZXl3b3JkcyB9IGZyb20gXCIuLi90b3BpY1NlcGFyYXRpb24va2V5d29yZEV4dHJhY3RvclwiO1xuXG4vKipcbiAqIFx1QzlDOFx1Qzc1OFx1QkIzOFx1Qzc0NCBcdUQwQTRcdUM2Q0NcdUI0REMgXHVBRTMwXHVCQzE4IFx1Qzc4NFx1QkNBMFx1QjUyOSBcdUQxNERcdUMyQTRcdUQyQjhcdUI4NUMgXHVCQ0MwXHVENjU4XHVENTY5XHVCMkM4XHVCMkU0LlxuICogXHVEMEE0XHVDNkNDXHVCNERDXHVBQzAwIFx1QzVDNlx1QUM3MFx1QjA5OCBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTU4XHVCQTc0IFx1QzZEMFx1QkIzOCBcdUM5QzhcdUM3NThcdUI5N0MgXHVBREY4XHVCMzAwXHVCODVDIFx1QkMxOFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUXVlcnlFbWJlZGRpbmdUZXh0KHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSBxdWVyeS50cmltKCk7XG4gIGlmICghbm9ybWFsaXplZFF1ZXJ5KSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGtleXdvcmRzID0gZXh0cmFjdEtleXdvcmRzKG5vcm1hbGl6ZWRRdWVyeSlcbiAgICAgIC5tYXAoKGtleXdvcmQpID0+IGtleXdvcmQudHJpbSgpKVxuICAgICAgLmZpbHRlcigoa2V5d29yZCkgPT4ga2V5d29yZC5sZW5ndGggPiAwKTtcblxuICAgIGlmIChrZXl3b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBub3JtYWxpemVkUXVlcnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleXdvcmRzLmpvaW4oXCIgXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIlx1QzlDOFx1Qzc1OCBcdUQwQTRcdUM2Q0NcdUI0REMgXHVDRDk0XHVDRDlDIFx1QzJFNFx1RDMyOCwgXHVDNkQwXHVCQjM4IFx1QzlDOFx1Qzc1OFx1Qjk3QyBcdUMwQUNcdUM2QTlcdUQ1NjlcdUIyQzhcdUIyRTQ6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZFF1ZXJ5O1xuICB9XG59XG4iLCAiLy8gT2JzaWRpYW4gXHVCQ0ZDXHVEMkI4IFx1RDMwQ1x1Qzc3QyBcdUJDQzBcdUFDQkQgXHVBQzEwXHVDOUMwIFx1QkMwRiBcdUM3OTBcdUIzRDkgXHVDNzc4XHVCMzcxXHVDMkYxXG5cbmltcG9ydCB7IFRGaWxlLCBWYXVsdCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBJbmRleGVyIH0gZnJvbSBcIi4vaW5kZXhpbmcvaW5kZXhlclwiO1xuXG5leHBvcnQgY2xhc3MgVmF1bHRXYXRjaGVyIHtcbiAgcHJpdmF0ZSB2YXVsdDogVmF1bHQ7XG4gIHByaXZhdGUgaW5kZXhlcjogSW5kZXhlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzSW5kZXhpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpbmRleFF1ZXVlOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBpbmRleGluZ0luUHJvZ3Jlc3M6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpOyAvLyBcdUM5QzRcdUQ1ODkgXHVDOTExXHVDNzc4IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUNEOTRcdUM4MDFcblxuICBjb25zdHJ1Y3Rvcih2YXVsdDogVmF1bHQpIHtcbiAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XG4gIH1cblxuICAvKipcbiAgICogXHVDNzc4XHVCMzcxXHVDMTFDIFx1QzEyNFx1QzgxNVxuICAgKi9cbiAgc2V0SW5kZXhlcihpbmRleGVyOiBJbmRleGVyIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuaW5kZXhlciA9IGluZGV4ZXI7XG4gIH1cblxuICAvKipcbiAgICogXHVDRDA4XHVBRTMwIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQ1ODlcbiAgICovXG4gIGFzeW5jIGluZGV4VmF1bHQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmluZGV4ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1Qzc3OFx1QjM3MVx1QzExQ1x1QUMwMCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUI0MThcdUM5QzAgXHVDNTRBXHVDNTU4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSW5kZXhpbmcpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdUM3NzRcdUJCRjggXHVDNzc4XHVCMzcxXHVDMkYxXHVDNzc0IFx1QzlDNFx1RDU4OSBcdUM5MTFcdUM3ODVcdUIyQzhcdUIyRTRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0luZGV4aW5nID0gdHJ1ZTtcbiAgICBuZXcgTm90aWNlKFwiXHVCQ0ZDXHVEMkI4IFx1Qzc3OFx1QjM3MVx1QzJGMVx1Qzc0NCBcdUMyRENcdUM3OTFcdUQ1NjlcdUIyQzhcdUIyRTQuLi5cIik7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbWRGaWxlcyA9IHRoaXMudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgY29uc29sZS5sb2coYFx1Qzc3OFx1QjM3MVx1QzJGMVx1RDU2MCBcdUQzMENcdUM3N0MgXHVDMjE4OiAke21kRmlsZXMubGVuZ3RofWApO1xuXG4gICAgICBsZXQgaW5kZXhlZCA9IDA7XG4gICAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlci5pbmRleEZpbGUoZmlsZS5wYXRoLCBjb250ZW50KTtcbiAgICAgICAgICBpbmRleGVkKys7XG5cbiAgICAgICAgICAvLyBcdUM5QzRcdUQ1ODkgXHVDMEMxXHVENjY5IFx1RDQ1Q1x1QzJEQyAoMTBcdUFDMUNcdUI5QzhcdUIyRTQpXG4gICAgICAgICAgaWYgKGluZGV4ZWQgJSAxMCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzlDNFx1RDU4OSBcdUM5MTE6ICR7aW5kZXhlZH0vJHttZEZpbGVzLmxlbmd0aH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgXHVEMzBDXHVDNzdDIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICAgICAgICBmYWlsZWQrKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKGBcdUM3NzhcdUIzNzFcdUMyRjEgXHVDNjQ0XHVCOENDOiAke2luZGV4ZWR9XHVBQzFDIFx1QzEzMVx1QUNGNSwgJHtmYWlsZWR9XHVBQzFDIFx1QzJFNFx1RDMyOGApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVCQ0ZDXHVEMkI4IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUM5MTEgXHVDNjI0XHVCOTU4OlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiXHVDNzc4XHVCMzcxXHVDMkYxIFx1QzkxMSBcdUM2MjRcdUI5NThcdUFDMDAgXHVCQzFDXHVDMEREXHVENTg4XHVDMkI1XHVCMkM4XHVCMkU0XCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzSW5kZXhpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMzBDXHVDNzdDIFx1QzBERFx1QzEzMSBcdUM3NzRcdUJDQTRcdUQyQjggXHVDQzk4XHVCOUFDXG4gICAqL1xuICBhc3luYyBvbkZpbGVDcmVhdGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlciB8fCBmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICBhd2FpdCB0aGlzLmluZGV4ZXIuaW5kZXhGaWxlKGZpbGUucGF0aCwgY29udGVudCk7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEMzBDXHVDNzdDIFx1QzBERFx1QzEzMSBcdUM3NzhcdUIzNzFcdUMyRjE6ICR7ZmlsZS5wYXRofWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdUQzMENcdUM3N0MgXHVDMEREXHVDMTMxIFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMzBDXHVDNzdDIFx1QzIxOFx1QzgxNSBcdUM3NzRcdUJDQTRcdUQyQjggXHVDQzk4XHVCOUFDXG4gICAqL1xuICBhc3luYyBvbkZpbGVNb2RpZnkoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlciB8fCBmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHVDOTExXHVCQ0Y1IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUJDMjlcdUM5QzBcdUI5N0MgXHVDNzA0XHVENTc0IFx1RDA1MFx1QzVEMCBcdUNEOTRcdUFDMDBcbiAgICB0aGlzLmluZGV4UXVldWUuYWRkKGZpbGUucGF0aCk7XG5cbiAgICAvLyAxMDBtcyBcdUQ2QzRcdUM1RDAgXHVDNzc4XHVCMzcxXHVDMkYxIChcdUM1RjBcdUMxOEQgXHVDMjE4XHVDODE1IFx1QkMyOVx1QzlDMClcbiAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmluZGV4UXVldWUuaGFzKGZpbGUucGF0aCkgJiYgIXRoaXMuaW5kZXhpbmdJblByb2dyZXNzLmhhcyhmaWxlLnBhdGgpKSB7XG4gICAgICAgIHRoaXMuaW5kZXhRdWV1ZS5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgdGhpcy5pbmRleGluZ0luUHJvZ3Jlc3MuYWRkKGZpbGUucGF0aCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIGlmICh0aGlzLmluZGV4ZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlci5pbmRleEZpbGUoZmlsZS5wYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coYFx1RDMwQ1x1Qzc3QyBcdUMyMThcdUM4MTUgXHVDNzc4XHVCMzcxXHVDMkYxOiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdUQzMENcdUM3N0MgXHVDMjE4XHVDODE1IFx1Qzc3OFx1QjM3MVx1QzJGMSBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0aGlzLmluZGV4aW5nSW5Qcm9ncmVzcy5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICAvKipcbiAgICogXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQyBcdUM3NzRcdUJDQTRcdUQyQjggXHVDQzk4XHVCOUFDXG4gICAqL1xuICBvbkZpbGVEZWxldGUoZmlsZTogVEZpbGUpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlciB8fCBmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaW5kZXhlci5kZWxldGVGaWxlKGZpbGUucGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEMzBDXHVDNzdDIFx1QzBBRFx1QzgxQyBcdUNDOThcdUI5QUM6ICR7ZmlsZS5wYXRofWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdUQzMENcdUM3N0MgXHVDMEFEXHVDODFDIFx1Q0M5OFx1QjlBQyBcdUMyRTRcdUQzMjg6ICR7ZmlsZS5wYXRofWAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHVEMzBDXHVDNzdDIFx1Qzc3NFx1Qjk4NCBcdUJDQzBcdUFDQkQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1Q0M5OFx1QjlBQ1xuICAgKi9cbiAgYXN5bmMgb25GaWxlUmVuYW1lKGZpbGU6IFRGaWxlLCBvbGRQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaW5kZXhlciB8fCBmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1Qzc3NFx1QzgwNCBcdUQzMENcdUM3N0MgXHVDMEFEXHVDODFDXG4gICAgICB0aGlzLmluZGV4ZXIuZGVsZXRlRmlsZShvbGRQYXRoKTtcblxuICAgICAgLy8gXHVDMEM4IFx1RDMwQ1x1Qzc3QyBcdUM3NzhcdUIzNzFcdUMyRjFcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICBpZiAodGhpcy5pbmRleGVyKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlci5pbmRleEZpbGUoZmlsZS5wYXRoLCBjb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYFx1RDMwQ1x1Qzc3QyBcdUM3NzRcdUI5ODQgXHVCQ0MwXHVBQ0JEIFx1Q0M5OFx1QjlBQzogJHtvbGRQYXRofSAtPiAke2ZpbGUucGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHVEMzBDXHVDNzdDIFx1Qzc3NFx1Qjk4NCBcdUJDQzBcdUFDQkQgXHVDQzk4XHVCOUFDIFx1QzJFNFx1RDMyODogJHtvbGRQYXRofSAtPiAke2ZpbGUucGF0aH1gLCBlcnJvcik7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBWYXVsdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25UdXJuIH0gZnJvbSBcIi4vY29udmVyc2F0aW9uXCI7XG5cbnR5cGUgU2FuaXRpemVkR2VuZXJhdGlvbkxvZyA9IE5vbk51bGxhYmxlPENvbnZlcnNhdGlvblR1cm5bXCJnZW5lcmF0aW9uTG9nXCJdPjtcblxuZXhwb3J0IHR5cGUgQ2hhdFNlc3Npb25TdW1tYXJ5ID0ge1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgdHVybkNvdW50OiBudW1iZXI7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xufTtcblxudHlwZSBTdG9yZWRDaGF0U2Vzc2lvbiA9IHtcbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIHR1cm5zOiBDb252ZXJzYXRpb25UdXJuW107XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xufTtcblxuY29uc3QgU0VTU0lPTl9GT0xERVIgPSBcIi5vdmwvY2hhdC1zZXNzaW9uc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUNoYXRTZXNzaW9uKFxuICB2YXVsdDogVmF1bHQsXG4gIHNlc3Npb25JZDogc3RyaW5nLFxuICB0dXJuczogQ29udmVyc2F0aW9uVHVybltdXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBub3JtYWxpemVkU2Vzc2lvbklkID0gc2Vzc2lvbklkLnRyaW0oKTtcbiAgaWYgKCFub3JtYWxpemVkU2Vzc2lvbklkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDMTM4XHVDMTU4IFx1QzgxQ1x1QkFBOVx1Qzc3NCBcdUJFNDRcdUM1QjQgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgfVxuXG4gIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyh2YXVsdCwgU0VTU0lPTl9GT0xERVIpO1xuICBjb25zdCBwYXRoID0gbm9ybWFsaXplUGF0aFNhZmUoYCR7U0VTU0lPTl9GT0xERVJ9LyR7YnVpbGRTZXNzaW9uRmlsZU5hbWUobm9ybWFsaXplZFNlc3Npb25JZCl9YCk7XG5cbiAgY29uc3QgcGF5bG9hZDogU3RvcmVkQ2hhdFNlc3Npb24gPSB7XG4gICAgc2Vzc2lvbklkOiBub3JtYWxpemVkU2Vzc2lvbklkLFxuICAgIHR1cm5zLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH07XG5cbiAgY29uc3QgZXhpc3RzID0gYXdhaXQgdmF1bHQuYWRhcHRlci5leGlzdHMocGF0aCk7XG4gIGlmIChleGlzdHMpIHtcbiAgICBhd2FpdCB2YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpKTtcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCB2YXVsdC5jcmVhdGUocGF0aCwgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgMikpO1xuICB9XG5cbiAgcmV0dXJuIHBhdGg7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0Q2hhdFNlc3Npb25zKHZhdWx0OiBWYXVsdCk6IFByb21pc2U8Q2hhdFNlc3Npb25TdW1tYXJ5W10+IHtcbiAgY29uc3QgZmlsZXMgPSBhd2FpdCBsaXN0U2Vzc2lvbkZpbGVzKHZhdWx0KTtcbiAgY29uc3Qgc3VtbWFyaWVzOiBDaGF0U2Vzc2lvblN1bW1hcnlbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByYXcgPSBhd2FpdCB2YXVsdC5hZGFwdGVyLnJlYWQoZmlsZSk7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdykgYXMgUGFydGlhbDxTdG9yZWRDaGF0U2Vzc2lvbj47XG4gICAgICBjb25zdCBzZXNzaW9uSWQgPSB0eXBlb2YgcGFyc2VkLnNlc3Npb25JZCA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlZC5zZXNzaW9uSWQudHJpbSgpIDogXCJcIjtcbiAgICAgIGlmICghc2Vzc2lvbklkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0dXJucyA9IEFycmF5LmlzQXJyYXkocGFyc2VkLnR1cm5zKSA/IHBhcnNlZC50dXJucyA6IFtdO1xuICAgICAgY29uc3QgdXBkYXRlZEF0ID1cbiAgICAgICAgdHlwZW9mIHBhcnNlZC51cGRhdGVkQXQgPT09IFwic3RyaW5nXCIgJiYgcGFyc2VkLnVwZGF0ZWRBdC50cmltKClcbiAgICAgICAgICA/IHBhcnNlZC51cGRhdGVkQXRcbiAgICAgICAgICA6IG5ldyBEYXRlKDApLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgIHN1bW1hcmllcy5wdXNoKHtcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICB0dXJuQ291bnQ6IHR1cm5zLmxlbmd0aCxcbiAgICAgICAgdXBkYXRlZEF0XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdW1tYXJpZXMuc29ydCgobGVmdCwgcmlnaHQpID0+IHJpZ2h0LnVwZGF0ZWRBdC5sb2NhbGVDb21wYXJlKGxlZnQudXBkYXRlZEF0KSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkQ2hhdFNlc3Npb24odmF1bHQ6IFZhdWx0LCBzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8Q29udmVyc2F0aW9uVHVybltdPiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRTZXNzaW9uSWQgPSBzZXNzaW9uSWQudHJpbSgpO1xuICBpZiAoIW5vcm1hbGl6ZWRTZXNzaW9uSWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUJEODhcdUI3RUNcdUM2MkMgXHVDMTM4XHVDMTU4IFx1QzgxQ1x1QkFBOVx1Qzc3NCBcdUJFNDRcdUM1QjQgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgfVxuXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBmaW5kU2Vzc2lvbkZpbGVCeUlkKHZhdWx0LCBub3JtYWxpemVkU2Vzc2lvbklkKTtcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDODAwXHVDN0E1XHVCNDFDIFx1QjMwMFx1RDY1NCBcdUFFMzBcdUI4NURcdUM3NDQgXHVDQzNFXHVDOUMwIFx1QkFCQlx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gIH1cblxuICByZXR1cm4gc2FuaXRpemVUdXJucyhzZXNzaW9uLnBhcnNlZC50dXJucyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDaGF0U2Vzc2lvbih2YXVsdDogVmF1bHQsIHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRTZXNzaW9uSWQgPSBzZXNzaW9uSWQudHJpbSgpO1xuICBpZiAoIW5vcm1hbGl6ZWRTZXNzaW9uSWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdUMwQURcdUM4MUNcdUQ1NjAgXHVDMTM4XHVDMTU4IFx1QzgxQ1x1QkFBOVx1Qzc3NCBcdUJFNDRcdUM1QjQgXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LlwiKTtcbiAgfVxuXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBmaW5kU2Vzc2lvbkZpbGVCeUlkKHZhdWx0LCBub3JtYWxpemVkU2Vzc2lvbklkKTtcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiXHVDMEFEXHVDODFDXHVENTYwIFx1QjMwMFx1RDY1NCBcdUFFMzBcdUI4NURcdUM3NDQgXHVDQzNFXHVDOUMwIFx1QkFCQlx1RDU4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIik7XG4gIH1cblxuICBhd2FpdCB2YXVsdC5hZGFwdGVyLnJlbW92ZShzZXNzaW9uLnBhdGgpO1xufVxuXG5mdW5jdGlvbiBzYW5pdGl6ZVR1cm5zKHR1cm5zOiB1bmtub3duKTogQ29udmVyc2F0aW9uVHVybltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHR1cm5zKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHNhbml0aXplZDogQ29udmVyc2F0aW9uVHVybltdID0gW107XG4gIGZvciAoY29uc3QgdHVybiBvZiB0dXJucykge1xuICAgIGlmICghdHVybiB8fCB0eXBlb2YgdHVybiAhPT0gXCJvYmplY3RcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3Qgcm9sZSA9ICh0dXJuIGFzIHsgcm9sZT86IHVua25vd24gfSkucm9sZTtcbiAgICBjb25zdCBjb250ZW50ID0gKHR1cm4gYXMgeyBjb250ZW50PzogdW5rbm93biB9KS5jb250ZW50O1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9ICh0dXJuIGFzIHsgdGltZXN0YW1wPzogdW5rbm93biB9KS50aW1lc3RhbXA7XG4gICAgY29uc3QgZ2VuZXJhdGlvbkxvZyA9ICh0dXJuIGFzIHsgZ2VuZXJhdGlvbkxvZz86IHVua25vd24gfSkuZ2VuZXJhdGlvbkxvZztcblxuICAgIGlmICghaXNDb252ZXJzYXRpb25Sb2xlKHJvbGUpIHx8IHR5cGVvZiBjb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0VHVybjogQ29udmVyc2F0aW9uVHVybiA9IHtcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgdGltZXN0YW1wID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBuZXh0VHVybi50aW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgfVxuXG4gICAgY29uc3Qgc2FuaXRpemVkR2VuZXJhdGlvbkxvZyA9IHNhbml0aXplR2VuZXJhdGlvbkxvZyhnZW5lcmF0aW9uTG9nKTtcbiAgICBpZiAoc2FuaXRpemVkR2VuZXJhdGlvbkxvZykge1xuICAgICAgbmV4dFR1cm4uZ2VuZXJhdGlvbkxvZyA9IHNhbml0aXplZEdlbmVyYXRpb25Mb2c7XG4gICAgfVxuXG4gICAgc2FuaXRpemVkLnB1c2gobmV4dFR1cm4pO1xuICB9XG5cbiAgcmV0dXJuIHNhbml0aXplZDtcbn1cblxuZnVuY3Rpb24gaXNDb252ZXJzYXRpb25Sb2xlKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgQ29udmVyc2F0aW9uVHVybltcInJvbGVcIl0ge1xuICByZXR1cm4gdmFsdWUgPT09IFwidXNlclwiIHx8IHZhbHVlID09PSBcImFzc2lzdGFudFwiIHx8IHZhbHVlID09PSBcInN5c3RlbVwiO1xufVxuXG5mdW5jdGlvbiBzYW5pdGl6ZUdlbmVyYXRpb25Mb2codmFsdWU6IHVua25vd24pOiBTYW5pdGl6ZWRHZW5lcmF0aW9uTG9nIHwgbnVsbCB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCByYXcgPSB2YWx1ZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgY29uc3QgZHVyYXRpb25NcyA9IE51bWJlcihyYXcuZHVyYXRpb25Ncyk7XG4gIGNvbnN0IHN0YXJ0ZWRBdCA9IHR5cGVvZiByYXcuc3RhcnRlZEF0ID09PSBcInN0cmluZ1wiID8gcmF3LnN0YXJ0ZWRBdCA6IFwiXCI7XG4gIGNvbnN0IGNvbXBsZXRlZEF0ID0gdHlwZW9mIHJhdy5jb21wbGV0ZWRBdCA9PT0gXCJzdHJpbmdcIiA/IHJhdy5jb21wbGV0ZWRBdCA6IFwiXCI7XG4gIGNvbnN0IGVzdGltYXRlZCA9IHR5cGVvZiByYXcuZXN0aW1hdGVkID09PSBcImJvb2xlYW5cIiA/IHJhdy5lc3RpbWF0ZWQgOiBmYWxzZTtcblxuICBpZiAoIU51bWJlci5pc0Zpbml0ZShkdXJhdGlvbk1zKSB8fCAhc3RhcnRlZEF0IHx8ICFjb21wbGV0ZWRBdCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgbG9nOiBTYW5pdGl6ZWRHZW5lcmF0aW9uTG9nID0ge1xuICAgIGR1cmF0aW9uTXMsXG4gICAgc3RhcnRlZEF0LFxuICAgIGNvbXBsZXRlZEF0LFxuICAgIGVzdGltYXRlZFxuICB9O1xuXG4gIGNvbnN0IHByb3ZpZGVyID0gdHlwZW9mIHJhdy5wcm92aWRlciA9PT0gXCJzdHJpbmdcIiA/IHJhdy5wcm92aWRlci50cmltKCkgOiBcIlwiO1xuICBpZiAocHJvdmlkZXIpIHtcbiAgICBsb2cucHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgfVxuXG4gIGNvbnN0IG1vZGVsID0gdHlwZW9mIHJhdy5tb2RlbCA9PT0gXCJzdHJpbmdcIiA/IHJhdy5tb2RlbC50cmltKCkgOiBcIlwiO1xuICBpZiAobW9kZWwpIHtcbiAgICBsb2cubW9kZWwgPSBtb2RlbDtcbiAgfVxuXG4gIGNvbnN0IGlucHV0VG9rZW5zID0gTnVtYmVyKHJhdy5pbnB1dFRva2Vucyk7XG4gIGlmIChOdW1iZXIuaXNGaW5pdGUoaW5wdXRUb2tlbnMpKSB7XG4gICAgbG9nLmlucHV0VG9rZW5zID0gaW5wdXRUb2tlbnM7XG4gIH1cblxuICBjb25zdCBvdXRwdXRUb2tlbnMgPSBOdW1iZXIocmF3Lm91dHB1dFRva2Vucyk7XG4gIGlmIChOdW1iZXIuaXNGaW5pdGUob3V0cHV0VG9rZW5zKSkge1xuICAgIGxvZy5vdXRwdXRUb2tlbnMgPSBvdXRwdXRUb2tlbnM7XG4gIH1cblxuICBjb25zdCB0b3RhbFRva2VucyA9IE51bWJlcihyYXcudG90YWxUb2tlbnMpO1xuICBpZiAoTnVtYmVyLmlzRmluaXRlKHRvdGFsVG9rZW5zKSkge1xuICAgIGxvZy50b3RhbFRva2VucyA9IHRvdGFsVG9rZW5zO1xuICB9XG5cbiAgY29uc3QgdG9rZW5zUGVyU2Vjb25kID0gTnVtYmVyKHJhdy50b2tlbnNQZXJTZWNvbmQpO1xuICBpZiAoTnVtYmVyLmlzRmluaXRlKHRva2Vuc1BlclNlY29uZCkpIHtcbiAgICBsb2cudG9rZW5zUGVyU2Vjb25kID0gdG9rZW5zUGVyU2Vjb25kO1xuICB9XG5cbiAgcmV0dXJuIGxvZztcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdFNlc3Npb25GaWxlcyh2YXVsdDogVmF1bHQpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHZhdWx0LmFkYXB0ZXIuZXhpc3RzKFNFU1NJT05fRk9MREVSKTtcbiAgaWYgKCFleGlzdHMpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBsaXN0ZWQgPSBhd2FpdCB2YXVsdC5hZGFwdGVyLmxpc3QoU0VTU0lPTl9GT0xERVIpO1xuICByZXR1cm4gbGlzdGVkLmZpbGVzLmZpbHRlcigocGF0aCkgPT4gcGF0aC5lbmRzV2l0aChcIi5qc29uXCIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmluZFNlc3Npb25GaWxlQnlJZChcbiAgdmF1bHQ6IFZhdWx0LFxuICBzZXNzaW9uSWQ6IHN0cmluZ1xuKTogUHJvbWlzZTx7IHBhdGg6IHN0cmluZzsgcGFyc2VkOiBQYXJ0aWFsPFN0b3JlZENoYXRTZXNzaW9uPiB9IHwgbnVsbD4ge1xuICBjb25zdCBmaWxlcyA9IGF3YWl0IGxpc3RTZXNzaW9uRmlsZXModmF1bHQpO1xuICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gYXdhaXQgdmF1bHQuYWRhcHRlci5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpIGFzIFBhcnRpYWw8U3RvcmVkQ2hhdFNlc3Npb24+O1xuICAgICAgaWYgKHBhcnNlZC5zZXNzaW9uSWQgIT09IHNlc3Npb25JZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHBhdGg6IGZpbGUsIHBhcnNlZCB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyh2YXVsdDogVmF1bHQsIGZvbGRlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoU2FmZShmb2xkZXIpLnJlcGxhY2UoL15cXC8rLywgXCJcIik7XG4gIGlmICghbm9ybWFsaXplZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHNlZ21lbnRzID0gbm9ybWFsaXplZC5zcGxpdChcIi9cIik7XG4gIGxldCBjdXJyZW50ID0gXCJcIjtcbiAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgY3VycmVudCA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fS8ke3NlZ21lbnR9YCA6IHNlZ21lbnQ7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdmF1bHQuYWRhcHRlci5leGlzdHMoY3VycmVudCk7XG4gICAgaWYgKCFleGlzdHMpIHtcbiAgICAgIGF3YWl0IHZhdWx0LmNyZWF0ZUZvbGRlcihjdXJyZW50KTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYnVpbGRTZXNzaW9uRmlsZU5hbWUoc2Vzc2lvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzYWZlTmFtZSA9IHNlc3Npb25JZFxuICAgIC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgXCIgXCIpXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgLnRyaW0oKSB8fCBcInNlc3Npb25cIjtcbiAgcmV0dXJuIGAke3NhZmVOYW1lfS0ke2hhc2hTZXNzaW9uSWQoc2Vzc2lvbklkKX0uanNvbmA7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGhTYWZlKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoXG4gICAgLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpXG4gICAgLnJlcGxhY2UoL1xcLysvZywgXCIvXCIpXG4gICAgLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIGhhc2hTZXNzaW9uSWQoc2Vzc2lvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgaGFzaCA9IDUzODE7XG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZXNzaW9uSWQubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgaGFzaCA9IChoYXNoICogMzMpIF4gc2Vzc2lvbklkLmNoYXJDb2RlQXQoaW5kZXgpO1xuICB9XG4gIHJldHVybiBNYXRoLmFicyhoYXNoID4+PiAwKS50b1N0cmluZygxNik7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdPLFNBQVMsaUJBQWlCLEtBQVUsVUFBbUM7QUFIOUU7QUFJRSxRQUFNLFlBQVcsMENBQVUsT0FBVixZQUFnQjtBQUNqQyxhQUFPLGdDQUFj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LElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFDOUQ7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQUs7QUFBQSxJQUNqRTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUMxQztBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQUs7QUFBQSxJQUFNO0FBQUEsSUFDL0M7QUFBQSxJQUFLO0FBQUEsSUFBTTtBQUFBLElBQUs7QUFBQSxJQUFPO0FBQUEsSUFBTztBQUFBLElBQzlCO0FBQUEsSUFBTztBQUFBLElBQU87QUFBQSxJQUFPO0FBQUEsSUFBTTtBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFDckM7QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUFNO0FBQUEsSUFBTTtBQUFBLElBQU07QUFBQSxJQUNwQztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsSUFBSztBQUFBLElBQUs7QUFBQSxJQUFLO0FBQUEsRUFDM0IsQ0FBQztBQUVELFFBQU0sV0FBVyxNQUFNLE9BQU8sVUFBUSxDQUFDLFVBQVUsSUFBSSxJQUFJLEtBQUssS0FBSyxVQUFVLENBQUM7QUFHOUUsUUFBTSxZQUFZLG9CQUFJLElBQW9CO0FBQzFDLGFBQVcsUUFBUSxVQUFVO0FBQzNCLGNBQVUsSUFBSSxPQUFPLFVBQVUsSUFBSSxJQUFJLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDcEQ7QUFHQSxRQUFNLFNBQVMsTUFBTSxLQUFLLFVBQVUsUUFBUSxDQUFDLEVBQzFDLEtBQUssQ0FBQyxHQUFH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ZCxrQkFBUSxLQUFLLGlEQUFjLEtBQUssSUFBSSxJQUFJLEtBQUs7QUFBQSxRQUMvQztBQUFBLE1BQ0Y7QUFFQSxjQUFRLElBQUksOERBQWlCLE9BQU8sa0NBQVM7QUFBQSxJQUMvQyxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0saURBQWMsS0FBSztBQUNqQyxZQUFNO0FBQUEsSUFDUjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLHFCQUF5QztBQXphbkQ7QUEwYUksU0FBSSxVQUFLLFNBQVMsb0JBQWQsbUJBQStCLFFBQVE7QUFDekMsYUFBTyxLQUFLLFNBQVMsZ0JBQWdCLEtBQUs7QUFBQSxJQUM1QztBQUVBLFVBQU0sU0FBUyxrQkFBa0IsS0FBSyxTQUFTLGlCQUFpQjtBQUNoRSxXQUFPLGlDQUFRO0FBQUEsRUFDakI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLDJCQUEyQixVQUF1QixTQUErQjtBQUN2RixXQUNFLFNBQVMsc0JBQXNCLFFBQVEscUJBQ3ZDLFNBQVMsbUJBQW1CLFFBQVEsa0JBQ3BDLFNBQVMsb0JBQW9CLFFBQVE7QUFBQSxFQUV6QztBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAib3B0aW9ucyIsICJzdHIiLCAic3RyaW5nIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInJlcXVpcmVfanNfeWFtbCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJ5YW1sIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAic3RyIiwgImV4cG9ydHMiLCAic3RyIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImVuZ2luZXMiLCAib3B0aW9ucyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAic3RyIiwgIm1hdHRlciIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJvcHRpb25zIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAic3RyIiwgIm9wdGlvbnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZW5naW5lcyIsICJwYXJzZSIsICJtYXR0ZXIiLCAib3B0aW9ucyIsICJzdHIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJvcHRpb25zIiwgInRleHQiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJvcHRpb25zIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJTY2hlbWFUeXBlIiwgIkV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2UiLCAiT3V0Y29tZSIsICJIYXJtQ2F0ZWdvcnkiLCAiSGFybUJsb2NrVGhyZXNob2xkIiwgIkhhcm1Qcm9iYWJpbGl0eSIsICJCbG9ja1JlYXNvbiIsICJGaW5pc2hSZWFzb24iLCAiVGFza1R5cGUiLCAiRnVuY3Rpb25DYWxsaW5nTW9kZSIsICJEeW5hbWljUmV0cmlldmFsTW9kZSIsICJUYXNrIiwgIl9hIiwgImFwcGVuZEVtYmVkZGluZ0xvZyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZW5zdXJlRm9sZGVyRXhpc3RzIiwgImVuc3VyZVVuaXF1ZVBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgIkVtYmVkZGluZ0dlbmVyYXRvciIsICJtb2R1bGUiLCAibWF0dGVyIiwgIm9wdGlvbnMiLCAiY2h1bmtUZXh0IiwgImltcG9ydF9jcnlwdG8iLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9wYXRoIiwgIkVtYmVkZGluZ0dlbmVyYXRvciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X3BhdGgiLCAiZW5zdXJlRm9sZGVyRXhpc3RzIiwgIm9wdGlvbnMiXQp9Cg==
